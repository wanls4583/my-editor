{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?adbe","webpack:///src/App.vue","webpack:///./src/App.vue?4c4f","webpack:///./src/App.vue","webpack:///./src/components/Home.vue?0bcd","webpack:///./src/module/tokenizer/rules/javascript.js","webpack:///./src/module/tokenizer/rules/css.js","webpack:///./src/module/tokenizer/rules/html.js","webpack:///./src/common/Util.js","webpack:///./src/module/tokenizer/core/index.js","webpack:///./src/module/lint/language/javascript.js","webpack:///./src/module/lint/language/css.js","webpack:///./src/module/lint/language/html.js","webpack:///./src/module/lint/core/index.js","webpack:///./src/module/fold/index.js","webpack:///./src/module/search/index.js","webpack:///./src/common/Btree.js","webpack:///./src/module/select/index.js","webpack:///./src/module/cursor/index.js","webpack:///./src/module/history/index.js","webpack:///./src/module/context/index.js","webpack:///./src/module/shortcut/index.js","webpack:///./src/components/MenuBar.vue?a562","webpack:///./src/components/Menu.vue?14b5","webpack:///src/components/Menu.vue","webpack:///./src/components/Menu.vue?b35d","webpack:///./src/components/Menu.vue","webpack:///src/components/MenuBar.vue","webpack:///./src/components/MenuBar.vue?9b1f","webpack:///./src/components/MenuBar.vue","webpack:///./src/components/StatusBar.vue?b037","webpack:///src/components/StatusBar.vue","webpack:///./src/components/StatusBar.vue?3f37","webpack:///./src/components/StatusBar.vue","webpack:///./src/components/Search.vue?1a68","webpack:///src/components/Search.vue","webpack:///./src/components/Search.vue?d79a","webpack:///./src/components/Search.vue","webpack:///./src/components/Tip.vue?9e11","webpack:///src/components/Tip.vue","webpack:///./src/components/Tip.vue?e042","webpack:///./src/components/Tip.vue","webpack:///src/components/Home.vue","webpack:///./src/components/Home.vue?6ab4","webpack:///./src/components/Home.vue","webpack:///./src/router.js","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","component","ref","staticClass","style","_topBarHeight","_statusHeight","on","$event","preventDefault","onContextmenu","arguments","onClickEditor","onWheel","top","_numTop","staticStyle","_v","_s","maxLine","_l","line","num","class","_activeLine","height","_lineHeight","errorMap","onIconMouseLeave","onIconMouseOver","fold","onToggleFold","_e","_leftShadow","onScrollerMdown","onScrollerMup","_top","minWidth","_contentMinWidth","onSelectend","active","selected","isFsearch","domProps","html","range","left","width","tab","_tabLineLeft","visibility","_cursorVisible","stopPropagation","onHscroll","_hScrollWidth","onVscroll","scrollerHeight","_textAreaPos","onBlur","onCompositionend","onCompositionstart","onCopy","onCut","onFocus","onInput","onKeyDown","onPaste","directives","rawName","expression","searchCount","searchNow","onCloseSearch","onSearchNext","onSearchPrev","replace","replaceAll","onSearch","topBarHeight","_nowColumn","statusHeight","language","_nowLine","tabSize","menuList","menuStyle","onClickMenu","tipContent","tipStyle","variable","strValid","e","side","tplStrChild","tplStrReg","start","end","token","plainToken","foldName","valid","childRule","rules","level","regexp","regex","option","text","index","RegExp","foldType","comment","braces","styleRules","attrRules","tagFoldName","tagFoldType","scriptStart","tagToken","scriptEnd","styleStart","styleEnd","exec","jsRules","cssRules","Util","clipboardData","Promise","resolve","getData","navigator","clipboard","readText","setData","writeText","String","Number","val","tmp","arr","sort","arg1","arg2","wrap","str1","str2","id1","getUUID","id2","$tempDom","$","append","dom","charWidth","scrollWidth","charHight","clientHeight","fontSize","getComputedStyle","currentStyle","fullAngleCharWidth","remove","str","charW","fullCharW","substr","substring","match","fullAngleReg","tabNum","getStrExactWidth","count","id","_splitStr","clientWidth","Math","floor","column","htmlTrans","join","space","cont","targetObj","originObj","excludeKeys","_assign","Map","assigned","indexOf","nodeName","nodeType","has","Array","set","len","random","toString","funStr","blob","Blob","url","URL","createObjectURL","worker","Worker","target","context","properties","map","defineProperties","peek","empty","insert","item","right","mid","keyCode","DELETE","BACKSPACE","command","INSERT","MOVEUP","MOVEDOWN","COPY_UP","COPY_DOWN","DELETE_COPY_UP","DELETE_COPY_DOWN","REPLACE","constData","PAIR_START","PAIR_START_END","PAIR_END","FOLD_OPEN","FOLD_CLOSE","DEFAULT","editor","currentLine","languageMap","initProperties","initLanguage","clearTimeout","tokenizeLines","timer","initRules","htmlRules","obj","ruleIdMap","regexMap","ruleId","deepAssign","setRuleId","rule","startBy","endBy","_item","states","statesKey","sources","sourceMap","regexs","resultStates","getEndRegex","reverse","getStartRegex","source","nowLine","onInsertContentBefore","$nextTick","tokenizeVisibleLins","tokenizeVisibleLinsId","startLine","maxVisibleLines","endLine","processedLines","processedTime","Date","now","lineObj","htmls","tokens","tokenizeLine","folds","type","split","renderLine","lineId","setTimeout","lastIndex","preEnd","newStates","getRegex","resultObj","splitLongToken","groups","undefined","getTokenType","getFold","getToken","startCol","pop","expIndex","getChildExpIndex","getFoldName","getFoldType","_checkFold","childExpIndex","captures","hasChildExp","filter","preRuleId","preRule","getCombRegex","_isArray","keywords","assignOperator","binaryOperator","unitOperator","brackets","regs","number","identifier","string1","string2","string3","other","regflagsMap","maxErrors","TokenType","label","_isTokenType","ErrorType","Error","param","error","Lexer","init","Parser","lexer","cacheList","backs","parseList","preToken","errors","NUMBER","BOOLEAN","STRING","IDENTIFIER","KEYWORD","OPERATOR","BRACKET","PUNCTUATOR","REGEXP","OTHER","UNEXPECTED","EXPECTED","MISS","UNMATCH","expectedIdentifier","expectedSemicolon","expected","unexpected","unmatch","lines","input","assignOperatorMap","unitOperatorMap","binaryOperatorMap","keywordsMap","bracketsMap","reset","texts","skip","skipLine","hasNext","isVariable","isValue","isScalar","isDotAble","isPostOp","isPreOp","isAssignOperator","isUnitOperator","isBinaryOperator","isKeyWord","isBracket","isTokenType","craeteToken","scanSpace","scanComment","ch1","ch2","startToken","scanString","that","_end","_parseTmpStr","reg","parser","parseExprStmt","peekMatch","scanNunmber","scanIdentifier","scanBracket","ch","scanOperator","ch3","ch4","scanOther","next","_scanOp","_token","assign","recovery","cache","hasCache","cacheIndex","pass","pre2Token","puted","nextMatch","lookahead","putBack","unshift","skipSemicolon","Infinity","parse","startTime","parseStmt","parseTimer","skipCheckSemicolon","parseDeclareStmt","parseObjectStmt","parseBlockStmt","parseImportStmt","parseExportStmt","parseIfStmt","parseSwitchStmt","parseWithStmt","parseWhileStmt","parseDoStmt","parseTryStmt","parseForStmt","parseClassStmt","parseControlStmt","parseReturnStmt","parseThrowStmt","parseFunctionStmt","ends","parseExpr","parseFunArgsStmt","_identifier","parseAssignStmt","_nextExpr","_stmt","needName","checkIn","parseRegex","toLowerCase","leftHand","parseLeftHand","parseDot","assignAble","parseProperty","isSignOp","parseCallArgs","parseParen","parseArray","parseNew","parseArrorwFunction","lookLength","lookToken","skipNextExpr","a","b","tag","propertyName","numValue","propertyValue","punctuator","SELECTOR","PROPERTY","VALUE","NUM_VALUE","isProp","scanPunctuator","parseSelector","parseBlock","parseMedia","parseKeyFrames","parseCharset","parseImport","onlyValue","_nextMatchProperty","_nextMatchValue","hasValue","lbraces","htmlLint","js","css","enter","comments","parseComentRange","pos","setLineColumn","parseJs","concat","parseCss","jsParser","_parse","cssParser","parseFun","checkInComment","_compare","Function","jsLint","cssLint","parseId","terminate","setErrorMap","createWorker","onmessage","mod","postMessage","editorFunObj","cursorPos","preCursorPos","findFoldIndex","unFolds","unFold","foldMap","delete","onDeleteContentBefore","selecter","ranges","forEach","delLine","resultFold","getRangeFold","foldIconCheck","stack","lineCount","realLine","relLine","searchObj","config","direct","prev","getToSearchConfig","_search","addRange","list","fSearcher","cursorFocus","searcher","clearSearch","setActive","cursor","setCursorPos","clearNow","addActive","getRangeByCursorPos","nowCursorPos","addCursorPos","preExec","resultCaches","resultIndexMap","rangePos","strs","regStr","wholeWord","ignoreCase","comparePos","size","cacheData","refreshSearchId","refreshSearch","search","clearRange","clearActive","getFromCache","0","setNow","Node","max","dataList","linkList","pNode","Btree","compare","root","head","node","arrayCache","link","half","iterator","_insert","newNode","isPnode","pIndex","leftNode","rightNode","_moveRight","_moveLeft","_join","orginIndex","originResult","_next","_prev","cb","results","isInsert","res","comparator","activedRanges","setContextData","prop","setEditorData","multiCursorPos","moveCursor","updateRange","createRange","renderSelectedBg","setRange","clearCursorPos","same","getCursorsByLineColumn","filterRange","it","dels","toArray","word","dWord","multiKeyCode","del","setNowCursorPos","maxColumn","moveColumn","renderCursor","getStrWidth","getColumnByWidth","updateCursorPos","sReg","history","doCommand","serial","undo","redo","commandType","deleteContent","insertContent","moveLineUp","moveLineDown","copyLineDown","deleteCopyLineDown","copyLineUp","deleteCopyLineUp","lastCommand","sortComand","pushHistoryTime","_checkSameOp","_combCheck","_combCommand","commandList","_index","MIN_SAFE_INTEGER","lineIdMap","renderedIdMap","renderedLineMap","initData","historyArr","cursorPosList","_historyArr","_insertMultiContent","updateHistory","pushHistory","prePos","historyObj","lineDelta","columnDelta","_text","commandObj","margin","_insertContent","nowLineText","originPos","nowColume","newLine","newColumn","tokenizer","lint","folder","onInsertContentAfter","setLineWidth","render","rangeList","_deleteMultiContent","_deleteRangePos","_deleteCursorPos","_deleteContent","startObj","deleteText","rangeUuid","endObj","getRangeText","maxWidthObj","clear","onDeleteContentAfter","setMaxWidth","moveLine","historyPosList","_moveLine","upLine","downLine","upText","downText","copyLine","originList","originLine","deleteCopyLine","preItem","historyRnageList","cut","searchText","getNowWord","startColumn","endColumn","ctrlKey","shiftKey","select","deleteLine","addCursorLineEnds","altKey","addCursorAbove","addCursorBelow","_moveCursor","selectAll","searchWord","openSearch","showMemu","editMenuList","onEditMenuChange","selectionMenuList","onSelectionMenuChange","group","checked","checkable","disabled","onClick","shortcut","showTabsize","_tabSize","tabSizeList","bottom","onTabsizeChange","showLanguage","_language","languageList","onLnaguageChange","showReplace","replaceVisible","input1Focus","composing","changeCase","changeWhole","color","input2Focus","onKeyDown2","replaceText","searchPrevActive","searchPrev","searchNextActive","searchNext","close","content","Vue","use","Router","router","routes","path","Home","meta","title","redirect","productionTip","h","App","$mount"],"mappings":"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","file":"js/app.2b6cf362.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('keep-alive',[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div id=\"app\">\n\t\t<keep-alive>\n\t\t\t<router-view></router-view>\n\t\t</keep-alive>\n\t</div>\n</template>\n\n<script>\n\nexport default {\n    name: 'App',\n}\n</script>\n\n<style>\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=151c70cd&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"editor\",staticClass:\"my-editor-wrap\",style:({'padding-top':_vm._topBarHeight,'padding-bottom':_vm._statusHeight}),on:{\"contextmenu\":function($event){$event.preventDefault();return _vm.onContextmenu.apply(null, arguments)},\"mousedown\":_vm.onClickEditor,\"selectstart\":function($event){$event.preventDefault();},\"wheel\":function($event){$event.preventDefault();return _vm.onWheel.apply(null, arguments)}}},[_c('div',{staticClass:\"my-editor-nums\",style:({top: _vm._numTop})},[_c('div',{staticClass:\"my-editor-num\",staticStyle:{\"visibility\":\"hidden\"}},[_vm._v(_vm._s(_vm.maxLine))]),_vm._l((_vm.renderHtmls),function(line){return _c('div',{key:line.num,staticClass:\"my-editor-num\",class:{'my-editor-num-active': _vm._activeLine(line.num)},style:({height:_vm._lineHeight, 'line-height':_vm._lineHeight})},[_c('span',{staticClass:\"my-editor-icon my-editor-center\",class:[_vm.errorMap[line.num]?'my-editor-icon-error':''],on:{\"mouseleave\":_vm.onIconMouseLeave,\"mouseover\":function($event){return _vm.onIconMouseOver(line.num, $event)}}}),_c('span',[_vm._v(_vm._s(line.num))]),(line.fold)?_c('span',{staticClass:\"my-editor-fold my-editor-center\",class:[line.fold=='open'?'my-editor-fold-open':'my-editor-fold-close'],on:{\"click\":function($event){return _vm.onToggleFold(line.num)}}}):_vm._e()])})],2),_c('div',{staticClass:\"my-editor-content-wrap\",style:({'box-shadow': _vm._leftShadow})},[_c('div',{ref:\"scroller\",staticClass:\"my-editor-content-scroller\",on:{\"mousedown\":_vm.onScrollerMdown,\"mouseup\":_vm.onScrollerMup}},[_c('div',{ref:\"content\",staticClass:\"my-editor-content\",style:({top: _vm._top, minWidth: _vm._contentMinWidth}),on:{\"selectend\":function($event){$event.preventDefault();return _vm.onSelectend.apply(null, arguments)}}},_vm._l((_vm.renderHtmls),function(line){return _c('div',{key:line.num,staticClass:\"my-editor-line\",class:{active: _vm._activeLine(line.num)},style:({height:_vm._lineHeight, 'line-height':_vm._lineHeight}),attrs:{\"data-line\":line.num,\"id\":'line_'+line.num}},[_c('div',{staticClass:\"my-editor-code\",class:[line.selected ? 'my-editor-select-bg my-editor-select-active' : '', line.isFsearch ? 'my-editor-select-f' : '', line.fold == 'close' ? 'fold-close' : ''],attrs:{\"data-line\":line.num},domProps:{\"innerHTML\":_vm._s(line.html)}}),_vm._l((line.selectStarts),function(range){return _c('div',{staticClass:\"my-editor-line-bg my-editor-select-bg\",class:{'my-editor-select-active': range.active,'my-editor-select-f': range.isFsearch},style:({left: range.left + 'px', width: range.width + 'px'})})}),_vm._l((line.selectEnds),function(range){return _c('div',{staticClass:\"my-editor-line-bg my-editor-select-bg\",class:{'my-editor-select-active': range.active,'my-editor-select-f': range.isFsearch},style:({left: range.left + 'px', width: range.width + 'px'})})}),_vm._l((line.tabNum),function(tab){return _c('span',{staticClass:\"my-editor-tab-line\",style:({left: _vm._tabLineLeft(tab)})})}),_vm._l((line.cursorList),function(left){return _c('div',{staticClass:\"my-editor-cursor\",staticStyle:{\"top\":\"0px\"},style:({height: _vm._lineHeight, left: left, visibility: _vm._cursorVisible})})})],2)}),0)]),_c('div',{ref:\"hScroller\",staticClass:\"my-editor-h-scroller-wrap\",on:{\"mousedown\":function($event){$event.stopPropagation();},\"scroll\":_vm.onHscroll}},[_c('div',{staticClass:\"my-editor-h-scroller\",style:({width: _vm._hScrollWidth})})]),_c('div',{ref:\"vScroller\",staticClass:\"my-editor-v-scroller-wrap\",on:{\"mousedown\":function($event){$event.stopPropagation();},\"scroll\":_vm.onVscroll}},[_c('div',{staticClass:\"my-editor-v-scroller\",style:({height: _vm.scrollerHeight})})]),_c('textarea',{ref:\"textarea\",staticClass:\"my-editor-textarea\",style:({top: _vm._textAreaPos.top, left: _vm._textAreaPos.left}),on:{\"blur\":_vm.onBlur,\"compositionend\":_vm.onCompositionend,\"compositionstart\":_vm.onCompositionstart,\"copy\":function($event){$event.preventDefault();return _vm.onCopy.apply(null, arguments)},\"cut\":function($event){$event.preventDefault();return _vm.onCut.apply(null, arguments)},\"focus\":_vm.onFocus,\"input\":_vm.onInput,\"keydown\":_vm.onKeyDown,\"paste\":function($event){$event.preventDefault();return _vm.onPaste.apply(null, arguments)}}}),_c('search-dialog',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchVisible),expression:\"searchVisible\"}],ref:\"searchDialog\",attrs:{\"count\":_vm.searchCount,\"now\":_vm.searchNow},on:{\"close\":_vm.onCloseSearch,\"next\":function($event){return _vm.onSearchNext(false)},\"prev\":function($event){return _vm.onSearchPrev(false)},\"replace\":_vm.replace,\"replaceAll\":_vm.replaceAll,\"search\":_vm.onSearch}})],1),_c('menu-bar',{ref:\"menuBar\",attrs:{\"height\":_vm.topBarHeight}}),_c('status-bar',{ref:\"statusBar\",attrs:{\"column\":_vm._nowColumn,\"height\":_vm.statusHeight,\"language\":_vm.language,\"line\":_vm._nowLine,\"tabSize\":_vm.tabSize},on:{\"update:language\":function($event){_vm.language=$event},\"update:tabSize\":function($event){_vm.tabSize=$event},\"update:tab-size\":function($event){_vm.tabSize=$event}}}),_c('Menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisble),expression:\"menuVisble\"}],ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onClickMenu}}),_c('tip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tipContent),expression:\"tipContent\"}],attrs:{\"content\":_vm.tipContent,\"styles\":_vm.tipStyle}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const variable = `[\\\\$_a-zA-Z][\\\\$_a-zA-Z0-9]*?`\r\nconst strValid = function (e) {\r\n    let value = e.value;\r\n    if (e.side === 'end' && value[0] === '\\\\' && value.length % 2 === 0) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nconst tplStrChild = {};\r\n//字符串``\r\nconst tplStrReg = {\r\n    start: /`/,\r\n    end: /\\\\*?`/,\r\n    token: 'js-string',\r\n    plainToken: 'js-string',\r\n    foldName: 'js-string',\r\n    valid: strValid,\r\n    childRule: {\r\n        rules: [{\r\n            start: /\\$\\{/,\r\n            end: /\\}/,\r\n            foldName: 'js-string-expr',\r\n            level: 1,\r\n            childRule: tplStrChild\r\n        }]\r\n    }\r\n};\r\n// 正则字面量\r\nconst regexp = {\r\n    start: /(?<=^|[\\(\\{\\[\\;\\,\\:\\?\\!\\+\\-\\*\\%\\=\\>\\<\\&\\|]\\s*?)\\//,\r\n    end: /(?<=(?:\\\\[\\s\\S]|[^\\\\])+?)\\/(?:i|m|g|im|mi|ig|gi|mg|gm|img|igm|mig|mgi|gim|gmi)?|$/i,\r\n    childRule: {\r\n        rules: [{\r\n            regex: /\\\\b/,\r\n            token: 'js-regex-ctrl'\r\n        }, {\r\n            regex: /\\\\[\\s\\S]/,\r\n            token: 'js-regex-escape'\r\n        }, {\r\n            regex: /\\?\\=|\\?\\<\\=|\\?\\!|\\?\\<\\!/,\r\n            token: 'js-regex'\r\n        }, {\r\n            regex: /\\*|\\^|\\$|\\?/,\r\n            token: 'js-regex-ctrl'\r\n        }, {\r\n            start: /\\[/,\r\n            end: /(?<!\\\\)\\]/,\r\n            token: 'js-regex-bracket',\r\n            childRule: {\r\n                rules: [{\r\n                    regex: /\\^/,\r\n                    token: 'js-regex-ctrl',\r\n                    valid: function (option) {\r\n                        let text = option.text;\r\n                        let index = option.index;\r\n                        if (text[index - 1] === '[' && text[index - 2] !== '\\\\') {\r\n                            return true;\r\n                        }\r\n                        return false;\r\n                    }\r\n                }]\r\n            }\r\n        }]\r\n    },\r\n    token: 'js-regex'\r\n}\r\nconst rules = [\r\n    tplStrReg,\r\n    //字符串''\r\n    {\r\n        start: /'/,\r\n        end: /\\\\*?'|[^\\\\]$|^$/,\r\n        token: 'js-string',\r\n        foldName: 'js-single-string',\r\n        valid: strValid\r\n    },\r\n    //字符串\"\"\"\r\n    {\r\n        start: /\"/,\r\n        end: /\\\\*?\"|[^\\\\]$|^$/,\r\n        token: 'js-string',\r\n        foldName: 'js-double-string',\r\n        valid: strValid\r\n    },\r\n    //多行注释\r\n    {\r\n        start: /\\/\\*/,\r\n        end: /\\*\\//,\r\n        token: 'js-comment',\r\n        foldName: 'js-comment'\r\n    }, {\r\n        regex: /\\/\\/[\\s\\S]*$/,\r\n        token: 'js-comment'\r\n    },\r\n    regexp,\r\n    {\r\n        regex: /\\bvar\\b|\\blet\\b|\\bconst\\b/,\r\n        token: 'js-type'\r\n    },\r\n    {\r\n        regex: /\\bcontinue\\b|\\bbreak\\b|\\bswitch\\b|\\bcase\\b|\\bdo\\b|\\bwhile\\b|\\belse\\b|\\bfor\\b|\\bif\\b|\\bnew\\b|\\breturn\\b|\\bfrom\\b|\\btypeof|\\beach\\b|\\bin\\b|\\bimport\\b|\\bexport\\b|\\bdefault\\b|\\bwith\\b|\\bthrow\\b|\\btry\\b|\\bcatch\\b|\\bfinally\\b/,\r\n        token: 'js-key'\r\n    }, {\r\n        regex: /\\bclass\\b/, //class {}\r\n        token: 'js-class'\r\n    }, {\r\n        regex: /\\b[A-Z][\\\\$_a-zA-Z0-9]*?(?=\\.)/, //Token.\r\n        token: 'js-function-class'\r\n    }, {\r\n        regex: /\\bfunction\\b/,\r\n        token: 'js-function'\r\n    }, {\r\n        regex: new RegExp(`(${variable})\\\\s*?(?=\\\\([^\\\\(\\\\)]*?\\\\)\\\\s*?\\\\{)`), //ie. test(){}\r\n        token: 'js-function-name'\r\n    }, {\r\n        regex: new RegExp(`(?<=\\\\bfunction\\\\s+?)${variable}`), //ie. function test\r\n        token: 'js-function-name'\r\n    }, {\r\n        regex: new RegExp(`(?<=\\\\bnew\\\\s+?)${variable}(?=\\\\s*?\\\\()`), //ie. new Test()\r\n        token: 'js-new-class'\r\n    }, {\r\n        regex: /(\\{)|(\\[)|(\\()/,\r\n        token: ['js-lbraces', 'js-lbracket', 'js-lparen'],\r\n        foldType: -1,\r\n        foldName: ['js-braces', 'js-bracket', 'js-paren']\r\n    }, {\r\n        regex: /(\\})|(\\])|(\\))/,\r\n        token: ['js-rbraces', 'js-rbracket', 'js-rparen'],\r\n        foldType: 1,\r\n        foldName: ['js-braces', 'js-bracket', 'js-paren']\r\n    }, {\r\n        regex: /(?<=\\.)(?:prototype\\b|toString\\b|valueOf\\b|toLocaleString\\b|hasOwnProperty\\b|isPrototypeOf\\b|propertyIsEnumerable\\b)/,\r\n        token: 'js-local'\r\n    }, {\r\n        regex: /\\bwindow\\b|\\bdocument\\b|\\bmodule\\b|\\bexports\\b/,\r\n        token: 'js-local'\r\n    }, {\r\n        regex: /\\bthis\\b|\\bself\\b/,\r\n        token: 'js-this'\r\n    }, {\r\n        regex: /\\+|\\-|\\*|\\/|\\=|\\!|>|<|\\&|\\||\\?/,\r\n        token: 'js-oprator'\r\n    }, {\r\n        regex: new RegExp(`\\\\b\\\\d+\\\\b|\\\\b0[xX][a-zA-Z0-9]*?\\\\b|\\\\bundefined\\\\b|\\\\bnull\\\\b|\\\\btrue\\\\b|\\\\bfalse\\\\b|\\\\bNaN\\\\b`),\r\n        token: 'js-number'\r\n    }, {\r\n        regex: new RegExp(`(${variable})(?=\\\\()`), //ie. test(),.test()\r\n        token: 'js-function-exec'\r\n    }, {\r\n        regex: new RegExp(`(?<=\\\\s*?class\\\\s*?)${variable}(?=\\\\s*?\\\\{)`), //ie. calss Test{}\r\n        token: 'js-class-name'\r\n    }\r\n];\r\ntplStrChild.rules = rules;\r\n\r\nexport default {\r\n    rules: rules\r\n}","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-24 16:08:20\r\n * @Description: \r\n */\r\nconst comment = {\r\n    start: /\\/\\*/,\r\n    end: /\\*\\//,\r\n    token: 'css-comment',\r\n    foldName: 'css-comment'\r\n}\r\nconst braces = {\r\n    start: /\\{/,\r\n    end: /\\}/,\r\n    token: ['css-lbraces', 'css-rbraces'],\r\n    foldName: 'css-braces',\r\n    childRule: {\r\n        rules: [\r\n            comment,\r\n            null,\r\n            {\r\n                regex: /;/,\r\n                token: 'css-split'\r\n            }, {\r\n                regex: /:/,\r\n                token: 'css-value-start'\r\n            }, {\r\n                regex: /[a-zA-Z][^;\\:\\s\\}]*?(?=\\s*?\\:)/,\r\n                token: 'css-property'\r\n            }, {\r\n                regex: /(?<=\\:\\s*?)[^;\\:\\}]+?(?=;|}|$)/,\r\n                token: 'css-value'\r\n            }, {\r\n                regex: /(?:\\d+(?:\\.\\d*)?|\\.\\d+)%/,\r\n                token: 'css-percent'\r\n            }\r\n        ]\r\n    }\r\n}\r\nbraces.childRule.rules[1] = braces;\r\n\r\nexport default {\r\n    rules: [\r\n        comment,\r\n        braces,\r\n        {\r\n            regex: /[#\\.]?[^\\s\\,\\:\\{]+/,\r\n            token: function (value) {\r\n                if (value[0] == '.') {\r\n                    return 'css-selector-class';\r\n                } else if (value[0] == '#') {\r\n                    return 'css-selector-id';\r\n                } else {\r\n                    return 'css-selector-tag';\r\n                }\r\n            }\r\n        }, {\r\n            regex: /(?<=\\:)[^\\s\\,\\:]+/,\r\n            token: 'css-pseudo'\r\n        }\r\n    ]\r\n}","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-10 09:31:38\r\n * @Description: \r\n */\r\nimport jsRules from './javascript.js';\r\nimport cssRules from './css.js';\r\n\r\nconst styleRules = [{\r\n    regex: /(?<=\\:(?:\\s*?\\w+?\\s*?){0,})\\d+/,\r\n    token: 'html-style-number'\r\n}, {\r\n    regex: /(?<=\\:\\s*?\\d+)px\\b/,\r\n    token: 'html-style-px'\r\n}, {\r\n    regex: /(?<=(?:\\;|'|\")\\s*?)[^\\<\\>\\:\\;'\"]+/,\r\n    token: 'html-style-name'\r\n}, {\r\n    regex: /(?<=\\:\\s*?)[^\\<\\>\\:\\;'\"]+/,\r\n    token: 'html-style-value'\r\n}];\r\n\r\nconst attrRules = [{\r\n    start: /(?<=style\\s*?\\=\\s*?)'/,\r\n    end: /'/,\r\n    token: 'xml-attr-value',\r\n    level: 1,\r\n    childRule: {\r\n        rules: styleRules\r\n    }\r\n}, {\r\n    start: /(?<=style\\s*?\\=\\s*?)\"/,\r\n    end: /\"/,\r\n    token: 'xml-attr-value',\r\n    level: 1,\r\n    childRule: {\r\n        rules: styleRules\r\n    }\r\n}, {\r\n    start: /(?<=\\=\\s*?)\"/,\r\n    end: /\"/,\r\n    level: 1,\r\n    token: 'xml-attr-value'\r\n}, {\r\n    start: /(?<=\\=\\s*?)'/,\r\n    end: /'/,\r\n    level: 1,\r\n    token: 'xml-attr-value'\r\n}, {\r\n    regex: /(?<=\\<\\/?)\\w+\\b/,\r\n    token: 'xml-tag-name',\r\n    foldName: tagFoldName,\r\n    foldType: tagFoldType\r\n}, {\r\n    regex: /(?<=\\=)\\s*?[^\\<\\>\\s\\'\\\"]+\\b/,\r\n    token: 'xml-attr-value'\r\n}, {\r\n    regex: /\\b[^'\"=\\s\\>\\<]+\\b/,\r\n    token: 'xml-attr-name'\r\n}];\r\n\r\nconst scriptStart = {\r\n    start: /\\<(?=script\\b)/,\r\n    end: /\\>/,\r\n    token: tagToken,\r\n    childRule: {\r\n        rules: attrRules\r\n    }\r\n}\r\n\r\nconst scriptEnd = {\r\n    start: /\\<\\/(?=script\\>)/,\r\n    end: /\\>/,\r\n    token: tagToken,\r\n    childRule: {\r\n        rules: [{\r\n            regex: /(?<=\\<\\/?)\\w+\\b/,\r\n            token: 'xml-tag-name',\r\n            foldName: tagFoldName,\r\n            foldType: tagFoldType\r\n        }]\r\n    }\r\n}\r\n\r\nconst styleStart = {\r\n    start: /\\<(?=style\\b)/,\r\n    end: /\\>/,\r\n    token: tagToken,\r\n    childRule: {\r\n        rules: attrRules\r\n    }\r\n}\r\n\r\nconst styleEnd = {\r\n    start: /\\<\\/(?=style\\s*?\\>)/,\r\n    end: /\\>/,\r\n    token: tagToken,\r\n    childRule: {\r\n        rules: [{\r\n            regex: /(?<=\\<\\/?)\\w+\\b/,\r\n            token: 'xml-tag-name',\r\n            foldName: tagFoldName,\r\n            foldType: tagFoldType\r\n        }]\r\n    }\r\n}\r\n\r\nfunction tagToken(e) {\r\n    if (e.side == 'start') {\r\n        if (e.value[1] == '/') {\r\n            return 'xml-end-tag-open';\r\n        } else {\r\n            return 'xml-tag-open';\r\n        }\r\n    } else if (e.side === 'end') {\r\n        return 'xml-tag-close';\r\n    }\r\n}\r\n\r\nfunction tagFoldName(e) {\r\n    if (/hr|br|meta|img|link|input/i.exec(e.value)) { //单标签，不折叠\r\n        return '';\r\n    }\r\n    return e.value;\r\n}\r\n\r\nfunction tagFoldType(e) {\r\n    if (e.text[e.index - 1] == '/') {\r\n        return 1;\r\n    }\r\n    return -1;\r\n}\r\n\r\nexport default {\r\n    rules: [{\r\n        start: scriptStart,\r\n        end: scriptEnd,\r\n        childRule: jsRules\r\n    }, {\r\n        start: styleStart,\r\n        end: styleEnd,\r\n        childRule: cssRules\r\n    }, {\r\n        start: /\\<\\/?(?=\\w+\\b)/,\r\n        end: /\\/?\\>/,\r\n        token: tagToken,\r\n        childRule: {\r\n            rules: attrRules\r\n        }\r\n    }, {\r\n        start: /\\<\\!\\-\\-/,\r\n        end: /\\-\\-\\>/,\r\n        token: 'xml-comment',\r\n        foldName: 'xml-comment'\r\n    }]\r\n}","/*\r\n * @Author: lisong\r\n * @Date: 2020-10-31 13:48:50\r\n * @Description: 工具类\r\n */\r\nimport $ from 'jquery';\r\n\r\nclass Util {\r\n    static readClipboard() {\r\n        if (window.clipboardData) {\r\n            return new Promise((resolve) => {\r\n                resolve(clipboardData.getData('Text'));\r\n            });\r\n        } else if (navigator.clipboard) {\r\n            return navigator.clipboard.readText();\r\n        }\r\n    }\r\n    static writeClipboard(text) {\r\n        if (window.clipboardData) {\r\n            clipboardData.setData('Text', text);\r\n        } else if (navigator.clipboard) {\r\n            navigator.clipboard.writeText(text);\r\n        }\r\n    }\r\n    //获取数字\r\n    static getNum(value) {\r\n        value = String(value);\r\n        value = value.replace(/[^0123456789\\.]/g, '');\r\n        var regex = /^\\d+(\\.\\d*)?$/;\r\n        var r = regex.exec(value);\r\n        var num = r && r[0] || '';\r\n        if (num) {\r\n            num = Number(r[0]);\r\n        }\r\n        return num;\r\n    }\r\n    //生成指定个数的空白符\r\n    static space(tabSize) {\r\n        var val = '';\r\n        for (var tmp = 0; tmp < tabSize; tmp++) {\r\n            val += ' '\r\n        };\r\n        return val;\r\n    }\r\n    //数组数字排序\r\n    static sortNum(arr) {\r\n        arr.sort(function (arg1, arg2) {\r\n            return Number(arg1) - Number(arg2);\r\n        })\r\n    }\r\n    //获取字符宽度\r\n    static getCharWidth(wrap) {\r\n        var str1 = '------------------------------------------------------------------------------------';\r\n        var str2 = '一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一';\r\n        var id1 = 'char-width-' + Util.getUUID();\r\n        var id2 = 'char-width-' + Util.getUUID();\r\n        var $tempDom = $(`<div class=\"my-editor-line\">\r\n        <div class=\"my-editor-code\"><span id=\"${id1}\">${str1}</span><span id=\"${id2}\">${str2}</span></div>\r\n        </div>`);\r\n        $(wrap).append($tempDom)\r\n        var dom = $('#' + id1)[0];\r\n        var charWidth = dom.scrollWidth / str1.length;\r\n        var charHight = dom.clientHeight;\r\n        var fontSize = window.getComputedStyle ? window.getComputedStyle(dom, null).fontSize : dom.currentStyle.fontSize;\r\n        var fullAngleCharWidth = $('#' + id2)[0].scrollWidth / str2.length;\r\n        $tempDom.remove();\r\n        return {\r\n            charWidth: charWidth,\r\n            fullAngleCharWidth: fullAngleCharWidth,\r\n            charHight: charHight,\r\n            fontSize: fontSize\r\n        }\r\n    }\r\n    /**\r\n     * 获取文本在浏览器中的真实宽度\r\n     * @param  {string} str       文本\r\n     * @param  {number} charW     半角符号/文字宽度\r\n     * @param  {number} fullCharW 全角符号/文字宽度\r\n     * @param  {number} tabSize   tab符所占宽度\r\n     * @param  {number} start     文本开始索引\r\n     * @param  {number} end       文本结束索引\r\n     * @return {number}           文本真实宽度\r\n     */\r\n    static getStrWidth(str, charW, fullCharW, tabSize, start, end) {\r\n        tabSize = tabSize || 4;\r\n        if (typeof start != 'undefined') {\r\n            str = str.substr(start);\r\n        }\r\n        if (typeof end != 'undefined') {\r\n            str = str.substring(0, end - start);\r\n        }\r\n        var match = str.match(this.fullAngleReg);\r\n        var width = str.length * charW;\r\n        var tabNum = str.match(/\\t/g);\r\n        tabNum = tabNum && tabNum.length || 0;\r\n        match = match && match.length || 0;\r\n        if (match) {\r\n            match = match - tabNum;\r\n            width = match * fullCharW + (str.length - match) * charW;\r\n            width += tabNum * charW * (tabSize - 1);\r\n        }\r\n        return width;\r\n    }\r\n    /**\r\n     * 获取文本在浏览器中的真实宽度\r\n     * @param  {string} str       文本\r\n     * @param  {DOM} wrap     容器\r\n     */\r\n    static getStrExactWidth(str, tabSize, wrap) {\r\n        Util.getStrExactWidth.count = Util.getStrExactWidth.count || 0;\r\n        Util.getStrExactWidth.count++;\r\n        if (!str) {\r\n            return 0;\r\n        }\r\n        var id = 'str-width-' + Util.getUUID();\r\n        var $tempDom = $(`<div class=\"my-editor-line my-editor-temp-text\" style=\"visibility:hidden\">\r\n        <div class=\"my-editor-code\" id=\"${id}\">${_splitStr(str)}</div>\r\n        </div>`);\r\n        $(wrap).append($tempDom)\r\n        var dom = $('#' + id)[0];\r\n        var charWidth = dom.clientWidth;\r\n        $('.my-editor-temp-text').remove();\r\n        // if (Util.getStrExactWidth.count > 5) { //避免频繁删除dom导致浏览器卡顿\r\n        //     $('.my-editor-temp-text').remove();\r\n        // } else {\r\n        //     clearTimeout(Util.getStrExactWidth.timer);\r\n        //     Util.getStrExactWidth.timer = setTimeout(() => {\r\n        //         $('.my-editor-temp-text').remove();\r\n        //     }, 500);\r\n        // }\r\n        return charWidth;\r\n\r\n        function _splitStr(str) {\r\n            let count = Math.floor(str.length / 100);\r\n            let result = [];\r\n            for (let i = 0; i < count; i++) {\r\n                let column = i * 100;\r\n                result.push(Util.htmlTrans(str.slice(column, column + 100)));\r\n            }\r\n            count = count * 100;\r\n            if (count < str.length) {\r\n                result.push(Util.htmlTrans(str.slice(count)));\r\n            }\r\n            return `<span>${result.join('</span><span>').replace(/\\t/g, Util.space(tabSize || 4))}</span>`;\r\n        }\r\n    }\r\n    //<,>转义\r\n    static htmlTrans(cont) {\r\n        cont = cont.replace(/\\&\\#/g, '&amp;#');\r\n        return cont.replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n    }\r\n    // 深度克隆\r\n    static deepAssign(targetObj, originObj, excludeKeys) {\r\n        return _assign(targetObj, originObj, excludeKeys, new Map());\r\n\r\n        function _assign(targetObj, originObj, excludeKeys, assigned) {\r\n            excludeKeys = excludeKeys || [];\r\n            for (var key in originObj) {\r\n                var value = originObj[key];\r\n                if (excludeKeys.indexOf(key) > -1) {\r\n                    continue;\r\n                }\r\n                if (typeof value === 'object' && !(value instanceof RegExp) && value !== null &&\r\n                    (!value.nodeName || !value.nodeType)) {\r\n                    if (assigned.has(value)) {\r\n                        targetObj[key] = assigned.get(value);\r\n                    } else {\r\n                        let tmp = null;\r\n                        if (value instanceof Array) {\r\n                            tmp = targetObj[key] || [];\r\n                            assigned.set(value, tmp);\r\n                            targetObj[key] = _assign(tmp, value, excludeKeys, new Map(assigned));\r\n                        } else {\r\n                            tmp = targetObj[key] || {};\r\n                            assigned.set(value, tmp);\r\n                            targetObj[key] = _assign(tmp, value, excludeKeys, new Map(assigned));\r\n                        }\r\n                    }\r\n                } else {\r\n                    targetObj[key] = value;\r\n                }\r\n            }\r\n            return targetObj;\r\n        }\r\n    }\r\n    static getUUID(len) {\r\n        len = len || 16;\r\n        var str = '';\r\n        for (var i = 0; i < len; i++) {\r\n            str += (Math.random() * 16 | 0).toString(16);\r\n        }\r\n        return str;\r\n    }\r\n    /**\r\n     * 比较坐标的前后\r\n     * @param {Object} start \r\n     * @param {Object} end \r\n     */\r\n    static comparePos(start, end) {\r\n        if (start.line > end.line || start.line == end.line && start.column > end.column) {\r\n            return 1;\r\n        } else if (start.line == end.line && start.column == end.column) {\r\n            return 0\r\n        } else {\r\n            return -1;\r\n        }\r\n    }\r\n    static createWorker(funStr) {\r\n        var blob = new Blob([funStr]);\r\n        var url = window.URL.createObjectURL(blob);\r\n        var worker = new Worker(url);\r\n        return worker;\r\n    }\r\n    static defineProperties(target, context, properties) {\r\n        let result = {};\r\n        properties.map((property) => {\r\n            result[property] = {\r\n                get: function () {\r\n                    if (typeof context[property] == 'function') {\r\n                        return context[property].bind(context);\r\n                    } else {\r\n                        return context[property];\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        Object.defineProperties(target, result);\r\n    }\r\n}\r\nArray.prototype.peek = function (index) {\r\n    if (this.length) {\r\n        return this[this.length - (index || 1)];\r\n    }\r\n}\r\nArray.prototype.empty = function () {\r\n    this.length = 0;\r\n    return this;\r\n}\r\nArray.prototype.insert = function (item, sort) {\r\n    if (sort && this.length) {\r\n        let left = 0,\r\n            right = this.length - 1;\r\n        while (left < right) {\r\n            let mid = Math.floor((left + right) / 2);\r\n            if (sort(item, this[mid]) > 0) {\r\n                left = mid + 1;\r\n            } else {\r\n                right = mid;\r\n            }\r\n        }\r\n        if (sort(item, this[left]) < 0) {\r\n            left--;\r\n        }\r\n        this.splice(left + 1, 0, item);\r\n    } else {\r\n        this.push(item);\r\n    }\r\n}\r\nString.prototype.peek = function (index) {\r\n    if (this.length) {\r\n        return this[this.length - (index || 1)];\r\n    }\r\n}\r\n//全角符号和中文字符\r\nUtil.fullAngleReg = /[\\x00-\\x1f\\x80-\\xa0\\xad\\u1680\\u180E\\u2000-\\u200f\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF\\uFFF9-\\uFFFC]|[\\u1100-\\u115F\\u11A3-\\u11A7\\u11FA-\\u11FF\\u2329-\\u232A\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3000-\\u303E\\u3041-\\u3096\\u3099-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u3190-\\u31BA\\u31C0-\\u31E3\\u31F0-\\u321E\\u3220-\\u3247\\u3250-\\u32FE\\u3300-\\u4DBF\\u4E00-\\uA48C\\uA490-\\uA4C6\\uA960-\\uA97C\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFAFF\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFF01-\\uFF60\\uFFE0-\\uFFE6]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\r\nUtil.keyCode = {\r\n    DELETE: 46,\r\n    BACKSPACE: 8\r\n}\r\nUtil.command = {\r\n    DELETE: 'delete',\r\n    INSERT: 'insert',\r\n    MOVEUP: 'moveLineUp',\r\n    MOVEDOWN: 'moveLineDown',\r\n    COPY_UP: 'copyLineUp',\r\n    COPY_DOWN: 'copyLineDown',\r\n    DELETE_COPY_UP: 'deleteCopyLineUp',\r\n    DELETE_COPY_DOWN: 'deleteCopyLineDown',\r\n    REPLACE: 'replace',\r\n}\r\nUtil.constData = {\r\n    PAIR_START: -1,\r\n    PAIR_START_END: 0,\r\n    PAIR_END: 1,\r\n    FOLD_OPEN: 1,\r\n    FOLD_CLOSE: -1,\r\n    DEFAULT: 'default'\r\n}\r\nexport default Util;","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-15 11:39:41\r\n * @Description: \r\n */\r\nimport jsRules from '@/module/tokenizer/rules/javascript.js';\r\nimport htmlRules from '@/module/tokenizer/rules/html.js';\r\nimport cssRules from '@/module/tokenizer/rules/css.js';\r\nimport Util from '@/common/Util';\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.currentLine = 1;\r\n        this.languageMap = [];\r\n        this.initProperties(editor, context);\r\n        this.initLanguage(editor.language);\r\n    }\r\n    initLanguage(language) {\r\n        this.language = language;\r\n        clearTimeout(this.tokenizeLines.timer);\r\n        switch (language) {\r\n            case 'JavaScript':\r\n                this.initRules(jsRules);\r\n                break;\r\n            case 'HTML':\r\n                this.initRules(htmlRules);\r\n                break;\r\n            case 'CSS':\r\n                this.initRules(cssRules);\r\n                break;\r\n            default:\r\n                this.language = 'plain';\r\n        }\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, ['startLine', 'maxVisibleLines', 'maxLine', 'renderLine', '$nextTick']);\r\n        Util.defineProperties(this, context, ['htmls']);\r\n    }\r\n    initRules(rules) {\r\n        if (this.languageMap[this.language]) {\r\n            let obj = this.languageMap[this.language];\r\n            this.rules = obj.rules;\r\n            this.ruleIdMap = obj.ruleIdMap;\r\n            this.regexMap = obj.regexMap;\r\n            return;\r\n        }\r\n        this.ruleId = 1;\r\n        this.ruleIdMap = {};\r\n        this.regexMap = {};\r\n        this.rules = Util.deepAssign({}, rules);\r\n        this.rules.rules.map((item) => {\r\n            this.setRuleId(item);\r\n        });\r\n        this.languageMap[this.language] = {\r\n            rules: this.rules,\r\n            ruleIdMap: this.ruleIdMap,\r\n            regexMap: this.regexMap\r\n        };\r\n    }\r\n    setRuleId(rule) {\r\n        // 每个规则生成一个唯一标识\r\n        rule.ruleId = this.ruleId++;\r\n        rule.level = rule.level || 0;\r\n        rule.token = rule.token || '';\r\n        this.ruleIdMap[rule.ruleId] = rule;\r\n        if (typeof rule.start === 'object' && !(rule.start instanceof RegExp)) {\r\n            this.setRuleId(rule.start);\r\n            rule.start.startBy = rule.ruleId;\r\n        }\r\n        if (typeof rule.end === 'object' && !(rule.end instanceof RegExp)) {\r\n            this.setRuleId(rule.end);\r\n            rule.end.endBy = rule.ruleId;\r\n        }\r\n        if (rule.childRule && rule.childRule.rules) {\r\n            rule.childRule.rules.map((_item) => {\r\n                !_item.ruleId && this.setRuleId(_item);\r\n            });\r\n            rule.rules = rule.childRule.rules;\r\n        }\r\n    }\r\n    // 组合正则表达式\r\n    getCombRegex(states) {\r\n        states = states || [];\r\n        let statesKey = states + '' || '0';\r\n        let sources = [];\r\n        let sourceMap = {};\r\n        let regexs = [];\r\n        let index = 0;\r\n        let rule = null;\r\n        if (this.regexMap[statesKey]) {\r\n            return this.regexMap[statesKey];\r\n        }\r\n        if (states.length > 1) {\r\n            let resultStates = [];\r\n            while (index < states.length - 1) {\r\n                rule = this.ruleIdMap[states[index + 1]];\r\n                if (rule.startBy === states[index] || rule.endBy === states[index]) { //处于同一层级\r\n                    index++;\r\n                    continue;\r\n                }\r\n                resultStates.push(states[index]);\r\n                index++;\r\n            }\r\n            resultStates.push(states[index]);\r\n            states = resultStates;\r\n        }\r\n        index = states.length - 1;\r\n        rule = states.length && this.ruleIdMap[states.peek()] || this.rules;\r\n        while (index >= 0 && this.ruleIdMap[states[index]].level >= rule.level) {\r\n            regexs.push(this.getEndRegex(this.ruleIdMap[states[index]]));\r\n            index--;\r\n        }\r\n        regexs.reverse();\r\n        rule.rules && rule.rules.map((item) => {\r\n            regexs.push(this.getStartRegex(item));\r\n        });\r\n        regexs.map((item) => {\r\n            let side = item.side === -1 ? 'start' : 'end';\r\n            if (!sourceMap[item.ruleId] || sourceMap[item.ruleId] !== side) {\r\n                sources.push(`?<${side}_${item.ruleId}>${item.regex.source}`);\r\n                sourceMap[item.ruleId] = side;\r\n            }\r\n        });\r\n        this.regexMap[statesKey] = new RegExp(`(${sources.join(')|(')})`, 'g');\r\n        return this.regexMap[statesKey];\r\n    }\r\n    getStartRegex(rule) {\r\n        if (rule.regex instanceof RegExp) {\r\n            return {\r\n                ruleId: rule.ruleId,\r\n                regex: rule.regex,\r\n                side: -1\r\n            }\r\n        } else if (rule.start instanceof RegExp) {\r\n            return {\r\n                ruleId: rule.ruleId,\r\n                regex: rule.start,\r\n                side: -1\r\n            };\r\n        } else if (rule.start.startBy) {\r\n            return this.getStartRegex(rule.start);\r\n        }\r\n    }\r\n    getEndRegex(rule, side) {\r\n        if (rule.regex instanceof RegExp) {\r\n            return {\r\n                ruleId: rule.ruleId,\r\n                regex: rule.regex,\r\n                side: side || 1\r\n            }\r\n        } else if (rule.end instanceof RegExp) {\r\n            return {\r\n                ruleId: rule.ruleId,\r\n                regex: rule.end,\r\n                side: side || 1\r\n            };\r\n        } else if (rule.end.endBy) {\r\n            return this.getStartRegex(rule.end, -1);\r\n        }\r\n    }\r\n    onInsertContentBefore(nowLine) {\r\n        this.onInsertContentBefore.nowLine = nowLine;\r\n    }\r\n    onInsertContentAfter(nowLine) {\r\n        nowLine = this.onInsertContentBefore.nowLine;\r\n        if (this.language == 'plain') {\r\n            return;\r\n        }\r\n        if (nowLine <= this.currentLine) {\r\n            this.currentLine = nowLine;\r\n            clearTimeout(this.tokenizeLines.timer);\r\n            this.$nextTick(() => {\r\n                if (this.currentLine !== nowLine) {\r\n                    return;\r\n                }\r\n                this.tokenizeLines(nowLine);\r\n            });\r\n        } else {\r\n            this.tokenizeVisibleLins();\r\n        }\r\n    }\r\n    onDeleteContentBefore(nowLine) {}\r\n    onDeleteContentAfter(nowLine) {\r\n        if (this.language == 'plain') {\r\n            return;\r\n        }\r\n        if (nowLine <= this.currentLine) {\r\n            this.currentLine = nowLine;\r\n            clearTimeout(this.tokenizeLines.timer);\r\n            this.$nextTick(() => {\r\n                if (this.currentLine !== nowLine) {\r\n                    return;\r\n                }\r\n                this.tokenizeLines(nowLine);\r\n            });\r\n        } else {\r\n            this.tokenizeVisibleLins();\r\n        }\r\n    }\r\n    onScroll() {\r\n        if (this.language == 'plain') {\r\n            return;\r\n        }\r\n        this.tokenizeVisibleLins();\r\n    }\r\n    tokenizeVisibleLins() {\r\n        let tokenizeVisibleLinsId = this.tokenizeVisibleLins.id + 1 || 1;\r\n        this.tokenizeVisibleLins.id = tokenizeVisibleLinsId;\r\n        this.$nextTick(() => {\r\n            if (this.tokenizeVisibleLins.id !== tokenizeVisibleLinsId) {\r\n                return;\r\n            }\r\n            let currentLine = this.currentLine;\r\n            this.tokenizeLines(this.startLine, this.startLine + this.maxVisibleLines);\r\n            this.currentLine = currentLine;\r\n        });\r\n    }\r\n    tokenizeLines(startLine, endLine) {\r\n        let processedLines = 0;\r\n        let processedTime = Date.now();\r\n        endLine = endLine || this.maxLine;\r\n        endLine = endLine > this.maxLine ? this.maxLine : endLine;\r\n        while (startLine <= endLine) {\r\n            let lineObj = this.htmls[startLine - 1];\r\n            if (!lineObj.tokens) { //文本超过一万时跳过高亮\r\n                let data = this.tokenizeLine(startLine);\r\n                lineObj.tokens = data.tokens;\r\n                lineObj.folds = data.folds;\r\n                lineObj.html = data.tokens.map((item) => {\r\n                    let rule = this.ruleIdMap[item.ruleId];\r\n                    if (rule && typeof rule.value === 'function') {\r\n                        return rule.value(item.value);\r\n                    } else {\r\n                        return `<span class=\"${item.type.split('.').join(' ')}\" data-column=\"${item.column}\">${Util.htmlTrans(item.value)}</span>`;\r\n                    }\r\n                }).join('');\r\n                this.renderLine(lineObj.lineId);\r\n                if (lineObj.states + '' != data.states + '') {\r\n                    lineObj.states = data.states;\r\n                    lineObj = this.htmls[startLine];\r\n                    if (lineObj) {\r\n                        lineObj.tokens = null;\r\n                    }\r\n                }\r\n                processedLines++;\r\n                // 避免卡顿\r\n                if (processedLines % 10 == 0 && Date.now() - processedTime >= 20) {\r\n                    startLine++;\r\n                    break;\r\n                }\r\n            }\r\n            startLine++;\r\n        }\r\n        this.currentLine = startLine;\r\n        if (startLine <= endLine) {\r\n            this.tokenizeLines.timer = setTimeout(() => {\r\n                this.tokenizeLines(startLine, endLine);\r\n            }, 20);\r\n        }\r\n    }\r\n    tokenizeLine(line) {\r\n        let match = null;\r\n        let rule = null;\r\n        let lastIndex = 0;\r\n        let preEnd = 0;\r\n        let newStates = [];\r\n        let states = (line > 1 && this.htmls[line - 2].states || []).slice(0);\r\n        let lineObj = this.htmls[line - 1];\r\n        let regex = this.getRegex(states);\r\n        let resultObj = {\r\n            tokens: [],\r\n            folds: []\r\n        }\r\n        if (lineObj.text.length > 10000) {\r\n            return {\r\n                tokens: this.splitLongToken([{\r\n                    type: 'plain',\r\n                    column: 0,\r\n                    value: lineObj.text\r\n                }]),\r\n                folds: [],\r\n                states: states\r\n            }\r\n        }\r\n        while (match = regex.exec(lineObj.text)) {\r\n            let token = null;\r\n            let fold = null;\r\n            let valid = true;\r\n            let side = '';\r\n            for (let ruleId in match.groups) {\r\n                if (match.groups[ruleId] == undefined) {\r\n                    continue;\r\n                }\r\n                side = ruleId.split('_')[0];\r\n                ruleId = ruleId.split('_')[1] - 0;\r\n                rule = this.ruleIdMap[ruleId];\r\n                // side = this.getSide(rule, states, side);\r\n                if (preEnd < match.index) { //普通文本\r\n                    let value = lineObj.text.slice(preEnd, match.index);\r\n                    resultObj.tokens.push({\r\n                        value: value,\r\n                        column: preEnd,\r\n                        type: this.getTokenType({\r\n                            rule: this.ruleIdMap[states.peek()],\r\n                            index: preEnd,\r\n                            value: value,\r\n                            text: lineObj.text\r\n                        })\r\n                    });\r\n                    preEnd = match.index;\r\n                }\r\n                if (typeof rule.valid === 'function') {\r\n                    valid = rule.valid({\r\n                        index: match.index,\r\n                        text: lineObj.text,\r\n                        value: match[0],\r\n                        side: side\r\n                    });\r\n                    if (!valid) {\r\n                        break;\r\n                    }\r\n                }\r\n                fold = this.getFold(rule, match, states, resultObj, lineObj.text);\r\n                token = this.getToken(rule, match, states, newStates, resultObj, lineObj.text, side);\r\n                resultObj.tokens.push(token);\r\n                fold && resultObj.folds.push(fold);\r\n                preEnd = match.index + match[0].length;\r\n                break;\r\n            }\r\n            if (!match[0]) { //考虑/^$/的情况\r\n                break;\r\n            }\r\n            if (!valid) { //跳过当前无效结果\r\n                continue;\r\n            }\r\n            lastIndex = regex.lastIndex;\r\n            regex.lastIndex = 0;\r\n            regex = this.getRegex(states, rule.ruleId);\r\n            regex.lastIndex = lastIndex;\r\n        }\r\n        if (!resultObj.tokens.length && states.length) { // 整行被多行token包裹\r\n            resultObj.tokens.push({\r\n                value: lineObj.text,\r\n                column: 0,\r\n                type: this.getTokenType({\r\n                    rule: this.ruleIdMap[states.peek()],\r\n                    value: lineObj.text,\r\n                    text: lineObj.text\r\n                })\r\n            });\r\n        } else if (preEnd < lineObj.text.length) { //文本末尾\r\n            var value = lineObj.text.slice(preEnd);\r\n            resultObj.tokens.push({\r\n                value: value,\r\n                column: preEnd,\r\n                type: this.getTokenType({\r\n                    rule: this.ruleIdMap[states.peek()],\r\n                    index: preEnd,\r\n                    value: value,\r\n                    text: lineObj.text\r\n                })\r\n            });\r\n        }\r\n        regex.lastIndex = 0;\r\n        return {\r\n            tokens: this.splitLongToken(resultObj.tokens),\r\n            folds: resultObj.folds,\r\n            states: states\r\n        };\r\n    }\r\n    splitLongToken(tokens) {\r\n        let result = [];\r\n        tokens.map((token) => {\r\n            if (token.value.length > 100) { //将文本数量大于100的token分隔\r\n                let startCol = token.column;\r\n                let count = Math.floor(token.value.length / 100);\r\n                for (let i = 0; i < count; i++) {\r\n                    let column = i * 100;\r\n                    result.push({\r\n                        column: column + startCol,\r\n                        value: token.value.slice(column, column + 100),\r\n                        type: token.type\r\n                    });\r\n                }\r\n                count = count * 100;\r\n                if (count < token.value.length) {\r\n                    result.push({\r\n                        column: count + startCol,\r\n                        value: token.value.slice(count),\r\n                        type: token.type\r\n                    });\r\n                }\r\n            } else {\r\n                result.push(token);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    // getSide(rule, states) {\r\n    //     let index = states.length - 1;\r\n    //     if (states.indexOf(rule.ruleId) == -1) {\r\n    //         return 'start';\r\n    //     }\r\n    //     while (index >= 0 && states[index] != rule.ruleId) {\r\n    //         if (this.ruleIdMap[states[index]].level > rule.level) {\r\n    //             return 'start';\r\n    //         }\r\n    //         index--\r\n    //     }\r\n    //     return 'end';\r\n    // }\r\n    /**\r\n     * 获取折叠标记对象\r\n     * @param {Object} rule 规则对象\r\n     * @param {Object} match 正则结果对象\r\n     * @param {Array} states 状态栈\r\n     * @param {Array} newStates 当前行的新增状态栈\r\n     * @param {Object} resultObj 结果对象\r\n     * @param {String} text 当前行文本\r\n     * @param {String} side 开始/结束标记\r\n     */\r\n    getToken(rule, match, states, newStates, resultObj, text, side) {\r\n        let result = match[0];\r\n        let token = {\r\n            ruleId: rule.ruleId,\r\n            value: result,\r\n            column: match.index\r\n        };\r\n        if (rule.start && rule.end) { //多行token-end\r\n            if (side === 'end') { //多行token尾\r\n                while (states.peek() != rule.ruleId) {\r\n                    states.pop();\r\n                }\r\n                states.pop();\r\n                if (!rule.rules) { //无子节点\r\n                    if (newStates.indexOf(rule.ruleId) > -1) { //在同一行匹配\r\n                        let value = '';\r\n                        token = resultObj.tokens.pop();\r\n                        value = token.value;\r\n                        if (token.ruleId !== rule.ruleId) {\r\n                            token = resultObj.tokens.pop();\r\n                            value = token.value + value;\r\n                        }\r\n                        token.value = value + result;\r\n                    } else { //跨行匹配\r\n                        resultObj.tokens.pop()\r\n                        token.value = text.slice(0, match.index + result.length);\r\n                        token.column = 0;\r\n                    }\r\n                }\r\n            } else { //多行token-start\r\n                states.push(rule.ruleId);\r\n                newStates.push(rule.ruleId);\r\n            }\r\n        }\r\n        token.type = this.getTokenType({\r\n            rule: rule,\r\n            index: match.index,\r\n            value: token.value,\r\n            text: text,\r\n            match: match,\r\n            side: side\r\n        });\r\n        return token;\r\n    }\r\n    /**\r\n     * 获取token类型\r\n     * @param {Object} option {\r\n     *  rule: 规则对象,\r\n     *  index: value在text中的开始索引,\r\n     *  text: 当前行的文本,\r\n     *  value: token的文本范围,\r\n     *  side: 开始/结束标记,\r\n     *  match: 正则执行后的结果对象\r\n     * } \r\n     */\r\n    getTokenType(option) {\r\n        let rule = option.rule;\r\n        let index = option.index || 0;\r\n        let value = option.value || option.text;\r\n        let text = option.text;\r\n        let match = option.match;\r\n        let side = option.side || (rule && rule.start && rule.end ? 'start' : '');\r\n        let type = '';\r\n        if (!rule) {\r\n            return 'plain';\r\n        }\r\n        if (typeof rule.token == 'function') {\r\n            type = rule.token({\r\n                value: value,\r\n                index: index,\r\n                text: text,\r\n                side: side\r\n            });\r\n        } else if (rule.token instanceof Array) {\r\n            if (rule.start && rule.end) {\r\n                if (side == 'start') {\r\n                    type = rule.token[0];\r\n                } else {\r\n                    type = rule.token[1];\r\n                }\r\n            } else {\r\n                let expIndex = match && this.getChildExpIndex(match) || -1;\r\n                if (expIndex > -1) {\r\n                    type = rule.token[expIndex];\r\n                } else {\r\n                    type = rule.token.join('.');\r\n                }\r\n            }\r\n        } else {\r\n            type = rule.token;\r\n        }\r\n        return type;\r\n    }\r\n    /**\r\n     * 获取折叠标记对象\r\n     * @param {Object} rule 规则对象\r\n     * @param {Object} match 正则结果对象\r\n     * @param {Array} states 状态栈\r\n     * @param {Object} resultObj 结果对象\r\n     * @param {String} text 当前行文本\r\n     */\r\n    getFold(rule, match, states, resultObj, text) {\r\n        let result = match[0];\r\n        let side = '';\r\n        let fold = null;\r\n        if (rule.start && rule.end) { //多行token被匹配\r\n            side = 'start';\r\n            if (states.indexOf(rule.ruleId) > -1) {\r\n                side = 'end';\r\n            }\r\n            if (rule.foldName) { //多行匹配可折叠\r\n                fold = {\r\n                    start: match.index,\r\n                    end: match.index + result.length,\r\n                    value: result\r\n                };\r\n            }\r\n        } else if (rule.foldName && rule.foldType) { //折叠标记\r\n            fold = {\r\n                start: match.index,\r\n                end: match.index + result.length,\r\n                value: result\r\n            };\r\n        }\r\n        if (fold) {\r\n            let foldName = this.getFoldName(rule, match, text, side);\r\n            if (!foldName) { //没有折叠名称无效\r\n                return null;\r\n            }\r\n            fold.name = foldName;\r\n            fold.type = this.getFoldType(rule, match, text, side);\r\n            if (fold.type == 1) {\r\n                fold = _checkFold(resultObj, fold);\r\n            }\r\n        }\r\n        return fold;\r\n\r\n        function _checkFold(resultObj, fold) {\r\n            let folds = resultObj.folds;\r\n            if (folds) {\r\n                for (let i = folds.length - 1; i >= 0; i--) {\r\n                    // 同行折叠无效\r\n                    if (folds[i].name == fold.name && folds[i].type == -1) {\r\n                        resultObj.folds = folds.slice(0, i);\r\n                        fold = null;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return fold;\r\n        }\r\n    }\r\n    /**\r\n     * 获取折叠名称[唯一标识]\r\n     * @param {Object} rule 规则对象\r\n     * @param {Object} match 正则执行后的结果对象\r\n     * @param {String} text 当前行的文本\r\n     * @param {String} side 开始/结束标记\r\n     */\r\n    getFoldName(rule, match, text, side) {\r\n        let foldName = '';\r\n        if (rule.foldName instanceof Array) {\r\n            if (rule.start && rule.end) {\r\n                foldName = side == 'start' ? rule.foldName[0] : rule.foldName[1];\r\n            } else {\r\n                let expIndex = this.getChildExpIndex(match);\r\n                expIndex = expIndex == -1 ? 0 : expIndex;\r\n                foldName = rule.foldName[expIndex];\r\n            }\r\n        } else if (typeof rule.foldName === 'function') {\r\n            foldName = rule.foldName({\r\n                value: match[0],\r\n                text: text,\r\n                index: match.index,\r\n                side: side\r\n            });\r\n        } else {\r\n            foldName = rule.foldName;\r\n        }\r\n        return foldName;\r\n    }\r\n    /**\r\n     * 获取折叠类型[-1:首,1:尾]\r\n     * @param {Object} rule 规则对象\r\n     * @param {Object} match 正则执行后的结果对象\r\n     * @param {String} text 当前行的文本\r\n     * @param {String} side 开始/结束标记\r\n     */\r\n    getFoldType(rule, match, text, side) {\r\n        let foldType = '';\r\n        if (rule.foldType instanceof Array) {\r\n            if (rule.start && rule.end) {\r\n                foldType = side == 'start' ? rule.foldType[0] : rule.foldType[1];\r\n            } else {\r\n                let expIndex = this.getChildExpIndex(match);\r\n                expIndex = expIndex == -1 ? 0 : expIndex;\r\n                foldType = rule.foldType[expIndex];\r\n            }\r\n        } else if (typeof rule.foldType === 'function') {\r\n            foldType = rule.foldType({\r\n                value: match[0],\r\n                text: text,\r\n                index: match.index,\r\n                side: side\r\n            });\r\n        } else if (rule.start && rule.end) {\r\n            foldType = side == 'start' ? -1 : 1;\r\n        } else {\r\n            foldType = rule.foldType;\r\n        }\r\n        return foldType;\r\n    }\r\n    /**\r\n     * 获取子表达式索引位置\r\n     * @param {Array} match 正则exec结果\r\n     */\r\n    getChildExpIndex(match) {\r\n        if (match.childExpIndex !== undefined) {\r\n            return match.childExpIndex;\r\n        }\r\n        let captures = match.slice(1);\r\n        let hasChildExp = captures.filter((item) => {\r\n            return item\r\n        }).length > 1;\r\n        if (hasChildExp) { //正则里有子表达式\r\n            for (let i = 0; i < captures.length; i++) {\r\n                if (captures[i] != undefined) {\r\n                    captures = captures.slice(i + 1);\r\n                    break;\r\n                }\r\n            }\r\n            for (let i = 0; i < captures.length; i++) {\r\n                if (captures[i] != undefined) {\r\n                    match.childExpIndex = i;\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        match.childExpIndex = -1;\r\n        return -1;\r\n    }\r\n    getRegex(states, preRuleId) {\r\n        let preRule = this.ruleIdMap[preRuleId];\r\n        while (preRule && states.indexOf(preRule.ruleId) == -1 && preRule.endBy) {\r\n            while (states.peek() != preRule.endBy) {\r\n                states.pop();\r\n            }\r\n            states.pop();\r\n            preRule = this.ruleIdMap[preRule.endBy];\r\n        }\r\n        if (preRule && states.indexOf(preRule.ruleId) == -1 && preRule.startBy) {\r\n            states.push(preRule.startBy);\r\n        }\r\n        return this.getCombRegex(states);\r\n    }\r\n}","/*\r\n * @Author: lisong\r\n * @Date: 2022-01-07 10:07:14\r\n * @Description: \r\n */\r\nexport default function () {\r\n    Array.prototype.peek = function (index) {\r\n        if (this.length) {\r\n            return this[this.length - (index || 1)];\r\n        }\r\n    }\r\n    Array.prototype._isArray = true;\r\n    String.prototype.peek = function (index) {\r\n        if (this.length) {\r\n            return this[this.length - (index || 1)];\r\n        }\r\n    }\r\n    var keywords = [\r\n        \"if\", \"in\", \"do\", \"var\", \"for\", \"new\",\r\n        \"try\", \"let\", \"this\", \"else\", \"case\",\r\n        \"void\", \"with\", \"enum\", \"while\", \"break\",\r\n        \"catch\", \"throw\", \"const\", \"yield\", \"class\",\r\n        \"super\", \"return\", \"typeof\", \"delete\",\r\n        \"switch\", \"export\", \"import\", \"default\",\r\n        \"finally\", \"extends\", \"function\", \"continue\",\r\n        \"debugger\", \"instanceof\", \"async\", \"await\"\r\n    ];\r\n    var assignOperator = ['=', '>>>=', '>>=', '<<=', '+=', '-=', '*=', '/=', '%=', '&=', '|=', '^='];\r\n    var binaryOperator = [\r\n        '+', '-', '*', '/', '%', '&', '|', '^', '&&', '||', '===', '==', '!=', '!==',\r\n        '>', '>=', '<', '<=', '>>', '>>>', '<<', 'instanceof', 'in'\r\n    ];\r\n    var unitOperator = ['+', '-', '~', '!', 'typeof', 'delete', 'void'];\r\n    var brackets = ['{', '}', '[', ']', '(', ')'];\r\n    var regs = {\r\n        space: /^\\s+/,\r\n        number: /^(?:\\d+(?:\\.\\d*)?|\\.\\d+?|0x[a-z0-9]+?)(?:e[\\+\\-]?\\d+(?:\\.\\d*)?)?\\b/i,\r\n        identifier: /^[a-zA-Z_$][a-zA-Z0-9_$]*/,\r\n        comment: /\\*\\//,\r\n        string1: /\\\\*'/,\r\n        string2: /\\\\*\"/,\r\n        string3: /(\\\\*`)|(\\$\\{)/,\r\n        regex: /^\\/(?:\\\\[\\s\\S]|[^\\\\])+?\\//,\r\n        other: /^[^\\s+\\-\\*\\/%&\\|\\^\\=\\!\\>\\<\\~\\{\\}\\(\\)]+/\r\n    }\r\n    var regflagsMap = {\r\n        'i': true,\r\n        'm': true,\r\n        'g': true,\r\n        'gi': true,\r\n        'gm': true,\r\n        'im': true,\r\n        'gim': true,\r\n    }\r\n    var maxErrors = 100;\r\n\r\n    function TokenType(type, label) {\r\n        this.type = type;\r\n        this.label = label;\r\n        this._isTokenType = true;\r\n    }\r\n\r\n    TokenType.prototype.toString = function () {\r\n        return this.label;\r\n    }\r\n\r\n    TokenType.NUMBER = new TokenType(1, 'number');\r\n    TokenType.BOOLEAN = new TokenType(2, 'boolean');\r\n    TokenType.STRING = new TokenType(3, 'string');\r\n    TokenType.IDENTIFIER = new TokenType(4, 'identifier');\r\n    TokenType.KEYWORD = new TokenType(5, 'keyword');\r\n    TokenType.OPERATOR = new TokenType(6, 'operator');\r\n    TokenType.BRACKET = new TokenType(7, 'bracket');\r\n    TokenType.PUNCTUATOR = new TokenType(8, 'punctuator');\r\n    TokenType.REGEXP = new TokenType(9, 'regexp');\r\n    TokenType.OTHER = new TokenType(10, 'other');\r\n\r\n    function ErrorType(type) {\r\n        this.type = type;\r\n    }\r\n\r\n    ErrorType.UNEXPECTED = new ErrorType(1);\r\n    ErrorType.EXPECTED = new ErrorType(2);\r\n    ErrorType.MISS = new ErrorType(3);\r\n    ErrorType.UNMATCH = new ErrorType(4);\r\n\r\n    function Error(token, type, param) {\r\n        token = token || {};\r\n        this.type = type;\r\n        this.param = param;\r\n        this.line = token.line;\r\n        this.column = token.column;\r\n        this.value = token.value;\r\n        this.error = this.toString();\r\n    }\r\n\r\n    Error.prototype.toString = function () {\r\n        var error = '';\r\n        var param = this.param instanceof Array ? this.param : [this.param];\r\n        param = `${param.length === 1 ? 'a ' : ''}'${param.join(`'、'`)}'`;\r\n        switch (this.type) {\r\n            case ErrorType.UNEXPECTED:\r\n                error = `unexpected '${this.value}'`;\r\n                break;\r\n            case ErrorType.EXPECTED:\r\n                error = `expected ${param}`;\r\n                if (this.value) {\r\n                    error += ` and instead saw '${this.value}'`;\r\n                }\r\n                break;\r\n            case ErrorType.MISS:\r\n                error = `missing ${param}`;\r\n                if (this.value) {\r\n                    error += ` before '${this.value}'`\r\n                }\r\n                break;\r\n            case ErrorType.UNMATCH:\r\n                error = `unmatched '${this.value}'`\r\n                break;\r\n        }\r\n        return error;\r\n    }\r\n\r\n    Error.push = function (error) {\r\n        Error.errors.push(error);\r\n    }\r\n\r\n    Error.expectedIdentifier = function (token) {\r\n        Error.push(new Error(token, ErrorType.EXPECTED, TokenType.IDENTIFIER));\r\n    }\r\n\r\n    Error.expectedSemicolon = function (token) {\r\n        Error.push(new Error(token, ErrorType.MISS, ';'));\r\n    }\r\n\r\n    Error.expected = function (token, value) {\r\n        Error.push(new Error(token, ErrorType.EXPECTED, value));\r\n    }\r\n\r\n    Error.unexpected = function (token) {\r\n        Error.push(new Error(token, ErrorType.UNEXPECTED));\r\n    }\r\n\r\n    Error.unmatch = function (token) {\r\n        Error.push(new Error(token, ErrorType.UNMATCH));\r\n    }\r\n\r\n    // 词法分析器\r\n    function Lexer() {\r\n        this.init();\r\n    }\r\n\r\n    Lexer.prototype.init = function () {\r\n        Error.errors = [];\r\n        this.lines = [''];\r\n        this.line = 1;\r\n        this.column = 0;\r\n        this.input = '';\r\n        this.assignOperatorMap = {};\r\n        this.unitOperatorMap = {};\r\n        this.binaryOperatorMap = {};\r\n        this.keywordsMap = new Map();\r\n        this.bracketsMap = new Map();\r\n        assignOperator.map((item) => {\r\n            this.assignOperatorMap[item] = true;\r\n        });\r\n        unitOperator.map((item) => {\r\n            this.unitOperatorMap[item] = true;\r\n        });\r\n        binaryOperator.map((item) => {\r\n            this.binaryOperatorMap[item] = true;\r\n        });\r\n        keywords.map((item) => {\r\n            this.keywordsMap.set(item, true);\r\n        });\r\n        brackets.map((item) => {\r\n            this.bracketsMap.set(item, true);\r\n        });\r\n    }\r\n\r\n    Lexer.prototype.reset = function (option) {\r\n        this.lines = option.texts;\r\n        this.line = option.line || 1;\r\n        this.column = option.column || 0\r\n        this.input = this.lines[this.line - 1].slice(this.column);\r\n    }\r\n\r\n    Lexer.prototype.skip = function (length) {\r\n        this.input = length ? this.input.slice(length) : this.input;\r\n        this.column += length;\r\n    }\r\n\r\n    Lexer.prototype.skipLine = function (length) {\r\n        this.line += length;\r\n        this.column = 0;\r\n        this.input = this.lines[this.line - 1] || '';\r\n    }\r\n\r\n    Lexer.prototype.hasNext = function () {\r\n        if (Error.errors.length > maxErrors) {\r\n            return false;\r\n        }\r\n        return this.line < this.lines.length ||\r\n            this.line == this.lines.length && this.lines.peek().length > this.column\r\n    }\r\n\r\n    Lexer.prototype.isVariable = function (token) {\r\n        return token.type == TokenType.IDENTIFIER || token.value == 'this';\r\n    }\r\n\r\n    Lexer.prototype.isValue = function (token) {\r\n        return this.isScalar(token) || this.isVariable(token);\r\n    }\r\n\r\n    Lexer.prototype.isScalar = function (token) {\r\n        return (\r\n            token.type == TokenType.NUMBER ||\r\n            token.type == TokenType.STRING ||\r\n            token.type == TokenType.BOOLEAN ||\r\n            token.type == TokenType.REGEXP\r\n        );\r\n    }\r\n\r\n    Lexer.prototype.isDotAble = function (token) {\r\n        return token.type === TokenType.IDENTIFIER || token.type === TokenType.KEYWORD;\r\n    }\r\n\r\n    Lexer.prototype.isPostOp = function (token) {\r\n        return token.value === '++' || token.value === '--';\r\n    }\r\n\r\n    Lexer.prototype.isPreOp = function (token) {\r\n        return token.value === '++' || token.value === '--';\r\n    }\r\n\r\n    Lexer.prototype.isAssignOperator = function (token) {\r\n        return this.assignOperatorMap[token.value];\r\n    }\r\n\r\n    Lexer.prototype.isUnitOperator = function (token) {\r\n        return this.unitOperatorMap[token.value];\r\n    }\r\n\r\n    Lexer.prototype.isBinaryOperator = function (token) {\r\n        return this.binaryOperatorMap[token.value];\r\n    }\r\n\r\n    Lexer.prototype.isKeyWord = function (value) {\r\n        return this.keywordsMap.has(value);\r\n    }\r\n\r\n    Lexer.prototype.isBracket = function (value) {\r\n        return this.bracketsMap.has(value);\r\n    }\r\n\r\n    Lexer.prototype.isTokenType = function (type) {\r\n        return type._isTokenType;\r\n    }\r\n\r\n    Lexer.prototype.craeteToken = function (value, type) {\r\n        let line = this.line;\r\n        let column = this.column;\r\n        if (line > this.lines.length) {\r\n            line = this.lines.length;\r\n            column = this.lines.peek().length;\r\n        }\r\n        return {\r\n            type: type,\r\n            line: line,\r\n            column: column,\r\n            value: value\r\n        }\r\n    }\r\n\r\n    Lexer.prototype.scanSpace = function () {\r\n        var exec = null;\r\n        while (!this.input.length && this.line < this.lines.length) { //去掉空行\r\n            this.skipLine(1);\r\n        }\r\n        exec = regs.space.exec(this.input);\r\n        if (exec) {\r\n            this.skip(exec.index + exec[0].length);\r\n            exec.index >= this.input.length - 1 && this.scanSpace();\r\n        }\r\n    }\r\n\r\n    Lexer.prototype.scanComment = function () {\r\n        var exec = null;\r\n        var ch1 = null;\r\n        var ch2 = null;\r\n        var startToken = null;\r\n        this.scanSpace(); //去掉空格\r\n        ch1 = this.input[0];\r\n        ch2 = this.input[1];\r\n        if (ch1 === '/' && ch2 == '/') {\r\n            this.skipLine(1);\r\n            this.scanComment();\r\n        } else if (ch1 === '/' && ch2 === '*') {\r\n            startToken = this.craeteToken('/*');\r\n            this.skip(2);\r\n            while (this.hasNext() && !(exec = regs.comment.exec(this.input))) {\r\n                this.skipLine(1);\r\n            }\r\n            if (exec) {\r\n                this.skip(exec.index + exec[0].length);\r\n            } else {\r\n                Error.unmatch(startToken);\r\n            }\r\n        }\r\n    }\r\n\r\n    Lexer.prototype.scanString = function () {\r\n        var that = this;\r\n        var exec = null;\r\n        var token = null;\r\n        var startToken = null;\r\n        if (this.input[0] === '\\'') {\r\n            startToken = this.craeteToken('\\'', TokenType.STRING);\r\n            this.skip(1);\r\n            exec = _end(regs.string1);\r\n            token = this.craeteToken('\\'', TokenType.STRING);\r\n            if (!exec) {\r\n                Error.unmatch(startToken);\r\n                this.skipLine(1);\r\n            }\r\n            return token;\r\n        } else if (this.input[0] === '\"') {\r\n            startToken = this.craeteToken('\"', TokenType.STRING);\r\n            this.skip(1);\r\n            exec = _end(regs.string2);\r\n            token = this.craeteToken('\"', TokenType.STRING);\r\n            if (!exec) {\r\n                Error.unmatch(startToken);\r\n                this.skipLine(1);\r\n            }\r\n            return token;\r\n        } else if (this.input[0] === '`') {\r\n            startToken = this.craeteToken('`', TokenType.STRING);\r\n            this.skip(1);\r\n            while (this.hasNext()) {\r\n                exec = regs.string3.exec(this.input)\r\n                if (exec && exec[2]) { //模板字符串内的表达式：${test}\r\n                    _parseTmpStr(exec);\r\n                } else if (!exec || exec[0].length % 2 === 0) { //含有基数个\\：\\\\\\`\r\n                    this.skipLine(1);\r\n                } else {\r\n                    this.skip(exec.index + exec[0].length);\r\n                    break;\r\n                }\r\n            }\r\n            token = this.craeteToken('`', TokenType.STRING);\r\n            if (!(exec && exec[0].length % 2 === 1)) { //未匹配到结束符\r\n                Error.unmatch(startToken);\r\n            }\r\n        }\r\n        return token;\r\n\r\n        function _end(reg) {\r\n            if (exec = reg.exec(that.input)) {\r\n                that.skip(exec.index + exec[0].length);\r\n                if (exec[0].length % 2 === 0) { //含有奇数个\\:\\\\\\'\r\n                    return _end(reg);\r\n                }\r\n                return true;\r\n            } else if (that.input.peek() === '\\\\') {\r\n                that.skipLine(1);\r\n                return _end(reg);\r\n            }\r\n            return false;\r\n        }\r\n\r\n        function _parseTmpStr(exec) {\r\n            let preToken = that.parser.preToken;\r\n            let backs = that.parser.backs.slice(0);\r\n            let parseList = that.parser.parseList.slice(0);\r\n            that.skip(exec.index + exec[2].length);\r\n            //清空状态--begin\r\n            that.parser.preToken = null;\r\n            that.parser.backs = [];\r\n            that.parser.parseList = [];\r\n            //清空状态--end\r\n            that.parser.parseExprStmt();\r\n            that.parser.peekMatch('}');\r\n            //恢复状态--begin\r\n            that.parser.preToken = preToken;\r\n            that.parser.backs = backs;\r\n            that.parser.parseList = parseList;\r\n            //恢复状态--end\r\n        }\r\n    }\r\n\r\n    Lexer.prototype.scanNunmber = function () {\r\n        var exec = null;\r\n        var token = null;\r\n        if (exec = regs.number.exec(this.input)) {\r\n            token = this.craeteToken(exec[0], TokenType.NUMBER);\r\n            this.skip(exec.index + exec[0].length);\r\n        }\r\n        return token;\r\n    }\r\n\r\n    Lexer.prototype.scanIdentifier = function () {\r\n        var exec = null;\r\n        var token = null;\r\n        if (exec = regs.identifier.exec(this.input)) {\r\n            token = this.craeteToken(exec[0], this.isKeyWord(exec[0]) ? TokenType.KEYWORD : TokenType.IDENTIFIER);\r\n            if (token.value === 'true' || token.value === 'false') {\r\n                token.type = TokenType.BOOLEAN;\r\n            }\r\n            if (token.value === 'null') {\r\n                token.type = TokenType.NUMBER;\r\n            }\r\n            this.skip(exec.index + exec[0].length);\r\n        }\r\n        return token;\r\n    }\r\n\r\n    Lexer.prototype.scanBracket = function () {\r\n        var token = null;\r\n        var ch = this.input[0];\r\n        if (this.isBracket(ch)) {\r\n            token = this.craeteToken(ch, TokenType.BRACKET);\r\n            this.skip(1);\r\n        }\r\n        return token;\r\n    }\r\n\r\n    // 操作符号\r\n    Lexer.prototype.scanOperator = function () {\r\n        var ch1 = this.input[0];\r\n        var ch2 = this.input[1];\r\n        var ch3 = this.input[2];\r\n        var ch4 = this.input[3];\r\n        var token = null;\r\n        if (ch1 == '.' && ch2 === '.' && ch3 === '.') {\r\n            token = this.craeteToken('...', TokenType.OPERATOR);\r\n        } else if (ch1 === \">\" && ch2 === \">\" && ch3 === \">\" && ch4 === \"=\") {\r\n            token = this.craeteToken('>>>=', TokenType.OPERATOR);\r\n        } else if (ch1 === \"=\" && ch2 === \"=\" && ch3 === \"=\") {\r\n            token = this.craeteToken('===', TokenType.OPERATOR);\r\n        } else if (ch1 === \"!\" && ch2 === \"=\" && ch3 === \"=\") {\r\n            token = this.craeteToken('!==', TokenType.OPERATOR);\r\n        } else if (ch1 === \">\" && ch2 === \">\" && ch3 === \">\") {\r\n            token = this.craeteToken('>>>', TokenType.OPERATOR);\r\n        } else if (ch1 === \"<\" && ch2 === \"<\" && ch3 === \"=\") {\r\n            token = this.craeteToken('<<=', TokenType.OPERATOR);\r\n        } else if (ch1 === \">\" && ch2 === \">\" && ch3 === \"=\") {\r\n            token = this.craeteToken('>>=', TokenType.OPERATOR);\r\n        } else if (ch1 === \"=\" && ch2 === \">\") {\r\n            token = this.craeteToken('=>', TokenType.OPERATOR);\r\n        } else if (ch1 === ch2 && (\"+-<>&|*\".indexOf(ch1) >= 0)) {\r\n            if (ch1 === \"*\" && ch3 === \"=\") {\r\n                token = this.craeteToken(ch1 + ch2 + ch3, TokenType.OPERATOR);\r\n            } else {\r\n                token = this.craeteToken(ch1 + ch2, TokenType.OPERATOR);\r\n            }\r\n        } else if (\"<>=!+-*%&|^/\".indexOf(ch1) >= 0) {\r\n            if (ch2 === \"=\") {\r\n                token = this.craeteToken(ch1 + ch2, TokenType.OPERATOR);\r\n            } else {\r\n                token = this.craeteToken(ch1, TokenType.OPERATOR);\r\n            }\r\n        } else if ('?:.;,~'.indexOf(ch1) > -1) {\r\n            token = this.craeteToken(ch1, TokenType.OPERATOR);\r\n        }\r\n        token && this.skip(token.value.length);\r\n        return token;\r\n    }\r\n\r\n    Lexer.prototype.scanOther = function () {\r\n        var exec = null;\r\n        var token = null;\r\n        if (exec = regs.other.exec(this.input)) {\r\n            token = this.craeteToken(exec[0], TokenType.OTHER);\r\n            this.skip(exec.index + exec[0].length);\r\n        }\r\n        return token\r\n    }\r\n\r\n    Lexer.prototype.next = function () {\r\n        let token = null;\r\n        let that = this;\r\n        this.scanComment();\r\n        if (this.hasNext()) {\r\n            token =\r\n                this.scanIdentifier() ||\r\n                this.scanBracket() ||\r\n                this.scanNunmber() ||\r\n                this.scanString() ||\r\n                _scanOp()\r\n            if (!token) { //存在非法变量\r\n                token = this.scanOther();\r\n                token && Error.unexpected(token);\r\n                return this.next();\r\n            }\r\n        }\r\n        this.preToken = token;\r\n        return token;\r\n\r\n        function _scanOp() {\r\n            let token = null;\r\n            if (\r\n                that.input[0] === '/' &&\r\n                (\r\n                    !that.preToken ||\r\n                    that.preToken.type === TokenType.OPERATOR ||\r\n                    that.preToken.value === '{' ||\r\n                    that.preToken.value === '[' ||\r\n                    that.preToken.value === '(' ||\r\n                    that.preToken.value === 'return'\r\n                )\r\n            ) {\r\n                let exec = regs.regex.exec(that.input);\r\n                if (exec) {\r\n                    token = that.craeteToken(exec[0], TokenType.REGEXP);\r\n                    that.skip(exec.index + exec[0].length);\r\n                } else {\r\n                    token = that.craeteToken(that.input, TokenType.REGEXP);\r\n                    that.skipLine(1);\r\n                    if (token.value.peek() !== '/') {\r\n                        let _token = Object.assign({}, token);\r\n                        _token.value = '/';\r\n                        Error.unmatch(_token);\r\n                    }\r\n                }\r\n            } else {\r\n                token = that.scanOperator();\r\n            }\r\n            return token;\r\n        }\r\n    }\r\n\r\n    // 语法分析器\r\n    function Parser(lexer) {\r\n        this.lexer = lexer;\r\n        this.cacheList = [];\r\n        this.backs = [];\r\n        this.parseList = [];\r\n        this.preToken = null;\r\n        Error.errors = [];\r\n    }\r\n\r\n    Parser.prototype.reset = function (text) {\r\n        this.backs = [];\r\n        this.parseList = [];\r\n        this.preToken = null;\r\n        this.recovery(text);\r\n        Error.errors = [];\r\n    }\r\n\r\n    // 添加缓存\r\n    Parser.prototype.cache = function () {\r\n        if (this.cacheList.length && this.cacheList.peek().line == this.lexer.line) {\r\n            this.cacheList.pop();\r\n        }\r\n        this.preToken && this.cacheList.push({\r\n            line: this.preToken.line,\r\n            column: this.preToken.column,\r\n            parseList: this.parseList.slice(0)\r\n        });\r\n    }\r\n\r\n    // 从缓存中恢复\r\n    Parser.prototype.recovery = function (text) {\r\n        var index = 0;\r\n        var texts = text.split('\\n') || [''];\r\n        var hasCache = false;\r\n        while (index < texts.length && index < this.lexer.lines.length && texts[index] === this.lexer.lines[index]) {\r\n            index++;\r\n        }\r\n        if (index > 0) {\r\n            var cacheIndex = -1;\r\n            for (var i = 0; i < this.cacheList.length; i++) {\r\n                if (this.cacheList[i].line <= index) {\r\n                    cacheIndex = i;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n            if (cacheIndex > -1) {\r\n                var cache = this.cacheList[cacheIndex];\r\n                this.parseList = cache.parseList;\r\n                this.cacheList = this.cacheList.slice(0, cacheIndex + 1);\r\n                this.lexer.reset({\r\n                    texts: texts,\r\n                    line: cache.line,\r\n                    column: cache.column\r\n                });\r\n                this.next();\r\n                hasCache = true;\r\n            }\r\n        }\r\n        if (!hasCache) {\r\n            this.cacheList = [];\r\n            this.lexer.reset({\r\n                texts: texts\r\n            });\r\n        }\r\n    }\r\n\r\n    Parser.prototype.match = function (token, value) {\r\n        var pass = false;\r\n        for (var i = 0; i < value.length; i++) {\r\n            if (this.lexer.isTokenType(value[i])) {\r\n                if (value[i] === token.type) {\r\n                    pass = true;\r\n                    break;\r\n                }\r\n            } else if (value[i] === token.value) {\r\n                pass = true;\r\n                break;\r\n            }\r\n        };\r\n        return pass;\r\n    }\r\n\r\n    Parser.prototype.next = function (length) {\r\n        var token = null;\r\n        length = length || 1;\r\n        while (length > 0) {\r\n            if (this.backs.length) {\r\n                token = this.backs.shift();\r\n            } else {\r\n                token = this.lexer.next();\r\n            }\r\n            this.pre2Token = this.preToken;\r\n            this.preToken = token || this.preToken;\r\n            length--;\r\n        }\r\n        this.puted = false;\r\n        return token;\r\n    }\r\n\r\n    Parser.prototype.nextMatch = function (value) {\r\n        var token = this.next() || {};\r\n        var pass = false;\r\n        value = value._isArray ? value : [value];\r\n        pass = token.value && this.match(token, value);\r\n        if (!pass) {\r\n            if (token.value && this.match(this.peek(), value)) {\r\n                Error.unexpected(token);\r\n            } else {\r\n                Error.expected(token, value);\r\n            }\r\n        }\r\n        return pass;\r\n    }\r\n\r\n    Parser.prototype.peek = function (length) {\r\n        var token = null;\r\n        length = length || 1;\r\n        if (this.backs.length) {\r\n            token = this.backs[length - 1];\r\n        }\r\n        if (!token) {\r\n            length -= this.backs.length;\r\n            while (length > 0) {\r\n                length--;\r\n                token = this.lexer.next();\r\n                token && this.backs.push(token);\r\n            }\r\n        }\r\n        return token || {};\r\n    }\r\n\r\n    Parser.prototype.peekMatch = function (value) {\r\n        var token = this.peek() || {};\r\n        var pass = false;\r\n        value = value._isArray ? value : [value];\r\n        pass = token.value && this.match(token, value);\r\n        if (pass) {\r\n            this.next();\r\n        } else {\r\n            if (token.value && this.match(this.peek(), value)) {\r\n                Error.unexpected(token);\r\n            } else {\r\n                Error.expected(token, value);\r\n            }\r\n        }\r\n        return pass;\r\n    }\r\n\r\n    Parser.prototype.hasNext = function () {\r\n        var lookahead = this.peek();\r\n        return lookahead.value\r\n    }\r\n\r\n    Parser.prototype.putBack = function () {\r\n        if (this.preToken && !this.puted) {\r\n            this.backs.unshift(this.preToken);\r\n            this.preToken = this.pre2Token;\r\n            this.puted = true;\r\n        }\r\n    }\r\n\r\n    Parser.prototype.skipSemicolon = function (length) {\r\n        length = length || Infinity\r\n        while (this.peek().value === ';' && length > 0) {\r\n            this.next();\r\n            length--;\r\n        }\r\n    }\r\n\r\n    Parser.prototype.parse = function () {\r\n        var count = 0;\r\n        var startTime = Date.now();\r\n        while (this.hasNext()) {\r\n            this.parseStmt();\r\n            !Error.errors.length && this.cache();\r\n            if (++count % 10 === 0 && Date.now() - startTime > 200) {\r\n                this.parseTimer = setTimeout(() => {\r\n                    this.parseStmt();\r\n                }, 10);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 代码块\r\n    Parser.prototype.parseStmt = function (skipCheckSemicolon) {\r\n        var lookahead = this.peek();\r\n        if (skipCheckSemicolon) {\r\n            if (lookahead.value === ';') {\r\n                return;\r\n            }\r\n        } else if (this.preToken && this.preToken.line == lookahead.line &&\r\n            this.preToken.value != '{' && this.preToken.value != '}' &&\r\n            lookahead.value != ';') { //两条语句在同一行，且没有分隔符\r\n            Error.expectedSemicolon(lookahead);\r\n        }\r\n        this.skipSemicolon();\r\n        lookahead = this.peek();\r\n        if (lookahead.type === TokenType.IDENTIFIER && this.peek(2).value === ':') { //跳转标记\r\n            this.next(2);\r\n            lookahead = this.peek();\r\n        }\r\n        switch (lookahead.value) {\r\n            case 'var':\r\n            case 'let':\r\n            case 'const':\r\n                this.parseDeclareStmt();\r\n                break;\r\n            case '{':\r\n                if (this.peek(3).value === ':') {\r\n                    this.parseObjectStmt();\r\n                } else {\r\n                    this.parseBlockStmt();\r\n                }\r\n                break;\r\n            case 'import':\r\n                this.parseImportStmt();\r\n                break;\r\n            case 'export':\r\n                this.parseExportStmt();\r\n                break;\r\n            case 'if':\r\n                this.parseIfStmt();\r\n                break;\r\n            case 'switch':\r\n                this.parseSwitchStmt();\r\n                break;\r\n            case 'with':\r\n                this.parseWithStmt();\r\n                break;\r\n            case 'while':\r\n                this.parseWhileStmt();\r\n                break;\r\n            case 'do':\r\n                this.parseDoStmt();\r\n                break;\r\n            case 'try':\r\n                this.parseTryStmt();\r\n                break;\r\n            case 'for':\r\n                this.parseForStmt();\r\n                break;\r\n            case 'class':\r\n                this.parseClassStmt();\r\n                break;\r\n            case 'continue':\r\n            case 'break':\r\n                this.parseControlStmt();\r\n                break;\r\n            case 'return':\r\n                this.parseReturnStmt();\r\n                break;\r\n            case 'throw':\r\n                this.parseThrowStmt();\r\n                break;\r\n            case 'function':\r\n                this.parseFunctionStmt(true);\r\n                break;\r\n            default:\r\n                this.parseExprStmt();\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 代码块\r\n    Parser.prototype.parseBlockStmt = function (ends) {\r\n        let start = this.peek();\r\n        this.peekMatch('{');\r\n        while (this.hasNext()) {\r\n            this.skipSemicolon();\r\n            let lookahead = this.peek();\r\n            if (lookahead.value === '}' || ends && ends.indexOf(lookahead.value) > -1) {\r\n                break;\r\n            }\r\n            this.parseStmt(true);\r\n        }\r\n        if (!this.peekMatch('}') && start.value === '{') {\r\n            Error.unmatch(start);\r\n        }\r\n    }\r\n\r\n    // 对象字面量\r\n    Parser.prototype.parseObjectStmt = function () {\r\n        var start = this.peek();\r\n        var lookahead = null;\r\n        this.peekMatch('{');\r\n        while (this.hasNext() && this.peek().value != '}') {\r\n            if (this.peek().value === '...') { //对象展开运算符\r\n                this.next();\r\n                if (this.peek().value === '{') { //{...{a:1}}\r\n                    this.parseObjectStmt();\r\n                } else { //{...a}\r\n                    this.nextMatch(TokenType.IDENTIFIER);\r\n                }\r\n            } else {\r\n                if (this.peek().value === '[') { //{[1]:1}\r\n                    this.next();\r\n                    this.parseExpr();\r\n                    this.peekMatch(']');\r\n                } else if (this.peek().type === TokenType.OPERATOR) { //非法属性名\r\n                    Error.unexpected(this.next());\r\n                } else if (!this.hasNext()) {\r\n                    break;\r\n                } else {\r\n                    this.next();\r\n                }\r\n                lookahead = this.peek();\r\n                if (lookahead.value === ':' || this.preToken.value === ']') { //{a:1,[1]:1}\r\n                    this.peekMatch(':');\r\n                    this.parseExpr();\r\n                } else { //{a,b}\r\n                    if (this.preToken.type !== TokenType.IDENTIFIER) {\r\n                        Error.expected(lookahead, ':');\r\n                    }\r\n                    if (lookahead.value === '(') { //{a(){},b}\r\n                        this.parseFunArgsStmt();\r\n                        this.parseBlockStmt();\r\n                    } else if (this.peek(2).value === '(') { //{get a(){}, static b(){}}\r\n                        if (this.preToken.value !== 'get' && this.preToken.value !== 'static') {\r\n                            Error.expected(this.preToken, ['get', 'static']);\r\n                        }\r\n                        this.nextMatch(TokenType.IDENTIFIER);\r\n                        this.parseFunArgsStmt();\r\n                        this.parseBlockStmt();\r\n                    }\r\n                }\r\n            }\r\n            if (this.peek().value != '}') {\r\n                if (!this.peekMatch(',')) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (!this.peekMatch('}') && start.value === '{') {\r\n            Error.unmatch(start);\r\n        }\r\n    }\r\n\r\n    // 声明语句\r\n    Parser.prototype.parseDeclareStmt = function () {\r\n        let that = this;\r\n        this.nextMatch(['var', 'let', 'const']);\r\n        _identifier()\r\n        if (this.peek().value === '=') {\r\n            _assign();\r\n        }\r\n        while (this.hasNext() && this.peek().value === ',') {\r\n            this.next();\r\n            _identifier();\r\n            if (this.peek().value === '=') {\r\n                _assign();\r\n            }\r\n        }\r\n\r\n        function _assign() {\r\n            that.next();\r\n            that.parseExpr();\r\n        }\r\n\r\n        function _identifier() {\r\n            let lookahead = that.peek();\r\n            if (lookahead.value === '{' || lookahead.value === '[') { //es6:const {a,b} = {a:1,b:2}、const [a,b] = [1,2]\r\n                let startToken = that.next();\r\n                let value = lookahead.value === '{' ? '}' : ']';\r\n                that.nextMatch(TokenType.IDENTIFIER);\r\n                while (that.hasNext() && that.peek().value !== value) {\r\n                    that.peekMatch(',')\r\n                    if (!that.peekMatch(TokenType.IDENTIFIER)) {\r\n                        break;\r\n                    }\r\n                }\r\n                if (!that.peekMatch(value)) {\r\n                    Error.unmatch(startToken);\r\n                }\r\n            } else {\r\n                that.nextMatch(TokenType.IDENTIFIER);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 赋值语句\r\n    Parser.prototype.parseAssignStmt = function (value) {\r\n        value = value || '=';\r\n        this.nextMatch(value);\r\n        while (this.hasNext()) {\r\n            if (this.peek(2).value === '=') { //a=1,b=2\r\n                !this.lexer.isVariable(this.next()) && Error.expected(TokenType.IDENTIFIER);\r\n                this.parseAssignStmt('=');\r\n                break;\r\n            } else {\r\n                this.parseExpr();\r\n            }\r\n            if (this.peek().value !== ',') {\r\n                break;\r\n            }\r\n            this.next();\r\n        }\r\n    }\r\n\r\n    // import语句\r\n    Parser.prototype.parseImportStmt = function () {\r\n        var lookahead = null;\r\n        this.nextMatch('import');\r\n        lookahead = this.peek();\r\n        if (lookahead.type === TokenType.STRING) { //import 'test.css'\r\n            this.next();\r\n        } else {\r\n            if (lookahead.value === '{') { //import {a,b,c} from 'test'\r\n                this.next();\r\n                this.nextMatch(TokenType.IDENTIFIER);\r\n                while (this.hasNext() && this.peek().value != '}') {\r\n                    this.peekMatch(',')\r\n                    if (!this.peekMatch(TokenType.IDENTIFIER)) {\r\n                        break;\r\n                    }\r\n                    if (this.peek().value === 'as') { //import {a as b} from 'test'\r\n                        this.next();\r\n                        this.nextMatch(TokenType.IDENTIFIER);\r\n                    }\r\n                }\r\n                if (!this.peekMatch('}')) {\r\n                    Error.unmatch(lookahead);\r\n                }\r\n            } else if (lookahead.value === '*') { //import * as a from 'test'\r\n                this.next();\r\n                this.nextMatch('as');\r\n                this.nextMatch(TokenType.IDENTIFIER);\r\n            } else { //import a from 'test'\r\n                this.nextMatch(TokenType.IDENTIFIER);\r\n            }\r\n            this.nextMatch('from');\r\n            this.nextMatch(TokenType.STRING);\r\n        }\r\n    }\r\n\r\n    // export语句\r\n    Parser.prototype.parseExportStmt = function () {\r\n        var lookahead = null;\r\n        this.nextMatch('export');\r\n        lookahead = this.peek();\r\n        if (lookahead.value === 'function') { //export function test\r\n            this.next();\r\n            this.parseFunctionStmt();\r\n        } else if (lookahead.value === 'default') { //export default test\r\n            this.next();\r\n            lookahead = this.peek();\r\n            if (lookahead.value == 'function') { //export default function\r\n                this.parseFunctionStmt();\r\n            } else if (lookahead.value === 'class') { //export default class {}\r\n                this.parseClassStmt();\r\n            } else {\r\n                this.parseExprStmt();\r\n            }\r\n        } else if (lookahead.value === '{') { //export {a,b,c} from 'test'\r\n            this.next();\r\n            this.nextMatch(TokenType.IDENTIFIER);\r\n            while (this.hasNext() && this.peek().value != '}') {\r\n                this.peekMatch(',')\r\n                if (!this.peekMatch(TokenType.IDENTIFIER)) {\r\n                    break;\r\n                }\r\n                if (this.peek().value === 'as') { //export {a as b} from 'test'\r\n                    this.next();\r\n                    this.nextMatch(TokenType.IDENTIFIER);\r\n                }\r\n            }\r\n            if (!this.peekMatch('}')) {\r\n                Error.unmatch(lookahead);\r\n            }\r\n            if (this.peek().value === 'from') {\r\n                this.next();\r\n                this.nextMatch(TokenType.STRING);\r\n            }\r\n        } else if (lookahead.value === '*') { //export * as a from 'test'\r\n            this.next();\r\n            if (this.peek().value === 'as') {\r\n                this.nextMatch('as');\r\n                this.nextMatch(TokenType.IDENTIFIER);\r\n            }\r\n            this.nextMatch('from');\r\n            this.nextMatch(TokenType.STRING);\r\n        } else { //export let a=1,b,c\r\n            this.parseDeclareStmt();\r\n        }\r\n    }\r\n\r\n    // if语句\r\n    Parser.prototype.parseIfStmt = function () {\r\n        let that = this;\r\n        let lookahead = null;\r\n        this.nextMatch('if');\r\n        this.parseList.push('if');\r\n        _nextExpr();\r\n        if (_stmt() && this.peek().value === ';') {\r\n            lookahead = this.peek(2);\r\n        } else {\r\n            lookahead = this.peek();\r\n        }\r\n        if (lookahead.value === 'else') {\r\n            this.next().value === ';' && this.next();\r\n            if (this.peek().value === 'if') {\r\n                this.parseIfStmt();\r\n            } else {\r\n                _stmt();\r\n            }\r\n        }\r\n        this.parseList.pop();\r\n\r\n        function _nextExpr() {\r\n            that.peekMatch('(');\r\n            that.parseExprStmt();\r\n            that.peekMatch(')');\r\n        }\r\n\r\n        function _stmt() {\r\n            if (that.peek().value === '{') {\r\n                that.parseBlockStmt(['else']);\r\n            } else {\r\n                that.parseStmt(true);\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    // switch语句\r\n    Parser.prototype.parseSwitchStmt = function () {\r\n        let start = null;\r\n        let lookahead = null;\r\n        this.parseList.push('switch');\r\n        this.nextMatch('switch');\r\n        this.peekMatch('(');\r\n        this.parseExprStmt();\r\n        this.peekMatch(')');\r\n        start = this.peek();\r\n        this.peekMatch('{');\r\n        while (this.hasNext() && this.peek().value != '}') {\r\n            if (this.peek().value === 'default') {\r\n                this.nextMatch('default');\r\n            } else {\r\n                this.nextMatch('case');\r\n                this.parseExprStmt();\r\n            }\r\n            this.peekMatch(':');\r\n            while (this.hasNext()) {\r\n                this.skipSemicolon();\r\n                lookahead = this.peek();\r\n                if (lookahead.value === '}' ||\r\n                    lookahead.value === 'break' ||\r\n                    lookahead.value === 'case' ||\r\n                    lookahead.value === 'default') {\r\n                    break;\r\n                }\r\n                this.parseStmt(true);\r\n            }\r\n            if (this.peek().value === 'break') {\r\n                let map = {\r\n                    '}': true,\r\n                    'case': true,\r\n                    'default': true,\r\n                }\r\n                this.next();\r\n                this.skipSemicolon();\r\n                lookahead = this.peek();\r\n                if (!map[lookahead.value]) { //break后面只能跟随case\r\n                    Error.expected(lookahead, ['case', 'default']);\r\n                    while (this.hasNext() && !map[this.peek().value]) {\r\n                        this.next();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (!this.peekMatch('}') && start.value === '{') {\r\n            Error.unmatch(start);\r\n        }\r\n        this.parseList.pop();\r\n    }\r\n\r\n    // with语句\r\n    Parser.prototype.parseWithStmt = function () {\r\n        this.nextMatch('with');\r\n        this.peekMatch('(');\r\n        this.parseExprStmt();\r\n        this.peekMatch(')');\r\n        this.parseBlockStmt();\r\n    }\r\n\r\n    // while语句\r\n    Parser.prototype.parseWhileStmt = function () {\r\n        this.parseList.push('while');\r\n        this.nextMatch('while');\r\n        this.peekMatch('(');\r\n        this.parseExprStmt();\r\n        this.peekMatch(')');\r\n        if (this.peek().value === '{') {\r\n            this.parseBlockStmt();\r\n        } else {\r\n            this.parseStmt(true);\r\n        }\r\n        this.parseList.pop();\r\n    }\r\n\r\n    // do while语句\r\n    Parser.prototype.parseDoStmt = function () {\r\n        this.parseList.push('do');\r\n        this.nextMatch('do');\r\n        if (this.peek().value === '{') {\r\n            this.parseBlockStmt();\r\n        } else {\r\n            this.parseStmt(true);\r\n            this.skipSemicolon(1);\r\n        }\r\n        this.nextMatch('while');\r\n        this.peekMatch('(');\r\n        this.parseExprStmt();\r\n        this.peekMatch(')');\r\n        this.parseList.pop();\r\n    }\r\n\r\n    // try catch语句\r\n    Parser.prototype.parseTryStmt = function () {\r\n        let lookahead = null;\r\n        this.nextMatch('try');\r\n        this.parseBlockStmt();\r\n        lookahead = this.peek();\r\n        if (lookahead.value !== 'catch' && lookahead.value !== 'finally') {\r\n            Error.expected(lookahead, ['catch', 'finally']);\r\n        } else {\r\n            if (lookahead.value === 'catch') {\r\n                this.nextMatch('catch');\r\n                this.peekMatch('(');\r\n                this.nextMatch(TokenType.IDENTIFIER);\r\n                this.peekMatch(')');\r\n                this.parseBlockStmt();\r\n            }\r\n            if (this.peek().value === 'finally') {\r\n                this.next();\r\n                this.parseBlockStmt();\r\n            }\r\n        }\r\n    }\r\n\r\n    // for语句\r\n    Parser.prototype.parseForStmt = function () {\r\n        this.parseList.push('for');\r\n        this.nextMatch('for');\r\n        this.peekMatch('(');\r\n        if (this.peek(2).value === 'in' ||\r\n            this.peek(2).value === 'of' ||\r\n            this.peek(3).value === 'in' ||\r\n            this.peek(3).value === 'of') { //for in、es6 for of 语句\r\n            if (this.peek(3).value === 'in' || this.peek(3).value === 'of') {\r\n                this.nextMatch(['var', 'let', 'const']);\r\n            }\r\n            this.nextMatch(TokenType.IDENTIFIER);\r\n            this.nextMatch(['in', 'of']);\r\n            this.parseExprStmt();\r\n        } else {\r\n            if (['var', 'let', 'const'].indexOf(this.peek().value) > -1) {\r\n                this.parseDeclareStmt();\r\n            } else if (this.peek().value != ';') {\r\n                this.parseExprStmt();\r\n            }\r\n            this.nextMatch(';');\r\n            this.peek().value != ';' && this.parseExprStmt();\r\n            this.nextMatch(';');\r\n            this.peek().value != ')' && this.parseExprStmt();\r\n        }\r\n        this.peekMatch(')');\r\n        if (this.peek().value === '{') {\r\n            this.parseBlockStmt();\r\n        } else {\r\n            this.parseStmt(true);\r\n        }\r\n        this.parseList.pop();\r\n    }\r\n\r\n    // 函数声明\r\n    Parser.prototype.parseFunctionStmt = function (needName) {\r\n        this.nextMatch('function');\r\n        if (this.peek().type === TokenType.IDENTIFIER || needName) {\r\n            this.nextMatch(TokenType.IDENTIFIER);\r\n        }\r\n        this.parseFunArgsStmt();\r\n        this.parseBlockStmt();\r\n    }\r\n\r\n    // 类声明\r\n    Parser.prototype.parseClassStmt = function () {\r\n        var start = null;\r\n        var needName = !this.preToken || ['(', '=', 'default'].indexOf(this.preToken.value) == -1;\r\n        this.nextMatch('class');\r\n        if (this.peek().type === TokenType.IDENTIFIER || needName) {\r\n            this.nextMatch(TokenType.IDENTIFIER);\r\n        }\r\n        if (this.peek().value === 'extends') {\r\n            this.next();\r\n            this.nextMatch(TokenType.IDENTIFIER);\r\n        }\r\n        start = this.peek();\r\n        this.peekMatch('{');\r\n        while (this.hasNext() && this.peek().value != '}') {\r\n            if (this.peek(2).value === '=') { //属性\r\n                this.nextMatch(TokenType.IDENTIFIER);\r\n                this.parseAssignStmt('=');\r\n            } else { //方法\r\n                if (this.peek().value === 'static' || this.peek().value === 'get') {\r\n                    this.next();\r\n                }\r\n                this.nextMatch(TokenType.IDENTIFIER);\r\n                this.parseFunArgsStmt();\r\n                this.parseBlockStmt();\r\n            }\r\n        }\r\n        if (!this.peekMatch('}') && start.value === '{') {\r\n            Error.unmatch(start);\r\n        }\r\n    }\r\n\r\n    // 函数参数\r\n    Parser.prototype.parseFunArgsStmt = function () {\r\n        let that = this;\r\n        this.peekMatch('(');\r\n        if (this.peek().value != ')') {\r\n            this.nextMatch(TokenType.IDENTIFIER);\r\n        }\r\n        if (this.peek().value === '=') { //es6预设值\r\n            _assign();\r\n        }\r\n        while (this.hasNext() && this.peek().value === ',') {\r\n            this.next();\r\n            this.nextMatch(TokenType.IDENTIFIER);\r\n            if (this.peek().value === '=') {\r\n                _assign();\r\n            }\r\n        }\r\n        this.peekMatch(')');\r\n\r\n        function _assign() {\r\n            that.next();\r\n            that.parseExpr();\r\n        }\r\n    }\r\n\r\n    // break,continue\r\n    Parser.prototype.parseControlStmt = function () {\r\n        var token = this.next();\r\n        if (!this.checkIn(['for', 'while', 'do', 'if'])) {\r\n            Error.unexpected(token);\r\n        } else if (this.peek().type === TokenType.IDENTIFIER) { //continue flag\r\n            this.next();\r\n        }\r\n    }\r\n\r\n    // return语句\r\n    Parser.prototype.parseReturnStmt = function () {\r\n        var lookahead = null;\r\n        this.nextMatch('return');\r\n        lookahead = this.peek();\r\n        if (lookahead.value !== ';' && lookahead.value !== '}' && lookahead.line === this.preToken.line) {\r\n            this.parseExprStmt();\r\n        }\r\n    }\r\n\r\n    // throw语句\r\n    Parser.prototype.parseThrowStmt = function () {\r\n        var lookahead = null;\r\n        this.nextMatch('throw');\r\n        lookahead = this.peek();\r\n        if (lookahead.line !== this.preToken.line) {\r\n            Error.expected(lookahead, 'expression');\r\n        } else {\r\n            this.parseExprStmt();\r\n        }\r\n    }\r\n\r\n    Parser.prototype.checkIn = function (value) {\r\n        value = value instanceof Array ? value : [value];\r\n        for (var i = this.parseList.length; i >= 0; i--) {\r\n            if (value.indexOf(this.parseList[i]) > -1) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // 正则表达式\r\n    Parser.prototype.parseRegex = function () {\r\n        this.next();\r\n        if (this.peek().type === TokenType.IDENTIFIER) {\r\n            let value = this.peek().value.toLowerCase();\r\n            if (regflagsMap[value.split('').sort().join('')]) {\r\n                this.next();\r\n            }\r\n        }\r\n    }\r\n\r\n    // 表达式分析\r\n    Parser.prototype.parseExprStmt = function () {\r\n        while (this.hasNext()) {\r\n            this.parseExpr();\r\n            if (this.peek().value == ',') { //下一个表达式\r\n                this.next();\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 单条表达式分析\r\n    Parser.prototype.parseExpr = function () {\r\n        var originToken = this.peek();\r\n        var lookahead = null;\r\n        if (!this.hasNext()) {\r\n            Error.expected(null, 'expression');\r\n            return;\r\n        }\r\n        while (true) {\r\n            var leftHand = this.parseLeftHand();\r\n            if (leftHand.end) { //前面非标识符\r\n                break;\r\n            }\r\n            lookahead = this.peek();\r\n            if (lookahead.value === '.' && this.preToken.type !== TokenType.NUMBER) { //点运算符\r\n                this.parseDot();\r\n                lookahead = this.peek();\r\n                leftHand.assignAble = true;\r\n            }\r\n            if (lookahead.value === '[' && this.preToken.type !== TokenType.NUMBER) { //属性运算符\r\n                this.parseProperty();\r\n                lookahead = this.peek();\r\n                leftHand.assignAble = true;\r\n            }\r\n            if (this.lexer.isPostOp(lookahead)) { //后置运算符\r\n                !leftHand.assignAble && Error.expectedIdentifier(lookahead);\r\n                leftHand.assignAble = false;\r\n                this.next();\r\n                lookahead = this.peek();\r\n            }\r\n            if (lookahead.value === '?') { //三元运算符\r\n                this.nextMatch('?');\r\n                this.parseExpr();\r\n                this.peekMatch(':');\r\n                continue;\r\n            }\r\n            if (this.lexer.isAssignOperator(lookahead) && leftHand.assignAble) { //赋值运算符\r\n                this.parseAssignStmt(this.peek().value);\r\n                break;\r\n            }\r\n            if (!this.lexer.isBinaryOperator(lookahead)) { //下一个不是二元运算符，表达式结束\r\n                break;\r\n            }\r\n            this.next();\r\n            if (!this.hasNext()) { //表达式未结束\r\n                Error.unexpected(this.preToken);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    Parser.prototype.parseLeftHand = function () {\r\n        let preToken = this.preToken;\r\n        let token = this.next();\r\n        let lookahead = null;\r\n        let assignAble = false; //是否可赋值\r\n        let end = false; //是否结束当前表达式\r\n        let isPreOp = false;\r\n        let isSignOp = false;\r\n        if (this.lexer.isUnitOperator(token)) { //一元运算符:+1,-1\r\n            if (token.value === '!' || token.value === 'delete' || token.value === 'void') {\r\n                let value = token.value;\r\n                while (token && token.value === value) { //!!!...\r\n                    preToken = token;\r\n                    token = this.next();\r\n                }\r\n            } else {\r\n                preToken = token;\r\n                token = this.next();\r\n            }\r\n            isSignOp = true;\r\n        }\r\n        if (token && this.lexer.isPreOp(token)) { //前置运算符:++a,--a\r\n            preToken = token;\r\n            token = this.next();\r\n            token && !this.lexer.isVariable(token) && Error.expectedIdentifier(token);\r\n            isPreOp = true;\r\n        }\r\n        lookahead = this.peek();\r\n        if (!token) {\r\n            Error.expectedIdentifier();\r\n            end = true;\r\n        } else if (token.value === 'function') { //函数声明\r\n            this.putBack();\r\n            this.parseFunctionStmt();\r\n            if (this.peek().value === '(') { //function(){}()\r\n                this.parseCallArgs();\r\n            }\r\n        } else if (token.value === '(') {\r\n            this.putBack();\r\n            this.parseParen();\r\n            assignAble = true;\r\n        } else if (token.value === '[') { //数组\r\n            this.putBack();\r\n            this.parseArray();\r\n        } else if (token.value === 'new') { //new对象\r\n            this.putBack();\r\n            this.parseNew();\r\n        } else if (token.value == '{') { //对象字面量\r\n            this.putBack();\r\n            this.parseObjectStmt();\r\n        } else if (token.type === TokenType.REGEXP) { //正则表达式\r\n            this.putBack();\r\n            this.parseRegex();\r\n        } else if (lookahead.value === '(' && !isPreOp) { //函数调用test()\r\n            this.parseCallArgs();\r\n        } else if (lookahead.value === '=>' &&\r\n            !isPreOp && !isSignOp && this.lexer.isVariable(token)) { //es6箭头函数test=>{}\r\n            this.parseArrorwFunction(preToken && preToken.value === ':');\r\n            end = true;\r\n        } else if (!isPreOp && !isSignOp && this.lexer.isVariable(token)) { //是否可赋值\r\n            assignAble = true;\r\n        } else if (!this.lexer.isValue(token)) { //非运算对象\r\n            Error.expectedIdentifier(token);\r\n            end = true;\r\n        }\r\n        return {\r\n            assignAble: assignAble,\r\n            end: end\r\n        }\r\n    }\r\n\r\n    Parser.prototype.parseParen = function () {\r\n        let lookLength = 1;\r\n        let startToken = this.peek();\r\n        let preToken = this.preToken;\r\n        this.nextMatch('(');\r\n        let lookToken = this.peek();\r\n        while (lookToken.value && lookToken.value != ')') {\r\n            lookLength++;\r\n            lookToken = this.peek(lookLength);\r\n        }\r\n        if (lookToken.value === ')' && this.peek(lookLength + 1).value === '=>') { //es6箭头函数\r\n            this.putBack();\r\n            this.parseFunArgsStmt();\r\n            this.parseArrorwFunction(preToken && preToken.value === ':');\r\n        } else {\r\n            this.parseExprStmt();\r\n            !this.peekMatch(')') && Error.unmatch(startToken);\r\n            if (this.peek().value === '(') { //(a)()\r\n                this.parseCallArgs();\r\n            }\r\n        }\r\n    }\r\n\r\n    Parser.prototype.parseArray = function () {\r\n        var lookahead = null;\r\n        this.nextMatch('[');\r\n        while (this.hasNext() && this.peek().value !== ']') {\r\n            if (this.peek().value === '...') { // [...a]\r\n                this.next();\r\n            }\r\n            this.parseExpr();\r\n            lookahead = this.peek();\r\n            if (lookahead.value === ',') {\r\n                this.next();\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n        this.nextMatch(']');\r\n    }\r\n\r\n    Parser.prototype.parseNew = function () {\r\n        this.nextMatch('new');\r\n        if (this.peek().value === '(') {\r\n            this.parseParen();\r\n        } else {\r\n            this.nextMatch([TokenType.IDENTIFIER, TokenType.KEYWORD]);\r\n        }\r\n        if (this.peek().value === '(') {\r\n            this.parseCallArgs();\r\n        }\r\n    }\r\n\r\n    Parser.prototype.parseArrorwFunction = function (skipNextExpr) {\r\n        this.nextMatch('=>');\r\n        if (this.peek().value === '{') {\r\n            this.parseBlockStmt();\r\n        } else if (skipNextExpr) { //{a:t=>t()}\r\n            this.parseExpr();\r\n        } else {\r\n            this.parseExprStmt();\r\n        }\r\n    }\r\n\r\n    // 函数调用\r\n    Parser.prototype.parseCallArgs = function () {\r\n        this.peekMatch('(');\r\n        if (this.peek().value !== ')') {\r\n            while (this.hasNext()) {\r\n                if (this.peek().value === '...') {\r\n                    this.next();\r\n                    if (this.peek().value === '{') {\r\n                        this.parseObjectStmt();\r\n                    } else {\r\n                        this.nextMatch(TokenType.IDENTIFIER);\r\n                    }\r\n                } else {\r\n                    this.parseExpr();\r\n                }\r\n                if (this.peek().value === ')') {\r\n                    break;\r\n                }\r\n                this.peekMatch(',');\r\n            }\r\n        }\r\n        this.peekMatch(')');\r\n        if (this.peek().value === '(') {\r\n            this.parseCallArgs();\r\n        }\r\n    }\r\n\r\n    // 点运算符\r\n    Parser.prototype.parseDot = function () {\r\n        var lookahead = null;\r\n        if (this.preToken.type !== TokenType.NUMBER && this.preToken.type !== TokenType.BOOLEAN) {\r\n            this.nextMatch('.');\r\n            lookahead = this.peek();\r\n            if (this.lexer.isDotAble(lookahead)) {\r\n                this.next();\r\n                lookahead = this.peek();\r\n                if (lookahead.value === '(') { //函数调用test()\r\n                    this.parseCallArgs();\r\n                }\r\n                lookahead = this.peek();\r\n                if (lookahead.value === '[') {\r\n                    this.parseProperty();\r\n                } else if (lookahead.value === '.') {\r\n                    this.parseDot();\r\n                }\r\n            } else {\r\n                Error.expected(lookahead, TokenType.IDENTIFIER);\r\n            }\r\n        } else {\r\n            Error.unexpected(this.next());\r\n        }\r\n    }\r\n\r\n    Parser.prototype.parseProperty = function () {\r\n        var lookahead = null;\r\n        this.nextMatch('[');\r\n        this.parseExprStmt();\r\n        this.nextMatch(']');\r\n        lookahead = this.peek();\r\n        if (lookahead.value === '(') { //函数调用test()\r\n            this.parseCallArgs();\r\n        }\r\n        lookahead = this.peek();\r\n        if (lookahead.value === '[') {\r\n            this.parseProperty();\r\n        } else if (lookahead.value === '.') {\r\n            this.parseDot();\r\n        }\r\n    }\r\n\r\n    var lexer = new Lexer();\r\n    var parser = new Parser(lexer);\r\n    lexer.parser = parser;\r\n\r\n    return {\r\n        parse: function (text) {\r\n            let result = null;\r\n            clearTimeout(parser.parseTimer);\r\n            parser.reset(text);\r\n            parser.parse();\r\n            result = Error.errors.map((item) => {\r\n                var line = item.line;\r\n                var column = item.column;\r\n                if (!item.line || item.line > lexer.lines.length) {\r\n                    line = lexer.lines.length;\r\n                    column = lexer.lines.peek().length;\r\n                }\r\n                return {\r\n                    line: line,\r\n                    column: column,\r\n                    error: item.error\r\n                }\r\n            }).sort((a, b) => {\r\n                if (a.line === b.line) {\r\n                    return a.column - b.column;\r\n                }\r\n                return a.line - b.line;\r\n            });\r\n            // console.log(result);\r\n            return result;\r\n        }\r\n    }\r\n}","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-08 10:31:22\r\n * @Description: \r\n */\r\nexport default function () {\r\n    Array.prototype.peek = function (index) {\r\n        if (this.length) {\r\n            return this[this.length - (index || 1)];\r\n        }\r\n    }\r\n    Array.prototype._isArray = true;\r\n    String.prototype.peek = function (index) {\r\n        if (this.length) {\r\n            return this[this.length - (index || 1)];\r\n        }\r\n    }\r\n    const brackets = ['{', '}', '[', ']', '(', ')'];\r\n    const regs = {\r\n        space: /^\\s+/,\r\n        tag: /^@?[a-zA-Z_\\-][a-zA-Z0-9_\\-]*/,\r\n        propertyName: /^[\\*]?[a-zA-Z_$][a-zA-Z0-9_\\-$]*/,\r\n        numValue: /^(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:[sS%]|px|PX)?/,\r\n        propertyValue: /^[+\\-]?[a-zA-Z0-9_\\-$%]+|^#[a-zA-Z0-9]+/,\r\n        punctuator: /^[\\+\\-\\*\\~\\,\\:\\;\\.\\#\\=\\!]/,\r\n        comment: /\\*\\//,\r\n        string1: /\\\\*'/,\r\n        string2: /\\\\*\"/,\r\n        other: /^[\\s\\S]/\r\n    }\r\n    const maxErrors = 100;\r\n\r\n    function TokenType(type, label) {\r\n        this.type = type;\r\n        this.label = label;\r\n        this._isTokenType = true;\r\n    }\r\n\r\n    TokenType.prototype.toString = function () {\r\n        return this.label;\r\n    }\r\n\r\n    TokenType.STRING = new TokenType(2, 'string');\r\n    TokenType.SELECTOR = new TokenType(3, 'selector');\r\n    TokenType.PROPERTY = new TokenType(4, 'property');\r\n    TokenType.VALUE = new TokenType(5, 'value');\r\n    TokenType.NUM_VALUE = new TokenType(6, 'numValue');\r\n    TokenType.BRACKET = new TokenType(7, 'bracket');\r\n    TokenType.PUNCTUATOR = new TokenType(8, 'punctuator');\r\n    TokenType.OTHER = new TokenType(10, 'other');\r\n\r\n    function ErrorType(type) {\r\n        this.type = type;\r\n    }\r\n\r\n    ErrorType.UNEXPECTED = new ErrorType(1);\r\n    ErrorType.EXPECTED = new ErrorType(2);\r\n    ErrorType.MISS = new ErrorType(3);\r\n    ErrorType.UNMATCH = new ErrorType(4);\r\n\r\n    function Error(token, type, param) {\r\n        token = token || {};\r\n        this.type = type;\r\n        this.param = param;\r\n        this.line = token.line;\r\n        this.column = token.column;\r\n        this.value = token.value;\r\n        this.error = this.toString();\r\n    }\r\n\r\n    Error.prototype.toString = function () {\r\n        let error = '';\r\n        let param = this.param instanceof Array ? this.param : [this.param];\r\n        param = `${param.length === 1 ? 'a ' : ''}'${param.join(`'、'`)}'`;\r\n        switch (this.type) {\r\n            case ErrorType.UNEXPECTED:\r\n                error = `unexpected '${this.value}'`;\r\n                break;\r\n            case ErrorType.EXPECTED:\r\n                error = `expected ${param}`;\r\n                if (this.value) {\r\n                    error += ` and instead saw '${this.value}'`;\r\n                }\r\n                break;\r\n            case ErrorType.MISS:\r\n                error = `missing ${param}`;\r\n                if (this.value) {\r\n                    error += ` before '${this.value}'`\r\n                }\r\n                break;\r\n            case ErrorType.UNMATCH:\r\n                error = `unmatched '${this.value}'`\r\n                break;\r\n        }\r\n        return error;\r\n    }\r\n\r\n    Error.push = function (error) {\r\n        Error.errors.push(error);\r\n    }\r\n\r\n    Error.expected = function (token, value) {\r\n        Error.push(new Error(token, ErrorType.EXPECTED, value));\r\n    }\r\n\r\n    Error.unexpected = function (token) {\r\n        Error.push(new Error(token, ErrorType.UNEXPECTED));\r\n    }\r\n\r\n    Error.unmatch = function (token) {\r\n        Error.push(new Error(token, ErrorType.UNMATCH));\r\n    }\r\n\r\n    // 词法分析器\r\n    function Lexer() {\r\n        this.init();\r\n    }\r\n\r\n    Lexer.prototype.init = function () {\r\n        Error.errors = [];\r\n        this.lines = [''];\r\n        this.line = 1;\r\n        this.column = 0;\r\n        this.input = '';\r\n        this.bracketsMap = new Map();\r\n        brackets.map((item) => {\r\n            this.bracketsMap.set(item, true);\r\n        });\r\n    }\r\n\r\n    Lexer.prototype.reset = function (option) {\r\n        this.lines = option.texts;\r\n        this.line = option.line || 1;\r\n        this.column = option.column || 0\r\n        this.input = this.lines[this.line - 1].slice(this.column);\r\n    }\r\n\r\n    Lexer.prototype.skip = function (length) {\r\n        this.input = length ? this.input.slice(length) : this.input;\r\n        this.column += length;\r\n    }\r\n\r\n    Lexer.prototype.skipLine = function (length) {\r\n        this.line += length;\r\n        this.column = 0;\r\n        this.input = this.lines[this.line - 1] || '';\r\n    }\r\n\r\n    Lexer.prototype.hasNext = function () {\r\n        if (Error.errors.length > maxErrors) {\r\n            return false;\r\n        }\r\n        return this.line < this.lines.length ||\r\n            this.line == this.lines.length && this.lines.peek().length > this.column\r\n    }\r\n\r\n    Lexer.prototype.isBracket = function (value) {\r\n        return this.bracketsMap.has(value);\r\n    }\r\n\r\n    Lexer.prototype.isTokenType = function (type) {\r\n        return type._isTokenType;\r\n    }\r\n\r\n    Lexer.prototype.isProp = function (token) {\r\n        return token.type === TokenType.SELECTOR ||\r\n            token.type === TokenType.PROPERTY\r\n    }\r\n\r\n    Lexer.prototype.isValue = function (token) {\r\n        return token.type === TokenType.VALUE ||\r\n            token.type === TokenType.NUM_VALUE ||\r\n            token.type === TokenType.SELECTOR ||\r\n            token.type === TokenType.PROPERTY ||\r\n            token.type === TokenType.STRING\r\n    }\r\n\r\n    Lexer.prototype.craeteToken = function (value, type) {\r\n        let line = this.line;\r\n        let column = this.column;\r\n        if (line > this.lines.length) {\r\n            line = this.lines.length;\r\n            column = this.lines.peek().length;\r\n        }\r\n        return {\r\n            type: type,\r\n            line: line,\r\n            column: column,\r\n            value: value\r\n        }\r\n    }\r\n\r\n    Lexer.prototype.scanSpace = function () {\r\n        let exec = null;\r\n        while (!this.input.length && this.line < this.lines.length) { //去掉空行\r\n            this.skipLine(1);\r\n        }\r\n        exec = regs.space.exec(this.input);\r\n        if (exec) {\r\n            this.skip(exec.index + exec[0].length);\r\n            exec.index >= this.input.length - 1 && this.scanSpace();\r\n        }\r\n    }\r\n\r\n    Lexer.prototype.scanComment = function () {\r\n        let exec = null;\r\n        let ch1 = null;\r\n        let ch2 = null;\r\n        let startToken = null;\r\n        this.scanSpace(); //去掉空格\r\n        ch1 = this.input[0];\r\n        ch2 = this.input[1];\r\n        if (ch1 === '/' && ch2 === '*') {\r\n            startToken = this.craeteToken('/*');\r\n            this.skip(2);\r\n            while (this.hasNext() && !(exec = regs.comment.exec(this.input))) {\r\n                this.skipLine(1);\r\n            }\r\n            if (exec) {\r\n                this.skip(exec.index + exec[0].length);\r\n            } else {\r\n                Error.unmatch(startToken);\r\n            }\r\n        }\r\n    }\r\n\r\n    Lexer.prototype.scanString = function () {\r\n        let that = this;\r\n        let exec = null;\r\n        let token = null;\r\n        let startToken = null;\r\n        if (this.input[0] === '\\'') {\r\n            startToken = this.craeteToken('\\'', TokenType.STRING);\r\n            this.skip(1);\r\n            exec = _end(regs.string1);\r\n            token = this.craeteToken('\\'', TokenType.STRING);\r\n            if (!exec) {\r\n                Error.unmatch(startToken);\r\n                this.skipLine(1);\r\n            }\r\n            return token;\r\n        } else if (this.input[0] === '\"') {\r\n            startToken = this.craeteToken('\"', TokenType.STRING);\r\n            this.skip(1);\r\n            exec = _end(regs.string2);\r\n            token = this.craeteToken('\"', TokenType.STRING);\r\n            if (!exec) {\r\n                Error.unmatch(startToken);\r\n                this.skipLine(1);\r\n            }\r\n            return token;\r\n        }\r\n        return token;\r\n\r\n        function _end(reg) {\r\n            if (!that.hasNext()) {\r\n                return false;\r\n            }\r\n            if (exec = reg.exec(that.input)) {\r\n                that.skip(exec.index + exec[0].length);\r\n                if (exec[0].length % 2 === 0) { //含有奇数个\\:\\\\\\'\r\n                    return _end(reg);\r\n                }\r\n                return true;\r\n            } else {\r\n                that.skipLine(1);\r\n                return _end(reg);\r\n            }\r\n        }\r\n    }\r\n\r\n    Lexer.prototype.scanIdentifier = function () {\r\n        let exec = null;\r\n        let token = null;\r\n        if (exec = regs.tag.exec(this.input)) {\r\n            token = this.craeteToken(exec[0], TokenType.SELECTOR);\r\n            this.skip(exec.index + exec[0].length);\r\n        } else if (exec = regs.propertyName.exec(this.input)) {\r\n            token = this.craeteToken(exec[0], TokenType.PROPERTY);\r\n            this.skip(exec.index + exec[0].length);\r\n        } else if (exec = regs.numValue.exec(this.input)) {\r\n            token = this.craeteToken(exec[0], TokenType.NUM_VALUE);\r\n            this.skip(exec.index + exec[0].length);\r\n        } else if (exec = regs.propertyValue.exec(this.input)) {\r\n            token = this.craeteToken(exec[0], TokenType.VALUE);\r\n            this.skip(exec.index + exec[0].length);\r\n        }\r\n        return token;\r\n    }\r\n\r\n    Lexer.prototype.scanBracket = function () {\r\n        let token = null;\r\n        let ch = this.input[0];\r\n        if (this.isBracket(ch)) {\r\n            token = this.craeteToken(ch, TokenType.BRACKET);\r\n            this.skip(1);\r\n        }\r\n        return token;\r\n    }\r\n\r\n    // 操作符号\r\n    Lexer.prototype.scanPunctuator = function () {\r\n        let token = null;\r\n        if (exec = regs.punctuator.exec(this.input)) {\r\n            token = this.craeteToken(exec[0], TokenType.PUNCTUATOR);\r\n            this.skip(exec.index + exec[0].length);\r\n        }\r\n        return token;\r\n    }\r\n\r\n    Lexer.prototype.scanOther = function () {\r\n        let exec = null;\r\n        let token = null;\r\n        if (exec = regs.other.exec(this.input)) {\r\n            token = this.craeteToken(exec[0], TokenType.OTHER);\r\n            this.skip(exec.index + exec[0].length);\r\n        }\r\n        return token\r\n    }\r\n\r\n    Lexer.prototype.next = function () {\r\n        let token = null;\r\n        this.scanComment();\r\n        if (this.hasNext()) {\r\n            token =\r\n                this.scanIdentifier() ||\r\n                this.scanBracket() ||\r\n                this.scanString() ||\r\n                this.scanPunctuator()\r\n            if (!token) { //存在非法字符\r\n                token = this.scanOther();\r\n                token && Error.unexpected(token);\r\n                return this.next();\r\n            }\r\n        }\r\n        this.preToken = token;\r\n        return token;\r\n    }\r\n\r\n    // 语法分析器\r\n    function Parser(lexer) {\r\n        this.lexer = lexer;\r\n        this.cacheList = [];\r\n        this.backs = [];\r\n        this.parseList = [];\r\n        this.preToken = null;\r\n        Error.errors = [];\r\n    }\r\n\r\n    Parser.prototype.reset = function (text) {\r\n        this.backs = [];\r\n        this.parseList = [];\r\n        this.preToken = null;\r\n        this.recovery(text);\r\n        Error.errors = [];\r\n    }\r\n\r\n    // 添加缓存\r\n    Parser.prototype.cache = function () {\r\n        if (this.cacheList.length && this.cacheList.peek().line == this.lexer.line) {\r\n            this.cacheList.pop();\r\n        }\r\n        this.preToken && this.cacheList.push({\r\n            line: this.preToken.line,\r\n            column: this.preToken.column,\r\n            parseList: this.parseList.slice(0)\r\n        });\r\n    }\r\n\r\n    // 从缓存中恢复\r\n    Parser.prototype.recovery = function (text) {\r\n        let index = 0;\r\n        let texts = text.split('\\n') || [''];\r\n        let hasCache = false;\r\n        while (index < texts.length && index < this.lexer.lines.length && texts[index] === this.lexer.lines[index]) {\r\n            index++;\r\n        }\r\n        if (index > 0) {\r\n            let cacheIndex = -1;\r\n            for (let i = 0; i < this.cacheList.length; i++) {\r\n                if (this.cacheList[i].line <= index) {\r\n                    cacheIndex = i;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n            if (cacheIndex > -1) {\r\n                let cache = this.cacheList[cacheIndex];\r\n                this.parseList = cache.parseList;\r\n                this.cacheList = this.cacheList.slice(0, cacheIndex + 1);\r\n                this.lexer.reset({\r\n                    texts: texts,\r\n                    line: cache.line,\r\n                    column: cache.column\r\n                });\r\n                this.next();\r\n                hasCache = true;\r\n            }\r\n        }\r\n        if (!hasCache) {\r\n            this.cacheList = [];\r\n            this.lexer.reset({\r\n                texts: texts\r\n            });\r\n        }\r\n    }\r\n\r\n    Parser.prototype.match = function (token, value) {\r\n        let pass = false;\r\n        for (let i = 0; i < value.length; i++) {\r\n            if (this.lexer.isTokenType(value[i])) {\r\n                if (value[i] === token.type) {\r\n                    pass = true;\r\n                    break;\r\n                }\r\n            } else if (value[i] === token.value) {\r\n                pass = true;\r\n                break;\r\n            }\r\n        };\r\n        return pass;\r\n    }\r\n\r\n    Parser.prototype.next = function (length) {\r\n        let token = null;\r\n        length = length || 1;\r\n        while (length > 0) {\r\n            if (this.backs.length) {\r\n                token = this.backs.shift();\r\n            } else {\r\n                token = this.lexer.next();\r\n            }\r\n            this.pre2Token = this.preToken;\r\n            this.preToken = token || this.preToken;\r\n            length--;\r\n        }\r\n        this.puted = false;\r\n        return token;\r\n    }\r\n\r\n    Parser.prototype.nextMatch = function (value) {\r\n        let token = this.next() || {};\r\n        let pass = false;\r\n        value = value._isArray ? value : [value];\r\n        pass = token.value && this.match(token, value);\r\n        if (!pass) {\r\n            if (token.value && this.match(this.peek(), value)) {\r\n                Error.unexpected(token);\r\n            } else {\r\n                Error.expected(token, value);\r\n            }\r\n        }\r\n        return pass;\r\n    }\r\n\r\n    Parser.prototype.peek = function (length) {\r\n        let token = null;\r\n        length = length || 1;\r\n        if (this.backs.length) {\r\n            token = this.backs[length - 1];\r\n        }\r\n        if (!token) {\r\n            length -= this.backs.length;\r\n            while (length > 0) {\r\n                length--;\r\n                token = this.lexer.next();\r\n                token && this.backs.push(token);\r\n            }\r\n        }\r\n        return token || {};\r\n    }\r\n\r\n    Parser.prototype.peekMatch = function (value) {\r\n        let token = this.peek() || {};\r\n        let pass = false;\r\n        value = value._isArray ? value : [value];\r\n        pass = token.value && this.match(token, value);\r\n        if (pass) {\r\n            this.next();\r\n        } else {\r\n            if (token.value && this.match(this.peek(), value)) {\r\n                Error.unexpected(token);\r\n            } else {\r\n                Error.expected(token, value);\r\n            }\r\n        }\r\n        return pass;\r\n    }\r\n\r\n    Parser.prototype.hasNext = function () {\r\n        let lookahead = this.peek();\r\n        return lookahead.value\r\n    }\r\n\r\n    Parser.prototype.putBack = function () {\r\n        if (this.preToken && !this.puted) {\r\n            this.backs.unshift(this.preToken);\r\n            this.preToken = this.pre2Token;\r\n            this.puted = true;\r\n        }\r\n    }\r\n\r\n    Parser.prototype.skipSemicolon = function (length) {\r\n        length = length || Infinity\r\n        while (this.peek().value === ';' && length > 0) {\r\n            this.next();\r\n            length--;\r\n        }\r\n    }\r\n\r\n    Parser.prototype.parse = function () {\r\n        let count = 0;\r\n        let startTime = Date.now();\r\n        while (this.hasNext()) {\r\n            this.parseStmt();\r\n            !Error.errors.length && this.cache();\r\n            if (++count % 10 === 0 && Date.now() - startTime > 200) {\r\n                this.parseTimer = setTimeout(() => {\r\n                    this.parseStmt();\r\n                }, 10);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    Parser.prototype.parseStmt = function () {\r\n        let token = this.peek();\r\n        if (token.value === '@import') {\r\n            this.parseImport();\r\n            return;\r\n        }\r\n        if (token.value === '@charset') {\r\n            this.parseCharset();\r\n            return;\r\n        }\r\n        if (token.value === '@keyframes' || token.value === '@-webkit-keyframes') {\r\n            this.parseKeyFrames();\r\n            return;\r\n        }\r\n        if (token.value === '@media') {\r\n            this.parseMedia();\r\n            return;\r\n        }\r\n        this.parseSelector();\r\n        if (this.peek().value === '{') {\r\n            this.parseBlock();\r\n        }\r\n    }\r\n\r\n    Parser.prototype.parseImport = function () {\r\n        this.nextMatch('@import');\r\n        this.nextMatch(TokenType.STRING);\r\n        if (['all', 'print', 'screen', 'speech'].indexOf(this.peek().value) > -1) {\r\n            this.parseMedia(true);\r\n        }\r\n        this.peekMatch(';');\r\n    }\r\n\r\n    Parser.prototype.parseCharset = function () {\r\n        this.nextMatch('@charset');\r\n        this.nextMatch(TokenType.STRING);\r\n        this.peekMatch(';');\r\n    }\r\n\r\n    Parser.prototype.parseMedia = function (onlyValue) {\r\n        let token = null;\r\n        !onlyValue && this.nextMatch('@media');\r\n        token = this.peek();\r\n        if (token.value === 'not' || token.value === 'only') {\r\n            this.next();\r\n        }\r\n        this.nextMatch(['all', 'print', 'screen', 'speech']);\r\n        while (this.hasNext()) {\r\n            token = this.peek();\r\n            if (token.value === 'and' || token.value === 'or') {\r\n                this.next();\r\n                this.nextMatch('(');\r\n                token = this.next() || {};\r\n                if (!this.lexer.isProp(token)) {\r\n                    Error.expected(token, TokenType.PROPERTY);\r\n                }\r\n                if (this.peek().value != ')') {\r\n                    this.peekMatch(':')\r\n                    token = this.next() || {};\r\n                    if (!this.lexer.isValue(token)) {\r\n                        Error.expected(token, TokenType.VALUE);\r\n                    }\r\n                    this.peekMatch(')');\r\n                }\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n        if (!onlyValue) {\r\n            this.peekMatch('{');\r\n            this.parseStmt();\r\n            this.peekMatch('}');\r\n        }\r\n    }\r\n\r\n    Parser.prototype.parseKeyFrames = function () {\r\n        let token = null;\r\n        this.nextMatch(['@keyframes', '@-webkit-keyframes']);\r\n        token = this.next();\r\n        if (token.type !== TokenType.SELECTOR) {\r\n            Error.expected(token, 'name');\r\n        }\r\n        this.peekMatch('{');\r\n        while (this.hasNext()) {\r\n            if (this.peek().value === '}') {\r\n                break;\r\n            }\r\n            this.nextMatch(TokenType.NUM_VALUE);\r\n            this.parseBlock();\r\n        }\r\n        this.peekMatch('}');\r\n    }\r\n\r\n    Parser.prototype.parseSelector = function () {\r\n        let token = this.next() || {};\r\n        if (token.value === '.' || token.value === '#') { //类、ID选择器\r\n            this.nextMatch(TokenType.SELECTOR);\r\n        } else if (token.value === '[') { //属性选择器\r\n            this.nextMatch(TokenType.SELECTOR);\r\n            if (this.peek().value !== ']') {\r\n                this.nextMatch('=');\r\n                token = this.peek();\r\n                if (!this.lexer.isValue(token)) {\r\n                    Error.expected(token, 'value');\r\n                } else {\r\n                    this.next();\r\n                }\r\n                this.peekMatch(']');\r\n            } else {\r\n                this.next();\r\n            }\r\n        } else if (token.value === ':') { //伪类选择器\r\n            if (this.peek().value === ':') {\r\n                this.next();\r\n            }\r\n            this.nextMatch(TokenType.SELECTOR);\r\n            if (this.peek().value === '(') { //:not(p)\r\n                this.next();\r\n                this.parseSelector();\r\n                this.peekMatch(')');\r\n            }\r\n        } else if (token.value !== '*') { //标签选择器\r\n            this.putBack();\r\n            this.nextMatch(TokenType.SELECTOR);\r\n        }\r\n        if (this.hasNext() && this.peek().value !== '{') {\r\n            token = this.peek();\r\n            if (token.value === '+' || token.value === '~') { //兄弟选择器\r\n                this.next();\r\n            } else if (token.value === ',') { //并列选择器\r\n                this.next();\r\n            }\r\n            this.parseSelector();\r\n        }\r\n    }\r\n\r\n    Parser.prototype.parseBlock = function () {\r\n        let that = this;\r\n        this.nextMatch('{');\r\n        while (this.hasNext()) {\r\n            if (this.peek().value === '}') {\r\n                break;\r\n            }\r\n            _nextMatchProperty();\r\n            this.peekMatch(':');\r\n            _nextMatchValue();\r\n            if (this.peek().value !== '}') {\r\n                this.peekMatch(';');\r\n            }\r\n        }\r\n        this.peekMatch('}');\r\n\r\n        function _nextMatchProperty() {\r\n            let token = that.next();\r\n            if (token.type !== TokenType.SELECTOR && token.type !== TokenType.PROPERTY) {\r\n                Error.expected(TokenType.PROPERTY);\r\n            }\r\n        }\r\n\r\n        function _nextMatchValue() {\r\n            let hasValue = false;\r\n            while (that.hasNext()) {\r\n                let token = that.peek();\r\n                if (token.value === ';' || token.value === '}' || token.value === ')') {\r\n                    break;\r\n                }\r\n                token = that.next();\r\n                if (that.lexer.isValue(token)) {\r\n                    hasValue = true;\r\n                } else if (token.value === '(') {\r\n                    let lbraces = 1;\r\n                    while (that.hasNext() && lbraces) {\r\n                        let token = that.next() || {};\r\n                        if (token.value === ')') {\r\n                            lbraces--;\r\n                        } else if (token.value === '(') {\r\n                            lbraces++;\r\n                        }\r\n                    }\r\n                    lbraces && that.peekMatch(')');\r\n                } else if (hasValue && token.value === ',') {\r\n                    _nextMatchValue();\r\n                    break;\r\n                } else if (hasValue && token.value === '!') {\r\n                    that.peekMatch('important');\r\n                    break;\r\n                } else {\r\n                    Error.expected(token, TokenType.VALUE);\r\n                }\r\n            }\r\n            if (!hasValue) {\r\n                Error.expected(null, TokenType.VALUE);\r\n            }\r\n            return hasValue;\r\n        }\r\n    }\r\n\r\n    let lexer = new Lexer();\r\n    let parser = new Parser(lexer);\r\n    lexer.parser = parser;\r\n\r\n    return {\r\n        parse: function (text) {\r\n            let result = null;\r\n            clearTimeout(parser.parseTimer);\r\n            parser.reset(text);\r\n            parser.parse();\r\n            result = Error.errors.map((item) => {\r\n                let line = item.line;\r\n                let column = item.column;\r\n                if (!item.line || item.line > lexer.lines.length) {\r\n                    line = lexer.lines.length;\r\n                    column = lexer.lines.peek().length;\r\n                }\r\n                return {\r\n                    line: line,\r\n                    column: column,\r\n                    error: item.error\r\n                }\r\n            }).sort((a, b) => {\r\n                if (a.line === b.line) {\r\n                    return a.column - b.column;\r\n                }\r\n                return a.line - b.line;\r\n            });\r\n            // console.log(result);\r\n            return result;\r\n        }\r\n    }\r\n}","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-09 21:33:03\r\n * @Description: \r\n */\r\nimport jsLint from './javascript';\r\nimport cssLint from './css';\r\n\r\nfunction htmlLint() {\r\n    let regs = {\r\n        js: /(?<!\\<[^\\>]*?['\"][^\\>]*?)(\\<script(?:\\s[^\\>]*?)?\\>)([\\s\\S]*?)\\<\\/script\\>/,\r\n        css: /(?<!\\<[^\\>]*?['\"][^\\>]*?)(\\<style(?:\\s[^\\>]*?)?\\>)([\\s\\S]*?)\\<\\/style\\>/,\r\n        enter: /\\n/g,\r\n        column: /\\n([^\\n]+)$/,\r\n        comment: /\\<\\!--[\\s\\S]*?--\\>/\r\n    }\r\n\r\n    function Parser() {}\r\n\r\n    Parser.prototype.reset = function (text) {\r\n        this.text = text;\r\n        this.comments = [];\r\n    }\r\n\r\n    Parser.prototype.parseComentRange = function () {\r\n        let exec = null;\r\n        let pos = {\r\n            line: 1,\r\n            column: 0,\r\n            index: 0\r\n        }\r\n        let text = this.text;\r\n        let start = null;\r\n        let end = null;\r\n        while (exec = regs.comment.exec(text)) {\r\n            this.setLineColumn(text.slice(0, exec.index), pos);\r\n            pos.index += exec.index;\r\n            start = Object.assign({}, pos);\r\n            this.setLineColumn(exec[0], pos);\r\n            pos.index += exec[0].length;\r\n            end = Object.assign({}, pos);\r\n            text = this.text.slice(pos.index);\r\n            this.comments.push({\r\n                start: start,\r\n                end: end\r\n            });\r\n        }\r\n    }\r\n\r\n    Parser.prototype.setLineColumn = function (text, pos) {\r\n        let lines = text.match(regs.enter);\r\n        lines = lines && lines.length || 0;\r\n        pos.line += lines;\r\n        if (lines) {\r\n            let exec = regs.column.exec(text);\r\n            pos.column = exec && exec[1].length || 0;\r\n        } else {\r\n            pos.column += text.length;\r\n        }\r\n    }\r\n\r\n    Parser.prototype.parse = function () {\r\n        this.parseComentRange();\r\n        return parser.parseJs().concat(parser.parseCss());\r\n    }\r\n\r\n    Parser.prototype.parseJs = function () {\r\n        let parseJs = jsParser().parse;\r\n        return this._parse(regs.js, parseJs);\r\n    }\r\n\r\n    Parser.prototype.parseCss = function () {\r\n        let parseCss = cssParser().parse;\r\n        return this._parse(regs.css, parseCss);\r\n    }\r\n\r\n    Parser.prototype._parse = function (reg, parseFun) {\r\n        let exec = null;\r\n        let pos = {\r\n            line: 1,\r\n            column: 0,\r\n            index: 0\r\n        }\r\n        let text = this.text;\r\n        let result = [];\r\n        while (exec = reg.exec(text)) {\r\n            this.setLineColumn(text.slice(0, exec.index), pos);\r\n            pos.index += exec.index;\r\n            if (!this.checkInComment(pos)) {\r\n                text = this.text.slice(pos.index);\r\n                continue;\r\n            }\r\n            this.setLineColumn(exec[1], pos);\r\n            pos.index += exec[1].length;\r\n            if (exec[2]) {\r\n                let r = parseFun(exec[2]);\r\n                r.map((item) => {\r\n                    if (item.line == 1) {\r\n                        item.column += pos.column;\r\n                    }\r\n                    item.line += pos.line - 1;\r\n                });\r\n                result = result.concat(r);\r\n            }\r\n            this.setLineColumn(exec[0].slice(exec[1].length), pos);\r\n            pos.index += exec[0].slice(exec[1].length).length;\r\n            text = this.text.slice(pos.index);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    Parser.prototype.checkInComment = function (pos) {\r\n        for (let i = 0; i < this.comments.length; i++) {\r\n            let item = this.comments[i];\r\n            if (_compare(item.start, pos) < 0 && _compare(item.end, pos) > 0) {\r\n                pos.line = item.end.line;\r\n                pos.column = item.end.column;\r\n                pos.index = item.end.index;\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n\r\n        function _compare(a, b) {\r\n            if (a.line === b.line) {\r\n                return a.column - b.column\r\n            }\r\n            return a.line - b.line;\r\n        }\r\n    }\r\n\r\n    let parser = new Parser();\r\n\r\n    return {\r\n        parse: function (text) {\r\n            let result = null;\r\n            parser.reset(text);\r\n            result = parser.parse();\r\n            result.sort((a, b) => {\r\n                if (a.line === b.line) {\r\n                    return a.column - b.column;\r\n                }\r\n                return a.line - b.line;\r\n            });\r\n            return result;\r\n        }\r\n    }\r\n}\r\n\r\nexport default new Function(`function jsParser()${jsLint.toString().replace(/^[^\\)]+?\\)/, '')}\r\nfunction cssParser()${cssLint.toString().replace(/^[^\\)]+?\\)/, '')}\r\nfunction htmlParser()${htmlLint.toString().replace(/^[^\\)]+?\\)/, '')}\r\nreturn htmlParser();\r\n`)","/*\r\n * @Author: lisong\r\n * @Date: 2022-01-05 14:28:42\r\n * @Description: \r\n */\r\nimport Util from '@/common/Util';\r\nimport htmlLint from '../language/html';\r\nimport jsLint from '../language/javascript';\r\nimport cssLint from '../language/css';\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.parseId = 1;\r\n        this.initProperties(editor, context);\r\n        this.initLanguage(editor.language);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, context, ['htmls', ]);\r\n        Util.defineProperties(this, editor, ['setErrorMap']);\r\n    }\r\n    initLanguage(language) {\r\n        let that = this;\r\n        if (this.language === language) {\r\n            return;\r\n        }\r\n        this.language = language;\r\n        this.worker && this.worker.terminate();\r\n        this.worker = null;\r\n        this.setErrorMap({});\r\n        switch (language) {\r\n            case 'HTML':\r\n                this.worker = this.createWorker(htmlLint);\r\n                break;\r\n            case 'JavaScript':\r\n                this.worker = this.createWorker(jsLint);\r\n                break;\r\n            case 'CSS':\r\n                this.worker = this.createWorker(cssLint);\r\n                break;\r\n        }\r\n        if (!this.worker) {\r\n            return;\r\n        }\r\n        this.worker.onmessage = function (e) {\r\n            let parseId = e.data.parseId;\r\n            let errors = e.data.errors;\r\n            let index = 0;\r\n            let errorMap = {};\r\n            if (that.parseId != parseId) {\r\n                return;\r\n            }\r\n            while (index < errors.length) {\r\n                let line = errors[index].line;\r\n                let arr = [];\r\n                while (index < errors.length && errors[index].line === line) {\r\n                    arr.push(errors[index].error);\r\n                    index++;\r\n                }\r\n                line = line || that.htmls.length;\r\n                errorMap[line] = arr.join('<br>');\r\n            }\r\n            that.setErrorMap(errorMap);\r\n        }\r\n        this.parse();\r\n    }\r\n    createWorker(mod) {\r\n        var funStr = mod.toString().replace(/^[^\\)]+?\\)/, '');\r\n        var str =\r\n            `function fun()${funStr}\r\n            let parser = fun();\r\n            self.onmessage = function(e) {\r\n                var parseId = e.data.parseId;\r\n                var errors = parser.parse(e.data.text);\r\n                self.postMessage({\r\n                    errors: errors,\r\n                    parseId: parseId\r\n                });\r\n            }`;\r\n        return Util.createWorker(str);\r\n    }\r\n    onInsertContentBefore(nowLine) {}\r\n    onInsertContentAfter(nowLine) {\r\n        if (!this.worker) {\r\n            return;\r\n        }\r\n        clearTimeout(this.parseTimer);\r\n        this.parseTimer = setTimeout(() => {\r\n            this.parse();\r\n        }, 300);\r\n    }\r\n    onDeleteContentBefore(nowLine) {}\r\n    onDeleteContentAfter(nowLine) {\r\n        if (!this.worker) {\r\n            return;\r\n        }\r\n        clearTimeout(this.parseTimer);\r\n        this.parseTimer = setTimeout(() => {\r\n            this.parse();\r\n        }, 300);\r\n    }\r\n    parse() {\r\n        let text = this.htmls.map((item) => {\r\n            return item.text;\r\n        }).join('\\n');\r\n        this.parseId++;\r\n        this.worker.postMessage({\r\n            text: text,\r\n            parseId: this.parseId\r\n        });\r\n    }\r\n}","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-31 14:42:01\r\n * @Description: \r\n */\r\nimport Util from '@/common/Util';\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.editorFunObj = {};\r\n        this.initProperties(editor, context);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this.editorFunObj, editor, ['unFold']);\r\n        Util.defineProperties(this, editor, ['selecter']);\r\n        Util.defineProperties(this, context, ['htmls', 'folds', 'foldMap']);\r\n    }\r\n    onInsertContentBefore(cursorPos) {\r\n        let nowLine = cursorPos.line;\r\n        this.onInsertContentBefore.preCursorPos = cursorPos;\r\n        if (this.folds.length) {\r\n            let index = this.findFoldIndex(nowLine);\r\n            let unFolds = [];\r\n            // 历史记录中操作光标在折叠区\r\n            while (index < this.folds.length && this.folds[index].start.line < nowLine && this.folds[index].end.line > nowLine) {\r\n                unFolds.push(this.folds[index].start.line);\r\n                index++;\r\n            }\r\n            unFolds.map((line) => {\r\n                this.editorFunObj.unFold(line);\r\n            });\r\n        }\r\n    }\r\n    onInsertContentAfter(cursorPos) {\r\n        let preCursorPos = this.onInsertContentBefore.preCursorPos;\r\n        this.folds.slice().reverse().map((fold) => {\r\n            if (fold.start.line > preCursorPos.line) {\r\n                if (cursorPos.line - preCursorPos.line > 0) {\r\n                    this.foldMap.delete(fold.start.line);\r\n                    fold.start.line += cursorPos.line - preCursorPos.line;\r\n                    fold.end.line += cursorPos.line - preCursorPos.line;\r\n                    this.foldMap.set(fold.start.line, fold);\r\n                }\r\n            } else if (fold.start.line === preCursorPos.line) {\r\n                if (cursorPos.line - preCursorPos.line > 0) {\r\n                    this.unFold(fold.start.line);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    onDeleteContentBefore(cursorPos) {\r\n        this.onDeleteContentBefore.preCursorPos = cursorPos;\r\n        this.onDeleteContentBefore.maxLine = this.htmls.length;\r\n        this.selecter.ranges.forEach((range) => {\r\n            if (range.active) {\r\n                let start = range.start;\r\n                let end = range.end;\r\n                for (let line = start.line; line <= end.line; line++) { //删除折叠区域\r\n                    this.editorFunObj.unFold(line);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    onDeleteContentAfter(cursorPos) {\r\n        let nowLine = cursorPos.line;\r\n        let preCursorPos = this.onDeleteContentBefore.preCursorPos;\r\n        let delLine = this.onDeleteContentBefore.maxLine - this.htmls.length;\r\n        if (this.folds.length) {\r\n            let index = this.findFoldIndex(nowLine);\r\n            let unFolds = [];\r\n            // 历史记录中操作光标在折叠区\r\n            while (index < this.folds.length && this.folds[index].start.line < nowLine && this.folds[index].end.line > nowLine) {\r\n                unFolds.push(this.folds[index].start.line);\r\n                index++;\r\n            }\r\n            unFolds.map((line) => {\r\n                this.editorFunObj.unFold(line);\r\n            });\r\n        }\r\n        this.folds.slice().reverse().map((fold) => {\r\n            if (fold.start.line > preCursorPos.line) {\r\n                if (delLine > 0) {\r\n                    if (delLine === 1 && preCursorPos.line === nowLine &&\r\n                        fold.start.line === preCursorPos.line + 1) {\r\n                        this.unFold(fold.start.line);\r\n                    } else {\r\n                        this.foldMap.delete(fold.start.line);\r\n                        fold.start.line -= delLine;\r\n                        fold.end.line -= delLine;\r\n                        this.foldMap.set(fold.start.line, fold);\r\n                    }\r\n                }\r\n            } else if (fold.start.line === preCursorPos.line) {\r\n                if (delLine > 0) {\r\n                    this.unFold(fold.start.line);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * 寻找第一个包裹nowLine的折叠对象的下标\r\n     * @param {Number} nowLine \r\n     */\r\n    findFoldIndex(nowLine) {\r\n        let left = 0;\r\n        let right = this.folds.length - 1;\r\n        while (left < right) {\r\n            let mid = Math.floor((left + right) / 2);\r\n            let fold = this.folds[mid];\r\n            if (fold.start.line < nowLine) {\r\n                if (fold.end.line <= nowLine) {\r\n                    left = mid + 1;\r\n                } else {\r\n                    right = mid;\r\n                }\r\n            } else if (fold.start.line == nowLine) {\r\n                left = mid + 1;\r\n            } else {\r\n                right = mid - 1;\r\n            }\r\n        }\r\n        return left;\r\n    }\r\n    // 折叠行\r\n    foldLine(line) {\r\n        let startLine = line;\r\n        let resultFold = this.getRangeFold(line);\r\n        if (resultFold) {\r\n            for (let line = resultFold.start.line; line < resultFold.end.line; line++) {\r\n                if (this.foldMap.has(line)) {\r\n                    if (this.foldMap.get(line).end.line > resultFold.end.line) {\r\n                        this.unFold(line);\r\n                    }\r\n                }\r\n            }\r\n            this.foldMap.set(startLine, resultFold);\r\n            this.folds.push(resultFold);\r\n            this.folds.sort((a, b) => {\r\n                return a.start.line - b.start.line;\r\n            });\r\n        }\r\n        return resultFold;\r\n    }\r\n    // 展开折叠行\r\n    unFold(line) {\r\n        let left = 0;\r\n        let right = this.folds.length;\r\n        if (!this.foldMap.has(line)) {\r\n            return false;\r\n        }\r\n        while (left <= right) {\r\n            let mid = Math.floor((left + right) / 2);\r\n            if (this.folds[mid].start.line == line) {\r\n                this.folds.splice(mid, 1);\r\n                break;\r\n            } else if (this.folds[mid].start.line > line) {\r\n                right = mid - 1;\r\n            } else {\r\n                left = mid + 1;\r\n            }\r\n        }\r\n        this.foldMap.delete(line);\r\n        return true;\r\n    }\r\n    /**\r\n     * 获取折叠范围\r\n     * @param {Number} line 行号\r\n     * @param {Boolean} foldIconCheck 检测是否显示折叠图标\r\n     */\r\n    getRangeFold(line, foldIconCheck) {\r\n        let stack = [];\r\n        let startLine = line;\r\n        let lineObj = this.htmls[startLine - 1];\r\n        let resultFold = null;\r\n        line++;\r\n        if (lineObj.folds && lineObj.folds.length) {\r\n            for (let i = 0; i < lineObj.folds.length; i++) {\r\n                let fold = lineObj.folds[i];\r\n                if (fold.type == -1) {\r\n                    if (!stack.length || stack.peek().name == fold.name) {\r\n                        stack.push(fold);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        while (stack.length && line <= this.htmls.length && (!foldIconCheck || line - startLine <= 1)) {\r\n            lineObj = this.htmls[line - 1];\r\n            if (lineObj.folds && lineObj.folds.length) {\r\n                for (let i = 0; i < lineObj.folds.length; i++) {\r\n                    let fold = lineObj.folds[i];\r\n                    if (fold.type == -1) {\r\n                        if (stack.peek().name == fold.name) {\r\n                            stack.push(fold);\r\n                        }\r\n                    } else if (stack.peek().name == fold.name) {\r\n                        if (stack.length == 1) {\r\n                            if (foldIconCheck) {\r\n                                return line - startLine > 1;\r\n                            } else {\r\n                                resultFold = {\r\n                                    start: {\r\n                                        line: startLine,\r\n                                        start: stack.peek().start\r\n                                    },\r\n                                    end: {\r\n                                        line: line,\r\n                                        end: fold.end\r\n                                    },\r\n                                    name: fold.name\r\n                                }\r\n                                stack.pop();\r\n                                break;\r\n                            }\r\n                        }\r\n                        stack.pop();\r\n                    }\r\n                }\r\n            }\r\n            line++;\r\n        }\r\n        return foldIconCheck ? line - startLine > 1 : resultFold;\r\n    }\r\n    // 根据相对行号获取真实行号(折叠后行号会改变)\r\n    getRealLine(line) {\r\n        let i = 0;\r\n        let lineCount = 1;\r\n        let realLine = 1;\r\n        while (i < this.folds.length && lineCount < line) {\r\n            let fold = this.folds[i];\r\n            if (lineCount + fold.start.line - realLine < line) {\r\n                lineCount += fold.start.line + 1 - realLine;\r\n                realLine = fold.end.line;\r\n            } else {\r\n                break;\r\n            }\r\n            i++;\r\n            while (i < this.folds.length && this.folds[i].end.line <= fold.end.line) { //多级折叠\r\n                i++;\r\n            }\r\n        }\r\n        realLine += line - lineCount;\r\n        return realLine;\r\n    }\r\n    // 根据真实行号获取相对行号\r\n    getRelativeLine(line) {\r\n        let relLine = line;\r\n        let i = 0;\r\n        while (i < this.folds.length) {\r\n            let fold = this.folds[i];\r\n            if (line >= fold.end.line) {\r\n                relLine -= fold.end.line - fold.start.line - 1;\r\n            } else {\r\n                break;\r\n            }\r\n            i++;\r\n            while (i < this.folds.length && this.folds[i].end.line <= fold.end.line) { //多级折叠\r\n                i++;\r\n            }\r\n        }\r\n        return relLine;\r\n    }\r\n}","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-12 09:52:06\r\n * @Description: \r\n */\r\nimport Util from '@/common/Util';\r\n\r\nexport default class {\r\n    constructor(editor, context, selecter) {\r\n        this.selecter = selecter;\r\n        this.initProperties(editor, context);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, [\r\n            'fSearcher',\r\n            'searcher',\r\n            'nowCursorPos',\r\n            'cursorFocus',\r\n            'cursor',\r\n            '$nextTick',\r\n            '$refs',\r\n        ]);\r\n        Util.defineProperties(this, context, ['htmls', 'getToSearchConfig']);\r\n    }\r\n    search(searchObj) {\r\n        let resultObj = null;\r\n        let now = 0;\r\n        let count = 0;\r\n        let hasCache = this.hasCache();\r\n        let config = null;\r\n        searchObj = searchObj || {};\r\n        if (hasCache) {\r\n            if (searchObj.direct === 'up') {\r\n                resultObj = this.prev();\r\n            } else {\r\n                resultObj = this.next();\r\n            }\r\n        } else {\r\n            config = searchObj && searchObj.config || this.getToSearchConfig();\r\n            if (!config || !config.text) {\r\n                return {\r\n                    now: 0,\r\n                    count: 0\r\n                };\r\n            }\r\n            resultObj = this._search(config);\r\n        }\r\n        if (resultObj && resultObj.result) {\r\n            if (!hasCache) {\r\n                this.selecter.addRange(resultObj.list);\r\n            }\r\n            if (this.fSearcher === this) {\r\n                if (this.cursorFocus === false) {\r\n                    this.searcher.clearSearch();\r\n                    this.selecter.setActive(resultObj.result.end);\r\n                    this.cursor.setCursorPos(resultObj.result.end);\r\n                } else {\r\n                    this.clearNow();\r\n                }\r\n            } else {\r\n                this.selecter.addActive(resultObj.result.end);\r\n                if (this.selecter.getRangeByCursorPos(this.nowCursorPos)) {\r\n                    this.cursor.addCursorPos(resultObj.result.end);\r\n                } else {\r\n                    this.cursor.setCursorPos(resultObj.result.end);\r\n                }\r\n            }\r\n            now = resultObj.now;\r\n            count = resultObj.list.length;\r\n        }\r\n\r\n        return {\r\n            now: now,\r\n            count: count\r\n        }\r\n    }\r\n    _search(config) {\r\n        let reg = null,\r\n            exec = null,\r\n            preExec = null,\r\n            start = null,\r\n            end = null,\r\n            result = null,\r\n            resultCaches = [],\r\n            resultIndexMap = {},\r\n            rangePos = null,\r\n            that = this,\r\n            line = 1,\r\n            column = 0,\r\n            index = 0;\r\n        let text = this.htmls.map((item) => {\r\n            return item.text\r\n        }).join('\\n');\r\n        let strs = config.text.split(/\\n/);\r\n        let regStr = config.text.replace(/\\\\|\\.|\\*|\\+|\\-|\\?|\\(|\\)|\\[|\\]|{|\\}|\\^|\\$|\\~|\\!/g, '\\\\$&');\r\n        regStr = (config.wholeWord ? '(?:\\\\b|(?=[^0-9a-zA-Z]))' : '') + regStr + (config.wholeWord ? '(?:\\\\b|(?=[^0-9a-zA-Z]))' : '');\r\n        config = config || {};\r\n        reg = new RegExp('[^\\n]*?(' + regStr + ')|[^\\n]*?\\n', config.ignoreCase ? 'img' : 'mg');\r\n        while (exec = reg.exec(text)) {\r\n            if (!exec[1]) {\r\n                line++;\r\n                column = 0;\r\n            } else {\r\n                if (preExec && preExec[1] && preExec.index + preExec[0].length !== exec.index) {\r\n                    line++;\r\n                    column = 0;\r\n                }\r\n                start = {\r\n                    line: line,\r\n                    column: column + exec[0].length - strs[0].length\r\n                }\r\n                end = {\r\n                    line: line + strs.length - 1,\r\n                    column: strs.length > 1 ? strs.peek().length : column + exec[0].length\r\n                }\r\n                column = end.column;\r\n                rangePos = {\r\n                    start: start,\r\n                    end: end\r\n                };\r\n                resultCaches.push(rangePos);\r\n                if (!result && (!that.nowCursorPos || Util.comparePos(end, that.nowCursorPos) >= 0)) {\r\n                    if (!this.selecter.ranges.size || !this.selecter.getRangeByCursorPos(end)) {\r\n                        result = rangePos;\r\n                    }\r\n                    index = resultCaches.length - 1;\r\n                    resultIndexMap[resultCaches.length - 1] = true;\r\n                }\r\n            }\r\n            preExec = exec;\r\n        }\r\n        if (!resultCaches.length) {\r\n            return null;\r\n        }\r\n        if (!result && resultCaches.length) {\r\n            index = 0;\r\n            result = resultCaches[0];\r\n        }\r\n        this.cacheData = {\r\n            config: config,\r\n            resultCaches: resultCaches,\r\n            resultIndexMap: resultIndexMap,\r\n            index: index\r\n        };\r\n        return {\r\n            now: this.cacheData.index + 1,\r\n            list: resultCaches,\r\n            result: result\r\n        };\r\n    }\r\n    // 重新搜索\r\n    refreshSearch(config) {\r\n        if (!this.hasCache() && !config) {\r\n            return;\r\n        }\r\n        let refreshSearchId = this.refreshSearch.id + 1 || 1;\r\n        this.refreshSearch.id = refreshSearchId;\r\n        this.$nextTick(() => {\r\n            if (this.refreshSearch.id !== refreshSearchId) {\r\n                return;\r\n            }\r\n            if (this.hasCache() || config) {\r\n                config = config || this.cacheData.config;\r\n                this.clearSearch();\r\n                this.search({\r\n                    config: config\r\n                });\r\n            }\r\n        });\r\n    }\r\n    clearSearch() {\r\n        this.selecter.clearRange();\r\n        this.cacheData = null;\r\n    }\r\n    clearNow() {\r\n        if (this.cacheData) {\r\n            this.cacheData.index = -1;\r\n            this.cacheData.resultIndexMap = {};\r\n            this.selecter.clearActive();\r\n        }\r\n    }\r\n    hasCache() {\r\n        return !!this.cacheData;\r\n    }\r\n    now() {\r\n        return this.cacheData.resultCaches[this.cacheData.index];\r\n    }\r\n    next() {\r\n        return this.getFromCache();\r\n    }\r\n    prev() {\r\n        return this.getFromCache('up');\r\n    }\r\n    setNow(cursorPos) {\r\n        let resultCaches = this.cacheData.resultCaches;\r\n        this.cacheData.index = 0;\r\n        this.cacheData.resultIndexMap = {\r\n            0: true\r\n        };\r\n        for (let i = 0; i < resultCaches.length; i++) {\r\n            let item = resultCaches[i];\r\n            if (Util.comparePos(item.end, cursorPos) >= 0) {\r\n                this.cacheData.index = i;\r\n                this.cacheData.resultIndexMap = {\r\n                    i: true\r\n                };\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    getFromCache(direct) {\r\n        if (!this.selecter.getRangeByCursorPos(this.nowCursorPos) ||\r\n            this.cacheData.index < 0) {\r\n            this.setNow(this.nowCursorPos);\r\n            if (direct !== 'up') {\r\n                let resultCaches = this.cacheData.resultCaches;\r\n                return {\r\n                    now: this.cacheData.index + 1,\r\n                    list: resultCaches,\r\n                    result: resultCaches[this.cacheData.index]\r\n                }\r\n            }\r\n        }\r\n        let resultCaches = this.cacheData.resultCaches;\r\n        let resultIndexMap = this.cacheData.resultIndexMap;\r\n        let index = this.cacheData.index + (direct === 'up' ? -1 : 1);\r\n        let result = null;\r\n        if (index == resultCaches.length) {\r\n            index = 0;\r\n        } else if (index < 0) {\r\n            index = resultCaches.length - 1;\r\n        }\r\n        if (!resultIndexMap[index] || this.fSearcher === this) {\r\n            result = resultCaches[index];\r\n            this.cacheData.index = index;\r\n            resultIndexMap[index] = true;\r\n        }\r\n        return {\r\n            now: index + 1,\r\n            result: result,\r\n            list: resultCaches\r\n        }\r\n    }\r\n    getConfig() {\r\n        if (!this.cacheData) {\r\n            return;\r\n        }\r\n        return Object.assign({}, this.cacheData.config);\r\n    }\r\n}","/*\r\n * @Author: lisong\r\n * @Date: 2022-03-04 16:13:41\r\n * @Description: \r\n */\r\nclass Node {\r\n    constructor(max) {\r\n        this.dataList = new Array(max + 1);\r\n        this.linkList = new Array(max + 2);\r\n        this.num = 0;\r\n        this.next = null;\r\n        this.prev = null;\r\n        this.pNode = null;\r\n    }\r\n}\r\nclass Btree {\r\n    /**\r\n     * 构造器\r\n     * @param {Function} compare 比较器\r\n     * @param {Number} max 节点可存储的最大数量 \r\n     */\r\n    constructor(compare, max) {\r\n        this.max = max || 4;\r\n        this.root = null;\r\n        this.head = null;\r\n        this.size = 0;\r\n        this.compare = compare || function (a, b) {\r\n            return a - b;\r\n        }\r\n    }\r\n    /**\r\n     * 插入\r\n     * @param {Any} value \r\n     */\r\n    insert(value) {\r\n        if (!this.root) {\r\n            let node = new Node(this.max);\r\n            node.dataList[0] = value;\r\n            node.num++;\r\n            this.root = node;\r\n            this.head = node;\r\n            this.size++;\r\n            this.arrayCache = null;\r\n            return;\r\n        }\r\n        let node = this._search(value, true);\r\n        let link = null;\r\n        let half = Math.floor(this.max / 2) || 1; //m为1时，n应该也为1\r\n        let result = this.iterator(node, value);\r\n        for (let i = 0; i < node.num; i++) {\r\n            if (this.compare(value, node.dataList[i]) === 0) {\r\n                return result;\r\n            }\r\n        }\r\n        this.size++;\r\n        this.arrayCache = null;\r\n        while (node) {\r\n            let linkList = node.linkList;\r\n            let dataList = node.dataList;\r\n            for (let i = 0; i < node.num; i++) {\r\n                let data = dataList[i];\r\n                if (this.compare(value, data) < 0) {\r\n                    _insert(dataList, linkList, i);\r\n                    break;\r\n                } else if (i === node.num - 1) {\r\n                    _insert(dataList, linkList, i + 1);\r\n                }\r\n            }\r\n            node.num++; //关键字数量加1\r\n            if (node.num <= this.max) { //存储数量未超过最大限制，直接结束插入\r\n                break;\r\n            }\r\n            let newNode = new Node(this.max);\r\n            let isPnode = node.linkList[0];\r\n            value = dataList[half]; //父节点需要插入的值\r\n            if (!isPnode) { //叶子节点更新前后件\r\n                if (node.next) {\r\n                    node.next.prev = newNode;\r\n                }\r\n                newNode.next = node.next;\r\n                node.next = newNode;\r\n                newNode.prev = node;\r\n                newNode.pNode = node.pNode;\r\n            }\r\n            link = newNode;\r\n            //复制数据到新节点，如果是叶子节点，需要把value留在叶子节点中\r\n            for (let i = (isPnode ? half + 1 : half), j = 0; i < node.num; i++, j++) {\r\n                newNode.dataList[j] = dataList[i];\r\n                newNode.linkList[j + 1] = linkList[i + 1];\r\n                if (newNode.linkList[j + 1]) {\r\n                    newNode.linkList[j + 1].pNode = newNode;\r\n                }\r\n                dataList[i] = null;\r\n                linkList[i + 1] = null;\r\n                newNode.num++;\r\n            }\r\n            node.num = half; //关键字数量为最大值的一半\r\n            if (isPnode) {\r\n                node.dataList[node.num] = null;\r\n                // 非叶子节点，需要把左侧最后一个指针域复制过来\r\n                newNode.linkList[0] = node.linkList[node.num + 1];\r\n                if (newNode.linkList[0]) {\r\n                    newNode.linkList[0].pNode = newNode;\r\n                }\r\n                node.linkList[node.num + 1] = null;\r\n            }\r\n            if (!node.pNode) { //上溢到了根节点\r\n                this.root = new Node(this.max);\r\n                this.root.dataList[0] = value;\r\n                this.root.linkList[0] = node;\r\n                this.root.linkList[1] = newNode;\r\n                this.root.num = 1;\r\n                node.pNode = this.root;\r\n                newNode.pNode = this.root;\r\n                break;\r\n            }\r\n            node = node.pNode;\r\n        }\r\n        return result;\r\n\r\n        // 在i位置插入数据\r\n        function _insert(dataList, linkList, i) {\r\n            for (let j = node.num; j >= i + 1; j--) { //后移元素\r\n                dataList[j] = dataList[j - 1];\r\n                linkList[j + 1] = linkList[j];\r\n            }\r\n            dataList[i] = value;\r\n            linkList[i + 1] = link;\r\n            if (link) {\r\n                link.pNode = node;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 删除\r\n     * @param {Any} value \r\n     */\r\n    delete(value) {\r\n        let that = this;\r\n        let node = this._search(value);\r\n        let result = null;\r\n        let half = Math.floor(this.max / 2) || 1;\r\n        if (node) {\r\n            let dataList = node.dataList;\r\n            for (let i = 0; i < node.num; i++) {\r\n                if (this.compare(value, dataList[i]) === 0) {\r\n                    result = dataList[i];\r\n                    for (let j = i; j < node.num; j++) { //前移元素\r\n                        dataList[j] = dataList[j + 1];\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            node.num--;\r\n            this.size--;\r\n            if (!this.size) {\r\n                this.root = null;\r\n                return result;\r\n            }\r\n            this.arrayCache = null;\r\n        }\r\n        while (node && node.num < half && node.pNode) {\r\n            let pNode = node.pNode;\r\n            let pIndex = pNode.linkList.indexOf(node);\r\n            let leftNode = pNode.linkList[pIndex - 1];\r\n            let rightNode = pNode.linkList[pIndex + 1];\r\n            let isPnode = node.linkList[0];\r\n            if (leftNode && leftNode.num > half) { //从左节点借\r\n                _moveRight(node, 1);\r\n                if (!isPnode) {\r\n                    pNode.dataList[pIndex - 1] = leftNode.dataList[leftNode.num - 1];\r\n                }\r\n                node.dataList[0] = pNode.dataList[pIndex - 1];\r\n                node.linkList[0] = leftNode.linkList[leftNode.num];\r\n                if (node.linkList[0]) {\r\n                    node.linkList[0].pNode = node;\r\n                }\r\n                pNode.dataList[pIndex - 1] = leftNode.dataList[leftNode.num - 1];\r\n                leftNode.dataList[leftNode.num - 1] = null;\r\n                leftNode.linkList[leftNode.num] = null;\r\n                leftNode.num--;\r\n                node.num++;\r\n            } else if (rightNode && rightNode.num > half) { //从右节点借\r\n                node.dataList[node.num] = pNode.dataList[pIndex];\r\n                node.linkList[node.num + 1] = rightNode.linkList[0];\r\n                if (node.linkList[node.num + 1]) {\r\n                    node.linkList[node.num + 1].pNode = node;\r\n                }\r\n                if (!isPnode) {\r\n                    pNode.dataList[pIndex] = rightNode.dataList[1];\r\n                } else {\r\n                    pNode.dataList[pIndex] = rightNode.dataList[0];\r\n                }\r\n                _moveLeft(rightNode, 1);\r\n                rightNode.num--;\r\n                node.num++;\r\n            } else if (rightNode) { //向右合并\r\n                _join(node.pNode, pIndex, node, rightNode);\r\n            } else if (leftNode) { //向左合并\r\n                _join(node.pNode, pIndex - 1, leftNode, node);\r\n            }\r\n        }\r\n        return result;\r\n\r\n        function _join(pNode, pIndex, leftNode, rightNode) {\r\n            let isPnode = leftNode.linkList[0] ? 1 : 0;\r\n            // 右移右节点\r\n            _moveRight(rightNode, leftNode.num + isPnode);\r\n            //复制左节点到右节点\r\n            for (let i = 0; i < leftNode.num; i++) {\r\n                rightNode.dataList[i] = leftNode.dataList[i];\r\n                rightNode.linkList[i + 1] = leftNode.linkList[i + 1];\r\n                if (rightNode.linkList[i + 1]) {\r\n                    rightNode.linkList[i + 1].pNode = rightNode;\r\n                }\r\n            }\r\n            rightNode.linkList[0] = leftNode.linkList[0];\r\n            if (rightNode.linkList[0]) {\r\n                rightNode.linkList[0].pNode = rightNode;\r\n            }\r\n            if (isPnode) { //当前节点非叶子节点，父节点下移\r\n                rightNode.dataList[leftNode.num] = pNode.dataList[pIndex];\r\n            }\r\n            _moveLeft(pNode, 1, pIndex); //删除父节点和左域\r\n            rightNode.num += leftNode.num + isPnode;\r\n            pNode.num--;\r\n            if (!isPnode) { //叶子节点更新前后件\r\n                if (that.head === leftNode) { //头结点被删除\r\n                    that.head = rightNode;\r\n                } else {\r\n                    leftNode.prev.next = rightNode;\r\n                    rightNode.prev = leftNode.prev;\r\n                }\r\n            }\r\n            if (!pNode.num) { //已经到了根节点\r\n                that.root = rightNode;\r\n                that.root.pNode = null;\r\n                node = null;\r\n            } else {\r\n                node = pNode;\r\n            }\r\n        }\r\n\r\n        //右移num个节点\r\n        function _moveRight(target, num) {\r\n            for (let i = target.num - 1; i >= 0; i--) {\r\n                target.dataList[num + i] = target.dataList[i];\r\n                target.linkList[num + i + 1] = target.linkList[i + 1];\r\n            }\r\n            target.linkList[num] = target.linkList[0];\r\n        }\r\n\r\n        //左移num个节点\r\n        function _moveLeft(target, num, index) {\r\n            index = index || 0;\r\n            for (let i = index; i < target.num; i++) {\r\n                target.dataList[i] = target.dataList[i + num];\r\n                target.linkList[i] = target.linkList[i + num];\r\n            }\r\n            target.linkList[target.num] = target.linkList[target.num + num];\r\n        }\r\n    }\r\n    /**\r\n     * 查找\r\n     * @param {Any} value \r\n     * @param {Function} 自定义查找比较器 \r\n     */\r\n    search(value, compare) {\r\n        let result = this._search(value, false, compare);\r\n        if (result) {\r\n            result = this.iterator(result, value, compare);\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * 把搜索结果封装成迭代器\r\n     * @param {Node} result \r\n     * @param {Any} value \r\n     */\r\n    iterator(result, value, compare) {\r\n        let index = 0;\r\n        let orginIndex = 0;\r\n        let originResult = result;\r\n        compare = compare || this.compare;\r\n        for (let i = 0; i < result.num; i++) {\r\n            let item = result.dataList[i];\r\n            if (compare(value, item) === 0) {\r\n                index = i;\r\n                orginIndex = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return {\r\n            next: _next,\r\n            prev: _prev,\r\n            reset: function () {\r\n                index = orginIndex;\r\n                result = originResult;\r\n            }\r\n        }\r\n\r\n        function _next() {\r\n            if (index < result.num) {\r\n                return result.dataList[index++];\r\n            } else if (result.next) {\r\n                result = result.next;\r\n                index = 0;\r\n                return result.dataList[index];\r\n            }\r\n            return null;\r\n        }\r\n\r\n        function _prev() {\r\n            index--;\r\n            if (index >= 0) {\r\n                return result.dataList[index];\r\n            } else if (result.prev) {\r\n                result = result.prev;\r\n                index = result.num - 1;\r\n                return result.dataList[index];\r\n            } else {\r\n                index++;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n    forEach(cb) {\r\n        let node = this.head;\r\n        while (node) {\r\n            let dataList = node.dataList;\r\n            for (let index = 0; index < node.num; index++) {\r\n                cb(dataList[index]);\r\n            }\r\n            node = node.next;\r\n        }\r\n    }\r\n    toArray() {\r\n        if (this.arrayCache) {\r\n            return this.arrayCache;\r\n        }\r\n        let results = [];\r\n        this.forEach((item) => {\r\n            results.push(item);\r\n        });\r\n        this.arrayCache = results;\r\n        return results;\r\n    }\r\n    get(index) {\r\n        let node = this.head;\r\n        let count = -1;\r\n        while (node) {\r\n            let dataList = node.dataList;\r\n            for (let i = 0; i < node.num; i++) {\r\n                count++;\r\n                if (count == index) {\r\n                    return dataList[i];\r\n                }\r\n            }\r\n            node = node.next;\r\n        }\r\n        return null;\r\n    }\r\n    empty() {\r\n        this.root = null;\r\n        this.head = null;\r\n        this.size = 0;\r\n        this.arrayCache = null;\r\n    }\r\n    _search(value, isInsert, compare) {\r\n        let node = this.root;\r\n        compare = compare || this.compare;\r\n        while (node) {\r\n            let linkList = node.linkList;\r\n            let dataList = node.dataList;\r\n            for (let i = 0; i < node.num; i++) {\r\n                let res = compare(value, dataList[i]);\r\n                if (res === 0) {\r\n                    if (linkList[i + 1]) { //右侧子节点存放了父节点\r\n                        node = linkList[i + 1];\r\n                        break;\r\n                    } else {\r\n                        return node;\r\n                    }\r\n                } else if (res > 0) {\r\n                    if (!dataList[i + 1] || compare(value, dataList[i + 1]) < 0) { //目标在右侧子树中\r\n                        if (linkList[i + 1]) {\r\n                            node = linkList[i + 1];\r\n                            break;\r\n                        } else {\r\n                            return isInsert ? node : null;\r\n                        }\r\n                    }\r\n                } else { //目标在左侧子树中\r\n                    if (linkList[i]) {\r\n                        node = linkList[i];\r\n                        break;\r\n                    } else {\r\n                        return isInsert ? node : null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Btree;","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-13 10:41:16\r\n * @Description: \r\n */\r\nimport Util from '@/common/Util';\r\nimport Btree from '@/common/Btree';\r\n\r\nconst comparator = function (a, b) {\r\n    let res = Util.comparePos(a.start, b.start);\r\n    if (res === 0) {\r\n        return Util.comparePos(a.end, b.end);\r\n    }\r\n    return res;\r\n}\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.initProperties(editor, context);\r\n        this.ranges = new Btree(comparator);\r\n        this.activedRanges = new Btree(comparator);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, [\r\n            'renderSelectedBg',\r\n            'cursor',\r\n        ]);\r\n        Util.defineProperties(this, context, [\r\n            'htmls',\r\n        ]);\r\n        this.setContextData = (prop, value) => {\r\n            context.setData(prop, value);\r\n        }\r\n        this.setEditorData = (prop, value) => {\r\n            editor.setData(prop, value);\r\n        }\r\n    }\r\n    // 检测光标是否在选中区域范围内\r\n    getRangeByCursorPos(cursorPos) {\r\n        let result = this.ranges.search(cursorPos, (value, item) => {\r\n            if (Util.comparePos(value, item.start) === 0 ||\r\n                Util.comparePos(value, item.end) === 0) {\r\n                return 0;\r\n            }\r\n            return Util.comparePos(value, item.start);\r\n        });\r\n        return result && result.next();\r\n    }\r\n    select(direct, wholeWord) {\r\n        this.cursor.multiCursorPos.forEach((cursorPos) => {\r\n            let range = this.getRangeByCursorPos(cursorPos);\r\n            if (range) {\r\n                let start = range.start;\r\n                let end = range.end;\r\n                this.cursor.moveCursor(cursorPos, direct, wholeWord);\r\n                if (direct === 'left') {\r\n                    if (Util.comparePos(cursorPos, range.start) < 0) {\r\n                        start = cursorPos;\r\n                    } else {\r\n                        end = cursorPos;\r\n                    }\r\n                } else {\r\n                    if (Util.comparePos(cursorPos, range.end) > 0) {\r\n                        end = cursorPos;\r\n                    } else {\r\n                        start = cursorPos;\r\n                    }\r\n                }\r\n                this.updateRange(range, {\r\n                    start: start,\r\n                    end: end\r\n                });\r\n            } else {\r\n                let start = Object.assign({}, cursorPos);\r\n                let end = this.cursor.moveCursor(cursorPos, direct, wholeWord);\r\n                range = this.createRange(start, end);\r\n                if (range) {\r\n                    this.addRange({\r\n                        start: start,\r\n                        end: end\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        this.renderSelectedBg();\r\n    }\r\n    selectAll() {\r\n        let end = {\r\n            line: this.htmls.length,\r\n            column: this.htmls.peek().text.length\r\n        };\r\n        this.setEditorData('forceCursorView', false);\r\n        this.cursor.setCursorPos(end);\r\n        this.setRange({\r\n            line: 1,\r\n            column: 0\r\n        }, end);\r\n        this.renderSelectedBg();\r\n    }\r\n    selectAllOccurence() {\r\n        this.cursor.clearCursorPos();\r\n        this.activedRanges = this.ranges.slice();\r\n        this.activedRanges.forEach((item) => {\r\n            this.cursor.addCursorPos(item.end);\r\n            item.active = true;\r\n        });\r\n        this.renderSelectedBg();\r\n    }\r\n    addActive(cursorPos) {\r\n        let range = this.getRangeByCursorPos(cursorPos);\r\n        if (range && !range.active) {\r\n            range.active = true;\r\n            this.activedRanges.insert(range);\r\n        }\r\n        this.renderSelectedBg();\r\n    }\r\n    // 添加选中区域\r\n    addRange(ranges) {\r\n        let results = [];\r\n        let list = ranges instanceof Array ? ranges : [ranges];\r\n        list.map((range) => {\r\n            let start = range.start;\r\n            let end = range.end;\r\n            let same = Util.comparePos(start, end);\r\n            if (same > 0) {\r\n                let tmp = start;\r\n                start = end;\r\n                end = tmp;\r\n            } else if (!same) {\r\n                return;\r\n            }\r\n            let active = this.cursor.getCursorsByLineColumn(start.line, start.column) ||\r\n                this.cursor.getCursorsByLineColumn(end.line, end.column);\r\n            range = {\r\n                start: {\r\n                    line: start.line,\r\n                    column: start.column\r\n                },\r\n                end: {\r\n                    line: end.line,\r\n                    column: end.column\r\n                },\r\n                active: !!active\r\n            };\r\n            this.ranges.insert(range);\r\n            active && this.activedRanges.insert(range);;\r\n            results.push(range);\r\n            this.filterRange(range);\r\n        });\r\n        this.renderSelectedBg();\r\n        return ranges instanceof Array ? results : results[0];\r\n    }\r\n    /**\r\n     * 设置选中区域\r\n     * @param {Object} start\r\n     * @param {Object} end\r\n     */\r\n    setRange(start, end) {\r\n        let same = Util.comparePos(start, end);\r\n        if (same > 0) {\r\n            let tmp = start;\r\n            start = end;\r\n            end = tmp;\r\n        } else if (!same) {\r\n            return;\r\n        }\r\n        let active = this.cursor.getCursorsByLineColumn(start.line, start.column) ||\r\n            this.cursor.getCursorsByLineColumn(end.line, end.column);\r\n        let range = {\r\n            start: Object.assign({}, start),\r\n            end: Object.assign({}, end),\r\n            active: !!active\r\n        };\r\n        this.clearRange();\r\n        this.ranges.empty();\r\n        this.activedRanges.empty();\r\n        this.ranges.insert(range);\r\n        active && this.activedRanges.insert(range);\r\n        this.renderSelectedBg();\r\n        return range;\r\n    }\r\n    setActive(cursorPos) {\r\n        let range = this.getRangeByCursorPos(cursorPos);\r\n        this.activedRanges.forEach((item) => {\r\n            item.active = false;\r\n        });\r\n        this.activedRanges.empty();\r\n        if (range) {\r\n            range.active = true;\r\n            this.activedRanges.insert(range);\r\n        }\r\n        this.renderSelectedBg();\r\n    }\r\n    updateRange(target, range) {\r\n        let start = range.start;\r\n        let end = range.end;\r\n        let same = Util.comparePos(start, end);\r\n        if (same > 0) {\r\n            let tmp = start;\r\n            start = end;\r\n            end = tmp;\r\n        } else if (!same) {\r\n            return false;\r\n        }\r\n        this.ranges.delete(target);\r\n        target.start.line = start.line;\r\n        target.start.column = start.column;\r\n        target.end.line = end.line;\r\n        target.end.column = end.column;\r\n        this.ranges.insert(target);\r\n        this.filterRange(target);\r\n        this.renderSelectedBg();\r\n    }\r\n    filterRange(range) {\r\n        let it = this.ranges.search(range);\r\n        let dels = [];\r\n        let value = it.prev();\r\n        if (value && Util.comparePos(value.end, range.start) > 0) { //删除前件\r\n            dels.push(value);\r\n        }\r\n        it.reset();\r\n        it.next();\r\n        while (value = it.next()) {\r\n            if (Util.comparePos(range.end, value.start) > 0) {\r\n                dels.push(value);\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n        dels.map((item) => {\r\n            this.ranges.delete(item);\r\n            this.activedRanges.delete(item);\r\n            this.cursor.clearCursorPos(item.start);\r\n            this.cursor.clearCursorPos(item.end);\r\n        });\r\n    }\r\n    createRange(start, end) {\r\n        let same = Util.comparePos(start, end);\r\n        if (same > 0) {\r\n            let tmp = start;\r\n            start = end;\r\n            end = tmp;\r\n        }\r\n        if (same === 0) {\r\n            return null;\r\n        }\r\n        return {\r\n            start: start,\r\n            end: end\r\n        }\r\n    }\r\n    // 清除选中背景\r\n    clearRange() {\r\n        this.ranges.empty();\r\n        this.activedRanges.empty();\r\n        this.renderSelectedBg();\r\n    }\r\n    clearActive() {\r\n        this.activedRanges.forEach((item) => {\r\n            item.active = false;\r\n        });\r\n        this.activedRanges.empty();\r\n        this.renderSelectedBg();\r\n    }\r\n    clearInactive() {\r\n        if (!this.activedRanges.size) {\r\n            this.clearRange();\r\n        } else {\r\n            this.ranges.toArray().map((item) => {\r\n                if (!item.active) {\r\n                    this.ranges.delete(item);\r\n                }\r\n            });\r\n            this.renderSelectedBg();\r\n        }\r\n    }\r\n}","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-14 11:20:31\r\n * @Description: \r\n */\r\nimport Util from '@/common/Util';\r\nimport Btree from '@/common/Btree';\r\n\r\nconst regs = {\r\n    word: /[a-zA-Z0-9_]/,\r\n    dWord: Util.fullAngleReg,\r\n    space: /\\s/\r\n}\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.initProperties(editor, context);\r\n        this.multiCursorPos = new Btree(Util.comparePos);\r\n        this.multiKeyCode = 'ctrl';\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, [\r\n            'nowCursorPos',\r\n            'searcher',\r\n            'selecter',\r\n            'setNowCursorPos',\r\n            'renderCursor',\r\n            'getColumnByWidth',\r\n            'getStrWidth',\r\n        ]);\r\n        Util.defineProperties(this, context, ['htmls']);\r\n    }\r\n    clearCursorPos(cursorPos) {\r\n        if (cursorPos) {\r\n            cursorPos = this.getCursorsByLineColumn(cursorPos.line, cursorPos.column);\r\n            if (cursorPos) {\r\n                cursorPos.del = true;\r\n                this.multiCursorPos.delete(cursorPos);\r\n                if (cursorPos === this.nowCursorPos) {\r\n                    this.setNowCursorPos(null);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n        this.multiCursorPos.forEach((item) => {\r\n            item.del = true;\r\n        });\r\n        this.multiCursorPos.empty();\r\n        this.setNowCursorPos(null);\r\n    }\r\n    // 添加光标\r\n    addCursorPos(cursorPos) {\r\n        let pos = this.getCursorsByLineColumn(cursorPos.line, cursorPos.column);\r\n        if (pos) {\r\n            this.setNowCursorPos(pos);\r\n            return pos;\r\n        }\r\n        cursorPos = {\r\n            line: cursorPos.line,\r\n            column: cursorPos.column\r\n        };\r\n        this.multiCursorPos.insert(cursorPos);\r\n        this.setNowCursorPos(cursorPos);\r\n        return cursorPos;\r\n    }\r\n    addCursorAbove() {\r\n        this.multiCursorPos.toArray().map((item) => {\r\n            if (item.line > 1) {\r\n                let maxColumn = this.htmls[item.line - 2].text.length;\r\n                let column = item.moveColumn !== undefined ? item.moveColumn : item.column;\r\n                let cursorPos = this.addCursorPos({\r\n                    line: item.line - 1,\r\n                    column: column > maxColumn ? maxColumn : column\r\n                });\r\n                cursorPos.moveColumn = column;\r\n                this.setNowCursorPos(cursorPos);\r\n            }\r\n        });\r\n    }\r\n    addCursorBelow() {\r\n        this.multiCursorPos.toArray().map((item) => {\r\n            if (item.line < this.htmls.length) {\r\n                let maxColumn = this.htmls[item.line].text.length;\r\n                let column = item.moveColumn !== undefined ? item.moveColumn : item.column;\r\n                let cursorPos = this.addCursorPos({\r\n                    line: item.line + 1,\r\n                    column: column > maxColumn ? maxColumn : column\r\n                });\r\n                cursorPos.moveColumn = column;\r\n                this.setNowCursorPos(cursorPos);\r\n            }\r\n        });\r\n    }\r\n    addCursorLineEnds() {\r\n        if (this.selecter.activedRanges.size) {\r\n            this.clearCursorPos();\r\n            this.selecter.activedRanges.forEach((item) => {\r\n                let startLine = item.start.line;\r\n                let endLine = item.end.line;\r\n                while (startLine < endLine) {\r\n                    this.addCursorPos({\r\n                        line: startLine,\r\n                        column: this.htmls[startLine - 1].text.length\r\n                    });\r\n                    startLine++;\r\n                }\r\n                this.setNowCursorPos(this.addCursorPos({\r\n                    line: endLine,\r\n                    column: this.htmls[endLine - 1].text.length\r\n                }));\r\n            });\r\n            this.searcher.clearSearch();\r\n        }\r\n    }\r\n    // 设置光标\r\n    setCursorPos(cursorPos) {\r\n        cursorPos = {\r\n            line: cursorPos.line,\r\n            column: cursorPos.column\r\n        };\r\n        if (this.multiCursorPos.size == 1) {\r\n            let pos = this.multiCursorPos.get(0);\r\n            if (Util.comparePos(pos, cursorPos) === 0) {\r\n                return pos;\r\n            }\r\n        }\r\n        this.multiCursorPos.empty();\r\n        this.multiCursorPos.insert(cursorPos);\r\n        this.setNowCursorPos(cursorPos);\r\n        return cursorPos;\r\n    }\r\n    updateCursorPos(cursorPos, line, column) {\r\n        let pos = this.getCursorsByLineColumn(cursorPos.line, cursorPos.column);\r\n        if (pos === cursorPos) {\r\n            this.multiCursorPos.delete(cursorPos);\r\n        }\r\n        cursorPos.line = line;\r\n        cursorPos.column = column;\r\n        this.multiCursorPos.insert(cursorPos);\r\n        if (cursorPos === this.nowCursorPos) { //触发滚动\r\n            this.setNowCursorPos(this.nowCursorPos);\r\n        } else {\r\n            this.renderCursor();\r\n        }\r\n        return cursorPos;\r\n    }\r\n    getCursorsByLine(line) {\r\n        let results = [];\r\n        let it = this.multiCursorPos.search(null, (a, b) => {\r\n            return line - b.line;\r\n        });\r\n        let value = null;\r\n        if (it) {\r\n            value = it.prev();\r\n            while (value && value.line === line) {\r\n                results.push(value);\r\n                value = it.prev();\r\n            }\r\n            results.reverse();\r\n            it.reset();\r\n            value = it.next();\r\n            while (value && value.line === line) {\r\n                results.push(value);\r\n                value = it.next();\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    getCursorsByLineColumn(line, column) {\r\n        let it = this.multiCursorPos.search({\r\n            line: line,\r\n            column: column\r\n        });\r\n        return it && it.next();\r\n    }\r\n    // 移动光标\r\n    moveCursor(cursorPos, direct, wholeWord) {\r\n        let text = this.htmls[cursorPos.line - 1].text;\r\n        let line = cursorPos.line;\r\n        let column = cursorPos.column;\r\n        if (direct === 'home') {\r\n            column = 0;\r\n        } else if (direct === 'end') {\r\n            column = this.htmls[line - 1].text.length;\r\n        } else if (direct === 'up') {\r\n            if (line > 1) {\r\n                let width = this.getStrWidth(text, 0, column);\r\n                line--;\r\n                text = this.htmls[line - 1].text;\r\n                column = this.getColumnByWidth(text, width);\r\n            }\r\n        } else if (direct === 'down') {\r\n            if (line < this.htmls.length) {\r\n                let width = this.getStrWidth(text, 0, column);\r\n                line++;\r\n                text = this.htmls[line - 1].text;\r\n                column = this.getColumnByWidth(text, width);\r\n            }\r\n        } else if (direct === 'left') {\r\n            while (column === 0 && line > 1) {\r\n                line--;\r\n                text = this.htmls[line - 1].text;\r\n                column = text.length;\r\n            }\r\n            if (column === 0) {\r\n                this.updateCursorPos(cursorPos, line, column);\r\n                return {\r\n                    line: line,\r\n                    column: column\r\n                }\r\n            }\r\n            if (wholeWord) {\r\n                let sReg = null;\r\n                //过滤开始的空格\r\n                while (column && text[column - 1].match(regs.space)) {\r\n                    column--;\r\n                }\r\n                if (column == 0) {\r\n                    this.updateCursorPos(cursorPos, line, column);\r\n                    return {\r\n                        line: line,\r\n                        column: column\r\n                    }\r\n                }\r\n                if (text[column - 1].match(regs.word)) { //半角文字\r\n                    sReg = regs.word;\r\n                } else if (text[column - 1].match(regs.dWord)) { //全角文字或字符\r\n                    sReg = regs.dWord;\r\n                }\r\n                if (sReg) {\r\n                    while (column && text[column - 1].match(sReg)) {\r\n                        column--\r\n                    }\r\n                } else {\r\n                    while (column &&\r\n                        !text[column - 1].match(regs.space) &&\r\n                        !text[column - 1].match(regs.word) &&\r\n                        !text[column - 1].match(regs.dWord)) {\r\n                        column--\r\n                    }\r\n                }\r\n            } else if (cursorPos.line === line) {\r\n                column--;\r\n            }\r\n        } else {\r\n            while (column === text.length && line < this.htmls.length) {\r\n                line++;\r\n                column = 0;\r\n                text = this.htmls[line - 1].text;\r\n            }\r\n            if (column == text.length) {\r\n                this.updateCursorPos(cursorPos, line, column);\r\n                return {\r\n                    line: line,\r\n                    column: column\r\n                }\r\n            }\r\n            if (wholeWord) {\r\n                let sReg = null;\r\n                //过滤开始的空格\r\n                while (column < text.length && text[column].match(regs.space)) {\r\n                    column++;\r\n                }\r\n                if (column == text.length) {\r\n                    this.updateCursorPos(cursorPos, line, column);\r\n                    return {\r\n                        line: line,\r\n                        column: column\r\n                    }\r\n                }\r\n                if (text[column].match(regs.word)) { //半角文字\r\n                    sReg = regs.word;\r\n                } else if (text[column].match(regs.dWord)) { //全角文字或字符\r\n                    sReg = regs.dWord;\r\n                }\r\n                if (sReg) {\r\n                    while (column < text.length && text[column].match(sReg)) {\r\n                        column++\r\n                    }\r\n                } else {\r\n                    while (column < text.length &&\r\n                        !text[column].match(regs.space) &&\r\n                        !text[column].match(regs.word) &&\r\n                        !text[column].match(regs.dWord)) {\r\n                        column++\r\n                    }\r\n                }\r\n            } else if (cursorPos.line === line) {\r\n                column++;\r\n            }\r\n        }\r\n        this.updateCursorPos(cursorPos, line, column);\r\n\r\n        return {\r\n            line: line,\r\n            column: column\r\n        }\r\n    }\r\n    switchMultiKeyCode() {\r\n        this.multiKeyCode = this.multiKeyCode === 'ctrl' ? 'alt' : 'ctrl';\r\n    }\r\n}","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-31 15:11:27\r\n * @Description: \r\n */\r\nimport Util from '@/common/Util';\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.history = [];\r\n        this.initProperties(editor, context);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, [\r\n            'cursor',\r\n        ]);\r\n        Util.defineProperties(this, context, [\r\n            'insertContent',\r\n            'deleteContent',\r\n            'moveLineUp',\r\n            'moveLineDown',\r\n            'copyLineUp',\r\n            'copyLineDown',\r\n            'deleteCopyLineUp',\r\n            'deleteCopyLineDown',\r\n            'replace',\r\n        ]);\r\n    }\r\n    // 撤销操作\r\n    undo() {\r\n        if (this.history.index > 0) {\r\n            let command = this.history[this.history.index - 1];\r\n            this.doCommand(command);\r\n            this.history.index--;\r\n            command = this.history[this.history.index - 1];\r\n            if (command && command.serial) { //连续操作标识\r\n                this.undo();\r\n            }\r\n        }\r\n    }\r\n    // 重做操作\r\n    redo() {\r\n        if (this.history.index < this.history.length) {\r\n            let command = this.history[this.history.index];\r\n            this.history.index++;\r\n            this.doCommand(command);\r\n            command = this.history[this.history.index];\r\n            if (command && command.serial) { //连续操作标识\r\n                this.redo();\r\n            }\r\n        }\r\n    }\r\n    // 操作命令\r\n    doCommand(command) {\r\n        let commandType = command.type || (command instanceof Array ? command[0].type : command.type);\r\n        switch (commandType) {\r\n            case Util.command.DELETE:\r\n                this.cursor.clearCursorPos();\r\n                this.deleteContent(Util.keyCode.BACKSPACE, command);\r\n                break;\r\n            case Util.command.INSERT:\r\n                this.cursor.clearCursorPos();\r\n                if (command instanceof Array) {\r\n                    var text = [];\r\n                    command.map((item) => {\r\n                        text.push(item.text);\r\n                    });\r\n                    this.insertContent(text, command);\r\n                } else {\r\n                    this.insertContent(command.text, command);\r\n                }\r\n                break;\r\n            case Util.command.MOVEUP:\r\n                this.cursor.clearCursorPos();\r\n                this.moveLineUp(command);\r\n                break;\r\n            case Util.command.MOVEDOWN:\r\n                this.cursor.clearCursorPos();\r\n                this.moveLineDown(command);\r\n                break;\r\n            case Util.command.COPY_DOWN:\r\n                this.cursor.clearCursorPos();\r\n                this.copyLineDown(command);\r\n                break;\r\n            case Util.command.DELETE_COPY_DOWN:\r\n                this.cursor.clearCursorPos();\r\n                this.deleteCopyLineDown(command);\r\n                break;\r\n            case Util.command.COPY_UP:\r\n                this.cursor.clearCursorPos();\r\n                this.copyLineUp(command);\r\n                break;\r\n            case Util.command.DELETE_COPY_UP:\r\n                this.cursor.clearCursorPos();\r\n                this.deleteCopyLineUp(command);\r\n                break;\r\n            case Util.command.REPLACE:\r\n                this.cursor.clearCursorPos();\r\n                this.replace(command.text, command.cursorPos, command);\r\n                break;\r\n        }\r\n    }\r\n    // 添加历史记录\r\n    pushHistory(command) {\r\n        while (this.history.length > this.history.index) {\r\n            this.history.pop();\r\n        }\r\n        let that = this;\r\n        let lastCommand = this.history[this.history.index - 1];\r\n        command = this.sortComand(command);\r\n        if (lastCommand instanceof Array &&\r\n            command instanceof Array &&\r\n            lastCommand.length === command.length &&\r\n            Date.now() - this.pushHistoryTime < 2000) {\r\n            if (_checkSameOp(lastCommand) && _checkSameOp(command) &&\r\n                _combCheck(lastCommand[0], command[0])) {\r\n                for (let i = 0; i < lastCommand.length; i++) {\r\n                    _combCommand(lastCommand[i], command[i]);\r\n                }\r\n            } else {\r\n                this.history.push(command);\r\n            }\r\n        } else if (_combCheck(lastCommand, command)) {\r\n            _combCommand(lastCommand, command);\r\n        } else {\r\n            this.history.push(command);\r\n        }\r\n        this.history.index = this.history.length;\r\n        this.pushHistoryTime = Date.now();\r\n\r\n        function _checkSameOp(commandList) {\r\n            for (let i = 1; i < commandList.length; i++) {\r\n                if (commandList[i].type !== commandList[i - 1].type) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        function _combCheck(lastCommand, command) {\r\n            // 检测是否为连续插入或连续删除\r\n            if ((command.type == Util.command.DELETE || command.type == Util.command.INSERT) &&\r\n                lastCommand && lastCommand.type == command.type &&\r\n                command.preCursorPos.line == command.cursorPos.line &&\r\n                Date.now() - that.pushHistoryTime < 2000) {\r\n                if (lastCommand.type == Util.command.DELETE) {\r\n                    if (Util.comparePos(lastCommand.cursorPos, command.preCursorPos) == 0) {\r\n                        return true;\r\n                    }\r\n                }\r\n                if (lastCommand.type == Util.command.INSERT) {\r\n                    if (Util.comparePos(lastCommand.cursorPos, command.preCursorPos) == 0 ||\r\n                        Util.comparePos(lastCommand.cursorPos, command.cursorPos) == 0) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // 检查两次操作是否可以合并\r\n        function _combCommand(lastCommand, command) {\r\n            if (lastCommand.type === Util.command.DELETE) {\r\n                command.preCursorPos.column -= lastCommand.cursorPos.column - lastCommand.preCursorPos.column;\r\n                lastCommand.preCursorPos = command.preCursorPos;\r\n                lastCommand.cursorPos = command.cursorPos;\r\n            } else {\r\n                lastCommand.cursorPos = command.cursorPos;\r\n                if (command.keyCode === Util.keyCode.DELETE) {\r\n                    lastCommand.text = lastCommand.text + command.text;\r\n                } else {\r\n                    lastCommand.text = command.text + lastCommand.text;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // 更新历史记录\r\n    updateHistory(command) {\r\n        let index = this.history.index;\r\n        if (command instanceof Array) {\r\n            command.map((item, _index) => {\r\n                item.keyCode = this.history[index - 1][_index].keyCode;\r\n            });\r\n        } else {\r\n            command.keyCode = this.history[index - 1].keyCode;\r\n        }\r\n        this.history[index - 1] = this.sortComand(command);\r\n    }\r\n    sortComand(command) {\r\n        if (command instanceof Array) {\r\n            command.sort((a, b) => {\r\n                a = a.cursorPos;\r\n                b = b.cursorPos;\r\n                if (a.line === b.line) {\r\n                    return a.column - b.column;\r\n                }\r\n                return a.line - b.line;\r\n            });\r\n        }\r\n        return command;\r\n    }\r\n}","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 13:42:22\r\n * @Description: \r\n */\r\nimport Util from '@/common/Util';\r\nlet regs = {\r\n    word: /[a-zA-Z0-9_]/,\r\n    dWord: Util.fullAngleReg,\r\n    space: /\\s/\r\n}\r\n\r\nexport default class {\r\n    constructor(editor) {\r\n        this.lineId = Number.MIN_SAFE_INTEGER;\r\n        this.htmls = [];\r\n        this.folds = [];\r\n        this.lineIdMap = new Map(); //htmls的唯一标识对象\r\n        this.renderedIdMap = new Map(); //renderHtmls的唯一标识对象\r\n        this.renderedLineMap = new Map(); //renderHtmls的唯一标识对象\r\n        this.foldMap = new Map(); //folds的唯一标识对象\r\n        this.initProperties(editor);\r\n        this.initData();\r\n    }\r\n    initProperties(editor) {\r\n        Util.defineProperties(this, editor, [\r\n            'nowCursorPos',\r\n            'maxLine',\r\n            'maxWidthObj',\r\n            'cursor',\r\n            'history',\r\n            'tokenizer',\r\n            'lint',\r\n            'folder',\r\n            'selecter',\r\n            'searcher',\r\n            'fSelecter',\r\n            'fSearcher',\r\n            'render',\r\n            'unFold',\r\n            'setMaxWidth',\r\n            'setLineWidth',\r\n            'setNowCursorPos',\r\n            'getStrWidth',\r\n        ]);\r\n        this.setEditorData = (prop, value) => {\r\n            editor.setData(prop, value);\r\n        }\r\n    }\r\n    initData() {\r\n        this.htmls.push({\r\n            lineId: this.lineId++,\r\n            text: '',\r\n            html: '',\r\n            width: 0,\r\n            tokens: [],\r\n            folds: [],\r\n            states: []\r\n        });\r\n        this.lineIdMap.set(this.htmls[0].lineId, this.htmls[0]);\r\n    }\r\n    setData(prop, value) {\r\n        if (typeof this[prop] === 'function') {\r\n            return;\r\n        }\r\n        this[prop] = value;\r\n    }\r\n    insertContent(text, command) {\r\n        let historyArr = null;\r\n        let cursorPosList = [];\r\n        let serial = false;\r\n        if (!command) {\r\n            // 如果有选中区域，需要先删除选中区域\r\n            if (this.selecter.activedRanges.size) {\r\n                let _historyArr = this.deleteContent();\r\n                // 连续操作标识\r\n                _historyArr.serial = true;\r\n                serial = true;\r\n            }\r\n            cursorPosList = this.cursor.multiCursorPos.toArray();\r\n        } else {\r\n            command.map((item) => {\r\n                // 多个插入的光标可能相同，这里不能先添加光标\r\n                cursorPosList.push(item.cursorPos);\r\n            });\r\n        }\r\n        historyArr = this._insertMultiContent(text, cursorPosList, command);\r\n        historyArr.serial = serial;\r\n        if (!command) { // 新增历史记录\r\n            this.history.pushHistory(historyArr);\r\n        } else { // 撤销或重做操作后，更新历史记录\r\n            this.history.updateHistory(historyArr);\r\n            historyArr.serial = command.serial;\r\n        }\r\n        this.setNowCursorPos(this.cursor.multiCursorPos.get(0));\r\n        this.fSearcher.refreshSearch();\r\n        return historyArr;\r\n    }\r\n    _insertMultiContent(text, cursorPosList, command) {\r\n        let prePos = null;\r\n        let historyObj = null;\r\n        let historyArr = [];\r\n        let texts = text instanceof Array ? text : text.split(/\\r\\n|\\n/);\r\n        let lineDelta = 0;\r\n        let columnDelta = 0;\r\n        this.cursor.clearCursorPos();\r\n        cursorPosList.map((cursorPos, index) => {\r\n            let _text = texts.length === cursorPosList.length ? texts[index] : text;\r\n            let commandObj = command && command[index] || {};\r\n            let margin = commandObj.margin || 'right';\r\n            let active = commandObj.active || false;\r\n            let pos = {\r\n                line: cursorPos.line,\r\n                column: cursorPos.column\r\n            };\r\n            pos.line += lineDelta;\r\n            if (prePos && pos.line === prePos.line) {\r\n                pos.column += columnDelta;\r\n            } else {\r\n                columnDelta = 0;\r\n            }\r\n            historyObj = this._insertContent(_text, pos);\r\n            historyArr.push(historyObj);\r\n            prePos = historyObj.cursorPos;\r\n            historyObj.margin = margin;\r\n            historyObj.active = active;\r\n            lineDelta += historyObj.cursorPos.line - historyObj.preCursorPos.line;\r\n            columnDelta += historyObj.cursorPos.column - historyObj.preCursorPos.column;\r\n            if (margin === 'right') {\r\n                this.cursor.addCursorPos(historyObj.cursorPos);\r\n            } else {\r\n                this.cursor.addCursorPos(historyObj.preCursorPos);\r\n            }\r\n            if (active) {\r\n                this.selecter.addRange({\r\n                    start: historyObj.preCursorPos,\r\n                    end: historyObj.cursorPos\r\n                });\r\n            }\r\n        });\r\n        return historyArr;\r\n    }\r\n    // 插入内容\r\n    _insertContent(text, cursorPos) {\r\n        let nowLineText = this.htmls[cursorPos.line - 1].text;\r\n        let originPos = {\r\n            line: cursorPos.line,\r\n            column: cursorPos.column\r\n        };\r\n        let nowColume = cursorPos.column;\r\n        let nowLine = cursorPos.line;\r\n        let newLine = nowLine;\r\n        let newColumn = nowColume;\r\n        this.tokenizer.onInsertContentBefore(nowLine);\r\n        this.lint.onInsertContentBefore(nowLine);\r\n        this.folder.onInsertContentBefore(Object.assign({}, originPos));\r\n        text = text.split(/\\r\\n|\\n/);\r\n        text = text.map((item) => {\r\n            item = {\r\n                lineId: this.lineId++,\r\n                text: item,\r\n                html: '',\r\n                width: 0,\r\n                tokens: null,\r\n                folds: null,\r\n                states: null\r\n            };\r\n            this.lineIdMap.set(item.lineId, item);\r\n            return item;\r\n        });\r\n        if (text.length > 1) { // 插入多行\r\n            newColumn = text[text.length - 1].text.length;\r\n            text[0].text = nowLineText.slice(0, nowColume) + text[0].text;\r\n            text[text.length - 1].text = text[text.length - 1].text + nowLineText.slice(nowColume);\r\n            this.htmls = this.htmls.slice(0, cursorPos.line - 1).concat(text).concat(this.htmls.slice(cursorPos.line));\r\n        } else { // 插入一行\r\n            newColumn += text[0].text.length;\r\n            text[0].text = nowLineText.slice(0, nowColume) + text[0].text + nowLineText.slice(cursorPos.column);\r\n            this.htmls.splice(cursorPos.line - 1, 1, text[0]);\r\n        }\r\n        newLine += text.length - 1;\r\n        this.setEditorData('maxLine', this.htmls.length);\r\n        this.folder.onInsertContentAfter({\r\n            line: newLine,\r\n            column: newColumn\r\n        });\r\n        this.lint.onInsertContentAfter(newLine);\r\n        this.tokenizer.onInsertContentAfter(newLine);\r\n        this.setLineWidth(text);\r\n        this.render(true);\r\n        if (this.foldMap.has(nowLine) && text.length > 1) {\r\n            this.unFold(nowLine);\r\n        }\r\n        let historyObj = {\r\n            type: Util.command.DELETE,\r\n            cursorPos: {\r\n                line: newLine,\r\n                column: newColumn\r\n            },\r\n            preCursorPos: {\r\n                line: nowLine,\r\n                column: nowColume\r\n            }\r\n        }\r\n        return historyObj;\r\n    }\r\n    deleteContent(keyCode, command) {\r\n        let historyArr = [];\r\n        let rangeList = [];\r\n        if (command) {\r\n            rangeList = command.map((item) => {\r\n                let obj = {\r\n                    start: item.preCursorPos,\r\n                    end: item.cursorPos,\r\n                    margin: item.margin,\r\n                    active: item.active,\r\n                }\r\n                let cursorPos = obj.margin === 'left' ? obj.start : obj.end;\r\n                return [obj, cursorPos];\r\n            });\r\n        } else {\r\n            this.cursor.multiCursorPos.forEach((item) => {\r\n                let range = this.selecter.getRangeByCursorPos(item);\r\n                if (range) {\r\n                    if (Util.comparePos(range.start, item) === 0) {\r\n                        range.margin = 'left';\r\n                    } else {\r\n                        range.margin = 'right';\r\n                    }\r\n                    rangeList.push([range, item]);\r\n                } else {\r\n                    rangeList.push(item);\r\n                }\r\n            });\r\n        }\r\n        historyArr = this._deleteMultiContent(rangeList, keyCode);\r\n        if (!command) { // 新增历史记录\r\n            historyArr.length && this.history.pushHistory(historyArr);\r\n        } else { // 撤销或重做操作后，更新历史记录\r\n            historyArr.serial = command.serial;\r\n            this.history.updateHistory(historyArr);\r\n            historyArr.map((item) => {\r\n                this.cursor.addCursorPos(item.cursorPos);\r\n            });\r\n        }\r\n        this.setNowCursorPos(this.cursor.multiCursorPos.get(0));\r\n        this.searcher.clearSearch();\r\n        this.fSearcher.refreshSearch();\r\n        return historyArr;\r\n    }\r\n    _deleteMultiContent(rangeList, keyCode) {\r\n        let that = this;\r\n        let historyArr = [];\r\n        let historyObj = null;\r\n        let prePos = null;\r\n        let lineDelta = 0;\r\n        let columnDelta = 0;\r\n        this.cursor.clearCursorPos();\r\n        rangeList.map((item) => {\r\n            if (item instanceof Array) {\r\n                _deleteRangePos(item[0], item[1]);\r\n            } else {\r\n                _deleteCursorPos(item);\r\n            }\r\n        });\r\n        return historyArr;\r\n\r\n        function _deleteCursorPos(cursorPos) {\r\n            let pos = {\r\n                line: cursorPos.line,\r\n                column: cursorPos.column\r\n            };\r\n            pos.line -= lineDelta;\r\n            if (prePos && pos.line === prePos.line) {\r\n                pos.column -= columnDelta;\r\n            } else {\r\n                columnDelta = 0;\r\n            }\r\n            historyObj = that._deleteContent(pos, keyCode);\r\n            historyObj.text && historyArr.push(historyObj);\r\n            prePos = historyObj.cursorPos;\r\n            lineDelta += historyObj.preCursorPos.line - prePos.line;\r\n            columnDelta += historyObj.preCursorPos.column - prePos.column;\r\n            that.cursor.addCursorPos({\r\n                line: prePos.line,\r\n                column: prePos.column\r\n            });\r\n        }\r\n\r\n        function _deleteRangePos(rangePos, cursorPos) {\r\n            let start = rangePos.start;\r\n            let end = rangePos.end;\r\n            start.line -= lineDelta;\r\n            end.line -= lineDelta;\r\n            if (prePos && start.line === prePos.line) {\r\n                start.column -= columnDelta;\r\n                if (start.line === end.line) {\r\n                    end.column -= columnDelta;\r\n                } else {\r\n                    columnDelta = 0;\r\n                }\r\n            } else {\r\n                columnDelta = 0;\r\n            }\r\n            historyObj = that._deleteContent(rangePos, keyCode);\r\n            historyObj.text && historyArr.push(historyObj);\r\n            prePos = historyObj.cursorPos;\r\n            lineDelta += historyObj.preCursorPos.line - prePos.line;\r\n            columnDelta += historyObj.preCursorPos.column - prePos.column;\r\n            that.cursor.addCursorPos({\r\n                line: prePos.line,\r\n                column: prePos.column\r\n            });\r\n        }\r\n    }\r\n    // 删除内容\r\n    _deleteContent(cursorPos, keyCode) {\r\n        let range = null;\r\n        let margin = keyCode === Util.keyCode.DELETE ? 'left' : 'right';\r\n        if (cursorPos.start && cursorPos.end) { //删除范围内的内容\r\n            range = cursorPos;\r\n            cursorPos = range.end;\r\n            margin = range.margin;\r\n        }\r\n        let start = null;\r\n        let startObj = this.htmls[cursorPos.line - 1];\r\n        let text = startObj.text;\r\n        let deleteText = '';\r\n        let rangeUuid = [];\r\n        let originPos = {\r\n            line: cursorPos.line,\r\n            column: cursorPos.column\r\n        };\r\n        let newLine = cursorPos.line;\r\n        let newColumn = cursorPos.column;\r\n        this.tokenizer.onDeleteContentBefore(cursorPos.line);\r\n        this.lint.onDeleteContentBefore(cursorPos.line);\r\n        this.folder.onDeleteContentBefore(Object.assign({}, cursorPos));\r\n        if (range) { // 删除选中区域\r\n            let end = range.end;\r\n            let endObj = this.htmls[end.line - 1];\r\n            start = range.start;\r\n            startObj = this.htmls[start.line - 1];\r\n            text = startObj.text;\r\n            deleteText = this.getRangeText(range.start, range.end);\r\n            if (start.line == 1 && end.line == this.maxLine) { //全选删除\r\n                rangeUuid = [this.maxWidthObj.lineId];\r\n                this.lineIdMap.clear();\r\n            } else {\r\n                rangeUuid = this.htmls.slice(start.line - 1, end.line).map((item) => {\r\n                    this.lineIdMap.delete(item.lineId);\r\n                    return item.lineId;\r\n                });\r\n            }\r\n            this.lineIdMap.set(startObj.lineId, startObj);\r\n            if (start.line == end.line) { // 单行选中\r\n                text = text.slice(0, start.column) + text.slice(end.column);\r\n                startObj.text = text;\r\n            } else { // 多行选中\r\n                text = text.slice(0, start.column);\r\n                startObj.text = text;\r\n                text = endObj.text;\r\n                text = text.slice(end.column);\r\n                startObj.text += text;\r\n                this.htmls.splice(start.line, end.line - start.line);\r\n            }\r\n            newLine = start.line;\r\n            newColumn = start.column;\r\n        } else if (Util.keyCode.DELETE == keyCode) { // 向后删除一个字符\r\n            if (cursorPos.column == text.length) { // 光标处于行尾\r\n                if (cursorPos.line < this.htmls.length) {\r\n                    this.lineIdMap.delete(this.htmls[cursorPos.line].lineId);\r\n                    text = startObj.text + this.htmls[cursorPos.line].text;\r\n                    this.htmls.splice(cursorPos.line, 1);\r\n                    deleteText = '\\n';\r\n                    originPos = {\r\n                        line: cursorPos.line - 1,\r\n                        column: 0\r\n                    };\r\n                }\r\n            } else {\r\n                deleteText = text[cursorPos.column];\r\n                text = text.slice(0, cursorPos.column) + text.slice(cursorPos.column + 1);\r\n                originPos = {\r\n                    line: cursorPos.line,\r\n                    column: cursorPos.column + 1\r\n                };\r\n            }\r\n            startObj.text = text;\r\n        } else { // 向前删除一个字符\r\n            if (cursorPos.column == 0) { // 光标处于行首\r\n                if (cursorPos.line > 1) {\r\n                    let column = this.htmls[cursorPos.line - 2].text.length;\r\n                    this.lineIdMap.delete(this.htmls[cursorPos.line - 2].lineId);\r\n                    text = this.htmls[cursorPos.line - 2].text + text;\r\n                    this.htmls.splice(cursorPos.line - 2, 1);\r\n                    deleteText = '\\n';\r\n                    newLine = cursorPos.line - 1;\r\n                    newColumn = column;\r\n                }\r\n            } else {\r\n                deleteText = text[cursorPos.column - 1];\r\n                text = text.slice(0, cursorPos.column - 1) + text.slice(cursorPos.column);\r\n                newColumn = cursorPos.column - 1;\r\n            }\r\n            startObj.text = text;\r\n        }\r\n        startObj.width = this.getStrWidth(startObj.text);\r\n        startObj.tokens = null;\r\n        startObj.folds = null;\r\n        startObj.states = null;\r\n        this.setEditorData('maxLine', this.htmls.length);\r\n        this.folder.onDeleteContentAfter({\r\n            line: newLine,\r\n            column: newColumn\r\n        });\r\n        this.lint.onDeleteContentAfter(newLine);\r\n        this.tokenizer.onDeleteContentAfter(newLine);\r\n        this.render(true);\r\n        // 更新最大文本宽度\r\n        if (startObj.width >= this.maxWidthObj.width) {\r\n            this.setEditorData('maxWidthObj', {\r\n                lineId: startObj.lineId,\r\n                text: startObj.text,\r\n                width: startObj.width\r\n            });\r\n        } else if (rangeUuid.indexOf(this.maxWidthObj.lineId) > -1) {\r\n            this.setMaxWidth();\r\n        }\r\n        let historyObj = {\r\n            type: Util.command.INSERT,\r\n            cursorPos: {\r\n                line: newLine,\r\n                column: newColumn\r\n            },\r\n            preCursorPos: {\r\n                line: originPos.line,\r\n                column: originPos.column\r\n            },\r\n            text: deleteText,\r\n            keyCode: keyCode,\r\n            margin: margin,\r\n            active: range && range.active\r\n        };\r\n        return historyObj;\r\n    }\r\n    moveLineUp(command) {\r\n        this.moveLine(command, 'up');\r\n    }\r\n    moveLineDown(command) {\r\n        this.moveLine(command, 'down');\r\n    }\r\n    moveLine(command, direct) {\r\n        let that = this;\r\n        let cursorPosList = [];\r\n        let historyPosList = [];\r\n        let index = 0;\r\n        if (command) {\r\n            cursorPosList = command.cursorPos;\r\n            cursorPosList = cursorPosList.map((item) => {\r\n                return this.cursor.addCursorPos(item);\r\n            });\r\n        } else {\r\n            cursorPosList = this.cursor.multiCursorPos.toArray();\r\n        }\r\n        while (index < cursorPosList.length) {\r\n            let line = cursorPosList[index].line;\r\n            _moveLine(cursorPosList[index]);\r\n            while (index < cursorPosList.length && cursorPosList[index].line === line) {\r\n                if (direct === 'down') {\r\n                    cursorPosList[index].line++;\r\n                } else {\r\n                    cursorPosList[index].line--;\r\n                }\r\n                historyPosList.push({\r\n                    line: cursorPosList[index].line,\r\n                    column: cursorPosList[index].column\r\n                });\r\n                index++;\r\n            }\r\n        }\r\n        let historyObj = {\r\n            type: direct === 'down' ? Util.command.MOVEUP : Util.command.MOVEDOWN,\r\n            cursorPos: historyPosList\r\n        }\r\n        if (!command) { // 新增历史记录\r\n            this.history.pushHistory(historyObj);\r\n        } else { // 撤销或重做操作后，更新历史记录\r\n            this.history.updateHistory(historyObj);\r\n        }\r\n        this.searcher.refreshSearch();\r\n        this.fSearcher.refreshSearch();\r\n\r\n        function _moveLine(cursorPos) {\r\n            let upLine = cursorPos.line - (direct === 'down' ? 0 : 1);\r\n            let downLine = upLine + 1;\r\n            let upText = that.htmls[upLine - 1].text;\r\n            let downText = that.htmls[downLine - 1].text;\r\n            let start = {\r\n                line: upLine,\r\n                column: 0\r\n            };\r\n            that._deleteContent({\r\n                start: start,\r\n                end: {\r\n                    line: downLine,\r\n                    column: downText.length\r\n                }\r\n            });\r\n            that._insertContent(downText + '\\n' + upText, start);\r\n        }\r\n    }\r\n    // 向上复制一行\r\n    copyLineUp(command) {\r\n        this.copyLine(command, 'up');\r\n    }\r\n    // 向下复制一行\r\n    copyLineDown(command) {\r\n        this.copyLine(command, 'down');\r\n    }\r\n    copyLine(command, direct) {\r\n        let originList = [];\r\n        let cursorPosList = [];\r\n        let historyPosList = [];\r\n        let prePos = null;\r\n        let texts = [];\r\n        let index = 0;\r\n        if (command) {\r\n            originList = command.cursorPos;\r\n        } else {\r\n            originList = this.cursor.multiCursorPos.toArray();\r\n        }\r\n        originList.map((item) => {\r\n            if (!prePos || prePos.line !== item.line) {\r\n                let text = this.htmls[item.line - 1].text;\r\n                cursorPosList.push({\r\n                    line: item.line,\r\n                    column: text.length\r\n                });\r\n                texts.push('\\n' + text);\r\n            }\r\n            prePos = item;\r\n        });\r\n        this._insertMultiContent(texts, cursorPosList).map((item) => {\r\n            let originLine = originList[index].line;\r\n            let line = direct === 'down' ? item.cursorPos.line : item.cursorPos.line - 1;\r\n            while (index < originList.length && originList[index].line === originLine) {\r\n                originList[index].line = line;\r\n                historyPosList.push({\r\n                    line: line,\r\n                    column: originList[index].column\r\n                });\r\n                index++;\r\n            }\r\n        });\r\n        let historyObj = {\r\n            type: direct === 'down' ? Util.command.DELETE_COPY_UP : Util.command.DELETE_COPY_DOWN,\r\n            cursorPos: historyPosList\r\n        }\r\n        if (!command) { // 新增历史记录\r\n            this.history.pushHistory(historyObj);\r\n        } else { // 撤销或重做操作后，更新历史记录\r\n            this.history.updateHistory(historyObj);\r\n        }\r\n        this.cursor.clearCursorPos();\r\n        historyPosList.map((item) => {\r\n            this.cursor.addCursorPos(item);\r\n        });\r\n        this.searcher.refreshSearch();\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    // 删除上面一行\r\n    deleteCopyLineUp(command) {\r\n        this.deleteCopyLine(command, 'up');\r\n    }\r\n    // 删除下面一行\r\n    deleteCopyLineDown(command) {\r\n        this.deleteCopyLine(command, 'down');\r\n    }\r\n    deleteCopyLine(command, direct) {\r\n        let originList = [];\r\n        let cursorPosList = [];\r\n        let historyPosList = [];\r\n        let prePos = null;\r\n        let index = 0;\r\n        if (command) {\r\n            originList = command.cursorPos;\r\n        } else {\r\n            originList = this.cursor.multiCursorPos.toArray();\r\n        }\r\n        originList.map((item) => {\r\n            if (!prePos || prePos.line !== item.line) {\r\n                let upLine = direct === 'down' ? item.line : item.line - 1;\r\n                let downLine = upLine + 1;\r\n                let upText = this.htmls[upLine - 1].text;\r\n                let downText = this.htmls[downLine - 1].text;\r\n                let range = {\r\n                    start: {\r\n                        line: upLine,\r\n                        column: upText.length\r\n                    },\r\n                    end: {\r\n                        line: downLine,\r\n                        column: downText.length\r\n                    }\r\n                };\r\n                cursorPosList.push([range, item]);\r\n            }\r\n            prePos = item;\r\n        });\r\n        this._deleteMultiContent(cursorPosList).map((item) => {\r\n            let originLine = originList[index].line;\r\n            let line = item.cursorPos.line;\r\n            while (index < originList.length && originList[index].line === originLine) {\r\n                originList[index].line = line;\r\n                historyPosList.push({\r\n                    line: line,\r\n                    column: originList[index].column\r\n                });\r\n                index++;\r\n            }\r\n        });\r\n        let historyObj = {\r\n            type: direct === 'down' ? Util.command.COPY_UP : Util.command.COPY_DOWN,\r\n            cursorPos: historyPosList\r\n        }\r\n        if (!command) { // 新增历史记录\r\n            this.history.pushHistory(historyObj);\r\n        } else { // 撤销或重做操作后，更新历史记录\r\n            this.history.updateHistory(historyObj);\r\n        }\r\n        this.cursor.clearCursorPos();\r\n        historyPosList.map((item) => {\r\n            this.cursor.addCursorPos(item);\r\n        });\r\n        this.searcher.refreshSearch();\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    // 删除当前行\r\n    deleteLine() {\r\n        let preItem = null;\r\n        let ranges = [];\r\n        this.cursor.multiCursorPos.forEach((item) => {\r\n            let range = this.selecter.getRangeByCursorPos(item);\r\n            let start = null;\r\n            if (range) {\r\n                if (Util.comparePos(range.start, item) === 0) {\r\n                    range.margin = 'left';\r\n                } else {\r\n                    range.margin = 'right';\r\n                }\r\n                ranges.push([range, item]);\r\n                return;\r\n            }\r\n            if (preItem && item.line === preItem.line) {\r\n                return;\r\n            }\r\n            if (item.line > 1) {\r\n                start = {\r\n                    line: item.line - 1,\r\n                    column: this.htmls[item.line - 2].text.length\r\n                }\r\n            } else {\r\n                start = {\r\n                    line: item.line,\r\n                    column: 0\r\n                }\r\n            }\r\n            range = {\r\n                start: start,\r\n                end: {\r\n                    line: item.line,\r\n                    column: this.htmls[item.line - 1].text.length\r\n                },\r\n                margin: 'right',\r\n                active: false\r\n            };\r\n            ranges.push([range, item]);\r\n            preItem = item;\r\n        });\r\n        this.history.pushHistory(this._deleteMultiContent(ranges));\r\n        this.searcher.clearSearch();\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    replace(text, ranges, command) {\r\n        let historyObj = null;\r\n        let historyRnageList = [];\r\n        let deleteText = this.getRangeText(ranges.peek().start, ranges.peek().end);\r\n        let direct = ranges.length > 1 && Util.comparePos(ranges[0].start, ranges[1].start) < 0 ? 'asc' : 'desc';\r\n        for (let i = ranges.length - 1; i >= 0; i--) {\r\n            let item = ranges[i];\r\n            let end = null;\r\n            deleteText && this._deleteContent({\r\n                start: item.start,\r\n                end: item.end\r\n            });\r\n            if (text) {\r\n                historyObj = this._insertContent(text, item.start);\r\n                end = historyObj.cursorPos;\r\n            } else {\r\n                end = item.start;\r\n            }\r\n            historyRnageList.push({\r\n                start: item.start,\r\n                end: end\r\n            });\r\n            if (direct === 'asc') {\r\n                i == 0 && this.cursor.setCursorPos(end);\r\n            } else {\r\n                i == ranges.length - 1 && this.cursor.setCursorPos(end);\r\n            }\r\n        }\r\n        historyObj = {\r\n            type: Util.command.REPLACE,\r\n            cursorPos: historyRnageList,\r\n            text: deleteText\r\n        }\r\n        if (!command) { // 新增历史记录\r\n            this.history.pushHistory(historyObj);\r\n        } else { // 撤销或重做操作后，更新历史记录\r\n            this.history.updateHistory(historyObj);\r\n        }\r\n        this.searcher.refreshSearch();\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    // 获取选中范围内的文本\r\n    getRangeText(start, end) {\r\n        var text = this.htmls[start.line - 1].text;\r\n        if (start.line != end.line) {\r\n            let arr = [];\r\n            text = text.slice(start.column);\r\n            arr = this.htmls.slice(start.line, end.line - 1);\r\n            arr = arr.map((item) => {\r\n                return item.text;\r\n            });\r\n            text += arr.length ? '\\n' + arr.join('\\n') : '';\r\n            text += '\\n' + this.htmls[end.line - 1].text.slice(0, end.column);\r\n        } else {\r\n            text = text.slice(start.column, end.column);\r\n        }\r\n        return text;\r\n    }\r\n    // 获取待复制的文本\r\n    getCopyText(cut) {\r\n        let text = '';\r\n        let preItem = null;\r\n        let ranges = [];\r\n        this.cursor.multiCursorPos.forEach((item) => {\r\n            let range = this.selecter.getRangeByCursorPos(item);\r\n            let start = null;\r\n            if (range) {\r\n                ranges.push([range, item]);\r\n                return;\r\n            }\r\n            if (preItem && item.line === preItem.line) {\r\n                return;\r\n            }\r\n            if (item.line > 1) {\r\n                start = {\r\n                    line: item.line - 1,\r\n                    column: this.htmls[item.line - 2].text.length\r\n                }\r\n            } else {\r\n                start = {\r\n                    line: item.line,\r\n                    column: 0\r\n                }\r\n            }\r\n            range = {\r\n                start: start,\r\n                end: {\r\n                    line: item.line,\r\n                    column: this.htmls[item.line - 1].text.length\r\n                }\r\n            };\r\n            ranges.push([range, item]);\r\n            preItem = item;\r\n        });\r\n        ranges.map((item) => {\r\n            let str = this.getRangeText(item[0].start, item[0].end);\r\n            text = str[0] === '\\n' ? text += str : text += '\\n' + str;\r\n        });\r\n        if (cut) {\r\n            this.history.pushHistory(this._deleteMultiContent(ranges));\r\n            this.searcher.clearSearch();\r\n            this.fSearcher.refreshSearch();\r\n        }\r\n        return text.slice(1);\r\n    }\r\n    // 获取待搜索的文本\r\n    getToSearchConfig() {\r\n        if (this.selecter.ranges.size > 1) {\r\n            return null;\r\n        }\r\n        let wholeWord = false;\r\n        let searchText = '';\r\n        if (this.selecter.ranges.size) {\r\n            let range = this.selecter.getRangeByCursorPos(this.nowCursorPos);\r\n            if (range) {\r\n                searchText = this.getRangeText(range.start, range.end)\r\n            }\r\n        } else {\r\n            searchText = this.getNowWord().text;\r\n            wholeWord = true;\r\n        }\r\n        return {\r\n            text: searchText,\r\n            wholeWord: wholeWord,\r\n            ignoreCase: wholeWord,\r\n        }\r\n    }\r\n    getNowWord() {\r\n        let text = this.htmls[this.nowCursorPos.line - 1].text;\r\n        let str = '';\r\n        let index = this.nowCursorPos.column;\r\n        let sReg = regs.word;\r\n        let startColumn = index;\r\n        let endColumn = index;\r\n        if (index && text[index - 1].match(regs.dWord)) {\r\n            sReg = regs.dWord;\r\n        }\r\n        while (index > 0 && text[index - 1].match(sReg)) {\r\n            str = text[index - 1] + str;\r\n            startColumn = index;\r\n            index--;\r\n        }\r\n        index = this.nowCursorPos.column;\r\n        while (index < text.length && text[index].match(sReg)) {\r\n            str += text[index];\r\n            endColumn = index;\r\n            index++;\r\n        }\r\n        return {\r\n            text: str,\r\n            range: {\r\n                start: {\r\n                    line: this.nowCursorPos.line,\r\n                    column: startColumn\r\n                },\r\n                end: {\r\n                    line: this.nowCursorPos.line,\r\n                    column: endColumn\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 16:13:15\r\n * @Description: \r\n */\r\nimport Util from '@/common/Util';\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.initProperties(editor, context);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, [\r\n            'nowCursorPos',\r\n            'cursor',\r\n            'selecter',\r\n            'searcher',\r\n            'fSearcher',\r\n            'history',\r\n            'searchWord',\r\n            'openSearch',\r\n        ]);\r\n        Util.defineProperties(this, context, [\r\n            'htmls',\r\n            'insertContent',\r\n            'deleteContent',\r\n            'moveLineUp',\r\n            'moveLineDown',\r\n            'copyLineUp',\r\n            'copyLineDown',\r\n            'deleteLine'\r\n        ]);\r\n        this.setEditorData = (prop, value) => {\r\n            editor.setData(prop, value);\r\n        }\r\n    }\r\n    onKeyDown(e) {\r\n        let that = this;\r\n        if (e.ctrlKey && e.shiftKey) {\r\n            e.preventDefault();\r\n            switch (e.keyCode) {\r\n                case 37: //ctrl+shift+left\r\n                    this.selecter.select('left', true);\r\n                    break;\r\n                case 38: //ctrl+shift+up\r\n                    this.moveLineUp();\r\n                    break;\r\n                case 39: //ctrl+shift+right\r\n                    this.selecter.select('right', true);\r\n                    break;\r\n                case 40: //ctrl+shift+down\r\n                    this.moveLineDown();\r\n                    break;\r\n                case 68: //ctrl+shift+D\r\n                    this.copyLineUp();\r\n                    break;\r\n                case 75: //ctrl+shift+K\r\n                    this.deleteLine();\r\n                    break;\r\n                case 76: //ctrl+alt+L\r\n                    e.preventDefault();\r\n                    this.cursor.addCursorLineEnds();\r\n                    break;\r\n            }\r\n            return false;\r\n        } else if (e.ctrlKey && e.altKey) {\r\n            switch (e.keyCode) {\r\n                case 38: //ctrl+alt+up\r\n                    e.preventDefault();\r\n                    this.cursor.addCursorAbove();\r\n                    break;\r\n                case 40: //ctrl+alt+down\r\n                    e.preventDefault();\r\n                    this.cursor.addCursorBelow();\r\n                    break;\r\n            }\r\n        } else if (e.altKey && e.shiftKey) {\r\n            switch (e.keyCode) {\r\n                case 40: //alt+shift+down\r\n                    e.preventDefault();\r\n                    this.copyLineDown();\r\n                    break;\r\n            }\r\n        } else if (e.ctrlKey) {\r\n            switch (e.keyCode) {\r\n                case 37: //left arrow\r\n                    _moveCursor('left', true);\r\n                    break;\r\n                case 39: //right arrow\r\n                    _moveCursor('right', true);\r\n                    break;\r\n                case 65: //ctrl+A,全选\r\n                    e.preventDefault();\r\n                    this.selecter.selectAll();\r\n                    break;\r\n                case 68: //ctrl+D，搜素\r\n                    e.preventDefault();\r\n                    this.searchWord();\r\n                    break;\r\n                case 70: //ctrl+F，搜素\r\n                    e.preventDefault();\r\n                    this.openSearch();\r\n                    break;\r\n                case 72: //ctrl+H，搜素替换\r\n                    e.preventDefault();\r\n                    this.openSearch(true);\r\n                    break;\r\n                case 90: //ctrl+Z，撤销\r\n                case 122:\r\n                    e.preventDefault();\r\n                    this.history.undo();\r\n                    break;\r\n                case 89: //ctrl+Y，重做\r\n                case 121:\r\n                    e.preventDefault();\r\n                    this.history.redo();\r\n                    break;\r\n            }\r\n        } else if (e.shiftKey) {\r\n            switch (e.keyCode) {\r\n                case 37: //left arrow\r\n                    this.selecter.select('left');\r\n                    break;\r\n                case 38: //up arrow\r\n                    this.selecter.select('up');\r\n                    break;\r\n                case 39: //right arrow\r\n                    this.selecter.select('right');\r\n                    break;\r\n                case 40: //down arrow\r\n                    this.selecter.select('down');\r\n                    break;\r\n            }\r\n        } else {\r\n            switch (e.keyCode) {\r\n                case 9: //tab键\r\n                    e.preventDefault();\r\n                    this.insertContent('\\t');\r\n                    break;\r\n                case 37: //left arrow\r\n                    _moveCursor('left');\r\n                    break;\r\n                case 35: //end键\r\n                    _moveCursor('end');\r\n                    break;\r\n                case 36: //home键\r\n                    _moveCursor('home');\r\n                    break;\r\n                case 38: //up arrow\r\n                    _moveCursor('up');\r\n                    break;\r\n                case 39: //right arrow\r\n                    _moveCursor('right');\r\n                    break;\r\n                case 40: //down arrow\r\n                    _moveCursor('down');\r\n                    break;\r\n                case Util.keyCode.DELETE: //delete\r\n                    this.deleteContent(Util.keyCode.DELETE);\r\n                    break;\r\n                case Util.keyCode.BACKSPACE: //backspace\r\n                    this.deleteContent(Util.keyCode.BACKSPACE);\r\n                    break;\r\n            }\r\n        }\r\n\r\n        function _moveCursor(direct, wholeWord) {\r\n            //ctrl+d后，第一次移动光标只是取消选中状态\r\n            if (!that.selecter.getRangeByCursorPos(that.nowCursorPos)) {\r\n                that.cursor.multiCursorPos.forEach((cursorPos) => {\r\n                    that.cursor.moveCursor(cursorPos, direct, wholeWord);\r\n                });\r\n            }\r\n            that.searcher.clearSearch();\r\n            that.fSearcher.clearNow();\r\n        }\r\n    }\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-editor-top-bar\",style:({height:_vm.height+'px'}),on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('div',{staticClass:\"bar-left\"},[_c('div',{staticClass:\"bar-item clickable\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('editMenuVisible')}}},[_c('span',[_vm._v(\"Edit\")]),_c('Menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.editMenuVisible),expression:\"editMenuVisible\"}],attrs:{\"checkable\":false,\"menuList\":_vm.editMenuList,\"styles\":{left: 0, top: _vm.height+'px'}},on:{\"change\":_vm.onEditMenuChange}})],1),_c('div',{staticClass:\"bar-item clickable\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('selectionMenuVisible')}}},[_c('span',[_vm._v(\"Selection\")]),_c('Menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectionMenuVisible),expression:\"selectionMenuVisible\"}],attrs:{\"checkable\":false,\"menuList\":_vm.selectionMenuList,\"styles\":{left: 0, top: _vm.height+'px'}},on:{\"change\":_vm.onSelectionMenuChange}})],1)]),_c('div',{staticClass:\"bar-right\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-editor-menu\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();}}},_vm._l((_vm.menuList),function(group){return _c('div',{staticClass:\"my-editor-menu-group\"},_vm._l((group),function(item){return _c('div',{staticClass:\"my-editor-menu-item\",class:{checked: _vm.checkable && item.checked, disabled: item.disabled},on:{\"mousedown\":function($event){return _vm.onClick(item, group)}}},[_c('div',{staticClass:\"my-editor-menu-content\"},[_vm._v(_vm._s(item.name))]),(item.shortcut)?_c('div',{staticClass:\"my-editor-menu-shortcut\"},[_vm._v(_vm._s(item.shortcut))]):_vm._e()])}),0)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div :style=\"styles\" @mousedown.stop class=\"my-editor-menu\">\r\n\t\t<div class=\"my-editor-menu-group\" v-for=\"group in menuList\">\r\n\t\t\t<div\r\n\t\t\t\t:class=\"{checked: checkable && item.checked, disabled: item.disabled}\"\r\n\t\t\t\t@mousedown=\"onClick(item, group)\"\r\n\t\t\t\tclass=\"my-editor-menu-item\"\r\n\t\t\t\tv-for=\"item in group\"\r\n\t\t\t>\r\n\t\t\t\t<div class=\"my-editor-menu-content\">{{item.name}}</div>\r\n\t\t\t\t<div class=\"my-editor-menu-shortcut\" v-if=\"item.shortcut\">{{item.shortcut}}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'Menu',\r\n    props: {\r\n        menuList: {\r\n            type: Array,\r\n            default: []\r\n        },\r\n        styles: {\r\n            type: Object\r\n        },\r\n        checkable: {\r\n            type: Boolean,\r\n            default: true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n        }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n        onClick(item, group) {\r\n            if (item.disabled) {\r\n                return;\r\n            }\r\n            group.map((item) => {\r\n                item.checked = false;\r\n            });\r\n            item.checked = true;\r\n            this.$emit('change', item);\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Menu.vue?vue&type=template&id=717ef36d&\"\nimport script from \"./Menu.vue?vue&type=script&lang=js&\"\nexport * from \"./Menu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-09 21:38:38\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div :style=\"{height:height+'px'}\" @contextmenu.stop.prevent class=\"my-editor-top-bar\">\r\n\t\t<div class=\"bar-left\">\r\n\t\t\t<div @mousedown.stop=\"showMemu('editMenuVisible')\" class=\"bar-item clickable\">\r\n\t\t\t\t<span>Edit</span>\r\n\t\t\t\t<Menu :checkable=\"false\" :menuList=\"editMenuList\" :styles=\"{left: 0, top: height+'px'}\" @change=\"onEditMenuChange\" v-show=\"editMenuVisible\"></Menu>\r\n\t\t\t</div>\r\n\t\t\t<div @mousedown.stop=\"showMemu('selectionMenuVisible')\" class=\"bar-item clickable\">\r\n\t\t\t\t<span>Selection</span>\r\n\t\t\t\t<Menu :checkable=\"false\" :menuList=\"selectionMenuList\" :styles=\"{left: 0, top: height+'px'}\" @change=\"onSelectionMenuChange\" v-show=\"selectionMenuVisible\"></Menu>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"bar-right\"></div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport Util from '@/common/Util';\r\nimport Menu from './Menu';\r\nexport default {\r\n    name: 'StatusBar',\r\n    props: {\r\n        height: {\r\n            type: Number,\r\n            default: 25\r\n        },\r\n    },\r\n    components: {\r\n        Menu\r\n    },\r\n    data() {\r\n        return {\r\n            editMenuVisible: false,\r\n            selectionMenuVisible: false,\r\n            editMenuList: [\r\n                [{\r\n                    name: 'Undo',\r\n                    op: 'undo',\r\n                    shortcut: 'Ctrl+Z'\r\n                }, {\r\n                    name: 'Redo',\r\n                    op: 'redo',\r\n                    shortcut: 'Ctrl+Y'\r\n                }],\r\n                [{\r\n                    name: 'Cut',\r\n                    op: 'cut',\r\n                    shortcut: 'Ctrl+X'\r\n                }, {\r\n                    name: 'Copy',\r\n                    op: 'copy',\r\n                    shortcut: 'Ctrl+C'\r\n                }, {\r\n                    name: 'Paste',\r\n                    op: 'paste',\r\n                    shortcut: 'Ctrl+V'\r\n                }],\r\n                [{\r\n                    name: 'Delete Line',\r\n                    op: 'deleteLine',\r\n                    shortcut: 'Ctrl+Shift+K'\r\n                }],\r\n                [{\r\n                    name: 'Find',\r\n                    op: 'find',\r\n                    shortcut: 'Ctrl+F'\r\n                }, {\r\n                    name: 'Replace',\r\n                    op: 'replace',\r\n                    shortcut: 'Ctrl+H'\r\n                }]\r\n            ],\r\n            selectionMenuList: [\r\n                [{\r\n                    name: 'Select All',\r\n                    op: 'selectAll',\r\n                    shortcut: 'Ctrl+A'\r\n                }],\r\n                [{\r\n                    name: 'Copy Line Up',\r\n                    op: 'copyLineUp',\r\n                    shortcut: 'Ctrl+Shift+D'\r\n                }, {\r\n                    name: 'Copy Line Down',\r\n                    op: 'copyLineDown',\r\n                    shortcut: 'Alt+Shift+Down'\r\n                }, {\r\n                    name: 'Move Line Up',\r\n                    op: 'moveLineUp',\r\n                    shortcut: 'Ctrl+Shift+Up'\r\n                }, {\r\n                    name: 'Move Line Down',\r\n                    op: 'moveLineDown',\r\n                    shortcut: 'Ctrl+Shift+Down'\r\n                }],\r\n                [{\r\n                    name: 'Add Cursor Above',\r\n                    op: 'addCursorAbove',\r\n                    shortcut: 'Ctrl+Alt+Up'\r\n                }, {\r\n                    name: 'Add Cursor Below',\r\n                    op: 'addCursorBelow',\r\n                    shortcut: 'Ctrl+Alt+Down'\r\n                }, {\r\n                    name: 'Add Cursor to Line Ends',\r\n                    op: 'addCursorLineEnds',\r\n                    shortcut: 'Ctrl+Shift+L'\r\n                }, {\r\n                    name: 'Add Next Occurence',\r\n                    op: 'addNextOccurence',\r\n                    shortcut: 'Ctrl+D'\r\n                }, {\r\n                    name: 'Add Previous Occurence',\r\n                    op: 'addPrevOccurence',\r\n                    shortcut: 'Shift+D'\r\n                }, {\r\n                    name: 'Select All Occurence',\r\n                    op: 'selectAllOccurence',\r\n                }],\r\n                [{\r\n                    name: 'Switch Alt+Click to Multi-Cursor',\r\n                    op: 'switchMultiKeyCode',\r\n                    keyCode: 'ctrl'\r\n                }]\r\n            ]\r\n        }\r\n    },\r\n    created() {\r\n\r\n    },\r\n    methods: {\r\n        initData(context) {\r\n            this.context = context;\r\n        },\r\n        showMemu(prop) {\r\n            this.closeAllMenu();\r\n            this[prop] = true;\r\n        },\r\n        closeAllMenu() {\r\n            this.editMenuVisible = false;\r\n            this.selectionMenuVisible = false;\r\n        },\r\n        onEditMenuChange(item) {\r\n            let $parent = this.$parent;\r\n            switch (item.op) {\r\n                case 'undo':\r\n                    $parent.history.undo();\r\n                    break;\r\n                case 'redo':\r\n                    $parent.history.redo();\r\n                    break;\r\n                case 'cut':\r\n                    Util.writeClipboard(this.context.getCopyText(true));\r\n                    break;\r\n                case 'copy':\r\n                    Util.writeClipboard(this.context.getCopyText());\r\n                    break;\r\n                case 'paste':\r\n                    Util.readClipboard().then((text) => {\r\n                        this.context.insertContent(text);\r\n                    });\r\n                    break;\r\n                case 'deleteLine':\r\n                    this.context.deleteLine();\r\n                    break;\r\n                case 'find':\r\n                    $parent.openSearch();\r\n                    break;\r\n                case 'replace':\r\n                    $parent.openSearch(true);\r\n                    break;\r\n            }\r\n            $parent.focus();\r\n            this.editMenuVisible = false;\r\n        },\r\n        onSelectionMenuChange(item) {\r\n            let $parent = this.$parent;\r\n            switch (item.op) {\r\n                case 'selectAll':\r\n                    $parent.selecter.selectAll();\r\n                    break;\r\n                case 'copyLineUp':\r\n                    this.context.copyLineUp();\r\n                    break;\r\n                case 'copyLineDown':\r\n                    this.context.copyLineDown();\r\n                    break;\r\n                case 'moveLineUp':\r\n                    this.context.moveLineUp();\r\n                    break;\r\n                case 'moveLineDown':\r\n                    this.context.moveLineDown();\r\n                    break;\r\n                case 'addCursorAbove':\r\n                    $parent.cursor.addCursorAbove();\r\n                    break;\r\n                case 'addCursorBelow':\r\n                    $parent.cursor.addCursorBelow();\r\n                    break;\r\n                case 'addCursorLineEnds':\r\n                    $parent.cursor.addCursorLineEnds();\r\n                    break;\r\n                case 'addNextOccurence':\r\n                    $parent.searchWord('next');\r\n                    break;\r\n                case 'addPrevOccurence':\r\n                    $parent.searchWord('up');\r\n                    break;\r\n                case 'selectAllOccurence':\r\n                    $parent.selecter.selectAllOccurence();\r\n                    break;\r\n                case 'switchMultiKeyCode':\r\n                    $parent.cursor.switchMultiKeyCode();\r\n                    item.keyCode = $parent.cursor.multiKeyCode;\r\n                    item.name = `Switch ${item.keyCode === 'alt' ? 'Ctrl' : 'Alt'}+Click to Multi-Cursor`;\r\n                    break;\r\n            }\r\n            $parent.focus();\r\n            this.selectionMenuVisible = false;\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MenuBar.vue?vue&type=template&id=50d244a6&\"\nimport script from \"./MenuBar.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-editor-status-bar\",style:({height:_vm.height+'px'}),on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('div',{staticClass:\"bar-left\"},[_c('div',{staticClass:\"bar-item\"},[_c('span',[_vm._v(\"Line \"+_vm._s(_vm.line)+\", Column \"+_vm._s(_vm.column))])])]),_c('div',{staticClass:\"bar-right\"},[_c('div',{staticClass:\"bar-item clickable\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showTabsize.apply(null, arguments)}}},[_c('span',[_vm._v(\"Tab Size:\"+_vm._s(_vm._tabSize))]),_c('Menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tabsizeVisible),expression:\"tabsizeVisible\"}],attrs:{\"menuList\":_vm.tabSizeList,\"styles\":{right: 0, bottom: _vm.height+'px'}},on:{\"change\":_vm.onTabsizeChange}})],1),_c('div',{staticClass:\"bar-item clickable\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showLanguage.apply(null, arguments)}}},[_c('span',[_vm._v(_vm._s(_vm._language))]),_c('Menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.languageVisible),expression:\"languageVisible\"}],attrs:{\"menuList\":_vm.languageList,\"styles\":{right: 0, bottom: _vm.height+'px'}},on:{\"change\":_vm.onLnaguageChange}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-09 21:38:38\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div :style=\"{height:height+'px'}\" @contextmenu.stop.prevent class=\"my-editor-status-bar\">\r\n\t\t<div class=\"bar-left\">\r\n\t\t\t<div class=\"bar-item\">\r\n\t\t\t\t<span>Line {{line}}, Column {{column}}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"bar-right\">\r\n\t\t\t<div @mousedown.stop=\"showTabsize\" class=\"bar-item clickable\">\r\n\t\t\t\t<span>Tab Size:{{_tabSize}}</span>\r\n\t\t\t\t<Menu :menuList=\"tabSizeList\" :styles=\"{right: 0, bottom: height+'px'}\" @change=\"onTabsizeChange\" v-show=\"tabsizeVisible\"></Menu>\r\n\t\t\t</div>\r\n\t\t\t<div @mousedown.stop=\"showLanguage\" class=\"bar-item clickable\">\r\n\t\t\t\t<span>{{_language}}</span>\r\n\t\t\t\t<Menu :menuList=\"languageList\" :styles=\"{right: 0, bottom: height+'px'}\" @change=\"onLnaguageChange\" v-show=\"languageVisible\"></Menu>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport Menu from './Menu';\r\nexport default {\r\n    name: 'StatusBar',\r\n    props: {\r\n        height: {\r\n            type: Number,\r\n            default: 25\r\n        },\r\n        line: {\r\n            type: Number,\r\n            default: 1\r\n        },\r\n        column: {\r\n            type: Number,\r\n            default: 1\r\n        },\r\n        language: {\r\n            type: String,\r\n            default: 'JavaScript'\r\n        },\r\n        tabSize: {\r\n            type: Number,\r\n            default: 4\r\n        }\r\n    },\r\n    components: {\r\n        Menu\r\n    },\r\n    data() {\r\n        return {\r\n            _tabSize: 0,\r\n            _language: '',\r\n            tabsizeVisible: false,\r\n            languageVisible: false,\r\n            tabSizeList: [[]],\r\n            languageList: [[{ name: 'JavaScript' }, { name: 'HTML' }, { name: 'CSS' }]]\r\n        }\r\n    },\r\n    created() {\r\n        for (let i = 1; i <= 8; i++) {\r\n            this.tabSizeList[0].push({\r\n                name: `Tab Width：${i}`,\r\n                size: i\r\n            });\r\n        }\r\n        this._tabSize = this.tabSize;\r\n        this._language = this.language;\r\n        this.setDefault();\r\n    },\r\n    methods: {\r\n        setDefault() {\r\n            this.tabSizeList[0].map((item) => {\r\n                item.checked = item.size == this._tabSize;\r\n            });\r\n            this.languageList[0].map((item) => {\r\n                item.checked = item.name == this._language;\r\n            });\r\n        },\r\n        showTabsize() {\r\n            let visible = this.tabsizeVisible;\r\n            this.closeAllMenu();\r\n            this.tabsizeVisible = !visible;\r\n        },\r\n        showLanguage() {\r\n            let visible = this.languageVisible;\r\n            this.closeAllMenu();\r\n            this.languageVisible = !visible;\r\n        },\r\n        closeAllMenu() {\r\n            this.languageVisible = false;\r\n            this.tabsizeVisible = false;\r\n        },\r\n        onTabsizeChange(item) {\r\n            if (this._tabSize != item.size) {\r\n                this._tabSize = item.size;\r\n                this.$emit('update:tabSize', item.size);\r\n            }\r\n            this.tabsizeVisible = false;\r\n        },\r\n        onLnaguageChange(item) {\r\n            if (this._language != item.name) {\r\n                this._language = item.name;\r\n                this.$emit('update:language', item.name);\r\n            }\r\n            this.languageVisible = false;\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StatusBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StatusBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StatusBar.vue?vue&type=template&id=1575cfbc&\"\nimport script from \"./StatusBar.vue?vue&type=script&lang=js&\"\nexport * from \"./StatusBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-editor-search\",on:{\"contextmenu\":[function($event){$event.preventDefault();},function($event){$event.stopPropagation();}],\"mousedown\":function($event){$event.stopPropagation();},\"selectstart\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"my-editor-search-left\"},[_c('span',{staticClass:\"iconfont\",staticStyle:{\"font-size\":\"14px\"},attrs:{\"title\":\"Toggle Replace mode\"},on:{\"click\":_vm.showReplace}},[_vm._v(_vm._s(_vm.replaceVisible?'':''))])]),_c('div',{staticStyle:{\"flex-grow\":\"1\"}},[_c('div',{staticClass:\"my-editor-search-top\"},[_c('div',{staticClass:\"my-editor-search-input\",class:{'active-border':_vm.input1Focus}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchText),expression:\"searchText\"}],ref:\"input1\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.searchText)},on:{\"blur\":function($event){_vm.input1Focus=false},\"focus\":function($event){_vm.input1Focus=true},\"keydown\":_vm.onKeyDown,\"input\":function($event){if($event.target.composing){ return; }_vm.searchText=$event.target.value}}}),_c('span',{staticClass:\"my-editor-search-suffix\",class:{'active-suffix':_vm.ignoreCase},attrs:{\"title\":\"Match Case(Alt+C)\"},on:{\"click\":_vm.changeCase}},[_vm._v(\"Aa\")]),_c('span',{staticClass:\"my-editor-search-suffix iconfont\",class:{'active-suffix':_vm.wholeWord},attrs:{\"title\":\"Match Whole Word(Alt+W)\"},on:{\"click\":_vm.changeWhole}},[_vm._v(\"\")])]),(_vm.count)?_c('div',[_c('span',[_vm._v(_vm._s(_vm.now))]),_c('span',[_vm._v(\" of \")]),_c('span',[_vm._v(_vm._s(_vm.count))])]):_c('span',{style:({color:_vm.searchText?'red':'#333'})},[_vm._v(\"No results\")])]),(_vm.replaceVisible)?_c('div',{staticClass:\"my-editor-search-bottom\",staticStyle:{\"margin-top\":\"5px\"}},[_c('div',{staticClass:\"my-editor-search-input\",class:{'active-border':_vm.input2Focus}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.replaceText),expression:\"replaceText\"}],ref:\"input2\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.replaceText)},on:{\"blur\":function($event){_vm.input2Focus=false},\"focus\":function($event){_vm.input2Focus=true},\"keydown\":_vm.onKeyDown2,\"input\":function($event){if($event.target.composing){ return; }_vm.replaceText=$event.target.value}}})]),_c('span',{staticClass:\"iconfont active-click\",class:{'enabled-color':_vm.count>0,'disabled-color':_vm.count==0},staticStyle:{\"margin-right\":\"5px\"},attrs:{\"title\":\"Replace(Enter)\"},on:{\"click\":_vm.replace}},[_vm._v(\"\")]),_c('span',{staticClass:\"iconfont active-click\",class:{'enabled-color':_vm.count>0,'disabled-color':_vm.count==0},staticStyle:{\"margin-right\":\"5px\"},attrs:{\"title\":\"Replace All(Ctrl+Alt+Enter)\"},on:{\"click\":_vm.replaceAll}},[_vm._v(\"\")])]):_vm._e()]),_c('div',{staticClass:\"my-editor-search-right\"},[_c('span',{staticClass:\"iconfont\",class:{'active-border':_vm.searchPrevActive,'enabled-color':_vm.count>0,'disabled-color':_vm.count==0},staticStyle:{\"margin-right\":\"5px\"},attrs:{\"title\":\"Previous Match(Shift Enter)\"},on:{\"click\":_vm.searchPrev}},[_vm._v(\"\")]),_c('span',{staticClass:\"iconfont\",class:{'active-border':_vm.searchNextActive,'enabled-color':_vm.count>0,'disabled-color':_vm.count==0},staticStyle:{\"margin-right\":\"5px\"},attrs:{\"title\":\"Next Match(Enter)\"},on:{\"click\":_vm.searchNext}},[_vm._v(\"\")]),_c('span',{staticClass:\"iconfont\",attrs:{\"title\":\"Close\"},on:{\"click\":_vm.close}},[_vm._v(\"\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div @contextmenu.prevent @contextmenu.stop @mousedown.stop @selectstart.stop class=\"my-editor-search\">\r\n\t\t<div class=\"my-editor-search-left\">\r\n\t\t\t<span @click=\"showReplace\" class=\"iconfont\" style=\"font-size:14px\" title=\"Toggle Replace mode\">{{replaceVisible?'&#xe61a;':'&#xe682;'}}</span>\r\n\t\t</div>\r\n\t\t<div style=\"flex-grow:1\">\r\n\t\t\t<div class=\"my-editor-search-top\">\r\n\t\t\t\t<div :class=\"{'active-border':input1Focus}\" class=\"my-editor-search-input\">\r\n\t\t\t\t\t<input @blur=\"input1Focus=false\" @focus=\"input1Focus=true\" @keydown=\"onKeyDown\" ref=\"input1\" type=\"text\" v-model=\"searchText\" />\r\n\t\t\t\t\t<span :class=\"{'active-suffix':ignoreCase}\" @click=\"changeCase\" class=\"my-editor-search-suffix\" title=\"Match Case(Alt+C)\">Aa</span>\r\n\t\t\t\t\t<span :class=\"{'active-suffix':wholeWord}\" @click=\"changeWhole\" class=\"my-editor-search-suffix iconfont\" title=\"Match Whole Word(Alt+W)\">&#xed7d;</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if=\"count\">\r\n\t\t\t\t\t<span>{{now}}</span>\r\n\t\t\t\t\t<span>&nbsp;of&nbsp;</span>\r\n\t\t\t\t\t<span>{{count}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span :style=\"{color:searchText?'red':'#333'}\" v-else>No results</span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"my-editor-search-bottom\" style=\"margin-top:5px\" v-if=\"replaceVisible\">\r\n\t\t\t\t<div :class=\"{'active-border':input2Focus}\" class=\"my-editor-search-input\">\r\n\t\t\t\t\t<input @blur=\"input2Focus=false\" @focus=\"input2Focus=true\" @keydown=\"onKeyDown2\" ref=\"input2\" type=\"text\" v-model=\"replaceText\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<span\r\n\t\t\t\t\t:class=\"{'enabled-color':count>0,'disabled-color':count==0}\"\r\n\t\t\t\t\t@click=\"replace\"\r\n\t\t\t\t\tclass=\"iconfont active-click\"\r\n\t\t\t\t\tstyle=\"margin-right:5px\"\r\n\t\t\t\t\ttitle=\"Replace(Enter)\"\r\n\t\t\t\t>&#xed7e;</span>\r\n\t\t\t\t<span\r\n\t\t\t\t\t:class=\"{'enabled-color':count>0,'disabled-color':count==0}\"\r\n\t\t\t\t\t@click=\"replaceAll\"\r\n\t\t\t\t\tclass=\"iconfont active-click\"\r\n\t\t\t\t\tstyle=\"margin-right:5px\"\r\n\t\t\t\t\ttitle=\"Replace All(Ctrl+Alt+Enter)\"\r\n\t\t\t\t>&#xed7c;</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"my-editor-search-right\">\r\n\t\t\t<span\r\n\t\t\t\t:class=\"{'active-border':searchPrevActive,'enabled-color':count>0,'disabled-color':count==0}\"\r\n\t\t\t\t@click=\"searchPrev\"\r\n\t\t\t\tclass=\"iconfont\"\r\n\t\t\t\tstyle=\"margin-right:5px\"\r\n\t\t\t\ttitle=\"Previous Match(Shift Enter)\"\r\n\t\t\t>&#xe6a9;</span>\r\n\t\t\t<span\r\n\t\t\t\t:class=\"{'active-border':searchNextActive,'enabled-color':count>0,'disabled-color':count==0}\"\r\n\t\t\t\t@click=\"searchNext\"\r\n\t\t\t\tclass=\"iconfont\"\r\n\t\t\t\tstyle=\"margin-right:5px\"\r\n\t\t\t\ttitle=\"Next Match(Enter)\"\r\n\t\t\t>&#xe6a8;</span>\r\n\t\t\t<span @click=\"close\" class=\"iconfont\" title=\"Close\">&#xe69a;</span>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'Search',\r\n    props: {\r\n        now: {\r\n            type: Number,\r\n            default: 1\r\n        },\r\n        count: {\r\n            type: Number,\r\n            default: 0\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            searchText: '',\r\n            replaceText: '',\r\n            replaceVisible: false,\r\n            wholeWord: false,\r\n            ignoreCase: false,\r\n            searchPrevActive: false,\r\n            searchNextActive: false,\r\n            input1Focus: false,\r\n            input2Focus: false,\r\n        }\r\n    },\r\n    watch: {\r\n        searchText: function (newVal) {\r\n            clearTimeout(this.searchTimer);\r\n            this.searchTimer = setTimeout(() => {\r\n                this.search();\r\n            }, 100);\r\n        },\r\n        wholeWord: function (newVal) {\r\n            this.search();\r\n        },\r\n        ignoreCase: function (newVal) {\r\n            this.search();\r\n        }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n        initData(obj) {\r\n            for (let key in obj) {\r\n                this[key] = obj[key];\r\n            }\r\n            this.search();\r\n        },\r\n        search() {\r\n            let searchId = this.search.id || 1;\r\n            this.search.id = searchId;\r\n            this.$nextTick(() => {\r\n                if (this.search.id !== searchId) {\r\n                    return;\r\n                }\r\n                this.$emit('search', {\r\n                    text: this.searchText,\r\n                    ignoreCase: this.ignoreCase,\r\n                    wholeWord: this.wholeWord\r\n                });\r\n            });\r\n        },\r\n        changeCase() {\r\n            this.ignoreCase = !this.ignoreCase;\r\n            this.focus();\r\n        },\r\n        changeWhole() {\r\n            this.wholeWord = !this.wholeWord;\r\n            this.focus();\r\n        },\r\n        showReplace() {\r\n            this.replaceVisible = !this.replaceVisible;\r\n        },\r\n        searchNext() {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            this.searchNextActive = true;\r\n            this.focus();\r\n            this.$emit('next');\r\n        },\r\n        searchPrev() {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            this.searchPrevActive = true;\r\n            this.focus();\r\n            this.$emit('prev');\r\n        },\r\n        replace() {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            this.$emit('replace', { text: this.replaceText });\r\n        },\r\n        replaceAll() {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            this.$emit('replaceAll', { text: this.replaceText });\r\n        },\r\n        close() {\r\n            this.$emit('close');\r\n        },\r\n        focus() {\r\n            this.$nextTick(() => {\r\n                this.$refs.input1.focus();\r\n            });\r\n        },\r\n        directBlur() {\r\n            this.searchPrevActive = false;\r\n            this.searchNextActive = false;\r\n        },\r\n        onKeyDown(e) {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            if (e.keyCode === 13 || e.keyCode === 100) {\r\n                if (this.searchPrevActive || !this.searchNextActive && e.shiftKey) {\r\n                    this.$emit('prev');\r\n                } else {\r\n                    this.$emit('next');\r\n                }\r\n            }\r\n        },\r\n        onKeyDown2(e) {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            if (e.keyCode === 13) {\r\n                if (e.ctrlKey && e.altKey) {\r\n                    this.replaceAll();\r\n                } else {\r\n                    this.replace();\r\n                }\r\n            }\r\n        },\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=7268a771&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-editor-tip\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.content)}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div :style=\"styles\" @mousedown.stop class=\"my-editor-tip\">\r\n\t\t<div v-html=\"content\"></div>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'Tip',\r\n    props: {\r\n        content: String,\r\n        styles: {\r\n            type: Object\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n        }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tip.vue?vue&type=template&id=187bba82&\"\nimport script from \"./Tip.vue?vue&type=script&lang=js&\"\nexport * from \"./Tip.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\t<div\r\n\t\t:style=\"{'padding-top':_topBarHeight,'padding-bottom':_statusHeight}\"\r\n\t\t@contextmenu.prevent=\"onContextmenu\"\r\n\t\t@mousedown=\"onClickEditor\"\r\n\t\t@selectstart.prevent\r\n\t\t@wheel.prevent=\"onWheel\"\r\n\t\tclass=\"my-editor-wrap\"\r\n\t\tref=\"editor\"\r\n\t>\r\n\t\t<!-- 行号 -->\r\n\t\t<div :style=\"{top: _numTop}\" class=\"my-editor-nums\">\r\n\t\t\t<!-- 占位行号，避免行号宽度滚动时变化 -->\r\n\t\t\t<div class=\"my-editor-num\" style=\"visibility:hidden\">{{maxLine}}</div>\r\n\t\t\t<div\r\n\t\t\t\t:class=\"{'my-editor-num-active': _activeLine(line.num)}\"\r\n\t\t\t\t:key=\"line.num\"\r\n\t\t\t\t:style=\"{height:_lineHeight, 'line-height':_lineHeight}\"\r\n\t\t\t\tclass=\"my-editor-num\"\r\n\t\t\t\tv-for=\"line in renderHtmls\"\r\n\t\t\t>\r\n\t\t\t\t<span\r\n\t\t\t\t\t:class=\"[errorMap[line.num]?'my-editor-icon-error':'']\"\r\n\t\t\t\t\t@mouseleave=\"onIconMouseLeave\"\r\n\t\t\t\t\t@mouseover=\"onIconMouseOver(line.num, $event)\"\r\n\t\t\t\t\tclass=\"my-editor-icon my-editor-center\"\r\n\t\t\t\t></span>\r\n\t\t\t\t<span>{{line.num}}</span>\r\n\t\t\t\t<!-- 折叠图标 -->\r\n\t\t\t\t<span\r\n\t\t\t\t\t:class=\"[line.fold=='open'?'my-editor-fold-open':'my-editor-fold-close']\"\r\n\t\t\t\t\t@click=\"onToggleFold(line.num)\"\r\n\t\t\t\t\tclass=\"my-editor-fold my-editor-center\"\r\n\t\t\t\t\tv-if=\"line.fold\"\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div :style=\"{'box-shadow': _leftShadow}\" class=\"my-editor-content-wrap\">\r\n\t\t\t<!-- 可滚动区域 -->\r\n\t\t\t<div @mousedown=\"onScrollerMdown\" @mouseup=\"onScrollerMup\" class=\"my-editor-content-scroller\" ref=\"scroller\">\r\n\t\t\t\t<!-- 内如区域 -->\r\n\t\t\t\t<div :style=\"{top: _top, minWidth: _contentMinWidth}\" @selectend.prevent=\"onSelectend\" class=\"my-editor-content\" ref=\"content\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\t:class=\"{active: _activeLine(line.num)}\"\r\n\t\t\t\t\t\t:data-line=\"line.num\"\r\n\t\t\t\t\t\t:id=\"'line_'+line.num\"\r\n\t\t\t\t\t\t:key=\"line.num\"\r\n\t\t\t\t\t\t:style=\"{height:_lineHeight, 'line-height':_lineHeight}\"\r\n\t\t\t\t\t\tclass=\"my-editor-line\"\r\n\t\t\t\t\t\tv-for=\"line in renderHtmls\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<!-- my-editor-select-bg为选中状态 -->\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t:class=\"[line.selected ? 'my-editor-select-bg my-editor-select-active' : '', line.isFsearch ? 'my-editor-select-f' : '', line.fold == 'close' ? 'fold-close' : '']\"\r\n\t\t\t\t\t\t\t:data-line=\"line.num\"\r\n\t\t\t\t\t\t\tclass=\"my-editor-code\"\r\n\t\t\t\t\t\t\tv-html=\"line.html\"\r\n\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t<!-- 选中时的首行背景 -->\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t:class=\"{'my-editor-select-active': range.active,'my-editor-select-f': range.isFsearch}\"\r\n\t\t\t\t\t\t\t:style=\"{left: range.left + 'px', width: range.width + 'px'}\"\r\n\t\t\t\t\t\t\tclass=\"my-editor-line-bg my-editor-select-bg\"\r\n\t\t\t\t\t\t\tv-for=\"range in line.selectStarts\"\r\n\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t<!-- 选中时的末行背景 -->\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t:class=\"{'my-editor-select-active': range.active,'my-editor-select-f': range.isFsearch}\"\r\n\t\t\t\t\t\t\t:style=\"{left: range.left + 'px', width: range.width + 'px'}\"\r\n\t\t\t\t\t\t\tclass=\"my-editor-line-bg my-editor-select-bg\"\r\n\t\t\t\t\t\t\tv-for=\"range in line.selectEnds\"\r\n\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t<span :style=\"{left: _tabLineLeft(tab)}\" class=\"my-editor-tab-line\" v-for=\"tab in line.tabNum\"></span>\r\n\t\t\t\t\t\t<!-- 模拟光标 -->\r\n\t\t\t\t\t\t<div :style=\"{height: _lineHeight, left: left, visibility: _cursorVisible}\" class=\"my-editor-cursor\" style=\"top:0px\" v-for=\"left in line.cursorList\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<!-- 水平滚动条 -->\r\n\t\t\t<div @mousedown.stop @scroll=\"onHscroll\" class=\"my-editor-h-scroller-wrap\" ref=\"hScroller\">\r\n\t\t\t\t<div :style=\"{width: _hScrollWidth}\" class=\"my-editor-h-scroller\"></div>\r\n\t\t\t</div>\r\n\t\t\t<!-- 垂直滚动条 -->\r\n\t\t\t<div @mousedown.stop @scroll=\"onVscroll\" class=\"my-editor-v-scroller-wrap\" ref=\"vScroller\">\r\n\t\t\t\t<div :style=\"{height: scrollerHeight}\" class=\"my-editor-v-scroller\"></div>\r\n\t\t\t</div>\r\n\t\t\t<!-- 输入框 -->\r\n\t\t\t<textarea\r\n\t\t\t\t:style=\"{top: _textAreaPos.top, left: _textAreaPos.left}\"\r\n\t\t\t\t@blur=\"onBlur\"\r\n\t\t\t\t@compositionend=\"onCompositionend\"\r\n\t\t\t\t@compositionstart=\"onCompositionstart\"\r\n\t\t\t\t@copy.prevent=\"onCopy\"\r\n\t\t\t\t@cut.prevent=\"onCut\"\r\n\t\t\t\t@focus=\"onFocus\"\r\n\t\t\t\t@input=\"onInput\"\r\n\t\t\t\t@keydown=\"onKeyDown\"\r\n\t\t\t\t@paste.prevent=\"onPaste\"\r\n\t\t\t\tclass=\"my-editor-textarea\"\r\n\t\t\t\tref=\"textarea\"\r\n\t\t\t></textarea>\r\n\t\t\t<!-- 搜索框 -->\r\n\t\t\t<search-dialog\r\n\t\t\t\t:count=\"searchCount\"\r\n\t\t\t\t:now=\"searchNow\"\r\n\t\t\t\t@close=\"onCloseSearch\"\r\n\t\t\t\t@next=\"onSearchNext(false)\"\r\n\t\t\t\t@prev=\"onSearchPrev(false)\"\r\n\t\t\t\t@replace=\"replace\"\r\n\t\t\t\t@replaceAll=\"replaceAll\"\r\n\t\t\t\t@search=\"onSearch\"\r\n\t\t\t\tref=\"searchDialog\"\r\n\t\t\t\tv-show=\"searchVisible\"\r\n\t\t\t></search-dialog>\r\n\t\t</div>\r\n\t\t<!-- 顶部菜单栏 -->\r\n\t\t<menu-bar :height=\"topBarHeight\" ref=\"menuBar\"></menu-bar>\r\n\t\t<!-- 状态栏 -->\r\n\t\t<status-bar :column=\"_nowColumn\" :height=\"statusHeight\" :language.sync=\"language\" :line=\"_nowLine\" :tabSize.sync=\"tabSize\" ref=\"statusBar\"></status-bar>\r\n\t\t<!-- 右键菜单 -->\r\n\t\t<Menu :checkable=\"false\" :menuList=\"menuList\" :styles=\"menuStyle\" @change=\"onClickMenu\" ref=\"menu\" v-show=\"menuVisble\"></Menu>\r\n\t\t<tip :content=\"tipContent\" :styles=\"tipStyle\" v-show=\"tipContent\"></tip>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Tokenizer from '@/module/tokenizer/core/index';\r\nimport Lint from '@/module/lint/core/index';\r\nimport Fold from '@/module/fold/index';\r\nimport Search from '@/module/search/index';\r\nimport Select from '@/module/select/index';\r\nimport Cursor from '@/module/cursor/index';\r\nimport History from '@/module/history/index';\r\nimport Context from '@/module/context/index';\r\nimport ShortCut from '@/module/shortcut/index';\r\nimport MenuBar from './MenuBar';\r\nimport StatusBar from './StatusBar';\r\nimport SearchDialog from './Search';\r\nimport Menu from './Menu';\r\nimport Tip from './Tip';\r\nimport Util from '@/common/Util';\r\nimport $ from 'jquery';\r\nlet context = null;\r\n\r\nexport default {\r\n    name: 'Home',\r\n    components: {\r\n        MenuBar,\r\n        StatusBar,\r\n        SearchDialog,\r\n        Menu,\r\n        Tip,\r\n    },\r\n    data() {\r\n        return {\r\n            charObj: {\r\n                charWidth: 7.15,\r\n                fullAngleCharWidth: 15,\r\n                charHight: 19,\r\n            },\r\n            nowCursorPos: {\r\n                line: 1,\r\n                column: 0,\r\n            },\r\n            cursorVisible: true,\r\n            cursorFocus: true,\r\n            language: 'HTML',\r\n            // language: 'JavaScript',\r\n            // language: 'CSS',\r\n            statusHeight: 23,\r\n            topBarHeight: 28,\r\n            tabSize: 4,\r\n            renderHtmls: [],\r\n            startLine: 1,\r\n            startToEndToken: null,\r\n            top: 0,\r\n            textareaLeft: 0,\r\n            scrollLeft: 0,\r\n            scrollTop: 0,\r\n            maxVisibleLines: 1,\r\n            maxLine: 1,\r\n            scrollerHeight: 'auto',\r\n            scrollerArea: {},\r\n            maxWidthObj: {\r\n                lineId: null,\r\n                text: '',\r\n                width: 0\r\n            },\r\n            menuList: [[{\r\n                name: 'Cut',\r\n                op: 'cut',\r\n                shortcut: 'Ctrl+X'\r\n            }, {\r\n                name: 'Copy',\r\n                op: 'copy',\r\n                shortcut: 'Ctrl+C'\r\n            }, {\r\n                name: 'Paste',\r\n                op: 'paste',\r\n                shortcut: 'Ctrl+V'\r\n            }]],\r\n            menuStyle: {\r\n                top: '0px',\r\n                left: '0px',\r\n                'min-width': '200px'\r\n            },\r\n            tipStyle: {\r\n                top: '0px',\r\n                left: '0px'\r\n            },\r\n            errorMap: {},\r\n            menuVisble: false,\r\n            searchVisible: false,\r\n            tipContent: false,\r\n            tipContent: '',\r\n            searchNow: 1,\r\n            searchCount: 0\r\n        }\r\n    },\r\n    computed: {\r\n        _numTop() {\r\n            return this.top - this.charObj.charHight + 'px';\r\n        },\r\n        _leftShadow() {\r\n            return this.scrollLeft ? '17px 0 16px -16px rgba(0, 0, 0, 0.8) inset' : 'none';\r\n        },\r\n        _top() {\r\n            return this.top + 'px';\r\n        },\r\n        _lineHeight() {\r\n            return this.charObj.charHight + 'px';\r\n        },\r\n        _topBarHeight() {\r\n            return this.topBarHeight + 'px';\r\n        },\r\n        _statusHeight() {\r\n            return this.statusHeight + 4 + 'px';\r\n        },\r\n        _cursorVisible() {\r\n            return this.cursorVisible && this.cursorFocus ? 'visible' : 'hidden';\r\n        },\r\n        _hScrollWidth() {\r\n            return this._contentMinWidth;\r\n        },\r\n        _contentMinWidth() {\r\n            let width = 0;\r\n            if (this.$content) {\r\n                width = Util.getStrExactWidth(this.maxWidthObj.text, this.tabSize, this.$content);\r\n                width += this.charObj.fullAngleCharWidth;\r\n            }\r\n            width = this.scrollerArea.width > width ? this.scrollerArea.width : width;\r\n            return width + 'px';\r\n        },\r\n        _textAreaPos() {\r\n            let left = 0;\r\n            let top = this.top;\r\n            if (this.nowCursorPos) {\r\n                top = (this.folder.getRelativeLine(this.nowCursorPos.line) - this.folder.getRelativeLine(this.startLine)) * this.charObj.charHight;\r\n                left = this.textareaLeft;\r\n                left -= this.scrollLeft;\r\n                left = left < this.charObj.charWidth ? this.charObj.charWidth : left;\r\n                left = left > this.scrollerArea.width - this.charObj.charWidth ? this.scrollerArea.width - this.charObj.charWidth : left;\r\n                top += this.charObj.charHight;\r\n                if (top > this.scrollerArea.height - 2 * this.charObj.charHight) {\r\n                    top = this.scrollerArea.height - 2 * this.charObj.charHight;\r\n                }\r\n            }\r\n            return {\r\n                top: top + 'px',\r\n                left: left + 'px'\r\n            }\r\n        },\r\n        _tabLineLeft() {\r\n            return (tab) => {\r\n                return (tab - 1) * this.tabSize * this.charObj.charWidth + 'px';\r\n            }\r\n        },\r\n        _activeLine() {\r\n            return (num) => {\r\n                return this.nowCursorPos && this.nowCursorPos.line == num;\r\n            }\r\n        },\r\n        _nowLine() {\r\n            return this.nowCursorPos && this.nowCursorPos.line || 1;\r\n        },\r\n        _nowColumn() {\r\n            return this.nowCursorPos && this.nowCursorPos.column || 0;\r\n        },\r\n        space() {\r\n            return Util.space(this.tabSize);\r\n        }\r\n    },\r\n    watch: {\r\n        language: function (newVal) {\r\n            context.htmls.map((lineObj) => {\r\n                lineObj.tokens = null;\r\n                lineObj.folds = null;\r\n                lineObj.states = null;\r\n                lineObj.html = '';\r\n            });\r\n            this.render();\r\n            this.tokenizer.initLanguage(newVal);\r\n            this.tokenizer.tokenizeVisibleLins();\r\n            this.tokenizer.tokenizeLines(1);\r\n            this.lint.initLanguage(newVal);\r\n        },\r\n        tabSize: function (newVal) {\r\n            this.render();\r\n            this.maxWidthObj = { lineId: null, text: '', width: 0 };\r\n            this.setLineWidth(context.htmls);\r\n        },\r\n        maxLine: function (newVal) {\r\n            this.setScrollerHeight();\r\n        },\r\n        startLine: function (newVal) {\r\n            this.tokenizer.onScroll();\r\n            this.render();\r\n        }\r\n    },\r\n    created() {\r\n        this.initData();\r\n        this.initEvent();\r\n        window.editor = this;\r\n        window.context = context;\r\n    },\r\n    mounted() {\r\n        this.$editor = this.$refs.editor;\r\n        this.$scroller = this.$refs.scroller;\r\n        this.$content = this.$refs.content;\r\n        this.$textarea = this.$refs.textarea;\r\n        this.$vScroller = this.$refs.vScroller;\r\n        this.$hScroller = this.$refs.hScroller;\r\n        this.charObj = Util.getCharWidth(this.$content);\r\n        this.maxVisibleLines = Math.ceil(this.$scroller.clientHeight / this.charObj.charHight) + 1;\r\n        this.$refs.menuBar.initData(context);\r\n        this.render();\r\n        this.focus();\r\n    },\r\n    methods: {\r\n        // 初始化数据\r\n        initData() {\r\n            context = new Context(this);\r\n            this.maxWidthObj.lineId = context.htmls[0].lineId;\r\n            this.tokenizer = new Tokenizer(this, context);\r\n            this.lint = new Lint(this, context);\r\n            this.folder = new Fold(this, context);\r\n            this.history = new History(this, context);\r\n            this.selecter = new Select(this, context);\r\n            this.searcher = new Search(this, context, this.selecter);\r\n            this.fSelecter = new Select(this, context);\r\n            this.fSearcher = new Search(this, context, this.fSelecter);\r\n            this.shortcut = new ShortCut(this, context);\r\n            this.cursor = new Cursor(this, context);\r\n            this.cursor.addCursorPos(this.nowCursorPos);\r\n        },\r\n        // 初始化文档事件\r\n        initEvent() {\r\n            $(document).on('mousemove', (e) => {\r\n                this.onScrollerMmove(e);\r\n            });\r\n            $(document).on('mouseup', (e) => {\r\n                this.onDocumentMouseUp(e);\r\n            });\r\n            $(window).on('resize', (e) => {\r\n                this.render();\r\n            });\r\n        },\r\n        // 显示光标\r\n        showCursor() {\r\n            this.cursorFocus = true;\r\n            if (!this.cursor.multiCursorPos.size) {\r\n                this.showCursor.show = false;\r\n                return;\r\n            }\r\n            if (this.showCursor.show) {\r\n                return;\r\n            }\r\n            this.showCursor.show = true;\r\n            this.cursorVisible = true;\r\n            let _timer = () => {\r\n                clearTimeout(this.curserTimer);\r\n                this.curserTimer = setTimeout(() => {\r\n                    this.cursorVisible = !this.cursorVisible;\r\n                    _timer();\r\n                }, 500);\r\n            }\r\n            _timer();\r\n        },\r\n        // 隐藏光标\r\n        hideCursor() {\r\n            clearTimeout(this.curserTimer);\r\n            this.showCursor.show = false;\r\n            this.cursorFocus = false;\r\n        },\r\n        // 聚焦\r\n        focus() {\r\n            this.$textarea.focus();\r\n            setTimeout(() => {\r\n                setTimeout(() => {\r\n                    this.$textarea.focus();\r\n                }, 100);\r\n            }, 100);\r\n        },\r\n        // 渲染\r\n        render(forceCursorView) {\r\n            let renderId = this.render.id + 1 || 1;\r\n            this.render.id = renderId;\r\n            this.$nextTick(() => {\r\n                if (this.render.id !== renderId) {\r\n                    return;\r\n                }\r\n                this.renderLine();\r\n                this.renderSelectedBg();\r\n                this.renderCursor(forceCursorView);\r\n                this.$nextTick(() => {\r\n                    this.scrollerArea = {\r\n                        height: this.$scroller.clientHeight,\r\n                        width: this.$scroller.clientWidth,\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        // 渲染代码\r\n        renderLine(lineId) {\r\n            let that = this;\r\n            // 只更新一行\r\n            if (lineId) {\r\n                if (context.renderedIdMap.has(lineId)) {\r\n                    let item = context.lineIdMap.get(lineId);\r\n                    let obj = context.renderedIdMap.get(lineId);\r\n                    // 高亮完成渲染某一行时，render可能还没完成，导致num没更新，此时跳过\r\n                    if (context.htmls[obj.num - 1] && context.htmls[obj.num - 1].lineId === lineId) {\r\n                        Object.assign(obj, _getObj(item, obj.num));\r\n                        this.renderCursor();\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            context.renderedIdMap.clear();\r\n            context.renderedLineMap.clear();\r\n            this.renderHtmls = [];\r\n            for (let i = 0, startLine = this.startLine; i < this.maxVisibleLines && startLine <= context.htmls.length; i++) {\r\n                let lineObj = context.htmls[startLine - 1];\r\n                let lineId = lineObj.lineId;\r\n                let obj = _getObj(lineObj, startLine);\r\n                this.renderHtmls.push(obj);\r\n                context.renderedIdMap.set(lineId, obj);\r\n                context.renderedLineMap.set(startLine, obj);\r\n                if (context.foldMap.has(startLine)) {\r\n                    let fold = context.foldMap.get(startLine);\r\n                    startLine = fold.end.line;\r\n                } else {\r\n                    startLine++;\r\n                }\r\n            }\r\n\r\n            function _getObj(item, line) {\r\n                let selected = false;\r\n                let spaceNum = /^\\s+/.exec(item.text);\r\n                let tabNum = 0;\r\n                let fold = '';\r\n                let selectStarts = [];\r\n                let selectEnds = [];\r\n                if (spaceNum) {\r\n                    tabNum = /\\t+/.exec(spaceNum[0]);\r\n                    tabNum = tabNum && tabNum[0].length || 0;\r\n                    tabNum = tabNum + Math.ceil((spaceNum[0].length - tabNum) / that.tabSize);\r\n                }\r\n                if (context.foldMap.has(line)) { //该行已经折叠\r\n                    fold = 'close';\r\n                } else if (that.folder.getRangeFold(line, true)) { //可折叠\r\n                    fold = 'open';\r\n                }\r\n                let html = item.html || Util.htmlTrans(item.text);\r\n                html = html.replace(/\\t/g, that.space);\r\n                return {\r\n                    html: html,\r\n                    num: line,\r\n                    tabNum: tabNum,\r\n                    selectStarts: selectStarts,\r\n                    selectEnds: selectEnds,\r\n                    selected: selected,\r\n                    fold: fold,\r\n                    cursorList: [],\r\n                }\r\n            }\r\n        },\r\n        renderSelectedBg() {\r\n            let renderSelectedBgId = this.renderSelectedBg.id + 1 || 1;\r\n            this.renderSelectedBg.id = renderSelectedBgId;\r\n            this.$nextTick(() => {\r\n                if (this.renderSelectedBg.id != renderSelectedBgId) {\r\n                    return;\r\n                }\r\n                if (!this.renderHtmls.length) { //删除内容后，窗口还没滚动到可视区域\r\n                    requestAnimationFrame(() => {\r\n                        this.renderSelectedBg();\r\n                    });\r\n                }\r\n                this.renderHtmls.map((item) => {\r\n                    item.selected = false;\r\n                    item.selectStarts = [];\r\n                    item.selectEnds = [];\r\n                });\r\n                this.fSelecter.ranges.forEach((range) => {\r\n                    this._renderSelectedBg(range, true);\r\n                });\r\n                this.selecter.ranges.forEach((range) => {\r\n                    let _range = this.fSelecter.getRangeByCursorPos(range.start);\r\n                    if (this.searchVisible) {\r\n                        // 优先渲染搜索框的选中范围\r\n                        if (!_range || !_range.active) {\r\n                            this._renderSelectedBg(range);\r\n                        }\r\n                    } else {\r\n                        this._renderSelectedBg(range);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        // 渲染选中背景\r\n        _renderSelectedBg(range, isFsearch) {\r\n            let selecter = isFsearch ? this.fSelecter : this.selecter;\r\n            let firstLine = this.renderHtmls[0].num;\r\n            let lastLine = this.renderHtmls.peek().num;\r\n            let start = range.start;\r\n            let end = range.end;\r\n            let text = context.htmls[start.line - 1].text;\r\n            start.left = this.getStrWidth(text, 0, start.column);\r\n            if (start.line == end.line) {\r\n                start.width = this.getStrWidth(text, start.column, end.column);\r\n            } else {\r\n                start.width = this.getStrWidth(text, start.column);\r\n                end.left = 0;\r\n                text = context.htmls[end.line - 1].text;\r\n                end.width = this.getStrWidth(text, 0, end.column);\r\n            }\r\n            firstLine = firstLine > start.line + 1 ? firstLine : start.line + 1;\r\n            lastLine = lastLine < end.line - 1 ? lastLine : end.line - 1;\r\n            for (let line = firstLine; line <= lastLine; line++) {\r\n                if (context.renderedLineMap.has(line)) {\r\n                    let lineObj = context.renderedLineMap.get(line);\r\n                    lineObj.selected = true;\r\n                    lineObj.isFsearch = isFsearch;\r\n                }\r\n            }\r\n            if (context.renderedLineMap.has(start.line)) {\r\n                context.renderedLineMap.get(start.line).selectStarts.push({\r\n                    left: start.left,\r\n                    width: start.width,\r\n                    active: range.active,\r\n                    isFsearch: isFsearch\r\n                });\r\n            }\r\n            if (end.line > start.line && context.renderedLineMap.has(end.line)) {\r\n                context.renderedLineMap.get(end.line).selectEnds.push({\r\n                    left: end.left,\r\n                    width: end.width,\r\n                    active: range.active,\r\n                    isFsearch: isFsearch\r\n                });\r\n            }\r\n        },\r\n        // 渲染光标\r\n        renderCursor(forceCursorView) {\r\n            let that = this;\r\n            let renderCursorId = this.renderCursor.id + 1 || 1;\r\n            this.renderCursor.id = renderCursorId;\r\n            this.$nextTick(() => {\r\n                if (this.renderCursor.id !== renderCursorId) {\r\n                    return;\r\n                }\r\n                this.renderHtmls.map((item) => {\r\n                    _setLine(item);\r\n                });\r\n                this.cursorVisible = true;\r\n            });\r\n\r\n            function _setLine(item) {\r\n                let cursorList = [];\r\n                that.cursor.getCursorsByLine(item.num).map((cursorPos) => {\r\n                    cursorList.push(_setCursorRealPos(cursorPos));\r\n                });\r\n                item.cursorList = cursorList;\r\n            }\r\n\r\n            function _setCursorRealPos(cursorPos) {\r\n                let left = 0;\r\n                let lineObj = context.htmls[cursorPos.line - 1];\r\n                if (cursorPos.del) {\r\n                    return;\r\n                }\r\n                if ($('#line_' + cursorPos.line).length && lineObj.tokens && lineObj.tokens.length) {\r\n                    left = _getExactLeft(cursorPos);\r\n                } else {\r\n                    left = that.getStrWidthByLine(cursorPos.line, 0, cursorPos.column);\r\n                }\r\n                // 强制滚动使光标处于可见区域\r\n                if (forceCursorView && cursorPos === that.nowCursorPos) {\r\n                    if (left > that.scrollerArea.width + that.scrollLeft - that.charObj.fullAngleCharWidth) {\r\n                        that.$hScroller.scrollLeft = left + that.charObj.fullAngleCharWidth - that.scrollerArea.width;\r\n                    } else if (left < that.scrollLeft) {\r\n                        that.$hScroller.scrollLeft = left - 1;\r\n                    }\r\n                }\r\n                if (cursorPos === that.nowCursorPos) {\r\n                    that.textareaLeft = left;\r\n                }\r\n                return left + 'px';\r\n            }\r\n\r\n            function _getExactLeft(cursorPos) {\r\n                let lineObj = context.htmls[cursorPos.line - 1];\r\n                let token = lineObj.tokens[0];\r\n                for (let i = 1; i < lineObj.tokens.length; i++) {\r\n                    if (lineObj.tokens[i].column < cursorPos.column) {\r\n                        token = lineObj.tokens[i];\r\n                    } else {\r\n                        break;\r\n                    }\r\n                }\r\n                let $token = $('#line_' + cursorPos.line).\r\n                    children('.my-editor-code').\r\n                    children('span[data-column=\"' + token.column + '\"]');\r\n                if (!$token.length) {\r\n                    return -1;\r\n                }\r\n                let text = token.value.slice(0, cursorPos.column - token.column);\r\n                return $token[0].offsetLeft + that.getStrWidth(text);\r\n            }\r\n        },\r\n        // 折叠行\r\n        foldLine(line) {\r\n            let resultFold = this.folder.foldLine(line);\r\n            this.focus();\r\n            if (resultFold) {\r\n                this.cursor.multiCursorPos.forEach((cursorPos) => {\r\n                    if (cursorPos.line > line && cursorPos.line < resultFold.end.line) {\r\n                        let lineObj = context.htmls[line - 1];\r\n                        cursorPos.line = line;\r\n                        cursorPos.column = lineObj.text.length;\r\n                    }\r\n                });\r\n                this.setScrollerHeight();\r\n                this.render();\r\n            }\r\n        },\r\n        // 展开折叠行\r\n        unFold(line) {\r\n            this.focus();\r\n            if (this.folder.unFold(line)) {\r\n                this.setScrollerHeight();\r\n                this.render();\r\n            }\r\n        },\r\n        // ctrl+f打开搜索\r\n        openSearch(replaceMode) {\r\n            let searchConfig = context.getToSearchConfig();\r\n            let obj = {\r\n                replaceVisible: !!replaceMode,\r\n                wholeWord: false,\r\n                ignoreCase: false\r\n            };\r\n            if (searchConfig.text) {\r\n                obj.searchText = searchConfig.text;\r\n            }\r\n            if (this.searchVisible && !obj.text) {\r\n                return;\r\n            }\r\n            this.searchVisible = true;\r\n            this.cursorFocus = false;\r\n            this.$refs.searchDialog.initData(obj);\r\n            this.$refs.searchDialog.focus();\r\n        },\r\n        // ctrl+d搜索完整单词\r\n        searchWord(direct) {\r\n            this.searcher.search({ direct: direct });\r\n            if (this.searchVisible) {\r\n                let searchConfig = this.searcher.getConfig();\r\n                if (searchConfig && searchConfig.text) {\r\n                    let $search = this.$refs.searchDialog;\r\n                    if ($search.searchText != searchConfig.text || !$search.wholeWord || !$search.ignoreCase) {\r\n                        let config = {\r\n                            searchText: searchConfig.text,\r\n                            wholeWord: true,\r\n                            ignoreCase: true\r\n                        }\r\n                        $search.initData(config);\r\n                    } else {\r\n                        direct === 'up' ? this.onSearchPrev() : this.onSearchNext();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        replace(data) {\r\n            if (this.fSelecter.ranges.size) {\r\n                let range = this.fSearcher.now();\r\n                context.replace(data.text, [range]);\r\n            }\r\n        },\r\n        replaceAll(data) {\r\n            if (this.fSelecter.ranges.size) {\r\n                context.replace(data.text, this.fSelecter.ranges.toArray());\r\n                this.searchCount = 0;\r\n            }\r\n        },\r\n        setData(prop, value) {\r\n            if (typeof this[prop] === 'function') {\r\n                return;\r\n            }\r\n            this[prop] = value;\r\n        },\r\n        setNowCursorPos(nowCursorPos) {\r\n            this.nowCursorPos = nowCursorPos;\r\n            if (nowCursorPos) {\r\n                let setNowCursorPosId = this.setNowCursorPos.id + 1 || 1;\r\n                this.setNowCursorPos.id = setNowCursorPosId;\r\n                // 强制滚动使光标处于可见区域\r\n                this.$nextTick(() => {\r\n                    if (this.setNowCursorPos.id != setNowCursorPosId) {\r\n                        return;\r\n                    }\r\n                    let line = this.folder.getRelativeLine(nowCursorPos.line);\r\n                    let relTop = (line - this.folder.getRelativeLine(this.startLine)) * this.charObj.charHight;\r\n                    let top = line * this.charObj.charHight;\r\n                    if (top > this.scrollTop + this.scrollerArea.height - this.charObj.charHight) {\r\n                        this.$vScroller.scrollTop = top + this.charObj.charHight - this.scrollerArea.height;\r\n                        this.startLine = Math.floor(this.scrollTop / this.charObj.charHight);\r\n                        this.startLine++;\r\n                    } else if (relTop < 0 || relTop == 0 && this.top < 0) {\r\n                        this.$vScroller.scrollTop = (nowCursorPos.line - 1) * this.charObj.charHight;\r\n                        this.startLine = nowCursorPos.line;\r\n                    }\r\n                    this.renderCursor(true);\r\n                });\r\n            }\r\n        },\r\n        // 获取最大宽度\r\n        setMaxWidth() {\r\n            let maxWidthObj = { line: context.htmls[0].lineId, width: 0 };\r\n            context.htmls.map((item) => {\r\n                if (item.width > maxWidthObj.width) {\r\n                    maxWidthObj = {\r\n                        lineId: item.lineId,\r\n                        text: item.text,\r\n                        width: item.width\r\n                    }\r\n                }\r\n            });\r\n            this.maxWidthObj = maxWidthObj;\r\n        },\r\n        /**\r\n         * 设置每行文本的宽度\r\n         * @param {Array} texts\r\n         */\r\n        setLineWidth(texts) {\r\n            let index = 0;\r\n            let that = this;\r\n            let startTime = Date.now();\r\n            clearTimeout(this.setLineWidth.timer);\r\n            _setLineWidth();\r\n\r\n            function _setLineWidth() {\r\n                while (index < texts.length) {\r\n                    let lineObj = texts[index];\r\n                    if (context.lineIdMap.has(lineObj.lineId)) {\r\n                        let width = that.getStrWidth(lineObj.text);\r\n                        lineObj.width = width;\r\n                        if (width > that.maxWidthObj.width) {\r\n                            that.maxWidthObj = {\r\n                                lineId: lineObj.lineId,\r\n                                text: lineObj.text,\r\n                                width: width\r\n                            }\r\n                        }\r\n                    }\r\n                    index++;\r\n                    if (Date.now() - startTime > 20) {\r\n                        break;\r\n                    }\r\n                }\r\n                if (index < texts.length) {\r\n                    that.setLineWidth.timer = setTimeout(() => {\r\n                        _setLineWidth();\r\n                    }, 20);\r\n                }\r\n            }\r\n        },\r\n        // 设置滚动区域真实高度\r\n        setScrollerHeight() {\r\n            let maxLine = context.htmls.length;\r\n            maxLine = this.folder.getRelativeLine(maxLine);\r\n            this.scrollerHeight = maxLine * this.charObj.charHight + 'px';\r\n        },\r\n        setErrorMap(errorMap) {\r\n            this.errorMap = errorMap;\r\n        },\r\n        // 获取文本在浏览器中的宽度\r\n        getStrWidth(str, start, end) {\r\n            return Util.getStrWidth(str, this.charObj.charWidth, this.charObj.fullAngleCharWidth, this.tabSize, start, end);\r\n        },\r\n        // 获取行对应的文本在浏览器中的宽度\r\n        getStrWidthByLine(line, start, end) {\r\n            return this.getStrWidth(context.htmls[line - 1].text, start, end);\r\n        },\r\n        // 根据文本宽度计算当前列号\r\n        getColumnByWidth(text, offsetX) {\r\n            let left = 0, right = text.length;\r\n            let mid, width, w1, w2;\r\n            while (left < right) {\r\n                mid = Math.floor((left + right) / 2);\r\n                width = this.getStrWidth(text, 0, mid);\r\n                w1 = text[mid - 1] && this.getStrWidth(text[mid - 1]) / 2;\r\n                w2 = text[mid] && this.getStrWidth(text[mid]) / 2 || w1;\r\n                if (width >= offsetX && width - offsetX < w1 || offsetX >= width && offsetX - width < w2) {\r\n                    left = mid;\r\n                    break;\r\n                } else if (width > offsetX) {\r\n                    right = mid;\r\n                } else {\r\n                    left = mid + 1;\r\n                }\r\n            }\r\n            return left;\r\n        },\r\n        // 根据鼠标事件对象获取行列坐标\r\n        getPosByEvent(e) {\r\n            let that = this;\r\n            let $target = $(e.target);\r\n            if ($target.attr('data-line') || $target.attr('data-column')) {\r\n                return _getExactPos(e);\r\n            }\r\n            let $scroller = $(this.$scroller);\r\n            let offset = $scroller.offset();\r\n            let column = 0;\r\n            let clientX = e.clientX < 0 ? 0 : e.clientX;\r\n            let clientY = e.clientY < 0 ? 0 : e.clientY;\r\n            let line = Math.ceil((clientY + this.scrollTop - offset.top) / this.charObj.charHight) || 1;\r\n            line = this.folder.getRealLine(line);\r\n            if (line > context.htmls.length) {\r\n                line = context.htmls.length;\r\n                column = context.htmls[line - 1].text.length;\r\n            } else {\r\n                column = this.getColumnByWidth(context.htmls[line - 1].text, clientX + this.scrollLeft - offset.left);\r\n            }\r\n            return {\r\n                line: line,\r\n                column: column\r\n            }\r\n\r\n            function _getExactPos(e) {\r\n                let $target = $(e.target);\r\n                let line = $target.attr('data-line') - 0;\r\n                let column = $target.attr('data-column');\r\n                if (!line) {\r\n                    line = $target.parent().attr('data-line') - 0;\r\n                }\r\n                let lineObj = context.htmls[line - 1];\r\n                if (!column) {\r\n                    column = lineObj.text.length;\r\n                } else {\r\n                    column = column - 0;\r\n                    for (let i = 0; i < lineObj.tokens.length; i++) {\r\n                        if (lineObj.tokens[i].column == column) {\r\n                            column += that.getColumnByWidth(lineObj.tokens[i].value, e.offsetX);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                return {\r\n                    line: line,\r\n                    column: column\r\n                }\r\n            }\r\n        },\r\n        // 右键菜单事件\r\n        onContextmenu(e) {\r\n            let menuWidth = 0;\r\n            let menuHeight = 0;\r\n            let $editor = $(this.$editor);\r\n            let offset = $editor.offset();\r\n            this.menuVisble = true;\r\n            this.$nextTick(() => {\r\n                menuWidth = this.$refs.menu.$el.clientWidth;\r\n                menuHeight = this.$refs.menu.$el.clientHeight;\r\n                if (menuHeight + e.clientY > offset.top + this.scrollerArea.height) {\r\n                    this.menuStyle.top = e.clientY - offset.top - menuHeight + 'px';\r\n                } else {\r\n                    this.menuStyle.top = e.clientY - offset.top + 'px';\r\n                }\r\n                if (menuWidth + e.clientX > offset.left + $editor[0].clientWidth) {\r\n                    this.menuStyle.left = e.clientX - offset.left - menuWidth + 'px';\r\n                } else {\r\n                    this.menuStyle.left = e.clientX - offset.left + 'px';\r\n                }\r\n            });\r\n        },\r\n        // 选中菜单\r\n        onClickMenu(menu) {\r\n            switch (menu.op) {\r\n                case 'cut':\r\n                case 'copy':\r\n                    Util.writeClipboard(context.getCopyText(menu.op === 'cut'));\r\n                    break;\r\n                case 'paste':\r\n                    this.$textarea.focus();\r\n                    Util.readClipboard().then((text) => {\r\n                        context.insertContent(text);\r\n                    });\r\n                    break;\r\n            }\r\n            this.menuVisble = false;\r\n            this.focus();\r\n        },\r\n        // 提示图标hover事件\r\n        onIconMouseOver(line, e) {\r\n            let $editor = $(this.$editor);\r\n            let offset = $editor.offset();\r\n            this.tipStyle = {\r\n                left: e.clientX - offset.left + 10 + 'px',\r\n                top: e.clientY - offset.top + 10 + 'px'\r\n            }\r\n            this.tipContent = this.errorMap[line];\r\n        },\r\n        onIconMouseLeave() {\r\n            this.tipContent = '';\r\n        },\r\n        // 折叠/展开\r\n        onToggleFold(line) {\r\n            if (context.foldMap.has(line)) {\r\n                this.unFold(line);\r\n                return;\r\n            } else {\r\n                this.foldLine(line);\r\n            }\r\n        },\r\n        // 点击编辑器\r\n        onClickEditor() {\r\n            this.$refs.statusBar.closeAllMenu();\r\n            this.$refs.menuBar.closeAllMenu();\r\n            this.menuVisble = false;\r\n        },\r\n        // 滚动区域鼠标按下事件\r\n        onScrollerMdown(e) {\r\n            if (e.which == 3) { //右键\r\n                return;\r\n            }\r\n            let pos = this.getPosByEvent(e);\r\n            let cursorPos = null;\r\n            let range = null;\r\n            this.mouseStartObj = {\r\n                time: Date.now(),\r\n                start: pos,\r\n            }\r\n            if (e.ctrlKey && this.cursor.multiKeyCode === 'ctrl' ||\r\n                e.altKey && this.cursor.multiKeyCode === 'alt') {\r\n                cursorPos = this.cursor.addCursorPos(pos);\r\n            } else {\r\n                cursorPos = this.cursor.setCursorPos(pos);\r\n                if (e.which !== 3) {\r\n                    this.searcher.clearSearch();\r\n                }\r\n            }\r\n            if (e.which != 3) {\r\n                this.fSearcher.clearNow();\r\n                if (this.mouseUpTime && Date.now() - this.mouseUpTime < 200) { //双击选中单词\r\n                    this.mouseStartObj.doubleClick = true;\r\n                    this.searchWord();\r\n                }\r\n            }\r\n            range = this.selecter.getRangeByCursorPos(cursorPos);\r\n            if (range) {\r\n                this.cursor.clearCursorPos(cursorPos);\r\n                cursorPos = Util.comparePos(cursorPos, range.start) === 0 ? range.start : range.end;\r\n                this.cursor.addCursorPos(cursorPos);\r\n            }\r\n            this.mouseStartObj.cursorPos = cursorPos;\r\n            this.selecter.clearInactive();\r\n            this.focus();\r\n        },\r\n        onScrollerMup(e) {\r\n\r\n        },\r\n        // 鼠标移动事件\r\n        onScrollerMmove(e) {\r\n            let that = this;\r\n            if (this.mouseStartObj && Date.now() - this.mouseStartObj.time > 100) {\r\n                var offset = $(this.$scroller).offset();\r\n                let end = this.getPosByEvent(e);\r\n                if (Util.comparePos(end, this.mouseStartObj.cursorPos)) {\r\n                    this.cursor.clearCursorPos(this.mouseStartObj.cursorPos);\r\n                    this.mouseStartObj.cursorPos = this.cursor.addCursorPos({ line: end.line, column: end.column });\r\n                    if (this.mouseStartObj.preRange) {\r\n                        this.selecter.updateRange(this.mouseStartObj.preRange, {\r\n                            start: this.mouseStartObj.start,\r\n                            end: end\r\n                        });\r\n                    } else {\r\n                        this.mouseStartObj.preRange = this.selecter.addRange({\r\n                            start: this.mouseStartObj.start,\r\n                            end: end\r\n                        });\r\n                    }\r\n                }\r\n                cancelAnimationFrame(this.selectMoveTimer);\r\n                if (e.clientY > offset.top + this.scrollerArea.height) { //鼠标超出底部区域\r\n                    _move('down', e.clientY - offset.top - this.scrollerArea.height);\r\n                } else if (e.clientY < offset.top) { //鼠标超出顶部区域\r\n                    _move('up', offset.top - e.clientY);\r\n                } else if (e.clientX < offset.left) { //鼠标超出左边区域\r\n                    _move('left', offset.left - e.clientX);\r\n                } else if (e.clientX > offset.left + this.scrollerArea.width) { //鼠标超出右边区域\r\n                    _move('right', e.clientX - offset.left - this.scrollerArea.width);\r\n                }\r\n            }\r\n            function _move(autoDirect, speed) {\r\n                let originLine = that.nowCursorPos.line;\r\n                let originColumn = that.nowCursorPos.column;\r\n                let count = 0; // 累计滚动距离\r\n                _run(autoDirect, speed);\r\n\r\n                function _run(autoDirect, speed) {\r\n                    let line = originLine;\r\n                    let column = originColumn;\r\n                    switch (autoDirect) {\r\n                        case 'up':\r\n                            count += speed;\r\n                            line = Math.floor(count / that.charObj.charHight);\r\n                            line = originLine - line;\r\n                            break;\r\n                        case 'down':\r\n                            count += speed;\r\n                            line = Math.floor(count / that.charObj.charHight);\r\n                            line = originLine + line;\r\n                            break;\r\n                        case 'left':\r\n                            count += speed;\r\n                            column = Math.floor(count / that.charObj.charWidth);\r\n                            column = originColumn - column;\r\n                            break;\r\n                        case 'right':\r\n                            count += speed;\r\n                            column = Math.floor(count / that.charObj.charWidth);\r\n                            column = originColumn + column;\r\n                            break;\r\n                    }\r\n                    line = line < 1 ? 1 : (line > context.htmls.length ? context.htmls.length : line);\r\n                    column = column < 0 ? 0 : (column > context.htmls[originLine - 1].text.length ? context.htmls[originLine - 1].text.length : column);\r\n                    that.cursor.setCursorPos({ line: line, column: column });\r\n                    that.selecter.setRange(that.mouseStartObj.start, { line: line, column: column });\r\n                    that.selectMoveTimer = requestAnimationFrame(() => {\r\n                        _run(autoDirect, speed)\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        // 鼠标抬起事件\r\n        onDocumentMouseUp(e) {\r\n            // 停止滚动选中\r\n            cancelAnimationFrame(this.selectMoveTimer);\r\n            this.mouseStartObj = null;\r\n            this.mouseUpTime = Date.now();\r\n            this.$refs.searchDialog.directBlur();\r\n        },\r\n        // 左右滚动事件\r\n        onHscroll(e) {\r\n            this.scrollLeft = e.target.scrollLeft;\r\n            this.$scroller.scrollLeft = this.scrollLeft;\r\n        },\r\n        // 上下滚动事件\r\n        onVscroll(e) {\r\n            let startLine = 1;\r\n            this.scrollTop = e.target.scrollTop;\r\n            startLine = Math.floor(this.scrollTop / this.charObj.charHight);\r\n            startLine++;\r\n            this.startLine = this.folder.getRealLine(startLine);\r\n            this.top = -this.scrollTop % this.charObj.charHight;\r\n        },\r\n        // 滚动滚轮\r\n        onWheel(e) {\r\n            this.$vScroller.scrollTop = this.scrollTop + e.deltaY;\r\n            this.$hScroller.scrollLeft = this.scrollLeft + e.deltaX;\r\n        },\r\n        // 中文输入开始\r\n        onCompositionstart() {\r\n            clearTimeout(this.compositionendTimer);\r\n            this.compositionstart = true;\r\n        },\r\n        // 中文输入结束\r\n        onCompositionend() {\r\n            if (this.compositionstart) {\r\n                let text = this.$textarea.value || '';\r\n                if (text) {\r\n                    context.insertContent(text);\r\n                    this.$textarea.value = '';\r\n                }\r\n            }\r\n            //避免有些浏览器compositionend在input事件之前触发的bug\r\n            this.compositionendTimer = setTimeout(() => {\r\n                this.compositionstart = false;\r\n            }, 100);\r\n        },\r\n        // 输入事件\r\n        onInput() {\r\n            if (!this.compositionstart) {\r\n                let text = this.$textarea.value || '';\r\n                if (text) {\r\n                    context.insertContent(text);\r\n                    this.$textarea.value = '';\r\n                }\r\n            }\r\n        },\r\n        // 复制事件\r\n        onCopy(e) {\r\n            let mime = window.clipboardData ? \"Text\" : \"text/plain\";\r\n            let clipboardData = e.clipboardData || window.clipboardData;\r\n            clipboardData.setData(mime, context.getCopyText());\r\n        },\r\n        onCut(e) {\r\n            let mime = window.clipboardData ? \"Text\" : \"text/plain\";\r\n            let clipboardData = e.clipboardData || window.clipboardData;\r\n            clipboardData.setData(mime, context.getCopyText(true));\r\n        },\r\n        // 粘贴事件\r\n        onPaste(e) {\r\n            let mime = window.clipboardData ? \"Text\" : \"text/plain\";\r\n            let clipboardData = e.clipboardData || window.clipboardData;\r\n            let copyText = '';\r\n            copyText = clipboardData.getData(mime);\r\n            context.insertContent(copyText);\r\n        },\r\n        // 获得焦点\r\n        onFocus() {\r\n            clearTimeout(this.onBlur.timer);\r\n            this.showCursor();\r\n        },\r\n        // 失去焦点\r\n        onBlur() {\r\n            this.onBlur.timer = setTimeout(() => {\r\n                this.hideCursor();\r\n            }, 300);\r\n        },\r\n        // 键盘按下事件\r\n        onKeyDown(e) {\r\n            this.shortcut.onKeyDown(e);\r\n        },\r\n        onSearch(data) {\r\n            let resultObj = null;\r\n            this.fSearcher.clearSearch();\r\n            resultObj = this.fSearcher.search({\r\n                config: {\r\n                    text: data.text,\r\n                    wholeWord: data.wholeWord,\r\n                    ignoreCase: data.ignoreCase,\r\n                }\r\n            });\r\n            this.searchNow = resultObj.now;\r\n            this.searchCount = resultObj.count;\r\n            if (this.cursorFocus === false) {\r\n                this.searcher.clearSearch();\r\n            }\r\n        },\r\n        onSearchNext(cursorFocus) {\r\n            if (cursorFocus !== undefined) {\r\n                this.cursorFocus = cursorFocus;\r\n            }\r\n            if (this.fSearcher.hasCache()) {\r\n                let resultObj = this.fSearcher.search({});\r\n                this.searchNow = resultObj.now;\r\n                this.searchCount = resultObj.count;\r\n            }\r\n        },\r\n        onSearchPrev(cursorFocus) {\r\n            if (cursorFocus !== undefined) {\r\n                this.cursorFocus = cursorFocus;\r\n            }\r\n            if (this.fSearcher.hasCache()) {\r\n                let resultObj = this.fSearcher.search({ direct: 'up' });\r\n                this.searchNow = resultObj.now;\r\n                this.searchCount = resultObj.count;\r\n            }\r\n        },\r\n        onCloseSearch() {\r\n            this.searchVisible = false;\r\n            this.fSearcher.clearSearch();\r\n            this.focus();\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=1dcb2279&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport Home from './components/Home.vue';\r\n\r\nVue.use(Router)\r\n\r\nvar router = new Router({\r\n    routes: [{\r\n            path: '/home',\r\n            name: 'Home',\r\n            component: Home,\r\n            meta: {\r\n                title: 'my-editor'\r\n            }\r\n        },\r\n        {\r\n            path: '*',\r\n            redirect: '/home'\r\n        }\r\n    ]\r\n})\r\n\r\nexport default router;","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport './scss/editor.scss'\r\nimport './scss/highlight/js.scss';\r\nimport './scss/highlight/html.scss';\r\nimport './scss/highlight/css.scss';\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  router,\r\n  render: h => h(App),\r\n}).$mount('#app')"],"sourceRoot":""}