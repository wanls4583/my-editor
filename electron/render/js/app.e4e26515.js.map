{"version":3,"file":"js/app.e4e26515.js","mappings":"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qBACAoI,EAAAA,UAAAA,aAAAA,KAAAA,UACAA,EAAAA,UAAAA,aAAAA,KAAAA,YAEAguB,QAAAA,CAEAiD,WACA,8BACA3F,GAAAA,KAAAA,UAAAA,IAAAA,GAAAA,MACA,uDACA,0CACA,qCACA,0CACA,wCACA,8CACA,wCACA,yCACA,0CACA,wDACA,2CACA,0DACA,0CACA,wCACA,4CACA,iDACA,6DACA,yDACA,yDAEAyP,iBACA,8GACA,2FAGA5M,YACA,sBACA,sCAEA,sBACA,wCAEA71B,IAAAA,UAAAA,GAAAA,YAAAA,KAAAA,cACAA,IAAAA,UAAAA,GAAAA,UAAAA,KAAAA,eAEA21B,kBACA,gCACA,aACA,qBACA,qBACA,wBAKAC,EAAAA,QAAAA,KAAAA,MAAAA,SAEA2B,eACA,uBACA/f,EAAAA,IACA,kBACA,2CACA,yBACA,cACA,0BAEA,6BAIAA,EAAAA,IACA,kBACA,2CACA,cACA,kBAIAA,EAAAA,IACA,gBACA,yCACA,cACA,iBAIAA,EAAAA,IACA,mBACA,6CACA,aACA,qCAIAA,EAAAA,IACA,iBACA,2CACA,aACA,qCAIAA,EAAAA,IACA,aACA,uCACA,sBACA,2BAGAA,EAAAA,IACA,gBACA,yCACA,cACA,cAEA,gBAGAA,EAAAA,IACA,WACA,oCACA,4CACA,oBAIAA,EAAAA,IACA,eACA,wCACA,+BACA,WACAlN,EAAAA,EAAAA,cAAAA,KAAAA,QAAAA,MACA,kCACA,+BACA,kCAKAkN,EAAAA,IACA,cACA,uCACA,4BACA,4BAIAA,EAAAA,IACA,aACA,sCACA,uBACA,sBAIAA,EAAAA,IACA,cACA,uCACA,kDACA,uBAIAA,EAAAA,IACA,gBACA,yCACA,qBACA,uBAIAA,EAAAA,IACA,iBACA,2CACA,yCACA,aACA,qBACA,yDACA,mBAKAA,EAAAA,IACA,eACA,yCACA,IACA,0CACA,oDACA,eAIAue,cACA/1B,IAAAA,UAAAA,OAAAA,YAAAA,KAAAA,cACAA,IAAAA,UAAAA,OAAAA,UAAAA,KAAAA,cACAwX,EAAAA,KAAAA,kBAAAA,KAAAA,eAAAA,oBACAA,E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","sources":["webpack://my-editor/./src/App.vue","webpack://my-editor/./src/components/Window.vue","webpack://my-editor/./src/components/Editor.vue","webpack://my-editor/./src/common/util.js","webpack://my-editor/./src/event.js","webpack://my-editor/./src/common/scheduler.js","webpack://my-editor/./src/data/enum.js","webpack://my-editor/./src/data/globalData.js","webpack://my-editor/./src/module/tokenizer/index.js","webpack://my-editor/./src/module/lint/index.js","webpack://my-editor/./src/module/format/index.js","webpack://my-editor/./src/module/diff/index.js","webpack://my-editor/./src/module/autocomplete/index.js","webpack://my-editor/./src/common/btree.js","webpack://my-editor/./src/module/fold/index.js","webpack://my-editor/./src/module/search/index.js","webpack://my-editor/./src/module/select/index.js","webpack://my-editor/./src/module/cursor/index.js","webpack://my-editor/./src/module/history/index.js","webpack://my-editor/./src/module/context/index.js","webpack://my-editor/./src/module/shortcut/editor.js","webpack://my-editor/./src/components/EditorMenu.vue","webpack://my-editor/./src/components/Menu.vue","webpack://my-editor/./src/components/VScrollBar.vue","webpack://my-editor/src/components/VScrollBar.vue","webpack://my-editor/./src/components/VScrollBar.vue?5170","webpack://my-editor/./src/components/VScrollBar.vue?f728","webpack://my-editor/src/components/Menu.vue","webpack://my-editor/./src/components/Menu.vue?1a67","webpack://my-editor/./src/components/Menu.vue?2bc7","webpack://my-editor/src/components/EditorMenu.vue","webpack://my-editor/./src/components/EditorMenu.vue?05f7","webpack://my-editor/./src/components/EditorMenu.vue?76bd","webpack://my-editor/./src/components/Search.vue","webpack://my-editor/src/components/Search.vue","webpack://my-editor/./src/components/Search.vue?1c5d","webpack://my-editor/./src/components/Search.vue?6fdd","webpack://my-editor/./src/components/AutoTip.vue","webpack://my-editor/src/components/AutoTip.vue","webpack://my-editor/./src/components/AutoTip.vue?023b","webpack://my-editor/./src/components/AutoTip.vue?b9d2","webpack://my-editor/./src/components/Tip.vue","webpack://my-editor/src/components/Tip.vue","webpack://my-editor/./src/components/Tip.vue?9d3c","webpack://my-editor/./src/components/Tip.vue?284c","webpack://my-editor/./src/components/Minimap.vue","webpack://my-editor/./src/work/minimap.js","webpack://my-editor/src/components/Minimap.vue","webpack://my-editor/./src/components/Minimap.vue?f4aa","webpack://my-editor/./src/components/Minimap.vue?6b15","webpack://my-editor/./src/components/HScrollBar.vue","webpack://my-editor/src/components/HScrollBar.vue","webpack://my-editor/./src/components/HScrollBar.vue?07ef","webpack://my-editor/./src/components/HScrollBar.vue?7a02","webpack://my-editor/src/components/Editor.vue","webpack://my-editor/./src/components/Editor.vue?571e","webpack://my-editor/./src/components/Editor.vue?87e1","webpack://my-editor/./src/components/EditorBar.vue","webpack://my-editor/./src/components/EditorBarMenu.vue","webpack://my-editor/src/components/EditorBarMenu.vue","webpack://my-editor/./src/components/EditorBarMenu.vue?568d","webpack://my-editor/./src/components/EditorBarMenu.vue?8601","webpack://my-editor/./src/module/shortcut/editor-bar.js","webpack://my-editor/src/components/EditorBar.vue","webpack://my-editor/./src/components/EditorBar.vue?fed6","webpack://my-editor/./src/components/EditorBar.vue?79b8","webpack://my-editor/./src/components/TitleBar.vue","webpack://my-editor/./src/module/shortcut/menu-bar.js","webpack://my-editor/src/components/TitleBar.vue","webpack://my-editor/./src/components/TitleBar.vue?afa7","webpack://my-editor/./src/components/TitleBar.vue?e731","webpack://my-editor/./src/components/StatusBar.vue","webpack://my-editor/src/components/StatusBar.vue","webpack://my-editor/./src/components/StatusBar.vue?a995","webpack://my-editor/./src/components/StatusBar.vue?f4e9","webpack://my-editor/./src/components/SideBar.vue","webpack://my-editor/./src/components/SideTree.vue","webpack://my-editor/src/components/SideTree.vue","webpack://my-editor/./src/components/SideTree.vue?9770","webpack://my-editor/./src/components/SideTree.vue?866c","webpack://my-editor/./src/components/SideBarMenu.vue","webpack://my-editor/src/components/SideBarMenu.vue","webpack://my-editor/./src/components/SideBarMenu.vue?5c47","webpack://my-editor/./src/components/SideBarMenu.vue?459b","webpack://my-editor/./src/components/SideTreMenu.vue","webpack://my-editor/src/components/SideTreMenu.vue","webpack://my-editor/./src/components/SideTreMenu.vue?ac34","webpack://my-editor/./src/components/SideTreMenu.vue?5903","webpack://my-editor/src/components/SideBar.vue","webpack://my-editor/./src/components/SideBar.vue?dc7e","webpack://my-editor/./src/components/SideBar.vue?43c1","webpack://my-editor/./src/components/ActivityBar.vue","webpack://my-editor/src/components/ActivityBar.vue","webpack://my-editor/./src/components/ActivityBar.vue?bac8","webpack://my-editor/./src/components/ActivityBar.vue?e600","webpack://my-editor/./src/components/FileContentSearch.vue","webpack://my-editor/./src/components/FileContentSearchResults.vue","webpack://my-editor/src/components/FileContentSearchResults.vue","webpack://my-editor/./src/components/FileContentSearchResults.vue?e619","webpack://my-editor/./src/components/FileContentSearchResults.vue?33b7","webpack://my-editor/src/components/FileContentSearch.vue","webpack://my-editor/./src/components/FileContentSearch.vue?41e3","webpack://my-editor/./src/components/FileContentSearch.vue?22a2","webpack://my-editor/./src/components/Dialog.vue","webpack://my-editor/src/components/Dialog.vue","webpack://my-editor/./src/components/Dialog.vue?e5a9","webpack://my-editor/./src/components/Dialog.vue?1dd3","webpack://my-editor/./src/components/CmdPanel.vue","webpack://my-editor/./src/module/theme/index.js","webpack://my-editor/src/components/CmdPanel.vue","webpack://my-editor/./src/components/CmdPanel.vue?0731","webpack://my-editor/./src/components/CmdPanel.vue?0728","webpack://my-editor/./src/components/Terminal.vue","webpack://my-editor/src/components/Terminal.vue","webpack://my-editor/./src/components/Terminal.vue?f003","webpack://my-editor/./src/components/Terminal.vue?4425","webpack://my-editor/./src/components/TerminalBar.vue","webpack://my-editor/./src/components/TerminalBarMenu.vue","webpack://my-editor/src/components/TerminalBarMenu.vue","webpack://my-editor/./src/components/TerminalBarMenu.vue?4102","webpack://my-editor/./src/components/TerminalBarMenu.vue?d347","webpack://my-editor/./src/module/shortcut/terminal-bar.js","webpack://my-editor/src/components/TerminalBar.vue","webpack://my-editor/./src/components/TerminalBar.vue?f674","webpack://my-editor/./src/components/TerminalBar.vue?bb7d","webpack://my-editor/./src/events/terminal.js","webpack://my-editor/./src/events/editor.js","webpack://my-editor/./src/events/file.js","webpack://my-editor/./src/events/theme.js","webpack://my-editor/./src/events/git.js","webpack://my-editor/./src/events/index.js","webpack://my-editor/./src/module/shortcut/window.js","webpack://my-editor/./src/module/persistence/index.js","webpack://my-editor/src/components/Window.vue","webpack://my-editor/./src/components/Window.vue?4a1c","webpack://my-editor/./src/components/Window.vue?7bf5","webpack://my-editor/src/App.vue","webpack://my-editor/./src/App.vue?51dd","webpack://my-editor/./src/App.vue?0e40","webpack://my-editor/./src/main.js","webpack://my-editor/webpack/bootstrap","webpack://my-editor/webpack/runtime/chunk loaded","webpack://my-editor/webpack/runtime/compat get default export","webpack://my-editor/webpack/runtime/define property getters","webpack://my-editor/webpack/runtime/global","webpack://my-editor/webpack/runtime/hasOwnProperty shorthand","webpack://my-editor/webpack/runtime/jsonp chunk loading","webpack://my-editor/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Window')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"window\",staticClass:\"my-window\",class:{ 'my-theme-dark': _vm.themeType === 'dark', 'my-theme-light': _vm.themeType === 'light' },style:({ 'padding-top': _vm._topBarHeight, 'padding-bottom': _vm._statusHeight }),on:{\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();},\"mousedown\":_vm.onWindMouseDown}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sidebarVisible),expression:\"sidebarVisible\"}],staticClass:\"my-left-warp\",style:({ width: _vm.leftWidth + 'px' })},[_c('activity-bar',{ref:\"activityBar\"}),_c('div',{staticStyle:{\"flex-grow\":\"1\"}},[_c('side-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activity === 'files'),expression:\"activity === 'files'\"}],ref:\"sideBar\"}),_c('file-content-search',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activity === 'search'),expression:\"activity === 'search'\"}]})],1),_c('div',{staticClass:\"my-sash-v\",staticStyle:{\"position\":\"absolute\",\"right\":\"-4px\"},on:{\"mousedown\":_vm.onLeftSashBegin}})],1),_c('div',{ref:\"rightWrap\",staticClass:\"my-right-wrap\"},[_c('editor-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.editorList.length),expression:\"editorList.length\"}],attrs:{\"editorList\":_vm.editorList}}),_c('div',{staticClass:\"my-editor-groups\"},[_vm._l((_vm.editorList),function(item){return [_c('editor',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.active),expression:\"item.active\"}],key:item.id,ref:'editor' + item.id,refInFor:true,attrs:{\"active\":item.active,\"tab-data\":item}})]})],2),(_vm.terminalVisible && _vm.terminalList.length)?[_c('div',{staticClass:\"my-sash-h\",on:{\"mousedown\":_vm.onTerminalSashBegin}}),_c('div',{staticClass:\"my-terminal-groups\",style:({height: _vm.terminalHeight+'px'})},[_c('terminal-bar',{attrs:{\"terminalList\":_vm.terminalList}}),_vm._l((_vm.terminalList),function(item){return [_c('terminal',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.active),expression:\"item.active\"}],key:item.id,ref:'terminal' + item.id,refInFor:true,attrs:{\"active\":item.active,\"id\":item.id,\"path\":item.path}})]})],2)]:_vm._e()],2),_c('title-bar',{ref:\"titleBar\",attrs:{\"height\":_vm.topBarHeight}}),_c('status-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.statusbarVisible),expression:\"statusbarVisible\"}],ref:\"statusBar\",attrs:{\"height\":_vm.statusHeight}}),_c('cmd-panel'),_c('Dialog',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dialogVisible),expression:\"dialogVisible\"}],attrs:{\"btns\":_vm.dialogBtns,\"content\":_vm.dialogContent,\"icon\":this.dialogIcon,\"icon-color\":this.dialogIconColor,\"overlay\":true,\"title\":_vm.dialogTilte},on:{\"close\":_vm.closeDialog}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"editor\",staticClass:\"my-editor-wrap\",on:{\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onContextmenu.apply(null, arguments)},\"mouseenter\":_vm.showScrollBar,\"mouseleave\":_vm.hideScrollBar,\"mousemove\":_vm.showScrollBar,\"selectstart\":function($event){$event.preventDefault();},\"wheel\":function($event){$event.stopPropagation();return _vm.onWheel.apply(null, arguments)}}},[_c('div',{staticClass:\"my-num-wrap\"},[_c('div',{staticClass:\"my-num\",staticStyle:{\"position\":\"relative\",\"visibility\":\"hidden\"}},[_vm._v(_vm._s(_vm.diffObj.maxLine || _vm.maxLine))]),_c('div',{ref:\"numScroller\",staticClass:\"my-num-scroller\"},[_c('div',{ref:\"numContent\",staticClass:\"my-num-content\",style:({ height: _vm._maxContentHeight, top: _vm._top })},_vm._l((_vm.renderNums),function(numItem){return _c('div',{staticClass:\"my-num\",class:{ 'my-active': _vm.nowCursorPos.line === numItem.num },style:({ top: numItem.top })},[_c('span',{staticClass:\"num\"},[_vm._v(_vm._s(numItem._num))]),(numItem.fold)?_c('span',{staticClass:\"my-fold my-center-center\",class:['iconfont', numItem.fold == 'open' ? 'my-fold-open icon-down1' : 'my-fold-close icon-right'],on:{\"click\":function($event){return _vm.onToggleFold(numItem.num)}}}):_vm._e(),(_vm.type !== 'diff')?[(numItem.diffType)?_c('span',{staticClass:\"my-diff-num\",class:[numItem.diffType],on:{\"click\":function($event){return _vm.onShowDiff(numItem.num)}}}):_vm._e()]:_vm._e()],2)}),0)])]),_c('div',{staticClass:\"my-content-wrap\"},[_c('div',{ref:\"scroller\",staticClass:\"my-scroller\",on:{\"scroll\":_vm.onScroll}},[_c('div',{ref:\"content\",staticClass:\"my-content\",style:({ width: _vm._contentMinWidth + 'px', height: _vm._maxContentHeight, left: _vm._left, top: _vm._top }),on:{\"mousedown\":_vm.onContentMdown,\"mouseleave\":_vm.onContentMLeave,\"mousemove\":_vm.onContentMmove,\"selectend\":function($event){$event.preventDefault();return _vm.onSelectend.apply(null, arguments)}}},[_c('div',{ref:\"lineView\",staticClass:\"my-lines-view\"},_vm._l((_vm.renderObjs),function(line){return _c('div',{staticClass:\"my-line\",class:[_vm._diffBg(line.num)],style:({top: line.top}),attrs:{\"data-line\":line.num,\"id\":_vm._lineId(line.num)}},[_c('div',{staticClass:\"my-code\",class:[line.fold == 'close' ? 'fold-close' : '', line.bgClass],attrs:{\"data-line\":line.num},domProps:{\"innerHTML\":_vm._s(line.html)}})])}),0),_c('div',{ref:\"cursorView\",staticClass:\"my-cursor-view\"},[_vm._l((_vm.renderCursorObjs),function(posList){return _vm._l((posList),function(pos){return _c('span',{staticClass:\"my-cursor\",style:({ height: _vm._lineHeight, left: pos.left, top: pos.top, visibility: _vm._cursorVisible })})})})],2),_c('div',{staticClass:\"my-bg-view\"},[_vm._l((_vm.renderSelectionObjs),function(range){return _c('div',{staticClass:\"my-select-bg\",class:{ 'my-active': range.active, 'my-search-bg': range.isFsearch },style:({ top: range.top, left: range.left, width: range.width, height: _vm._lineHeight })})}),(_vm.activeLineBg)?_c('div',{staticClass:\"my-line-bg\",style:({height: _vm._lineHeight, top: _vm._activeLineTop})}):_vm._e(),(_vm._bracketStartVisible)?_c('div',{staticClass:\"my-bracket-match\",style:(_vm._bracketStartStyle)}):_vm._e(),(_vm._bracketEndVisible)?_c('div',{staticClass:\"my-bracket-match\",style:(_vm._bracketEndStyle)}):_vm._e()],2),_c('div',{staticClass:\"my-indent-view\"},_vm._l((_vm.renderObjs),function(line){return _c('div',{staticClass:\"my-indent-line\",style:({height: _vm._lineHeight, top: line.top}),domProps:{\"innerHTML\":_vm._s(_vm._tabLines(line.tabNum))}})}),0),_c('auto-tip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.autoTipList && _vm.autoTipList.length),expression:\"autoTipList && autoTipList.length\"}],ref:\"autoTip\",attrs:{\"styles\":_vm.autoTipStyle,\"tipList\":_vm.autoTipList},on:{\"change\":_vm.onClickAuto}})],1),_c('textarea',{ref:\"textarea\",staticClass:\"my-textarea\",style:({ top: _vm._textAreaPos.top, left: _vm._textAreaPos.left, height: _vm._lineHeight  }),on:{\"blur\":_vm.onBlur,\"compositionend\":_vm.onCompositionend,\"compositionstart\":_vm.onCompositionstart,\"copy\":function($event){$event.preventDefault();return _vm.onCopy.apply(null, arguments)},\"cut\":function($event){$event.preventDefault();return _vm.onCut.apply(null, arguments)},\"focus\":_vm.onFocus,\"input\":_vm.onInput,\"keydown\":_vm.onKeydown,\"paste\":function($event){$event.preventDefault();return _vm.onPaste.apply(null, arguments)}}}),_c('h-scroll-bar',{staticClass:\"my-editor-scrollbar-h\",class:{'my-scroll-visible': _vm.scrollVisible},attrs:{\"scroll-left\":_vm.scrollLeft,\"width\":_vm._contentMinWidth},on:{\"scroll\":_vm.onHBarScroll}}),(_vm._leftShadow)?_c('div',{staticClass:\"my-scroller-shadow-left\"}):_vm._e(),(_vm._rightShadow)?_c('div',{staticClass:\"my-scroller-shadow-right\"}):_vm._e()],1),_c('search-dialog',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchVisible),expression:\"searchVisible\"}],ref:\"searchDialog\",attrs:{\"count\":_vm.searchCount,\"now\":_vm.searchNow},on:{\"close\":_vm.onCloseSearch,\"next\":function($event){return _vm.onSearchNext()},\"prev\":function($event){return _vm.onSearchPrev()},\"replace\":_vm.replace,\"replaceAll\":_vm.replaceAll,\"search\":_vm.onSearch}})],1),(_vm.minimapVisible)?_c('div',{staticClass:\"my-minimap-wrap\"},[_c('minimap',{ref:\"minimap\",attrs:{\"content-height\":_vm.contentHeight,\"now-line\":_vm.startLine,\"scroll-top\":_vm.scrollTop}})],1):_vm._e(),_c('v-scroll-bar',{staticClass:\"my-editor-scrollbar-v\",class:{'my-scroll-visible': _vm.scrollVisible},attrs:{\"height\":_vm.contentHeight,\"scroll-top\":_vm.scrollTop},on:{\"scroll\":_vm.onVBarScroll}}),_c('editor-menu',{ref:\"menu\"}),_c('tip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tipContent),expression:\"tipContent\"}],ref:\"tip\",attrs:{\"content\":_vm.tipContent,\"styles\":_vm.tipStyle}}),(_vm.diffVisible)?_c('div',{ref:\"diff\",staticClass:\"my-diff-editor\",style:({top: _vm.diffTop + 'px', height: _vm.diffHeight+'px'})},[_c('div',{staticClass:\"my-diff-bar\"},[_c('span',{staticStyle:{\"margin-right\":\"20px\"}},[_vm._v(_vm._s(_vm.tabData.name))]),_c('div',{staticClass:\"bar-item my-hover-danger\",on:{\"click\":_vm.onCloseDiff}},[_c('span',{staticClass:\"iconfont icon-close\",staticStyle:{\"font-size\":\"18px\"}})])]),_c('editor',{staticStyle:{\"flex\":\"1\"},attrs:{\"active\":true,\"diff-obj\":_vm.toShowdiffObj,\"tab-data\":_vm.diffTabData,\"type\":\"diff\"}}),_c('div',{staticClass:\"my-sash-h\",on:{\"mousedown\":_vm.onDiffBottomSashBegin}})],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * @Author: lisong\r\n * @Date: 2020-10-31 13:48:50\r\n * @Description: 工具类\r\n */\r\nimport stripJsonComments from 'strip-json-comments';\r\nimport $ from 'jquery';\r\n\r\nconst fs = window.require('fs');\r\nconst fse = window.require('fs-extra');\r\nconst path = window.require('path');\r\n\r\nclass Util {\r\n\tstatic readClipboard() {\r\n\t\tif (window.clipboardData) {\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tresolve(clipboardData.getData('Text'));\r\n\t\t\t});\r\n\t\t} else if (navigator.clipboard) {\r\n\t\t\treturn navigator.clipboard.readText();\r\n\t\t}\r\n\t}\r\n\tstatic writeClipboard(text) {\r\n\t\tif (window.clipboardData) {\r\n\t\t\tclipboardData.setData('Text', text);\r\n\t\t} else if (navigator.clipboard) {\r\n\t\t\tnavigator.clipboard.writeText(text);\r\n\t\t}\r\n\t}\r\n\t//获取数字\r\n\tstatic getNum(value) {\r\n\t\tvalue = String(value);\r\n\t\tvalue = value.replace(/[^0123456789\\.]/g, '');\r\n\t\tvar regex = /^\\d+(\\.\\d*)?$/;\r\n\t\tvar r = regex.exec(value);\r\n\t\tvar num = (r && r[0]) || '';\r\n\t\tif (num) {\r\n\t\t\tnum = Number(r[0]);\r\n\t\t}\r\n\t\treturn num;\r\n\t}\r\n\t//生成指定个数的空白符\r\n\tstatic space(tabSize) {\r\n\t\tvar val = '';\r\n\t\tfor (var tmp = 0; tmp < tabSize; tmp++) {\r\n\t\t\tval += ' ';\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\t//数组数字排序\r\n\tstatic sortNum(arr) {\r\n\t\tarr.sort(function (arg1, arg2) {\r\n\t\t\treturn Number(arg1) - Number(arg2);\r\n\t\t});\r\n\t}\r\n\tstatic debounce(cb, delay) {\r\n\t\tvar timer = null;\r\n\t\treturn function () {\r\n\t\t\tclearTimeout(timer);\r\n\t\t\ttimer = setTimeout(function () {\r\n\t\t\t\tcb();\r\n\t\t\t}, delay);\r\n\t\t};\r\n\t}\r\n\tstatic throttle(cb, delay) {\r\n\t\tvar timer = null;\r\n\t\treturn function () {\r\n\t\t\tif (!timer) {\r\n\t\t\t\ttimer = setTimeout(function () {\r\n\t\t\t\t\tcb();\r\n\t\t\t\t}, delay);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t//获取字符宽度\r\n\tstatic getCharWidth(wrap, template) {\r\n\t\tvar str1 = '------------------------------------------------------------------------------------';\r\n\t\tvar str2 = '一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一';\r\n\t\tvar id1 = 'char-width-' + Util.getUUID();\r\n\t\tvar id2 = 'char-width-' + Util.getUUID();\r\n\t\tvar $tempDom1 = $(template.replace('[dom]', `<span style=\"display:inline-block\" id=\"${id1}\">${str1}</span>`));\r\n\t\tvar $tempDom2 = $(template.replace('[dom]', `<span style=\"display:inline-block\" id=\"${id2}\">${str2}</span>`));\r\n\t\t$(wrap).append($tempDom1).append($tempDom2);\r\n\t\tvar charWidth = $(`#${id1}`)[0].scrollWidth / str1.length;\r\n\t\tvar charHight = $(`#${id1}`)[0].clientHeight;\r\n\t\tvar fontSize = window.getComputedStyle ? window.getComputedStyle($(`#${id1}`)[0], null).fontSize : $tempDom1[0].currentStyle.fontSize;\r\n\t\tvar fullAngleCharWidth = $(`#${id2}`)[0].scrollWidth / str2.length;\r\n\t\t$tempDom1.remove();\r\n\t\t$tempDom2.remove();\r\n\t\treturn {\r\n\t\t\tcharWidth: charWidth,\r\n\t\t\tfullAngleCharWidth: fullAngleCharWidth,\r\n\t\t\tcharHight: charHight,\r\n\t\t\tfontSize: fontSize\r\n\t\t};\r\n\t}\r\n\t/**\r\n\t * 获取文本在浏览器中的真实宽度\r\n\t * @param  {string} str       文本\r\n\t * @param  {number} charW     半角符号/文字宽度\r\n\t * @param  {number} fullCharW 全角符号/文字宽度\r\n\t * @param  {number} tabSize   tab符所占宽度\r\n\t * @param  {number} start     文本开始索引\r\n\t * @param  {number} end       文本结束索引\r\n\t * @return {number}           文本真实宽度\r\n\t */\r\n\tstatic getStrWidth(str, charW, fullCharW, tabSize, start, end) {\r\n\t\ttabSize = tabSize || 4;\r\n\t\tif (typeof start != 'undefined') {\r\n\t\t\tstr = str.substr(start);\r\n\t\t}\r\n\t\tif (typeof end != 'undefined') {\r\n\t\t\tstr = str.substring(0, end - start);\r\n\t\t}\r\n\t\tvar match = str.match(Util.FULL_ANGLE_REG);\r\n\t\tvar width = str.length * charW;\r\n\t\tvar tabNum = str.match(/\\t/g);\r\n\t\ttabNum = (tabNum && tabNum.length) || 0;\r\n\t\tmatch = (match && match.length) || 0;\r\n\t\tif (match) {\r\n\t\t\tmatch = match - tabNum;\r\n\t\t\twidth = match * fullCharW + (str.length - match) * charW;\r\n\t\t\twidth += tabNum * charW * (tabSize - 1);\r\n\t\t}\r\n\t\treturn width;\r\n\t}\r\n\t/**\r\n\t * 获取文本在浏览器中的真实宽度\r\n\t * @param  {string} str       文本\r\n\t * @param  {DOM} wrap     容器\r\n\t */\r\n\tstatic getStrExactWidth(str, tabSize, wrap) {\r\n\t\tUtil.getStrExactWidth.count = Util.getStrExactWidth.count || 0;\r\n\t\tUtil.getStrExactWidth.count++;\r\n\t\tif (!str) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tvar id = 'str-width-' + Util.getUUID();\r\n\t\tvar $tempDom = $(`<div class=\"my-line my-temp-text\" style=\"visibility:hidden\">\r\n        <div class=\"my-code\" id=\"${id}\">${_splitStr(str)}</div>\r\n        </div>`);\r\n\t\t$(wrap).append($tempDom);\r\n\t\tvar dom = $('#' + id)[0];\r\n\t\tvar charWidth = dom.clientWidth;\r\n\t\t$('.my-temp-text').remove();\r\n\t\t// if (Util.getStrExactWidth.count > 5) { //避免频繁删除dom导致浏览器卡顿\r\n\t\t//     $('.my-temp-text').remove();\r\n\t\t// } else {\r\n\t\t//     clearTimeout(Util.getStrExactWidth.timer);\r\n\t\t//     Util.getStrExactWidth.timer = setTimeout(() => {\r\n\t\t//         $('.my-temp-text').remove();\r\n\t\t//     }, 500);\r\n\t\t// }\r\n\t\treturn charWidth;\r\n\r\n\t\tfunction _splitStr(str) {\r\n\t\t\tlet count = Math.floor(str.length / 100);\r\n\t\t\tlet result = [];\r\n\t\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\t\tlet column = i * 100;\r\n\t\t\t\tresult.push(Util.htmlTrans(str.slice(column, column + 100)));\r\n\t\t\t}\r\n\t\t\tcount = count * 100;\r\n\t\t\tif (count < str.length) {\r\n\t\t\t\tresult.push(Util.htmlTrans(str.slice(count)));\r\n\t\t\t}\r\n\t\t\treturn `<span>${result.join('</span><span>').replace(/\\t/g, Util.space(tabSize || 4))}</span>`;\r\n\t\t}\r\n\t}\r\n\t//<,>转义\r\n\tstatic htmlTrans(cont) {\r\n\t\tcont = cont.replace(/\\&\\#/g, '&amp;#');\r\n\t\treturn cont.replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n\t}\r\n\t// 深度克隆\r\n\tstatic deepAssign(targetObj, originObj, noDeepKeys) {\r\n\t\treturn _assign(targetObj, originObj, noDeepKeys, new Map());\r\n\r\n\t\tfunction _assign(targetObj, originObj, noDeepKeys, assigned) {\r\n\t\t\tnoDeepKeys = noDeepKeys || [];\r\n\t\t\tfor (var key in originObj) {\r\n\t\t\t\tvar value = originObj[key];\r\n\t\t\t\tif (noDeepKeys.indexOf(key) > -1) {\r\n\t\t\t\t\ttargetObj[key] = value;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof value === 'object' && !(value instanceof RegExp) && value !== null && (!value.nodeName || !value.nodeType)) {\r\n\t\t\t\t\tif (assigned.has(value)) {\r\n\t\t\t\t\t\ttargetObj[key] = assigned.get(value);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet tmp = null;\r\n\t\t\t\t\t\tif (value instanceof Array) {\r\n\t\t\t\t\t\t\ttmp = targetObj[key] || [];\r\n\t\t\t\t\t\t\tassigned.set(value, tmp);\r\n\t\t\t\t\t\t\ttargetObj[key] = _assign(tmp, value, noDeepKeys, new Map(assigned));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttmp = targetObj[key] || {};\r\n\t\t\t\t\t\t\tassigned.set(value, tmp);\r\n\t\t\t\t\t\t\ttargetObj[key] = _assign(tmp, value, noDeepKeys, new Map(assigned));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttargetObj[key] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn targetObj;\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 比较坐标的前后\r\n\t * @param {Object} start\r\n\t * @param {Object} end\r\n\t */\r\n\tstatic comparePos(start, end) {\r\n\t\tif (start.line > end.line || (start.line == end.line && start.column > end.column)) {\r\n\t\t\treturn 1;\r\n\t\t} else if (start.line == end.line && start.column == end.column) {\r\n\t\t\treturn 0;\r\n\t\t} else {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\tstatic diffObj(obj1, obj2) {\r\n\t\treturn JSON.stringify(obj1) !== JSON.stringify(obj2);\r\n\t}\r\n\tstatic createWorker(fun) {\r\n\t\tvar funStr = `(${fun.toString()})()`;\r\n\t\tvar blob = new Blob([funStr]);\r\n\t\tvar url = window.URL.createObjectURL(blob);\r\n\t\tvar worker = new Worker(url);\r\n\t\treturn worker;\r\n\t}\r\n\tstatic defineProperties(target, context, properties) {\r\n\t\tlet result = {};\r\n\t\tproperties.forEach(property => {\r\n\t\t\tresult[property] = {\r\n\t\t\t\tget: function () {\r\n\t\t\t\t\tif (typeof context[property] == 'function') {\r\n\t\t\t\t\t\treturn context[property].bind(context);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn context[property];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\t\tObject.defineProperties(target, result);\r\n\t}\r\n\tstatic readFile(path) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tfs.readFile(path, { encoding: 'utf8' }, (error, data) => (error ? reject(error) : resolve(data)));\r\n\t\t});\r\n\t}\r\n\tstatic writeFile(path, data) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tfse.ensureFile(path).then(() => {\r\n\t\t\t\tfs.writeFile(path, data, { encoding: 'utf8' }, error => (error ? reject(error) : resolve()));\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tstatic writeFileSync(path, data) {\r\n\t\tfse.ensureFileSync(path);\r\n\t\tfs.writeFileSync(path, data, { encoding: 'utf8' });\r\n\t}\r\n\tstatic loadJsonFile(fullPath) {\r\n\t\treturn Util.readFile(fullPath).then(data => {\r\n\t\t\tdata = data.toString();\r\n\t\t\tdata = stripJsonComments(data);\r\n\t\t\tdata = data.replaceAll(/\\,(?=\\s*(?:(?:\\r\\n|\\n|\\r))*\\s*[\\]\\}])/g, '');\r\n\t\t\tdata = (data && JSON.parse(data)) || {};\r\n\t\t\treturn data;\r\n\t\t});\r\n\t}\r\n\tstatic loadJsonFileSync(fullPath) {\r\n\t\tlet data = fs.readFileSync(fullPath, { encoding: 'utf8' });\r\n\t\tdata = data.toString();\r\n\t\tdata = stripJsonComments(data);\r\n\t\tdata = data.replaceAll(/\\,(?=\\s*(?:(?:\\r\\n|\\n|\\r))*\\s*[\\]\\}])/g, '');\r\n\t\tdata = (data && JSON.parse(data)) || {};\r\n\t\treturn data;\r\n\t}\r\n\tstatic checkGitRep(filePath) {\r\n\t\twhile (filePath.length > 3) {\r\n\t\t\tif (fs.existsSync(path.join(filePath, '.git'))) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tfilePath = path.dirname(filePath);\r\n\t\t}\r\n\t}\r\n\tstatic getIgnore(filePath) {\r\n\t\twhile (filePath.length > 3) {\r\n\t\t\tif (fs.existsSync(path.join(filePath, '.gitignore'))) {\r\n\t\t\t\treturn path.join(filePath, '.gitignore');\r\n\t\t\t}\r\n\t\t\tfilePath = path.dirname(filePath);\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 模糊匹配【word是否存在于target中】\r\n\t * @param {String} word 被搜索的单词\r\n\t * @param {String} target 模板单词\r\n\t */\r\n\tstatic fuzzyMatch(word, target, fullMatch) {\r\n\t\tlet wordMap = {};\r\n\t\tlet towMap = {};\r\n\t\tlet wordLength = 0;\r\n\t\tlet score = 0;\r\n\t\tlet preFinedChar = '';\r\n\t\tlet preFinedOriginChar = '';\r\n\t\tlet preFinded = false;\r\n\t\tlet targetMap = {};\r\n\t\tlet count = 0;\r\n\t\tlet indexs = [];\r\n\t\tlet result = null;\r\n\t\tlet _target = target.toLowerCase();\r\n\t\tif (word === target) {\r\n\t\t\treturn fullMatch ? { score: 100, indexs: [] } : null;\r\n\t\t}\r\n\t\t_setMap();\r\n\t\tfor (let i = 0; i < target.length; i++) {\r\n\t\t\tlet originChar = target[i];\r\n\t\t\tlet char = _target[i];\r\n\t\t\tif (\r\n\t\t\t\twordMap[char] &&\r\n\t\t\t\t//保证前后字符顺序最多只出现一个位置颠倒且颠倒的两个字符必须相邻\r\n\t\t\t\t(!preFinedChar || towMap[preFinedChar + char] || (towMap[char + preFinedChar] && preFinded))\r\n\t\t\t) {\r\n\t\t\t\tif (!targetMap[char] || targetMap[char] < wordMap[char]) {\r\n\t\t\t\t\ttargetMap[char] = targetMap[char] ? targetMap[char] + 1 : 1;\r\n\t\t\t\t\tindexs.push(i);\r\n\t\t\t\t\tif (char === '_' || char === '$') {\r\n\t\t\t\t\t\t//检测到连接符+10分\r\n\t\t\t\t\t\tscore += 10;\r\n\t\t\t\t\t} else if (preFinded) {\r\n\t\t\t\t\t\t//检测到连续匹配\r\n\t\t\t\t\t\tscore += 5;\r\n\t\t\t\t\t\tif (towMap[preFinedChar + char]) {\r\n\t\t\t\t\t\t\t//连续匹配且顺序正确\r\n\t\t\t\t\t\t\tscore += 1;\r\n\t\t\t\t\t\t\tif (_humpCheck(preFinedOriginChar, originChar) && preFinded) {\r\n\t\t\t\t\t\t\t\t//检测到驼峰命名+10分\r\n\t\t\t\t\t\t\t\tscore += 5;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (_complete(char)) {\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!towMap[char + preFinedChar] || towMap[preFinedChar + char]) {\r\n\t\t\t\t\t\tpreFinedChar = char;\r\n\t\t\t\t\t\tpreFinedOriginChar = originChar;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpreFinded = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//检测到字符不匹配-1分\r\n\t\t\t\t\tscore--;\r\n\t\t\t\t\tpreFinded = char === preFinedChar;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (!count && score > -9) {\r\n\t\t\t\t\t//检测到前三个首字符不匹配-3分\r\n\t\t\t\t\tscore -= 3;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//检测到字符不匹配-1分\r\n\t\t\t\t\tscore--;\r\n\t\t\t\t}\r\n\t\t\t\tpreFinded = char === preFinedChar;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 预处理搜素单词\r\n\t\tfunction _setMap() {\r\n\t\t\tif (Util.fuzzyMatch.cache && Util.fuzzyMatch.cache.word === word) {\r\n\t\t\t\twordMap = Util.fuzzyMatch.cache.wordMap;\r\n\t\t\t\ttowMap = Util.fuzzyMatch.cache.towMap;\r\n\t\t\t\twordLength = Util.fuzzyMatch.cache.wordLength;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet preChar = '';\r\n\t\t\tfor (let i = 0; i < word.length; i++) {\r\n\t\t\t\tlet char = word[i].toLowerCase();\r\n\t\t\t\twordMap[char] = wordMap[char] ? wordMap[char] + 1 : 1;\r\n\t\t\t\tif (i > 0) {\r\n\t\t\t\t\ttowMap[preChar + char] = true;\r\n\t\t\t\t}\r\n\t\t\t\tpreChar = char;\r\n\t\t\t}\r\n\t\t\twordLength = Object.keys(wordMap).length;\r\n\t\t\tUtil.fuzzyMatch.cache = {\r\n\t\t\t\tword: word,\r\n\t\t\t\twordMap: wordMap,\r\n\t\t\t\ttowMap: towMap,\r\n\t\t\t\twordLength: wordLength\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// 检查驼峰命名\r\n\t\tfunction _humpCheck(preChar, char) {\r\n\t\t\tlet preCode = preChar.charCodeAt(0);\r\n\t\t\tlet charCode = char.charCodeAt(0);\r\n\t\t\tif ((preCode < 97 && charCode >= 97) || (charCode < 97 && preCode >= 97)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// 检查是否匹配完成\r\n\t\tfunction _complete(char) {\r\n\t\t\tif (targetMap[char] === wordMap[char]) {\r\n\t\t\t\tif (++count === wordLength) {\r\n\t\t\t\t\tresult = {\r\n\t\t\t\t\t\tscore: score,\r\n\t\t\t\t\t\tindexs: indexs\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tstatic getUUID(len) {\r\n\t\tlen = len || 16;\r\n\t\tvar str = '';\r\n\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\tstr += ((Math.random() * 16) | 0).toString(16);\r\n\t\t}\r\n\t\treturn str;\r\n\t}\r\n\tstatic getLanguageById(languageList, language) {\r\n\t\tfor (let i = 0; i < languageList.length; i++) {\r\n\t\t\tif (languageList[i].language === language) {\r\n\t\t\t\treturn languageList[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tstatic getLanguageByScopeName(languageList, scopeName) {\r\n\t\tfor (let i = 0; i < languageList.length; i++) {\r\n\t\t\tif (languageList[i].scopeName === scopeName) {\r\n\t\t\t\treturn languageList[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tstatic getWordPattern(language) {\r\n\t\tlet wordPattern = globalData.defaultWordPattern;\r\n\t\tlanguage = Util.getLanguageById(globalData.languageList, language);\r\n\t\tif (language) {\r\n\t\t\tlet _wordPattern = globalData.sourceWordMap[language.scopeName];\r\n\t\t\t_wordPattern = _wordPattern && _wordPattern.pattern;\r\n\t\t\twordPattern = _wordPattern || wordPattern;\r\n\t\t}\r\n\t\treturn new RegExp(wordPattern);\r\n\t}\r\n\tstatic getIconByPath({ fileType, filePath, opened, isRoot }) {\r\n\t\tlet fileName = /[^\\\\\\/]+$/.exec(filePath);\r\n\t\tlet suffix1 = '';\r\n\t\tlet suffix2 = '';\r\n\t\tlet iconData = globalData.nowIconData;\r\n\t\tlet themType = globalData.nowTheme.type;\r\n\t\tfileName = fileName && fileName[0];\r\n\t\tif (fileName) {\r\n\t\t\tsuffix1 = /(?<=\\.)[^\\.]+$/.exec(fileName);\r\n\t\t\tsuffix2 = /(?<=\\.)[^\\.]+\\.[^\\.]+$/.exec(fileName);\r\n\t\t\tsuffix1 = suffix1 && suffix1[0];\r\n\t\t\tsuffix2 = suffix2 && suffix2[0];\r\n\t\t}\r\n\t\tif (themType === 'light' || themType === 'contrast light') {\r\n\t\t\ticonData = iconData.light;\r\n\t\t}\r\n\t\tif (fileType === 'dir') {\r\n\t\t\tif (opened) {\r\n\t\t\t\tif (iconData.folderNamesExpanded && iconData.folderNamesExpanded[fileName]) {\r\n\t\t\t\t\treturn iconData.folderNamesExpanded[fileName];\r\n\t\t\t\t}\r\n\t\t\t\tif (isRoot && iconData.rootFolderExpanded) {\r\n\t\t\t\t\treturn iconData.rootFolderExpanded;\r\n\t\t\t\t}\r\n\t\t\t\treturn iconData.folderExpanded || '';\r\n\t\t\t} else {\r\n\t\t\t\tif (iconData.folderNames && iconData.folderNames[fileName]) {\r\n\t\t\t\t\treturn iconData.folderNames[fileName];\r\n\t\t\t\t}\r\n\t\t\t\tif (isRoot && iconData.rootFolder) {\r\n\t\t\t\t\treturn iconData.rootFolder;\r\n\t\t\t\t}\r\n\t\t\t\treturn iconData.folder || '';\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (iconData.fileNames && iconData.fileNames[fileName]) {\r\n\t\t\t\treturn iconData.fileNames[fileName];\r\n\t\t\t}\r\n\t\t\tif (iconData.fileExtensions && iconData.fileExtensions[suffix2]) {\r\n\t\t\t\treturn iconData.fileExtensions[suffix2];\r\n\t\t\t}\r\n\t\t\tif (iconData.fileExtensions && iconData.fileExtensions[suffix1]) {\r\n\t\t\t\treturn iconData.fileExtensions[suffix1];\r\n\t\t\t}\r\n\t\t\treturn iconData.file || '';\r\n\t\t}\r\n\t}\r\n\tstatic getIconByExtensions(extensions) {\r\n\t\tlet iconData = globalData.nowIconData;\r\n\t\tif (globalData.nowTheme.type === 'light') {\r\n\t\t\ticonData = globalData.nowIconData.light;\r\n\t\t}\r\n\t\tif (iconData && iconData.fileExtensions) {\r\n\t\t\tfor (let i = 0; i < extensions.length; i++) {\r\n\t\t\t\tlet ext = extensions[i].slice(1);\r\n\t\t\t\tif (iconData.fileExtensions[ext]) {\r\n\t\t\t\t\treturn iconData.fileExtensions[ext];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn (iconData && iconData.file) || '';\r\n\t}\r\n\tstatic getIdFromPath(filePath, mtimeMs) {\r\n\t\tlet id = '';\r\n\t\ttry {\r\n\t\t\tlet stat = fs.statSync(filePath);\r\n\t\t\tid = `file-${stat.dev}-${stat.ino}${mtimeMs ? '-' + stat.mtimeMs : ''}`;\r\n\t\t} catch (e) {\r\n\t\t\tid = Util.getUUID();\r\n\t\t}\r\n\t\treturn id;\r\n\t}\r\n\tstatic getTabById(editorList, id) {\r\n\t\tfor (let i = 0; i < editorList.length; i++) {\r\n\t\t\tif (editorList[i].id === id) {\r\n\t\t\t\treturn editorList[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tstatic getTabByPath(editorList, filePath) {\r\n\t\tfor (let i = 0; i < editorList.length; i++) {\r\n\t\t\tif (editorList[i].path === filePath) {\r\n\t\t\t\treturn editorList[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tstatic getFileItemByPath(fileTree, filePath, rootPath) {\r\n\t\tlet results = [];\r\n\t\tfor (let i = 0; i < fileTree.length; i++) {\r\n\t\t\tlet item = fileTree[i];\r\n\t\t\tif (rootPath) {\r\n\t\t\t\tif (item.path === rootPath) {\r\n\t\t\t\t\treturn _findItem(item);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (item.path === filePath) {\r\n\t\t\t\t\tresults.push(item);\r\n\t\t\t\t} else if (filePath.startsWith(item.path)) {\r\n\t\t\t\t\tlet result = _findItem(item);\r\n\t\t\t\t\tresult && results.push(result);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!rootPath) {\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\tfunction _findItem(parentItem) {\r\n\t\t\tlet list = parentItem.children;\r\n\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\tlet item = list[i];\r\n\t\t\t\tif (filePath === item.path) {\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t} else if (filePath.startsWith(item.path)) {\r\n\t\t\t\t\treturn _findItem(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tstatic getFileStatus(filePath) {\r\n\t\tlet gitDir = '';\r\n\t\tfor (let key in globalData.fileStatus) {\r\n\t\t\tif (filePath.startsWith(key)) {\r\n\t\t\t\tgitDir = key;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet fileStatus = globalData.fileStatus[gitDir] || {};\r\n\t\tlet status = fileStatus[filePath] || '';\r\n\t\tlet originStatus = status;\r\n\t\tlet statusColor = '';\r\n\t\tstatus = Util.getStatus(status);\r\n\t\tif (!status && globalData.dirStatus[gitDir]) {\r\n\t\t\tlet dirStatus = globalData.dirStatus[gitDir];\r\n\t\t\tfor (let i = 0; i < dirStatus.length; i++) {\r\n\t\t\t\tif (filePath.startsWith(dirStatus[i].path)) {\r\n\t\t\t\t\tstatus = dirStatus[i].status;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tstatusColor = Util.getFileStatusColor(status);\r\n\r\n\t\treturn {\r\n\t\t\tstatus,\r\n\t\t\toriginStatus,\r\n\t\t\tstatusColor\r\n\t\t};\r\n\t}\r\n\tstatic getStatus(status) {\r\n\t\tUtil.getStatus.statusMap = Util.getStatus.statusMap || {};\r\n\t\tlet result = Util.getStatus.statusMap[status];\r\n\t\tif (result) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tlet level = 0;\r\n\t\tresult = '';\r\n\t\tfor (let i = 0; i < status.length; i++) {\r\n\t\t\tif (Util.STATUS_LEVEMAP[status[i]] > level) {\r\n\t\t\t\tlevel = Util.STATUS_LEVEMAP[status[i]];\r\n\t\t\t\tresult = status[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tUtil.getStatus.statusMap[status] = result;\r\n\t\treturn result;\r\n\t}\r\n\tstatic getStatusLevel(status) {\r\n\t\tstatus = Util.getStatus(status);\r\n\t\treturn Util.STATUS_LEVEMAP[status]\r\n\t}\r\n\tstatic getFileStatusColor(status) {\r\n\t\tlet statusMap = {};\r\n\t\tlet statusColor = '';\r\n\t\tfor (let i = 0; i < status.length; i++) {\r\n\t\t\tstatusMap[status[i]] = true;\r\n\t\t}\r\n\t\tif (statusMap['R']) {\r\n\t\t\tstatusColor = 'my-status-rename';\r\n\t\t} else if (statusMap['?']) {\r\n\t\t\tstatusColor = 'my-status-untracked';\r\n\t\t} else if (statusMap['D']) {\r\n\t\t\tstatusColor = 'my-status-deleted';\r\n\t\t} else if (statusMap['M']) {\r\n\t\t\tstatusColor = 'my-status-modified';\r\n\t\t} else if (statusMap['A']) {\r\n\t\t\tstatusColor = 'my-status-added';\r\n\t\t}\r\n\t\treturn statusColor;\r\n\t}\r\n\tstatic getMemnuPos(e, menuEl, areaEl) {\r\n\t\tlet menuWidth = 0;\r\n\t\tlet menuHeight = 0;\r\n\t\tlet menuPos = {};\r\n\t\tlet $menu = $(menuEl);\r\n\t\tlet $parent = $menu.parent();\r\n\t\tlet $area = areaEl ? $(areaEl) : $parent;\r\n\t\tlet offset = $area.offset();\r\n\t\tlet parentOffset = $parent.offset();\r\n\t\tmenuWidth = $menu[0].clientWidth;\r\n\t\tmenuHeight = $menu[0].clientHeight;\r\n\t\tif (menuHeight + e.clientY > offset.top + $area[0].clientHeight) {\r\n\t\t\tmenuPos.top = e.clientY - parentOffset.top - menuHeight + 'px';\r\n\t\t} else {\r\n\t\t\tmenuPos.top = e.clientY - parentOffset.top + 'px';\r\n\t\t}\r\n\t\tif (menuWidth + e.clientX > offset.left + $area[0].clientWidth) {\r\n\t\t\tmenuPos.left = e.clientX - parentOffset.left - menuWidth + 'px';\r\n\t\t} else {\r\n\t\t\tmenuPos.left = e.clientX - parentOffset.left + 'px';\r\n\t\t}\r\n\t\treturn menuPos;\r\n\t}\r\n\tstatic getMatchHtml(text, indexs) {\r\n\t\tlet index = 0;\r\n\t\tlet html = '';\r\n\t\tfor (let i = 0; i < indexs.length; i++) {\r\n\t\t\tlet _index = indexs[i];\r\n\t\t\tif (_index >= text.length) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (index < _index) {\r\n\t\t\t\thtml += `<span class=\"my-unmatch-char\">${Util.htmlTrans(text.slice(index, _index))}</span>`;\r\n\t\t\t}\r\n\t\t\thtml += `<span class=\"my-match-char\">${Util.htmlTrans(text[_index])}</span>`;\r\n\t\t\tindex = _index + 1;\r\n\t\t}\r\n\t\tif (index < text.length) {\r\n\t\t\thtml += `<span class=\"my-unmatch-char\">${Util.htmlTrans(text.slice(index))}</span>`;\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n}\r\nArray.prototype.peek = function (index) {\r\n\tif (this.length) {\r\n\t\treturn this[this.length - (index || 1)];\r\n\t}\r\n};\r\nArray.prototype.empty = function () {\r\n\tthis.length = 0;\r\n\tthis.splice();\r\n\treturn this;\r\n};\r\nArray.prototype.insert = function (item, sort) {\r\n\tif (sort && this.length) {\r\n\t\tlet left = 0,\r\n\t\t\tright = this.length - 1;\r\n\t\twhile (left < right) {\r\n\t\t\tlet mid = Math.floor((left + right) / 2);\r\n\t\t\tif (sort(item, this[mid]) > 0) {\r\n\t\t\t\tleft = mid + 1;\r\n\t\t\t} else {\r\n\t\t\t\tright = mid;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (sort(item, this[left]) < 0) {\r\n\t\t\tleft--;\r\n\t\t}\r\n\t\tthis.splice(left + 1, 0, item);\r\n\t} else {\r\n\t\tthis.push(item);\r\n\t}\r\n};\r\nString.prototype.peek = function (index) {\r\n\tif (this.length) {\r\n\t\treturn this[this.length - (index || 1)];\r\n\t}\r\n};\r\n//全角符号和中文字符\r\nUtil.FULL_ANGLE_REG =\r\n\t/[\\x00-\\x1f\\x80-\\xa0\\xad\\u1680\\u180E\\u2000-\\u200f\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF\\uFFF9-\\uFFFC]|[\\u1100-\\u115F\\u11A3-\\u11A7\\u11FA-\\u11FF\\u2329-\\u232A\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3000-\\u303E\\u3041-\\u3096\\u3099-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u3190-\\u31BA\\u31C0-\\u31E3\\u31F0-\\u321E\\u3220-\\u3247\\u3250-\\u32FE\\u3300-\\u4DBF\\u4E00-\\uA48C\\uA490-\\uA4C6\\uA960-\\uA97C\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFAFF\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFF01-\\uFF60\\uFFE0-\\uFFE6]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\r\nUtil.KEYCODE = {\r\n\tDELETE: 46,\r\n\tBACKSPACE: 8\r\n};\r\nUtil.HISTORY_COMMAND = {\r\n\tDELETE: 'delete',\r\n\tINSERT: 'insert',\r\n\tMOVEUP: 'moveLineUp',\r\n\tMOVEDOWN: 'moveLineDown',\r\n\tCOPY_UP: 'copyLineUp',\r\n\tCOPY_DOWN: 'copyLineDown',\r\n\tDELETE_COPY_UP: 'deleteCopyLineUp',\r\n\tDELETE_COPY_DOWN: 'deleteCopyLineDown',\r\n\tREPLACE: 'replace',\r\n\tINSERT_LINE: 'insertLine',\r\n\tDELETE_LINE: 'deleteLine',\r\n\tREPLACE: 'replace',\r\n\tTAB_TO_SPACE: 'tabToSpace',\r\n\tSPACE_TO_TAB: 'spaceToTab'\r\n};\r\nUtil.CONST_DATA = {\r\n\tLINE_COMMENT: 'line-comment',\r\n\tBLOCK_COMMENT: 'block-comment',\r\n\tBRACKET: 'bracket',\r\n\tTAG: 'tag'\r\n};\r\nUtil.STATUS_LEVEMAP = { A: 1, M: 2, D: 3, '?': 4, R: 5 }\r\nexport default Util;\r\n","import Vue from 'vue';\r\n\r\nconst bus = new Vue();\r\n\r\nexport default bus;","export default class {\r\n\tconstructor() {\r\n\t\tthis.taskId = 1;\r\n\t\tthis.uiTaskId = 1;\r\n\t\tthis.queue = [];\r\n\t\tthis.uiQueue = [];\r\n\t\tthis.frameTime = 15;\r\n\t\tthis.channel = new MessageChannel();\r\n\t\tthis.channel.port2.onmessage = e => {\r\n\t\t\tif (e.data === 'run') {\r\n\t\t\t\tthis.run();\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.uiRun();\r\n\t}\r\n\taddUiTask(task) {\r\n\t\tlet taskId = this.uiTaskId++;\r\n\t\ttask = {\r\n\t\t\t__id__: taskId,\r\n\t\t\t__task__: task,\r\n\t\t};\r\n\t\tthis.uiQueue.push(task);\r\n\t\treturn taskId;\r\n\t}\r\n\tremoveUiTask(taskId) {\r\n\t\tthis.uiQueue = this.uiQueue.filter(task => {\r\n\t\t\treturn task.__id__ !== taskId;\r\n\t\t});\r\n\t}\r\n\tuiRun() {\r\n\t\tthis.uiQueue.forEach(task => {\r\n\t\t\ttask.__task__();\r\n\t\t});\r\n\t\tthis.uiTimestamp = Date.now();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.uiRun();\r\n\t\t}, this.frameTime);\r\n\t\tif (this.pending) {\r\n\t\t\tthis.pending = false;\r\n\t\t\tthis.channel.port1.postMessage('run');\r\n\t\t}\r\n\t}\r\n\taddTask(task, { level = 1, delay = 0, loop = false } = {}) {\r\n\t\tlet taskId = this.taskId++;\r\n\t\ttask = {\r\n\t\t\t__id__: taskId,\r\n\t\t\t__task__: task,\r\n\t\t\t__time__: Date.now(),\r\n\t\t\tlevel: level,\r\n\t\t\tdelay: delay,\r\n\t\t\tloop: loop,\r\n\t\t};\r\n\t\t// 循环的任务，立刻执行一次\r\n\t\tloop && task.__task__();\r\n\t\t// 按优先级加入队列，离队首越近，优先级最高\r\n\t\tfor (let i = this.queue.length - 1; i >= 0; i--) {\r\n\t\t\tif (this.queue[i].level >= task.level) {\r\n\t\t\t\tthis.queue.splice(i + 1, 0, task);\r\n\t\t\t\ttask = null;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\ttask && this.queue.unshift(task);\r\n\t\tthis.channel.port1.postMessage('run');\r\n\t\treturn taskId;\r\n\t}\r\n\tremoveTask(taskId) {\r\n\t\tthis.queue = this.queue.filter(task => {\r\n\t\t\treturn task.__id__ !== taskId;\r\n\t\t});\r\n\t}\r\n\trun() {\r\n\t\tlet timestamp = Date.now();\r\n\t\tlet minGap = Infinity;\r\n\t\tlet done = false;\r\n\t\tif (timestamp - this.uiTimestamp >= this.frameTime) {\r\n\t\t\tthis.pending = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.queue.length; i++) {\r\n\t\t\tlet task = this.queue[i];\r\n\t\t\tlet timeGap = timestamp - task.__time__;\r\n\t\t\tif (!done && timeGap >= task.delay) {\r\n\t\t\t\tif (task.loop) {\r\n\t\t\t\t\ttask.__time__ = timestamp;\r\n\t\t\t\t\tminGap = Math.min(minGap, task.delay);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.queue.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t\ttask.__task__();\r\n\t\t\t} else {\r\n\t\t\t\tminGap = Math.min(minGap, timeGap);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.queue.length) {\r\n\t\t\tif (minGap > 4) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.run();\r\n\t\t\t\t}, 0);\r\n\t\t\t} else {\r\n\t\t\t\tthis.channel.port1.postMessage('run');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","export default {\r\n\tTOKEN_TYPE: {\r\n\t\tTEXT: 'text',\r\n\t\tSOURCE: 'source',\r\n\t\tTAG_NAME: 'tag-name',\r\n\t\tATTR_NAME: 'attr-name',\r\n\t\tSTRING: 'string',\r\n\t\tWORD: 'word',\r\n\t\tCSS: 'css',\r\n\t\tCSS_VALUE: 'css-value',\r\n\t\tCSS_PROPERTY: 'css-property',\r\n\t\tCSS_SELECTOR: 'css-selector',\r\n\t\tCSS_TAG: 'css-tag',\r\n\t\tCSS_CLASS: 'css-class',\r\n\t\tCSS_ATTR: 'css-attr',\r\n\t\tCSS_PSEUDO: 'css-pseudo',\r\n\t\tEMMET_HTML: 'emmet-html',\r\n\t\tEMMET_CSS: 'emmet-css',\r\n\t},\r\n\tTASK: {\r\n\t\tUI: 3,\r\n\t},\r\n};\r\n","import Scheduler from '../common/scheduler';\r\nimport Enum from './enum';\r\nimport Util from '../common/util';\r\n\r\nconst remote = window.require('@electron/remote');\r\nconst fs = window.require('fs');\r\nconst path = window.require('path');\r\nconst dirname = remote.app.getAppPath();\r\n\r\nconst nowTheme = {\r\n\tvalue: 'Monokai',\r\n\ttype: 'dark',\r\n\tpath: path.join(dirname, 'main/extensions/theme-monokai/themes/monokai-color-theme.json')\r\n};\r\nconst nowIconTheme = {\r\n\tvalue: 'material-icon-theme',\r\n\tpath: path.join(dirname, 'main/extensions/theme-material-icon/dist/material-icons.json')\r\n};\r\nconst views = { terminal: false, minimap: true, sidebar: true, statusbar: true };\r\nconst skipSearchDirs = /[\\\\\\/](node_modules|dist|\\.git|\\.vscode|\\.idea|\\.DS_Store)(?=[\\\\\\/]|$)/;\r\nconst skipSearchFiles = /^npm-debug.log|^yarn-debug.log|^yarn-error.log|^pnpm-debug.log|\\.suo|\\.ntvs|\\.njsproj|\\.sln|\\.sw/;\r\nconst defaultWordPattern = '(-?\\\\d*\\\\.\\\\d\\\\w*)|([^\\\\`\\\\~\\\\!\\\\@\\\\%\\\\^\\\\&\\\\*\\\\(\\\\)\\\\-\\\\=\\\\+\\\\[\\\\{\\\\]\\\\}\\\\\\\\\\\\|\\\\;\\\\:\\\\\\'\\\\\"\\\\,\\\\.\\\\<\\\\>/\\\\?\\\\s]+)';\r\nconst fileTreePath = path.join(remote.app.getPath('userData'), 'userData/file_tree.my');\r\nconst configPath = path.join(remote.app.getPath('userData'), 'userData/config.my');\r\nconst cachePath = path.join(remote.app.getPath('userData'), 'userData/cache');\r\nconst tabPath = path.join(remote.app.getPath('userData'), 'userData/tab.my');\r\nconst terminalTabPath = path.join(remote.app.getPath('userData'), 'userData/tab_terminal.my');\r\n\r\nconst globalData = {\r\n\tscheduler: new Scheduler(),\r\n\tenum: Enum,\r\n\tdirname: dirname,\r\n\tconfigPath: configPath,\r\n\tfileTreePath: fileTreePath,\r\n\tcachePath: cachePath,\r\n\ttabPath: tabPath,\r\n\tterminalTabPath: terminalTabPath,\r\n\tskipSearchDirs: skipSearchDirs,\r\n\tskipSearchFiles: skipSearchFiles,\r\n\tdefaultWordPattern: defaultWordPattern,\r\n\tnowTheme: nowTheme,\r\n\tnowIconTheme: nowIconTheme,\r\n\tviews: views,\r\n\tzoomLevel: 0,\r\n\tscopeIdMap: {},\r\n\tscopeReg: null,\r\n\tcolors: {},\r\n\tnowIconData: {},\r\n\tthemes: [],\r\n\ticonThemes: [],\r\n\tlanguageList: [],\r\n\tscopeFileList: [],\r\n\tscopeTokenList: [],\r\n\tgrammars: {},\r\n\tsourceWordMap: {},\r\n\tfileTree: [],\r\n\topenedFileList: [],\r\n\tfileStatus: {},\r\n\tdirStatus: {},\r\n\tfileDiff: {},\r\n\tterminalList: [],\r\n\teditorList: [],\r\n\tnowEditorId: null,\r\n\tnowFileItem: null,\r\n\t$mainWin: null,\r\n};\r\n\r\nif (fs.existsSync(configPath)) {\r\n\ttry {\r\n\t\t// 加载全局配置\r\n\t\tlet data = Util.loadJsonFileSync(configPath);\r\n\t\tObject.assign(globalData.nowTheme, data.nowTheme);\r\n\t\tObject.assign(globalData.nowIconTheme, data.nowIconTheme);\r\n\t\tObject.assign(globalData.views, data.views);\r\n\t\tglobalData.zoomLevel = data.zoomLevel || 0;\r\n\t} catch (e) {\r\n\t\tconsole.log(e);\r\n\t}\r\n}\r\n\r\nexport default globalData;","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-15 11:39:41\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport EventBus from '@/event';\r\nimport globalData from '@/data/globalData';\r\nimport * as vsctm from 'vscode-textmate';\r\nimport * as oniguruma from 'vscode-oniguruma';\r\n\r\nconst fs = window.require('fs');\r\nconst path = window.require('path');\r\n\r\nconst regs = {\r\n\tstringToken: /(\\.|^)string(\\.|$)/,\r\n};\r\n\r\nexport default class {\r\n\tconstructor(editor, context) {\r\n\t\tthis.editor = editor;\r\n\t\tthis.context = context;\r\n\t\tthis.currentLine = 1;\r\n\t\tthis.initRegistry();\r\n\t\tthis.initLanguage(editor.language);\r\n\t}\r\n\tinitRegistry() {\r\n\t\tconst wasmBin = fs.readFileSync(path.join(globalData.dirname, 'main/lib/onig.wasm')).buffer;\r\n\t\tconst vscodeOnigurumaLib = oniguruma.loadWASM(wasmBin).then(() => {\r\n\t\t\treturn {\r\n\t\t\t\tcreateOnigScanner(patterns) {\r\n\t\t\t\t\treturn new oniguruma.OnigScanner(patterns);\r\n\t\t\t\t},\r\n\t\t\t\tcreateOnigString(s) {\r\n\t\t\t\t\treturn new oniguruma.OnigString(s);\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t});\r\n\t\tthis.registry = new vsctm.Registry({\r\n\t\t\tonigLib: vscodeOnigurumaLib,\r\n\t\t\tloadGrammar: scopeName => {\r\n\t\t\t\tlet language = Util.getLanguageByScopeName(globalData.scopeFileList, scopeName);\r\n\t\t\t\tif (language) {\r\n\t\t\t\t\tif (language.configPath) {\r\n\t\t\t\t\t\treturn Util.loadJsonFile(language.configPath).then(data => {\r\n\t\t\t\t\t\t\t// 每种语言都有对应的折叠标记\r\n\t\t\t\t\t\t\tthis.sourceFoldMap[language.scopeName] = {};\r\n\t\t\t\t\t\t\tglobalData.sourceWordMap[language.scopeName] = data.wordPattern;\r\n\t\t\t\t\t\t\t// 是否存在标记性语言\r\n\t\t\t\t\t\t\tthis.hasTextGrammar = this.hasTextGrammar || language.scopeName.startsWith('text');\r\n\t\t\t\t\t\t\tthis.initLanguageConifg(this.sourceFoldMap[language.scopeName], data);\r\n\t\t\t\t\t\t\treturn Util.readFile(language.path).then(data => vsctm.parseRawGrammar(data.toString(), language.path));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn Util.readFile(language.path).then(data => vsctm.parseRawGrammar(data.toString(), language.path));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\tinitLanguage(language) {\r\n\t\tif (this.language === language) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.language = language;\r\n\t\tthis.grammar = null;\r\n\t\tthis.foldType = 1;\r\n\t\tthis.sourceFoldMap = {};\r\n\t\tthis.scopeMap = {};\r\n\t\tthis.hasTextGrammar = false;\r\n\t\tthis.currentLine = 1;\r\n\t\tlanguage = Util.getLanguageById(globalData.languageList, language);\r\n\t\tthis.scopeName = (language && language.scopeName) || '';\r\n\t\tif (this.scopeName) {\r\n\t\t\tif (globalData.grammars[this.scopeName]) {\r\n\t\t\t\tlet grammarData = globalData.grammars[this.scopeName];\r\n\t\t\t\tthis.grammar = grammarData.grammar;\r\n\t\t\t\tthis.sourceFoldMap = grammarData.sourceFoldMap;\r\n\t\t\t\tthis.scopeMap = grammarData.scopeIdMap;\r\n\t\t\t\tthis.hasTextGrammar = grammarData.hasTextGrammar;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.registry.loadGrammar(this.scopeName).then(grammar => {\r\n\t\t\t\t\tthis.grammar = grammar;\r\n\t\t\t\t\tglobalData.grammars[this.scopeName] = {\r\n\t\t\t\t\t\tgrammar: grammar,\r\n\t\t\t\t\t\tsourceFoldMap: this.sourceFoldMap,\r\n\t\t\t\t\t\tscopeIdMap: this.scopeMap,\r\n\t\t\t\t\t\thasTextGrammar: this.hasTextGrammar,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.tokenizeVisibleLins();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.tokenizeVisibleLins();\r\n\t\treturn Promise.resolve();\r\n\t}\r\n\tinitLanguageConifg(foldMap, data) {\r\n\t\tlet source = [];\r\n\t\tfoldMap.__comments__ = {\r\n\t\t\tlineComment: '',\r\n\t\t\tblockComment: [],\r\n\t\t};\r\n\t\tif (data.comments) {\r\n\t\t\tif (data.comments.lineComment) {\r\n\t\t\t\tsource.push(data.comments.lineComment);\r\n\t\t\t\tfoldMap[data.comments.lineComment] = 0;\r\n\t\t\t\tfoldMap.__comments__.lineComment = data.comments.lineComment;\r\n\t\t\t}\r\n\t\t\tif (data.comments.blockComment) {\r\n\t\t\t\tsource.push(data.comments.blockComment[0]);\r\n\t\t\t\tsource.push(data.comments.blockComment[1]);\r\n\t\t\t\tfoldMap[data.comments.blockComment[0]] = -this.foldType;\r\n\t\t\t\tfoldMap[data.comments.blockComment[1]] = this.foldType;\r\n\t\t\t\tfoldMap.__comments__.blockComment = data.comments.blockComment;\r\n\t\t\t\tfoldMap.__endCommentReg__ = new RegExp(data.comments.blockComment[1].replace(/[\\{\\}\\(\\)\\[\\]\\&\\?\\+\\*\\\\]/g, '\\\\$&'), 'g');\r\n\t\t\t\tthis.foldType++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (data.brackets) {\r\n\t\t\tdata.brackets.forEach(item => {\r\n\t\t\t\tif (foldMap[item[0]]) {\r\n\t\t\t\t\t//相同的前缀\r\n\t\t\t\t\tif (!foldMap[item[1]]) {\r\n\t\t\t\t\t\tsource.push(item[1]);\r\n\t\t\t\t\t\tfoldMap[item[1]] = -foldMap[item[0]];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (foldMap[item[1]]) {\r\n\t\t\t\t\t//相同的后缀\r\n\t\t\t\t\tif (!foldMap[item[0]]) {\r\n\t\t\t\t\t\tsource.push(item[0]);\r\n\t\t\t\t\t\tfoldMap[item[0]] = -foldMap[item[1]];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsource.push(item[0]);\r\n\t\t\t\t\tsource.push(item[1]);\r\n\t\t\t\t\tfoldMap[item[0]] = -this.foldType;\r\n\t\t\t\t\tfoldMap[item[1]] = this.foldType;\r\n\t\t\t\t\tthis.foldType++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tsource = source.join('|');\r\n\t\tsource = source.replace(/[\\{\\}\\(\\)\\[\\]\\&\\?\\+\\*\\\\]/g, '\\\\$&');\r\n\t\tfoldMap.__foldReg__ = new RegExp(source, 'g');\r\n\t}\r\n\tdestroy() {\r\n\t\tthis.editor = null;\r\n\t\tthis.context = null;\r\n\t\tcancelIdleCallback(this.tokenizeLinesTimer);\r\n\t\tglobalData.scheduler.removeTask(this.tokenizeLinesTask);\r\n\t}\r\n\tonInsertContentAfter(nowLine, newLine) {\r\n\t\tglobalData.scheduler.removeTask(this.tokenizeLinesTask);\r\n\t\tif (nowLine <= this.currentLine) {\r\n\t\t\tthis.currentLine = nowLine;\r\n\t\t}\r\n\t\tthis.editor.$nextTick(() => {\r\n\t\t\tthis.tokenizeVisibleLins();\r\n\t\t});\r\n\t}\r\n\tonDeleteContentAfter(nowLine, newLine) {\r\n\t\tglobalData.scheduler.removeTask(this.tokenizeLinesTask);\r\n\t\tif (newLine <= this.currentLine) {\r\n\t\t\tthis.currentLine = newLine;\r\n\t\t}\r\n\t\tthis.editor.$nextTick(() => {\r\n\t\t\tthis.tokenizeVisibleLins();\r\n\t\t});\r\n\t}\r\n\ttokenizeVisibleLins() {\r\n\t\tlet tokenizeVisibleLinsId = this.tokenizeVisibleLinsId + 1 || 1;\r\n\t\tthis.tokenizeVisibleLinsId = tokenizeVisibleLinsId;\r\n\t\tthis.editor.$nextTick(() => {\r\n\t\t\tif (this.tokenizeVisibleLinsId !== tokenizeVisibleLinsId) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet startLine = this.editor.startLine;\r\n\t\t\tlet endLine = this.editor.startLine + this.editor.maxVisibleLines;\r\n\t\t\tendLine = this.editor.folder.getRealLine(endLine);\r\n\t\t\tstartLine = startLine < this.currentLine ? this.currentLine : startLine;\r\n\t\t\tif (endLine >= startLine) {\r\n\t\t\t\t// 先渲染可视范围内的行\r\n\t\t\t\tthis.tokenizeLines(startLine, endLine, () => {\r\n\t\t\t\t\t// 考虑到当前行可能处于内嵌语法中，渲染前2000行\r\n\t\t\t\t\tstartLine = this.editor.startLine - 2000;\r\n\t\t\t\t\tstartLine = startLine < 1 ? 1 : startLine;\r\n\t\t\t\t\t// 考虑到minimap渲染的行数，这里乘以10\r\n\t\t\t\t\tendLine = this.editor.folder.getRealLine(endLine + this.editor.maxVisibleLines * 10);\r\n\t\t\t\t\tif (startLine > this.currentLine) {\r\n\t\t\t\t\t\tthis.tokenizeLines(startLine, endLine, () => {\r\n\t\t\t\t\t\t\tthis.tokenizeLines(this.currentLine);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.tokenizeLines(this.currentLine);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\ttokenizeLines(startLine, endLine, callback) {\r\n\t\tlet limit = 5;\r\n\t\tlet processedLines = 0;\r\n\t\tlet originStartLine = startLine;\r\n\t\tlet startTime = Date.now();\r\n\t\tendLine = endLine || this.editor.maxLine;\r\n\t\tendLine = endLine > this.editor.maxLine ? this.editor.maxLine : endLine;\r\n\t\tcancelIdleCallback(this.tokenizeLinesTimer);\r\n\t\tglobalData.scheduler.removeTask(this.tokenizeLinesTask);\r\n\t\tif (this.scopeName && !this.grammar) {\r\n\t\t\t// 这里不用scheduler，否则将有可能导致parseRawGrammar失败\r\n\t\t\tthis.tokenizeLinesTimer = requestIdleCallback(() => {\r\n\t\t\t\tthis.tokenizeLines(startLine, endLine, callback);\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\twhile (startLine <= endLine) {\r\n\t\t\tlet lineObj = this.context.htmls[startLine - 1];\r\n\t\t\tif (!lineObj.tokens) {\r\n\t\t\t\t//文本超过一万时跳过高亮\r\n\t\t\t\tlet data = this.tokenizeLine(startLine);\r\n\t\t\t\tlineObj.tokens = data.tokens;\r\n\t\t\t\tlineObj.folds = data.folds;\r\n\t\t\t\tlineObj.stateFold = data.stateFold;\r\n\t\t\t\tEventBus.$emit('render-line', { editorId: this.editor.editorId, lineId: lineObj.lineId });\r\n\t\t\t\tif (!lineObj.states || (lineObj.states.equals && !lineObj.states.equals(data.states)) || lineObj.states.toString() !== data.states.toString()) {\r\n\t\t\t\t\tlineObj.states = data.states;\r\n\t\t\t\t\tlineObj = this.context.htmls[startLine];\r\n\t\t\t\t\tif (lineObj) {\r\n\t\t\t\t\t\tlineObj.tokens = null;\r\n\t\t\t\t\t\tlineObj.html = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tprocessedLines++;\r\n\t\t\t\t// 避免卡顿\r\n\t\t\t\tif (processedLines >= limit || Date.now() - startTime >= 5) {\r\n\t\t\t\t\tstartLine++;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (startLine - originStartLine > 1000) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tstartLine++;\r\n\t\t}\r\n\t\tif (originStartLine === this.currentLine) {\r\n\t\t\tthis.currentLine = startLine;\r\n\t\t}\r\n\t\tif (startLine <= endLine) {\r\n\t\t\tthis.tokenizeLinesTask = globalData.scheduler.addTask(() => {\r\n\t\t\t\tthis.tokenizeLines(startLine, endLine, callback);\r\n\t\t\t});\r\n\t\t} else if (callback) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\ttokenizeLine(line) {\r\n\t\tlet lineText = this.context.htmls[line - 1].text;\r\n\t\tlet folds = [];\r\n\t\tif (lineText.length > 10000 || !this.scopeName || line <= this.editor.diffObj.deletedLength) {\r\n\t\t\treturn {\r\n\t\t\t\ttokens: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tscopes: ['plain'],\r\n\t\t\t\t\t\tstartIndex: 0,\r\n\t\t\t\t\t\tendIndex: lineText.length,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tfolds: [],\r\n\t\t\t\tstates: vsctm.INITIAL,\r\n\t\t\t};\r\n\t\t}\r\n\t\tlet states = null;\r\n\t\tif (this.editor.diffObj.states) {\r\n\t\t\tif (line === this.editor.diffObj.deletedLength + 1) {\r\n\t\t\t\tstates = this.editor.diffObj.states;\r\n\t\t\t} else {\r\n\t\t\t\tstates = this.context.htmls[line - 2].states || vsctm.INITIAL;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstates = (this.context.htmls[line - 2] && this.context.htmls[line - 2].states) || vsctm.INITIAL;\r\n\t\t}\r\n\t\tlet lineTokens = this.grammar.tokenizeLine(lineText, states);\r\n\t\tlet stateFold = this.addFold(line, lineTokens.tokens, folds);\r\n\t\tlineTokens.tokens.peek().endIndex = lineText.length; //某些情况下，会大于lineText.length\r\n\t\treturn {\r\n\t\t\ttokens: lineTokens.tokens,\r\n\t\t\tstates: lineTokens.ruleStack,\r\n\t\t\tfolds: folds,\r\n\t\t\tstateFold: stateFold,\r\n\t\t};\r\n\t}\r\n\tcreateHtml(tokens, lineText) {\r\n\t\tlet html = [];\r\n\t\tlet preToken = null;\r\n\t\tif (!tokens) {\r\n\t\t\ttokens = [{ startIndex: 0, endIndex: lineText.length, scopes: ['plain'] }];\r\n\t\t\ttokens = this.splitLongToken(tokens);\r\n\t\t}\r\n\t\tfor (let i = 0; i < tokens.length; i++) {\r\n\t\t\tlet item = tokens[i];\r\n\t\t\tlet selector = '';\r\n\t\t\tlet scopeId = '';\r\n\t\t\tif (item.scopes[0] === 'plain') {\r\n\t\t\t\tselector = 'my-plain';\r\n\t\t\t} else if (item.scopes[0] === 'selected') {\r\n\t\t\t\tselector = 'my-select-fg';\r\n\t\t\t} else {\r\n\t\t\t\tscopeId = this.getScopeId(item);\r\n\t\t\t\tselector = (scopeId && `my-scope-${scopeId}`) || '';\r\n\t\t\t}\r\n\t\t\tif (preToken && _compair(preToken.scopeId, scopeId) && item.endIndex - preToken.startIndex < 100) {\r\n\t\t\t\tpreToken.endIndex = item.endIndex;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tpreToken = {\r\n\t\t\t\tscopeId: scopeId,\r\n\t\t\t\tselector: selector,\r\n\t\t\t\tstartIndex: item.startIndex,\r\n\t\t\t\tendIndex: item.endIndex,\r\n\t\t\t};\r\n\t\t\thtml.push(preToken);\r\n\t\t}\r\n\t\treturn html\r\n\t\t\t.map(item => {\r\n\t\t\t\tlet value = lineText.substring(item.startIndex, item.endIndex);\r\n\t\t\t\treturn `<span class=\"${item.selector}\" data-column=\"${item.startIndex}\" data-end=\"${item.endIndex}\">${Util.htmlTrans(value)}</span>`;\r\n\t\t\t})\r\n\t\t\t.join('')\r\n\t\t\t.replace(/\\t/g, this.editor.space);\r\n\r\n\t\tfunction _compair(scope1, scope2) {\r\n\t\t\tscope1 = globalData.scopeIdMap[scope1];\r\n\t\t\tscope2 = globalData.scopeIdMap[scope2];\r\n\t\t\tscope1 = (scope1 && scope1.settingsStr) || '';\r\n\t\t\tscope2 = (scope2 && scope2.settingsStr) || '';\r\n\t\t\treturn scope1 === scope2;\r\n\t\t}\r\n\t}\r\n\tgetScopeId(token) {\r\n\t\tlet result = null;\r\n\t\tlet scopes = token.scopes;\r\n\t\tif (token.scopeId) {\r\n\t\t\treturn token.scopeId;\r\n\t\t}\r\n\t\ttoken.scope = scopes.join(' ');\r\n\t\touterLoop: for (let i = scopes.length - 1; i >= 0; i--) {\r\n\t\t\tlet scope = scopes[i];\r\n\t\t\tif (scope in this.scopeMap) {\r\n\t\t\t\tif (this.scopeMap[scope]) {\r\n\t\t\t\t\tresult = this.scopeMap[scope];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < globalData.scopeTokenList.length; i++) {\r\n\t\t\t\tlet item = globalData.scopeTokenList[i];\r\n\t\t\t\tlet _scope = item.scopes.peek();\r\n\t\t\t\tif (scope.indexOf(_scope) > -1) {\r\n\t\t\t\t\tif (item.regexp.test(token.scope)) {\r\n\t\t\t\t\t\tresult = item.scopeId;\r\n\t\t\t\t\t\tthis.scopeMap[scope] = result;\r\n\t\t\t\t\t\tbreak outerLoop;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.scopeMap[scope] = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\ttoken.scopeId = result;\r\n\t\treturn result;\r\n\t}\r\n\taddFold(line, tokens, folds) {\r\n\t\tlet scopeName = '';\r\n\t\tlet startIndex = 0;\r\n\t\tlet existTag = false;\r\n\t\tlet lineText = this.context.htmls[line - 1].text;\r\n\t\tlet stateFold = line > 1 ? this.context.htmls[line - 2].stateFold : null;\r\n\t\t//给字符串token打上标记\r\n\t\ttokens.forEach(token => {\r\n\t\t\tif (regs.stringToken.test(token.scopes.join('.'))) {\r\n\t\t\t\ttoken.isString = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\touterLoop: for (let index = 0; index < tokens.length; index++) {\r\n\t\t\tlet token = tokens[index];\r\n\t\t\tlet _scopeName = '';\r\n\t\t\tlet foldMap = null;\r\n\t\t\tfor (let i = token.scopes.length - 1; i >= 0; i--) {\r\n\t\t\t\tfoldMap = this.sourceFoldMap[token.scopes[i]];\r\n\t\t\t\tif (!foldMap) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t_scopeName = token.scopes[i];\r\n\t\t\t\tif (scopeName || index === tokens.length - 1) {\r\n\t\t\t\t\tif (_scopeName !== scopeName || index === tokens.length - 1) {\r\n\t\t\t\t\t\tlet endIndex = index === tokens.length - 1 ? token.endIndex : token.startIndex;\r\n\t\t\t\t\t\tlet lastFold = this.addBracket({\r\n\t\t\t\t\t\t\ttokens: tokens,\r\n\t\t\t\t\t\t\tline: line,\r\n\t\t\t\t\t\t\tfoldMap: foldMap,\r\n\t\t\t\t\t\t\tfolds: folds,\r\n\t\t\t\t\t\t\tstartIndex: startIndex,\r\n\t\t\t\t\t\t\tendIndex: endIndex,\r\n\t\t\t\t\t\t\tstateFold: stateFold,\r\n\t\t\t\t\t\t\tlineText: lineText,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// 单行注释\r\n\t\t\t\t\t\tif (lastFold && lastFold.type === Util.CONST_DATA.LINE_COMMENT) {\r\n\t\t\t\t\t\t\tbreak outerLoop;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tscopeName = token.scopes[i];\r\n\t\t\t\t\t\tstartIndex = token.startIndex;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscopeName = token.scopes[i];\r\n\t\t\t\t\tstartIndex = token.startIndex;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\tthis.addTagFold({\r\n\t\t\t\t\ttoken: token,\r\n\t\t\t\t\tfoldMap: foldMap,\r\n\t\t\t\t\tfolds: folds,\r\n\t\t\t\t\tlineText: lineText,\r\n\t\t\t\t})\r\n\t\t\t) {\r\n\t\t\t\texistTag = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (existTag) {\r\n\t\t\tfolds.sort((a, b) => {\r\n\t\t\t\treturn a.startIndex - b.startIndex;\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (folds.length) {\r\n\t\t\treturn folds.peek().type === Util.CONST_DATA.BLOCK_COMMENT ? folds.peek() : null;\r\n\t\t} else {\r\n\t\t\treturn stateFold;\r\n\t\t}\r\n\t}\r\n\taddBracket(option) {\r\n\t\tlet tokens = option.tokens;\r\n\t\tlet foldMap = option.foldMap;\r\n\t\tlet folds = option.folds;\r\n\t\tlet startIndex = option.startIndex;\r\n\t\tlet endIndex = option.endIndex;\r\n\t\tlet stateFold = option.stateFold;\r\n\t\tlet text = option.lineText.slice(startIndex, endIndex);\r\n\t\tlet reg = foldMap.__foldReg__;\r\n\t\tlet res = null;\r\n\t\tlet preFold = null;\r\n\t\tif (folds.length) {\r\n\t\t\tpreFold = folds.peek();\r\n\t\t} else {\r\n\t\t\tpreFold = stateFold;\r\n\t\t}\r\n\t\tif (preFold && preFold.type === Util.CONST_DATA.BLOCK_COMMENT && preFold.side < 0) {\r\n\t\t\treg = foldMap.__endCommentReg__;\r\n\t\t}\r\n\t\twhile ((res = reg.exec(text))) {\r\n\t\t\tlet type = Util.CONST_DATA.BRACKET;\r\n\t\t\tif (foldMap.__comments__.lineComment === res[0]) {\r\n\t\t\t\ttype = Util.CONST_DATA.LINE_COMMENT;\r\n\t\t\t} else if (foldMap.__comments__.blockComment[0] === res[0] || foldMap.__comments__.blockComment[1] === res[0]) {\r\n\t\t\t\ttype = Util.CONST_DATA.BLOCK_COMMENT;\r\n\t\t\t}\r\n\t\t\t// 如果处于字符串中，则无效\r\n\t\t\tif (_inString(res)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tfolds.push({\r\n\t\t\t\tstartIndex: startIndex + res.index,\r\n\t\t\t\tendIndex: startIndex + res.index + res[0].length,\r\n\t\t\t\tside: foldMap[res[0]],\r\n\t\t\t\ttype: type,\r\n\t\t\t});\r\n\t\t\tif (type === Util.CONST_DATA.BLOCK_COMMENT && foldMap[res[0]] < 0) {\r\n\t\t\t\tfoldMap.__endCommentReg__.lastIndex = reg.lastIndex;\r\n\t\t\t\treg.lastIndex = 0;\r\n\t\t\t\treg = foldMap.__endCommentReg__;\r\n\t\t\t} else if (type === Util.CONST_DATA.LINE_COMMENT) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treg.lastIndex = 0;\r\n\t\treturn folds.length && folds.peek();\r\n\r\n\t\tfunction _inString(res) {\r\n\t\t\tlet index = res.index;\r\n\t\t\tfor (let i = 0; i < tokens.length; i++) {\r\n\t\t\t\tif (tokens[i].startIndex <= index && tokens[i].endIndex > index) {\r\n\t\t\t\t\tif (tokens[i].isString) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else if (tokens[i].startIndex > index) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\taddTagFold(option) {\r\n\t\tlet token = option.token;\r\n\t\tlet folds = option.folds;\r\n\t\tlet foldMap = option.foldMap;\r\n\t\tlet lineText = option.lineText;\r\n\t\tif (this.hasTextGrammar && token.scopes.peek().startsWith('entity.name.tag')) {\r\n\t\t\t//html、xml标签名称\r\n\t\t\tlet tag = lineText.slice(token.startIndex, token.endIndex);\r\n\t\t\tlet side = 0;\r\n\t\t\tif (foldMap[tag]) {\r\n\t\t\t\tside = foldMap[tag];\r\n\t\t\t} else {\r\n\t\t\t\tside = this.foldType++;\r\n\t\t\t\tfoldMap[tag] = side;\r\n\t\t\t}\r\n\t\t\t//开始标签\r\n\t\t\tif (lineText[token.startIndex - 1] === '<') {\r\n\t\t\t\tside = -side;\r\n\t\t\t}\r\n\t\t\tfolds.push({\r\n\t\t\t\tstartIndex: token.startIndex,\r\n\t\t\t\tendIndex: token.endIndex,\r\n\t\t\t\tside: side,\r\n\t\t\t\ttype: Util.CONST_DATA.TAG,\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\tsplitLongToken(tokens) {\r\n\t\tlet result = [];\r\n\t\ttokens.forEach(token => {\r\n\t\t\tlet length = token.endIndex - token.startIndex + 1;\r\n\t\t\tif (length > 100) {\r\n\t\t\t\t//将文本数量大于100的token分隔\r\n\t\t\t\tlet startCol = token.startIndex;\r\n\t\t\t\tlet count = Math.floor(length / 100);\r\n\t\t\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\t\t\tlet startIndex = i * 100;\r\n\t\t\t\t\tlet endIndex = (i + 1) * 100;\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\tstartIndex: startIndex + startCol,\r\n\t\t\t\t\t\tendIndex: endIndex + startCol,\r\n\t\t\t\t\t\tscopes: token.scopes,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tcount = count * 100;\r\n\t\t\t\tif (count < length) {\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\tstartIndex: count + startCol,\r\n\t\t\t\t\t\tendIndex: token.endIndex,\r\n\t\t\t\t\t\tscopes: token.scopes,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(token);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\tclearScopeMap() {\r\n\t\tthis.scopeMap = {};\r\n\t\tfor (let scopeName in globalData.grammars) {\r\n\t\t\tif (scopeName === this.scopeName) {\r\n\t\t\t\tglobalData.grammars[scopeName].scopeIdMap = this.scopeMap;\r\n\t\t\t} else {\r\n\t\t\t\tglobalData.grammars[scopeName].scopeIdMap = {};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-01-05 14:28:42\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport EventBus from '@/event';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst path = window.require('path');\r\nconst child_process = window.require('child_process');\r\nconst lintSupport = { css: true, scss: true, less: true, html: true, javascript: true };\r\n\r\nlet worker = null;\r\n\r\nexport default class {\r\n\tconstructor(editor, context) {\r\n\t\tthis.editor = editor;\r\n\t\tthis.context = context;\r\n\t\tthis.initLanguage(editor.language);\r\n\t\tEventBus.$on('lint-worker-done', this.workerFn = (data) => {\r\n\t\t\tif (data.parseId === this.parseId) {\r\n\t\t\t\tthis.editor.setErrors(data.results);\r\n\t\t\t\tthis.parseId = '';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tinitLanguage(language) {\r\n\t\tif (this.language === language) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.language = language;\r\n\t\tthis.editor.setErrors([]);\r\n\t\tthis.parse();\r\n\t}\r\n\tonInsertContentAfter(nowLine, newLine) {\r\n\t\tthis.parse();\r\n\t}\r\n\tonDeleteContentAfter(nowLine, newLine) {\r\n\t\tthis.parse();\r\n\t}\r\n\tdestroy() {\r\n\t\tthis.editor = null;\r\n\t\tthis.context = null;\r\n\t\tclearTimeout(this.runTimer);\r\n\t\tEventBus.$off('lint-worker-done', this.workerFn);\r\n\t\tif (worker) {\r\n\t\t\tworker.kill();\r\n\t\t\tworker = null;\r\n\t\t}\r\n\t}\r\n\tparse() {\r\n\t\tif (!lintSupport[this.language]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!worker) {\r\n\t\t\tthis.createProcess();\r\n\t\t}\r\n\t\tclearTimeout(this.runTimer);\r\n\t\tthis.runTimer = setTimeout(() => {\r\n\t\t\t_send.call(this);\r\n\t\t}, 500);\r\n\r\n\t\tfunction _send() {\r\n\t\t\tconst text = this.context.getAllText();\r\n\t\t\tthis.parseId = Util.getUUID();\r\n\t\t\tworker.send({\r\n\t\t\t\ttext: text,\r\n\t\t\t\tparseId: this.parseId,\r\n\t\t\t\tlanguage: this.language\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tcreateProcess() {\r\n\t\tworker = child_process.fork(path.join(globalData.dirname, 'main/process/lint/index.js'));\r\n\t\tworker.on('message', data => {\r\n\t\t\tEventBus.$emit('lint-worker-done', data);\r\n\t\t});\r\n\t\tworker.on('close', () => {\r\n\t\t\tthis.createProcess();\r\n\t\t});\r\n\t}\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-01-05 14:28:42\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport EventBus from '@/event';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst path = window.require('path');\r\nconst child_process = window.require('child_process');\r\n\r\nlet worker = null;\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.editor = editor;\r\n        this.context = context;\r\n        EventBus.$on('format-worker-done', this.workerFn = (data) => {\r\n            if (data.workerId === this.workerId) {\r\n                this.context.reload(data.text);\r\n                this.editor.cursor.setCursorPos(data.cursorPos);\r\n                this.workerId = '';\r\n            }\r\n        });\r\n    }\r\n    onInsertContentAfter(nowLine, newLine) { }\r\n    onDeleteContentAfter(nowLine, newLine) { }\r\n    destroy() {\r\n        this.editor = null;\r\n        this.context = null;\r\n        clearTimeout(this.runTimer);\r\n        EventBus.$off('format-worker-done', this.workerFn);\r\n        if (worker) {\r\n            worker.kill();\r\n            worker = null;\r\n        }\r\n    }\r\n    run() {\r\n        if (!worker) {\r\n            this.createProcess();\r\n        }\r\n        clearTimeout(this.runTimer);\r\n        this.runTimer = setTimeout(() => {\r\n            _send.call(this);\r\n        }, 50);\r\n\r\n        function _send() {\r\n            const text = this.context.getAllText();\r\n            this.workerId = Util.getUUID();\r\n            worker.send({\r\n                text: text,\r\n                workerId: this.workerId,\r\n                cursorPos: this.editor.nowCursorPos,\r\n                language: this.editor.language\r\n            });\r\n        }\r\n    }\r\n    createProcess() {\r\n        worker = child_process.fork(path.join(globalData.dirname, 'main/process/format/index.js'));\r\n        worker.on('message', data => {\r\n            EventBus.$emit('format-worker-done', data)\r\n        });\r\n        worker.on('close', () => {\r\n            this.createProcess();\r\n        });\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-01-05 14:28:42\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport EventBus from '@/event';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst path = window.require('path');\r\nconst child_process = window.require('child_process');\r\n\r\nlet worker = null;\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.editor = editor;\r\n        this.context = context;\r\n        EventBus.$on('diff-worker-done', this.workerFn = (data) => {\r\n            if (data.workerId === this.workerId) {\r\n                this.editor.setDiffObjs(data.result);\r\n                this.workerId = '';\r\n            }\r\n        });\r\n    }\r\n    onInsertContentAfter(nowLine, newLine) {\r\n        this.run();\r\n    }\r\n    onDeleteContentAfter(nowLine, newLine) {\r\n        this.run();\r\n    }\r\n    destroy() {\r\n        this.editor = null;\r\n        this.context = null;\r\n        clearTimeout(this.runTimer);\r\n        EventBus.$off('diff-worker-done', this.workerFn);\r\n        if (worker) {\r\n            worker.kill();\r\n            worker = null;\r\n        }\r\n    }\r\n    run() {\r\n        if (!worker) {\r\n\t\t\tthis.createProcess();\r\n\t\t}\r\n        clearTimeout(this.runTimer);\r\n        this.runTimer = setTimeout(() => {\r\n            _send.call(this);\r\n        }, 500);\r\n\r\n        function _send() {\r\n            const text = this.context.getAllText();\r\n            this.workerId = Util.getUUID();\r\n            worker.send({\r\n                text: text,\r\n                filePath: this.editor.tabData.path,\r\n                workerId: this.workerId,\r\n            });\r\n        }\r\n    }\r\n    createProcess() {\r\n        worker = child_process.fork(path.join(globalData.dirname, 'main/process/git/diff.js'));\r\n        worker.on('message', data => {\r\n            EventBus.$emit('diff-worker-done', data);\r\n        });\r\n    }\r\n}\r\n","/*\n * @Author: lisong\n * @Date: 2022-03-17 15:29:26\n * @Description:\n */\nimport { extract } from 'emmet';\nimport Util from '@/common/util';\nimport Enum from '@/data/enum';\nimport globalData from '@/data/globalData';\n\nconst path = window.require('path');\n\nconst regs = {\n\tstringToken: /(?:\\.|^)(?:string|regexp)(?:\\.|$)/,\n\ttagToken: /meta\\.tag/,\n\ttagNameToken: /entity\\.name\\.tag/,\n\ttagAttrName: /attribute\\-name/,\n\tcssValueToken: /property\\-list|property\\-value|separator/,\n\tcssPropertyToken: /meta\\.property\\-name/,\n\tcssSelectorToken: /meta\\.selector/,\n\tcssAttributeToken: /attribute\\-selector/,\n\tcssClassToken: /attribute\\-name\\.class/,\n\tcssPseudoToken: /pseudo\\-element/,\n\tstyleCss: /([^\\:\\;\\\"\\'\\s]+)\\s*\\:\\s*([^\\:\\;]+)?$/,\n\tstyleCssProperty: /(?:^|[\\;\\\"\\'])([^\\:\\;]+)$/,\n};\n\nclass Autocomplete {\n\tconstructor(editor, context) {\n\t\tthis.editor = editor;\n\t\tthis.context = context;\n\t\tthis.doneMap = {};\n\t\tthis.results = [];\n\t\tthis.wordPattern = Util.getWordPattern(this.editor.language);\n\t\tthis.wordPattern = new RegExp(`^(${this.wordPattern.source})$`);\n\t}\n\treset() {\n\t\tthis.currentLine = 1;\n\t\tthis.results = [];\n\t\tthis.doneMap = {};\n\t}\n\tdestroy() {\n\t\tthis.reset();\n\t\tthis.editor = null;\n\t\tthis.context = null;\n\t}\n\tstop() {\n\t\tcancelIdleCallback(this.searchTimer);\n\t}\n\tsearch() {\n\t\tthis.stop();\n\t\tthis.searchTimer = requestIdleCallback(() => {\n\t\t\tthis._search();\n\t\t});\n\t}\n\temmet() {\n\t\tif (this.editor.autoTipList && this.editor.autoTipList.length) {\n\t\t\t_insertTab.call(this);\n\t\t\treturn;\n\t\t}\n\t\tlet lineObj = this.context.htmls[this.editor.nowCursorPos.line - 1];\n\t\tlet tokenIndex = this.getTokenIndex(this.editor.nowCursorPos);\n\t\tlet nowToken = lineObj.tokens[tokenIndex];\n\t\tlet word = nowToken && lineObj.text.slice(nowToken.startIndex, this.editor.nowCursorPos.column);\n\t\tlet emmetObj = null;\n\t\tlet type = '';\n\t\tif (word) {\n\t\t\tlet scope = nowToken.scopes.peek();\n\t\t\tif (scope.startsWith('text.')) {\n\t\t\t\temmetObj = extract(word);\n\t\t\t\ttype = Enum.TOKEN_TYPE.EMMET_HTML;\n\t\t\t} else if (this._isCssToken(nowToken)) {\n\t\t\t\tif (this._isCssPropertyToken(nowToken)) {\n\t\t\t\t\temmetObj = extract(word, word.length, { type: 'stylesheet' });\n\t\t\t\t} else if (this._isCssValueToken(nowToken)) {\n\t\t\t\t\t//p10将会被分成pd和10两个token\n\t\t\t\t\tlet preToken = lineObj.tokens[tokenIndex - 1];\n\t\t\t\t\tif (preToken && this._isCssPropertyToken(preToken)) {\n\t\t\t\t\t\tword = lineObj.text.slice(preToken.startIndex, preToken.endIndex) + word;\n\t\t\t\t\t\temmetObj = extract(word, word.length, { type: 'stylesheet' });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttype = Enum.TOKEN_TYPE.EMMET_CSS;\n\t\t\t}\n\t\t}\n\t\tif (emmetObj) {\n\t\t\tthis.context.replaceTip({ word: emmetObj.abbreviation, result: emmetObj.abbreviation, type: type });\n\t\t} else {\n\t\t\t_insertTab.call(this);\n\t\t}\n\t\t\n\t\tfunction _insertTab() {\n\t\t\tif (this.editor.indent === 'space' && /^\\s*$/.exec(lineObj.text.slice(0, this.editor.nowCursorPos.column))) {\n\t\t\t\tthis.context.insertContent(this.editor.space);\n\t\t\t} else {\n\t\t\t\tthis.context.insertContent('\\t');\n\t\t\t}\n\t\t}\n\t}\n\t_search() {\n\t\tlet lineObj = this.context.htmls[this.editor.nowCursorPos.line - 1];\n\t\tlet tokenIndex = this.getTokenIndex(this.editor.nowCursorPos);\n\t\tlet nowToken = lineObj.tokens[tokenIndex];\n\t\tlet word = nowToken && lineObj.text.slice(nowToken.startIndex, this.editor.nowCursorPos.column);\n\t\tthis.reset();\n\t\tthis.editor.setAutoTip(null);\n\t\tif (!word) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._isTextToken(nowToken)) {\n\t\t\tlet scope = nowToken.scopes.peek();\n\t\t\tif (scope.startsWith('text.')) {\n\t\t\t\t//emmet表达式\n\t\t\t\tthis._searchEmmet(word);\n\t\t\t} else if (this._isTagNameToken(nowToken)) {\n\t\t\t\t//标签名\n\t\t\t\tthis._searchTagName(word);\n\t\t\t} else if (this._isAttrNameToken(nowToken)) {\n\t\t\t\t//属性名\n\t\t\t\tlet tag = this._getPreTagName(tokenIndex, this.editor.nowCursorPos.line);\n\t\t\t\tif (tag) {\n\t\t\t\t\tthis._searchTagAttrName(word, tag);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (this._isCssToken(nowToken)) {\n\t\t\tif (this._isCssPropertyToken(nowToken)) {\n\t\t\t\t//css属性名\n\t\t\t\tthis._searchCssProperty(word);\n\t\t\t} else if (this._isCssValueToken(nowToken)) {\n\t\t\t\t//css属性值\n\t\t\t\tlet preToken = lineObj.tokens[tokenIndex - 1];\n\t\t\t\t//p10将会被分成pd和10两个token\n\t\t\t\tif (preToken && this._isCssPropertyToken(preToken)) {\n\t\t\t\t\tlet preToken = lineObj.tokens[tokenIndex - 1];\n\t\t\t\t\tif (preToken && this._isCssPropertyToken(preToken)) {\n\t\t\t\t\t\tword = lineObj.text.slice(preToken.startIndex, preToken.endIndex) + word;\n\t\t\t\t\t\tthis._searchCssProperty(word);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet property = this._getPreCssProperty(tokenIndex, this.editor.nowCursorPos.line);\n\t\t\t\t\tif (property) {\n\t\t\t\t\t\tthis._searchCssValue(word, property);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (this._isCssSelectorToken(nowToken)) {\n\t\t\t\tif (this._isTagNameToken(nowToken)) {\n\t\t\t\t\tthis._searchCssTag(word);\n\t\t\t\t} else if (word.indexOf(':') > -1) {\n\t\t\t\t\tthis._searchCssPseudo(word);\n\t\t\t\t}\n\t\t\t\tthis._searchSelector(word, nowToken);\n\t\t\t} else if (this._isTagToken(nowToken)) {\n\t\t\t\t//style种的css样式\n\t\t\t\tthis._searchStyle(word, nowToken);\n\t\t\t}\n\t\t} else if (this._isSourceToken(nowToken)) {\n\t\t\tif (this.wordPattern.test(word)) {\n\t\t\t\tthis._searchWord(word, nowToken);\n\t\t\t}\n\t\t}\n\t}\n\t_searchWord(word, nowToken) {\n\t\tthis._searchDocument(lineObj => {\n\t\t\tlineObj.tokens.forEach(token => {\n\t\t\t\tif (token === nowToken) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet text = lineObj.text.slice(token.startIndex, token.endIndex);\n\t\t\t\tif (this.wordPattern.test(text)) {\n\t\t\t\t\t// 跳过标签和字符串\n\t\t\t\t\tif (this._isTextToken(token) || this._isStringToken(token)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._addTip({ word: word, value: text, type: Enum.TOKEN_TYPE.WORD });\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t_searchSelector(word, nowToken) {\n\t\tif (this._isCssClassToken(nowToken) && word !== '.') {\n\t\t\tword = '.' + word;\n\t\t}\n\t\tthis._searchDocument(lineObj => {\n\t\t\tlineObj.tokens.forEach(token => {\n\t\t\t\tif (token === nowToken) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this._isCssSelectorToken(token)) {\n\t\t\t\t\tlet text = lineObj.text.slice(token.startIndex, token.endIndex);\n\t\t\t\t\tif (!this.wordPattern.test(text)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this._isCssClassToken(token)) {\n\t\t\t\t\t\ttext = '.' + text;\n\t\t\t\t\t}\n\t\t\t\t\tif (word === '.') {\n\t\t\t\t\t\tif (this._isCssClassToken(token) && text !== '..') {\n\t\t\t\t\t\t\tthis._addTip({ word: word, value: text, type: Enum.TOKEN_TYPE.CSS_CLASS, skipMatch: true });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (this._isCssClassToken(nowToken)) {\n\t\t\t\t\t\tif (this._isCssClassToken(token)) {\n\t\t\t\t\t\t\tthis._addTip({ word: word, value: text, type: Enum.TOKEN_TYPE.CSS_CLASS });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._addTip({ word: word, value: text, type: Enum.TOKEN_TYPE.CSS_SELECTOR });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}, true);\n\t}\n\t_searchDocument(callback, showAll) {\n\t\tlet line = this.currentLine;\n\t\tlet startTime = Date.now();\n\t\tlet processedLines = 0;\n\t\twhile (line <= this.context.htmls.length) {\n\t\t\tlet lineObj = this.context.htmls[line - 1];\n\t\t\tline++;\n\t\t\tif (!lineObj.tokens) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tcallback(lineObj);\n\t\t\tprocessedLines++;\n\t\t\t// 避免卡顿\n\t\t\tif (processedLines % 5 == 0 && Date.now() - startTime >= 20) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.currentLine = line;\n\t\tthis._showTip(showAll);\n\t\tif (line <= this.context.htmls.length) {\n\t\t\tthis.searchTimer = requestIdleCallback(() => {\n\t\t\t\tthis._searchDocument(callback, showAll);\n\t\t\t});\n\t\t}\n\t}\n\t_searchTagName(word) {\n\t\tconst htmlData = this.getHtmlData();\n\t\thtmlData.tags.forEach(item => {\n\t\t\tthis._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.TAG_NAME });\n\t\t});\n\t\tif (!this.results.length) {\n\t\t\tthis._addTip({ word: word, value: word, type: Enum.TOKEN_TYPE.TAG_NAME, skipMatch: true });\n\t\t}\n\t\tthis._showTip();\n\t}\n\t_searchTagAttrName(word, tag) {\n\t\tconst htmlData = this.getHtmlData();\n\t\tlet attributes = htmlData.tagMap[tag];\n\t\tattributes = attributes && attributes.attributes;\n\t\tif (attributes) {\n\t\t\t// 标签专有属性\n\t\t\tattributes.forEach(item => {\n\t\t\t\tthis._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.ATTR_NAME, after: '=\"\"' });\n\t\t\t});\n\t\t}\n\t\t// 公共属性\n\t\thtmlData.globalAttributes.forEach(item => {\n\t\t\tthis._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.ATTR_NAME, after: '=\"\"' });\n\t\t});\n\t\tthis._showTip();\n\t}\n\t_searchCssTag(word) {\n\t\tconst htmlData = this.getHtmlData();\n\t\thtmlData.tags.forEach(item => {\n\t\t\tthis._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_TAG });\n\t\t});\n\t}\n\t_searchCssPseudo(word) {\n\t\tconst cssData = this.getCssData();\n\t\tconst pseudo = word.split(':').peek().trim();\n\t\tcssData.pseudoClasses.forEach(item => {\n\t\t\tif (pseudo) {\n\t\t\t\tthis._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PSEUDO });\n\t\t\t} else {\n\t\t\t\tthis._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PSEUDO, skipMatch: true });\n\t\t\t}\n\t\t});\n\t\tcssData.pseudoElements.forEach(item => {\n\t\t\tif (pseudo) {\n\t\t\t\tthis._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PSEUDO });\n\t\t\t} else {\n\t\t\t\tthis._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PSEUDO, skipMatch: true });\n\t\t\t}\n\t\t});\n\t}\n\t_searchStyle(word, nowToken) {\n\t\tlet column = this.editor.nowCursorPos.column;\n\t\tlet lineObj = this.context.htmls[this.editor.nowCursorPos.line - 1];\n\t\tlet keyValue = null;\n\t\tword = lineObj.text.slice(nowToken.startIndex, column);\n\t\tkeyValue = regs.styleCss.exec(word);\n\t\tif (keyValue && keyValue[1]) {\n\t\t\tlet property = keyValue[1];\n\t\t\tlet value = keyValue[2] || '';\n\t\t\tthis._searchCssValue(value, property);\n\t\t\treturn;\n\t\t}\n\t\tkeyValue = regs.styleCssProperty.exec(word);\n\t\tif (keyValue && keyValue[1]) {\n\t\t\tthis._searchCssProperty(keyValue[1]);\n\t\t}\n\t}\n\t_searchCssProperty(word) {\n\t\tconst cssData = this.getCssData();\n\t\tcssData.properties.forEach(item => {\n\t\t\tthis._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PROPERTY, after: ': ' });\n\t\t});\n\t\tif (!this.results.length) {\n\t\t\tconst emmetObj = extract(word, word.length, { type: 'stylesheet' });\n\t\t\tif (emmetObj && emmetObj.abbreviation) {\n\t\t\t\tthis._addTip({ word: emmetObj.abbreviation, value: emmetObj.abbreviation, type: Enum.TOKEN_TYPE.EMMET_CSS, skipMatch: true });\n\t\t\t}\n\t\t}\n\t\tthis._showTip();\n\t}\n\t_searchCssValue(word, property) {\n\t\tconst cssData = this.getCssData();\n\t\tlet values = cssData.propertyMap[property];\n\t\tvalues = values && values.values;\n\t\tif (values) {\n\t\t\tlet _word = word.trim();\n\t\t\tif (_word === ':' || _word === '') {\n\t\t\t\tvalues.forEach(item => {\n\t\t\t\t\tthis._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_VALUE, before: ' ', after: ';', skipMatch: true });\n\t\t\t\t});\n\t\t\t\tthis._showTip(true);\n\t\t\t} else {\n\t\t\t\tvalues.forEach(item => {\n\t\t\t\t\tthis._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_VALUE, after: ';' });\n\t\t\t\t});\n\t\t\t\tthis._showTip();\n\t\t\t}\n\t\t}\n\t}\n\t_searchEmmet(word) {\n\t\tconst emmetObj = extract(word);\n\t\tif (emmetObj && emmetObj.abbreviation) {\n\t\t\tthis._addTip({ word: emmetObj.abbreviation, value: emmetObj.abbreviation, type: Enum.TOKEN_TYPE.EMMET_HTML, skipMatch: true });\n\t\t\tthis._showTip();\n\t\t}\n\t}\n\t_setTokenType(token) {\n\t\ttoken.isSourceToken = false;\n\t\ttoken.isCssToken = false;\n\t\ttoken.isTextToken = false;\n\t\ttoken.isTagToken = false;\n\t\ttoken.isTagAttrNameToken = false;\n\t\ttoken.scope = token.scope || token.scopes.join(' ');\n\t\tfor (let i = token.scopes.length - 1; i >= 0; i--) {\n\t\t\tlet scope = token.scopes[i];\n\t\t\tif (scope.startsWith('source.')) {\n\t\t\t\ttoken.isSourceToken = true;\n\t\t\t\tif (scope.startsWith('source.css')) {\n\t\t\t\t\ttoken.isCssToken = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t} else if (scope.startsWith('text.')) {\n\t\t\t\ttoken.isTextToken = true;\n\t\t\t\ttoken.isTagAttrNameToken = regs.tagAttrName.test(token.scope);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\ttoken.isTagToken = regs.tagToken.test(token.scope);\n\t\ttoken.isTagNameToken = regs.tagNameToken.test(token.scope);\n\t\ttoken.isStringToken = regs.stringToken.test(token.scope);\n\t\tif (token.isCssToken) {\n\t\t\ttoken.isCssValueToken = regs.cssValueToken.test(token.scope);\n\t\t\ttoken.isCssPropertyToken = regs.cssPropertyToken.test(token.scope);\n\t\t\ttoken.isCssSelectorToken = regs.cssSelectorToken.test(token.scope);\n\t\t\ttoken.isCssClassToken = regs.cssClassToken.test(token.scope);\n\t\t\ttoken.isCssAttributeToken = regs.cssAttributeToken.test(token.scope);\n\t\t\ttoken.isCssPseudoToken = regs.cssPseudoToken.test(token.scope);\n\t\t}\n\t}\n\t_isTextToken(token) {\n\t\tif (token.isTextToken === undefined) {\n\t\t\tthis._setTokenType(token);\n\t\t}\n\t\treturn token.isTextToken;\n\t}\n\t_isSourceToken(token) {\n\t\tif (token.isSourceToken === undefined) {\n\t\t\tthis._setTokenType(token);\n\t\t}\n\t\treturn token.isSourceToken;\n\t}\n\t_isCssToken(token) {\n\t\tif (token.isCssToken === undefined) {\n\t\t\tthis._setTokenType(token);\n\t\t}\n\t\treturn token.isCssToken;\n\t}\n\t_isCssPropertyToken(token) {\n\t\tif (token.isCssPropertyToken === undefined) {\n\t\t\tthis._setTokenType(token);\n\t\t}\n\t\treturn token.isCssPropertyToken;\n\t}\n\t_isCssValueToken(token) {\n\t\tif (token.isCssValueToken === undefined) {\n\t\t\tthis._setTokenType(token);\n\t\t}\n\t\treturn token.isCssValueToken;\n\t}\n\t_isCssSelectorToken(token) {\n\t\tif (token.isCssSelectorToken === undefined) {\n\t\t\tthis._setTokenType(token);\n\t\t}\n\t\treturn token.isCssSelectorToken;\n\t}\n\t_isCssClassToken(token) {\n\t\tif (token.isCssClassToken === undefined) {\n\t\t\tthis._setTokenType(token);\n\t\t}\n\t\treturn token.isCssClassToken;\n\t}\n\t_isCssAttributeToken(token) {\n\t\tif (token.isCssAttributeToken === undefined) {\n\t\t\tthis._setTokenType(token);\n\t\t}\n\t\treturn token.isCssAttributeToken;\n\t}\n\t_isCssPseudoToken(token) {\n\t\tif (token.isCssPseudoToken === undefined) {\n\t\t\tthis._setTokenType(token);\n\t\t}\n\t\treturn token.isCssPseudoToken;\n\t}\n\t_isStringToken(token) {\n\t\tif (token.isStringToken === undefined) {\n\t\t\tthis._setTokenType(token);\n\t\t}\n\t\treturn token.isStringToken;\n\t}\n\t_isTagToken(token) {\n\t\tif (token.isTagToken === undefined) {\n\t\t\tthis._setTokenType(token);\n\t\t}\n\t\treturn token.isTagToken;\n\t}\n\t_isTagNameToken(token) {\n\t\tif (token.isTagNameToken === undefined) {\n\t\t\tthis._setTokenType(token);\n\t\t}\n\t\treturn token.isTagNameToken;\n\t}\n\t_isAttrNameToken(token) {\n\t\tif (token.isTagAttrNameToken === undefined) {\n\t\t\tthis._setTokenType(token);\n\t\t}\n\t\treturn token.isTagAttrNameToken;\n\t}\n\t_getPreTagName(tokenIndex, line) {\n\t\tlet tag = '';\n\t\tlet count = 0;\n\t\touterLoop: while (line >= 1) {\n\t\t\tlet lineObj = this.context.htmls[line - 1];\n\t\t\tif (!lineObj.tokens) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\ttokenIndex = tokenIndex > -1 ? tokenIndex : lineObj.tokens.length;\n\t\t\tfor (let i = tokenIndex - 1; i >= 0; i--) {\n\t\t\t\tlet token = lineObj.tokens[i];\n\t\t\t\tif (this._isTagNameToken(token)) {\n\t\t\t\t\ttag = lineObj.text.slice(token.startIndex, token.endIndex);\n\t\t\t\t\tbreak outerLoop;\n\t\t\t\t}\n\t\t\t\tcount++;\n\t\t\t\tif (count > 100) {\n\t\t\t\t\tbreak outerLoop;\n\t\t\t\t}\n\t\t\t}\n\t\t\tline--;\n\t\t\ttokenIndex = -1;\n\t\t}\n\t\treturn tag;\n\t}\n\t_getPreCssProperty(tokenIndex, line) {\n\t\tlet property = '';\n\t\tlet count = 0;\n\t\touterLoop: while (line >= 1) {\n\t\t\tlet lineObj = this.context.htmls[line - 1];\n\t\t\tif (!lineObj.tokens) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\ttokenIndex = tokenIndex > -1 ? tokenIndex : lineObj.tokens.length;\n\t\t\tfor (let i = tokenIndex - 1; i >= 0; i--) {\n\t\t\t\tlet token = lineObj.tokens[i];\n\t\t\t\tif (this._isCssPropertyToken(token)) {\n\t\t\t\t\tproperty = lineObj.text.slice(token.startIndex, token.endIndex);\n\t\t\t\t\tbreak outerLoop;\n\t\t\t\t}\n\t\t\t\tcount++;\n\t\t\t\tif (count > 100 || !this._isCssValueToken(token)) {\n\t\t\t\t\tbreak outerLoop;\n\t\t\t\t}\n\t\t\t}\n\t\t\tline--;\n\t\t\ttokenIndex = -1;\n\t\t}\n\t\treturn property;\n\t}\n\t_addTip(option) {\n\t\tlet result = null;\n\t\tlet fullMatch = option.fullMatch;\n\t\tfullMatch = fullMatch === undefined ? true : fullMatch;\n\t\tif (this.doneMap[option.value] && !option.skipDone) {\n\t\t\treturn;\n\t\t}\n\t\tif (option.skipMatch) {\n\t\t\tresult = {\n\t\t\t\tindexs: [],\n\t\t\t\tscore: 0,\n\t\t\t};\n\t\t} else {\n\t\t\tresult = Util.fuzzyMatch(option.word.trim(), option.value, fullMatch);\n\t\t}\n\t\tif (result) {\n\t\t\tlet obj = {\n\t\t\t\tresult: option.value,\n\t\t\t\tword: option.word || '',\n\t\t\t\tdesc: option.desc || '',\n\t\t\t\ttype: option.type || '',\n\t\t\t\tbefore: option.before || '',\n\t\t\t\tafter: option.after || '',\n\t\t\t\ticon: this.getIcon(option.scope),\n\t\t\t\tindexs: result.indexs,\n\t\t\t\tscore: result.score,\n\t\t\t};\n\t\t\tthis.results.push(obj);\n\t\t\tthis.doneMap[option.value] = obj;\n\t\t} else {\n\t\t\tthis.doneMap[option.value] = true;\n\t\t}\n\t}\n\t_showTip(all) {\n\t\tlet results = null;\n\t\tlet limit = all ? 200 : 10;\n\t\tthis.results.sort((a, b) => {\n\t\t\treturn b.score - a.score;\n\t\t});\n\t\tresults = this.results.slice(0, limit);\n\t\tthis.editor.setAutoTip(results);\n\t}\n\tcheckEmmetValid(text) {\n\t\tlet _text = '';\n\t\tif (regs.invalidEmmetParen.exec(text)) {\n\t\t\treturn false;\n\t\t}\n\t\twhile (text !== (_text = text.replace(regs.paremEmmet, 'a'))) {\n\t\t\ttext = _text;\n\t\t}\n\t\treturn !!regs.emmet.exec(text);\n\t}\n\tgetTokenIndex(cursorPos) {\n\t\tlet tokens = this.context.htmls[cursorPos.line - 1].tokens;\n\t\tif (tokens) {\n\t\t\tfor (let i = 0; i < tokens.length; i++) {\n\t\t\t\tif (tokens[i].startIndex < cursorPos.column && tokens[i].endIndex >= cursorPos.column) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\tgetHtmlData() {\n\t\tif (this.htmlData) {\n\t\t\treturn this.htmlData;\n\t\t} else {\n\t\t\tconst htmlData = window.require(path.join(globalData.dirname, 'main/data/browsers.html-data'));\n\t\t\tthis.htmlData = htmlData;\n\t\t\thtmlData.tagMap = {};\n\t\t\thtmlData.tags.forEach(item => {\n\t\t\t\thtmlData.tagMap[item.name] = item;\n\t\t\t});\n\t\t\treturn this.htmlData;\n\t\t}\n\t}\n\tgetCssData() {\n\t\tif (this.cssData) {\n\t\t\treturn this.cssData;\n\t\t} else {\n\t\t\tconst cssData = window.require(path.join(globalData.dirname, 'main/data/browsers.css-data'));\n\t\t\tthis.cssData = cssData;\n\t\t\tcssData.propertyMap = {};\n\t\t\tcssData.properties.forEach(item => {\n\t\t\t\tcssData.propertyMap[item.name] = item;\n\t\t\t});\n\t\t\treturn this.cssData;\n\t\t}\n\t}\n\tgetIcon(scope) {\n\t\treturn '';\n\t}\n}\n\nexport default Autocomplete;\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-03-04 16:13:41\r\n * @Description: \r\n */\r\nclass Node {\r\n    constructor(max) {\r\n        this.dataList = new Array(max + 1);\r\n        this.linkList = new Array(max + 2);\r\n        this.num = 0;\r\n        this.next = null;\r\n        this.prev = null;\r\n        this.pNode = null;\r\n    }\r\n}\r\nclass Btree {\r\n    /**\r\n     * 构造器\r\n     * @param {Function} compare 比较器\r\n     * @param {Number} max 节点可存储的最大数量 \r\n     */\r\n    constructor(compare, max) {\r\n        this.max = max || 4;\r\n        this.root = null;\r\n        this.head = null;\r\n        this.size = 0;\r\n        this.compare = compare || function (a, b) {\r\n            return a - b;\r\n        }\r\n    }\r\n    /**\r\n     * 插入\r\n     * @param {Any} value \r\n     */\r\n    insert(value) {\r\n        if (!this.root) {\r\n            let node = new Node(this.max);\r\n            node.dataList[0] = value;\r\n            node.num++;\r\n            this.root = node;\r\n            this.head = node;\r\n            this.size++;\r\n            this.arrayCache = null;\r\n            return;\r\n        }\r\n        let node = this._search(value, true);\r\n        let link = null;\r\n        let half = Math.floor(this.max / 2) || 1; //m为1时，n应该也为1\r\n        let result = this.iterator(node, value);\r\n        if (this.findIndex(node, value) > -1) { //value已经存在，直接返回\r\n            return result;\r\n        }\r\n        this.size++;\r\n        this.arrayCache = null;\r\n        while (node) {\r\n            let linkList = node.linkList;\r\n            let dataList = node.dataList;\r\n            for (let i = 0; i < node.num; i++) {\r\n                let data = dataList[i];\r\n                if (this.compare(value, data) < 0) {\r\n                    _insert(dataList, linkList, i);\r\n                    break;\r\n                } else if (i === node.num - 1) {\r\n                    _insert(dataList, linkList, i + 1);\r\n                }\r\n            }\r\n            node.num++; //关键字数量加1\r\n            if (node.num <= this.max) { //存储数量未超过最大限制，直接结束插入\r\n                break;\r\n            }\r\n            let newNode = new Node(this.max);\r\n            let isPnode = node.linkList[0];\r\n            value = dataList[half]; //父节点需要插入的值\r\n            if (!isPnode) { //叶子节点更新前后件\r\n                if (node.next) {\r\n                    node.next.prev = newNode;\r\n                }\r\n                newNode.next = node.next;\r\n                node.next = newNode;\r\n                newNode.prev = node;\r\n                newNode.pNode = node.pNode;\r\n            }\r\n            link = newNode;\r\n            //复制数据到新节点，如果是叶子节点，需要把value留在叶子节点中\r\n            for (let i = (isPnode ? half + 1 : half), j = 0; i < node.num; i++, j++) {\r\n                newNode.dataList[j] = dataList[i];\r\n                newNode.linkList[j + 1] = linkList[i + 1];\r\n                if (newNode.linkList[j + 1]) {\r\n                    newNode.linkList[j + 1].pNode = newNode;\r\n                }\r\n                dataList[i] = null;\r\n                linkList[i + 1] = null;\r\n                newNode.num++;\r\n            }\r\n            node.num = half; //关键字数量为最大值的一半\r\n            if (isPnode) {\r\n                node.dataList[node.num] = null;\r\n                // 非叶子节点，需要把左侧最后一个指针域复制过来\r\n                newNode.linkList[0] = node.linkList[node.num + 1];\r\n                if (newNode.linkList[0]) {\r\n                    newNode.linkList[0].pNode = newNode;\r\n                }\r\n                node.linkList[node.num + 1] = null;\r\n            }\r\n            if (!node.pNode) { //上溢到了根节点\r\n                this.root = new Node(this.max);\r\n                this.root.dataList[0] = value;\r\n                this.root.linkList[0] = node;\r\n                this.root.linkList[1] = newNode;\r\n                this.root.num = 1;\r\n                node.pNode = this.root;\r\n                newNode.pNode = this.root;\r\n                break;\r\n            }\r\n            node = node.pNode;\r\n        }\r\n        return result;\r\n\r\n        // 在i位置插入数据\r\n        function _insert(dataList, linkList, i) {\r\n            for (let j = node.num; j >= i + 1; j--) { //后移元素\r\n                dataList[j] = dataList[j - 1];\r\n                linkList[j + 1] = linkList[j];\r\n            }\r\n            dataList[i] = value;\r\n            linkList[i + 1] = link;\r\n            if (link) {\r\n                link.pNode = node;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 删除\r\n     * @param {Any} value \r\n     */\r\n    delete(value) {\r\n        let that = this;\r\n        let node = this._search(value);\r\n        let result = null;\r\n        let half = Math.floor(this.max / 2) || 1;\r\n        if (node) {\r\n            let dataList = node.dataList;\r\n            let index = this.findIndex(node, value);\r\n            result = dataList[index];\r\n            for (let i = index; i < node.num; i++) { //前移元素\r\n                dataList[i] = dataList[i + 1];\r\n            }\r\n            node.num--;\r\n            this.size--;\r\n            this.arrayCache = null;\r\n            if (!this.size) {\r\n                this.root = null;\r\n                return result;\r\n            }\r\n        }\r\n        while (node && node.num < half && node.pNode) {\r\n            let pNode = node.pNode;\r\n            let pIndex = pNode.linkList.indexOf(node);\r\n            let leftNode = pNode.linkList[pIndex - 1];\r\n            let rightNode = pNode.linkList[pIndex + 1];\r\n            let isPnode = node.linkList[0];\r\n            if (leftNode && leftNode.num > half) { //从左节点借\r\n                _moveRight(node, 1);\r\n                if (isPnode) {\r\n                    node.dataList[0] = pNode.dataList[pIndex - 1];\r\n                    node.linkList[0] = leftNode.linkList[leftNode.num];\r\n                    pNode.dataList[pIndex - 1] = leftNode.dataList[leftNode.num - 1];\r\n                } else {\r\n                    node.dataList[0] = leftNode.dataList[leftNode.num - 1];\r\n                    pNode.dataList[pIndex - 1] = node.dataList[0];\r\n                }\r\n                if (node.linkList[0]) {\r\n                    node.linkList[0].pNode = node;\r\n                }\r\n                pNode.dataList[pIndex - 1] = leftNode.dataList[leftNode.num - 1];\r\n                leftNode.dataList[leftNode.num - 1] = null;\r\n                leftNode.linkList[leftNode.num] = null;\r\n                leftNode.num--;\r\n                node.num++;\r\n            } else if (rightNode && rightNode.num > half) { //从右节点借\r\n                if (isPnode) {\r\n                    node.dataList[node.num] = pNode.dataList[pIndex];\r\n                    node.linkList[node.num + 1] = rightNode.linkList[0];\r\n                    pNode.dataList[pIndex] = rightNode.dataList[0];\r\n                } else {\r\n                    node.dataList[node.num] = rightNode.dataList[0];\r\n                    pNode.dataList[pIndex] = rightNode.dataList[1];\r\n                }\r\n                if (node.linkList[node.num + 1]) {\r\n                    node.linkList[node.num + 1].pNode = node;\r\n                }\r\n                _moveLeft(rightNode, 1);\r\n                rightNode.num--;\r\n                node.num++;\r\n            } else if (rightNode) { //向右合并\r\n                _join(node.pNode, pIndex, node, rightNode);\r\n            } else if (leftNode) { //向左合并\r\n                _join(node.pNode, pIndex - 1, leftNode, node);\r\n            }\r\n        }\r\n        return result;\r\n\r\n        function _join(pNode, pIndex, leftNode, rightNode) {\r\n            let isPnode = leftNode.linkList[0] ? 1 : 0;\r\n            // 右移右节点\r\n            _moveRight(rightNode, leftNode.num + isPnode);\r\n            //复制左节点到右节点\r\n            for (let i = 0; i < leftNode.num; i++) {\r\n                rightNode.dataList[i] = leftNode.dataList[i];\r\n                rightNode.linkList[i + 1] = leftNode.linkList[i + 1];\r\n                if (rightNode.linkList[i + 1]) {\r\n                    rightNode.linkList[i + 1].pNode = rightNode;\r\n                }\r\n            }\r\n            rightNode.linkList[0] = leftNode.linkList[0];\r\n            if (rightNode.linkList[0]) {\r\n                rightNode.linkList[0].pNode = rightNode;\r\n            }\r\n            if (isPnode) { //当前节点非叶子节点，父节点下移\r\n                rightNode.dataList[leftNode.num] = pNode.dataList[pIndex];\r\n            }\r\n            _moveLeft(pNode, 1, pIndex); //删除父节点和左域\r\n            rightNode.num += leftNode.num + isPnode;\r\n            pNode.num--;\r\n            if (!isPnode) { //叶子节点更新前后件\r\n                if (that.head === leftNode) { //头结点被删除\r\n                    that.head = rightNode;\r\n                    that.head.prev = null;\r\n                } else {\r\n                    leftNode.prev.next = rightNode;\r\n                    rightNode.prev = leftNode.prev;\r\n                }\r\n            }\r\n            if (!pNode.num) { //已经到了根节点\r\n                that.root = rightNode;\r\n                that.root.pNode = null;\r\n                node = null;\r\n            } else {\r\n                node = pNode;\r\n            }\r\n        }\r\n\r\n        //右移num个节点\r\n        function _moveRight(target, num) {\r\n            for (let i = target.num - 1; i >= 0; i--) {\r\n                target.dataList[num + i] = target.dataList[i];\r\n                target.linkList[num + i + 1] = target.linkList[i + 1];\r\n            }\r\n            target.linkList[num] = target.linkList[0];\r\n        }\r\n\r\n        //左移num个节点\r\n        function _moveLeft(target, num, index) {\r\n            index = index || 0;\r\n            for (let i = index; i < target.num; i++) {\r\n                target.dataList[i] = target.dataList[i + num];\r\n                target.linkList[i] = target.linkList[i + num];\r\n            }\r\n            target.linkList[target.num] = target.linkList[target.num + num];\r\n        }\r\n    }\r\n    /**\r\n     * 查找\r\n     * @param {Any} value \r\n     * @param {Function} compare 自定义查找比较器 \r\n     * @param {Boolean} insert 是否查找查找最近的节点 \r\n     */\r\n    search(value, compare, insert) {\r\n        let result = this._search(value, insert, compare);\r\n        if (result) {\r\n            result = this.iterator(result, value, compare);\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * @param {Node} node \r\n     * @param {Any} value \r\n     */\r\n    findIndex(node, value) {\r\n        for (let i = 0; i < node.num; i++) {\r\n            if (this.compare(value, node.dataList[i]) === 0) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    /**\r\n     * 把搜索结果封装成迭代器\r\n     * @param {Node} result \r\n     * @param {Any} value \r\n     */\r\n    iterator(result, value, compare) {\r\n        let index = result.num;\r\n        let orginIndex = result.num;\r\n        let originResult = result.num;\r\n        compare = compare || this.compare;\r\n        for (let i = 0; i < result.num; i++) {\r\n            let item = result.dataList[i];\r\n            let res = compare(value, item);\r\n            if(res <= 0) { //确保next一定大于等于当前值value\r\n                orginIndex = i;\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return {\r\n            next: _next,\r\n            prev: _prev,\r\n            reset: function () {\r\n                index = orginIndex;\r\n                result = originResult;\r\n            }\r\n        }\r\n\r\n        function _next() {\r\n            if (index < result.num) {\r\n                return result.dataList[index++];\r\n            } else if (result.next) {\r\n                result = result.next;\r\n                index = 0;\r\n                return result.dataList[index];\r\n            }\r\n            return null;\r\n        }\r\n\r\n        function _prev() {\r\n            index--;\r\n            if (index >= 0) {\r\n                return result.dataList[index];\r\n            } else if (result.prev) {\r\n                result = result.prev;\r\n                index = result.num - 1;\r\n                return result.dataList[index];\r\n            } else {\r\n                index++;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n    forEach(cb) {\r\n        let arr = this.toArray();\r\n        for (let i = 0; i < arr.length; i++) {\r\n            cb(arr[i], i);\r\n        }\r\n    }\r\n    toArray() {\r\n        if (this.arrayCache) {\r\n            return this.arrayCache;\r\n        }\r\n        let results = [];\r\n        let node = this.head;\r\n        while (node) {\r\n            let dataList = node.dataList;\r\n            for (let index = 0; index < node.num; index++) {\r\n                results.push(dataList[index]);\r\n            }\r\n            node = node.next;\r\n        }\r\n        this.arrayCache = results;\r\n        return results;\r\n    }\r\n    get(index) {\r\n        let node = this.head;\r\n        let count = -1;\r\n        while (node) {\r\n            let dataList = node.dataList;\r\n            for (let i = 0; i < node.num; i++) {\r\n                count++;\r\n                if (count == index) {\r\n                    return dataList[i];\r\n                }\r\n            }\r\n            node = node.next;\r\n        }\r\n        return null;\r\n    }\r\n    empty() {\r\n        this.root = null;\r\n        this.head = null;\r\n        this.size = 0;\r\n        this.arrayCache = null;\r\n    }\r\n    _search(value, isInsert, compare) {\r\n        let node = this.root;\r\n        compare = compare || this.compare;\r\n        while (node) {\r\n            let linkList = node.linkList;\r\n            let dataList = node.dataList;\r\n            for (let i = 0; i < node.num; i++) {\r\n                let res = compare(value, dataList[i]);\r\n                if (res === 0) {\r\n                    if (linkList[i + 1]) { //右侧子节点存放了父节点\r\n                        node = linkList[i + 1];\r\n                        break;\r\n                    } else {\r\n                        return node;\r\n                    }\r\n                } else if (res > 0) {\r\n                    if (!dataList[i + 1] || compare(value, dataList[i + 1]) < 0) { //目标在右侧子树中\r\n                        if (linkList[i + 1]) {\r\n                            node = linkList[i + 1];\r\n                            break;\r\n                        } else {\r\n                            return isInsert ? node : null;\r\n                        }\r\n                    }\r\n                } else { //目标在左侧子树中\r\n                    if (linkList[i]) {\r\n                        node = linkList[i];\r\n                        break;\r\n                    } else {\r\n                        return isInsert ? node : null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Btree;","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-31 14:42:01\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport Btree from '@/common/btree';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst comparator = function (a, b) {\r\n\treturn a.start.line - b.start.line;\r\n};\r\n\r\nconst singleTag = ['br', 'hr', 'area', 'base', 'img', 'input', 'link', 'meta', 'basefont', 'param', 'col', 'frame', 'embed', 'keygen', 'source'];\r\nconst singleTagMap = {};\r\nsingleTag.forEach(tag => {\r\n\tsingleTagMap[tag] = true;\r\n});\r\n\r\nexport default class {\r\n\tconstructor(editor, context) {\r\n\t\tthis.editor = editor;\r\n\t\tthis.context = context;\r\n\t\tthis.folds = new Btree(comparator);\r\n\t}\r\n\tdestroy() {\r\n\t\tthis.editor = null;\r\n\t\tthis.context = null;\r\n\t\tthis.folds.empty();\r\n\t}\r\n\tonInsertContentAfter(preCursorPos, cursorPos) {\r\n\t\tlet folds = this.folds.toArray();\r\n\t\tlet afterIndex = Infinity;\r\n\t\t// 历史记录中操作光标在折叠区，需要先展开\r\n\t\tfor (let i = 0; i < folds.length; i++) {\r\n\t\t\tlet fold = folds[i];\r\n\t\t\tif (fold.start.line < preCursorPos.line) {\r\n\t\t\t\tif (fold.end.line > preCursorPos.line) {\r\n\t\t\t\t\tthis.editor.unFold(fold.start.line);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tafterIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (cursorPos.line > preCursorPos.line) {\r\n\t\t\tif (folds[afterIndex] && folds[afterIndex].start.line === preCursorPos.line) {\r\n\t\t\t\tthis.editor.unFold(preCursorPos.line);\r\n\t\t\t\tafterIndex++;\r\n\t\t\t}\r\n\t\t\t// 更新后面的行号\r\n\t\t\tfor (let i = afterIndex; i < folds.length; i++) {\r\n\t\t\t\tfolds[i].start.line += cursorPos.line - preCursorPos.line;\r\n\t\t\t\tfolds[i].end.line += cursorPos.line - preCursorPos.line;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tonDeleteContentAfter(preCursorPos, cursorPos) {\r\n\t\tlet folds = this.folds.toArray();\r\n\t\tlet afterIndex = Infinity;\r\n\t\tfor (let i = 0; i < folds.length; i++) {\r\n\t\t\tlet fold = folds[i];\r\n\t\t\tlet starLine = fold.start.line;\r\n\t\t\tlet endLine = fold.end.line;\r\n\t\t\tif (starLine <= preCursorPos.line) {\r\n\t\t\t\tif (starLine < preCursorPos.line) {\r\n\t\t\t\t\tif ((starLine >= cursorPos.line && starLine < preCursorPos.line) || (starLine < cursorPos.line && endLine > cursorPos.line)) {\r\n\t\t\t\t\t\tthis.editor.unFold(starLine);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (preCursorPos.line > cursorPos.line) {\r\n\t\t\t\t\t\tthis.editor.unFold(starLine);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tafterIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (preCursorPos.line > cursorPos.line) {\r\n\t\t\t// 更新后面的行号\r\n\t\t\tfor (let i = afterIndex; i < folds.length; i++) {\r\n\t\t\t\tfolds[i].start.line += cursorPos.line - preCursorPos.line;\r\n\t\t\t\tfolds[i].end.line += cursorPos.line - preCursorPos.line;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 折叠行\r\n\tfoldLine(line) {\r\n\t\tlet resultFold = this.getRangeFold(line);\r\n\t\tif (resultFold) {\r\n\t\t\t// 避免交叉折叠\r\n\t\t\tfor (let line = resultFold.start.line + 1; line < resultFold.end.line; line++) {\r\n\t\t\t\tlet fold = this.getFoldByLine(line);\r\n\t\t\t\tif (fold) {\r\n\t\t\t\t\tif (fold.end.line > resultFold.end.line) {\r\n\t\t\t\t\t\tthis.editor.unFold(line);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.folds.insert(resultFold);\r\n\t\t}\r\n\t\treturn resultFold;\r\n\t}\r\n\t// 展开折叠行\r\n\tunFold(line) {\r\n\t\tlet fold = this.getFoldByLine(line);\r\n\t\tfold && this.folds.delete(fold);\r\n\t\treturn fold;\r\n\t}\r\n\tgetFoldByLine(line) {\r\n\t\tlet it = this.folds.search(line, (a, b) => {\r\n\t\t\treturn a - b.start.line;\r\n\t\t});\r\n\t\treturn it && it.next();\r\n\t}\r\n\t/**\r\n\t * 检测行是否在折叠区域内【折叠后隐藏的行】\r\n\t * @param {Number} line 行号\r\n\t */\r\n\tgetLineInFold(line) {\r\n\t\tlet it = this.folds.search(\r\n\t\t\tline,\r\n\t\t\t(a, b) => {\r\n\t\t\t\treturn a - b.start.line;\r\n\t\t\t},\r\n\t\t\ttrue\r\n\t\t);\r\n\t\tif (it) {\r\n\t\t\tlet fold = it.prev();\r\n\t\t\tif (fold && fold.start.line < line && fold.end.line > line) {\r\n\t\t\t\treturn this.getLineInFold(fold.start.line) || fold;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t/**\r\n\t * 获取折叠范围\r\n\t * @param {Number} line 行号\r\n\t * @param {Boolean} foldIconCheck 检测是否显示折叠图标\r\n\t */\r\n\tgetRangeFold(line, foldIconCheck) {\r\n\t\tlet stack = [];\r\n\t\tlet startLine = line;\r\n\t\tlet lineObj = this.context.htmls[startLine - 1];\r\n\t\tlet startFold = null;\r\n\t\tif (lineObj.folds && lineObj.folds.length) {\r\n\t\t\tfor (let i = 0; i < lineObj.folds.length; i++) {\r\n\t\t\t\tlet fold = lineObj.folds[i];\r\n\t\t\t\tif (fold.side <= 0) {\r\n\t\t\t\t\tstack.push(fold);\r\n\t\t\t\t} else if (fold.side > 0) {\r\n\t\t\t\t\tfor (let i = stack.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tif (stack[i].side + fold.side === 0) {\r\n\t\t\t\t\t\t\tstack.splice(i, 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (stack.length) {\r\n\t\t\tlet foldStartText = '';\r\n\t\t\tstartFold = stack.peek();\r\n\t\t\tstartFold = Object.assign({ line: startLine }, startFold);\r\n\t\t\tfoldStartText = lineObj.text.slice(startFold.startIndex, startFold.endIndex);\r\n\t\t\t// 单标签没有折叠\r\n\t\t\tif (singleTagMap[foldStartText]) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// 单行注释\r\n\t\t\tif (startFold.type === Util.CONST_DATA.LINE_COMMENT) {\r\n\t\t\t\tlet endLine = startLine;\r\n\t\t\t\tlet fold = null;\r\n\t\t\t\tline = startLine + 1;\r\n\t\t\t\twhile (line <= this.context.htmls.length) {\r\n\t\t\t\t\tlet lineObj = this.context.htmls[line - 1];\r\n\t\t\t\t\tlet text = lineObj.text.trimLeft();\r\n\t\t\t\t\tlet startIndex = lineObj.text.length - text.length;\r\n\t\t\t\t\tlet _fold = lineObj.folds && lineObj.folds[0];\r\n\t\t\t\t\tif (_fold && _fold.type === Util.CONST_DATA.LINE_COMMENT && _fold.startIndex === startIndex) {\r\n\t\t\t\t\t\tendLine = line;\r\n\t\t\t\t\t\tfold = _fold;\r\n\t\t\t\t\t\tif (foldIconCheck && endLine - startLine > 1) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tline++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (foldIconCheck) {\r\n\t\t\t\t\treturn endLine - startLine > 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tstart: startFold,\r\n\t\t\t\t\t\tend: Object.assign({ line: endLine }, fold),\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this.getRangeFoldByStartFold(startFold, foldIconCheck);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tgetRangeFoldByStartFold(startFold, foldIconCheck) {\r\n\t\tlet line = startFold.line;\r\n\t\tlet stack = [];\r\n\t\tlet resultFold = null;\r\n\t\twhile (line <= this.context.htmls.length && (!foldIconCheck || line - startFold.line <= 1)) {\r\n\t\t\tlet lineObj = this.context.htmls[line - 1];\r\n\t\t\tif (lineObj.folds && lineObj.folds.length) {\r\n\t\t\t\tfor (let i = 0; i < lineObj.folds.length; i++) {\r\n\t\t\t\t\tlet fold = lineObj.folds[i];\r\n\t\t\t\t\tif (line === startFold.line && fold.startIndex <= startFold.startIndex) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (fold.side === startFold.side) {\r\n\t\t\t\t\t\tstack.push(fold);\r\n\t\t\t\t\t} else if (startFold.side + fold.side === 0) {\r\n\t\t\t\t\t\tif (stack.length === 0) {\r\n\t\t\t\t\t\t\tresultFold = {\r\n\t\t\t\t\t\t\t\tstart: startFold,\r\n\t\t\t\t\t\t\t\tend: Object.assign({ line: line }, fold),\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn foldIconCheck ? line - startFold.line > 1 : resultFold;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstack.pop();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tline++;\r\n\t\t}\r\n\t\treturn foldIconCheck ? line - startFold.line > 1 : resultFold;\r\n\t}\r\n\t/**\r\n\t * 获取当前光标所处的范围\r\n\t * @param {Object} cursorPos\r\n\t * @param {Function} callback\r\n\t */\r\n\tgetBracketMatch(cursorPos, callback) {\r\n\t\tcursorPos = { line: cursorPos.line, column: cursorPos.column };\r\n\t\tglobalData.scheduler.removeTask(this.getBracketMatchTask);\r\n\t\t_getBracket.call(this, cursorPos, [], cursorPos.line, callback);\r\n\r\n\t\tfunction _getBracket(cursorPos, stack, line, callback) {\r\n\t\t\tlet startFold = null;\r\n\t\t\tlet count = 0;\r\n\t\t\tlet startTime = Date.now();\r\n\t\t\twhile (line >= 1) {\r\n\t\t\t\tlet folds = this.context.htmls[line - 1].folds;\r\n\t\t\t\tif (!folds) {\r\n\t\t\t\t\treturn callback(null);\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = folds.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tlet fold = folds[i];\r\n\t\t\t\t\t// 跳过标签名\r\n\t\t\t\t\tif (fold.type === Util.CONST_DATA.TAG) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t} else if (fold.side > 0 && (line < cursorPos.line || fold.endIndex < cursorPos.column)) {\r\n\t\t\t\t\t\tstack.push(fold);\r\n\t\t\t\t\t} else if (fold.side < 0 && (line < cursorPos.line || fold.startIndex <= cursorPos.column)) {\r\n\t\t\t\t\t\tlet exsitEnd = false;\r\n\t\t\t\t\t\twhile (stack.length) {\r\n\t\t\t\t\t\t\tif (stack.pop().side + fold.side === 0) {\r\n\t\t\t\t\t\t\t\texsitEnd = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!exsitEnd) {\r\n\t\t\t\t\t\t\tstartFold = Object.assign({ line: line }, fold);\r\n\t\t\t\t\t\t\tstartFold = this.getRangeFoldByStartFold(startFold);\r\n\t\t\t\t\t\t\tcallback(startFold);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tline--;\r\n\t\t\t\tcount++;\r\n\t\t\t\tif (count >= 50 || Date.now() - startTime > 2) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 最多向上检查5000行\r\n\t\t\tif (line >= 1 && cursorPos.line - line < 5000) {\r\n\t\t\t\tthis.getBracketMatchTask = globalData.scheduler.addTask(() => {\r\n\t\t\t\t\t_getBracket.call(this, cursorPos, stack, line, callback);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 根据相对行号获取真实行号(折叠后行号会改变)\r\n\tgetRealLine(line) {\r\n\t\tlet i = 0;\r\n\t\tlet lineCount = 1;\r\n\t\tlet realLine = 1;\r\n\t\tlet folds = this.folds.toArray();\r\n\t\twhile (i < folds.length && lineCount < line) {\r\n\t\t\tlet fold = folds[i];\r\n\t\t\tif (lineCount + fold.start.line - realLine < line) {\r\n\t\t\t\tlineCount += fold.start.line + 1 - realLine;\r\n\t\t\t\trealLine = fold.end.line;\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t\twhile (i < folds.length && folds[i].end.line <= fold.end.line) {\r\n\t\t\t\t//多级折叠\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t\trealLine += line - lineCount;\r\n\t\treturn realLine;\r\n\t}\r\n\t// 根据真实行号获取相对行号\r\n\tgetRelativeLine(line) {\r\n\t\tlet relLine = line;\r\n\t\tlet i = 0;\r\n\t\tlet folds = this.folds.toArray();\r\n\t\twhile (i < folds.length) {\r\n\t\t\tlet fold = folds[i];\r\n\t\t\tif (line >= fold.end.line) {\r\n\t\t\t\trelLine -= fold.end.line - fold.start.line - 1;\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t\twhile (i < folds.length && folds[i].end.line <= fold.end.line) {\r\n\t\t\t\t//多级折叠\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn relLine;\r\n\t}\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-12 09:52:06\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\n\r\nexport default class {\r\n    constructor(editor, context, selecter) {\r\n        this.editor = editor;\r\n        this.context = context;\r\n        this.selecter = selecter;\r\n        this.wordPattern = Util.getWordPattern(this.editor.language);\r\n        this.wholeWordPattern = new RegExp(`^(${this.wordPattern.source})$`);\r\n        this.wordPattern = new RegExp(this.wordPattern.source, 'g');\r\n    }\r\n    search(searchObj) {\r\n        let resultObj = null;\r\n        let now = 0;\r\n        let count = 0;\r\n        let hasCache = this.hasCache();\r\n        let config = null;\r\n        searchObj = searchObj || {};\r\n        if (hasCache) {\r\n            resultObj = this.getFromCache(searchObj.direct, searchObj.increase);\r\n        } else {\r\n            config = (searchObj && searchObj.config) || this.getSearchConfig();\r\n            if (!config || !config.text) {\r\n                return { now: 0, count: 0 };\r\n            }\r\n            resultObj = this._search(config);\r\n        }\r\n        if (resultObj && resultObj.result) {\r\n            if (this.editor.searcher === this || searchObj.increase) {\r\n                if (hasCache) {\r\n                    this.editor.cursor.addCursorPos(resultObj.result.end);\r\n                    this.selecter.addActive(resultObj.result.end);\r\n                } else {\r\n                    //当前光标已处于选中区域边界，则不处理（历史记录后退时可能存在多个选中区域的情况）\r\n                    if (this.selecter.activedRanges.size === 0) {\r\n                        this.editor.cursor.setCursorPos(resultObj.result.end);\r\n                    } else {\r\n                        this.initIndexs();\r\n                    }\r\n                    this.selecter.addRange(resultObj.results);\r\n                }\r\n            } else {\r\n                if (hasCache) {\r\n                    this.selecter.setActive(resultObj.result.end);\r\n                    this.editor.cursor.setCursorPos(resultObj.result.end);\r\n                    this.editor.searcher.clearSearch(); //搜索框确认搜索后，删除按键搜索\r\n                } else {\r\n                    this.selecter.addRange(resultObj.results);\r\n                    this.clearActive();\r\n                }\r\n            }\r\n            now = resultObj.now;\r\n            count = resultObj.results.length;\r\n        }\r\n\r\n        return {\r\n            now: now,\r\n            count: count,\r\n        };\r\n    }\r\n    _search(config) {\r\n        let reg = null;\r\n        let exec = null;\r\n        let start = null;\r\n        let end = null;\r\n        let result = null;\r\n        let results = [];\r\n        let indexs = {};\r\n        let rangePos = null;\r\n        let line = 1;\r\n        let column = 0;\r\n        let index = 0;\r\n        let text = this.context.getAllText();\r\n        let lines = config.text.split(/\\n/);\r\n        let source = config.text.replace(/\\\\|\\.|\\*|\\+|\\-|\\?|\\(|\\)|\\[|\\]|\\{|\\}|\\^|\\$|\\~|\\!|\\&|\\|/g, '\\\\$&');\r\n        //完整匹配\r\n        if (this.wholeWordPattern.test(config.text) && config.wholeWord) {\r\n            source = '(?:\\\\b|(?<=[^0-9a-zA-Z]))' + source + '(?:\\\\b|(?=[^0-9a-zA-Z]))';\r\n        }\r\n        reg = new RegExp('[^\\n]*?(' + source + ')|[^\\n]*?\\n', config.matchCase ? 'mg' : 'img');\r\n        config = config || {};\r\n        while ((exec = reg.exec(text))) {\r\n            if (!exec[1]) {\r\n                line++;\r\n                column = 0;\r\n            } else {\r\n                start = {\r\n                    line: line,\r\n                    column: column + exec[0].length - exec[1].length,\r\n                };\r\n                end = {\r\n                    line: line + lines.length - 1,\r\n                    column: lines.length > 1 ? lines.peek().length : column + exec[0].length,\r\n                };\r\n                line = end.line;\r\n                column = end.column;\r\n                rangePos = {\r\n                    start: start,\r\n                    end: end,\r\n                };\r\n                results.push(rangePos);\r\n                if (!result && Util.comparePos(end, this.editor.nowCursorPos) >= 0) {\r\n                    result = rangePos;\r\n                    index = results.length - 1;\r\n                    indexs[results.length - 1] = true;\r\n                }\r\n            }\r\n        }\r\n        if (!results.length) {\r\n            return null;\r\n        }\r\n        if (!result && results.length) {\r\n            index = 0;\r\n            result = results[0];\r\n        }\r\n        this.cacheData = {\r\n            config: config,\r\n            results: results,\r\n            indexs: indexs,\r\n            index: index,\r\n        };\r\n        return {\r\n            now: this.cacheData.index + 1,\r\n            results: results,\r\n            result: result,\r\n        };\r\n    }\r\n    initIndexs() {\r\n        let ranges = this.selecter.activedRanges.toArray();\r\n        this.cacheData.indexs = {};\r\n        ranges.forEach((range) => {\r\n            for (let i = 0; i < this.cacheData.results.length; i++) {\r\n                let item = this.cacheData.results[i];\r\n                if (Util.comparePos(range.start, item.start) === 0) {\r\n                    this.cacheData.index = i;\r\n                    this.cacheData.indexs[i] = true;\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    // 重新搜索\r\n    refreshSearch(config) {\r\n        if (!this.hasCache() && !config) {\r\n            return;\r\n        }\r\n        return new Promise((resolve) => {\r\n            let refreshSearchId = this.refreshSearch.id + 1 || 1;\r\n            this.refreshSearch.id = refreshSearchId;\r\n            this.editor.$nextTick(() => {\r\n                if (this.refreshSearch.id !== refreshSearchId) {\r\n                    return;\r\n                }\r\n                if (this.hasCache() || config) {\r\n                    config = config || this.cacheData.config;\r\n                    this.clearSearch();\r\n                    this.search({\r\n                        config: config,\r\n                    });\r\n                }\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n    hasCache() {\r\n        return !!this.cacheData;\r\n    }\r\n    /**\r\n     * 清除搜索\r\n     * @param {Boolean} retainActive 是否保留活动的选中区域\r\n     */\r\n    clearSearch(retainActive) {\r\n        if (retainActive) {\r\n            this.selecter.clearInactiveRange();\r\n        } else {\r\n            this.selecter.clearRange();\r\n        }\r\n        this.cacheData = null;\r\n    }\r\n    clearActive() {\r\n        if (this.cacheData) {\r\n            this.cacheData.index = -1;\r\n            this.cacheData.indexs = {};\r\n            this.selecter.clearActive();\r\n        }\r\n    }\r\n    setPrevActive(cursorPos) {\r\n        let results = this.cacheData.results;\r\n        let index = this.cacheData.index;\r\n        this.cacheData.index = results.length - 1;\r\n        for (let i = results.length - 1; i >= 0; i--) {\r\n            let item = results[i];\r\n            let res = Util.comparePos(item.end, cursorPos);\r\n            if (res < 0 || (index === -1 && res === 0)) {\r\n                this.cacheData.index = i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    setNextActive(cursorPos) {\r\n        let results = this.cacheData.results;\r\n        let index = this.cacheData.index;\r\n        this.cacheData.index = 0;\r\n        for (let i = 0; i < results.length; i++) {\r\n            let item = results[i];\r\n            let res = Util.comparePos(item.end, cursorPos);\r\n            if (res > 0 || (index === -1 && res === 0)) {\r\n                this.cacheData.index = i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    removeNow() {\r\n        this.cacheData.results.splice(this.cacheData.index, 1);\r\n        this.cacheData.index--;\r\n    }\r\n    clone(cacheData) {\r\n        this.cacheData = cacheData;\r\n        if (cacheData) {\r\n            this.selecter.addRange(cacheData.results);\r\n        }\r\n    }\r\n    getCacheData() {\r\n        return this.cacheData;\r\n    }\r\n    getNowRange() {\r\n        return this.cacheData.results[this.cacheData.index];\r\n    }\r\n    getFromCache(direct, increase) {\r\n        let results = this.cacheData.results;\r\n        let result = null;\r\n        let index = 0;\r\n        if (this.editor.fSearcher === this && !increase) {\r\n            // 搜索框移动活动区域\r\n            if (direct === 'up') {\r\n                this.setPrevActive(this.editor.nowCursorPos);\r\n            } else {\r\n                this.setNextActive(this.editor.nowCursorPos);\r\n            }\r\n            index = this.cacheData.index;\r\n            result = this.cacheData.results[index];\r\n            this.cacheData.indexs = { i: true };\r\n        } else {\r\n            //CTRL+D移动活动区域\r\n            let indexs = this.cacheData.indexs;\r\n            let delta = 0;\r\n            if (direct === 'up') {\r\n                delta = -1;\r\n            } else {\r\n                delta = 1;\r\n            }\r\n            index = this.cacheData.index + delta;\r\n            if (index == results.length) {\r\n                index = 0;\r\n            } else if (index < 0) {\r\n                index = results.length - 1;\r\n            }\r\n            // 已经没有非活动区域\r\n            if (!indexs[index]) {\r\n                result = results[index];\r\n                indexs[index] = true;\r\n                this.cacheData.index = index;\r\n            } else {\r\n                index = this.cacheData.index;\r\n            }\r\n        }\r\n\r\n        return {\r\n            now: index + 1,\r\n            result: result,\r\n            results: results,\r\n        };\r\n    }\r\n    getConfig() {\r\n        if (!this.cacheData) {\r\n            return;\r\n        }\r\n        return Object.assign({}, this.cacheData.config);\r\n    }\r\n    // 获取待搜索的文本\r\n    getSearchConfig() {\r\n        let result = null;\r\n        let wholeWord = false;\r\n        let searchText = '';\r\n        let range = this.editor.searcher.selecter.getRangeByCursorPos(this.editor.nowCursorPos);\r\n        if (this.editor.searcher === this && this.selecter.ranges.size > 0) {\r\n            return null;\r\n        }\r\n        if (range) {\r\n            searchText = this.context.getRangeText(range.start, range.end);\r\n        } else {\r\n            searchText = this.getNowWord().text;\r\n            wholeWord = true;\r\n        }\r\n        if (searchText) {\r\n            result = {\r\n                text: searchText,\r\n                wholeWord: wholeWord,\r\n                matchCase: wholeWord,\r\n            };\r\n        }\r\n        return result;\r\n    }\r\n    getNowWord() {\r\n        let text = this.context.htmls[this.editor.nowCursorPos.line - 1].text;\r\n        let str = '';\r\n        let index = this.editor.nowCursorPos.column;\r\n        let startColumn = index;\r\n        let endColumn = index;\r\n        let res = null;\r\n        while ((res = this.wordPattern.exec(text))) {\r\n            if (res.index <= index && res.index + res[0].length >= index) {\r\n                startColumn = res.index;\r\n                endColumn = res.index + res[0].length;\r\n                str = res[0];\r\n                break;\r\n            } else if (res.index > index) {\r\n                break;\r\n            }\r\n        }\r\n        this.wordPattern.lastIndex = 0;\r\n\r\n        return {\r\n            text: str,\r\n            range: {\r\n                start: {\r\n                    line: this.editor.nowCursorPos.line,\r\n                    column: startColumn,\r\n                },\r\n                end: {\r\n                    line: this.editor.nowCursorPos.line,\r\n                    column: endColumn,\r\n                },\r\n            },\r\n        };\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-13 10:41:16\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport Btree from '@/common/btree';\r\n\r\nconst comparator = function (a, b) {\r\n    let res = Util.comparePos(a.start, b.start);\r\n    if (res === 0) {\r\n        return Util.comparePos(a.end, b.end);\r\n    }\r\n    return res;\r\n};\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.editor = editor;\r\n        this.context = context;\r\n        this.ranges = new Btree(comparator);\r\n        this.activedRanges = new Btree(comparator);\r\n    }\r\n    destroy() {\r\n        this.editor = null;\r\n        this.context = null;\r\n        this.ranges.empty();\r\n        this.activedRanges.empty();\r\n    }\r\n    getRange(range) {\r\n        let it = this.ranges.search(range);\r\n        return it && it.next();\r\n    }\r\n    getRangeByLine(line) {\r\n        let results = [];\r\n        let it = this.ranges.search(\r\n            { line: line, column: 0 },\r\n            (value, item) => {\r\n                return Util.comparePos(value, item.end);\r\n            },\r\n            true\r\n        );\r\n        if (it) {\r\n            let value = it.next();\r\n            while (value) {\r\n                if (value.start.line === line || value.end.line === line) {\r\n                    results.push(value);\r\n                } else if (value.start.line > line) {\r\n                    break;\r\n                }\r\n                value = it.next();\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    // 检测光标是否在选中区域范围的边界\r\n    getRangeByCursorPos(cursorPos) {\r\n        let result = this.ranges.search(cursorPos, (value, item) => {\r\n            if (Util.comparePos(value, item.start) === 0 || Util.comparePos(value, item.end) === 0) {\r\n                return 0;\r\n            }\r\n            return Util.comparePos(value, item.start);\r\n        });\r\n        return result && result.next();\r\n    }\r\n    // 检查光标是否在选中范围内\r\n    getRangeWithCursorPos(cursorPos) {\r\n        let it = this.ranges.search(\r\n            cursorPos,\r\n            (value, item) => {\r\n                return Util.comparePos(value, item.start);\r\n            },\r\n            true\r\n        );\r\n        if (it) {\r\n            let value = it.prev();\r\n            if (value && Util.comparePos(value.end, cursorPos) >= 0) {\r\n                return value;\r\n            }\r\n            it.reset();\r\n            value = it.next();\r\n            if (value && Util.comparePos(value.start, cursorPos) == 0) {\r\n                return value;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    select(direct, wholeWord) {\r\n        this.editor.cursor.multiCursorPos.forEach((cursorPos) => {\r\n            let range = this.getRangeByCursorPos(cursorPos);\r\n            if (range) {\r\n                let start = range.start;\r\n                let end = range.end;\r\n                this.editor.cursor.moveCursor(cursorPos, direct, wholeWord);\r\n                if (direct === 'left') {\r\n                    if (Util.comparePos(cursorPos, range.start) < 0) {\r\n                        start = cursorPos;\r\n                    } else {\r\n                        end = cursorPos;\r\n                    }\r\n                } else {\r\n                    if (Util.comparePos(cursorPos, range.end) > 0) {\r\n                        end = cursorPos;\r\n                    } else {\r\n                        start = cursorPos;\r\n                    }\r\n                }\r\n                this.updateRange(range, {\r\n                    start: start,\r\n                    end: end,\r\n                });\r\n            } else {\r\n                let start = Object.assign({}, cursorPos);\r\n                let end = this.editor.cursor.moveCursor(cursorPos, direct, wholeWord);\r\n                range = this.createRange(start, end);\r\n                if (range) {\r\n                    this.addRange({\r\n                        start: start,\r\n                        end: end,\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        this.editor.renderSelectedBgAsync();\r\n    }\r\n    selectAll() {\r\n        let end = {\r\n            line: this.context.htmls.length,\r\n            column: this.context.htmls.peek().text.length,\r\n        };\r\n        this.editor.setData('forceCursorView', false);\r\n        this.editor.cursor.setCursorPos(end);\r\n        this.setRange(\r\n            {\r\n                line: 1,\r\n                column: 0,\r\n            },\r\n            end\r\n        );\r\n        this.editor.renderSelectedBgAsync();\r\n    }\r\n    selectAllOccurence() {\r\n        this.editor.cursor.clearCursorPos();\r\n        this.ranges.forEach((item) => {\r\n            this.editor.cursor.addCursorPos(item.end);\r\n            if (!item.active) {\r\n                item.active = true;\r\n                this.activedRanges.insert(item);\r\n            }\r\n        });\r\n        this.editor.renderSelectedBgAsync();\r\n    }\r\n    addActive(cursorPos) {\r\n        let range = this.getRangeByCursorPos(cursorPos);\r\n        if (range && !range.active) {\r\n            range.active = true;\r\n            this.activedRanges.insert(range);\r\n        }\r\n        this.editor.renderSelectedBgAsync();\r\n    }\r\n    // 添加选中区域\r\n    addRange(ranges) {\r\n        let results = [];\r\n        let list = ranges instanceof Array ? ranges : [ranges];\r\n        list.forEach((range) => {\r\n            let start = range.start;\r\n            let end = range.end;\r\n            let same = Util.comparePos(start, end);\r\n            if (same > 0) {\r\n                let tmp = start;\r\n                start = end;\r\n                end = tmp;\r\n            } else if (!same) {\r\n                return;\r\n            }\r\n            let active = this.editor.cursor.getCursorsByLineColumn(start.line, start.column) || this.editor.cursor.getCursorsByLineColumn(end.line, end.column);\r\n            range = {\r\n                start: {\r\n                    line: start.line,\r\n                    column: start.column,\r\n                },\r\n                end: {\r\n                    line: end.line,\r\n                    column: end.column,\r\n                },\r\n                active: !!active,\r\n            };\r\n            let _range = this.getRange(range);\r\n            if (_range) {\r\n                if (!_range.active) {\r\n                    _range.active = active;\r\n                    this.activedRanges.insert(_range);\r\n                }\r\n                results.push(_range);\r\n            } else {\r\n                this.ranges.insert(range);\r\n                active && this.activedRanges.insert(range);\r\n                results.push(range);\r\n                this.filterRange(range);\r\n            }\r\n        });\r\n        this.editor.renderSelectedBgAsync();\r\n        return ranges instanceof Array ? results : results[0];\r\n    }\r\n    removeRange(range) {\r\n        range = this.ranges.delete(range);\r\n        if (range) {\r\n            if (range.active) {\r\n                this.activedRanges.delete(range);\r\n            }\r\n            this.editor.cursor.removeCursor(range.start);\r\n            this.editor.cursor.removeCursor(range.end);\r\n            this.editor.renderSelectedBgAsync();\r\n        }\r\n    }\r\n    /**\r\n     * 设置选中区域\r\n     * @param {Object} start\r\n     * @param {Object} end\r\n     */\r\n    setRange(start, end) {\r\n        let same = Util.comparePos(start, end);\r\n        if (same > 0) {\r\n            let tmp = start;\r\n            start = end;\r\n            end = tmp;\r\n        } else if (!same) {\r\n            return;\r\n        }\r\n        let active = this.editor.cursor.getCursorsByLineColumn(start.line, start.column) || this.editor.cursor.getCursorsByLineColumn(end.line, end.column);\r\n        let range = {\r\n            start: Object.assign({}, start),\r\n            end: Object.assign({}, end),\r\n            active: !!active,\r\n        };\r\n        this.clearRange();\r\n        this.ranges.insert(range);\r\n        active && this.activedRanges.insert(range);\r\n        this.editor.renderSelectedBgAsync();\r\n        return range;\r\n    }\r\n    setActive(cursorPos) {\r\n        let range = this.getRangeByCursorPos(cursorPos);\r\n        this.activedRanges.forEach((item) => {\r\n            item.active = false;\r\n        });\r\n        this.activedRanges.empty();\r\n        if (range) {\r\n            range.active = true;\r\n            this.activedRanges.insert(range);\r\n        }\r\n        this.editor.renderSelectedBgAsync();\r\n    }\r\n    updateRange(target, range) {\r\n        let start = range.start;\r\n        let end = range.end;\r\n        let same = Util.comparePos(start, end);\r\n        if (same > 0) {\r\n            let tmp = start;\r\n            start = end;\r\n            end = tmp;\r\n        } else if (!same) {\r\n            return false;\r\n        }\r\n        this.ranges.delete(target);\r\n        target.start.line = start.line;\r\n        target.start.column = start.column;\r\n        target.end.line = end.line;\r\n        target.end.column = end.column;\r\n        this.ranges.insert(target);\r\n        this.filterRange(target);\r\n        this.editor.renderSelectedBgAsync();\r\n    }\r\n    filterRange(range) {\r\n        let it = this.ranges.search(range);\r\n        let dels = [];\r\n        let value = it.prev();\r\n        if (value && Util.comparePos(value.end, range.start) > 0) {\r\n            //删除前件\r\n            dels.push(value);\r\n        }\r\n        it.reset();\r\n        it.next();\r\n        value = it.next();\r\n        if (value && Util.comparePos(range.end, value.start) > 0) {\r\n            dels.push(value);\r\n        }\r\n        dels.forEach((item) => {\r\n            this.ranges.delete(item);\r\n            this.activedRanges.delete(item);\r\n            this.editor.cursor.removeCursor(item.start);\r\n            this.editor.cursor.removeCursor(item.end);\r\n        });\r\n    }\r\n    createRange(start, end) {\r\n        let same = Util.comparePos(start, end);\r\n        if (same > 0) {\r\n            let tmp = start;\r\n            start = end;\r\n            end = tmp;\r\n        }\r\n        if (same === 0) {\r\n            return null;\r\n        }\r\n        return {\r\n            start: start,\r\n            end: end,\r\n        };\r\n    }\r\n    // 清除选中背景\r\n    clearRange() {\r\n        this.ranges.empty();\r\n        this.activedRanges.empty();\r\n        this.editor.renderSelectedBgAsync();\r\n    }\r\n    clearActive() {\r\n        this.activedRanges.forEach((item) => {\r\n            item.active = false;\r\n        });\r\n        this.activedRanges.empty();\r\n        this.editor.renderSelectedBgAsync();\r\n    }\r\n    clearInactiveRange() {\r\n        if (!this.activedRanges.size) {\r\n            this.clearRange();\r\n        } else {\r\n            this.ranges.forEach((item) => {\r\n                if (!item.active) {\r\n                    this.ranges.delete(item);\r\n                }\r\n            });\r\n            this.editor.renderSelectedBgAsync();\r\n        }\r\n    }\r\n    clone(range, properties) {\r\n        properties = properties || [];\r\n        let result = {\r\n            start: Object.assign({}, range.start),\r\n            end: Object.assign({}, range.end),\r\n        };\r\n        properties.forEach((key) => {\r\n            result[key] = range[key];\r\n        });\r\n        return result;\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-14 11:20:31\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport Btree from '@/common/btree';\r\n\r\nconst regs = {\r\n    space: /\\s/,\r\n};\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.editor = editor;\r\n        this.context = context;\r\n        this.multiCursorPos = new Btree(Util.comparePos);\r\n        this.multiKeyCode = 'ctrl';\r\n        this.wordPattern = Util.getWordPattern(this.editor.language);\r\n        this.rightWrodPattern = new RegExp(`^(${this.wordPattern.source})`);\r\n        this.leftWrodPattern = new RegExp(`(${this.wordPattern.source})$`);\r\n    }\r\n    destroy() {\r\n        this.editor = null;\r\n        this.context = null;\r\n        this.multiCursorPos.empty();\r\n    }\r\n    // 添加光标\r\n    addCursorPos(cursorPos) {\r\n        let pos = this.getCursorsByLineColumn(cursorPos.line, cursorPos.column);\r\n        if (pos) {\r\n            this.editor.setNowCursorPos(pos);\r\n            return pos;\r\n        }\r\n        cursorPos = {\r\n            line: cursorPos.line,\r\n            column: cursorPos.column,\r\n        };\r\n        this.multiCursorPos.insert(cursorPos);\r\n        this.editor.setNowCursorPos(cursorPos);\r\n        return cursorPos;\r\n    }\r\n    addCursorAbove() {\r\n        this.multiCursorPos.forEach((item) => {\r\n            if (item.line > 1) {\r\n                let width = item.moveWidth || this.editor.getStrWidth(this.context.htmls[item.line - 1].text, 0, item.column);\r\n                let column = this.editor.getColumnByWidth(this.context.htmls[item.line - 2].text, width);\r\n                let cursorPos = this.addCursorPos({\r\n                    line: item.line - 1,\r\n                    column: column,\r\n                });\r\n                cursorPos.moveWidth = width;\r\n                this.editor.setNowCursorPos(cursorPos);\r\n            }\r\n        });\r\n    }\r\n    addCursorBelow() {\r\n        this.multiCursorPos.forEach((item) => {\r\n            if (item.line < this.context.htmls.length) {\r\n                let width = item.moveWidth || this.editor.getStrWidth(this.context.htmls[item.line - 1].text, 0, item.column);\r\n                let column = this.editor.getColumnByWidth(this.context.htmls[item.line].text, width);\r\n                let cursorPos = this.addCursorPos({\r\n                    line: item.line + 1,\r\n                    column: column,\r\n                });\r\n                cursorPos.moveWidth = width;\r\n                this.editor.setNowCursorPos(cursorPos);\r\n            }\r\n        });\r\n    }\r\n    addCursorLineEnds() {\r\n        if (this.editor.selecter.activedRanges.size) {\r\n            this.clearCursorPos();\r\n            this.editor.selecter.activedRanges.forEach((item) => {\r\n                let startLine = item.start.line;\r\n                let endLine = item.end.line;\r\n                while (startLine < endLine) {\r\n                    this.addCursorPos({\r\n                        line: startLine,\r\n                        column: this.context.htmls[startLine - 1].text.length,\r\n                    });\r\n                    startLine++;\r\n                }\r\n                this.editor.setNowCursorPos(\r\n                    this.addCursorPos({\r\n                        line: endLine,\r\n                        column: this.context.htmls[endLine - 1].text.length,\r\n                    })\r\n                );\r\n            });\r\n            this.editor.searcher.clearSearch();\r\n        }\r\n    }\r\n    // 设置光标\r\n    setCursorPos(cursorPos) {\r\n        cursorPos = {\r\n            line: cursorPos.line,\r\n            column: cursorPos.column,\r\n        };\r\n        if (this.multiCursorPos.size == 1) {\r\n            let pos = this.multiCursorPos.get(0);\r\n            if (Util.comparePos(pos, cursorPos) === 0) {\r\n                return pos;\r\n            }\r\n        }\r\n        this.multiCursorPos.empty();\r\n        this.multiCursorPos.insert(cursorPos);\r\n        this.editor.setNowCursorPos(cursorPos);\r\n        return cursorPos;\r\n    }\r\n    updateCursorPos(cursorPos, line, column) {\r\n        let pos = this.getCursorsByLineColumn(cursorPos.line, cursorPos.column);\r\n        if (pos === cursorPos) {\r\n            this.multiCursorPos.delete(cursorPos);\r\n        }\r\n        cursorPos.line = line;\r\n        cursorPos.column = column;\r\n        this.multiCursorPos.insert(cursorPos);\r\n        if (cursorPos === this.editor.nowCursorPos) {\r\n            //触发滚动\r\n            this.editor.setNowCursorPos(this.editor.nowCursorPos);\r\n        } else {\r\n            this.editor.renderCursor();\r\n        }\r\n        return cursorPos;\r\n    }\r\n    removeCursor(cursorPos) {\r\n        cursorPos = this.getCursorsByLineColumn(cursorPos.line, cursorPos.column);\r\n        if (cursorPos) {\r\n            cursorPos.del = true;\r\n            this.multiCursorPos.delete(cursorPos);\r\n            if (cursorPos === this.editor.nowCursorPos) {\r\n                this.editor.setNowCursorPos(null);\r\n            }\r\n            this.editor.renderCursor();\r\n        }\r\n    }\r\n    removeCursorInRange(range) {\r\n        let it = this.multiCursorPos.search(range.start, null, true);\r\n        if (it) {\r\n            let value = null;\r\n            let toDels = [];\r\n            while ((value = it.next())) {\r\n                let res = Util.comparePos(value, range.end);\r\n                if (res >= 0) {\r\n                    break;\r\n                }\r\n                if (Util.comparePos(value, range.start) > 0) {\r\n                    toDels.push(value);\r\n                }\r\n            }\r\n            toDels.forEach((item) => {\r\n                item.del = true;\r\n                this.multiCursorPos.delete(item);\r\n            });\r\n            this.editor.renderCursor();\r\n        }\r\n    }\r\n    clearCursorPos() {\r\n        this.multiCursorPos.forEach((item) => {\r\n            item.del = true;\r\n        });\r\n        this.multiCursorPos.empty();\r\n        this.editor.setNowCursorPos(null);\r\n    }\r\n    getCursorsByLine(line) {\r\n        let results = [];\r\n        let value = null;\r\n        let it = this.multiCursorPos.search(\r\n            {\r\n                line: line,\r\n                column: 0,\r\n            },\r\n            null,\r\n            true\r\n        );\r\n        if (it) {\r\n            while ((value = it.next())) {\r\n                if (value.line === line) {\r\n                    results.push(value);\r\n                } else if (value.line > line) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    getCursorsByLineColumn(line, column) {\r\n        let it = this.multiCursorPos.search({\r\n            line: line,\r\n            column: column,\r\n        });\r\n        return it && it.next();\r\n    }\r\n    // 移动光标\r\n    moveCursor(cursorPos, direct, wholeWord, stopUpdate) {\r\n        let text = this.context.htmls[cursorPos.line - 1].text;\r\n        let line = cursorPos.line;\r\n        let column = cursorPos.column;\r\n        // 去除上下移动光标的初始宽度记录\r\n        if (direct !== 'up' && direct !== 'down') {\r\n            cursorPos.moveWidth = 0;\r\n        }\r\n        if (direct === 'home') {\r\n            column = 0;\r\n        } else if (direct === 'end') {\r\n            column = this.context.htmls[line - 1].text.length;\r\n        } else if (direct === 'up') {\r\n            if (line > 1) {\r\n                let width = cursorPos.moveWidth || this.editor.getStrWidth(text, 0, column);\r\n                cursorPos.moveWidth = width;\r\n                line--;\r\n                text = this.context.htmls[line - 1].text;\r\n                column = this.editor.getColumnByWidth(text, width);\r\n            }\r\n        } else if (direct === 'down') {\r\n            if (line < this.context.htmls.length) {\r\n                let width = cursorPos.moveWidth || this.editor.getStrWidth(text, 0, column);\r\n                cursorPos.moveWidth = width;\r\n                line++;\r\n                text = this.context.htmls[line - 1].text;\r\n                column = this.editor.getColumnByWidth(text, width);\r\n            }\r\n        } else if (direct === 'left') {\r\n            while (column === 0 && line > 1) {\r\n                line--;\r\n                text = this.context.htmls[line - 1].text;\r\n                column = text.length;\r\n            }\r\n            if (column > 0) {\r\n                if (wholeWord) {\r\n                    //过滤开始的空格\r\n                    while (column && text[column - 1].match(regs.space)) {\r\n                        column--;\r\n                    }\r\n                    if (column > 0) {\r\n                        let res = null;\r\n                        let _column = column;\r\n                        column--;\r\n                        text = text.slice(0, _column);\r\n                        res = this.leftWrodPattern.exec(text);\r\n                        if (res) {\r\n                            column = res.index;\r\n                        }\r\n                    }\r\n                } else if (cursorPos.line === line) {\r\n                    column--;\r\n                }\r\n            }\r\n        } else {\r\n            while (column === text.length && line < this.context.htmls.length) {\r\n                line++;\r\n                column = 0;\r\n                text = this.context.htmls[line - 1].text;\r\n            }\r\n            if (column < text.length) {\r\n                if (wholeWord) {\r\n                    //过滤开始的空格\r\n                    while (column < text.length && text[column].match(regs.space)) {\r\n                        column++;\r\n                    }\r\n                    if (column < text.length) {\r\n                        text = text.slice(column);\r\n                        text = this.rightWrodPattern.exec(text);\r\n                        if (text && text.index == 0) {\r\n                            column += text[0].length;\r\n                        } else {\r\n                            column++;\r\n                        }\r\n                    }\r\n                } else if (cursorPos.line === line) {\r\n                    column++;\r\n                }\r\n            }\r\n        }\r\n        !stopUpdate && this.updateCursorPos(cursorPos, line, column);\r\n\r\n        return {\r\n            line: line,\r\n            column: column,\r\n        };\r\n    }\r\n    switchMultiKeyCode() {\r\n        this.multiKeyCode = this.multiKeyCode === 'ctrl' ? 'alt' : 'ctrl';\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-31 15:11:27\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport EventBus from '@/event';\r\nexport default class {\r\n\tconstructor(editor, context) {\r\n\t\tthis.editor = editor;\r\n\t\tthis.context = context;\r\n\t\tthis.history = [];\r\n\t\tthis.history.index = 0;\r\n\t}\r\n\tdestroy() {\r\n\t\tthis.editor = null;\r\n\t\tthis.context = null;\r\n\t\tthis.history = [];\r\n\t}\r\n\t// 撤销操作\r\n\tundo() {\r\n\t\tif (this.history.index > 0) {\r\n\t\t\tlet command = this.history[this.history.index - 1];\r\n\t\t\tthis.doCommand(command);\r\n\t\t\tthis.history.index--;\r\n\t\t\tif (command.serial) {\r\n\t\t\t\t//连续操作标识\r\n\t\t\t\tlet _command = this.history[this.history.index - 1];\r\n\t\t\t\t_command && _command.serial === command.serial && this.undo();\r\n\t\t\t}\r\n\t\t\tif (this.history.index === this.savedIndex) {\r\n\t\t\t\tEventBus.$emit('editor-saved', this.editor.editorId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 重做操作\r\n\tredo() {\r\n\t\tif (this.history.index < this.history.length) {\r\n\t\t\tlet command = this.history[this.history.index];\r\n\t\t\tthis.history.index++;\r\n\t\t\tthis.doCommand(command);\r\n\t\t\tif (command.serial) {\r\n\t\t\t\t//连续操作标识\r\n\t\t\t\tlet _command = this.history[this.history.index];\r\n\t\t\t\t_command && _command.serial === command.serial && this.redo();\r\n\t\t\t}\r\n\t\t\tif (this.history.index === this.savedIndex) {\r\n\t\t\t\tEventBus.$emit('editor-saved', this.editor.editorId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 操作命令\r\n\tdoCommand(command) {\r\n\t\tlet commandType = command.type || (command instanceof Array ? command[0].type : command.type);\r\n\t\tswitch (commandType) {\r\n\t\t\tcase Util.HISTORY_COMMAND.DELETE:\r\n\t\t\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t\t\tthis.context.deleteContent('left', command);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Util.HISTORY_COMMAND.INSERT:\r\n\t\t\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t\t\tif (command instanceof Array) {\r\n\t\t\t\t\tvar text = [];\r\n\t\t\t\t\tcommand.forEach(item => {\r\n\t\t\t\t\t\ttext.push(item.text);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.context.insertContent(text, command);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.context.insertContent(command.text, command);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase Util.HISTORY_COMMAND.DELETE_LINE:\r\n\t\t\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t\t\tthis.context.deleteLine(command);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Util.HISTORY_COMMAND.INSERT_LINE:\r\n\t\t\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t\t\tthis.context.insertLine(command);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Util.HISTORY_COMMAND.MOVEUP:\r\n\t\t\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t\t\tthis.context.moveLineUp(command);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Util.HISTORY_COMMAND.MOVEDOWN:\r\n\t\t\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t\t\tthis.context.moveLineDown(command);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Util.HISTORY_COMMAND.COPY_DOWN:\r\n\t\t\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t\t\tthis.context.copyLineDown(command);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Util.HISTORY_COMMAND.DELETE_COPY_DOWN:\r\n\t\t\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t\t\tthis.context.deleteCopyLineDown(command);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Util.HISTORY_COMMAND.COPY_UP:\r\n\t\t\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t\t\tthis.context.copyLineUp(command);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Util.HISTORY_COMMAND.DELETE_COPY_UP:\r\n\t\t\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t\t\tthis.context.deleteCopyLineUp(command);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Util.HISTORY_COMMAND.REPLACE:\r\n\t\t\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t\t\tthis.context.replace(command.text, command.cursorPos, command);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Util.HISTORY_COMMAND.TAB_TO_SPACE:\r\n\t\t\t\tthis.context.convertTabToSpace(command);\r\n\t\t\t\tbreak;\r\n\t\t\tcase Util.HISTORY_COMMAND.SPACE_TO_TAB:\r\n\t\t\t\tthis.context.convertSpaceToTab(command);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t// 添加历史记录\r\n\tpushHistory(command) {\r\n\t\twhile (this.history.length > this.history.index) {\r\n\t\t\tthis.history.pop();\r\n\t\t}\r\n\t\tlet lastCommand = this.history[this.history.index - 1];\r\n\t\tcommand = this.sortComand(command);\r\n\t\tif (command instanceof Array && !command.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (lastCommand instanceof Array && command instanceof Array && lastCommand.length === command.length && Date.now() - this.pushHistoryTime < 2000) {\r\n\t\t\tif (_checkSameOp(lastCommand) && _checkSameOp(command) && _combCheck.call(this, lastCommand[0], command[0])) {\r\n\t\t\t\tfor (let i = 0; i < lastCommand.length; i++) {\r\n\t\t\t\t\t_combCommand(lastCommand[i], command[i]);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.history.push(command);\r\n\t\t\t}\r\n\t\t} else if (_combCheck.call(this, lastCommand, command)) {\r\n\t\t\t_combCommand(lastCommand, command);\r\n\t\t} else {\r\n\t\t\tthis.history.push(command);\r\n\t\t}\r\n\t\tthis.history.index = this.history.length;\r\n\t\tthis.pushHistoryTime = Date.now();\r\n\r\n\t\tfunction _checkSameOp(commandList) {\r\n\t\t\tfor (let i = 1; i < commandList.length; i++) {\r\n\t\t\t\tif (commandList[i].type !== commandList[i - 1].type) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tfunction _combCheck(lastCommand, command) {\r\n\t\t\t// 检测是否为连续插入或连续删除\r\n\t\t\tif (\r\n\t\t\t\t(command.type == Util.HISTORY_COMMAND.DELETE || command.type == Util.HISTORY_COMMAND.INSERT) &&\r\n\t\t\t\tlastCommand &&\r\n\t\t\t\tlastCommand.type == command.type &&\r\n\t\t\t\tlastCommand.preCursorPos.line == command.cursorPos.line &&\r\n\t\t\t\tDate.now() - this.pushHistoryTime < 2000\r\n\t\t\t) {\r\n\t\t\t\tif (lastCommand.type == Util.HISTORY_COMMAND.DELETE) {\r\n\t\t\t\t\tif (Util.comparePos(lastCommand.cursorPos, command.preCursorPos) == 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (lastCommand.type == Util.HISTORY_COMMAND.INSERT) {\r\n\t\t\t\t\tif (Util.comparePos(lastCommand.cursorPos, command.preCursorPos) == 0 || Util.comparePos(lastCommand.cursorPos, command.cursorPos) == 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 检查两次操作是否可以合并\r\n\t\tfunction _combCommand(lastCommand, command) {\r\n\t\t\tif (lastCommand.type === Util.HISTORY_COMMAND.DELETE) {\r\n\t\t\t\tcommand.preCursorPos.column -= lastCommand.cursorPos.column - lastCommand.preCursorPos.column;\r\n\t\t\t\tlastCommand.preCursorPos = command.preCursorPos;\r\n\t\t\t\tlastCommand.cursorPos = command.cursorPos;\r\n\t\t\t} else {\r\n\t\t\t\tlastCommand.cursorPos = command.cursorPos;\r\n\t\t\t\tif (command.keyCode === Util.KEYCODE.DELETE) {\r\n\t\t\t\t\tlastCommand.text = lastCommand.text + command.text;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlastCommand.text = command.text + lastCommand.text;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 更新历史记录\r\n\tupdateHistory(command) {\r\n\t\tlet index = this.history.index;\r\n\t\tif (command instanceof Array) {\r\n\t\t\tcommand.forEach((item, _index) => {\r\n\t\t\t\titem.keyCode = this.history[index - 1][_index].keyCode;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tcommand.keyCode = this.history[index - 1].keyCode;\r\n\t\t}\r\n\t\tthis.history[index - 1] = this.sortComand(command);\r\n\t}\r\n\tsortComand(command) {\r\n\t\tif (command instanceof Array) {\r\n\t\t\tcommand.sort((a, b) => {\r\n\t\t\t\ta = a.cursorPos;\r\n\t\t\t\tb = b.cursorPos;\r\n\t\t\t\tif (a.line === b.line) {\r\n\t\t\t\t\treturn a.column - b.column;\r\n\t\t\t\t}\r\n\t\t\t\treturn a.line - b.line;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn command;\r\n\t}\r\n\tsave() {\r\n\t\tthis.savedIndex = this.history.index;\r\n\t}\r\n\tclear() {\r\n\t\tthis.history.empty();\r\n\t\tthis.history.index = 0;\r\n\t\tthis.savedIndex = 0;\r\n\t}\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 13:42:22\r\n * @Description:\r\n */\r\nimport EventBus from '@/event';\r\nimport Util from '@/common/util';\r\nimport Enum from '@/data/enum';\r\nimport expand from 'emmet';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst regs = {\r\n\tendTag: /(?=\\<\\/)/\r\n};\r\n\r\nclass Context {\r\n\tconstructor(editor) {\r\n\t\tthis.editor = editor;\r\n\t\tthis.lineId = 1;\r\n\t\tthis.serial = 1;\r\n\t\tthis.reset();\r\n\t}\r\n\treset() {\r\n\t\tthis.htmls = [];\r\n\t\tthis.fgLines = [];\r\n\t\tthis.lineIdMap = new Map(); //htmls的唯一标识对象\r\n\t\tthis.htmls.push({\r\n\t\t\tlineId: this.lineId++,\r\n\t\t\ttext: '',\r\n\t\t\thtml: '',\r\n\t\t\twidth: 0,\r\n\t\t\ttabNum: -1,\r\n\t\t\ttokens: [],\r\n\t\t\tfolds: [],\r\n\t\t\tstates: [],\r\n\t\t\tstateFold: null\r\n\t\t});\r\n\t\tthis.lineIdMap.set(this.htmls[0].lineId, this.htmls[0]);\r\n\t}\r\n\tsetData(prop, value) {\r\n\t\tif (typeof this[prop] === 'function') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis[prop] = value;\r\n\t}\r\n\tdestroy() {\r\n\t\tthis.reset();\r\n\t\tthis.editor = null;\r\n\t\tthis.allText = '';\r\n\t\tcancelIdleCallback(this.setLineWidthTimer);\r\n\t}\r\n\tinsertContent(text, command) {\r\n\t\tlet historyArr = null;\r\n\t\tlet cursorPosList = [];\r\n\t\tlet serial = false;\r\n\t\tif (!command) {\r\n\t\t\t// 如果有选中区域，需要先删除选中区域\r\n\t\t\tif (this.editor.selecter.activedRanges.size) {\r\n\t\t\t\tlet _historyArr = this.deleteContent();\r\n\t\t\t\t// 连续操作标识\r\n\t\t\t\t_historyArr.serial = this.serial++;\r\n\t\t\t\tserial = _historyArr.serial;\r\n\t\t\t}\r\n\t\t\tcursorPosList = this.editor.cursor.multiCursorPos.toArray();\r\n\t\t} else {\r\n\t\t\tcommand.forEach(item => {\r\n\t\t\t\t// 多个插入的光标可能相同，这里不能先添加光标\r\n\t\t\t\tcursorPosList.push(item.cursorPos);\r\n\t\t\t});\r\n\t\t}\r\n\t\thistoryArr = this._insertMultiContent(text, cursorPosList, command);\r\n\t\thistoryArr.serial = serial;\r\n\t\tif (!command) {\r\n\t\t\t// 新增历史记录\r\n\t\t\tthis.editor.history.pushHistory(historyArr);\r\n\t\t} else {\r\n\t\t\t// 撤销或重做操作后，更新历史记录\r\n\t\t\thistoryArr.serial = command.serial;\r\n\t\t\thistoryArr.length && this.editor.history.updateHistory(historyArr);\r\n\t\t}\r\n\t\tthis.editor.setNowCursorPos(this.editor.cursor.multiCursorPos.get(0));\r\n\t\tthis.editor.fSearcher.refreshSearch();\r\n\t\treturn historyArr;\r\n\t}\r\n\t_insertMultiContent(text, cursorPosList, command) {\r\n\t\tlet prePos = null;\r\n\t\tlet historyObj = null;\r\n\t\tlet historyArr = [];\r\n\t\tlet texts = text instanceof Array ? text : text.split(/\\r\\n|\\n/);\r\n\t\tlet lineDelta = 0;\r\n\t\tlet columnDelta = 0;\r\n\t\tthis.editor.cursor.clearCursorPos();\r\n\t\tif (text === '\\n') {\r\n\t\t\ttexts = ['\\n'];\r\n\t\t}\r\n\t\tcursorPosList.forEach((cursorPos, index) => {\r\n\t\t\tlet _text = texts.length === cursorPosList.length ? texts[index] : text;\r\n\t\t\tlet commandObj = (command && command[index]) || {};\r\n\t\t\tlet margin = commandObj.margin || 'right';\r\n\t\t\tlet active = commandObj.active || false;\r\n\t\t\tlet pos = {\r\n\t\t\t\tline: cursorPos.line,\r\n\t\t\t\tcolumn: cursorPos.column\r\n\t\t\t};\r\n\t\t\tif (!text) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tpos.line += lineDelta;\r\n\t\t\tif (prePos && pos.line === prePos.line) {\r\n\t\t\t\tpos.column += columnDelta;\r\n\t\t\t} else {\r\n\t\t\t\tcolumnDelta = 0;\r\n\t\t\t}\r\n\t\t\thistoryObj = this._insertContent(_text, pos, !command);\r\n\t\t\thistoryArr.push(historyObj);\r\n\t\t\tprePos = historyObj.cursorPos;\r\n\t\t\thistoryObj.margin = margin;\r\n\t\t\thistoryObj.active = active;\r\n\t\t\tlineDelta += historyObj.cursorPos.line - historyObj.preCursorPos.line;\r\n\t\t\tcolumnDelta += historyObj.cursorPos.column - historyObj.preCursorPos.column;\r\n\t\t\tif (margin === 'right') {\r\n\t\t\t\tthis.editor.cursor.addCursorPos(historyObj.cursorPos);\r\n\t\t\t} else {\r\n\t\t\t\tthis.editor.cursor.addCursorPos(historyObj.preCursorPos);\r\n\t\t\t}\r\n\t\t\tif (active) {\r\n\t\t\t\tthis.editor.selecter.addRange({\r\n\t\t\t\t\tstart: historyObj.preCursorPos,\r\n\t\t\t\t\tend: historyObj.cursorPos\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn historyArr;\r\n\t}\r\n\t// 插入内容\r\n\t_insertContent(text, cursorPos, alignmentTab) {\r\n\t\tlet lineObj = this.htmls[cursorPos.line - 1];\r\n\t\tlet nowLineText = lineObj.text;\r\n\t\tlet newPos = Object.assign({}, cursorPos);\r\n\t\tcursorPos.moveWidth = 0; //去除上下移动光标的初始宽度记录\r\n\t\ttext = text.split(/\\r\\n|\\n/);\r\n\t\ttext = text.map(item => {\r\n\t\t\titem = {\r\n\t\t\t\tlineId: this.lineId++,\r\n\t\t\t\ttext: item,\r\n\t\t\t\thtml: '',\r\n\t\t\t\twidth: 0,\r\n\t\t\t\ttabNum: -1,\r\n\t\t\t\ttokens: null,\r\n\t\t\t\tfolds: null,\r\n\t\t\t\tstates: null,\r\n\t\t\t\tstateFold: null\r\n\t\t\t};\r\n\t\t\tthis.lineIdMap.set(item.lineId, item);\r\n\t\t\treturn item;\r\n\t\t});\r\n\t\tif (text.length > 1) {\r\n\t\t\t// 换行对齐\r\n\t\t\tif (!text[0].text && cursorPos.column === nowLineText.length && alignmentTab) {\r\n\t\t\t\tlet tabStr = _getTabStr.call(this, nowLineText, this.editor.folder.getRangeFold(cursorPos.line, true));\r\n\t\t\t\tif (tabStr) {\r\n\t\t\t\t\ttext[1].text = tabStr + text[1].text.trimLeft();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 插入多行\r\n\t\t\tnewPos.column = text[text.length - 1].text.length;\r\n\t\t\ttext[0].text = nowLineText.slice(0, cursorPos.column) + text[0].text;\r\n\t\t\ttext[text.length - 1].text = text[text.length - 1].text + nowLineText.slice(cursorPos.column);\r\n\t\t\tthis.htmls = this.htmls\r\n\t\t\t\t.slice(0, cursorPos.line - 1)\r\n\t\t\t\t.concat(text)\r\n\t\t\t\t.concat(this.htmls.slice(cursorPos.line));\r\n\t\t} else {\r\n\t\t\t// 插入一行\r\n\t\t\tnewPos.column += text[0].text.length;\r\n\t\t\ttext[0].text = nowLineText.slice(0, cursorPos.column) + text[0].text + nowLineText.slice(cursorPos.column);\r\n\t\t\tthis.htmls.splice(cursorPos.line - 1, 1, text[0]);\r\n\t\t}\r\n\t\tnewPos.line += text.length - 1;\r\n\t\tthis.editor.setData('maxLine', this.htmls.length);\r\n\t\tthis.editor.lint.onInsertContentAfter(cursorPos.line, newPos.line);\r\n\t\tthis.editor.tokenizer.onInsertContentAfter(cursorPos.line, newPos.line);\r\n\t\tthis.editor.folder.onInsertContentAfter(Object.assign({}, cursorPos), Object.assign({}, newPos));\r\n\t\tthis.setLineWidth(text);\r\n\t\tthis.editor.setErrors([]);\r\n\t\tthis.editor.setAutoTip(null);\r\n\t\tthis.editor.render(true);\r\n\t\tthis.contentChanged();\r\n\t\tthis.editor.tabData.status !== '!!' && this.editor.differ.run();\r\n\t\tlet historyObj = {\r\n\t\t\ttype: Util.HISTORY_COMMAND.DELETE,\r\n\t\t\tcursorPos: Object.assign({}, newPos),\r\n\t\t\tpreCursorPos: Object.assign({}, cursorPos)\r\n\t\t};\r\n\t\treturn historyObj;\r\n\r\n\t\tfunction _getTabStr(text, plus) {\r\n\t\t\tlet tabNum = 0;\r\n\t\t\tlet tabStr = '';\r\n\t\t\t//该行有内容\r\n\t\t\tlet spaceNum = /^\\s+/.exec(text);\r\n\t\t\tif (spaceNum) {\r\n\t\t\t\ttabNum = /\\t+/.exec(spaceNum[0]);\r\n\t\t\t\ttabNum = (tabNum && tabNum[0].length) || 0;\r\n\t\t\t\ttabNum = tabNum + Math.ceil((spaceNum[0].length - tabNum) / this.editor.tabSize);\r\n\t\t\t}\r\n\t\t\ttabNum += plus ? 1 : 0;\r\n\t\t\tfor (let i = 0; i < tabNum; i++) {\r\n\t\t\t\tif (this.editor.indent === 'tab') {\r\n\t\t\t\t\ttabStr += '\\t';\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttabStr += this.editor.space;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn tabStr;\r\n\t\t}\r\n\t}\r\n\tdeleteContent(direct, command) {\r\n\t\tlet historyArr = [];\r\n\t\tlet rangeList = [];\r\n\t\tif (command) {\r\n\t\t\trangeList = command.map(item => {\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tstart: item.preCursorPos,\r\n\t\t\t\t\tend: item.cursorPos,\r\n\t\t\t\t\tmargin: item.margin,\r\n\t\t\t\t\tactive: item.active\r\n\t\t\t\t};\r\n\t\t\t\treturn obj;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.editor.cursor.multiCursorPos.forEach(item => {\r\n\t\t\t\tlet range = this.editor.selecter.getRangeByCursorPos(item);\r\n\t\t\t\tif (range) {\r\n\t\t\t\t\tif (Util.comparePos(range.start, item) === 0) {\r\n\t\t\t\t\t\trange.margin = 'left';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trange.margin = 'right';\r\n\t\t\t\t\t}\r\n\t\t\t\t\trangeList.push(range);\r\n\t\t\t\t} else {\r\n\t\t\t\t\trangeList.push(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\thistoryArr = this._deleteMultiContent(rangeList, direct);\r\n\t\tif (!command) {\r\n\t\t\t// 新增历史记录\r\n\t\t\thistoryArr.length && this.editor.history.pushHistory(historyArr);\r\n\t\t} else {\r\n\t\t\t// 撤销或重做操作后，更新历史记录\r\n\t\t\thistoryArr.serial = command.serial;\r\n\t\t\tthis.editor.history.updateHistory(historyArr);\r\n\t\t\thistoryArr.forEach(item => {\r\n\t\t\t\tthis.editor.cursor.addCursorPos(item.cursorPos);\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.editor.setNowCursorPos(this.editor.cursor.multiCursorPos.get(0));\r\n\t\tthis.editor.searcher.clearSearch();\r\n\t\tthis.editor.fSearcher.refreshSearch();\r\n\t\treturn historyArr;\r\n\t}\r\n\t_deleteMultiContent(rangeList, direct) {\r\n\t\tlet historyArr = [];\r\n\t\tlet historyObj = null;\r\n\t\tlet prePos = null;\r\n\t\tlet lineDelta = 0;\r\n\t\tlet columnDelta = 0;\r\n\t\tthis.editor.cursor.clearCursorPos();\r\n\t\trangeList.forEach(item => {\r\n\t\t\tif (item.start && item.end) {\r\n\t\t\t\t_deleteRangePos.call(this, item);\r\n\t\t\t} else {\r\n\t\t\t\t_deleteCursorPos.call(this, item);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn historyArr;\r\n\r\n\t\tfunction _deleteCursorPos(cursorPos) {\r\n\t\t\tlet pos = {\r\n\t\t\t\tline: cursorPos.line,\r\n\t\t\t\tcolumn: cursorPos.column\r\n\t\t\t};\r\n\t\t\tpos.line -= lineDelta;\r\n\t\t\tif (prePos && pos.line === prePos.line) {\r\n\t\t\t\tpos.column -= columnDelta;\r\n\t\t\t} else {\r\n\t\t\t\tcolumnDelta = 0;\r\n\t\t\t}\r\n\t\t\thistoryObj = this._deleteContent(pos, direct);\r\n\t\t\thistoryObj.text && historyArr.push(historyObj);\r\n\t\t\tprePos = historyObj.cursorPos;\r\n\t\t\tlineDelta += historyObj.preCursorPos.line - prePos.line;\r\n\t\t\tcolumnDelta += historyObj.preCursorPos.column - prePos.column;\r\n\t\t\tthis.editor.cursor.addCursorPos({\r\n\t\t\t\tline: prePos.line,\r\n\t\t\t\tcolumn: prePos.column\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction _deleteRangePos(rangePos) {\r\n\t\t\tlet start = rangePos.start;\r\n\t\t\tlet end = rangePos.end;\r\n\t\t\tstart.line -= lineDelta;\r\n\t\t\tend.line -= lineDelta;\r\n\t\t\tif (prePos && start.line === prePos.line) {\r\n\t\t\t\tstart.column -= columnDelta;\r\n\t\t\t\tif (start.line === end.line) {\r\n\t\t\t\t\tend.column -= columnDelta;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcolumnDelta = 0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tcolumnDelta = 0;\r\n\t\t\t}\r\n\t\t\thistoryObj = this._deleteContent(rangePos, direct);\r\n\t\t\thistoryObj.text && historyArr.push(historyObj);\r\n\t\t\tprePos = historyObj.cursorPos;\r\n\t\t\tlineDelta += historyObj.preCursorPos.line - prePos.line;\r\n\t\t\tcolumnDelta += historyObj.preCursorPos.column - prePos.column;\r\n\t\t\tthis.editor.cursor.addCursorPos({\r\n\t\t\t\tline: prePos.line,\r\n\t\t\t\tcolumn: prePos.column\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t// 删除内容\r\n\t_deleteContent(cursorPos, direct) {\r\n\t\tlet range = null;\r\n\t\tlet margin = direct === 'right' ? 'left' : 'right';\r\n\t\tcursorPos.moveWidth = 0; //去除上下移动光标的初始宽度记录\r\n\t\tif (cursorPos.start && cursorPos.end) {\r\n\t\t\t//删除范围内的内容\r\n\t\t\trange = cursorPos;\r\n\t\t\tcursorPos = range.end;\r\n\t\t\tmargin = range.margin;\r\n\t\t}\r\n\t\tlet start = null;\r\n\t\tlet startObj = this.htmls[cursorPos.line - 1];\r\n\t\tlet text = startObj.text;\r\n\t\tlet deleteText = '';\r\n\t\tlet rangeUuid = [startObj.lineId];\r\n\t\tlet originPos = Object.assign({}, cursorPos);\r\n\t\tlet newPos = Object.assign({}, cursorPos);\r\n\t\tif (range) {\r\n\t\t\t// 删除选中区域\r\n\t\t\tlet end = range.end;\r\n\t\t\tlet endObj = this.htmls[end.line - 1];\r\n\t\t\tstart = range.start;\r\n\t\t\tstartObj = this.htmls[start.line - 1];\r\n\t\t\ttext = startObj.text;\r\n\t\t\tdeleteText = this.getRangeText(range.start, range.end);\r\n\t\t\tif (start.line == 1 && end.line == this.editor.maxLine) {\r\n\t\t\t\t//全选删除\r\n\t\t\t\trangeUuid = [this.editor.maxWidthObj.lineId];\r\n\t\t\t\tthis.lineIdMap.clear();\r\n\t\t\t} else {\r\n\t\t\t\trangeUuid = this.htmls.slice(start.line - 1, end.line).map(item => {\r\n\t\t\t\t\tthis.lineIdMap.delete(item.lineId);\r\n\t\t\t\t\treturn item.lineId;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.lineIdMap.set(startObj.lineId, startObj);\r\n\t\t\tif (start.line == end.line) {\r\n\t\t\t\t// 单行选中\r\n\t\t\t\ttext = text.slice(0, start.column) + text.slice(end.column);\r\n\t\t\t\tstartObj.text = text;\r\n\t\t\t} else {\r\n\t\t\t\t// 多行选中\r\n\t\t\t\ttext = text.slice(0, start.column);\r\n\t\t\t\tstartObj.text = text;\r\n\t\t\t\ttext = endObj.text;\r\n\t\t\t\ttext = text.slice(end.column);\r\n\t\t\t\tstartObj.text += text;\r\n\t\t\t\tthis.htmls.splice(start.line, end.line - start.line);\r\n\t\t\t}\r\n\t\t\tnewPos.line = start.line;\r\n\t\t\tnewPos.column = start.column;\r\n\t\t} else if (direct === 'right') {\r\n\t\t\t// 向后删除一个字符\r\n\t\t\tif (cursorPos.column == text.length) {\r\n\t\t\t\t// 光标处于行尾\r\n\t\t\t\tif (cursorPos.line < this.htmls.length) {\r\n\t\t\t\t\tthis.lineIdMap.delete(this.htmls[cursorPos.line].lineId);\r\n\t\t\t\t\ttext = startObj.text + this.htmls[cursorPos.line].text;\r\n\t\t\t\t\tthis.htmls.splice(cursorPos.line, 1);\r\n\t\t\t\t\tdeleteText = '\\n';\r\n\t\t\t\t\toriginPos = {\r\n\t\t\t\t\t\tline: cursorPos.line - 1,\r\n\t\t\t\t\t\tcolumn: 0\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdeleteText = text[cursorPos.column];\r\n\t\t\t\ttext = text.slice(0, cursorPos.column) + text.slice(cursorPos.column + 1);\r\n\t\t\t\toriginPos = {\r\n\t\t\t\t\tline: cursorPos.line,\r\n\t\t\t\t\tcolumn: cursorPos.column + 1\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tstartObj.text = text;\r\n\t\t} else {\r\n\t\t\t// 向前删除一个字符\r\n\t\t\tif (cursorPos.column == 0) {\r\n\t\t\t\t// 光标处于行首\r\n\t\t\t\tif (cursorPos.line > 1) {\r\n\t\t\t\t\tlet column = this.htmls[cursorPos.line - 2].text.length;\r\n\t\t\t\t\tthis.lineIdMap.delete(this.htmls[cursorPos.line - 2].lineId);\r\n\t\t\t\t\ttext = this.htmls[cursorPos.line - 2].text + text;\r\n\t\t\t\t\tthis.htmls.splice(cursorPos.line - 2, 1);\r\n\t\t\t\t\tdeleteText = '\\n';\r\n\t\t\t\t\tnewPos.line = cursorPos.line - 1;\r\n\t\t\t\t\tnewPos.column = column;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdeleteText = text[cursorPos.column - 1];\r\n\t\t\t\ttext = text.slice(0, cursorPos.column - 1) + text.slice(cursorPos.column);\r\n\t\t\t\tnewPos.column = cursorPos.column - 1;\r\n\t\t\t}\r\n\t\t\tstartObj.text = text;\r\n\t\t}\r\n\t\tstartObj.width = this.editor.getStrWidth(startObj.text);\r\n\t\tstartObj.tabNum = -1;\r\n\t\tstartObj.html = '';\r\n\t\tstartObj.tokens = null;\r\n\t\tstartObj.folds = null;\r\n\t\tstartObj.states = null;\r\n\t\tstartObj.stateFold = null;\r\n\t\tthis.editor.setData('maxLine', this.htmls.length);\r\n\t\tthis.editor.lint.onDeleteContentAfter(originPos.line, newPos.line);\r\n\t\tthis.editor.tokenizer.onDeleteContentAfter(originPos.line, newPos.line);\r\n\t\tthis.editor.folder.onDeleteContentAfter(Object.assign({}, originPos), Object.assign({}, newPos));\r\n\t\tthis.editor.setErrors([]);\r\n\t\tthis.editor.setAutoTip(null);\r\n\t\tthis.editor.render(true);\r\n\t\tthis.contentChanged();\r\n\t\tthis.editor.tabData.status !== '!!' && this.editor.differ.run();\r\n\t\t// 更新最大文本宽度\r\n\t\tif (startObj.width >= this.editor.maxWidthObj.width) {\r\n\t\t\tthis.editor.setData('maxWidthObj', {\r\n\t\t\t\tlineId: startObj.lineId,\r\n\t\t\t\ttext: startObj.text,\r\n\t\t\t\twidth: startObj.width\r\n\t\t\t});\r\n\t\t} else if (rangeUuid.indexOf(this.editor.maxWidthObj.lineId) > -1) {\r\n\t\t\tthis.setMaxWidth();\r\n\t\t}\r\n\t\tlet historyObj = {\r\n\t\t\ttype: Util.HISTORY_COMMAND.INSERT,\r\n\t\t\tcursorPos: Object.assign({}, newPos),\r\n\t\t\tpreCursorPos: Object.assign({}, originPos),\r\n\t\t\ttext: deleteText,\r\n\t\t\tdirect: direct,\r\n\t\t\tmargin: margin,\r\n\t\t\tactive: range && range.active\r\n\t\t};\r\n\t\treturn historyObj;\r\n\t}\r\n\tinsertLineUp() {\r\n\t\tlet cursorPosList = [];\r\n\t\tlet preItem = {};\r\n\t\tlet lineOne = false;\r\n\t\tthis.editor.cursor.multiCursorPos.forEach((item) => {\r\n\t\t\tif (preItem.line !== item.line) {\r\n\t\t\t\tif (item.line === 1) {\r\n\t\t\t\t\tcursorPosList.push({\r\n\t\t\t\t\t\tline: item.line,\r\n\t\t\t\t\t\tcolumn: 0\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlineOne = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcursorPosList.push({\r\n\t\t\t\t\t\tline: item.line - 1,\r\n\t\t\t\t\t\tcolumn: this.htmls[item.line - 2].text.length\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tpreItem = item;\r\n\t\t});\r\n\t\tthis.editor.history.pushHistory(this._insertMultiContent('\\n', cursorPosList));\r\n\t\tif (lineOne) {\r\n\t\t\tthis.editor.cursor.updateCursorPos(this.editor.cursor.multiCursorPos.get(0), 1, 0);\r\n\t\t}\r\n\t}\r\n\tinsertLineDown() {\r\n\t\tlet cursorPosList = [];\r\n\t\tlet preItem = {};\r\n\t\tthis.editor.cursor.multiCursorPos.forEach((item) => {\r\n\t\t\tif (preItem.line !== item.line) {\r\n\t\t\t\tcursorPosList.push({\r\n\t\t\t\t\tline: item.line,\r\n\t\t\t\t\tcolumn: this.htmls[item.line - 1].text.length\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tpreItem = item;\r\n\t\t});\r\n\t\tthis.editor.history.pushHistory(this._insertMultiContent('\\n', cursorPosList));\r\n\t}\r\n\t/**\r\n\t * 向前或者向后删除一个单词\r\n\t * @param {String} direct [left|right] \r\n\t */\r\n\tdeleteWord(direct) {\r\n\t\tif (this.editor.selecter.size > 0) {\r\n\t\t\tthis.deleteContent(direct);\r\n\t\t} else {\r\n\t\t\tlet preRange = null;\r\n\t\t\tlet rangeList = [];\r\n\t\t\tthis.editor.cursor.multiCursorPos.forEach(item => {\r\n\t\t\t\tif (direct === 'left') {\r\n\t\t\t\t\tlet end = { line: item.line, column: item.column };\r\n\t\t\t\t\tlet cursorPos = this.editor.cursor.moveCursor(item, direct, true, true);\r\n\t\t\t\t\tif (preRange && Util.comparePos(preRange.start, cursorPos) === 0) {\r\n\t\t\t\t\t\tpreRange.end = end;\r\n\t\t\t\t\t} else if (Util.comparePos(cursorPos, end) < 0) {\r\n\t\t\t\t\t\tpreRange = { start: cursorPos, end: end };\r\n\t\t\t\t\t\trangeList.push(preRange);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (direct === 'right') {\r\n\t\t\t\t\tlet start = { line: item.line, column: item.column };\r\n\t\t\t\t\tlet cursorPos = this.editor.cursor.moveCursor(item, direct, true, true);\r\n\t\t\t\t\tif (preRange && Util.comparePos(preRange.end, cursorPos) === 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if (Util.comparePos(cursorPos, start) > 0) {\r\n\t\t\t\t\t\tpreRange = { start: start, end: cursorPos };\r\n\t\t\t\t\t\trangeList.push(preRange);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (rangeList.length) {\r\n\t\t\t\tthis.editor.history.pushHistory(this._deleteMultiContent(rangeList, direct));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tmoveLineUp(command) {\r\n\t\tthis.moveLine(command, 'up');\r\n\t}\r\n\tmoveLineDown(command) {\r\n\t\tthis.moveLine(command, 'down');\r\n\t}\r\n\tmoveLine(command, direct) {\r\n\t\tlet cursorPosList = [];\r\n\t\tlet historyPosList = [];\r\n\t\tlet index = 0;\r\n\t\tlet prePos = null;\r\n\t\tlet searchConifg = null;\r\n\t\tif (command) {\r\n\t\t\tsearchConifg = command.searchConifg;\r\n\t\t\tcursorPosList = command.cursorPos;\r\n\t\t} else {\r\n\t\t\tsearchConifg = this.editor.searcher.getConfig();\r\n\t\t\tcursorPosList = [];\r\n\t\t\t// 过滤光标，去除上下相邻的光标\r\n\t\t\tthis.editor.cursor.multiCursorPos.toArray().forEach(item => {\r\n\t\t\t\tlet range = this.editor.selecter.getRangeByCursorPos(item); //当前光标处于活动区域边界\r\n\t\t\t\tlet pass = true;\r\n\t\t\t\tlet line = range ? range.start.line : item.line;\r\n\t\t\t\tif (prePos) {\r\n\t\t\t\t\tlet preLine = prePos.end ? prePos.end.line : prePos.line;\r\n\t\t\t\t\tif (preLine + 1 === line || preLine === line) {\r\n\t\t\t\t\t\t//和之前的光标冲突，移除当前光标所处的活动区域\r\n\t\t\t\t\t\trange && this.editor.selecter.removeRange(range);\r\n\t\t\t\t\t\tpass = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (pass) {\r\n\t\t\t\t\tvar enLine = (range && range.end.line) || line;\r\n\t\t\t\t\tif ((line === 1 && direct === 'up') || (enLine === this.editor.maxLine && direct === 'down')) {\r\n\t\t\t\t\t\tpass = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (range) {\r\n\t\t\t\t\t\t\trange.margin = Util.comparePos(range.start, item) === 0 ? 'left' : 'right';\r\n\t\t\t\t\t\t\tprePos = range;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tprePos = item;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcursorPosList.push(prePos);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\twhile (index < cursorPosList.length) {\r\n\t\t\tlet pos = cursorPosList[index];\r\n\t\t\tlet range = pos.start ? pos : null;\r\n\t\t\tthis._moveLine(pos, direct);\r\n\t\t\t//移动光标和选区\r\n\t\t\tlet delta = direct === 'down' ? 1 : -1;\r\n\t\t\tif (range) {\r\n\t\t\t\t//更新选中区域坐标\r\n\t\t\t\trange.start.line = range.start.line + delta;\r\n\t\t\t\trange.end.line = range.end.line + delta;\r\n\t\t\t} else {\r\n\t\t\t\t// 更新光标坐标\r\n\t\t\t\tpos.line = pos.line + delta;\r\n\t\t\t}\r\n\t\t\thistoryPosList.push(range ? this.editor.selecter.clone(range, ['margin']) : Object.assign({}, pos));\r\n\t\t\tindex++;\r\n\t\t}\r\n\t\tif (!historyPosList.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.editor.searcher.clearSearch();\r\n\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t// 恢复活动区域和光标\r\n\t\thistoryPosList.forEach(item => {\r\n\t\t\tif (item.start) {\r\n\t\t\t\tthis.editor.cursor.addCursorPos(item.margin === 'left' ? item.start : item.end);\r\n\t\t\t\tthis.editor.selecter.addRange(item);\r\n\t\t\t} else {\r\n\t\t\t\tthis.editor.cursor.addCursorPos(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet historyObj = {\r\n\t\t\ttype: direct === 'down' ? Util.HISTORY_COMMAND.MOVEUP : Util.HISTORY_COMMAND.MOVEDOWN,\r\n\t\t\tcursorPos: historyPosList,\r\n\t\t\tsearchConifg: searchConifg // 记录搜索配置\r\n\t\t};\r\n\t\tif (!command) {\r\n\t\t\t// 新增历史记录\r\n\t\t\tthis.editor.history.pushHistory(historyObj);\r\n\t\t\tthis.editor.searcher.refreshSearch(searchConifg);\r\n\t\t} else {\r\n\t\t\t// 撤销或重做操作后，更新历史记录\r\n\t\t\tthis.editor.history.updateHistory(historyObj);\r\n\t\t\tthis.editor.searcher.refreshSearch(command.searchConifg);\r\n\t\t}\r\n\t\tthis.editor.fSearcher.refreshSearch();\r\n\t}\r\n\t_moveLine(cursorPos, direct) {\r\n\t\tlet range = cursorPos.start ? cursorPos : null;\r\n\t\tlet upLine = 0;\r\n\t\tlet downLine = 0;\r\n\t\tlet text = '';\r\n\t\t// 当前光标处于选中区域边界\r\n\t\tif (range) {\r\n\t\t\ttext = this.htmls\r\n\t\t\t\t.slice(range.start.line - 1, range.end.line)\r\n\t\t\t\t.map(item => {\r\n\t\t\t\t\treturn item.text;\r\n\t\t\t\t})\r\n\t\t\t\t.join('\\n');\r\n\t\t\tif (direct === 'down') {\r\n\t\t\t\tupLine = range.start.line;\r\n\t\t\t\tdownLine = range.end.line + 1;\r\n\t\t\t\ttext = this.htmls[downLine - 1].text + '\\n' + text;\r\n\t\t\t} else {\r\n\t\t\t\tupLine = range.start.line - 1;\r\n\t\t\t\tdownLine = range.end.line;\r\n\t\t\t\ttext = text + '\\n' + this.htmls[upLine - 1].text;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tupLine = cursorPos.line - (direct === 'down' ? 0 : 1);\r\n\t\t\tdownLine = upLine + 1;\r\n\t\t\ttext = this.htmls[downLine - 1].text + '\\n' + this.htmls[upLine - 1].text;\r\n\t\t}\r\n\t\tlet start = {\r\n\t\t\tline: upLine,\r\n\t\t\tcolumn: 0\r\n\t\t};\r\n\t\tlet end = {\r\n\t\t\tline: downLine,\r\n\t\t\tcolumn: this.htmls[downLine - 1].text.length\r\n\t\t};\r\n\t\tthis._deleteContent({\r\n\t\t\tstart: start,\r\n\t\t\tend: end\r\n\t\t});\r\n\t\tthis._insertContent(text, start);\r\n\t}\r\n\t// 向上复制一行\r\n\tcopyLineUp(command) {\r\n\t\tthis.copyLine(command, 'up');\r\n\t}\r\n\t// 向下复制一行\r\n\tcopyLineDown(command) {\r\n\t\tthis.copyLine(command, 'down');\r\n\t}\r\n\tcopyLine(command, direct) {\r\n\t\tlet originList = [];\r\n\t\tlet cursorPosList = [];\r\n\t\tlet historyPosList = [];\r\n\t\tlet prePos = null;\r\n\t\tlet texts = [];\r\n\t\tlet searchConifg = null;\r\n\t\tif (command) {\r\n\t\t\tsearchConifg = command.searchConifg;\r\n\t\t\toriginList = command.cursorPos;\r\n\t\t} else {\r\n\t\t\tsearchConifg = this.editor.searcher.getConfig();\r\n\t\t\toriginList = [];\r\n\t\t\t// 过滤重叠光标和活动区域\r\n\t\t\tthis.editor.cursor.multiCursorPos.toArray().forEach(item => {\r\n\t\t\t\tlet range = this.editor.selecter.getRangeByCursorPos(item);\r\n\t\t\t\tlet line = (range && range.start.line) || item.line;\r\n\t\t\t\tlet pass = true;\r\n\t\t\t\tif (prePos) {\r\n\t\t\t\t\tlet preLine = prePos.end ? prePos.end.line : prePos.line;\r\n\t\t\t\t\tif (preLine === line) {\r\n\t\t\t\t\t\tpass = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (pass) {\r\n\t\t\t\t\tif (range) {\r\n\t\t\t\t\t\trange.margin = Util.comparePos(range.start, item) === 0 ? 'left' : 'right';\r\n\t\t\t\t\t\tprePos = range;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tprePos = item;\r\n\t\t\t\t\t}\r\n\t\t\t\t\toriginList.push(prePos);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\toriginList.forEach(item => {\r\n\t\t\tlet line = 0;\r\n\t\t\tlet text = '';\r\n\t\t\tif (item.end) {\r\n\t\t\t\tline = item.start.line - 1;\r\n\t\t\t\ttext = this.htmls\r\n\t\t\t\t\t.slice(item.start.line - 1, item.end.line)\r\n\t\t\t\t\t.map(item => {\r\n\t\t\t\t\t\treturn item.text;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.join('\\n');\r\n\t\t\t} else {\r\n\t\t\t\tline = item.line - 1;\r\n\t\t\t\ttext = this.htmls[item.line - 1].text;\r\n\t\t\t}\r\n\t\t\tline = line < 1 ? 1 : line;\r\n\t\t\ttext = '\\n' + text;\r\n\t\t\ttexts.push(text);\r\n\t\t\tcursorPosList.push({ line: line, column: this.htmls[line - 1].text.length });\r\n\t\t});\r\n\t\tthis._insertMultiContent(texts, cursorPosList).forEach((item, index) => {\r\n\t\t\tlet line = 0;\r\n\t\t\tlet originPos = originList[index];\r\n\t\t\tline = item.cursorPos.line;\r\n\t\t\tif (direct === 'down') {\r\n\t\t\t\tline = line + (originPos.start ? originPos.end.line - originPos.start.line + 1 : 1);\r\n\t\t\t}\r\n\t\t\tif (originPos.start) {\r\n\t\t\t\tlet delta = originPos.end.line - originPos.start.line;\r\n\t\t\t\toriginPos.end.line = line;\r\n\t\t\t\toriginPos.start.line = line - delta;\r\n\t\t\t} else {\r\n\t\t\t\toriginPos.line = line;\r\n\t\t\t}\r\n\t\t\thistoryPosList.push(originPos.start ? this.editor.selecter.clone(originPos, ['margin']) : Object.assign({}, originPos));\r\n\t\t});\r\n\t\tthis.editor.searcher.clearSearch();\r\n\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t// 恢复活动区域和光标\r\n\t\thistoryPosList.forEach(item => {\r\n\t\t\tif (item.start) {\r\n\t\t\t\tthis.editor.cursor.addCursorPos(item.margin === 'left' ? item.start : item.end);\r\n\t\t\t\tthis.editor.selecter.addRange(item);\r\n\t\t\t} else {\r\n\t\t\t\tthis.editor.cursor.addCursorPos(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet historyObj = {\r\n\t\t\ttype: direct === 'down' ? Util.HISTORY_COMMAND.DELETE_COPY_DOWN : Util.HISTORY_COMMAND.DELETE_COPY_UP,\r\n\t\t\tcursorPos: historyPosList,\r\n\t\t\tsearchConifg: searchConifg // 记录搜索配置\r\n\t\t};\r\n\t\tif (!command) {\r\n\t\t\t// 新增历史记录\r\n\t\t\tthis.editor.history.pushHistory(historyObj);\r\n\t\t\tthis.editor.searcher.refreshSearch(searchConifg);\r\n\t\t} else {\r\n\t\t\t// 撤销或重做操作后，更新历史记录\r\n\t\t\tthis.editor.history.updateHistory(historyObj);\r\n\t\t\tthis.editor.searcher.refreshSearch(command.searchConifg);\r\n\t\t}\r\n\t\tthis.editor.fSearcher.refreshSearch();\r\n\t}\r\n\t// 删除上面一行\r\n\tdeleteCopyLineUp(command) {\r\n\t\tthis.deleteCopyLine(command, 'up');\r\n\t}\r\n\t// 删除下面一行\r\n\tdeleteCopyLineDown(command) {\r\n\t\tthis.deleteCopyLine(command, 'down');\r\n\t}\r\n\tdeleteCopyLine(command, direct) {\r\n\t\tlet originList = [];\r\n\t\tlet cursorPosList = [];\r\n\t\tlet historyPosList = [];\r\n\t\toriginList = command.cursorPos;\r\n\t\toriginList.forEach(item => {\r\n\t\t\tlet upLine = 0;\r\n\t\t\tlet downLine = 0;\r\n\t\t\tlet range = null;\r\n\t\t\tlet startColumn = 0;\r\n\t\t\tlet endColumn = 0;\r\n\t\t\tif (item.end) {\r\n\t\t\t\tupLine = item.start.line - 1;\r\n\t\t\t\tdownLine = item.end.line;\r\n\t\t\t} else {\r\n\t\t\t\tupLine = item.line - 1;\r\n\t\t\t\tdownLine = item.line;\r\n\t\t\t}\r\n\t\t\tendColumn = this.htmls[downLine - 1].text.length;\r\n\t\t\tif (upLine < 1) {\r\n\t\t\t\tupLine = 1;\r\n\t\t\t\tif (downLine < this.editor.maxLine) {\r\n\t\t\t\t\tdownLine++;\r\n\t\t\t\t\tendColumn = 0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tstartColumn = this.htmls[upLine - 1].text.length;\r\n\t\t\t}\r\n\t\t\trange = {\r\n\t\t\t\tstart: { line: upLine, column: startColumn },\r\n\t\t\t\tend: { line: downLine, column: endColumn }\r\n\t\t\t};\r\n\t\t\tcursorPosList.push(range);\r\n\t\t});\r\n\t\tthis._deleteMultiContent(cursorPosList).forEach((item, index) => {\r\n\t\t\tlet originPos = originList[index];\r\n\t\t\tif (originPos.start) {\r\n\t\t\t\tlet delta = originPos.end.line - originPos.start.line;\r\n\t\t\t\tif (direct === 'up') {\r\n\t\t\t\t\toriginPos.start.line = item.cursorPos.line + (originPos.start.line === 1 ? 0 : 1);\r\n\t\t\t\t\toriginPos.end.line = originPos.start.line + delta;\r\n\t\t\t\t} else {\r\n\t\t\t\t\toriginPos.end.line = item.cursorPos.line;\r\n\t\t\t\t\toriginPos.start.line = originPos.end.line - delta;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (direct === 'up') {\r\n\t\t\t\t\toriginPos.line = item.cursorPos.line + (originPos.line === 1 ? 0 : 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toriginPos.line = item.cursorPos.line;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\thistoryPosList.push(originPos.start ? this.editor.selecter.clone(originPos, ['margin']) : Object.assign({}, originPos));\r\n\t\t});\r\n\t\tthis.editor.searcher.clearSearch();\r\n\t\tthis.editor.cursor.clearCursorPos();\r\n\t\t// 恢复活动区域和光标\r\n\t\thistoryPosList.forEach(item => {\r\n\t\t\tif (item.start) {\r\n\t\t\t\tthis.editor.cursor.addCursorPos(item.margin === 'left' ? item.start : item.end);\r\n\t\t\t\tthis.editor.selecter.addRange(item);\r\n\t\t\t} else {\r\n\t\t\t\tthis.editor.cursor.addCursorPos(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet historyObj = {\r\n\t\t\ttype: direct === 'down' ? Util.HISTORY_COMMAND.COPY_UP : Util.HISTORY_COMMAND.COPY_DOWN,\r\n\t\t\tcursorPos: historyPosList,\r\n\t\t\tsearchConifg: command.searchConifg\r\n\t\t};\r\n\t\tthis.editor.history.updateHistory(historyObj);\r\n\t\tthis.editor.searcher.refreshSearch(command.searchConifg);\r\n\t\tthis.editor.fSearcher.refreshSearch();\r\n\t}\r\n\t// 插入当前行\r\n\tinsertLine(command) {\r\n\t\tlet searchConifg = command.searchConifg;\r\n\t\tlet originList = command.cursorPos;\r\n\t\tlet texts = command.text;\r\n\t\tlet cursorPosList = [];\r\n\t\toriginList.forEach(item => {\r\n\t\t\tlet line = item.start ? item.start.line - 1 : item.line - 1;\r\n\t\t\tline = line < 1 ? 1 : line;\r\n\t\t\tcursorPosList.push({ line: line, column: this.htmls[line - 1].text.length });\r\n\t\t});\r\n\t\tthis._insertMultiContent(texts, cursorPosList);\r\n\t\tthis.editor.searcher.clearSearch();\r\n\t\tthis.editor.cursor.clearCursorPos();\r\n\t\toriginList.forEach(item => {\r\n\t\t\tif (item.start) {\r\n\t\t\t\tthis.editor.cursor.addCursorPos(item.margin === 'left' ? item.start : item.end);\r\n\t\t\t\tthis.editor.selecter.addRange(item);\r\n\t\t\t} else {\r\n\t\t\t\tthis.editor.cursor.addCursorPos(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet historyObj = {\r\n\t\t\ttype: Util.HISTORY_COMMAND.DELETE_LINE,\r\n\t\t\tcursorPos: originList,\r\n\t\t\tsearchConifg: searchConifg\r\n\t\t};\r\n\t\t// 撤销或重做操作后，更新历史记录\r\n\t\tthis.editor.history.updateHistory(historyObj);\r\n\t\tthis.editor.searcher.refreshSearch(command.searchConifg);\r\n\t\tthis.editor.fSearcher.refreshSearch();\r\n\t}\r\n\t// 删除当前行\r\n\tdeleteLine(command) {\r\n\t\tlet originList = [];\r\n\t\tlet cursorPosList = [];\r\n\t\tlet historyPosList = [];\r\n\t\tlet prePos = null;\r\n\t\tlet texts = [];\r\n\t\tlet searchConifg = null;\r\n\t\tif (command) {\r\n\t\t\tsearchConifg = command.searchConifg;\r\n\t\t\toriginList = command.cursorPos;\r\n\t\t} else {\r\n\t\t\tsearchConifg = this.editor.searcher.getConfig();\r\n\t\t\tthis.editor.cursor.multiCursorPos.forEach(item => {\r\n\t\t\t\tlet range = this.editor.selecter.getRangeByCursorPos(item);\r\n\t\t\t\tlet line = (range && range.start.line) || item.line;\r\n\t\t\t\tlet pass = true;\r\n\t\t\t\tif (prePos) {\r\n\t\t\t\t\tlet preLine = prePos.end ? prePos.end.line : prePos.line;\r\n\t\t\t\t\tif (preLine === line) {\r\n\t\t\t\t\t\tpass = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (pass) {\r\n\t\t\t\t\tif (range) {\r\n\t\t\t\t\t\trange.margin = Util.comparePos(range.start, item) === 0 ? 'left' : 'right';\r\n\t\t\t\t\t\tprePos = range;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tprePos = item;\r\n\t\t\t\t\t}\r\n\t\t\t\t\toriginList.push(prePos);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\toriginList.forEach(item => {\r\n\t\t\tlet upLine = 0;\r\n\t\t\tlet downLine = 0;\r\n\t\t\tlet range = null;\r\n\t\t\tlet startColumn = 0;\r\n\t\t\tlet endColumn = 0;\r\n\t\t\tif (item.end) {\r\n\t\t\t\tupLine = item.start.line - 1;\r\n\t\t\t\tdownLine = item.end.line;\r\n\t\t\t} else {\r\n\t\t\t\tupLine = item.line - 1;\r\n\t\t\t\tdownLine = item.line;\r\n\t\t\t}\r\n\t\t\tendColumn = this.htmls[downLine - 1].text.length;\r\n\t\t\tif (upLine < 1) {\r\n\t\t\t\tupLine = 1;\r\n\t\t\t\tif (downLine < this.editor.maxLine) {\r\n\t\t\t\t\tdownLine++;\r\n\t\t\t\t\tendColumn = 0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tstartColumn = this.htmls[upLine - 1].text.length;\r\n\t\t\t}\r\n\t\t\trange = {\r\n\t\t\t\tstart: { line: upLine, column: startColumn },\r\n\t\t\t\tend: { line: downLine, column: endColumn }\r\n\t\t\t};\r\n\t\t\ttexts.push(this.getRangeText(range.start, range.end));\r\n\t\t\tcursorPosList.push(range);\r\n\t\t});\r\n\t\tthis._deleteMultiContent(cursorPosList).forEach((item, index) => {\r\n\t\t\tlet originPos = originList[index];\r\n\t\t\tlet line = item.cursorPos.line;\r\n\t\t\tlet column = originList[index].column;\r\n\t\t\tif (originPos.start) {\r\n\t\t\t\tcolumn = originPos.margin === 'left' ? originPos.start.column : originPos.end.column;\r\n\t\t\t}\r\n\t\t\tcolumn = column > this.htmls[line - 1].text.length ? this.htmls[line - 1].text.length : column;\r\n\t\t\thistoryPosList.push({ line: line, column: column });\r\n\t\t});\r\n\t\tthis.editor.searcher.clearSearch();\r\n\t\tthis.editor.cursor.clearCursorPos();\r\n\t\thistoryPosList.forEach(item => {\r\n\t\t\tthis.editor.cursor.addCursorPos(item);\r\n\t\t});\r\n\t\tlet historyObj = {\r\n\t\t\ttype: Util.HISTORY_COMMAND.INSERT_LINE,\r\n\t\t\tcursorPos: originList,\r\n\t\t\ttext: texts,\r\n\t\t\tsearchConifg: searchConifg\r\n\t\t};\r\n\t\tif (!command) {\r\n\t\t\t// 新增历史记录\r\n\t\t\tthis.editor.history.pushHistory(historyObj);\r\n\t\t} else {\r\n\t\t\t// 撤销或重做操作后，更新历史记录\r\n\t\t\tthis.editor.history.updateHistory(historyObj);\r\n\t\t\tthis.editor.searcher.refreshSearch(command.searchConifg);\r\n\t\t}\r\n\t\tthis.editor.fSearcher.refreshSearch();\r\n\t}\r\n\t// 文件变动，重写加载文件内容\r\n\treload(text) {\r\n\t\tlet range = {\r\n\t\t\tstart: { line: 1, column: 0 },\r\n\t\t\tend: { line: this.htmls.length, column: this.htmls.peek().text.length }\r\n\t\t};\r\n\t\tthis.editor.searcher.clearSearch();\r\n\t\tthis.replace(text, [range]);\r\n\t}\r\n\treplace(texts, ranges) {\r\n\t\tlet historyArr = null;\r\n\t\tlet serial = this.serial++;\r\n\t\thistoryArr = this._deleteMultiContent(ranges);\r\n\t\thistoryArr.serial = serial;\r\n\t\thistoryArr.length && this.editor.history.pushHistory(historyArr);\r\n\t\thistoryArr = this._insertMultiContent(texts, this.editor.cursor.multiCursorPos.toArray());\r\n\t\thistoryArr.serial = serial;\r\n\t\thistoryArr.length && this.editor.history.pushHistory(historyArr);\r\n\t\treturn this.editor.fSearcher.refreshSearch();\r\n\t}\r\n\t// 点击自动提示替换输入的内容\r\n\treplaceTip(tip) {\r\n\t\tlet word = tip.word || '';\r\n\t\tlet after = tip.after || '';\r\n\t\tlet before = tip.before || '';\r\n\t\tlet result = before + _getResult(tip) + after;\r\n\t\tlet ranges = null;\r\n\t\tif (result === word) {\r\n\t\t\t//替换前后一致，不做操作\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tranges = _getRanges.call(this);\r\n\t\tthis.replace(result, ranges);\r\n\t\t_updatePos.call(this);\r\n\t\tif (tip.type === Enum.TOKEN_TYPE.CSS_PROPERTY) {\r\n\t\t\t//选中css属性名后，自动弹出属性值列表\r\n\t\t\tthis.editor.autocomplete.search();\r\n\t\t}\r\n\r\n\t\tfunction _getResult(tip) {\r\n\t\t\tlet result = '';\r\n\t\t\tif (tip.type === Enum.TOKEN_TYPE.EMMET_HTML || tip.type === Enum.TOKEN_TYPE.EMMET_CSS) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst config = {};\r\n\t\t\t\t\tif (tip.type === Enum.TOKEN_TYPE.EMMET_CSS) {\r\n\t\t\t\t\t\tconfig.type = 'stylesheet';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult = expand(tip.result, config);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tresult = tip.result;\r\n\t\t\t\t}\r\n\t\t\t} else if (tip.type === Enum.TOKEN_TYPE.TAG_NAME) {\r\n\t\t\t\tresult += tip.result + `></${tip.result}>`;\r\n\t\t\t} else {\r\n\t\t\t\tresult = tip.result;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tfunction _getRanges() {\r\n\t\t\tlet ranges = [];\r\n\t\t\tthis.editor.cursor.multiCursorPos.forEach(cursorPos => {\r\n\t\t\t\tlet range = null;\r\n\t\t\t\trange = {\r\n\t\t\t\t\tstart: { line: cursorPos.line, column: cursorPos.column - word.length },\r\n\t\t\t\t\tend: { line: cursorPos.line, column: cursorPos.column }\r\n\t\t\t\t};\r\n\t\t\t\tranges.push(range);\r\n\t\t\t});\r\n\t\t\treturn ranges;\r\n\t\t}\r\n\r\n\t\tfunction _updatePos() {\r\n\t\t\tif (tip.type === Enum.TOKEN_TYPE.TAG_NAME || tip.type === Enum.TOKEN_TYPE.EMMET_HTML) {\r\n\t\t\t\t//生成标签后，光标定位到标签中间的位置\r\n\t\t\t\tlet exec = regs.endTag.exec(result);\r\n\t\t\t\tif (exec) {\r\n\t\t\t\t\tlet text = result.slice(exec.index);\r\n\t\t\t\t\tlet deltaArr = text.split('\\n');\r\n\t\t\t\t\tlet multiCursorPos = this.editor.cursor.multiCursorPos.toArray();\r\n\t\t\t\t\tfor (let i = multiCursorPos.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tlet cursorPos = _getDeltaPos.call(this, deltaArr, multiCursorPos[i]);\r\n\t\t\t\t\t\tthis.editor.cursor.updateCursorPos(multiCursorPos[i], cursorPos.line, cursorPos.column);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (tip.type === Enum.TOKEN_TYPE.ATTR_NAME) {\r\n\t\t\t\t//选中标签属性后，光标移动端\"\"内\r\n\t\t\t\tthis.editor.cursor.multiCursorPos.forEach(item => {\r\n\t\t\t\t\tthis.editor.cursor.moveCursor(item, 'left');\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction _getDeltaPos(deltaArr, cursorPos) {\r\n\t\t\tlet line = cursorPos.line;\r\n\t\t\tlet column = cursorPos.column;\r\n\t\t\tif (deltaArr.length === 1) {\r\n\t\t\t\tcolumn -= deltaArr[0].length;\r\n\t\t\t} else {\r\n\t\t\t\tline -= deltaArr.length - 1;\r\n\t\t\t\tcolumn = this.htmls[line - 1].text.length - deltaArr[0].length;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tline: line,\r\n\t\t\t\tcolumn: column\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\tconvertTabToSpace(command) {\r\n\t\tlet contentChanged = false;\r\n\t\tlet tabSize = this.editor.tabSize;\r\n\t\tlet space = this.editor.space;\r\n\t\tif (command) {\r\n\t\t\ttabSize = command.tabSize;\r\n\t\t\tspace = command.space;\r\n\t\t}\r\n\t\tthis.editor.cursor.multiCursorPos.forEach(cursorPos => {\r\n\t\t\t_checkPos.call(this, cursorPos);\r\n\t\t});\r\n\t\tthis.editor.selecter.ranges.forEach(range => {\r\n\t\t\t_checkPos.call(this, range.start);\r\n\t\t\t_checkPos.call(this, range.end);\r\n\t\t});\r\n\t\tthis.editor.fSelecter.ranges.forEach(range => {\r\n\t\t\t_checkPos.call(this, range.start);\r\n\t\t\t_checkPos.call(this, range.end);\r\n\t\t});\r\n\t\tthis.editor.folder.folds.forEach(fold => {\r\n\t\t\tlet text = this.htmls[fold.start.line - 1].text;\r\n\t\t\tlet tabCount = _getTabNum(text);\r\n\t\t\tif (tabCount) {\r\n\t\t\t\ttabCount = tabCount * (tabSize - 1);\r\n\t\t\t\tfold.start.startIndex += tabCount;\r\n\t\t\t\tfold.start.endIndex += tabCount;\r\n\t\t\t}\r\n\t\t\ttext = this.htmls[fold.end.line - 1].text;\r\n\t\t\ttabCount = _getTabNum(text);\r\n\t\t\tif (tabCount) {\r\n\t\t\t\ttabCount = tabCount * (tabSize - 1);\r\n\t\t\t\tfold.end.startIndex += tabCount;\r\n\t\t\t\tfold.end.endIndex += tabCount;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.htmls.forEach(lineObj => {\r\n\t\t\tlet tabCount = _getTabNum(lineObj.text);\r\n\t\t\ttabCount = tabCount * (tabSize - 1);\r\n\t\t\tif (tabCount > 0) {\r\n\t\t\t\tif (lineObj.tokens) {\r\n\t\t\t\t\tlineObj.tokens.forEach((token, index) => {\r\n\t\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\t\ttoken.startIndex += tabCount;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttoken.endIndex += tabCount;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (lineObj.folds) {\r\n\t\t\t\t\tlineObj.folds.forEach(fold => {\r\n\t\t\t\t\t\tfold.startIndex += tabCount;\r\n\t\t\t\t\t\tfold.endIndex += tabCount;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (lineObj.stateFold) {\r\n\t\t\t\t\tlineObj.stateFold.startIndex += tabCount;\r\n\t\t\t\t\tlineObj.stateFold.endIndex += tabCount;\r\n\t\t\t\t}\r\n\t\t\t\tlineObj.text = lineObj.text.replace(/(?<=^\\s*)\\t/g, space);\r\n\t\t\t\tlineObj.html = '';\r\n\t\t\t\tlineObj.tabNum = -1;\r\n\t\t\t\tcontentChanged = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (contentChanged) {\r\n\t\t\tthis.contentChanged();\r\n\t\t\tEventBus.$emit('indent-change', 'space');\r\n\t\t\tthis.editor.tabData.status !== '!!' && this.editor.differ.run();\r\n\t\t\tthis.editor.render();\r\n\t\t\tif (command) {\r\n\t\t\t\tthis.editor.history.updateHistory({ type: Util.HISTORY_COMMAND.SPACE_TO_TAB, tabSize, space });\r\n\t\t\t} else {\r\n\t\t\t\tthis.editor.history.pushHistory({ type: Util.HISTORY_COMMAND.SPACE_TO_TAB, tabSize, space });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction _getTabNum(text) {\r\n\t\t\tlet tabNum = 0;\r\n\t\t\tlet res = /^\\s+/.exec(text);\r\n\t\t\tif (res) {\r\n\t\t\t\tres = res[0];\r\n\t\t\t\tfor (let i = 0; i < res.length; i++) {\r\n\t\t\t\t\tif (res[i] === '\\t') {\r\n\t\t\t\t\t\ttabNum++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn tabNum;\r\n\t\t}\r\n\r\n\t\tfunction _checkPos(cursorPos) {\r\n\t\t\tlet text = this.htmls[cursorPos.line - 1].text.slice(0, cursorPos.column);\r\n\t\t\tlet tabCount = _getTabNum(text);\r\n\t\t\tif (tabCount) {\r\n\t\t\t\ttabCount = tabCount * (tabSize - 1);\r\n\t\t\t\tcursorPos.column += tabCount;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tconvertSpaceToTab(command) {\r\n\t\tlet contentChanged = false;\r\n\t\tlet tabSize = this.editor.tabSize;\r\n\t\tlet space = this.editor.space;\r\n\t\tif (command) {\r\n\t\t\ttabSize = command.tabSize;\r\n\t\t\tspace = command.space;\r\n\t\t}\r\n\t\tlet indexReg = new RegExp(`^(\\\\t|${space})+`);\r\n\t\tlet reg = new RegExp(`(?<=^\\\\s*)${space}`, 'g');\r\n\t\tthis.editor.cursor.multiCursorPos.forEach(cursorPos => {\r\n\t\t\t_checkPos.call(this, cursorPos);\r\n\t\t});\r\n\t\tthis.editor.selecter.ranges.forEach(range => {\r\n\t\t\t_checkPos.call(this, range.start);\r\n\t\t\t_checkPos.call(this, range.end);\r\n\t\t});\r\n\t\tthis.editor.fSelecter.ranges.forEach(range => {\r\n\t\t\t_checkPos.call(this, range.start);\r\n\t\t\t_checkPos.call(this, range.end);\r\n\t\t});\r\n\t\tthis.editor.folder.folds.forEach(fold => {\r\n\t\t\tlet text = this.htmls[fold.start.line - 1].text;\r\n\t\t\tlet tabCount = _getTabNum(text);\r\n\t\t\tif (tabCount) {\r\n\t\t\t\ttabCount = tabCount * (tabSize - 1);\r\n\t\t\t\tfold.start.startIndex -= tabCount;\r\n\t\t\t\tfold.start.endIndex -= tabCount;\r\n\t\t\t}\r\n\t\t\ttext = this.htmls[fold.end.line - 1].text;\r\n\t\t\ttabCount = _getTabNum(text);\r\n\t\t\tif (tabCount) {\r\n\t\t\t\ttabCount = tabCount * (tabSize - 1);\r\n\t\t\t\tfold.end.startIndex -= tabCount;\r\n\t\t\t\tfold.end.endIndex -= tabCount;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.htmls.forEach(lineObj => {\r\n\t\t\tlet tabCount = _getTabNum(lineObj.text);\r\n\t\t\ttabCount = tabCount * (tabSize - 1);\r\n\t\t\tif (tabCount > 0) {\r\n\t\t\t\tif (lineObj.tokens) {\r\n\t\t\t\t\tlineObj.tokens.forEach((token, index) => {\r\n\t\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\t\ttoken.startIndex -= tabCount;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttoken.endIndex -= tabCount;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (lineObj.folds) {\r\n\t\t\t\t\tlineObj.folds.forEach(fold => {\r\n\t\t\t\t\t\tfold.startIndex -= tabCount;\r\n\t\t\t\t\t\tfold.endIndex -= tabCount;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (lineObj.stateFold) {\r\n\t\t\t\t\tlineObj.stateFold.startIndex -= tabCount;\r\n\t\t\t\t\tlineObj.stateFold.endIndex -= tabCount;\r\n\t\t\t\t}\r\n\t\t\t\tlineObj.text = lineObj.text.replace(reg, '\\t');\r\n\t\t\t\tlineObj.html = '';\r\n\t\t\t\tlineObj.tabNum = -1;\r\n\t\t\t\tcontentChanged = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (contentChanged) {\r\n\t\t\tthis.contentChanged();\r\n\t\t\tEventBus.$emit('indent-change', 'tab');\r\n\t\t\tthis.editor.tabData.status !== '!!' && this.editor.differ.run();\r\n\t\t\tthis.editor.render();\r\n\t\t\tif (command) {\r\n\t\t\t\tthis.editor.history.updateHistory({ type: Util.HISTORY_COMMAND.TAB_TO_SPACE, tabSize, space });\r\n\t\t\t} else {\r\n\t\t\t\tthis.editor.history.pushHistory({ type: Util.HISTORY_COMMAND.TAB_TO_SPACE, tabSize, space });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction _getTabNum(text) {\r\n\t\t\tlet tabNum = 0;\r\n\t\t\tlet res = text.match(reg);\r\n\t\t\ttabNum = res && res.length;\r\n\t\t\treturn tabNum;\r\n\t\t}\r\n\r\n\t\tfunction _checkPos(cursorPos) {\r\n\t\t\tlet text = this.htmls[cursorPos.line - 1].text;\r\n\t\t\tlet preText = text.slice(0, cursorPos.column);\r\n\t\t\tlet tabCount = _getTabNum(preText);\r\n\t\t\ttabCount = tabCount * (tabSize - 1);\r\n\t\t\tif (tabCount) {\r\n\t\t\t\tlet index = indexReg.exec(preText)[0].length;\r\n\t\t\t\tif (cursorPos.column > index && text.slice(index, index + 4) === space) {\r\n\t\t\t\t\tcursorPos.column = index - tabCount + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcursorPos.column -= tabCount;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcontentChanged() {\r\n\t\tthis.allText = '';\r\n\t\tEventBus.$emit('editor-content-change', { id: this.editor.editorId, path: this.editor.tabData.path });\r\n\t}\r\n\t// 获取最大宽度\r\n\tsetMaxWidth() {\r\n\t\tlet index = 0;\r\n\t\tlet startTime = Date.now();\r\n\t\tlet maxWidthObj = {\r\n\t\t\tline: this.htmls[0].lineId,\r\n\t\t\twidth: 0\r\n\t\t};\r\n\t\tclearTimeout(this.setMaxWidthTimer);\r\n\t\t_setMaxWidth.call(this);\r\n\r\n\t\tfunction _setMaxWidth() {\r\n\t\t\twhile (index < this.htmls.length) {\r\n\t\t\t\tlet item = this.htmls[index];\r\n\t\t\t\tif (item.width > maxWidthObj.width) {\r\n\t\t\t\t\tmaxWidthObj = {\r\n\t\t\t\t\t\tlineId: item.lineId,\r\n\t\t\t\t\t\ttext: item.text,\r\n\t\t\t\t\t\twidth: item.width\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tindex++;\r\n\t\t\t\tif (Date.now() - startTime > 20) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (index < this.htmls.length) {\r\n\t\t\t\tthis.setMaxWidthTimer = setTimeout(() => {\r\n\t\t\t\t\t_setMaxWidth.call(this);\r\n\t\t\t\t}, 20);\r\n\t\t\t} else {\r\n\t\t\t\tthis.editor.setData('maxWidthObj', maxWidthObj);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 设置每行文本的宽度\r\n\t * @param {Array} texts\r\n\t */\r\n\tsetLineWidth(texts) {\r\n\t\tlet index = 0;\r\n\t\tlet maxWidthObj = this.editor.maxWidthObj;\r\n\t\tglobalData.scheduler.removeTask(this.setLineWidthTask);\r\n\t\t_setLineWidth.call(this);\r\n\r\n\t\tfunction _setLineWidth() {\r\n\t\t\tlet startTime = Date.now();\r\n\t\t\tlet count = 0;\r\n\t\t\tlet limit = 5;\r\n\t\t\twhile (index < texts.length) {\r\n\t\t\t\tlet lineObj = texts[index];\r\n\t\t\t\tif (this.lineIdMap.has(lineObj.lineId)) {\r\n\t\t\t\t\tlet width = this.editor.getStrWidth(lineObj.text);\r\n\t\t\t\t\tlineObj.width = width;\r\n\t\t\t\t\tif (width > maxWidthObj.width) {\r\n\t\t\t\t\t\tmaxWidthObj = {\r\n\t\t\t\t\t\t\tlineId: lineObj.lineId,\r\n\t\t\t\t\t\t\ttext: lineObj.text,\r\n\t\t\t\t\t\t\twidth: width\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tindex++;\r\n\t\t\t\tcount++;\r\n\t\t\t\tif (count >= limit && Date.now() - startTime >= 5) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.editor.setData('maxWidthObj', maxWidthObj);\r\n\t\t\tif (index < texts.length) {\r\n\t\t\t\tthis.setLineWidthTask = globalData.scheduler.addTask(() => {\r\n\t\t\t\t\t_setLineWidth.call(this);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 获取选中范围内的文本\r\n\tgetRangeText(start, end) {\r\n\t\tvar text = this.htmls[start.line - 1].text;\r\n\t\tif (start.line != end.line) {\r\n\t\t\tlet arr = [];\r\n\t\t\ttext = text.slice(start.column);\r\n\t\t\tarr = this.htmls.slice(start.line, end.line - 1);\r\n\t\t\tarr = arr.map(item => {\r\n\t\t\t\treturn item.text;\r\n\t\t\t});\r\n\t\t\ttext += arr.length ? '\\n' + arr.join('\\n') : '';\r\n\t\t\tif (end.line <= this.editor.maxLine) {\r\n\t\t\t\ttext += '\\n' + this.htmls[end.line - 1].text.slice(0, end.column);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttext = text.slice(start.column, end.column);\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\t// 获取待复制的文本\r\n\tgetCopyText(cut) {\r\n\t\tlet text = '';\r\n\t\tlet prePos = null;\r\n\t\tlet ranges = [];\r\n\t\tthis.editor.cursor.multiCursorPos.forEach(item => {\r\n\t\t\tlet range = this.editor.selecter.getRangeByCursorPos(item);\r\n\t\t\tlet start = null;\r\n\t\t\tif (range) {\r\n\t\t\t\tranges.push(range);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (prePos && item.line === prePos.line) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (item.line > 1) {\r\n\t\t\t\tstart = {\r\n\t\t\t\t\tline: item.line - 1,\r\n\t\t\t\t\tcolumn: this.htmls[item.line - 2].text.length\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tstart = {\r\n\t\t\t\t\tline: item.line,\r\n\t\t\t\t\tcolumn: 0\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\trange = {\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: {\r\n\t\t\t\t\tline: item.line,\r\n\t\t\t\t\tcolumn: this.htmls[item.line - 1].text.length\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tranges.push(range);\r\n\t\t\tprePos = item;\r\n\t\t});\r\n\t\tranges.forEach(item => {\r\n\t\t\tlet str = this.getRangeText(item.start, item.end);\r\n\t\t\ttext = str[0] === '\\n' ? (text += str) : (text += '\\n' + str);\r\n\t\t});\r\n\t\tif (cut) {\r\n\t\t\tlet historyArr = this._deleteMultiContent(ranges);\r\n\t\t\thistoryArr.length && this.editor.history.pushHistory(historyArr);\r\n\t\t\tthis.editor.searcher.clearSearch();\r\n\t\t\tthis.editor.fSearcher.refreshSearch();\r\n\t\t}\r\n\t\treturn text.slice(1);\r\n\t}\r\n\tgetAllText() {\r\n\t\tif (!this.allText) {\r\n\t\t\tthis.allText = this.htmls\r\n\t\t\t\t.map(item => {\r\n\t\t\t\t\treturn item.text;\r\n\t\t\t\t})\r\n\t\t\t\t.join('\\n');\r\n\t\t}\r\n\t\treturn this.allText;\r\n\t}\r\n}\r\nContext.contexts = {};\r\n\r\nexport default Context;\r\n","/*\n * @Author: lisong\n * @Date: 2022-02-18 16:13:15\n * @Description:\n */\nimport Util from '@/common/util';\nimport EventBus from '@/event';\nimport globalData from '../../data/globalData';\n\nexport default class {\n\tconstructor(editor, context) {\n\t\tthis.editor = editor;\n\t\tthis.context = context;\n\t}\n\tonKeydown(e) {\n\t\tif (e.ctrlKey && e.shiftKey) {\n\t\t\tswitch (e.code) {\n\t\t\t\tcase 'Enter':\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.context.insertLineUp();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowLeft': //ctrl+shift+left\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.selecter.select('left', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowUp': //ctrl+shift+up\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.context.moveLineUp();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowRight': //ctrl+shift+right\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.selecter.select('right', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowDown': //ctrl+shift+down\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.context.moveLineDown();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'KeyD': //ctrl+shift+D\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.context.copyLineUp();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'KeyH': //ctrl+shift+H\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tEventBus.$emit('editor-format', globalData.nowEditorId);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'KeyK': //ctrl+shift+K\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.context.deleteLine();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'KeyL': //ctrl+alt+L\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.cursor.addCursorLineEnds();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn false;\n\t\t} else if (e.ctrlKey && e.altKey) {\n\t\t\tswitch (e.code) {\n\t\t\t\tcase 'ArrowUp': //ctrl+alt+up\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.cursor.addCursorAbove();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowDown': //ctrl+alt+down\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.cursor.addCursorBelow();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else if (e.altKey && e.shiftKey) {\n\t\t\tswitch (e.code) {\n\t\t\t\tcase 'ArrowDown': //alt+shift+down\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.context.copyLineDown();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else if (e.ctrlKey) {\n\t\t\tswitch (e.code) {\n\t\t\t\tcase 'Enter':\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.context.insertLineDown();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowLeft': //left arrow\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t_moveCursor.call(this, 'left', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowRight': //right arrow\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t_moveCursor.call(this, 'right', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'KeyA': //ctrl+A,全选\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.selecter.selectAll();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'KeyD': //ctrl+D，搜素\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.searchWord('down');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'KeyF': //ctrl+F，搜素\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.openSearch();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'KeyH': //ctrl+H，搜素替换\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.openSearch(true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'KeyZ': //ctrl+Z，撤销\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.history.undo();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'KeyY': //ctrl+Y，重做\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.history.redo();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Delete': //delete\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.context.deleteWord('right');\n\t\t\t\t\tthis.editor.autocomplete.search();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Backspace': //backspace\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.context.deleteWord('left');\n\t\t\t\t\tthis.editor.autocomplete.search();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else if (e.shiftKey) {\n\t\t\tswitch (e.code) {\n\t\t\t\tcase 'ArrowLeft': //left arrow\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.selecter.select('left');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowUp': //up arrow\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.selecter.select('up');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowRight': //right arrow\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.selecter.select('right');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowDown': //down arrow\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.selecter.select('down');\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tswitch (e.code) {\n\t\t\t\tcase 'Tab': //tab键\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.editor.autocomplete.emmet();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowLeft': //left arrow\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t_moveCursor.call(this, 'left');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'End': //end键\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t_moveCursor.call(this, 'end');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Home': //home键\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t_moveCursor.call(this, 'home');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowUp': //up arrow\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (this.editor.autoTipList && this.editor.autoTipList.length) {\n\t\t\t\t\t\tthis.editor.prevAutoTip();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_moveCursor.call(this, 'up');\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowRight': //right arrow\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t_moveCursor.call(this, 'right');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowDown': //down arrow\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (this.editor.autoTipList && this.editor.autoTipList.length) {\n\t\t\t\t\t\tthis.editor.nextAutoTip();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_moveCursor.call(this, 'down');\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Enter':\n\t\t\t\t\tif (this.editor.autoTipList && this.editor.autoTipList.length) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tthis.editor.selectAutoTip();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Delete': //delete\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.context.deleteContent('right');\n\t\t\t\t\tthis.editor.autocomplete.search();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Backspace': //backspace\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.context.deleteContent('left');\n\t\t\t\t\tthis.editor.autocomplete.search();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfunction _moveCursor(direct, wholeWord) {\n\t\t\t//ctrl+d后，第一次移动光标只是取消选中状态\n\t\t\tif (!this.editor.selecter.getRangeByCursorPos(this.editor.nowCursorPos)) {\n\t\t\t\tthis.editor.cursor.multiCursorPos.forEach(cursorPos => {\n\t\t\t\t\tthis.editor.cursor.moveCursor(cursorPos, direct, wholeWord);\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.editor.setAutoTip(null); //取消自动提示\n\t\t\tthis.editor.searcher.clearSearch();\n\t\t\tthis.editor.fSearcher.clearActive();\n\t\t}\n\t}\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onMenuChange}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.allMenuList.length),expression:\"allMenuList.length\"}],ref:\"scroller\",staticClass:\"my-menu my-shadow my-border\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();},\"mouseenter\":_vm.showScrollBar,\"mouseleave\":_vm.hideScrollBar,\"mousemove\":_vm.showScrollBar,\"wheel\":function($event){$event.stopPropagation();return _vm.onWheel.apply(null, arguments)}}},[_c('div',{staticClass:\"my-menu-scroller\",style:({height: _vm.menuHeight + 'px'})},[_c('div',{ref:\"content\",staticClass:\"my-menu-content\",style:({ top: -_vm.deltaTop + 'px' })},[_vm._l((_vm.renderList),function(item){return [_c('div',{staticClass:\"my-menu-item my-center-between my-hover\",class:{'my-active': _vm.checkable && item.active, disabled: item.disabled,},on:{\"mousedown\":function($event){return _vm.onClick(item)},\"mouseover\":function($event){return _vm.onHover(item)}}},[_c('div',{staticClass:\"my-menu-left\"},[(_vm.leftSelect)?_c('span',{staticClass:\"my-menu-left-select\"},[(item.selected)?_c('span',{staticClass:\"my-icon my-icon-check\"}):_vm._e()]):_vm._e(),_c('span',{class:[item.icon]}),(item._name)?_c('span',{staticClass:\"my-menu-title\",domProps:{\"innerHTML\":_vm._s(item._name)}}):_c('span',{staticClass:\"my-menu-title\"},[_vm._v(_vm._s(item.name))]),(item._desc)?_c('span',{staticClass:\"my-menu-desc\",domProps:{\"innerHTML\":_vm._s(item._desc)}}):_c('span',{staticClass:\"my-menu-desc\"},[_vm._v(_vm._s(item.desc))])]),_c('div',{staticClass:\"my-center-start\"},[(item.shortcut)?_c('div',{staticClass:\"my-menu-shortcut\"},[(item.shortcut != 'ignore')?_c('span',[_vm._v(_vm._s(item.shortcut))]):_vm._e()]):_vm._e(),(item.selected&&!_vm.leftSelect)?_c('span',{staticClass:\"my-icon my-icon-check\",staticStyle:{\"margin-left\":\"15px\"}}):_vm._e()])]),(item.seprator)?_c('div',{staticClass:\"my-separator\"}):_vm._e()]})],2),_c('v-scroll-bar',{class:{'my-scroll-visible': _vm.scrollVisible},attrs:{\"height\":_vm.contentHeight,\"scroll-top\":_vm.scrollTop},on:{\"scroll\":_vm.onScroll}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm._vScrollAble),expression:\"_vScrollAble\"}],ref:\"bar\",staticClass:\"my-scroll-bar-v\",class:{'my-scroll-clicked': _vm.vSliderClicked},on:{\"mousedown\":_vm.onVBarDown}},[_c('div',{staticClass:\"my-scroll-slider\",style:({height: _vm._vSliderHeight + 'px', top: _vm._vSliderTop + 'px'}),on:{\"mousedown\":_vm.onVsliderDown}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div :class=\"{'my-scroll-clicked': vSliderClicked}\" @mousedown=\"onVBarDown\" class=\"my-scroll-bar-v\" ref=\"bar\" v-show=\"_vScrollAble\">\r\n\t\t<div :style=\"{height: _vSliderHeight + 'px', top: _vSliderTop + 'px'}\" @mousedown=\"onVsliderDown\" class=\"my-scroll-slider\"></div>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n\tname: 'VScrollBar',\r\n\tprops: {\r\n\t\theight: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0,\r\n\t\t},\r\n\t\tscrollTop: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0,\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tbarHeight: 0,\r\n\t\t\tvSliderClicked: false,\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t_vSliderHeight() {\r\n\t\t\tlet height = (this.barHeight / this.height) * this.barHeight;\r\n\t\t\treturn height > 20 ? height : 20;\r\n\t\t},\r\n\t\t_vSliderTop() {\r\n\t\t\tlet maxScrollTop1 = this.barHeight - this._vSliderHeight;\r\n\t\t\tlet maxScrollTop2 = this.height - this.barHeight;\r\n\t\t\treturn (this.scrollTop * maxScrollTop1) / maxScrollTop2;\r\n\t\t},\r\n\t\t_vScrollAble() {\r\n\t\t\treturn this.height > this.barHeight;\r\n\t\t},\r\n\t},\r\n\tcreated() {},\r\n\tmounted() {\r\n\t\tthis.barHeight = this.$refs.bar.clientHeight;\r\n\t\tthis.initResizeEvent();\r\n\t\tthis.initEvent();\r\n\t},\r\n\tdestroyed() {\r\n\t\tthis.unbindEvent();\r\n\t\tglobalData.scheduler.removeUiTask(this.moveHsliderTask);\r\n\t},\r\n\tmethods: {\r\n\t\tinitResizeEvent() {\r\n\t\t\tconst resizeObserver = new ResizeObserver((entries) => {\r\n\t\t\t\tif (this.$refs.bar && this.$refs.bar.clientHeight) {\r\n\t\t\t\t\tthis.barHeight = this.$refs.bar.clientHeight;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tresizeObserver.observe(this.$refs.bar);\r\n\t\t},\r\n\t\tinitEvent() {\r\n\t\t\tthis.initEventFn1 = (e) => {\r\n\t\t\t\tthis.onDocumentMouseMove(e);\r\n\t\t\t};\r\n\t\t\tthis.initEventFn2 = (e) => {\r\n\t\t\t\tthis.onDocumentMouseUp(e);\r\n\t\t\t};\r\n\t\t\tdocument.addEventListener('mousemove', this.initEventFn1);\r\n\t\t\tdocument.addEventListener('mouseup', this.initEventFn2);\r\n\t\t},\r\n\t\tunbindEvent() {\r\n\t\t\tdocument.removeEventListener('mousemove', this.initEventFn1);\r\n\t\t\tdocument.removeEventListener('mouseup', this.initEventFn2);\r\n\t\t},\r\n\t\tgetScrollTop(sliderTop) {\r\n\t\t\tlet maxScrollTop1 = this.barHeight - this._vSliderHeight;\r\n\t\t\tlet maxScrollTop2 = this.height - this.barHeight;\r\n\t\t\treturn sliderTop * (maxScrollTop2 / maxScrollTop1);\r\n\t\t},\r\n\t\tonVBarDown(e) {\r\n\t\t\tif (!this.vSliderClicked) {\r\n\t\t\t\tlet scrollTop = e.offsetY - this._vSliderHeight / 2;\r\n\t\t\t\tif (scrollTop > this.barHeight - this._vSliderHeight) {\r\n\t\t\t\t\tscrollTop = this.barHeight - this._vSliderHeight;\r\n\t\t\t\t}\r\n\t\t\t\tscrollTop = scrollTop < 0 ? 0 : scrollTop;\r\n\t\t\t\tthis.$emit('scroll', this.getScrollTop(scrollTop));\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.onVsliderDown(e);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonVsliderDown(e) {\r\n\t\t\tthis.vSliderMouseObj = e;\r\n\t\t\tthis.startVSliderTop = this._vSliderTop;\r\n\t\t\tthis.vSliderClicked = true;\r\n\t\t},\r\n\t\tonDocumentMouseMove(e) {\r\n\t\t\tif (this.vSliderMouseObj) {\r\n\t\t\t\tlet maxScrollTop1 = this.barHeight - this._vSliderHeight;\r\n\t\t\t\tlet delta = e.clientY - this.vSliderMouseObj.clientY;\r\n\t\t\t\tlet top = this.startVSliderTop;\r\n\t\t\t\ttop += delta;\r\n\t\t\t\ttop = top < 0 ? 0 : top;\r\n\t\t\t\ttop = top > maxScrollTop1 ? maxScrollTop1 : top;\r\n\t\t\t\tthis.startVSliderTop += delta;\r\n\t\t\t\tthis.vSliderMouseObj = e;\r\n\t\t\t\tthis.moveScrollTop = this.getScrollTop(top);\r\n\t\t\t\tif (this.moveScrollTop && !this.moveVsliderTask) {\r\n\t\t\t\t\tthis.moveVsliderTask = globalData.scheduler.addUiTask(() => {\r\n\t\t\t\t\t\tif (this.moveScrollTop >= 0 && this.moveScrollTop !== this.scrollTop) {\r\n\t\t\t\t\t\t\tthis.$emit('scroll', this.moveScrollTop);\r\n\t\t\t\t\t\t\tthis.moveScrollTop = -1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tglobalData.scheduler.removeUiTask(this.moveVsliderTask);\r\n\t\t\t\t\t\t\tthis.moveVsliderTask = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDocumentMouseUp(e) {\r\n\t\t\tglobalData.scheduler.removeUiTask(this.moveVsliderTask);\r\n\t\t\tthis.vSliderClicked = false;\r\n\t\t\tthis.vSliderMouseObj = null;\r\n\t\t\tthis.moveVsliderTask = null;\r\n\t\t},\r\n\t},\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VScrollBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VScrollBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VScrollBar.vue?vue&type=template&id=153a217e&\"\nimport script from \"./VScrollBar.vue?vue&type=script&lang=js&\"\nexport * from \"./VScrollBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div\r\n\t\t:style=\"styles\"\r\n\t\t@mousedown.stop\r\n\t\t@mouseenter=\"showScrollBar\"\r\n\t\t@mouseleave=\"hideScrollBar\"\r\n\t\t@mousemove=\"showScrollBar\"\r\n\t\t@wheel.stop=\"onWheel\"\r\n\t\tclass=\"my-menu my-shadow my-border\"\r\n\t\tref=\"scroller\"\r\n\t\tv-show=\"allMenuList.length\"\r\n\t>\r\n\t\t<div :style=\"{height: menuHeight + 'px'}\" class=\"my-menu-scroller\">\r\n\t\t\t<div :style=\"{ top: -deltaTop + 'px' }\" class=\"my-menu-content\" ref=\"content\">\r\n\t\t\t\t<template v-for=\"item in renderList\">\r\n\t\t\t\t\t<div :class=\"{'my-active': checkable && item.active, disabled: item.disabled,}\" @mousedown=\"onClick(item)\" @mouseover=\"onHover(item)\" class=\"my-menu-item my-center-between my-hover\">\r\n\t\t\t\t\t\t<div class=\"my-menu-left\">\r\n\t\t\t\t\t\t\t<span class=\"my-menu-left-select\" v-if=\"leftSelect\">\r\n\t\t\t\t\t\t\t\t<span class=\"my-icon my-icon-check\" v-if=\"item.selected\"></span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span :class=\"[item.icon]\"></span>\r\n\t\t\t\t\t\t\t<span class=\"my-menu-title\" v-html=\"item._name\" v-if=\"item._name\"></span>\r\n\t\t\t\t\t\t\t<span class=\"my-menu-title\" v-else>{{item.name}}</span>\r\n\t\t\t\t\t\t\t<span class=\"my-menu-desc\" v-html=\"item._desc\" v-if=\"item._desc\"></span>\r\n\t\t\t\t\t\t\t<span class=\"my-menu-desc\" v-else>{{item.desc}}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"my-center-start\">\r\n\t\t\t\t\t\t\t<div class=\"my-menu-shortcut\" v-if=\"item.shortcut\">\r\n\t\t\t\t\t\t\t\t<span v-if=\"item.shortcut != 'ignore'\">{{ item.shortcut }}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<span class=\"my-icon my-icon-check\" style=\"margin-left:15px\" v-if=\"item.selected&&!leftSelect\"></span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"my-separator\" v-if=\"item.seprator\"></div>\r\n\t\t\t\t</template>\r\n\t\t\t</div>\r\n\t\t\t<v-scroll-bar :class=\"{'my-scroll-visible': scrollVisible}\" :height=\"contentHeight\" :scroll-top=\"scrollTop\" @scroll=\"onScroll\"></v-scroll-bar>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport VScrollBar from './VScrollBar.vue';\r\nimport Util from '@/common/util';\r\nimport $ from 'jquery';\r\n\r\nexport default {\r\n\tname: 'Menu',\r\n\tprops: {\r\n\t\tmenuList: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: [],\r\n\t\t},\r\n\t\tstyles: {\r\n\t\t\ttype: Object,\r\n\t\t},\r\n\t\tleftSelect: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\tcheckable: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\thoverCheck: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\ttop: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0,\r\n\t\t},\r\n\t},\r\n\tcomponents: {\r\n\t\tVScrollBar,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tindex: -1,\r\n\t\t\titemHeight: 30,\r\n\t\t\tmenuHeight: 0,\r\n\t\t\tcontentHeight: 0,\r\n\t\t\tdeltaTop: 0,\r\n\t\t\tscrollTop: 0,\r\n\t\t\tstartLine: 1,\r\n\t\t\tmaxVisibleLines: 1,\r\n\t\t\tgroups: 0,\r\n\t\t\tscrollVisible: false,\r\n\t\t\tallMenuList: [],\r\n\t\t\trenderList: [],\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\tmenuList() {\r\n\t\t\tthis.initMenu();\r\n\t\t},\r\n\t\tindex() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.scrollToIndex();\r\n\t\t\t});\r\n\t\t},\r\n\t\tscrollTop() {\r\n\t\t\tthis.$emit('scroll', this.scrollTop);\r\n\t\t},\r\n\t\ttop() {\r\n\t\t\tif (this.top !== this.scrollTop) {\r\n\t\t\t\tthis.setStartLine(this.checkScrollTop(this.top));\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tthis.initMenu();\r\n\t},\r\n\tmounted() {\r\n\t\tthis.keydownFn = (e) => {\r\n\t\t\tif (this.$refs.content.clientHeight) {\r\n\t\t\t\tif (e.keyCode === 38) {\r\n\t\t\t\t\tthis.setCheckedByIndex(this.index - 1);\r\n\t\t\t\t} else if (e.keyCode === 40) {\r\n\t\t\t\t\tthis.setCheckedByIndex(this.index + 1);\r\n\t\t\t\t} else if (e.keyCode === 13) {\r\n\t\t\t\t\tif (this.index > -1) {\r\n\t\t\t\t\t\tthis.onClick(this.allMenuList[this.index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\t$(window).on('keydown', this.keydownFn);\r\n\t},\r\n\tdestroyed() {\r\n\t\t$(window).unbind('keydown', this.keydownFn);\r\n\t},\r\n\tmethods: {\r\n\t\tinitMenu() {\r\n\t\t\tlet index = -1;\r\n\t\t\tlet menuList = this.menuList;\r\n\t\t\tthis.groups = 0;\r\n\t\t\tthis.index = -1;\r\n\t\t\tthis.allMenuList = [];\r\n\t\t\tthis.originMenuList = [];\r\n\t\t\tif (menuList[0] && !(menuList[0] instanceof Array)) {\r\n\t\t\t\tmenuList = [menuList];\r\n\t\t\t}\r\n\t\t\tmenuList.forEach((group, gIndex) => {\r\n\t\t\t\tfor (let i = 0; i < group.length; i++) {\r\n\t\t\t\t\tlet item = group[i];\r\n\t\t\t\t\tlet renderObj = {\r\n\t\t\t\t\t\tname: item.name,\r\n\t\t\t\t\t\tdesc: item.desc,\r\n\t\t\t\t\t\ticon: item.icon,\r\n\t\t\t\t\t\tshortcut: item.shortcut,\r\n\t\t\t\t\t\tselected: item.selected,\r\n\t\t\t\t\t\tactive: item.active,\r\n\t\t\t\t\t\tnameIndexs: item.nameIndexs,\r\n\t\t\t\t\t\tdescIndexs: item.descIndexs,\r\n\t\t\t\t\t\tindex: ++index,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (i === group.length - 1 && gIndex < menuList.length - 1) {\r\n\t\t\t\t\t\trenderObj.seprator = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.active && this.index === -1) {\r\n\t\t\t\t\t\tthis.index = index;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.allMenuList.push(renderObj);\r\n\t\t\t\t\tthis.originMenuList.push(item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.groups++;\r\n\t\t\t});\r\n\t\t\tthis.setTreeHeight();\r\n\t\t\tthis.setStartLine(this.checkScrollTop(this.top));\r\n\t\t},\r\n\t\trender() {\r\n\t\t\tthis.renderList = this.allMenuList.slice(this.startLine - 1, this.startLine - 1 + this.maxVisibleLines);\r\n\t\t\tthis.renderList.forEach((item) => {\r\n\t\t\t\tif (item.desc && !item._desc) {\r\n\t\t\t\t\titem._desc = Util.getMatchHtml(item.desc, item.descIndexs || []);\r\n\t\t\t\t}\r\n\t\t\t\tif (item.nameIndexs && item.nameIndexs.length && !item._name) {\r\n\t\t\t\t\titem._name = Util.getMatchHtml(item.name, item.nameIndexs);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetMenuList(list) {\r\n\t\t\tthis.allMenuList = list;\r\n\t\t\tthis.originMenuList = list;\r\n\t\t\tthis.groups = 1;\r\n\t\t\tthis.setTreeHeight();\r\n\t\t\tthis.setStartLine(this.checkScrollTop(this.top));\r\n\t\t},\r\n\t\tscrollToIndex() {\r\n\t\t\tlet scrollTop = this.index * this.itemHeight - this.menuHeight / 2;\r\n\t\t\tif (scrollTop > this.contentHeight - this.menuHeight) {\r\n\t\t\t\tscrollTop = this.contentHeight - this.menuHeight;\r\n\t\t\t} else if (scrollTop < 0) {\r\n\t\t\t\tscrollTop = 0;\r\n\t\t\t}\r\n\t\t\tthis.setStartLine(scrollTop);\r\n\t\t},\r\n\t\tshowScrollBar() {\r\n\t\t\tthis.scrollVisible = true;\r\n\t\t},\r\n\t\thideScrollBar() {\r\n\t\t\tthis.scrollVisible = false;\r\n\t\t},\r\n\t\tcheckScrollTop(scrollTop) {\r\n\t\t\tif (scrollTop > this.contentHeight - this.menuHeight) {\r\n\t\t\t\tscrollTop = this.contentHeight - this.menuHeight;\r\n\t\t\t}\r\n\t\t\tscrollTop = scrollTop < 0 ? 0 : scrollTop;\r\n\t\t\treturn scrollTop;\r\n\t\t},\r\n\t\tsetTreeHeight() {\r\n\t\t\tthis.contentHeight = this.allMenuList.length * this.itemHeight + 11 * (this.groups - 1);\r\n\t\t\tthis.menuHeight = this.contentHeight;\r\n\t\t\tthis.menuHeight = this.menuHeight > 500 ? 500 : this.menuHeight;\r\n\t\t\tthis.maxVisibleLines = Math.ceil(500 / this.itemHeight) + 1;\r\n\t\t},\r\n\t\tsetStartLine(scrollTop) {\r\n\t\t\tthis.startLine = Math.floor(scrollTop / this.itemHeight) + 1;\r\n\t\t\tthis.scrollTop = scrollTop;\r\n\t\t\tthis.deltaTop = scrollTop % this.itemHeight;\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tsetCheckedByIndex(index) {\r\n\t\t\tif (index < 0) {\r\n\t\t\t\tindex = this.allMenuList.length - 1;\r\n\t\t\t} else if (index > this.allMenuList.length - 1) {\r\n\t\t\t\tindex = 0;\r\n\t\t\t}\r\n\t\t\tthis.clearChecked();\r\n\t\t\tthis.allMenuList[index].active = true;\r\n\t\t\tthis.index = index;\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tclearChecked() {\r\n\t\t\tthis.allMenuList.forEach((item) => {\r\n\t\t\t\titem.active = false;\r\n\t\t\t});\r\n\t\t},\r\n\t\tonClick(item) {\r\n\t\t\tif (item.disabled) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.setCheckedByIndex(item.index);\r\n\t\t\tthis.$emit('change', this.originMenuList[item.index]);\r\n\t\t},\r\n\t\tonHover(item) {\r\n\t\t\tif (this.hoverCheck && this.checkable) {\r\n\t\t\t\tthis.setCheckedByIndex(item.index);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonWheel(e) {\r\n\t\t\tthis.scrollDeltaY = e.deltaY;\r\n\t\t\tif (this.scrollDeltaY && !this.wheelTask) {\r\n\t\t\t\tthis.wheelTask = globalData.scheduler.addUiTask(() => {\r\n\t\t\t\t\tif (this.scrollDeltaY) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tlet scrollTop = this.scrollTop + this.scrollDeltaY;\r\n\t\t\t\t\t\t\tthis.onScroll(this.checkScrollTop(scrollTop));\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollDeltaY = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tglobalData.scheduler.removeUiTask(this.wheelTask);\r\n\t\t\t\t\t\tthis.wheelTask = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonScroll(e) {\r\n\t\t\tthis.setStartLine(e);\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Menu.vue?vue&type=template&id=41f82a20&\"\nimport script from \"./Menu.vue?vue&type=script&lang=js&\"\nexport * from \"./Menu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n\t<Menu :checkable=\"false\" :menuList=\"menuList\" :styles=\"menuStyle\" @change=\"onMenuChange\" ref=\"menu\" v-show=\"menuVisible\"></Menu>\r\n</template>\r\n<script>\r\nimport $ from 'jquery';\r\nimport Menu from './Menu';\r\nimport EventBus from '@/event';\r\nimport Util from '@/common/util';\r\n\r\nexport default {\r\n\tname: 'EditorMenu',\r\n\tcomponents: {\r\n\t\tMenu,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmenuList: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Reveal in File Explorer',\r\n\t\t\t\t\t\top: 'revealInFileExplorer',\r\n\t\t\t\t\t\tshortcut: 'ignore',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Format Document',\r\n\t\t\t\t\t\top: 'format',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Shift+H',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Cut',\r\n\t\t\t\t\t\top: 'cut',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+X',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Copy',\r\n\t\t\t\t\t\top: 'copy',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+C',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Paste',\r\n\t\t\t\t\t\top: 'paste',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+V',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t\tmenuVisible: false,\r\n\t\t\tmenuStyle: {},\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.initEventBus();\r\n\t},\r\n\tdestroyed() {\r\n\t\tthis.unbindEvent();\r\n\t},\r\n\tmethods: {\r\n\t\tinitEventBus() {\r\n\t\t\tthis.initEventBusFn = {};\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'close-menu',\r\n\t\t\t\t(this.initEventBusFn['close-menu'] = () => {\r\n\t\t\t\t\tthis.menuVisible = false;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t},\r\n\t\tunbindEvent() {\r\n\t\t\tEventBus.$off('close-menu', this.initEventBusFn['close-menu']);\r\n\t\t},\r\n\t\tshow(e) {\r\n\t\t\tthis.menuVisible = true;\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.menuStyle = Util.getMemnuPos(e, this.$refs.menu.$el, this.$parent.$refs.scroller);\r\n\t\t\t});\r\n\t\t},\r\n\t\tonMenuChange(item) {\r\n\t\t\tlet editor = this.$parent;\r\n\t\t\tswitch (item.op) {\r\n\t\t\t\tcase 'revealInFileExplorer':\r\n\t\t\t\t\tEventBus.$emit('reveal-in-file-explorer', editor.tabData.path);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'cut':\r\n\t\t\t\tcase 'copy':\r\n\t\t\t\t\tUtil.writeClipboard(this.myContext.getCopyText(menu.op === 'cut'));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'paste':\r\n\t\t\t\t\teditor.$refs.textarea.focus();\r\n\t\t\t\t\tUtil.readClipboard().then((text) => {\r\n\t\t\t\t\t\teditor.myContext.insertContent(text);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'format':\r\n\t\t\t\t\tEventBus.$emit('editor-format', editor.tabData.id);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.menuVisible = false;\r\n\t\t},\r\n\t},\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditorMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditorMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorMenu.vue?vue&type=template&id=526f5d64&\"\nimport script from \"./EditorMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"my-search\",on:{\"contextmenu\":[function($event){$event.preventDefault();},function($event){$event.stopPropagation();}],\"mousedown\":function($event){$event.stopPropagation();},\"selectstart\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"my-search-left active-click\",staticStyle:{\"border-radius\":\"0\"},attrs:{\"tabindex\":\"-1\"},on:{\"click\":_vm.showReplace}},[_c('span',{staticClass:\"iconfont\",class:{ 'icon-down1': _vm.replaceVisible, 'icon-right': !_vm.replaceVisible },staticStyle:{\"font-size\":\"14px\"},attrs:{\"title\":\"Toggle Replace mode\"}})]),_c('div',{staticStyle:{\"flex-grow\":\"1\"}},[_c('div',{staticClass:\"my-search-top\"},[_c('div',{staticClass:\"my-search-input\",class:{ 'my-active': _vm.input1Focus }},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],ref:\"input1\",style:({ height: _vm.input1Height + 'px' }),attrs:{\"spellcheck\":\"false\",\"type\":\"text\"},domProps:{\"value\":(_vm.text)},on:{\"blur\":function($event){_vm.input1Focus = false},\"focus\":function($event){_vm.input1Focus = true},\"input\":[function($event){if($event.target.composing)return;_vm.text=$event.target.value},_vm.onInput],\"keydown\":_vm.onKeydown}}),_c('span',{staticClass:\"my-search-suffix\",class:{ 'my-active': _vm.matchCase },attrs:{\"title\":\"Match Case(Alt+C)\"},on:{\"click\":_vm.changeCase}},[_vm._v(\"Aa\")]),_c('span',{staticClass:\"my-search-suffix iconfont icon-whole-word\",class:{ 'my-active': _vm.wholeWord },attrs:{\"title\":\"Match Whole Word(Alt+W)\"},on:{\"click\":_vm.changeWhole}})]),(_vm.count)?_c('div',[_c('span',[_vm._v(_vm._s(_vm.now))]),_c('span',[_vm._v(\" of \")]),_c('span',[_vm._v(_vm._s(_vm.count))])]):_c('span',{staticClass:\"no-result\",class:{ 'my-active': _vm.text }},[_vm._v(\"No results\")])]),(_vm.replaceVisible)?_c('div',{staticClass:\"my-search-bottom\",staticStyle:{\"margin-top\":\"5px\"}},[_c('div',{staticClass:\"my-search-input\",class:{ 'my-active': _vm.input2Focus }},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.replaceText),expression:\"replaceText\"}],ref:\"input2\",style:({ height: _vm.input2Height + 'px' }),attrs:{\"spellcheck\":\"false\",\"type\":\"text\"},domProps:{\"value\":(_vm.replaceText)},on:{\"blur\":function($event){_vm.input2Focus = false},\"focus\":function($event){_vm.input2Focus = true},\"keydown\":_vm.onKeyDown2,\"input\":function($event){if($event.target.composing)return;_vm.replaceText=$event.target.value}}})]),_c('span',{staticClass:\"iconfont icon-replace active-click\",class:{ 'enabled-color': _vm.count > 0, 'disabled-color': _vm.count == 0 },staticStyle:{\"margin-right\":\"5px\"},attrs:{\"tabindex\":\"-1\",\"title\":\"Replace(Enter)\"},on:{\"click\":_vm.replace}}),_c('span',{staticClass:\"iconfont icon-replace-all active-click\",class:{ 'enabled-color': _vm.count > 0, 'disabled-color': _vm.count == 0 },staticStyle:{\"margin-right\":\"5px\"},attrs:{\"tabindex\":\"-1\",\"title\":\"Replace All(Ctrl+Alt+Enter)\"},on:{\"click\":_vm.replaceAll}})]):_vm._e()]),_c('div',{staticClass:\"my-search-right\"},[_c('span',{staticClass:\"iconfont icon-up active-click\",class:{ 'enabled-color': _vm.count > 0, 'disabled-color': _vm.count == 0 },staticStyle:{\"margin-right\":\"5px\"},attrs:{\"tabindex\":\"-1\",\"title\":\"Previous Match(Shift Enter)\"},on:{\"blur\":function($event){_vm.preFocus = false},\"click\":_vm.searchPrev,\"focus\":function($event){_vm.preFocus = true}}}),_c('span',{staticClass:\"iconfont icon-down active-click\",class:{ 'enabled-color': _vm.count > 0, 'disabled-color': _vm.count == 0 },staticStyle:{\"margin-right\":\"5px\"},attrs:{\"tabindex\":\"-1\",\"title\":\"Next Match(Enter)\"},on:{\"blur\":function($event){_vm.nextFocus = false},\"click\":_vm.searchNext,\"focus\":function($event){_vm.nextFocus = true}}}),_c('span',{staticClass:\"iconfont icon-close active-click\",attrs:{\"title\":\"Close\"},on:{\"click\":_vm.close}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div @contextmenu.prevent @contextmenu.stop @mousedown.stop @selectstart.stop class=\"my-search\">\r\n\t\t<div @click=\"showReplace\" class=\"my-search-left active-click\" style=\"border-radius: 0\" tabindex=\"-1\">\r\n\t\t\t<span :class=\"{ 'icon-down1': replaceVisible, 'icon-right': !replaceVisible }\" class=\"iconfont\" style=\"font-size: 14px\" title=\"Toggle Replace mode\"></span>\r\n\t\t</div>\r\n\t\t<div style=\"flex-grow: 1\">\r\n\t\t\t<div class=\"my-search-top\">\r\n\t\t\t\t<div :class=\"{ 'my-active': input1Focus }\" class=\"my-search-input\">\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t:style=\"{ height: input1Height + 'px' }\"\r\n\t\t\t\t\t\t@blur=\"input1Focus = false\"\r\n\t\t\t\t\t\t@focus=\"input1Focus = true\"\r\n\t\t\t\t\t\t@input=\"onInput\"\r\n\t\t\t\t\t\t@keydown=\"onKeydown\"\r\n\t\t\t\t\t\tref=\"input1\"\r\n\t\t\t\t\t\tspellcheck=\"false\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tv-model=\"text\"\r\n\t\t\t\t\t></textarea>\r\n\t\t\t\t\t<span :class=\"{ 'my-active': matchCase }\" @click=\"changeCase\" class=\"my-search-suffix\" title=\"Match Case(Alt+C)\">Aa</span>\r\n\t\t\t\t\t<span :class=\"{ 'my-active': wholeWord }\" @click=\"changeWhole\" class=\"my-search-suffix iconfont icon-whole-word\" title=\"Match Whole Word(Alt+W)\"></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if=\"count\">\r\n\t\t\t\t\t<span>{{ now }}</span>\r\n\t\t\t\t\t<span>&nbsp;of&nbsp;</span>\r\n\t\t\t\t\t<span>{{ count }}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span :class=\"{ 'my-active': text }\" class=\"no-result\" v-else>No results</span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"my-search-bottom\" style=\"margin-top: 5px\" v-if=\"replaceVisible\">\r\n\t\t\t\t<div :class=\"{ 'my-active': input2Focus }\" class=\"my-search-input\">\r\n\t\t\t\t\t<textarea :style=\"{ height: input2Height + 'px' }\" @blur=\"input2Focus = false\" @focus=\"input2Focus = true\" @keydown=\"onKeyDown2\" ref=\"input2\" spellcheck=\"false\" type=\"text\" v-model=\"replaceText\"></textarea>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span\r\n\t\t\t\t\t:class=\"{ 'enabled-color': count > 0, 'disabled-color': count == 0 }\"\r\n\t\t\t\t\t@click=\"replace\"\r\n\t\t\t\t\tclass=\"iconfont icon-replace active-click\"\r\n\t\t\t\t\tstyle=\"margin-right: 5px\"\r\n\t\t\t\t\ttabindex=\"-1\"\r\n\t\t\t\t\ttitle=\"Replace(Enter)\"\r\n\t\t\t\t></span>\r\n\t\t\t\t<span\r\n\t\t\t\t\t:class=\"{ 'enabled-color': count > 0, 'disabled-color': count == 0 }\"\r\n\t\t\t\t\t@click=\"replaceAll\"\r\n\t\t\t\t\tclass=\"iconfont icon-replace-all active-click\"\r\n\t\t\t\t\tstyle=\"margin-right: 5px\"\r\n\t\t\t\t\ttabindex=\"-1\"\r\n\t\t\t\t\ttitle=\"Replace All(Ctrl+Alt+Enter)\"\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"my-search-right\">\r\n\t\t\t<span\r\n\t\t\t\t:class=\"{ 'enabled-color': count > 0, 'disabled-color': count == 0 }\"\r\n\t\t\t\t@blur=\"preFocus = false\"\r\n\t\t\t\t@click=\"searchPrev\"\r\n\t\t\t\t@focus=\"preFocus = true\"\r\n\t\t\t\tclass=\"iconfont icon-up active-click\"\r\n\t\t\t\tstyle=\"margin-right: 5px\"\r\n\t\t\t\ttabindex=\"-1\"\r\n\t\t\t\ttitle=\"Previous Match(Shift Enter)\"\r\n\t\t\t></span>\r\n\t\t\t<span\r\n\t\t\t\t:class=\"{ 'enabled-color': count > 0, 'disabled-color': count == 0 }\"\r\n\t\t\t\t@blur=\"nextFocus = false\"\r\n\t\t\t\t@click=\"searchNext\"\r\n\t\t\t\t@focus=\"nextFocus = true\"\r\n\t\t\t\tclass=\"iconfont icon-down active-click\"\r\n\t\t\t\tstyle=\"margin-right: 5px\"\r\n\t\t\t\ttabindex=\"-1\"\r\n\t\t\t\ttitle=\"Next Match(Enter)\"\r\n\t\t\t></span>\r\n\t\t\t<span @click=\"close\" class=\"iconfont icon-close active-click\" title=\"Close\"></span>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport $ from 'jquery';\r\nexport default {\r\n\tname: 'Search',\r\n\tprops: {\r\n\t\tnow: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 1,\r\n\t\t},\r\n\t\tcount: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0,\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttext: '',\r\n\t\t\treplaceText: '',\r\n\t\t\treplaceVisible: false,\r\n\t\t\twholeWord: false,\r\n\t\t\tmatchCase: false,\r\n\t\t\tsearchPrevActive: false,\r\n\t\t\tsearchNextActive: false,\r\n\t\t\tinput1Focus: false,\r\n\t\t\tinput2Focus: false,\r\n\t\t\tpreFocus: false,\r\n\t\t\tnextFocus: false,\r\n\t\t\tinput1Height: 30,\r\n\t\t\tinput2Height: 30,\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\ttext() {\r\n\t\t\tlet lines = this.text.split(/\\n/);\r\n\t\t\tthis.input1Height = lines.length * 20 + 10;\r\n\t\t},\r\n\t\treplaceText() {\r\n\t\t\tlet lines = this.replaceText.split(/\\n/);\r\n\t\t\tthis.input2Height = lines.length * 20 + 10;\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\t$(document).on(\r\n\t\t\t'keydown',\r\n\t\t\t(this.keydownFn = (e) => {\r\n\t\t\t\tif (e.keyCode === 13 || e.keyCode === 100) {\r\n\t\t\t\t\tif (this.preFocus) {\r\n\t\t\t\t\t\tthis.searchPrev();\r\n\t\t\t\t\t} else if (this.nextFocus) {\r\n\t\t\t\t\t\tthis.searchNext();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t},\r\n\tdestroyed() {\r\n\t\t$(document).unbind('keydown', this.keydownFn);\r\n\t},\r\n\tmethods: {\r\n\t\tinitData(obj) {\r\n\t\t\tfor (let key in obj) {\r\n\t\t\t\tthis[key] = obj[key];\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetData() {\r\n\t\t\treturn {\r\n\t\t\t\ttext: this.text,\r\n\t\t\t\twholeWord: this.wholeWord,\r\n\t\t\t\tmatchCase: this.matchCase,\r\n\t\t\t};\r\n\t\t},\r\n\t\tsearch() {\r\n\t\t\tlet searchId = this.search.id || 1;\r\n\t\t\tthis.search.id = searchId;\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tif (this.search.id !== searchId) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$emit('search', {\r\n\t\t\t\t\ttext: this.text,\r\n\t\t\t\t\tmatchCase: this.matchCase,\r\n\t\t\t\t\twholeWord: this.wholeWord,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tchangeCase() {\r\n\t\t\tthis.matchCase = !this.matchCase;\r\n\t\t\tthis.focus();\r\n\t\t\tthis.onInput();\r\n\t\t},\r\n\t\tchangeWhole() {\r\n\t\t\tthis.wholeWord = !this.wholeWord;\r\n\t\t\tthis.focus();\r\n\t\t\tthis.onInput();\r\n\t\t},\r\n\t\tshowReplace() {\r\n\t\t\tthis.replaceVisible = !this.replaceVisible;\r\n\t\t},\r\n\t\tsearchNext() {\r\n\t\t\tif (!this.count) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$emit('next');\r\n\t\t},\r\n\t\tsearchPrev() {\r\n\t\t\tif (!this.count) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$emit('prev');\r\n\t\t},\r\n\t\treplace() {\r\n\t\t\tif (!this.count) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$emit('replace', { text: this.replaceText });\r\n\t\t},\r\n\t\treplaceAll() {\r\n\t\t\tif (!this.count) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$emit('replaceAll', { text: this.replaceText });\r\n\t\t},\r\n\t\tclose() {\r\n\t\t\tthis.$emit('close');\r\n\t\t},\r\n\t\tfocus() {\r\n\t\t\tthis.$refs.input1.focus();\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\tthis.$refs.input1.focus();\r\n\t\t\t});\r\n\t\t},\r\n\t\tdirectBlur() {\r\n\t\t\tthis.searchPrevActive = false;\r\n\t\t\tthis.searchNextActive = false;\r\n\t\t},\r\n\t\tonKeydown(e) {\r\n\t\t\tif (e.keyCode === 13 || e.keyCode === 100) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.$emit('next');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonKeyDown2(e) {\r\n\t\t\tif (e.keyCode === 13 || e.keyCode === 100) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (this.count) {\r\n\t\t\t\t\tif (e.ctrlKey && e.altKey) {\r\n\t\t\t\t\t\tthis.replaceAll();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.replace();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonInput() {\r\n\t\t\tclearTimeout(this.searchTimer);\r\n\t\t\tthis.searchTimer = setTimeout(() => {\r\n\t\t\t\tthis.search();\r\n\t\t\t}, 100);\r\n\t\t},\r\n\t},\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=b9d91528&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"auto\",staticClass:\"my-auto my-shadow my-border my-scroll-overlay my-scroll-mini\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();},\"wheel\":function($event){$event.stopPropagation();}}},[_c('div',_vm._l((_vm.tipList),function(item){return _c('div',{staticClass:\"my-auto-item my-center-between\",class:{'my-active': item.active},on:{\"mousedown\":function($event){return _vm.onClick(item)}}},[_c('div',{staticClass:\"my-center-between\"},[_c('div',{staticClass:\"my-auto-icon my-center-center iconfont\",class:[item.icon]}),_c('div',{staticClass:\"my-auto-content\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm._html(item))}})])]),_c('div',{staticClass:\"my-auto-desc\"},[_vm._v(_vm._s(item.desc))])])}),0)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div :style=\"styles\" @mousedown.stop @wheel.stop class=\"my-auto my-shadow my-border my-scroll-overlay my-scroll-mini\" ref=\"auto\">\r\n\t\t<div>\r\n\t\t\t<div :class=\"{'my-active': item.active}\" @mousedown=\"onClick(item)\" class=\"my-auto-item my-center-between\" v-for=\"item in tipList\">\r\n\t\t\t\t<div class=\"my-center-between\">\r\n\t\t\t\t\t<div :class=\"[item.icon]\" class=\"my-auto-icon my-center-center iconfont\"></div>\r\n\t\t\t\t\t<div class=\"my-auto-content\">\r\n\t\t\t\t\t\t<span v-html=\"_html(item)\"></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"my-auto-desc\">{{item.desc}}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport Util from '@/common/util';\r\n\r\nexport default {\r\n\tname: 'AutoTip',\r\n\tprops: {\r\n\t\ttipList: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: [],\r\n\t\t},\r\n\t\tstyles: {\r\n\t\t\ttype: Object,\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tnowIndex: 0,\r\n\t\t\titemHeight: 25,\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t_html() {\r\n\t\t\treturn (item) => {\r\n\t\t\t\treturn Util.getMatchHtml(item.result, item.indexs);\r\n\t\t\t};\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\tnowIndex() {\r\n\t\t\tlet $auto = this.$refs.auto;\r\n\t\t\tlet height = (this.nowIndex + 1) * this.itemHeight;\r\n\t\t\tif ($auto && height > $auto.clientHeight + $auto.scrollTop) {\r\n\t\t\t\t$auto.scrollTop = height - $auto.clientHeight;\r\n\t\t\t} else if ($auto && height < $auto.scrollTop + this.itemHeight) {\r\n\t\t\t\t$auto.scrollTop = height - this.itemHeight;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tcreated() {},\r\n\tmethods: {\r\n\t\tonClick(item) {\r\n\t\t\tthis.$emit('change', item);\r\n\t\t},\r\n\t\tprev() {\r\n\t\t\tlet index = this.getActiveIndex();\r\n\t\t\tthis.tipList[index].active = false;\r\n\t\t\tindex = index - 1;\r\n\t\t\tindex = index < 0 ? this.tipList.length - 1 : index;\r\n\t\t\tthis.tipList[index].active = true;\r\n\t\t\tthis.nowIndex = index;\r\n\t\t},\r\n\t\tnext() {\r\n\t\t\tlet index = this.getActiveIndex();\r\n\t\t\tthis.tipList[index].active = false;\r\n\t\t\tindex = index + 1;\r\n\t\t\tindex = index > this.tipList.length - 1 ? 0 : index;\r\n\t\t\tthis.tipList[index].active = true;\r\n\t\t\tthis.nowIndex = index;\r\n\t\t},\r\n\t\tgetActiveIndex() {\r\n\t\t\tfor (let i = 0; i < this.tipList.length; i++) {\r\n\t\t\t\tif (this.tipList[i].active) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.icon-function {\r\n\tcolor: #a6e22e;\r\n}\r\n.icon-class {\r\n\tcolor: gold;\r\n}\r\n.icon-property {\r\n\tcolor: lightskyblue;\r\n}\r\n.icon-value {\r\n\tcolor: lightblue;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AutoTip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AutoTip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AutoTip.vue?vue&type=template&id=d75f5a9e&scoped=true&\"\nimport script from \"./AutoTip.vue?vue&type=script&lang=js&\"\nexport * from \"./AutoTip.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AutoTip.vue?vue&type=style&index=0&id=d75f5a9e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d75f5a9e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"my-tip\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"my-tip-content\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.content)}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div :style=\"styles\" @mousedown.stop class=\"my-tip\">\r\n\t\t<div class=\"my-tip-content\">\r\n\t\t\t<div v-html=\"content\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'Tip',\r\n    props: {\r\n        content: String,\r\n        styles: {\r\n            type: Object\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n        }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Tip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Tip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tip.vue?vue&type=template&id=3edf792c&\"\nimport script from \"./Tip.vue?vue&type=script&lang=js&\"\nexport * from \"./Tip.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"wrap\",staticClass:\"my-minimap\",on:{\"mousedown\":_vm.onMinimapDown}},[_c('canvas',{ref:\"leftDiffCanvas\",staticClass:\"my-minimap-canvas-left\",attrs:{\"height\":_vm.height,\"width\":_vm.leftWidth}}),_c('canvas',{ref:\"canvas\",staticClass:\"my-minimap-canvas-center\",attrs:{\"height\":_vm.height,\"width\":_vm.width}}),_c('canvas',{ref:\"rightDiffCanvas\",staticClass:\"my-minimap-canvas-right\",attrs:{\"height\":_vm.height,\"width\":_vm.rightWidth}}),_c('div',{ref:\"block\",staticClass:\"my-minimap-block\",style:({top: _vm.blockTop + 'px', height: _vm.blockHeight + 'px', opacity: _vm.blockClicked ? '0.8' : ''}),on:{\"mousedown\":_vm.onBlockMDown}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function () {\r\n\tlet cacheMap = {};\r\n\tlet renderedIdMap = {};\r\n\tlet dataObj = {};\r\n\tlet canvas = null;\r\n\tlet leftDiffCanvas = null;\r\n\tlet rightDiffCanvas = null;\r\n\tlet ctx = null;\r\n\tlet leftDiffCtx = null;\r\n\tlet rightDiffCtx = null;\r\n\tlet lines = null;\r\n\tlet singleLines = null;\r\n\tlet diffRanges = null;\r\n\tlet allDiffRanges = null;\r\n\tlet selectedData = null;\r\n\tlet allSelectedData = null;\r\n\tlet cursors = null;\r\n\tlet allCursors = null;\r\n\tlet cursorsImg = null;\r\n\tlet allCursorImg = null;\r\n\tlet canvasImgData = null;\r\n\tlet selectedImg = null;\r\n\tlet allSelectedImg = null;\r\n\tlet leftDiffCanvasImgData = null;\r\n\tlet rightDiffCanvasImgData = null;\r\n\r\n\tfunction drawLine({ top, lineObj }) {\r\n\t\tlet cache = cacheMap[lineObj.lineId];\r\n\t\tlet tokens = lineObj.tokens;\r\n\t\tif (compairCache(cache, lineObj.text, lineObj.preRuleId)) {\r\n\t\t\tfor (let i = 0; i < cache.imgData.data.length; i++) {\r\n\t\t\t\tcanvasImgData.data[canvasImgData.index++] = cache.imgData.data[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcacheMap[lineObj.lineId] = {\r\n\t\t\t\ttext: lineObj.text,\r\n\t\t\t\tpreRuleId: lineObj.preRuleId,\r\n\t\t\t\timgData: _createImageData()\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tfunction _createImageData() {\r\n\t\t\tlet dataWidth = dataObj.width * 4;\r\n\t\t\tlet color = getRgb(dataObj.colors['editor.foreground']);\r\n\t\t\tlet buffers = new Array(dataObj.charHight).fill(0);\r\n\t\t\tlet buffer = [];\r\n\t\t\tlet imgData = new ImageData(dataObj.width, dataObj.charHight);\r\n\t\t\tbuffers = buffers.map(() => {\r\n\t\t\t\tlet line = new Array(dataWidth).fill(0);\r\n\t\t\t\tline.index = 0;\r\n\t\t\t\treturn line;\r\n\t\t\t});\r\n\t\t\tif (tokens) {\r\n\t\t\t\t// 减少token数量\r\n\t\t\t\ttokens = getDrawTokens(tokens);\r\n\t\t\t\tfor (let i = 0; i < tokens.length; i++) {\r\n\t\t\t\t\tlet token = tokens[i];\r\n\t\t\t\t\tlet text = lineObj.text.slice(token.startIndex, token.endIndex);\r\n\t\t\t\t\ttext = getDrawText(text);\r\n\t\t\t\t\tcolor = getRgb(dataObj.colors['editor.foreground']);\r\n\t\t\t\t\tif (token.scopeId) {\r\n\t\t\t\t\t\tlet scope = dataObj.scopeIdMap[token.scopeId];\r\n\t\t\t\t\t\tif (scope && scope.settings && scope.settings.foreground) {\r\n\t\t\t\t\t\t\tcolor = getRgb(scope.settings.foreground);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_pushImgData({ buffers, text, color });\r\n\t\t\t\t\t// 退出无效渲染\r\n\t\t\t\t\tif (buffers[0].index >= dataWidth) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t_pushImgData({ buffers, text: getDrawText(lineObj.text), color });\r\n\t\t\t}\r\n\t\t\tbuffers.forEach(buf => {\r\n\t\t\t\tbuffer = buffer.concat(buf);\r\n\t\t\t});\r\n\t\t\tfor (let i = 0; i < imgData.data.length; i++) {\r\n\t\t\t\timgData.data[i] = buffer[i];\r\n\t\t\t\tcanvasImgData.data[canvasImgData.index++] = imgData.data[i];\r\n\t\t\t}\r\n\t\t\treturn imgData;\r\n\t\t}\r\n\r\n\t\tfunction _pushImgData({ buffers, text, color }) {\r\n\t\t\tlet dataWidth = dataObj.width * 4;\r\n\t\t\tfor (let i = 0; i < text.length; i++) {\r\n\t\t\t\tif (text[i] != ' ') {\r\n\t\t\t\t\tlet imgData = getCharImgData(text[i], color);\r\n\t\t\t\t\tfor (let h = 0; h < imgData.height; h++) {\r\n\t\t\t\t\t\tfor (let w = 0; w < imgData.width; w++) {\r\n\t\t\t\t\t\t\tlet pixl = imgData[h][w];\r\n\t\t\t\t\t\t\tlet buffer = buffers[h];\r\n\t\t\t\t\t\t\tif (buffer.index <= dataWidth - 4) {\r\n\t\t\t\t\t\t\t\tbuffer[buffer.index] = pixl[0];\r\n\t\t\t\t\t\t\t\tbuffer[buffer.index + 1] = pixl[1];\r\n\t\t\t\t\t\t\t\tbuffer[buffer.index + 2] = pixl[2];\r\n\t\t\t\t\t\t\t\tbuffer[buffer.index + 3] = pixl[3];\r\n\t\t\t\t\t\t\t\tbuffer.index += 4;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 空格占一个像素点\r\n\t\t\t\t\tbuffers.forEach(buffer => {\r\n\t\t\t\t\t\tbuffer.index += 4;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (buffers[0].index >= dataWidth) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction drawLines(lines) {\r\n\t\tcanvasImgData.index = 0;\r\n\t\tctx.clearRect(0, 0, dataObj.width, dataObj.height);\r\n\t\tlines.forEach(line => {\r\n\t\t\tdrawLine(line);\r\n\t\t});\r\n\t\tfor (let i = canvasImgData.index; i < canvasImgData.data.length; i++) {\r\n\t\t\tcanvasImgData.data[i] = 0;\r\n\t\t}\r\n\t\tctx.putImageData(canvasImgData, 0, 0);\r\n\t\t// 在现有的画布内容后面绘制新的图形\r\n\t\tctx.globalCompositeOperation = 'destination-over';\r\n\t\tcursorsImg && ctx.drawImage(cursorsImg, 0, 0);\r\n\t\tselectedImg && ctx.drawImage(selectedImg, 0, 0);\r\n\t\tcacheCanvas();\r\n\t}\r\n\r\n\tfunction drawSingleLiens(singleLines) {\r\n\t\tctx.clearRect(0, 0, dataObj.width, dataObj.height);\r\n\t\tfor (let key in singleLines) {\r\n\t\t\tlet obj = singleLines[key];\r\n\t\t\tcanvasImgData.index = Math.round(dataObj.width * obj.top) * 4;\r\n\t\t\tdrawLine(singleLines[key]);\r\n\t\t}\r\n\t\tctx.putImageData(canvasImgData, 0, 0);\r\n\t\tcursorsImg && ctx.drawImage(cursorsImg, 0, 0);\r\n\t\tselectedImg && ctx.drawImage(selectedImg, 0, 0);\r\n\t}\r\n\r\n\tfunction drawLeftDiff() {\r\n\t\tleftDiffCanvasImgData.data.fill(0);\r\n\t\tleftDiffCtx.clearRect(0, 0, dataObj.leftWidth, dataObj.height);\r\n\t\tif (diffRanges.length) {\r\n\t\t\tdiffRanges.forEach(item => {\r\n\t\t\t\tlet rgb = getDiffColor(item.type);\r\n\t\t\t\tif (item.type === 'D') {\r\n\t\t\t\t\tputRectPixl({ imgData: leftDiffCanvasImgData, left: 2, top: item.top, width: 4, height: item.height, rgb });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tputRectPixl({ imgData: leftDiffCanvasImgData, left: 3, top: item.top, width: 2, height: item.height, rgb });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tleftDiffCtx.putImageData(leftDiffCanvasImgData, 0, 0);\r\n\t\t}\r\n\t\tdiffRanges = null;\r\n\t}\r\n\r\n\tfunction drawRightDiff() {\r\n\t\trightDiffCanvasImgData.data.fill(0);\r\n\t\trightDiffCtx.clearRect(0, 0, dataObj.rightWidth, dataObj.height);\r\n\t\tif (allDiffRanges) {\r\n\t\t\tallDiffRanges.forEach(item => {\r\n\t\t\t\tlet rgb = getDiffColor(item.type);\r\n\t\t\t\tputRectPixl({ imgData: rightDiffCanvasImgData, left: 0, top: item.top, width: 5, height: item.height, rgb });\r\n\t\t\t});\r\n\t\t\trightDiffCtx.putImageData(rightDiffCanvasImgData, 0, 0);\r\n\t\t\tallCursorImg && rightDiffCtx.drawImage(allCursorImg, 0, 0);\r\n\t\t\tallSelectedImg && rightDiffCtx.drawImage(allSelectedImg, 0, 0);\r\n\t\t}\r\n\t\tallDiffRanges = null;\r\n\t}\r\n\r\n\tfunction drawSelectedBg() {\r\n\t\tlet results = selectedData.results.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\trgb: getRgb(dataObj.colors['minimap.selectionHighlight']),\r\n\t\t\t\ttop: item\r\n\t\t\t};\r\n\t\t});\r\n\t\tlet fResults = selectedData.fResults.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\trgb: getRgb(dataObj.colors['minimap.findMatchHighlight']),\r\n\t\t\t\ttop: item\r\n\t\t\t};\r\n\t\t});\r\n\t\tresults = results.concat(fResults);\r\n\t\tif (results.length) {\r\n\t\t\tlet slectedImgData = new ImageData(dataObj.width, dataObj.height);\r\n\t\t\tfor (let i = 0; i < results.length; i++) {\r\n\t\t\t\tlet item = results[i];\r\n\t\t\t\tputRectPixl({ imgData: slectedImgData, left: 0, top: item.top, width: dataObj.width, height: dataObj.charHight, rgb: item.rgb });\r\n\t\t\t}\r\n\t\t\tcreateImageBitmap(slectedImgData).then(img => {\r\n\t\t\t\tctx.clearRect(0, 0, dataObj.width, dataObj.height);\r\n\t\t\t\tctx.putImageData(canvasImgData, 0, 0);\r\n\t\t\t\tctx.drawImage(img, 0, 0);\r\n\t\t\t\tcursorsImg && ctx.drawImage(cursorsImg, 0, 0);\r\n\t\t\t\tselectedImg = img;\r\n\t\t\t});\r\n\t\t} else if (selectedImg) {\r\n\t\t\tctx.clearRect(0, 0, dataObj.width, dataObj.height);\r\n\t\t\tctx.putImageData(canvasImgData, 0, 0);\r\n\t\t\tcursorsImg && ctx.drawImage(cursorsImg, 0, 0);\r\n\t\t\tselectedImg = null;\r\n\t\t}\r\n\t\tselectedData = null;\r\n\t}\r\n\r\n\tfunction drawAllSelected() {\r\n\t\tif (allSelectedData.length) {\r\n\t\t\tlet rgb = getRgb(dataObj.colors['minimap.findMatchHighlight']);\r\n\t\t\tlet imgData = new ImageData(dataObj.width, dataObj.height);\r\n\t\t\tfor (let i = 0; i < allSelectedData.length; i++) {\r\n\t\t\t\tputRectPixl({ imgData: imgData, left: 5, top: allSelectedData[i], width: 5, height: dataObj.charHight * 2, rgb });\r\n\t\t\t}\r\n\t\t\tcreateImageBitmap(imgData).then(img => {\r\n\t\t\t\trightDiffCtx.clearRect(0, 0, dataObj.rightWidth, dataObj.height);\r\n\t\t\t\trightDiffCtx.putImageData(rightDiffCanvasImgData, 0, 0);\r\n\t\t\t\trightDiffCtx.drawImage(img, 0, 0);\r\n\t\t\t\tallCursorImg && rightDiffCtx.drawImage(allCursorImg, 0, 0);\r\n\t\t\t\tallSelectedImg = img;\r\n\t\t\t});\r\n\t\t} else if (allSelectedImg) {\r\n\t\t\trightDiffCtx.clearRect(0, 0, dataObj.rightWidth, dataObj.height);\r\n\t\t\trightDiffCtx.putImageData(rightDiffCanvasImgData, 0, 0);\r\n\t\t\tallCursorImg && rightDiffCtx.drawImage(allCursorImg, 0, 0);\r\n\t\t\tallSelectedImg = null;\r\n\t\t}\r\n\t\tallSelectedData = null;\r\n\t}\r\n\r\n\tfunction drawCursor() {\r\n\t\tlet rgb = getCursorColor();\r\n\t\tlet imgData = new ImageData(dataObj.width, dataObj.height);\r\n\t\tif (rgb[3]) {\r\n\t\t\trgb = rgb.slice();\r\n\t\t\trgb[3] += Math.floor(255 * 0.4);\r\n\t\t\trgb[3] = rgb[3] > 255 ? 255 : rgb[3];\r\n\t\t}\r\n\t\tfor (let i = 0; i < cursors.length; i++) {\r\n\t\t\tputRectPixl({ imgData: imgData, left: 0, top: cursors[i], width: dataObj.width, height: dataObj.charHight, rgb });\r\n\t\t}\r\n\t\tcreateImageBitmap(imgData).then(img => {\r\n\t\t\tctx.clearRect(0, 0, dataObj.width, dataObj.height);\r\n\t\t\tctx.putImageData(canvasImgData, 0, 0);\r\n\t\t\tselectedImg && ctx.drawImage(selectedImg, 0, 0);\r\n\t\t\tctx.drawImage(img, 0, 0);\r\n\t\t\tcursorsImg = img;\r\n\t\t});\r\n\t\tcursors = null;\r\n\t}\r\n\r\n\tfunction drawAllCursor() {\r\n\t\tlet rgb = getCursorColor(true);\r\n\t\tlet imgData = new ImageData(dataObj.width, dataObj.height);\r\n\t\tfor (let i = 0; i < allCursors.length; i++) {\r\n\t\t\tputRectPixl({ imgData: imgData, left: 0, top: allCursors[i], width: dataObj.width, height: dataObj.charHight, rgb });\r\n\t\t}\r\n\t\tcreateImageBitmap(imgData).then(img => {\r\n\t\t\trightDiffCtx.clearRect(0, 0, dataObj.rightWidth, dataObj.height);\r\n\t\t\trightDiffCtx.putImageData(rightDiffCanvasImgData, 0, 0);\r\n\t\t\trightDiffCtx.drawImage(img, 0, 0);\r\n\t\t\tallSelectedImg && rightDiffCtx.drawImage(allSelectedImg, 0, 0);\r\n\t\t\tallCursorImg = img;\r\n\t\t});\r\n\t\tallCursors = null;\r\n\t}\r\n\r\n\tfunction putRectPixl({ imgData, left, top, width, height, rgb }) {\r\n\t\tlet index = (imgData.width * top + left) * 4;\r\n\t\tlet originIndex = index;\r\n\t\tfor (let h = 0; h < height; h++) {\r\n\t\t\tfor (let w = 0; w < width; w++) {\r\n\t\t\t\t_putPixl(index, rgb);\r\n\t\t\t\tindex += 4;\r\n\t\t\t}\r\n\t\t\toriginIndex += imgData.width * 4;\r\n\t\t\tindex = originIndex;\r\n\t\t}\r\n\r\n\t\tfunction _putPixl(index, rgb) {\r\n\t\t\tif (index < imgData.data.length) {\r\n\t\t\t\timgData.data[index] = rgb[0];\r\n\t\t\t\timgData.data[index + 1] = rgb[1];\r\n\t\t\t\timgData.data[index + 2] = rgb[2];\r\n\t\t\t\timgData.data[index + 3] = rgb[3] || 255;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 定时更新\r\n\tfunction render() {\r\n\t\tcancelAnimationFrame(render.timer);\r\n\t\trender.timer = requestAnimationFrame(() => {\r\n\t\t\ttry {\r\n\t\t\t\tif (dataObj.width && dataObj.height && dataObj.charHight && ctx) {\r\n\t\t\t\t\tif (lines) {\r\n\t\t\t\t\t\tdrawLines(lines);\r\n\t\t\t\t\t\tlines = null;\r\n\t\t\t\t\t} else if (singleLines) {\r\n\t\t\t\t\t\tdrawSingleLiens(singleLines);\r\n\t\t\t\t\t\tsingleLines = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cursors) {\r\n\t\t\t\t\t\tdrawCursor();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (allCursors) {\r\n\t\t\t\t\t\tdrawAllCursor();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (selectedData) {\r\n\t\t\t\t\t\tdrawSelectedBg();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (allSelectedData) {\r\n\t\t\t\t\t\tdrawAllSelected();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (diffRanges) {\r\n\t\t\t\t\t\tdrawLeftDiff();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (allDiffRanges) {\r\n\t\t\t\t\t\tdrawRightDiff();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction cacheLineObj(item) {\r\n\t\tif (item) {\r\n\t\t\trenderedIdMap[item.lineObj.lineId] = item;\r\n\t\t} else {\r\n\t\t\trenderedIdMap = {};\r\n\t\t\tlines.forEach(item => {\r\n\t\t\t\trenderedIdMap[item.lineObj.lineId] = item;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction cacheCanvas() {\r\n\t\tlet obj = {};\r\n\t\tlines.forEach(item => {\r\n\t\t\tobj[item.lineObj.lineId] = cacheMap[item.lineObj.lineId];\r\n\t\t});\r\n\t\tcacheMap = obj;\r\n\t}\r\n\r\n\tfunction compairCache(cache, text, preRuleId) {\r\n\t\tif (cache && cache.text === text && cache.preRuleId === preRuleId) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initData(data) {\r\n\t\tif (data.canvas) {\r\n\t\t\tcanvas = data.canvas;\r\n\t\t\tctx = canvas.getContext('2d');\r\n\t\t}\r\n\t\tif (data.leftDiffCanvas) {\r\n\t\t\tleftDiffCanvas = data.leftDiffCanvas;\r\n\t\t\tleftDiffCtx = leftDiffCanvas.getContext('2d');\r\n\t\t}\r\n\t\tif (data.rightDiffCanvas) {\r\n\t\t\trightDiffCanvas = data.rightDiffCanvas;\r\n\t\t\trightDiffCtx = rightDiffCanvas.getContext('2d');\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setData(data) {\r\n\t\tif (data.height !== undefined && data.height !== dataObj.height) {\r\n\t\t\tcanvas.height = data.height;\r\n\t\t\tleftDiffCanvas.height = data.height;\r\n\t\t\trightDiffCanvas.height = data.height;\r\n\t\t}\r\n\t\tif (data.width !== undefined && data.width !== dataObj.width) {\r\n\t\t\tcanvas.width = data.width;\r\n\t\t}\r\n\t\tif (data.leftWidth !== undefined && data.leftWidth !== dataObj.leftWidth) {\r\n\t\t\tleftDiffCanvas.width = data.leftWidth;\r\n\t\t}\r\n\t\tif (data.rightWidth !== undefined && data.rightWidth !== dataObj.rightWidth) {\r\n\t\t\trightDiffCanvas.width = data.rightWidth;\r\n\t\t}\r\n\t\tObject.assign(dataObj, data);\r\n\t\t_clearCache();\r\n\r\n\t\tfunction _clearCache() {\r\n\t\t\t// 清空数据\r\n\t\t\tcacheMap = {};\r\n\t\t\trenderedIdMap = {};\r\n\t\t\tlines = null;\r\n\t\t\tsingleLines = null;\r\n\t\t\tif (dataObj.width && dataObj.height) {\r\n\t\t\t\tcanvasImgData = new ImageData(dataObj.width, dataObj.height);\r\n\t\t\t}\r\n\t\t\tif (dataObj.leftWidth && dataObj.height) {\r\n\t\t\t\tleftDiffCanvasImgData = new ImageData(dataObj.leftWidth, dataObj.height);\r\n\t\t\t}\r\n\t\t\tif (dataObj.rightWidth && dataObj.height) {\r\n\t\t\t\trightDiffCanvasImgData = new ImageData(dataObj.rightWidth, dataObj.height);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setFillStyle(ctx, fillStyle) {\r\n\t\tif (ctx.fillStyle !== fillStyle) {\r\n\t\t\tctx.fillStyle = fillStyle;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getLineObj({ lineId, lineObj }) {\r\n\t\tif (lineId) {\r\n\t\t\tlineObj = renderedIdMap[lineId].lineObj;\r\n\t\t} else {\r\n\t\t\trenderedIdMap[lineObj.lineId] = lineObj;\r\n\t\t}\r\n\t\treturn lineObj;\r\n\t}\r\n\r\n\tfunction getDrawText(text) {\r\n\t\ttext = text.replace(/\\t/g, dataObj.space);\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction getDrawTokens(tokens) {\r\n\t\tlet htmlTokens = [];\r\n\t\tlet preToken = null;\r\n\t\tfor (let i = 0; i < tokens.length; i++) {\r\n\t\t\tlet item = tokens[i];\r\n\t\t\tlet scopeId = item.scopeId;\r\n\t\t\tif (preToken && _compair(preToken.scopeId, scopeId)) {\r\n\t\t\t\tpreToken.endIndex = item.endIndex;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tpreToken = {\r\n\t\t\t\tscopeId: scopeId,\r\n\t\t\t\tstartIndex: item.startIndex,\r\n\t\t\t\tendIndex: item.endIndex\r\n\t\t\t};\r\n\t\t\thtmlTokens.push(preToken);\r\n\t\t}\r\n\t\treturn htmlTokens;\r\n\r\n\t\tfunction _compair(scope1, scope2) {\r\n\t\t\tscope1 = dataObj.scopeIdMap[scope1];\r\n\t\t\tscope2 = dataObj.scopeIdMap[scope2];\r\n\t\t\tscope1 = (scope1 && scope1.settingsStr) || '';\r\n\t\t\tscope2 = (scope2 && scope2.settingsStr) || '';\r\n\t\t\treturn scope1 === scope2;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getCharImgData(char, rgb) {\r\n\t\tlet data = getCharImgData[char];\r\n\t\tif (!getCharImgData[char]) {\r\n\t\t\tlet offscreen = new OffscreenCanvas(dataObj.charHight, dataObj.charHight);\r\n\t\t\tlet offCtx = offscreen.getContext('2d');\r\n\t\t\tlet width = 1;\r\n\t\t\toffCtx.font = `bold ${dataObj.charHight}px Consolas`;\r\n\t\t\toffCtx.textBaseline = 'top';\r\n\t\t\toffCtx.fillText(char, 0, 0);\r\n\t\t\tdata = offCtx.getImageData(0, 0, offscreen.width, offscreen.height).data;\r\n\t\t\t// 获取字符真实宽度\r\n\t\t\t// for (let h = 0; h < dataObj.charHight; h++) {\r\n\t\t\t// \tfor (let w = 0; w < dataObj.charHight; w++) {\r\n\t\t\t// \t\tlet index = (h * dataObj.charHight + w) * 4;\r\n\t\t\t// \t\tif (data[index + 3] !== 0) {\r\n\t\t\t// \t\t\twidth = Math.max(width, w + 1);\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t\t// 截取字符像素\r\n\t\t\tlet arr = [];\r\n\t\t\tfor (let h = 0; h < dataObj.charHight; h++) {\r\n\t\t\t\tlet line = new Array(width).fill(0).map(() => {\r\n\t\t\t\t\treturn [0, 0, 0, 0];\r\n\t\t\t\t});\r\n\t\t\t\tfor (let w = 0; w < width; w++) {\r\n\t\t\t\t\tlet index = (h * dataObj.charHight + w) * 4;\r\n\t\t\t\t\tif (data[index + 3] !== 0) {\r\n\t\t\t\t\t\t// 增加40%的不透明度\r\n\t\t\t\t\t\tdata[index + 3] += Math.floor(255 * 0.4);\r\n\t\t\t\t\t\tdata[index + 3] = data[index + 3] > 255 ? 255 : data[index + 3];\r\n\t\t\t\t\t\tline[w] = [...data.slice(index, index + 4)];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tarr.push(line);\r\n\t\t\t}\r\n\t\t\tdata = arr;\r\n\t\t\tdata.width = width;\r\n\t\t\tdata.height = dataObj.charHight;\r\n\t\t\tgetCharImgData[char] = data;\r\n\t\t}\r\n\t\tfor (let h = 0; h < data.height; h++) {\r\n\t\t\tfor (let w = 0; w < data.width; w++) {\r\n\t\t\t\tlet pixl = data[h][w];\r\n\t\t\t\tpixl[0] = rgb[0];\r\n\t\t\t\tpixl[1] = rgb[1];\r\n\t\t\t\tpixl[2] = rgb[2];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn data;\r\n\t}\r\n\r\n\tfunction getRgb(color) {\r\n\t\tif (!getRgb[color]) {\r\n\t\t\tlet rgb = [];\r\n\t\t\tfor (let i = 1; i <= color.length - 2; i += 2) {\r\n\t\t\t\trgb.push(Number('0x' + color[i] + color[i + 1]));\r\n\t\t\t}\r\n\t\t\tgetRgb[color] = rgb;\r\n\t\t}\r\n\t\treturn getRgb[color];\r\n\t}\r\n\r\n\tfunction getDiffColor(type) {\r\n\t\tlet color = dataObj.colors['editor.foreground'];\r\n\t\tswitch (type) {\r\n\t\t\tcase 'A':\r\n\t\t\t\tcolor = dataObj.colors['gitDecoration.addedResourceForeground'];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'M':\r\n\t\t\t\tcolor = dataObj.colors['gitDecoration.modifiedResourceForeground'];\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'D':\r\n\t\t\t\tcolor = dataObj.colors['gitDecoration.deletedResourceForeground'];\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn getRgb(color);\r\n\t}\r\n\r\n\tfunction getCursorColor(useTextColor) {\r\n\t\tlet rgb = dataObj.colors['editor.lineHighlightBackground'];\r\n\t\tif (useTextColor) {\r\n\t\t\trgb = dataObj.colors['editor.foreground'];\r\n\t\t}\r\n\t\tif (rgb !== 'transparent') {\r\n\t\t\trgb = getRgb(rgb);\r\n\t\t} else {\r\n\t\t\trgb = getRgb(dataObj.colors['editor.lineHighlightBorder']);\r\n\t\t}\r\n\t\treturn rgb;\r\n\t}\r\n\r\n\tself.onmessage = function (e) {\r\n\t\tlet data = e.data;\r\n\t\tlet event = data.event;\r\n\t\tdata = data.data;\r\n\t\tswitch (event) {\r\n\t\t\tcase 'init':\r\n\t\t\t\tinitData(data);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'set-data':\r\n\t\t\t\tsetData(data);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'render-line':\r\n\t\t\t\tlet line = data;\r\n\t\t\t\tlet lineObj = getLineObj(line);\r\n\t\t\t\tline.lineObj = lineObj;\r\n\t\t\t\tsingleLines = singleLines || {};\r\n\t\t\t\tsingleLines[lineObj.lineId] = line;\r\n\t\t\t\tcacheLineObj(line);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'render':\r\n\t\t\t\tlines = data;\r\n\t\t\t\tlines.map(item => {\r\n\t\t\t\t\titem.lineObj = getLineObj(item);\r\n\t\t\t\t});\r\n\t\t\t\tcacheLineObj();\r\n\t\t\t\tsingleLines = null;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'render-diff':\r\n\t\t\t\tdiffRanges = data;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'render-diff-all':\r\n\t\t\t\tallDiffRanges = data;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'render-cursor':\r\n\t\t\t\tcursors = data;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'render-cursor-all':\r\n\t\t\t\tallCursors = data;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'render-selected-bg':\r\n\t\t\t\tselectedData = data;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'render-selected-all':\r\n\t\t\t\tallSelectedData = data;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\trender();\r\n\t};\r\n}\r\n","<!--\n * @Author: lisong\n * @Date: 2022-11-12 13:15:02\n * @Description: \n-->\n<template>\n\t<div @mousedown=\"onMinimapDown\" class=\"my-minimap\" ref=\"wrap\">\n\t\t<canvas :height=\"height\" :width=\"leftWidth\" class=\"my-minimap-canvas-left\" ref=\"leftDiffCanvas\"></canvas>\n\t\t<canvas :height=\"height\" :width=\"width\" class=\"my-minimap-canvas-center\" ref=\"canvas\"></canvas>\n\t\t<canvas :height=\"height\" :width=\"rightWidth\" class=\"my-minimap-canvas-right\" ref=\"rightDiffCanvas\"></canvas>\n\t\t<div :style=\"{top: blockTop + 'px', height: blockHeight + 'px', opacity: blockClicked ? '0.8' : ''}\" @mousedown=\"onBlockMDown\" class=\"my-minimap-block\" ref=\"block\"></div>\n\t</div>\n</template>\n<script>\nimport EventBus from '@/event';\nimport globalData from '@/data/globalData';\nimport $ from 'jquery';\nimport Util from '@/common/util';\nimport minimapWorker from '@/work/minimap';\n\nconst path = window.require('path');\n\nexport default {\n\tname: 'Minimap',\n\tcomponents: {},\n\tprops: {\n\t\tcontentHeight: Number,\n\t\tscrollTop: Number,\n\t\tnowLine: Number,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tstartLine: 1,\n\t\t\tmaxVisibleLines: 1,\n\t\t\tcanvasHeight: 0,\n\t\t\twidth: 0,\n\t\t\tleftWidth: 8,\n\t\t\trightWidth: 14,\n\t\t\theight: 0,\n\t\t\tblockHeight: 0,\n\t\t\tscale: 0.1,\n\t\t\ttop: 0,\n\t\t\tblockTop: 0,\n\t\t\tblockClicked: false,\n\t\t};\n\t},\n\twatch: {\n\t\tscrollTop() {\n\t\t\tthis.setStartLine();\n\t\t},\n\t\tcontentHeight() {\n\t\t\tthis.setStartLine();\n\t\t},\n\t\tnowLine() {\n\t\t\tthis.setTop();\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.worker = Util.createWorker(minimapWorker);\n\t\tthis.renderedIdMap = {};\n\t},\n\tmounted() {\n\t\tlet offscreen = this.$refs.canvas.transferControlToOffscreen();\n\t\tlet leftOffscreen = this.$refs.leftDiffCanvas.transferControlToOffscreen();\n\t\tlet rightOffscreen = this.$refs.rightDiffCanvas.transferControlToOffscreen();\n\t\tthis.worker.postMessage(\n\t\t\t{\n\t\t\t\tevent: 'init',\n\t\t\t\tdata: {\n\t\t\t\t\tcanvas: offscreen,\n\t\t\t\t\tleftDiffCanvas: leftOffscreen,\n\t\t\t\t\trightDiffCanvas: rightOffscreen,\n\t\t\t\t},\n\t\t\t},\n\t\t\t[offscreen, leftOffscreen, rightOffscreen]\n\t\t);\n\t\tthis.setSize();\n\t\tthis.initWorkerData('theme');\n\t\tthis.initEvent();\n\t},\n\tdestroyed() {\n\t\tthis.worker.terminate();\n\t\tthis.unbindEvent();\n\t\tclearTimeout(this.renderTimer);\n\t\tglobalData.scheduler.removeUiTask(this.moveTask);\n\t},\n\tmethods: {\n\t\tinitWorkerData(type) {\n\t\t\tlet data = {};\n\t\t\tif (type === 'size' || !type) {\n\t\t\t\tObject.assign(data, {\n\t\t\t\t\tcharHight: this.$parent.charObj.charHight * this.scale,\n\t\t\t\t\tspace: this.$parent.space,\n\t\t\t\t\twidth: this.width,\n\t\t\t\t\theight: this.height,\n\t\t\t\t\tleftWidth: this.leftWidth,\n\t\t\t\t\trightWidth: this.rightWidth,\n\t\t\t\t\tscale: this.scale,\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (type === 'theme' || !type) {\n\t\t\t\tthis.preCursorResult = null;\n\t\t\t\tthis.preAllCursorResult = null;\n\t\t\t\tthis.preAllSearchResult = null;\n\t\t\t\tObject.assign(data, {\n\t\t\t\t\tcolors: globalData.colors,\n\t\t\t\t\tscopeIdMap: globalData.scopeIdMap,\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.renderedIdMap = {};\n\t\t\tthis.worker.postMessage({\n\t\t\t\tevent: 'set-data',\n\t\t\t\tdata: data,\n\t\t\t});\n\t\t},\n\t\tinitEvent() {\n\t\t\tthis.initEvent.fn1 = (e) => {\n\t\t\t\tthis.$parent.active && this.onDocumentMmove(e);\n\t\t\t};\n\t\t\tthis.initEvent.fn2 = (e) => {\n\t\t\t\tthis.$parent.active && this.onDocumentMouseUp(e);\n\t\t\t};\n\t\t\t$(document).on('mousemove', this.initEvent.fn1);\n\t\t\t$(document).on('mouseup', this.initEvent.fn2);\n\t\t\tthis.initResizeEvent();\n\t\t\tthis.initEventBus();\n\t\t},\n\t\tinitEventBus() {\n\t\t\tEventBus.$on(\n\t\t\t\t'render-line',\n\t\t\t\t(this.initEventBus.fn1 = (data) => {\n\t\t\t\t\tif (this.$parent.editorId === data.editorId) {\n\t\t\t\t\t\tthis.renderLine(data.lineId);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\tinitResizeEvent() {\n\t\t\tconst resizeObserver = new ResizeObserver((entries) => {\n\t\t\t\tif (this.$refs.wrap && this.$refs.wrap.clientHeight) {\n\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\tthis.setSize();\n\t\t\t\t\t\tthis.setStartLine();\n\t\t\t\t\t\tthis.render();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tresizeObserver.observe(this.$refs.wrap);\n\t\t},\n\t\tunbindEvent() {\n\t\t\t$(document).unbind('mousemove', this.initEvent.fn1);\n\t\t\t$(document).unbind('mouseup', this.initEvent.fn2);\n\t\t\tEventBus.$off('render-line', this.initEventBus.fn1);\n\t\t},\n\t\tsetSize() {\n\t\t\tthis.width = this.$refs.wrap.clientWidth - 22;\n\t\t\tthis.height = this.$refs.wrap.clientHeight;\n\t\t\tthis.width = this.width < 0 ? 0 : this.width;\n\t\t\tthis.height = this.height < 0 ? 0 : this.height;\n\t\t\tthis.blockHeight = this.height * this.scale;\n\t\t\tthis.canvasHeight = this.height / this.scale;\n\t\t\tthis.maxVisibleLines = Math.ceil(this.canvasHeight / this.$parent.charObj.charHight) + 1;\n\t\t\tthis.initWorkerData('size');\n\t\t},\n\t\tsetStartLine() {\n\t\t\tlet maxScrollTop1 = this.contentHeight - this.canvasHeight;\n\t\t\tlet maxScrollTop2 = this.contentHeight - this.height;\n\t\t\tlet scrollTop = 0;\n\t\t\tmaxScrollTop1 = maxScrollTop1 < 0 ? 0 : maxScrollTop1;\n\t\t\tscrollTop = maxScrollTop2 ? this.scrollTop * (maxScrollTop1 / maxScrollTop2) : 0;\n\t\t\tscrollTop = scrollTop > maxScrollTop1 ? maxScrollTop1 : scrollTop;\n\t\t\tthis.startLine = Math.floor(scrollTop / this.$parent.charObj.charHight);\n\t\t\tthis.startLine++;\n\t\t\tthis.startLine = this.$parent.folder.getRealLine(this.startLine);\n\t\t\tthis.top = scrollTop % this.$parent.charObj.charHight;\n\t\t\tthis.setTop();\n\t\t},\n\t\tsetTop() {\n\t\t\tlet top = (this.$parent.folder.getRelativeLine(this.nowLine) - this.$parent.folder.getRelativeLine(this.startLine)) * this.$parent.charObj.charHight - this.top;\n\t\t\tthis.blockTop = top * this.scale;\n\t\t},\n\t\trender() {\n\t\t\tif (this.renderTimer) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.renderTimer = setTimeout(() => {\n\t\t\t\tthis.renderLines();\n\t\t\t\tthis.renderDiff();\n\t\t\t\tthis.renderSelectedBg();\n\t\t\t\tthis.renderTimer = null;\n\t\t\t}, 15);\n\t\t},\n\t\trenderLines() {\n\t\t\tlet lines = [];\n\t\t\tlet renderedIdMap = {};\n\t\t\tfor (let line = this.startLine, i = 0; line <= this.$parent.myContext.htmls.length && i < this.maxVisibleLines; i++) {\n\t\t\t\tlet fold = this.$parent.folder.getFoldByLine(line);\n\t\t\t\tlet lineObj = this.$parent.myContext.htmls[line - 1];\n\t\t\t\tlet preLineObj = this.$parent.myContext.htmls[line - 2];\n\t\t\t\tlet preRuleId = (preLineObj && preLineObj.states && preLineObj.states.ruleId) || null;\n\t\t\t\tlet cache = this.renderedIdMap[lineObj.lineId];\n\t\t\t\tlet renderObj = null;\n\t\t\t\tif (this.compairCache(cache, lineObj.text, preRuleId)) {\n\t\t\t\t\trenderObj = {\n\t\t\t\t\t\ttop: (line - this.startLine) * this.$parent.charObj.charHight * this.scale,\n\t\t\t\t\t\tlineId: lineObj.lineId,\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\trenderObj = this.getRenderObj(line);\n\t\t\t\t}\n\t\t\t\trenderedIdMap[lineObj.lineId] = { num: line, text: lineObj.text, preRuleId };\n\t\t\t\tlines.push(renderObj);\n\t\t\t\tif (fold) {\n\t\t\t\t\tline = fold.end.line;\n\t\t\t\t} else {\n\t\t\t\t\tline++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.renderedIdMap = renderedIdMap;\n\t\t\tthis.worker.postMessage({ event: 'render', data: lines });\n\t\t},\n\t\trenderLine(lineId) {\n\t\t\tlet cache = this.renderedIdMap[lineId];\n\t\t\tif (cache) {\n\t\t\t\tlet lineObj = this.$parent.myContext.htmls[cache.num - 1];\n\t\t\t\tlet preLineObj = this.$parent.myContext.htmls[cache.num - 2];\n\t\t\t\tlet preRuleId = (preLineObj && preLineObj.states && preLineObj.states.ruleId) || null;\n\t\t\t\tif (lineObj && lineObj.lineId === lineId) {\n\t\t\t\t\tlet renderObj = this.getRenderObj(cache.num);\n\t\t\t\t\tthis.worker.postMessage({ event: 'render-line', data: renderObj });\n\t\t\t\t\tthis.renderedIdMap[lineObj.lineId] = { num: cache.num, text: lineObj.text, preRuleId };\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\trenderSelectedBg() {\n\t\t\tlet results = [];\n\t\t\tlet fResults = [];\n\t\t\tlet tabSize = this.$parent.tabSize;\n\t\t\tfor (let line = this.startLine, i = 0; line <= this.$parent.myContext.htmls.length && i < this.maxVisibleLines; i++) {\n\t\t\t\tlet fold = this.$parent.folder.getFoldByLine(line);\n\t\t\t\tlet text = this.$parent.myContext.htmls[line - 1].text;\n\t\t\t\tlet top = i * this.$parent.charObj.charHight * this.scale;\n\t\t\t\tif (this.$parent.fSelecter.getRangeByLine(line).length || this.$parent.selecter.getRangeWithCursorPos({ line: line, column: 0 })) {\n\t\t\t\t\tfResults.push(top);\n\t\t\t\t} else if (this.$parent.fSelecter.getRangeByLine(line).length || this.$parent.selecter.getRangeWithCursorPos({ line: line, column: 0 })) {\n\t\t\t\t\tresults.push(top);\n\t\t\t\t}\n\t\t\t\tif (fold) {\n\t\t\t\t\tline = fold.end.line;\n\t\t\t\t} else {\n\t\t\t\t\tline++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.worker.postMessage({ event: 'render-selected-bg', data: { results, fResults } });\n\n\t\t\tfunction _getLength(text) {\n\t\t\t\tlet tabNum = text.match(/\\t/);\n\t\t\t\ttabNum = (tabNum && tabNum.length) || 0;\n\t\t\t\treturn text.length + (tabSize - 1) * tabNum;\n\t\t\t}\n\t\t},\n\t\trenderAllSearchdBg() {\n\t\t\tlet list = this.$parent.fSelecter.ranges.toArray();\n\t\t\tlet results = [];\n\t\t\tlet preCursorPos = {};\n\t\t\tlet preTop = -1;\n\t\t\tlet endLine = this.getEndLine();\n\t\t\tfor (let i = 0; i < list.length; i++) {\n\t\t\t\tlet cursorPos = list[i].start;\n\t\t\t\tif (cursorPos.line !== preCursorPos.line && !this.$parent.folder.getLineInFold(cursorPos.line)) {\n\t\t\t\t\tlet line = this.$parent.folder.getRelativeLine(cursorPos.line);\n\t\t\t\t\tlet top = Math.round((((line - 1) * this.$parent.charObj.charHight) / this.contentHeight) * this.height);\n\t\t\t\t\tif (top - preTop >= 4) {\n\t\t\t\t\t\tpreTop = top;\n\t\t\t\t\t\tresults.push(top);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpreCursorPos = cursorPos;\n\t\t\t}\n\t\t\tif (this.preAllSearchResult + '' !== results + '') {\n\t\t\t\tthis.preAllSearchResult = results;\n\t\t\t\tthis.worker.postMessage({ event: 'render-selected-all', data: results });\n\t\t\t}\n\t\t},\n\t\trenderDiff() {\n\t\t\tlet diffRanges = [];\n\t\t\tlet endLine = 0;\n\t\t\tif (this.$parent.diffRanges) {\n\t\t\t\tendLine = this.getEndLine();\n\t\t\t\tfor (let i = 0; i < this.$parent.diffRanges.length; i++) {\n\t\t\t\t\tlet item = this.$parent.diffRanges[i];\n\t\t\t\t\titem = Object.assign({}, item);\n\t\t\t\t\titem.length = item.type === 'D' ? 1 : item.added.length;\n\t\t\t\t\tif (item.line < this.startLine) {\n\t\t\t\t\t\titem.length -= this.startLine - item.line;\n\t\t\t\t\t\titem.line = this.startLine;\n\t\t\t\t\t}\n\t\t\t\t\tif (item.length > 0) {\n\t\t\t\t\t\tlet fold = this.$parent.folder.getLineInFold(item.line);\n\t\t\t\t\t\tif (fold) {\n\t\t\t\t\t\t\tif (item.type !== 'D' && item.line + item.length - 1 >= fold.end.line) {\n\t\t\t\t\t\t\t\titem.length -= fold.end.line - item.line;\n\t\t\t\t\t\t\t\titem.line = fold.end.line;\n\t\t\t\t\t\t\t\tdiffRanges.push(_getDiffObj.call(this, item));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdiffRanges.push(_getDiffObj.call(this, item));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (item.line > endLine) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.worker.postMessage({ event: 'render-diff', data: diffRanges });\n\n\t\t\tfunction _getDiffObj(item) {\n\t\t\t\tlet resultObj = {};\n\t\t\t\titem = this.getDiffObj(item);\n\t\t\t\titem.length = item.line + item.length - 1 > endLine ? endLine - item.line + 1 : item.length;\n\t\t\t\tresultObj.type = item.type;\n\t\t\t\tresultObj.top = (item.line - this.startLine) * this.$parent.charObj.charHight * this.scale;\n\t\t\t\tresultObj.height = this.$parent.charObj.charHight * item.length * this.scale;\n\t\t\t\tresultObj.top = Math.ceil(resultObj.top);\n\t\t\t\tresultObj.height = Math.ceil(resultObj.height);\n\t\t\t\treturn resultObj;\n\t\t\t}\n\t\t},\n\t\trenderAllDiff(renderDiff) {\n\t\t\tlet diffRanges = [];\n\t\t\tlet sliderHeight = (this.height / this.contentHeight) * this.height;\n\t\t\tsliderHeight = sliderHeight > 20 ? sliderHeight : 20;\n\t\t\tif (this.$parent.diffRanges) {\n\t\t\t\tfor (let i = 0; i < this.$parent.diffRanges.length; i++) {\n\t\t\t\t\tlet item = this.$parent.diffRanges[i];\n\t\t\t\t\tlet fold = this.$parent.folder.getLineInFold(item.line);\n\t\t\t\t\titem = Object.assign({}, item);\n\t\t\t\t\titem.length = item.type === 'D' ? 1 : item.added.length;\n\t\t\t\t\tif (fold) {\n\t\t\t\t\t\tif (item.type !== 'D' && item.line + item.length - 1 >= fold.end.line) {\n\t\t\t\t\t\t\titem.length -= fold.end.line - item.line;\n\t\t\t\t\t\t\titem.line = fold.end.line;\n\t\t\t\t\t\t\tdiffRanges.push(_getDiffObj.call(this, item));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdiffRanges.push(_getDiffObj.call(this, item));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.worker.postMessage({ event: 'render-diff-all', data: diffRanges });\n\t\t\trenderDiff && this.renderDiff();\n\n\t\t\tfunction _getDiffObj(item) {\n\t\t\t\tlet resultObj = {};\n\t\t\t\tlet scale = (this.height - sliderHeight) / (this.contentHeight - this.height);\n\t\t\t\titem = this.getDiffObj(item);\n\t\t\t\tresultObj.type = item.type;\n\t\t\t\tresultObj.top = (item.line - 1) * this.$parent.charObj.charHight * scale;\n\t\t\t\tresultObj.height = this.$parent.charObj.charHight * item.length * scale;\n\t\t\t\tresultObj.height = resultObj.height < 4 ? 4 : resultObj.height;\n\t\t\t\tresultObj.top = Math.ceil(resultObj.top);\n\t\t\t\tresultObj.height = Math.ceil(resultObj.height);\n\t\t\t\treturn resultObj;\n\t\t\t}\n\t\t},\n\t\trenderCursor() {\n\t\t\tlet list = this.$parent.cursor.multiCursorPos.toArray();\n\t\t\tlet results = [];\n\t\t\tlet preCursorPos = {};\n\t\t\tlet endLine = this.getEndLine();\n\t\t\tfor (let i = 0; i < list.length; i++) {\n\t\t\t\tlet cursorPos = list[i];\n\t\t\t\tif (cursorPos.line >= this.startLine && cursorPos.line <= endLine) {\n\t\t\t\t\tif (cursorPos.line !== preCursorPos.line && !this.$parent.folder.getLineInFold(cursorPos.line)) {\n\t\t\t\t\t\tlet line = this.$parent.folder.getRelativeLine(cursorPos.line);\n\t\t\t\t\t\tlet top = (line - this.startLine) * this.$parent.charObj.charHight * this.scale;\n\t\t\t\t\t\tresults.push(top);\n\t\t\t\t\t}\n\t\t\t\t} else if (cursorPos.line > endLine) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tpreCursorPos = cursorPos;\n\t\t\t}\n\t\t\tif (this.preCursorResult + '' !== results + '') {\n\t\t\t\tthis.preCursorResult = results;\n\t\t\t\tthis.worker.postMessage({ event: 'render-cursor', data: results });\n\t\t\t}\n\t\t},\n\t\trenderAllCursor() {\n\t\t\tlet list = this.$parent.cursor.multiCursorPos.toArray();\n\t\t\tlet results = [];\n\t\t\tlet preTop = -1;\n\t\t\tlet preCursorPos = {};\n\t\t\tlet endLine = this.getEndLine();\n\t\t\tfor (let i = 0; i < list.length; i++) {\n\t\t\t\tlet cursorPos = list[i];\n\t\t\t\tif (cursorPos.line !== preCursorPos.line && !this.$parent.folder.getLineInFold(cursorPos.line)) {\n\t\t\t\t\tlet line = this.$parent.folder.getRelativeLine(cursorPos.line);\n\t\t\t\t\tlet top = Math.round((((line - 1) * this.$parent.charObj.charHight) / this.contentHeight) * this.height);\n\t\t\t\t\tif (preTop !== top) {\n\t\t\t\t\t\tpreTop = top;\n\t\t\t\t\t\tresults.push(top);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpreCursorPos = cursorPos;\n\t\t\t}\n\t\t\tif (this.preAllCursorResult + '' !== results + '') {\n\t\t\t\tthis.preAllCursorResult = results;\n\t\t\t\tthis.worker.postMessage({ event: 'render-cursor-all', data: results });\n\t\t\t}\n\t\t},\n\t\tgetEndLine() {\n\t\t\tlet endLine = 0;\n\t\t\tfor (let line = this.startLine, i = 0; line <= this.$parent.myContext.htmls.length && i < this.maxVisibleLines; i++) {\n\t\t\t\tlet fold = this.$parent.folder.getFoldByLine(line);\n\t\t\t\tendLine = line;\n\t\t\t\tif (fold) {\n\t\t\t\t\tline = fold.end.line;\n\t\t\t\t} else {\n\t\t\t\t\tline++;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn endLine;\n\t\t},\n\t\tgetRenderObj(line) {\n\t\t\tlet top = (line - this.startLine) * this.$parent.charObj.charHight * this.scale;\n\t\t\tlet lineObj = this.$parent.myContext.htmls[line - 1];\n\t\t\tlet preLineObj = this.$parent.myContext.htmls[line - 2];\n\t\t\tlet preRuleId = (preLineObj && preLineObj.states && preLineObj.states.ruleId) || null;\n\t\t\tif (!lineObj.html && lineObj.tokens) {\n\t\t\t\tlineObj.tokens.forEach((token) => {\n\t\t\t\t\tthis.$parent.tokenizer.getScopeId(token);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttop,\n\t\t\t\tlineObj: {\n\t\t\t\t\tlineId: lineObj.lineId,\n\t\t\t\t\ttext: lineObj.text,\n\t\t\t\t\tpreRuleId: preRuleId,\n\t\t\t\t\ttokens:\n\t\t\t\t\t\tlineObj.tokens &&\n\t\t\t\t\t\tlineObj.tokens.map((item) => {\n\t\t\t\t\t\t\treturn { startIndex: item.startIndex, endIndex: item.endIndex, scopeId: item.scopeId };\n\t\t\t\t\t\t}),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tgetDiffObj(item) {\n\t\t\tlet relLine = this.$parent.folder.getRelativeLine(item.line);\n\t\t\tlet length = item.length;\n\t\t\tif (length > 1) {\n\t\t\t\tlet count = 0;\n\t\t\t\tlet endLine = item.line + length - 1;\n\t\t\t\tlet line = item.line;\n\t\t\t\tlet delLength = 0;\n\t\t\t\tlet folds = this.$parent.folder.folds.toArray();\n\t\t\t\t// 减去折叠中的行\n\t\t\t\tfor (let i = 0; i < folds.length; i++) {\n\t\t\t\t\tlet fold = folds[i];\n\t\t\t\t\tif (fold.end.line <= item.line) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else if (fold.start.line >= endLine) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelLength += fold.end.line - fold.start.line;\n\t\t\t\t\t\tif (fold.start.line < item.line) {\n\t\t\t\t\t\t\tdelLength -= item.line - fold.start.line;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (fold.end.line > endLine) {\n\t\t\t\t\t\t\tdelLength -= fold.end.line - endLine;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlength -= delLength;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tline: relLine,\n\t\t\t\ttype: item.type,\n\t\t\t\tlength: length,\n\t\t\t};\n\t\t},\n\t\tcompairCache(cache, text, preRuleId) {\n\t\t\tif (cache && cache.text === text && cache.preRuleId === preRuleId) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tonMinimapDown(e) {\n\t\t\tif (e.target === this.$refs.block) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet maxScrollTop = this.contentHeight - this.height;\n\t\t\tlet scrollTop = Math.floor(e.offsetY / (this.$parent.charObj.charHight * this.scale));\n\t\t\tscrollTop = (this.startLine + scrollTop - 1) * this.$parent.charObj.charHight - this.height / 2;\n\t\t\tscrollTop = scrollTop > maxScrollTop ? maxScrollTop : scrollTop;\n\t\t\tscrollTop = scrollTop < 0 ? 0 : scrollTop;\n\t\t\tthis.$parent.setStartLine(scrollTop);\n\t\t},\n\t\tonBlockMDown(e) {\n\t\t\tthis.startBlockMouseObj = e;\n\t\t\tthis.bTop = this.blockTop;\n\t\t\tthis.blockClicked = true;\n\t\t},\n\t\tonDocumentMmove(e) {\n\t\t\tif (this.startBlockMouseObj) {\n\t\t\t\tlet maxScrollTop1 = this.contentHeight - this.height;\n\t\t\t\tlet maxScrollTop2 = this.height - this.blockHeight;\n\t\t\t\tlet delta = e.clientY - this.startBlockMouseObj.clientY;\n\t\t\t\tlet top = this.bTop;\n\t\t\t\tif (maxScrollTop2 > this.contentHeight * this.scale - this.blockHeight) {\n\t\t\t\t\tmaxScrollTop2 = this.contentHeight * this.scale - this.blockHeight;\n\t\t\t\t}\n\t\t\t\ttop += delta;\n\t\t\t\ttop = top < 0 ? 0 : top;\n\t\t\t\ttop = top > maxScrollTop2 ? maxScrollTop2 : top;\n\t\t\t\tthis.bTop += delta;\n\t\t\t\tthis.startBlockMouseObj = e;\n\t\t\t\tthis.moevScrollTop = top * (maxScrollTop1 / maxScrollTop2);\n\t\t\t\tif (this.moevScrollTop && !this.moveTask) {\n\t\t\t\t\tthis.moveTask = globalData.scheduler.addUiTask(() => {\n\t\t\t\t\t\tif (this.moevScrollTop >= 0 && this.moevScrollTop !== this.scrollTop) {\n\t\t\t\t\t\t\tthis.$parent.setStartLine(this.moevScrollTop);\n\t\t\t\t\t\t\tthis.moevScrollTop = -1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tglobalData.scheduler.removeUiTask(this.moveTask);\n\t\t\t\t\t\t\tthis.moveTask = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonDocumentMouseUp(e) {\n\t\t\tglobalData.scheduler.removeUiTask(this.moveTask);\n\t\t\tthis.startBlockMouseObj = null;\n\t\t\tthis.moveTask = null;\n\t\t\tthis.blockClicked = false;\n\t\t},\n\t},\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Minimap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Minimap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Minimap.vue?vue&type=template&id=593cec05&\"\nimport script from \"./Minimap.vue?vue&type=script&lang=js&\"\nexport * from \"./Minimap.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm._hScrollAble),expression:\"_hScrollAble\"}],ref:\"bar\",staticClass:\"my-scroll-bar-h\",class:{'my-scroll-clicked': _vm.hSliderClicked},on:{\"mousedown\":_vm.onHBarDown}},[_c('div',{staticClass:\"my-scroll-slider\",style:({width: _vm._hSliderWidth + 'px', left: _vm._vSliderLeft + 'px'}),on:{\"mousedown\":_vm.onHsliderDown}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div :class=\"{'my-scroll-clicked': hSliderClicked}\" @mousedown=\"onHBarDown\" class=\"my-scroll-bar-h\" ref=\"bar\" v-show=\"_hScrollAble\">\r\n\t\t<div :style=\"{width: _hSliderWidth + 'px', left: _vSliderLeft + 'px'}\" @mousedown=\"onHsliderDown\" class=\"my-scroll-slider\"></div>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n\tname: 'HScrollBar',\r\n\tprops: {\r\n\t\twidth: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0,\r\n\t\t},\r\n\t\tscrollLeft: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0,\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tbarWidth: 0,\r\n\t\t\thSliderClicked: false,\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t_hSliderWidth() {\r\n\t\t\tlet width = (this.barWidth / this.width) * this.barWidth;\r\n\t\t\treturn width > 20 ? width : 20;\r\n\t\t},\r\n\t\t_vSliderLeft() {\r\n\t\t\tlet maxScrollLeft1 = this.barWidth - this._hSliderWidth;\r\n\t\t\tlet maxScrollLeft2 = this.width - this.barWidth;\r\n\t\t\treturn (this.scrollLeft * maxScrollLeft1) / maxScrollLeft2;\r\n\t\t},\r\n\t\t_hScrollAble() {\r\n\t\t\treturn this.width > this.barWidth;\r\n\t\t},\r\n\t},\r\n\tcreated() {},\r\n\tmounted() {\r\n\t\tthis.barWidth = this.$refs.bar.clientWidth;\r\n\t\tthis.initResizeEvent();\r\n\t\tthis.initEvent();\r\n\t},\r\n\tdestroyed() {\r\n\t\tthis.unbindEvent();\r\n\t\tglobalData.scheduler.removeUiTask(this.moveHsliderTask);\r\n\t},\r\n\tmethods: {\r\n\t\tinitResizeEvent() {\r\n\t\t\tconst resizeObserver = new ResizeObserver((entries) => {\r\n\t\t\t\tif (this.$refs.bar && this.$refs.bar.clientWidth) {\r\n\t\t\t\t\tthis.barWidth = this.$refs.bar.clientWidth;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tresizeObserver.observe(this.$refs.bar);\r\n\t\t},\r\n\t\tinitEvent() {\r\n\t\t\tthis.initEventFn1 = (e) => {\r\n\t\t\t\tthis.onDocumentMouseMove(e);\r\n\t\t\t};\r\n\t\t\tthis.initEventFn2 = (e) => {\r\n\t\t\t\tthis.onDocumentMouseUp(e);\r\n\t\t\t};\r\n\t\t\tdocument.addEventListener('mousemove', this.initEventFn1);\r\n\t\t\tdocument.addEventListener('mouseup', this.initEventFn2);\r\n\t\t},\r\n\t\tunbindEvent() {\r\n\t\t\tdocument.removeEventListener('mousemove', this.initEventFn1);\r\n\t\t\tdocument.removeEventListener('mouseup', this.initEventFn2);\r\n\t\t},\r\n\t\tgetScrollLeft(sliderLeft) {\r\n\t\t\tlet maxScrollLeft1 = this.barWidth - this._hSliderWidth;\r\n\t\t\tlet maxScrollLeft2 = this.width - this.barWidth;\r\n\t\t\treturn sliderLeft * (maxScrollLeft2 / maxScrollLeft1);\r\n\t\t},\r\n\t\tonHBarDown(e) {\r\n\t\t\tif (!this.hSliderClicked) {\r\n\t\t\t\tlet scrollLeft = e.offsetX - this._hSliderWidth / 2;\r\n\t\t\t\tif (scrollLeft > this.barWidth - this._hSliderWidth) {\r\n\t\t\t\t\tscrollLeft = this.barWidth - this._hSliderWidth;\r\n\t\t\t\t}\r\n\t\t\t\tscrollLeft = scrollLeft < 0 ? 0 : scrollLeft;\r\n\t\t\t\tthis.$emit('scroll', this.getScrollLeft(scrollLeft));\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.onHsliderDown(e);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonHsliderDown(e) {\r\n\t\t\tthis.vSliderMouseObj = e;\r\n\t\t\tthis.startVSliderLeft = this._vSliderLeft;\r\n\t\t\tthis.hSliderClicked = true;\r\n\t\t},\r\n\t\tonDocumentMouseMove(e) {\r\n\t\t\tif (this.vSliderMouseObj) {\r\n\t\t\t\tlet maxScrollLeft1 = this.barWidth - this._hSliderWidth;\r\n\t\t\t\tlet delta = e.clientX - this.vSliderMouseObj.clientX;\r\n\t\t\t\tlet left = this.startVSliderLeft;\r\n\t\t\t\tleft += delta;\r\n\t\t\t\tleft = left < 0 ? 0 : left;\r\n\t\t\t\tleft = left > maxScrollLeft1 ? maxScrollLeft1 : left;\r\n\t\t\t\tthis.startVSliderLeft += delta;\r\n\t\t\t\tthis.vSliderMouseObj = e;\r\n\t\t\t\tthis.moveScrollLeft = this.getScrollLeft(left);\r\n\t\t\t\tif (this.moveScrollLeft && !this.moveHsliderTask) {\r\n\t\t\t\t\tthis.moveHsliderTask = globalData.scheduler.addUiTask(() => {\r\n\t\t\t\t\t\tif (this.moveScrollLeft >= 0 && this.moveScrollLeft !== this.scrollLeft) {\r\n\t\t\t\t\t\t\tthis.$emit('scroll', this.moveScrollLeft);\r\n\t\t\t\t\t\t\tthis.moveScrollLeft = -1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tglobalData.scheduler.removeUiTask(this.moveHsliderTask);\r\n\t\t\t\t\t\t\tthis.moveHsliderTask = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDocumentMouseUp(e) {\r\n\t\t\tglobalData.scheduler.removeUiTask(this.moveHsliderTask);\r\n\t\t\tthis.hSliderClicked = false;\r\n\t\t\tthis.vSliderMouseObj = null;\r\n\t\t\tthis.moveHsliderTask = null;\r\n\t\t},\r\n\t},\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HScrollBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HScrollBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HScrollBar.vue?vue&type=template&id=0737a268&\"\nimport script from \"./HScrollBar.vue?vue&type=script&lang=js&\"\nexport * from \"./HScrollBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\t<div\r\n\t\t@contextmenu.prevent.stop=\"onContextmenu\"\r\n\t\t@mouseenter=\"showScrollBar\"\r\n\t\t@mouseleave=\"hideScrollBar\"\r\n\t\t@mousemove=\"showScrollBar\"\r\n\t\t@selectstart.prevent\r\n\t\t@wheel.stop=\"onWheel\"\r\n\t\tclass=\"my-editor-wrap\"\r\n\t\tref=\"editor\"\r\n\t>\r\n\t\t<!-- 行号 -->\r\n\t\t<div class=\"my-num-wrap\">\r\n\t\t\t<!-- 占位行号，避免行号宽度滚动时变化 -->\r\n\t\t\t<div class=\"my-num\" style=\"position: relative; visibility: hidden;\">{{ diffObj.maxLine || maxLine }}</div>\r\n\t\t\t<div class=\"my-num-scroller\" ref=\"numScroller\">\r\n\t\t\t\t<div :style=\"{ height: _maxContentHeight, top: _top }\" class=\"my-num-content\" ref=\"numContent\">\r\n\t\t\t\t\t<div :class=\"{ 'my-active': nowCursorPos.line === numItem.num }\" :style=\"{ top: numItem.top }\" class=\"my-num\" v-for=\"numItem in renderNums\">\r\n\t\t\t\t\t\t<span class=\"num\">{{ numItem._num }}</span>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t:class=\"['iconfont', numItem.fold == 'open' ? 'my-fold-open icon-down1' : 'my-fold-close icon-right']\"\r\n\t\t\t\t\t\t\t@click=\"onToggleFold(numItem.num)\"\r\n\t\t\t\t\t\t\tclass=\"my-fold my-center-center\"\r\n\t\t\t\t\t\t\tv-if=\"numItem.fold\"\r\n\t\t\t\t\t\t></span>\r\n\t\t\t\t\t\t<template v-if=\"type !== 'diff'\">\r\n\t\t\t\t\t\t\t<span :class=\"[numItem.diffType]\" @click=\"onShowDiff(numItem.num)\" class=\"my-diff-num\" v-if=\"numItem.diffType\"></span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"my-content-wrap\">\r\n\t\t\t<!-- 可滚动区域 -->\r\n\t\t\t<div @scroll=\"onScroll\" class=\"my-scroller\" ref=\"scroller\">\r\n\t\t\t\t<!-- 内如区域 -->\r\n\t\t\t\t<div\r\n\t\t\t\t\t:style=\"{ width: _contentMinWidth + 'px', height: _maxContentHeight, left: _left, top: _top }\"\r\n\t\t\t\t\t@mousedown=\"onContentMdown\"\r\n\t\t\t\t\t@mouseleave=\"onContentMLeave\"\r\n\t\t\t\t\t@mousemove=\"onContentMmove\"\r\n\t\t\t\t\t@selectend.prevent=\"onSelectend\"\r\n\t\t\t\t\tclass=\"my-content\"\r\n\t\t\t\t\tref=\"content\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"my-lines-view\" ref=\"lineView\">\r\n\t\t\t\t\t\t<div :class=\"[_diffBg(line.num)]\" :data-line=\"line.num\" :id=\"_lineId(line.num)\" :style=\"{top: line.top}\" class=\"my-line\" v-for=\"line in renderObjs\">\r\n\t\t\t\t\t\t\t<div :class=\"[line.fold == 'close' ? 'fold-close' : '', line.bgClass]\" :data-line=\"line.num\" class=\"my-code\" v-html=\"line.html\"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"my-cursor-view\" ref=\"cursorView\">\r\n\t\t\t\t\t\t<template v-for=\"posList in renderCursorObjs\">\r\n\t\t\t\t\t\t\t<span :style=\"{ height: _lineHeight, left: pos.left, top: pos.top, visibility: _cursorVisible }\" class=\"my-cursor\" v-for=\"pos in posList\"></span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"my-bg-view\">\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t:class=\"{ 'my-active': range.active, 'my-search-bg': range.isFsearch }\"\r\n\t\t\t\t\t\t\t:style=\"{ top: range.top, left: range.left, width: range.width, height: _lineHeight }\"\r\n\t\t\t\t\t\t\tclass=\"my-select-bg\"\r\n\t\t\t\t\t\t\tv-for=\"range in renderSelectionObjs\"\r\n\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t<div :style=\"{height: _lineHeight, top: _activeLineTop}\" class=\"my-line-bg\" v-if=\"activeLineBg\"></div>\r\n\t\t\t\t\t\t<div :style=\"_bracketStartStyle\" class=\"my-bracket-match\" v-if=\"_bracketStartVisible\"></div>\r\n\t\t\t\t\t\t<div :style=\"_bracketEndStyle\" class=\"my-bracket-match\" v-if=\"_bracketEndVisible\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"my-indent-view\">\r\n\t\t\t\t\t\t<div :style=\"{height: _lineHeight, top: line.top}\" class=\"my-indent-line\" v-for=\"line in renderObjs\" v-html=\"_tabLines(line.tabNum)\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<auto-tip :styles=\"autoTipStyle\" :tipList=\"autoTipList\" @change=\"onClickAuto\" ref=\"autoTip\" v-show=\"autoTipList && autoTipList.length\"></auto-tip>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- 输入框 -->\r\n\t\t\t\t<textarea\r\n\t\t\t\t\t:style=\"{ top: _textAreaPos.top, left: _textAreaPos.left, height: _lineHeight  }\"\r\n\t\t\t\t\t@blur=\"onBlur\"\r\n\t\t\t\t\t@compositionend=\"onCompositionend\"\r\n\t\t\t\t\t@compositionstart=\"onCompositionstart\"\r\n\t\t\t\t\t@copy.prevent=\"onCopy\"\r\n\t\t\t\t\t@cut.prevent=\"onCut\"\r\n\t\t\t\t\t@focus=\"onFocus\"\r\n\t\t\t\t\t@input=\"onInput\"\r\n\t\t\t\t\t@keydown=\"onKeydown\"\r\n\t\t\t\t\t@paste.prevent=\"onPaste\"\r\n\t\t\t\t\tclass=\"my-textarea\"\r\n\t\t\t\t\tref=\"textarea\"\r\n\t\t\t\t></textarea>\r\n\t\t\t\t<h-scroll-bar :class=\"{'my-scroll-visible': scrollVisible}\" :scroll-left=\"scrollLeft\" :width=\"_contentMinWidth\" @scroll=\"onHBarScroll\" class=\"my-editor-scrollbar-h\"></h-scroll-bar>\r\n\t\t\t\t<div class=\"my-scroller-shadow-left\" v-if=\"_leftShadow\"></div>\r\n\t\t\t\t<div class=\"my-scroller-shadow-right\" v-if=\"_rightShadow\"></div>\r\n\t\t\t</div>\r\n\t\t\t<!-- 搜索框 -->\r\n\t\t\t<search-dialog\r\n\t\t\t\t:count=\"searchCount\"\r\n\t\t\t\t:now=\"searchNow\"\r\n\t\t\t\t@close=\"onCloseSearch\"\r\n\t\t\t\t@next=\"onSearchNext()\"\r\n\t\t\t\t@prev=\"onSearchPrev()\"\r\n\t\t\t\t@replace=\"replace\"\r\n\t\t\t\t@replaceAll=\"replaceAll\"\r\n\t\t\t\t@search=\"onSearch\"\r\n\t\t\t\tref=\"searchDialog\"\r\n\t\t\t\tv-show=\"searchVisible\"\r\n\t\t\t></search-dialog>\r\n\t\t</div>\r\n\t\t<div class=\"my-minimap-wrap\" v-if=\"minimapVisible\">\r\n\t\t\t<minimap :content-height=\"contentHeight\" :now-line=\"startLine\" :scroll-top=\"scrollTop\" ref=\"minimap\"></minimap>\r\n\t\t</div>\r\n\t\t<v-scroll-bar :class=\"{'my-scroll-visible': scrollVisible}\" :height=\"contentHeight\" :scroll-top=\"scrollTop\" @scroll=\"onVBarScroll\" class=\"my-editor-scrollbar-v\"></v-scroll-bar>\r\n\t\t<editor-menu ref=\"menu\"></editor-menu>\r\n\t\t<tip :content=\"tipContent\" :styles=\"tipStyle\" ref=\"tip\" v-show=\"tipContent\"></tip>\r\n\t\t<div :style=\"{top: diffTop + 'px', height: diffHeight+'px'}\" class=\"my-diff-editor\" ref=\"diff\" v-if=\"diffVisible\">\r\n\t\t\t<div class=\"my-diff-bar\">\r\n\t\t\t\t<span style=\"margin-right: 20px\">{{tabData.name}}</span>\r\n\t\t\t\t<div @click=\"onCloseDiff\" class=\"bar-item my-hover-danger\">\r\n\t\t\t\t\t<span class=\"iconfont icon-close\" style=\"font-size: 18px\"></span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<editor :active=\"true\" :diff-obj=\"toShowdiffObj\" :tab-data=\"diffTabData\" style=\"flex:1\" type=\"diff\"></editor>\r\n\t\t\t<div @mousedown=\"onDiffBottomSashBegin\" class=\"my-sash-h\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Tokenizer from '@/module/tokenizer/index';\r\nimport Lint from '@/module/lint/index';\r\nimport Formatter from '@/module/format/index';\r\nimport Differ from '@/module/diff/index';\r\nimport Autocomplete from '@/module/autocomplete/index';\r\nimport Fold from '@/module/fold/index';\r\nimport Search from '@/module/search/index';\r\nimport Select from '@/module/select/index';\r\nimport Cursor from '@/module/cursor/index';\r\nimport History from '@/module/history/index';\r\nimport Context from '@/module/context/index';\r\nimport ShortCut from '@/module/shortcut/editor';\r\nimport EditorMenu from './EditorMenu.vue';\r\nimport SearchDialog from './Search';\r\nimport Menu from './Menu';\r\nimport AutoTip from './AutoTip';\r\nimport Tip from './Tip';\r\nimport Minimap from './Minimap.vue';\r\nimport VScrollBar from './VScrollBar.vue';\r\nimport HScrollBar from './HScrollBar.vue';\r\nimport Util from '@/common/util';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\nimport globalData from '@/data/globalData';\r\nimport Enum from '@/data/enum';\r\n\r\nconst contexts = Context.contexts;\r\nconst gitTypeMap = {\r\n\tA: 'add',\r\n\tM: 'modify',\r\n\tD: 'delete',\r\n};\r\n\r\nexport default {\r\n\tname: 'Editor',\r\n\tcomponents: {\r\n\t\tSearchDialog,\r\n\t\tMenu,\r\n\t\tAutoTip,\r\n\t\tTip,\r\n\t\tMinimap,\r\n\t\tVScrollBar,\r\n\t\tHScrollBar,\r\n\t\tEditorMenu,\r\n\t},\r\n\tprops: {\r\n\t\ttype: String,\r\n\t\ttabData: Object,\r\n\t\tactive: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\tdiffObj: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdiff: null,\r\n\t\t\t\t\tdeletedLength: 0,\r\n\t\t\t\t\tbeforeLine: 0,\r\n\t\t\t\t\tmaxLine: 0,\r\n\t\t\t\t\tstates: null,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcursorVisible: true,\r\n\t\t\tcursorFocus: true,\r\n\t\t\tlanguage: '',\r\n\t\t\ttheme: '',\r\n\t\t\tindent: 'tab',\r\n\t\t\ttabSize: 4,\r\n\t\t\tstartLine: 1,\r\n\t\t\tendLine: 1,\r\n\t\t\tcursorLeft: 0,\r\n\t\t\tscrollLeft: 0,\r\n\t\t\tscrollTop: 0,\r\n\t\t\tdeltaTop: 0,\r\n\t\t\tmaxVisibleLines: 1,\r\n\t\t\tmaxLine: 1,\r\n\t\t\tmaxContentHeight: 0,\r\n\t\t\tcontentHeight: 0,\r\n\t\t\terrorMap: {},\r\n\t\t\terrors: [],\r\n\t\t\tautoTipList: [],\r\n\t\t\trenderObjs: [],\r\n\t\t\trenderNums: [],\r\n\t\t\trenderCursorObjs: [],\r\n\t\t\trenderSelectionObjs: [],\r\n\t\t\trenderedLineMap: {},\r\n\t\t\trenderedIdMap: {},\r\n\t\t\trenderNumsIdMap: {},\r\n\t\t\tdiffRanges: null,\r\n\t\t\tdiffTabData: null,\r\n\t\t\ttipContent: null,\r\n\t\t\tsearchVisible: false,\r\n\t\t\tselectedFg: false,\r\n\t\t\tactiveLineBg: true,\r\n\t\t\tsearchNow: 1,\r\n\t\t\tsearchCount: 0,\r\n\t\t\tdiffVisible: false,\r\n\t\t\tdiffHeight: 200,\r\n\t\t\tdiffTop: 0,\r\n\t\t\tdiffMarginTop: 0,\r\n\t\t\ttoShowdiffObj: null,\r\n\t\t\tscrollVisible: false,\r\n\t\t\tminimapVisible: false,\r\n\t\t\tscrollerArea: { width: 0, height: 0 },\r\n\t\t\tnowCursorPos: { line: 1, column: 0 },\r\n\t\t\tbracketMatch: { start: {}, end: {} },\r\n\t\t\ttipStyle: { top: '0px', left: '0px' },\r\n\t\t\tautoTipStyle: { top: '50%', left: '50%' },\r\n\t\t\tmaxWidthObj: { lineId: null, text: '', width: 0 },\r\n\t\t\tcharObj: { charWidth: 7.15, fullAngleCharWidth: 15, charHight: 20 },\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t_lineId() {\r\n\t\t\treturn (line) => {\r\n\t\t\t\treturn 'line-' + this.tabData.id + '-' + line;\r\n\t\t\t};\r\n\t\t},\r\n\t\t_top() {\r\n\t\t\treturn -(this.scrollTop - this.deltaTop) + 'px';\r\n\t\t},\r\n\t\t_left() {\r\n\t\t\treturn -this.scrollLeft + 'px';\r\n\t\t},\r\n\t\t_diffBg() {\r\n\t\t\treturn (line) => {\r\n\t\t\t\tif (this.type === 'diff') {\r\n\t\t\t\t\tif (line > this.diffObj.deletedLength) {\r\n\t\t\t\t\t\treturn 'my-diff-inserted';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn 'my-diff-removed';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn '';\r\n\t\t\t};\r\n\t\t},\r\n\t\t_leftShadow() {\r\n\t\t\treturn this.scrollLeft > 0;\r\n\t\t},\r\n\t\t_rightShadow() {\r\n\t\t\treturn this.scrollLeft + this.scrollerArea.width < this._contentMinWidth;\r\n\t\t},\r\n\t\t_lineHeight() {\r\n\t\t\treturn this.charObj.charHight + 'px';\r\n\t\t},\r\n\t\t_activeLineTop() {\r\n\t\t\treturn (this.folder.getRelativeLine(this.nowCursorPos.line) - 1) * this.charObj.charHight - this.deltaTop + 'px';\r\n\t\t},\r\n\t\t_cursorVisible() {\r\n\t\t\treturn this.cursorVisible && this.cursorFocus ? 'visible' : 'hidden';\r\n\t\t},\r\n\t\t_contentMinWidth() {\r\n\t\t\tlet width = 0;\r\n\t\t\tif (this.$refs.content) {\r\n\t\t\t\twidth = Util.getStrExactWidth(this.maxWidthObj.text, this.tabSize, this.$refs.content);\r\n\t\t\t\twidth += this.charObj.fullAngleCharWidth;\r\n\t\t\t}\r\n\t\t\twidth = this.scrollerArea.width > width ? this.scrollerArea.width : width;\r\n\t\t\treturn width;\r\n\t\t},\r\n\t\t_contentHeight() {\r\n\t\t\treturn this.contentHeight + 'px';\r\n\t\t},\r\n\t\t_maxContentHeight() {\r\n\t\t\treturn this.maxContentHeight * 2 + 'px';\r\n\t\t},\r\n\t\t_textAreaPos() {\r\n\t\t\tlet left = this.cursorLeft;\r\n\t\t\tlet top = 0;\r\n\t\t\tif (this.nowCursorPos) {\r\n\t\t\t\tlet line = this.nowCursorPos.line < this.startLine ? this.startLine : this.nowCursorPos.line;\r\n\t\t\t\ttop = (this.folder.getRelativeLine(line) - this.startLine + 1) * this.charObj.charHight;\r\n\t\t\t\tif (top > this.scrollerArea.height - 2 * this.charObj.charHight) {\r\n\t\t\t\t\ttop = this.scrollerArea.height - 2 * this.charObj.charHight;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (left > this.scrollerArea.width - this.charObj.fullAngleCharWidth) {\r\n\t\t\t\tleft = this.scrollerArea.width - this.charObj.fullAngleCharWidth;\r\n\t\t\t} else if (left < this.charObj.fullAngleCharWidth) {\r\n\t\t\t\tleft = this.charObj.fullAngleCharWidth;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\ttop: top + 'px',\r\n\t\t\t\tleft: left + 'px',\r\n\t\t\t};\r\n\t\t},\r\n\t\t_tabLines() {\r\n\t\t\treturn (tabNum) => {\r\n\t\t\t\tlet html = '';\r\n\t\t\t\tfor (let tab = 1; tab <= tabNum; tab++) {\r\n\t\t\t\t\tlet left = (tab - 1) * this.tabSize * this.charObj.charWidth + 'px';\r\n\t\t\t\t\thtml += `<span style=\"left:${left}\" class=\"my-indent\"></span>`;\r\n\t\t\t\t}\r\n\t\t\t\treturn html;\r\n\t\t\t};\r\n\t\t},\r\n\t\t_bracketStartVisible() {\r\n\t\t\treturn this.bracketMatch && this.bracketMatch.start.line >= this.startLine && this.bracketMatch.start.line <= this.endLine;\r\n\t\t},\r\n\t\t_bracketEndVisible() {\r\n\t\t\treturn this.bracketMatch && this.bracketMatch.end.line >= this.startLine && this.bracketMatch.end.line <= this.endLine;\r\n\t\t},\r\n\t\t_bracketStartStyle() {\r\n\t\t\treturn {\r\n\t\t\t\tleft: this.bracketMatch.start.left,\r\n\t\t\t\ttop: this.bracketMatch.start.top,\r\n\t\t\t\twidth: this.bracketMatch.start.width,\r\n\t\t\t\theight: this._lineHeight,\r\n\t\t\t};\r\n\t\t},\r\n\t\t_bracketEndStyle() {\r\n\t\t\treturn {\r\n\t\t\t\tleft: this.bracketMatch.end.left,\r\n\t\t\t\ttop: this.bracketMatch.end.top,\r\n\t\t\t\twidth: this.bracketMatch.end.width,\r\n\t\t\t\theight: this._lineHeight,\r\n\t\t\t};\r\n\t\t},\r\n\t\tspace() {\r\n\t\t\treturn Util.space(this.tabSize);\r\n\t\t},\r\n\t\tmyContext() {\r\n\t\t\treturn contexts[this.tabData.id];\r\n\t\t},\r\n\t\teditAble() {\r\n\t\t\treturn this.type !== 'diff';\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\tlanguage: function (newVal) {\r\n\t\t\tthis.myContext.htmls.forEach((lineObj) => {\r\n\t\t\t\tlineObj.tokens = null;\r\n\t\t\t\tlineObj.folds = null;\r\n\t\t\t\tlineObj.stateFold = null;\r\n\t\t\t\tlineObj.states = null;\r\n\t\t\t\tlineObj.html = '';\r\n\t\t\t});\r\n\t\t\tthis.lint.initLanguage(newVal);\r\n\t\t\tthis.tokenizer.initLanguage(newVal);\r\n\t\t},\r\n\t\ttheme: function () {\r\n\t\t\tthis.myContext.htmls.forEach((lineObj) => {\r\n\t\t\t\tlineObj.html = '';\r\n\t\t\t\tlineObj.tokens &&\r\n\t\t\t\t\tlineObj.tokens.forEach((token) => {\r\n\t\t\t\t\t\ttoken.scopeId = '';\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.selectedFg = !!globalData.colors['editor.selectionForeground'];\r\n\t\t\tthis.tokenizer.clearScopeMap();\r\n\t\t\tthis.$refs.minimap && this.$refs.minimap.initWorkerData('theme');\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\ttabSize: function (newVal) {\r\n\t\t\tthis.myContext.htmls.forEach((lineObj) => {\r\n\t\t\t\tlineObj.tabNum = -1;\r\n\t\t\t\tlineObj.html = '';\r\n\t\t\t});\r\n\t\t\tthis.$refs.minimap && this.$refs.minimap.initWorkerData('size');\r\n\t\t\tthis.render();\r\n\t\t\tthis.maxWidthObj = { lineId: null, text: '', width: 0 };\r\n\t\t\tthis.myContext.setLineWidth(this.myContext.htmls);\r\n\t\t},\r\n\t\tmaxLine: function (newVal) {\r\n\t\t\tthis.setContentHeight();\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.setScrollerArea();\r\n\t\t\t});\r\n\t\t},\r\n\t\tactive: function (newVal) {\r\n\t\t\tif (newVal) {\r\n\t\t\t\tthis.showEditor();\r\n\t\t\t} else {\r\n\t\t\t\tthis.autocomplete.stop();\r\n\t\t\t}\r\n\t\t},\r\n\t\tdiffRanges: function (newVal) {\r\n\t\t\tthis.setNumExtraData();\r\n\t\t},\r\n\t\tnowCursorPos: {\r\n\t\t\thandler: function (newVal) {\r\n\t\t\t\tEventBus.$emit('cursor-change', {\r\n\t\t\t\t\tline: newVal ? newVal.line : '?',\r\n\t\t\t\t\tcolumn: newVal ? newVal.column : '?',\r\n\t\t\t\t});\r\n\t\t\t\tthis.renderBracketMatch();\r\n\t\t\t},\r\n\t\t\tdeep: true,\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tthis.initData();\r\n\t\tthis.initEvent();\r\n\t\tthis.initEventBus();\r\n\t},\r\n\tmounted() {\r\n\t\tthis.initResizeEvent();\r\n\t\tif (this.active) {\r\n\t\t\tthis.showEditor();\r\n\t\t\tif (this.type === 'diff') {\r\n\t\t\t\tthis.showDiff();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdestroyed() {\r\n\t\tthis.unbindEvent();\r\n\t\tthis.myContext.destroy();\r\n\t\tthis.tokenizer.destroy();\r\n\t\tthis.lint.destroy();\r\n\t\tthis.history.destroy();\r\n\t\tthis.selecter.destroy();\r\n\t\tthis.fSelecter.destroy();\r\n\t\tthis.cursor.destroy();\r\n\t\tthis.autocomplete.destroy();\r\n\t\tthis.folder.destroy();\r\n\r\n\t\tcontexts[this.tabData.id] = null;\r\n\t\tthis.tokenizer = null;\r\n\t\tthis.lint = null;\r\n\t\tthis.history = null;\r\n\t\tthis.selecter = null;\r\n\t\tthis.fSelecter = null;\r\n\t\tthis.cursor = null;\r\n\t\tthis.autocomplete = null;\r\n\t\tthis.folder = null;\r\n\r\n\t\tthis.renderedLineMap = null;\r\n\t\tthis.renderedIdMap = null;\r\n\t\tthis.errorMap = null;\r\n\t\tthis.errors = null;\r\n\t\tthis.autoTipList = null;\r\n\t\tthis.renderObjs = null;\r\n\t\tthis.renderNums = null;\r\n\t\tthis.renderCursorObjs = null;\r\n\t\tthis.renderSelectionObjs = null;\r\n\t\tthis.renderedLineMap = null;\r\n\t\tthis.renderedIdMap = null;\r\n\t\tthis.renderNumsIdMap = null;\r\n\t\tthis.diffRanges = null;\r\n\t\tthis.diffTabData = null;\r\n\t\tthis.tipContent = null;\r\n\r\n\t\tcancelAnimationFrame(this.focusTimer);\r\n\t\tcancelAnimationFrame(this.renderTimer);\r\n\t\tclearTimeout(this.curserTimer);\r\n\t\tclearTimeout(this.renderSelectedBgTimer);\r\n\t\tclearTimeout(this.bracketMatchTimer);\r\n\t\tclearTimeout(this.setAutoTip.hideTimer);\r\n\t\tclearTimeout(this.compositionendTimer);\r\n\t\tglobalData.scheduler.removeUiTask(this.moveTask);\r\n\t\tglobalData.scheduler.removeUiTask(this.wheelTask);\r\n\t},\r\n\tmethods: {\r\n\t\t// 初始化数据\r\n\t\tinitData() {\r\n\t\t\tthis.editorId = this.tabData.id;\r\n\t\t\tcontexts[this.editorId] = new Context(this);\r\n\t\t\tthis.maxWidthObj.lineId = this.myContext.htmls[0].lineId;\r\n\t\t\tthis.tokenizer = new Tokenizer(this, this.myContext);\r\n\t\t\tthis.lint = new Lint(this, this.myContext);\r\n\t\t\tthis.formatter = new Formatter(this, this.myContext);\r\n\t\t\tthis.differ = new Differ(this, this.myContext);\r\n\t\t\tthis.autocomplete = new Autocomplete(this, this.myContext);\r\n\t\t\tthis.folder = new Fold(this, this.myContext);\r\n\t\t\tthis.history = new History(this, this.myContext);\r\n\t\t\tthis.selecter = new Select(this, this.myContext);\r\n\t\t\tthis.searcher = new Search(this, this.myContext, this.selecter);\r\n\t\t\tthis.fSelecter = new Select(this, this.myContext);\r\n\t\t\tthis.fSearcher = new Search(this, this.myContext, this.fSelecter);\r\n\t\t\tthis.shortcut = new ShortCut(this, this.myContext);\r\n\t\t\tthis.cursor = new Cursor(this, this.myContext);\r\n\t\t\tthis.cursor.addCursorPos(this.nowCursorPos);\r\n\t\t\tthis.wordPattern = Util.getWordPattern(this.language);\r\n\t\t\tthis.wordPattern = new RegExp(`^(${this.wordPattern.source})`);\r\n\t\t\tthis.selectedFg = !!globalData.colors['editor.selectionForeground'];\r\n\t\t\tthis.minimapVisible = this.type !== 'diff' && globalData.views.minimap;\r\n\t\t},\r\n\t\tinitRenderData() {\r\n\t\t\tthis.charObj = Util.getCharWidth(this.$refs.content, '<div class=\"my-line\"><div class=\"my-code\">[dom]</div></div>');\r\n\t\t\tthis.maxVisibleLines = Math.ceil(this.$refs.scroller.clientHeight / this.charObj.charHight) + 1;\r\n\t\t},\r\n\t\t// 初始化文档事件\r\n\t\tinitEvent() {\r\n\t\t\tthis.initEventFn1 = (e) => {\r\n\t\t\t\tthis.active && this.onDocumentMmove(e);\r\n\t\t\t};\r\n\t\t\tthis.initEventFn2 = (e) => {\r\n\t\t\t\tthis.active && this.onDocumentMouseUp(e);\r\n\t\t\t};\r\n\t\t\t$(document).on('mousemove', this.initEventFn1);\r\n\t\t\t$(document).on('mouseup', this.initEventFn2);\r\n\t\t},\r\n\t\tinitResizeEvent() {\r\n\t\t\tconst resizeObserver = new ResizeObserver((entries) => {\r\n\t\t\t\tif (this.active) {\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tif (this.$refs.scroller) {\r\n\t\t\t\t\t\t\tthis.showEditor();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tresizeObserver.observe(this.$refs.editor);\r\n\t\t},\r\n\t\tinitEventBus() {\r\n\t\t\tthis.initEventBusFn = {};\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'language-change',\r\n\t\t\t\t(this.initEventBusFn['language-change'] = (data) => {\r\n\t\t\t\t\tif (this.tabData.id === data.id) {\r\n\t\t\t\t\t\tif (this.active) {\r\n\t\t\t\t\t\t\tthis.language = data.language;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._language = data.language;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'tab-size-change',\r\n\t\t\t\t(this.initEventBusFn['tab-size-change'] = (tabSize) => {\r\n\t\t\t\t\tif (this.active) {\r\n\t\t\t\t\t\tthis.tabSize = tabSize;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'indent-change',\r\n\t\t\t\t(this.initEventBusFn['indent-change'] = (indent) => {\r\n\t\t\t\t\tif (this.active) {\r\n\t\t\t\t\t\tthis.indent = indent;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'convert-to-space',\r\n\t\t\t\t(this.initEventBusFn['convert-to-space'] = () => {\r\n\t\t\t\t\tif (this.active) {\r\n\t\t\t\t\t\tthis.myContext.convertTabToSpace();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'convert-to-tab',\r\n\t\t\t\t(this.initEventBusFn['convert-to-tab'] = () => {\r\n\t\t\t\t\tif (this.active) {\r\n\t\t\t\t\t\tthis.myContext.convertSpaceToTab();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'close-menu',\r\n\t\t\t\t(this.initEventBusFn['close-menu'] = () => {\r\n\t\t\t\t\tthis.autoTipList = null;\r\n\t\t\t\t\tthis.autocomplete.stop();\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'theme-changed',\r\n\t\t\t\t(this.initEventBusFn['theme-changed'] = (theme) => {\r\n\t\t\t\t\tif (this.active) {\r\n\t\t\t\t\t\tthis.theme = theme;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._theme = theme;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'git-diff',\r\n\t\t\t\t(this.initEventBusFn['git-diff'] = (data) => {\r\n\t\t\t\t\tif (this.active && data && data.path === this.tabData.path) {\r\n\t\t\t\t\t\tthis.differ.run();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'git-statused',\r\n\t\t\t\t(this.initEventBusFn['git-statused'] = (data) => {\r\n\t\t\t\t\tif (this.tabData.path === data.path) {\r\n\t\t\t\t\t\tlet status = null;\r\n\t\t\t\t\t\tstatus = Util.getFileStatus(this.tabData.path);\r\n\t\t\t\t\t\tif (this.preStatus !== status.originStatus) {\r\n\t\t\t\t\t\t\tthis.active && this.differ.run();\r\n\t\t\t\t\t\t\tthis.preStatus = status.originStatus;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'render-line',\r\n\t\t\t\t(this.initEventBusFn['render-line'] = (data) => {\r\n\t\t\t\t\tif (this.editorId === data.editorId) {\r\n\t\t\t\t\t\tthis.renderLine(data.lineId);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'file-saved',\r\n\t\t\t\t(this.initEventBusFn['file-saved'] = (path) => {\r\n\t\t\t\t\tif (this.tabData.path === path) {\r\n\t\t\t\t\t\tthis.history.save();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'file-opened',\r\n\t\t\t\t(this.initEventBusFn['file-opened'] = (path) => {\r\n\t\t\t\t\tif (this.tabData.path === path || this.tabData.tempPath === path) {\r\n\t\t\t\t\t\tthis.history.clear();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'editor-format',\r\n\t\t\t\t(this.initEventBusFn['editor-format'] = (id) => {\r\n\t\t\t\t\tif (id === this.tabData.id) {\r\n\t\t\t\t\t\tthis.formatter.run();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'minimap-toggle',\r\n\t\t\t\t(this.initEventBusFn['minimap-toggle'] = () => {\r\n\t\t\t\t\tthis.minimapVisible = !this.minimapVisible;\r\n\t\t\t\t\tif (this.active) {\r\n\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\tthis.$refs.minimap && this.$refs.minimap.renderAllDiff(true);\r\n\t\t\t\t\t\t\tthis.render();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tEventBus.$on(\r\n\t\t\t\t'window-close',\r\n\t\t\t\t(this.initEventBusFn['window-close'] = () => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tthis.lint.worker && this.lint.worker.kill();\r\n\t\t\t\t\t\tthis.formatter.worker && this.formatter.worker.kill();\r\n\t\t\t\t\t} catch (e) {}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t},\r\n\t\tunbindEvent() {\r\n\t\t\t$(document).unbind('mousemove', this.initEventFn1);\r\n\t\t\t$(document).unbind('mouseup', this.initEventFn2);\r\n\t\t\tEventBus.$off('language-change', this.initEventBusFn['language-change']);\r\n\t\t\tEventBus.$off('tab-size-change', this.initEventBusFn['tab-size-change']);\r\n\t\t\tEventBus.$off('indent-change', this.initEventBusFn['indent-change']);\r\n\t\t\tEventBus.$off('convert-to-tab', this.initEventBusFn['convert-to-tab']);\r\n\t\t\tEventBus.$off('convert-to-space', this.initEventBusFn['convert-to-space']);\r\n\t\t\tEventBus.$off('close-menu', this.initEventBusFn['close-menu']);\r\n\t\t\tEventBus.$off('theme-changed', this.initEventBusFn['theme-changed']);\r\n\t\t\tEventBus.$off('git-diff', this.initEventBusFn['git-diff']);\r\n\t\t\tEventBus.$off('git-statused', this.initEventBusFn['git-statused']);\r\n\t\t\tEventBus.$off('render-line', this.initEventBusFn['render-line']);\r\n\t\t\tEventBus.$off('file-saved', this.initEventBusFn['file-saved']);\r\n\t\t\tEventBus.$off('file-opened', this.initEventBusFn['file-opened']);\r\n\t\t\tEventBus.$off('editor-format', this.initEventBusFn['editor-format']);\r\n\t\t\tEventBus.$off('minimap-toggle', this.initEventBusFn['minimap-toggle']);\r\n\t\t\tEventBus.$off('window-close', this.initEventBusFn['window-close']);\r\n\t\t},\r\n\t\tshowEditor() {\r\n\t\t\t// 元素暂时不可见\r\n\t\t\tif (!this.$refs.scroller.clientHeight) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.language = this._language || '';\r\n\t\t\tthis.theme = this._theme || '';\r\n\t\t\tthis.initRenderData();\r\n\t\t\tthis.setScrollerArea();\r\n\t\t\tthis.setContentHeight();\r\n\t\t\tthis.render();\r\n\t\t\tthis.focus();\r\n\t\t\tif (this.type !== 'diff') {\r\n\t\t\t\t// 获取文件git修改记录\r\n\t\t\t\tthis.differ.run();\r\n\t\t\t\tthis.preStatus = this.tabData.status;\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowDiff() {\r\n\t\t\tlet line = 1;\r\n\t\t\tlet column = 0;\r\n\t\t\tthis.language = this.diffObj.language;\r\n\t\t\tthis._language = this.diffObj.language;\r\n\t\t\tthis.myContext.insertContent(this.diffObj.diff.deleted.concat(this.diffObj.diff.added).join('\\n'));\r\n\t\t\tif (this.diffObj.diff.added.length) {\r\n\t\t\t\tlet delta = this.diffObj.line - this.diffObj.diff.line;\r\n\t\t\t\tline = this.diffObj.deletedLength + delta + 1;\r\n\t\t\t\tcolumn = this.diffObj.diff.added[delta].length;\r\n\t\t\t} else {\r\n\t\t\t\tline = this.diffObj.deletedLength;\r\n\t\t\t\tcolumn = this.diffObj.diff.deleted.peek().length;\r\n\t\t\t}\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tlet scrollTop = (line - 1) * this.charObj.charHight;\r\n\t\t\t\tscrollTop = scrollTop > 0 ? scrollTop : 0;\r\n\t\t\t\tif (scrollTop > this.contentHeight - this.scrollerArea.height) {\r\n\t\t\t\t\tlet top = scrollTop - (this.contentHeight - this.scrollerArea.height);\r\n\t\t\t\t\tscrollTop = this.contentHeight - this.scrollerArea.height;\r\n\t\t\t\t\tthis.$parent.diffMarginTop = -top;\r\n\t\t\t\t\tthis.$parent.setDiffTop();\r\n\t\t\t\t}\r\n\t\t\t\tthis.setStartLine(scrollTop);\r\n\t\t\t\tthis.cursor.setCursorPos({ line: line, column: column });\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 显示光标\r\n\t\tshowCursor() {\r\n\t\t\tthis.cursorFocus = true;\r\n\t\t\tif (!this.cursor.multiCursorPos.size) {\r\n\t\t\t\tthis.hasShowCursor = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.hasShowCursor) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.hasShowCursor = true;\r\n\t\t\tthis.cursorVisible = true;\r\n\t\t\tlet _timer = () => {\r\n\t\t\t\tclearTimeout(this.curserTimer);\r\n\t\t\t\tthis.curserTimer = setTimeout(() => {\r\n\t\t\t\t\tthis.cursorVisible = !this.cursorVisible;\r\n\t\t\t\t\t_timer();\r\n\t\t\t\t}, 500);\r\n\t\t\t};\r\n\t\t\t_timer();\r\n\t\t},\r\n\t\t// 隐藏光标\r\n\t\thideCursor() {\r\n\t\t\tclearTimeout(this.curserTimer);\r\n\t\t\tthis.hasShowCursor = false;\r\n\t\t\tthis.cursorFocus = false;\r\n\t\t},\r\n\t\tshowScrollBar() {\r\n\t\t\tthis.scrollVisible = true;\r\n\t\t},\r\n\t\thideScrollBar() {\r\n\t\t\tthis.scrollVisible = false;\r\n\t\t},\r\n\t\t// 聚焦\r\n\t\tfocus() {\r\n\t\t\tcancelAnimationFrame(this.focusTimer);\r\n\t\t\tthis.focusTimer = requestAnimationFrame(() => {\r\n\t\t\t\tthis.$refs.textarea && this.$refs.textarea.focus();\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 渲染\r\n\t\trender(scrollToCursor) {\r\n\t\t\tcancelAnimationFrame(this.renderTimer);\r\n\t\t\tthis.renderBracketMatch();\r\n\t\t\tthis.renderTimer = requestAnimationFrame(() => {\r\n\t\t\t\tthis.renderLines();\r\n\t\t\t\tthis.renderSelectedBg();\r\n\t\t\t\tthis.renderError();\r\n\t\t\t\tthis.renderCursor(scrollToCursor);\r\n\t\t\t\tthis.$refs.minimap && this.$refs.minimap.render();\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 渲染代码\r\n\t\trenderLines() {\r\n\t\t\tlet toRnederNums = [];\r\n\t\t\tthis.endLine = 0;\r\n\t\t\tthis.renderedLineMap = [];\r\n\t\t\tthis.renderedIdMap = [];\r\n\t\t\tthis.renderNumsIdMap = [];\r\n\t\t\tfor (let i = 0, startLine = this.startLine; i < this.maxVisibleLines && startLine <= this.myContext.htmls.length; i++) {\r\n\t\t\t\tlet lineObj = this.myContext.htmls[startLine - 1];\r\n\t\t\t\tlet obj = this.getRenderObj(lineObj, startLine);\r\n\t\t\t\tlet fold = this.folder.getFoldByLine(startLine);\r\n\t\t\t\ttoRnederNums.push(startLine);\r\n\t\t\t\tthis.endLine = startLine;\r\n\t\t\t\tthis.renderedLineMap[startLine] = obj;\r\n\t\t\t\tthis.renderedIdMap[lineObj.lineId] = obj;\r\n\t\t\t\tif (fold) {\r\n\t\t\t\t\tstartLine = fold.end.line;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstartLine++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_setRenderObjs.call(this);\r\n\r\n\t\t\tfunction _setRenderObjs() {\r\n\t\t\t\tlet renderNumMap = {};\r\n\t\t\t\tlet renderNums = [];\r\n\t\t\t\tlet preRenderObjs = this.renderObjs;\r\n\t\t\t\tthis.renderObjs = [];\r\n\t\t\t\tpreRenderObjs.forEach((item, index) => {\r\n\t\t\t\t\tif (this.renderedLineMap[item.num] && index < toRnederNums.length) {\r\n\t\t\t\t\t\tthis.renderObjs[index] = this.renderedLineMap[item.num];\r\n\t\t\t\t\t\tthis.renderedLineMap[item.num].index = index;\r\n\t\t\t\t\t\trenderNumMap[item.num] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\ttoRnederNums.forEach((num) => {\r\n\t\t\t\t\tif (!renderNumMap[num]) {\r\n\t\t\t\t\t\trenderNums.push(num);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\ttoRnederNums.forEach((num, index) => {\r\n\t\t\t\t\tif (!this.renderObjs[index]) {\r\n\t\t\t\t\t\tlet renderObj = this.renderedLineMap[renderNums.pop()];\r\n\t\t\t\t\t\tthis.renderObjs[index] = renderObj;\r\n\t\t\t\t\t\trenderObj.index = index;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.renderNums = this.renderObjs.map((item) => {\r\n\t\t\t\t\tlet numObj = {\r\n\t\t\t\t\t\tlineId: item.lineId,\r\n\t\t\t\t\t\tnum: item.num,\r\n\t\t\t\t\t\ttop: item.top,\r\n\t\t\t\t\t\tfold: item.fold,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.renderNumsIdMap[item.lineId] = numObj;\r\n\t\t\t\t\treturn numObj;\r\n\t\t\t\t});\r\n\t\t\t\tthis.setNumExtraData();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 渲染单行代码\r\n\t\trenderLine(lineId) {\r\n\t\t\tlet renderObj = this.renderedIdMap[lineId];\r\n\t\t\tlet numObj = this.renderNumsIdMap[lineId];\r\n\t\t\tif (renderObj) {\r\n\t\t\t\tlet lineObj = this.myContext.htmls[renderObj.num - 1];\r\n\t\t\t\tif (lineObj && lineObj.lineId === lineId) {\r\n\t\t\t\t\tlet bgClass = renderObj.bgClass;\r\n\t\t\t\t\tObject.assign(renderObj, this.getRenderObj(lineObj, renderObj.num));\r\n\t\t\t\t\trenderObj.bgClass = bgClass;\r\n\t\t\t\t\tnumObj.fold = renderObj.fold;\r\n\t\t\t\t\tthis.$set(this.renderObjs, renderObj.index, renderObj);\r\n\t\t\t\t\tthis.$set(this.renderNums, renderObj.index, numObj);\r\n\t\t\t\t\tthis.renderSelectionToken(renderObj.num);\r\n\t\t\t\t\tthis.renderError(renderObj.num);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderSelectedBgAsync() {\r\n\t\t\tif (this.renderSelectedBgTimer) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.renderSelectedBgTimer = setTimeout(() => {\r\n\t\t\t\tthis.renderSelectedBg(true);\r\n\t\t\t\tthis.$refs.minimap && this.$refs.minimap.renderSelectedBg();\r\n\t\t\t\tthis.$refs.minimap && this.$refs.minimap.renderAllSearchdBg();\r\n\t\t\t\tthis.renderSelectedBgTimer = null;\r\n\t\t\t}, 15);\r\n\t\t},\r\n\t\trenderSelectedBg(isAsync) {\r\n\t\t\tclearTimeout(this.renderSelectedBgTimer);\r\n\t\t\tthis.renderSelectedBgTimer = null;\r\n\t\t\tthis.activeLineBg = true;\r\n\t\t\tthis.clearSelectionToken();\r\n\t\t\tif (isAsync) {\r\n\t\t\t\tthis.renderObjs.forEach((renderObj, index) => {\r\n\t\t\t\t\trenderObj.bgClass = '';\r\n\t\t\t\t\tthis.$set(this.renderObjs, index, renderObj);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.fSelecter.ranges.forEach((range) => {\r\n\t\t\t\tthis._renderWholeLineBg(range, true);\r\n\t\t\t});\r\n\t\t\tthis.selecter.ranges.forEach((range) => {\r\n\t\t\t\tlet _range = this.fSelecter.getRangeByCursorPos(range.start);\r\n\t\t\t\tif (this.searchVisible) {\r\n\t\t\t\t\t// 优先渲染搜索框的选中范围\r\n\t\t\t\t\tif (!_range && range.active) {\r\n\t\t\t\t\t\tthis._renderWholeLineBg(range);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._renderWholeLineBg(range);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.renderSelectionObjs = [];\r\n\t\t\t\tthis.fSelecter.ranges.forEach((range) => {\r\n\t\t\t\t\tthis._renderSelectedBg(range, true);\r\n\t\t\t\t});\r\n\t\t\t\tthis.selecter.ranges.forEach((range) => {\r\n\t\t\t\t\tlet _range = this.fSelecter.getRangeByCursorPos(range.start);\r\n\t\t\t\t\tif (this.searchVisible) {\r\n\t\t\t\t\t\t// 优先渲染搜索框的选中范围\r\n\t\t\t\t\t\tif (!_range && range.active) {\r\n\t\t\t\t\t\t\tthis._renderSelectedBg(range);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._renderSelectedBg(range);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 渲染整行选中的背景\r\n\t\t_renderWholeLineBg(range, isFsearch) {\r\n\t\t\tlet firstLine = this.startLine;\r\n\t\t\tlet lastLine = this.endLine;\r\n\t\t\tlet start = range.start;\r\n\t\t\tlet end = range.end;\r\n\t\t\tlet cross = false;\r\n\t\t\tfirstLine = firstLine > start.line + 1 ? firstLine : start.line + 1;\r\n\t\t\tlastLine = lastLine < end.line - 1 ? lastLine : end.line - 1;\r\n\t\t\tcross = firstLine <= this.startLine && lastLine >= this.startLine;\r\n\t\t\tcross = cross || (firstLine >= this.startLine && lastLine <= this.endLine);\r\n\t\t\tcross = cross || (firstLine <= this.endLine && lastLine >= this.endLine);\r\n\t\t\tif (cross) {\r\n\t\t\t\tfor (let i = 0; i < this.renderObjs.length; i++) {\r\n\t\t\t\t\tlet renderObj = this.renderObjs[i];\r\n\t\t\t\t\tif (renderObj.num >= firstLine && renderObj.num <= lastLine) {\r\n\t\t\t\t\t\trenderObj.bgClass = 'my-select-bg';\r\n\t\t\t\t\t\tif (range.active) {\r\n\t\t\t\t\t\t\trenderObj.bgClass += ' my-active';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// range.active为false时，样式可能只显示边框，不改变字体颜色和背景\r\n\t\t\t\t\t\tif (range.active && range.isFsearch && this.selectedFg) {\r\n\t\t\t\t\t\t\trenderObj.bgClass += ' my-select-fg';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$set(this.renderObjs, i, renderObj);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (start.line === this.nowCursorPos.line || end.line === this.nowCursorPos.line) {\r\n\t\t\t\tthis.activeLineBg = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 渲染首尾行选中的背景\r\n\t\t_renderSelectedBg(range, isFsearch) {\r\n\t\t\tlet start = range.start;\r\n\t\t\tlet end = range.end;\r\n\t\t\tlet text = this.myContext.htmls[start.line - 1].text;\r\n\t\t\tlet endColumn = text.length;\r\n\t\t\tif (this.renderedLineMap[start.line]) {\r\n\t\t\t\tlet renderObj = this.renderedLineMap[start.line];\r\n\t\t\t\tstart.left = this.getExactLeft(start);\r\n\t\t\t\tif (start.line == end.line) {\r\n\t\t\t\t\tstart.width = this.getExactLeft(end) - start.left || 10;\r\n\t\t\t\t\tstart.width += 'px';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstart.width = this.getExactLeft({ line: start.line, column: text.length }) - start.left || 10;\r\n\t\t\t\t\tstart.width += 'px';\r\n\t\t\t\t}\r\n\t\t\t\tstart.left += 'px';\r\n\t\t\t\tthis.renderSelectionObjs.push({\r\n\t\t\t\t\tleft: start.left,\r\n\t\t\t\t\ttop: renderObj.top,\r\n\t\t\t\t\twidth: start.width,\r\n\t\t\t\t\tactive: range.active,\r\n\t\t\t\t\tisFsearch: isFsearch,\r\n\t\t\t\t});\r\n\t\t\t\tif (end.line == start.line) {\r\n\t\t\t\t\tendColumn = end.column;\r\n\t\t\t\t}\r\n\t\t\t\t// range.active为false时，样式可能只显示边框，不改变字体颜色和背景\r\n\t\t\t\trange.active && this._renderSelectionToken(start.line, start.column, endColumn);\r\n\t\t\t}\r\n\t\t\tif (end.line > start.line && this.renderedLineMap[end.line]) {\r\n\t\t\t\tlet renderObj = this.renderedLineMap[end.line];\r\n\t\t\t\tend.left = '0px';\r\n\t\t\t\ttext = this.myContext.htmls[end.line - 1].text;\r\n\t\t\t\tend.width = this.getExactLeft(end) || 10;\r\n\t\t\t\tend.width += 'px';\r\n\t\t\t\tthis.renderSelectionObjs.push({\r\n\t\t\t\t\tleft: end.left,\r\n\t\t\t\t\ttop: renderObj.top,\r\n\t\t\t\t\twidth: end.width,\r\n\t\t\t\t\tactive: range.active,\r\n\t\t\t\t\tisFsearch: isFsearch,\r\n\t\t\t\t});\r\n\t\t\t\t// range.active为false时，样式可能只显示边框，不改变字体颜色和背景\r\n\t\t\t\trange.active && this._renderSelectionToken(end.line, 0, end.column);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderSelectionToken(line) {\r\n\t\t\t// 只有设置了选中前景色才处理\r\n\t\t\tif (!this.selectedFg) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet results = this.selecter.getRangeByLine(line);\r\n\t\t\tresults.forEach((range) => {\r\n\t\t\t\tif (range.active) {\r\n\t\t\t\t\tlet startColumn = range.start.column;\r\n\t\t\t\t\tlet endColumn = range.end.column;\r\n\t\t\t\t\tif (range.start.line === line) {\r\n\t\t\t\t\t\tif (range.end.line > range.start.line) {\r\n\t\t\t\t\t\t\tendColumn = this.myContext.htmls[range.start.line - 1].text.length;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstartColumn = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._renderSelectionToken(line, startColumn, endColumn);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t_renderSelectionToken(line, startColumn, endColumn) {\r\n\t\t\t// 只有设置了选中前景色才处理\r\n\t\t\tif (!this.selectedFg) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet lineObj = this.myContext.htmls[line - 1];\r\n\t\t\tlet tokens = lineObj.tokens;\r\n\t\t\tlet scopes = ['selected'];\r\n\t\t\tlet _tokens = [];\r\n\t\t\tif (!tokens) {\r\n\t\t\t\ttokens = [{ startIndex: 0, endIndex: lineText.length, scopes: ['plain'] }];\r\n\t\t\t\ttokens = this.tokenizer.splitLongToken(tokens);\r\n\t\t\t}\r\n\t\t\tthis.myContext.fgLines.push(line);\r\n\t\t\tfor (let i = 0; i < tokens.length; i++) {\r\n\t\t\t\tlet token = tokens[i];\r\n\t\t\t\tif (token.startIndex <= startColumn && token.endIndex > startColumn) {\r\n\t\t\t\t\tif (token.startIndex < startColumn) {\r\n\t\t\t\t\t\t_tokens.push({\r\n\t\t\t\t\t\t\tstartIndex: token.startIndex,\r\n\t\t\t\t\t\t\tendIndex: startColumn,\r\n\t\t\t\t\t\t\tscopes: token.scopes,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (token.endIndex > endColumn) {\r\n\t\t\t\t\t\t_tokens.push({\r\n\t\t\t\t\t\t\tstartIndex: startColumn,\r\n\t\t\t\t\t\t\tendIndex: endColumn,\r\n\t\t\t\t\t\t\tscopes: scopes,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_tokens.push({\r\n\t\t\t\t\t\t\tstartIndex: endColumn,\r\n\t\t\t\t\t\t\tendIndex: token.endIndex,\r\n\t\t\t\t\t\t\tscopes: token.scopes,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_tokens = _tokens.concat(tokens.slice(i + 1));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_tokens.push({\r\n\t\t\t\t\t\t\tstartIndex: startColumn,\r\n\t\t\t\t\t\t\tendIndex: token.endIndex,\r\n\t\t\t\t\t\t\tscopes: scopes,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (token.startIndex > startColumn && token.endIndex <= endColumn) {\r\n\t\t\t\t\t_tokens.push({\r\n\t\t\t\t\t\tstartIndex: token.startIndex,\r\n\t\t\t\t\t\tendIndex: token.endIndex,\r\n\t\t\t\t\t\tscopes: scopes,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (token.startIndex < endColumn && token.endIndex > endColumn) {\r\n\t\t\t\t\t_tokens.push({\r\n\t\t\t\t\t\tstartIndex: token.startIndex,\r\n\t\t\t\t\t\tendIndex: endColumn,\r\n\t\t\t\t\t\tscopes: scopes,\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_tokens.push({\r\n\t\t\t\t\t\tstartIndex: endColumn,\r\n\t\t\t\t\t\tendIndex: token.endIndex,\r\n\t\t\t\t\t\tscopes: token.scopes,\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_tokens = _tokens.concat(tokens.slice(i + 1));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else if (token.startIndex >= endColumn) {\r\n\t\t\t\t\t_tokens = _tokens.concat(tokens.slice(i));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_tokens.push(token);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlineObj.html = this.tokenizer.createHtml(_tokens, lineObj.text);\r\n\t\t\tthis.renderedIdMap[lineObj.lineId].html = lineObj.html;\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tlineObj.fgTokens = _tokens;\r\n\t\t\t});\r\n\t\t},\r\n\t\trenderBracketMatch() {\r\n\t\t\tclearTimeout(this.bracketMatchTimer);\r\n\t\t\tthis.bracketMatchTimer = setTimeout(() => {\r\n\t\t\t\tthis.bracketMatch = null;\r\n\t\t\t\tthis.folder.getBracketMatch(this.nowCursorPos, (bracketMatch) => {\r\n\t\t\t\t\tlet lineObj = null;\r\n\t\t\t\t\tlet pos = null;\r\n\t\t\t\t\tthis.bracketMatch = bracketMatch;\r\n\t\t\t\t\tif (this.bracketMatch) {\r\n\t\t\t\t\t\tlineObj = this.myContext.htmls[this.bracketMatch.start.line - 1];\r\n\t\t\t\t\t\tpos = this.bracketMatch.start;\r\n\t\t\t\t\t\tpos.width = this.getStrWidth(lineObj.text, pos.startIndex, pos.endIndex) + 'px';\r\n\t\t\t\t\t\tpos.left = this.getStrWidth(lineObj.text, 0, pos.startIndex) + 'px';\r\n\t\t\t\t\t\tpos.top = (this.folder.getRelativeLine(pos.line) - 1) * this.charObj.charHight - this.deltaTop + 'px';\r\n\t\t\t\t\t\tlineObj = this.myContext.htmls[this.bracketMatch.end.line - 1];\r\n\t\t\t\t\t\tpos = this.bracketMatch.end;\r\n\t\t\t\t\t\tpos.width = this.getStrWidth(lineObj.text, pos.startIndex, pos.endIndex) + 'px';\r\n\t\t\t\t\t\tpos.left = this.getStrWidth(lineObj.text, 0, pos.startIndex) + 'px';\r\n\t\t\t\t\t\tpos.top = (this.folder.getRelativeLine(pos.line) - 1) * this.charObj.charHight - this.deltaTop + 'px';\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, 100);\r\n\t\t},\r\n\t\t// 清除选中前景色\r\n\t\tclearSelectionToken() {\r\n\t\t\tthis.renderObjs.forEach((item) => {\r\n\t\t\t\titem.selected = false;\r\n\t\t\t});\r\n\t\t\tthis.myContext.fgLines.forEach((line) => {\r\n\t\t\t\tthis._clearSelectionToken(line);\r\n\t\t\t});\r\n\t\t\tthis.myContext.fgLines.empty();\r\n\t\t},\r\n\t\t_clearSelectionToken(line) {\r\n\t\t\tlet lineObj = this.myContext.htmls[line - 1];\r\n\t\t\tlet renderObj = this.renderedLineMap[line];\r\n\t\t\tif (!lineObj || !lineObj.fgTokens) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlineObj.fgTokens = null;\r\n\t\t\tif (renderObj) {\r\n\t\t\t\trenderObj.html = this.tokenizer.createHtml(lineObj.tokens, lineObj.text);\r\n\t\t\t}\r\n\t\t\tlineObj.html = '';\r\n\t\t},\r\n\t\t// 渲染光标\r\n\t\trenderCursor(scrollToCursor) {\r\n\t\t\tlet that = this;\r\n\t\t\tthis.scrollToCursor = scrollToCursor;\r\n\t\t\tif (this.renderCursorTimer) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.renderCursorTimer = requestAnimationFrame(() => {\r\n\t\t\t\tthis.renderCursorTimer = null;\r\n\t\t\t\tthis.renderCursorObjs = [];\r\n\t\t\t\tthis.renderObjs.forEach((item) => {\r\n\t\t\t\t\t_setLine(item);\r\n\t\t\t\t});\r\n\t\t\t\tthis.cursorVisible = true;\r\n\t\t\t\tif (this.$refs.minimap) {\r\n\t\t\t\t\tthis.$refs.minimap.renderCursor();\r\n\t\t\t\t\tthis.$refs.minimap.renderAllCursor();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfunction _setLine(item) {\r\n\t\t\t\tlet cursorList = [];\r\n\t\t\t\tthat.cursor.getCursorsByLine(item.num).forEach((cursorPos) => {\r\n\t\t\t\t\tcursorList.push({ top: item.top, left: _setCursorRealPos(cursorPos) });\r\n\t\t\t\t});\r\n\t\t\t\tthat.renderCursorObjs.push(cursorList);\r\n\t\t\t}\r\n\r\n\t\t\tfunction _setCursorRealPos(cursorPos) {\r\n\t\t\t\tlet left = 0;\r\n\t\t\t\tif (cursorPos.del) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tleft = that.getExactLeft(cursorPos);\r\n\t\t\t\t// 强制滚动使光标处于可见区域\r\n\t\t\t\tif (that.scrollToCursor && cursorPos === that.nowCursorPos) {\r\n\t\t\t\t\tif (left > that.scrollerArea.width + that.scrollLeft - that.charObj.fullAngleCharWidth) {\r\n\t\t\t\t\t\tthat.scrollLeft = left + that.charObj.fullAngleCharWidth - that.scrollerArea.width;\r\n\t\t\t\t\t} else if (left < that.scrollLeft) {\r\n\t\t\t\t\t\tthat.scrollLeft = left - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (cursorPos === that.nowCursorPos) {\r\n\t\t\t\t\tthat.cursorLeft = left - that.scrollLeft;\r\n\t\t\t\t}\r\n\t\t\t\treturn left + 'px';\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderError(line) {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t_renderError.call(this);\r\n\t\t\t});\r\n\r\n\t\t\tfunction _renderError() {\r\n\t\t\t\tlet $content = $(this.$refs.content);\r\n\t\t\t\tlet keyMap = {};\r\n\t\t\t\t$content.find('span.my-token-error').remove();\r\n\t\t\t\tthis.errors.forEach((item) => {\r\n\t\t\t\t\tlet key = item.line + ',' + item.originColumn;\r\n\t\t\t\t\tlet lineObj = null;\r\n\t\t\t\t\tif ((line && item.line !== line) || keyMap[key]) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tkeyMap[key] = true;\r\n\t\t\t\t\tlineObj = this.myContext.htmls[item.line - 1];\r\n\t\t\t\t\tif (!item.endLine) {\r\n\t\t\t\t\t\titem.endLine = item.line;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.column >= lineObj.text.length) {\r\n\t\t\t\t\t\titem.column = lineObj.text.length - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!item.endColumn) {\r\n\t\t\t\t\t\tlet res = null;\r\n\t\t\t\t\t\tif ((res = this.wordPattern.exec(lineObj.text.slice(item.column)))) {\r\n\t\t\t\t\t\t\titem.endColumn = item.column + res[0].length;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\titem.endColumn = item.column + 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.endColumn > lineObj.text.length) {\r\n\t\t\t\t\t\titem.endColumn = lineObj.text.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.line === item.endLine) {\r\n\t\t\t\t\t\t_renderColError.call(this, item.line, item.column, item.endColumn, key);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_renderColError.call(this, item.line, item.column, lineObj.text.length, key);\r\n\t\t\t\t\t\t_renderColError.call(this, item.endLine, 0, item.endColumn, key);\r\n\t\t\t\t\t\tfor (let line = item.line + 1; line < item.endLine; line++) {\r\n\t\t\t\t\t\t\t_renderLineError.call(this, line, key);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction _renderColError(line, column, endColumn, key) {\r\n\t\t\t\tif (line < this.startLine || line >= this.startLine + this.maxVisibleLines || line > this.maxLine) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet left = 0;\r\n\t\t\t\tlet lineObj = this.myContext.htmls[line - 1];\r\n\t\t\t\tlet $content = $(this.$refs.content);\r\n\t\t\t\tlet spans = $content.find(`div.my-code[data-line=\"${line}\"]`).children('span');\r\n\t\t\t\tfor (let i = 0; i < spans.length; i++) {\r\n\t\t\t\t\tlet startIndex = spans[i].getAttribute('data-column');\r\n\t\t\t\t\tlet endIndex = spans[i].getAttribute('data-end');\r\n\t\t\t\t\tif (startIndex <= column && endIndex >= endIndex) {\r\n\t\t\t\t\t\tleft = spans[i].offsetLeft + this.getStrWidth(lineObj.text, startIndex, column);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet width = this.getStrWidth(lineObj.text, column, endColumn) || this.charObj.charWidth;\r\n\t\t\t\tlet html = `<span class=\"my-token-error\" style=\"width:${width}px;left:${left}px\" data-key=\"${key}\"></span>`;\r\n\t\t\t\t$content.find(`div.my-line[data-line=\"${line}\"]`).append(html);\r\n\t\t\t}\r\n\r\n\t\t\tfunction _renderLineError(line, key) {\r\n\t\t\t\tif (line < this.startLine || line >= this.startLine + this.maxVisibleLines || line > this.maxLine) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet $content = $(this.$refs.content);\r\n\t\t\t\tlet html = `<span class=\"my-token-error\" style=\"width:100%;left:0px\" data-key=\"${key}\"></span>`;\r\n\t\t\t\t$content.find(`div.my-line[data-line=\"${line}\"]`).append(html);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 折叠行\r\n\t\tfoldLine(line) {\r\n\t\t\tlet resultFold = this.folder.foldLine(line);\r\n\t\t\tthis.focus();\r\n\t\t\tif (resultFold) {\r\n\t\t\t\tthis.cursor.multiCursorPos.forEach((cursorPos) => {\r\n\t\t\t\t\tif (cursorPos.line > line && cursorPos.line < resultFold.end.line) {\r\n\t\t\t\t\t\tlet lineObj = this.myContext.htmls[line - 1];\r\n\t\t\t\t\t\tcursorPos.line = line;\r\n\t\t\t\t\t\tcursorPos.column = lineObj.text.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.setContentHeight();\r\n\t\t\t\tthis.render();\r\n\t\t\t\tthis.$refs.minimap && this.$refs.minimap.renderAllDiff();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 展开折叠行\r\n\t\tunFold(line) {\r\n\t\t\tthis.focus();\r\n\t\t\tif (this.folder.unFold(line)) {\r\n\t\t\t\tthis.setContentHeight();\r\n\t\t\t\tthis.render();\r\n\t\t\t\tthis.$refs.minimap && this.$refs.minimap.renderAllDiff();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// ctrl+f打开搜索\r\n\t\topenSearch(replaceMode) {\r\n\t\t\tlet searchDialog = this.$refs.searchDialog;\r\n\t\t\tif (this.searchVisible && (this.fSelecter.activedRanges.size || !this.cursorFocus)) {\r\n\t\t\t\t//无效操作\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.cursorFocus) {\r\n\t\t\t\tlet searchConfig = this.fSearcher.getSearchConfig();\r\n\t\t\t\tif (searchConfig) {\r\n\t\t\t\t\t//有效搜索\r\n\t\t\t\t\tsearchDialog.initData({\r\n\t\t\t\t\t\tmatchCase: searchConfig.matchCase,\r\n\t\t\t\t\t\twholeWord: searchConfig.wholeWord,\r\n\t\t\t\t\t\ttext: searchConfig.text,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (this.searchVisible) {\r\n\t\t\t\t\t//无效搜索\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.searchVisible = true;\r\n\t\t\tthis.fSearcher.clearSearch();\r\n\t\t\tthis.searchText({ config: searchDialog.getData() });\r\n\t\t\tsearchDialog.initData({ replaceVisible: !!replaceMode });\r\n\t\t\tsearchDialog.focus();\r\n\t\t},\r\n\t\t// 搜索完整单词\r\n\t\tsearchWord(direct) {\r\n\t\t\tlet resultObj = null;\r\n\t\t\tthis.searcher.search({ direct: direct });\r\n\t\t\tif (this.searchVisible) {\r\n\t\t\t\tif (this.fSelecter.activedRanges.size === 0) {\r\n\t\t\t\t\tlet searchConfig = this.fSearcher.getSearchConfig();\r\n\t\t\t\t\tif (searchConfig) {\r\n\t\t\t\t\t\tthis.fSearcher.clearSearch();\r\n\t\t\t\t\t\tresultObj = this.fSearcher.search({ direct: direct, increase: true });\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresultObj = this.fSearcher.search({ direct: direct, increase: true });\r\n\t\t\t\t}\r\n\t\t\t\tif (resultObj) {\r\n\t\t\t\t\tthis.searchNow = resultObj.now;\r\n\t\t\t\t\tthis.searchCount = resultObj.count;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsearchText(option) {\r\n\t\t\tlet resultObj = this.fSearcher.search(option);\r\n\t\t\tif (resultObj) {\r\n\t\t\t\tthis.searchNow = resultObj.now;\r\n\t\t\t\tthis.searchCount = resultObj.count;\r\n\t\t\t} else {\r\n\t\t\t\tthis.searchCount = 0;\r\n\t\t\t}\r\n\t\t},\r\n\t\treplace(data) {\r\n\t\t\tif (this.fSelecter.activedRanges.size) {\r\n\t\t\t\tlet range = this.fSearcher.getNowRange();\r\n\t\t\t\tthis.myContext.replace(data.text, [range]).then(() => {\r\n\t\t\t\t\tthis.searchText();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.searchText();\r\n\t\t\t}\r\n\t\t},\r\n\t\treplaceAll(data) {\r\n\t\t\tif (this.fSelecter.ranges.size) {\r\n\t\t\t\tthis.myContext.replace(data.text, this.fSelecter.ranges.toArray()).then(() => {\r\n\t\t\t\t\tthis.fSearcher.clearSearch();\r\n\t\t\t\t\tthis.searchCount = 0;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 上一个提示\r\n\t\tprevAutoTip() {\r\n\t\t\tthis.$refs.autoTip.prev();\r\n\t\t},\r\n\t\t// 下一个提示\r\n\t\tnextAutoTip() {\r\n\t\t\tthis.$refs.autoTip.next();\r\n\t\t},\r\n\t\tselectAutoTip() {\r\n\t\t\tlet index = this.$refs.autoTip.getActiveIndex();\r\n\t\t\tthis.onClickAuto(this.autoTipList[index]);\r\n\t\t},\r\n\t\tmoveSelection(autoDirect, speed, line) {\r\n\t\t\tlet that = this;\r\n\t\t\tlet originLine = line || this.folder.getRelativeLine(this.nowCursorPos.line);\r\n\t\t\tlet originColumn = this.nowCursorPos.column;\r\n\t\t\tlet count = 0; // 累计滚动距离\r\n\t\t\tglobalData.scheduler.removeUiTask(this.moveTask);\r\n\t\t\tthis.moveTask = globalData.scheduler.addUiTask(() => {\r\n\t\t\t\t_run(autoDirect, speed);\r\n\t\t\t});\r\n\r\n\t\t\tfunction _run(autoDirect, speed) {\r\n\t\t\t\tlet line = originLine;\r\n\t\t\t\tlet column = originColumn;\r\n\t\t\t\tswitch (autoDirect) {\r\n\t\t\t\t\tcase 'up':\r\n\t\t\t\t\t\tcount += speed;\r\n\t\t\t\t\t\tline = Math.floor(count / that.charObj.charHight);\r\n\t\t\t\t\t\tline = originLine - line;\r\n\t\t\t\t\t\tcolumn = 0;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'down':\r\n\t\t\t\t\t\tcount += speed;\r\n\t\t\t\t\t\tline = Math.floor(count / that.charObj.charHight);\r\n\t\t\t\t\t\tline = originLine + line;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\tcount += speed;\r\n\t\t\t\t\t\tcolumn = Math.floor(count / that.charObj.charWidth);\r\n\t\t\t\t\t\tcolumn = originColumn - column;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tcount += speed;\r\n\t\t\t\t\t\tcolumn = Math.floor(count / that.charObj.charWidth);\r\n\t\t\t\t\t\tcolumn = originColumn + column;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tline = that.folder.getRealLine(line);\r\n\t\t\t\tline = line < 1 ? 1 : line > that.maxLine ? that.maxLine : line;\r\n\t\t\t\tif (autoDirect === 'down') {\r\n\t\t\t\t\tcolumn = that.myContext.htmls[line - 1].text.length;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcolumn = column < 0 ? 0 : column > that.myContext.htmls[line - 1].text.length ? that.myContext.htmls[line - 1].text.length : column;\r\n\t\t\t\t}\r\n\t\t\t\tthat.mouseStartObj.cursorPos = that.cursor.setCursorPos({\r\n\t\t\t\t\tline: line,\r\n\t\t\t\t\tcolumn: column,\r\n\t\t\t\t});\r\n\t\t\t\tthat.mouseStartObj.preRange = that.selecter.setRange(that.mouseStartObj.start, {\r\n\t\t\t\t\tline: line,\r\n\t\t\t\t\tcolumn: column,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tscrollToLine(line) {\r\n\t\t\tlet scrollTop = (line - 1) * this.charObj.charHight - this.scrollerArea.height / 2;\r\n\t\t\tscrollTop = scrollTop > 0 ? scrollTop : 0;\r\n\t\t\tthis.setStartLine(scrollTop);\r\n\t\t},\r\n\t\tsetData(prop, value) {\r\n\t\t\tif (typeof this[prop] === 'function') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis[prop] = value;\r\n\t\t},\r\n\t\tsetDiffObjs(diffRanges) {\r\n\t\t\tthis.diffRanges = diffRanges;\r\n\t\t\tthis.$refs.minimap && this.$refs.minimap.renderAllDiff(true);\r\n\t\t},\r\n\t\tsetNumExtraData() {\r\n\t\t\tthis.renderNums = this.renderNums.map((item) => {\r\n\t\t\t\tif (this.type === 'diff') {\r\n\t\t\t\t\titem._num = item.num - this.diffObj.deletedLength > 0 ? item.num - this.diffObj.deletedLength + this.diffObj.beforeLine : '';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet preDiff = this.getPrevDiff(this.diffRanges, item.num);\r\n\t\t\t\t\tlet type = (preDiff && gitTypeMap[preDiff.type]) || '';\r\n\t\t\t\t\tif (type === 'delete') {\r\n\t\t\t\t\t\tif (preDiff.line === item.num + 1) {\r\n\t\t\t\t\t\t\ttype += '-bottom';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttype += '-top';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\titem.diffType = (type && 'my-diff-' + type) || '';\r\n\t\t\t\t\titem._num = item.num;\r\n\t\t\t\t}\r\n\t\t\t\treturn item;\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetNowCursorPos(nowCursorPos) {\r\n\t\t\tthis.nowCursorPos = nowCursorPos || { line: 1, column: 0 };\r\n\t\t\tif (nowCursorPos) {\r\n\t\t\t\tlet setNowCursorPosId = this.setNowCursorPosId + 1 || 1;\r\n\t\t\t\tthis.setNowCursorPosId = setNowCursorPosId;\r\n\t\t\t\t// 强制滚动使光标处于可见区域\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tif (this.setNowCursorPosId != setNowCursorPosId) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet height = this.folder.getRelativeLine(nowCursorPos.line + 1) * this.charObj.charHight;\r\n\t\t\t\t\tif (height > this.scrollTop + this.scrollerArea.height) {\r\n\t\t\t\t\t\theight = height > this.contentHeight ? this.contentHeight : height;\r\n\t\t\t\t\t\tthis.setStartLine(height - this.scrollerArea.height);\r\n\t\t\t\t\t} else if (nowCursorPos.line <= this.startLine) {\r\n\t\t\t\t\t\tlet scrollTop = (this.folder.getRelativeLine(nowCursorPos.line) - 1) * this.charObj.charHight;\r\n\t\t\t\t\t\tthis.setStartLine(scrollTop);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.active && this.renderCursor(true);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetScrollerArea() {\r\n\t\t\tthis.scrollerArea = {\r\n\t\t\t\theight: this.$refs.scroller.clientHeight,\r\n\t\t\t\twidth: this.$refs.scroller.clientWidth,\r\n\t\t\t};\r\n\t\t\tthis.maxContentHeight = this.scrollerArea.height * 10;\r\n\t\t},\r\n\t\t// 设置滚动区域真实高度\r\n\t\tsetContentHeight() {\r\n\t\t\tlet maxLine = this.myContext.htmls.length;\r\n\t\t\tlet contentHeight = 0;\r\n\t\t\tmaxLine = this.folder.getRelativeLine(maxLine);\r\n\t\t\tcontentHeight = maxLine * this.charObj.charHight;\r\n\t\t\tif (this.scrollerArea.height) {\r\n\t\t\t\tif (this.type === 'diff') {\r\n\t\t\t\t\tcontentHeight += 14;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontentHeight += this.scrollerArea.height - this.charObj.charHight;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.contentHeight = contentHeight;\r\n\t\t},\r\n\t\tsetDiffTop() {\r\n\t\t\tlet top = (this.folder.getRelativeLine(this.diffLine) - 1) * this.charObj.charHight - this.scrollTop;\r\n\t\t\tthis.diffTop = top + this.diffMarginTop;\r\n\t\t\tif (this.diffTop - 30 < -this.scrollTop) {\r\n\t\t\t\tthis.diffTop = -this.scrollTop + 30;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetStartLine(scrollTop, force) {\r\n\t\t\tlet startLine = 1;\r\n\t\t\tlet maxScrollTop = this.contentHeight - this.scrollerArea.height;\r\n\t\t\tscrollTop = scrollTop < 0 ? 0 : scrollTop;\r\n\t\t\tmaxScrollTop = maxScrollTop < 0 ? 0 : maxScrollTop;\r\n\t\t\tif (scrollTop > maxScrollTop) {\r\n\t\t\t\tscrollTop = maxScrollTop;\r\n\t\t\t}\r\n\t\t\tif (!force && Math.abs(scrollTop - this.scrollTop) < 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tstartLine = Math.floor(scrollTop / this.charObj.charHight);\r\n\t\t\tstartLine++;\r\n\t\t\tthis.deltaTop = Math.floor(scrollTop / this.maxContentHeight) * this.maxContentHeight;\r\n\t\t\tthis.startLine = this.folder.getRealLine(startLine);\r\n\t\t\tthis.scrollTop = scrollTop;\r\n\t\t\tthis.diffLine && this.setDiffTop();\r\n\t\t\tthis.tokenizer.tokenizeVisibleLins();\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tsetErrors(errors) {\r\n\t\t\tthis.errorMap = {};\r\n\t\t\tthis.errors = errors;\r\n\t\t\t_formatError.call(this, this.errorMap, errors);\r\n\t\t\tthis.renderError();\r\n\r\n\t\t\tfunction _formatError(errorMap, errors) {\r\n\t\t\t\tlet index = 0;\r\n\t\t\t\twhile (index < errors.length) {\r\n\t\t\t\t\tlet line = errors[index].line;\r\n\t\t\t\t\tlet arr = [];\r\n\t\t\t\t\twhile (index < errors.length && errors[index].line === line) {\r\n\t\t\t\t\t\tlet key = line + ',' + errors[index].column;\r\n\t\t\t\t\t\terrors[index].originColumn = errors[index].column;\r\n\t\t\t\t\t\tarr.push(errors[index].reason);\r\n\t\t\t\t\t\tif (errorMap[key]) {\r\n\t\t\t\t\t\t\terrorMap[key] += '<br>' + errors[index].reason;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\terrorMap[key] = errors[index].reason;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tline = line || this.htmls.length;\r\n\t\t\t\t\terrorMap[line] = arr.join('<br>');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetAutoTip(results) {\r\n\t\t\tclearTimeout(this.setAutoTip.hideTimer);\r\n\t\t\tif (results && results.length) {\r\n\t\t\t\tresults.forEach((item) => {\r\n\t\t\t\t\titem.active = false;\r\n\t\t\t\t});\r\n\t\t\t\tthis.autoTipList = results;\r\n\t\t\t\tthis.autoTipList[0].active = true;\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tlet width = this.$refs.autoTip.$el.clientWidth;\r\n\t\t\t\t\tlet height = this.$refs.autoTip.$el.clientHeight;\r\n\t\t\t\t\tthis.autoTipStyle.top = this.folder.getRelativeLine(this.nowCursorPos.line) * this.charObj.charHight - this.deltaTop;\r\n\t\t\t\t\tthis.autoTipStyle.left = this.getExactLeft(this.nowCursorPos);\r\n\t\t\t\t\tif (this.autoTipStyle.top + height > this.deltaTop + this.$refs.scroller.clientHeight) {\r\n\t\t\t\t\t\tthis.autoTipStyle.top -= height + this.charObj.charHight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.autoTipStyle.left + width > this.scrollLeft + this.scrollerArea.width) {\r\n\t\t\t\t\t\tthis.autoTipStyle.left -= width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.autoTipStyle.top += 'px';\r\n\t\t\t\t\tthis.autoTipStyle.left += 'px';\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t//内容改变时会触发setAutoTip(null)\r\n\t\t\t\tthis.setAutoTip.hideTimer = setTimeout(() => {\r\n\t\t\t\t\tthis.autoTipList = null;\r\n\t\t\t\t}, 60);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetRenderObj(lineObj, line) {\r\n\t\t\tlet tabNum = this.getTabNum(line);\r\n\t\t\tlet fold = '';\r\n\t\t\tlet top = (this.folder.getRelativeLine(line) - 1) * this.charObj.charHight - this.deltaTop + 'px';\r\n\t\t\tif (this.folder.getFoldByLine(line)) {\r\n\t\t\t\t//该行已经折叠\r\n\t\t\t\tfold = 'close';\r\n\t\t\t} else if (this.folder.getRangeFold(line, true)) {\r\n\t\t\t\t//可折叠\r\n\t\t\t\tfold = 'open';\r\n\t\t\t}\r\n\t\t\tlet html = lineObj.html;\r\n\t\t\tif (!html) {\r\n\t\t\t\tlet tokens = lineObj.tokens && this.tokenizer.splitLongToken(lineObj.tokens);\r\n\t\t\t\thtml = this.tokenizer.createHtml(tokens, lineObj.text);\r\n\t\t\t\tif (lineObj.tokens) {\r\n\t\t\t\t\tlineObj.tokens = tokens;\r\n\t\t\t\t\tlineObj.html = html;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tlineId: lineObj.lineId,\r\n\t\t\t\thtml: html,\r\n\t\t\t\tnum: line,\r\n\t\t\t\ttop: top,\r\n\t\t\t\ttabNum: tabNum,\r\n\t\t\t\tfold: fold,\r\n\t\t\t\tbgClass: '',\r\n\t\t\t\tisFsearch: false,\r\n\t\t\t\tselected: false,\r\n\t\t\t\tselection: [],\r\n\t\t\t\tcursorList: [],\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetTabNum(line) {\r\n\t\t\tlet lineObj = this.myContext.htmls[line - 1];\r\n\t\t\tlet text = lineObj.text;\r\n\t\t\tlet wReg = /[^\\s]/;\r\n\t\t\tlet tabNum = 0;\r\n\t\t\tif (lineObj.tabNum > -1) {\r\n\t\t\t\treturn lineObj.tabNum;\r\n\t\t\t}\r\n\t\t\tif (wReg.exec(text)) {\r\n\t\t\t\t//该行有内容\r\n\t\t\t\tlet spaceNum = /^\\s+/.exec(text);\r\n\t\t\t\tif (spaceNum) {\r\n\t\t\t\t\ttabNum = /\\t+/.exec(spaceNum[0]);\r\n\t\t\t\t\ttabNum = (tabNum && tabNum[0].length) || 0;\r\n\t\t\t\t\ttabNum = tabNum + Math.ceil((spaceNum[0].length - tabNum) / this.tabSize);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t//空行\r\n\t\t\t\tlet _line = line - 1;\r\n\t\t\t\twhile (_line >= 1) {\r\n\t\t\t\t\tif (wReg.exec(this.myContext.htmls[_line - 1].text)) {\r\n\t\t\t\t\t\ttabNum = this.getTabNum(_line);\r\n\t\t\t\t\t\tif (this.folder.getRangeFold(_line, true)) {\r\n\t\t\t\t\t\t\ttabNum++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_line--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlineObj.tabNum = tabNum;\r\n\t\t\treturn tabNum;\r\n\t\t},\r\n\t\t// 获取文本在浏览器中的宽度\r\n\t\tgetStrWidth(str, start, end) {\r\n\t\t\treturn Util.getStrWidth(str, this.charObj.charWidth, this.charObj.fullAngleCharWidth, this.tabSize, start, end);\r\n\t\t},\r\n\t\t// 获取行对应的文本在浏览器中的宽度\r\n\t\tgetStrWidthByLine(line, start, end) {\r\n\t\t\treturn this.getStrWidth(this.myContext.htmls[line - 1].text, start, end);\r\n\t\t},\r\n\t\t// 根据文本宽度计算当前列号\r\n\t\tgetColumnByWidth(text, offsetX) {\r\n\t\t\tlet left = 0,\r\n\t\t\t\tright = text.length;\r\n\t\t\tlet mid, width, w1, w2;\r\n\t\t\twhile (left < right) {\r\n\t\t\t\tmid = Math.floor((left + right) / 2);\r\n\t\t\t\twidth = this.getStrWidth(text, 0, mid);\r\n\t\t\t\tw1 = text[mid - 1] && this.getStrWidth(text[mid - 1]) / 2;\r\n\t\t\t\tw2 = (text[mid] && this.getStrWidth(text[mid]) / 2) || w1;\r\n\t\t\t\tif ((width >= offsetX && width - offsetX < w1) || (offsetX >= width && offsetX - width < w2)) {\r\n\t\t\t\t\tleft = mid;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else if (width > offsetX) {\r\n\t\t\t\t\tright = mid;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tleft = mid + 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn left;\r\n\t\t},\r\n\t\t// 根据鼠标事件对象获取行列坐标\r\n\t\tgetPosByEvent(e) {\r\n\t\t\tlet $target = $(e.target);\r\n\t\t\tlet line = ($target.attr('data-line') || $target.parent().attr('data-line')) - 0;\r\n\t\t\tlet column = $target.attr('data-column');\r\n\t\t\tlet endColumn = $target.attr('data-end');\r\n\t\t\tif (!line) {\r\n\t\t\t\tif (e.target === this.$refs.content) {\r\n\t\t\t\t\tline = this.myContext.htmls.length;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//移动到了区域外\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet lineObj = this.myContext.htmls[line - 1];\r\n\t\t\tlet tokens = lineObj.fgTokens || lineObj.tokens;\r\n\t\t\tif (!column) {\r\n\t\t\t\tcolumn = lineObj.text.length;\r\n\t\t\t} else {\r\n\t\t\t\tcolumn = column - 0;\r\n\t\t\t\tendColumn = endColumn - 0;\r\n\t\t\t\tcolumn += this.getColumnByWidth(lineObj.text.slice(column, endColumn), e.offsetX);\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tline: line,\r\n\t\t\t\tcolumn: column,\r\n\t\t\t};\r\n\t\t},\r\n\t\t// 获取光标真实位置\r\n\t\tgetExactLeft(cursorPos) {\r\n\t\t\tlet lineObj = this.myContext.htmls[cursorPos.line - 1];\r\n\t\t\tlet spans = document.getElementById(this._lineId(cursorPos.line));\r\n\t\t\tlet startIndex = 0;\r\n\t\t\tlet span = null;\r\n\t\t\tspans = (spans && spans.querySelector('div.my-code').children) || [];\r\n\t\t\tfor (let i = 0; i < spans.length; i++) {\r\n\t\t\t\tlet column = spans[i].getAttribute('data-column');\r\n\t\t\t\tif (column <= cursorPos.column) {\r\n\t\t\t\t\tstartIndex = column;\r\n\t\t\t\t\tspan = spans[i];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!span) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\treturn span.offsetLeft + this.getStrWidth(lineObj.text.slice(startIndex, cursorPos.column));\r\n\t\t},\r\n\t\tgetPrevDiff(diffRanges, line) {\r\n\t\t\tif (!diffRanges) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < diffRanges.length; i++) {\r\n\t\t\t\tlet item = diffRanges[i];\r\n\t\t\t\tif (item.line <= line) {\r\n\t\t\t\t\tif (item.type === 'D') {\r\n\t\t\t\t\t\tif (item.line === line) {\r\n\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (item.line + item.added.length > line) {\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 尾部的删除块\r\n\t\t\t\t\tif (item.line === line + 1 && line === this.maxLine) {\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 右键菜单事件\r\n\t\tonContextmenu(e) {\r\n\t\t\tif (this.type === 'diff') {\r\n\t\t\t\tthis.focus();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$refs.menu.show(e);\r\n\t\t},\r\n\t\t// 选中自动提示\r\n\t\tonClickAuto(item) {\r\n\t\t\tthis.myContext.replaceTip(item);\r\n\t\t\tthis.autoTipList = null;\r\n\t\t\tthis.focus();\r\n\t\t},\r\n\t\t// 折叠/展开\r\n\t\tonToggleFold(line) {\r\n\t\t\tif (this.folder.getFoldByLine(line)) {\r\n\t\t\t\tthis.unFold(line);\r\n\t\t\t} else {\r\n\t\t\t\tthis.foldLine(line);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 内容区域鼠标按下事件\r\n\t\tonContentMdown(e) {\r\n\t\t\tif (e.which == 3) {\r\n\t\t\t\t//右键\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet pos = this.getPosByEvent(e);\r\n\t\t\tlet cursorPos = null;\r\n\t\t\tthis.mouseStartObj = {\r\n\t\t\t\ttime: Date.now(),\r\n\t\t\t\tstart: pos,\r\n\t\t\t};\r\n\t\t\tif ((e.ctrlKey && this.cursor.multiKeyCode === 'ctrl') || (e.altKey && this.cursor.multiKeyCode === 'alt')) {\r\n\t\t\t\t// 多光标编辑\r\n\t\t\t\tlet range = this.selecter.getRangeWithCursorPos(pos);\r\n\t\t\t\t//删除重叠选中区域\r\n\t\t\t\trange && this.selecter.removeRange(range);\r\n\t\t\t\tcursorPos = this.cursor.addCursorPos(pos);\r\n\t\t\t} else {\r\n\t\t\t\tcursorPos = this.cursor.setCursorPos(pos);\r\n\t\t\t\t// 非多点编辑情况下，鼠标左键删除选中区域\r\n\t\t\t\tif (e.which !== 3) {\r\n\t\t\t\t\tthis.searcher.clearSearch();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (e.which != 3) {\r\n\t\t\t\tthis.fSearcher.clearActive(); //光标更改后，搜索框取消当前活动区域\r\n\t\t\t\tif (this.mouseUpTime && Date.now() - this.mouseUpTime < 200) {\r\n\t\t\t\t\t//双击选中单词\r\n\t\t\t\t\tthis.mouseStartObj.doubleClick = true;\r\n\t\t\t\t\tthis.searchWord();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.mouseStartObj.cursorPos = cursorPos;\r\n\t\t\t// 删除非活动区域的选中区域\r\n\t\t\tthis.searcher.clearSearch(true);\r\n\t\t\tthis.focus();\r\n\t\t},\r\n\t\tonErrorMousemove(e, line) {\r\n\t\t\tlet errors = document.getElementById(`${this._lineId(line)}`).querySelectorAll('span.my-token-error') || [];\r\n\t\t\tlet left = e.clientX - $(this.$refs.content).offset().left;\r\n\t\t\tfor (let i = 0; i < errors.length; i++) {\r\n\t\t\t\tlet error = errors[i];\r\n\t\t\t\tlet width = error.clientWidth;\r\n\t\t\t\tlet _left = error.offsetLeft;\r\n\t\t\t\tif (left >= _left && left <= _left + width) {\r\n\t\t\t\t\t_showTip.call(this, e, error.getAttribute('data-key'));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction _showTip(e, key) {\r\n\t\t\t\tlet $editor = $(this.$refs.editor);\r\n\t\t\t\tlet $tip = $(this.$refs.tip.$el);\r\n\t\t\t\tlet offset = $editor.offset();\r\n\t\t\t\tlet top = e.clientY - offset.top;\r\n\t\t\t\tlet left = e.clientX - offset.left;\r\n\t\t\t\tthis.tipContent = this.errorMap[key];\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tif (top + $tip[0].clientHeight > this.scrollerArea.height) {\r\n\t\t\t\t\t\ttop = this.scrollerArea.height - $tip[0].clientHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.tipStyle = {\r\n\t\t\t\t\t\tleft: left + 10 + 'px',\r\n\t\t\t\t\t\ttop: top + 10 + 'px',\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonContentMmove(e) {\r\n\t\t\tif (this.mouseStartObj && Date.now() - this.mouseStartObj.time > 100) {\r\n\t\t\t\tlet end = this.getPosByEvent(e);\r\n\t\t\t\tif (end && Util.comparePos(end, this.mouseStartObj.cursorPos)) {\r\n\t\t\t\t\tlet range = this.selecter.getRangeWithCursorPos(end);\r\n\t\t\t\t\t//删除重叠选中区域\r\n\t\t\t\t\trange && this.selecter.removeRange(range);\r\n\t\t\t\t\tthis.cursor.removeCursor(this.mouseStartObj.cursorPos);\r\n\t\t\t\t\tthis.mouseStartObj.cursorPos = this.cursor.addCursorPos({\r\n\t\t\t\t\t\tline: end.line,\r\n\t\t\t\t\t\tcolumn: end.column,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (this.mouseStartObj.preRange) {\r\n\t\t\t\t\t\tthis.selecter.updateRange(this.mouseStartObj.preRange, {\r\n\t\t\t\t\t\t\tstart: this.mouseStartObj.start,\r\n\t\t\t\t\t\t\tend: end,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.mouseStartObj.preRange = this.selecter.addRange({\r\n\t\t\t\t\t\t\tstart: this.mouseStartObj.start,\r\n\t\t\t\t\t\t\tend: end,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 删除区域范围内的光标\r\n\t\t\t\t\tthis.cursor.removeCursorInRange(this.mouseStartObj.preRange);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_checkErrorOver.call(this, e);\r\n\r\n\t\t\tfunction _checkErrorOver(e) {\r\n\t\t\t\tlet $target = $(e.target);\r\n\t\t\t\tlet line = $target.parent().attr('data-line');\r\n\t\t\t\tthis.tipContent = '';\r\n\t\t\t\tline && this.onErrorMousemove(e, line);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonContentMLeave() {\r\n\t\t\tthis.tipContent = '';\r\n\t\t},\r\n\t\t// 鼠标移动事件\r\n\t\tonDocumentMmove(e) {\r\n\t\t\tlet that = this;\r\n\t\t\tlet offset = $(this.$refs.scroller).offset();\r\n\t\t\tif (this.mouseStartObj && Date.now() - this.mouseStartObj.time > 100) {\r\n\t\t\t\tlet line = Math.ceil((this.scrollTop + e.clientY - offset.top) / this.charObj.charHight);\r\n\t\t\t\tline = line < 1 ? 1 : line;\r\n\t\t\t\tline = line > this.maxLine ? this.maxLine : line;\r\n\t\t\t\tif (e.clientY > offset.top + this.scrollerArea.height) {\r\n\t\t\t\t\t//鼠标超出底部区域\r\n\t\t\t\t\tthis.moveSelection('down', e.clientY - offset.top - this.scrollerArea.height);\r\n\t\t\t\t} else if (e.clientY < offset.top) {\r\n\t\t\t\t\t//鼠标超出顶部区域\r\n\t\t\t\t\tthis.moveSelection('up', offset.top - e.clientY);\r\n\t\t\t\t} else if (e.clientX < offset.left) {\r\n\t\t\t\t\t//鼠标超出左边区域\r\n\t\t\t\t\tthis.moveSelection('left', offset.left - e.clientX, line);\r\n\t\t\t\t} else if (e.clientX > offset.left + this.scrollerArea.width) {\r\n\t\t\t\t\t//鼠标超出右边区域\r\n\t\t\t\t\tthis.moveSelection('right', e.clientX - offset.left - this.scrollerArea.width, line);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tglobalData.scheduler.removeUiTask(this.moveTask);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.diffBottomSashMouseObj) {\r\n\t\t\t\tlet height = (this.diffHeight += e.clientY - this.diffBottomSashMouseObj.clientY);\r\n\t\t\t\tif (height < this.charObj.charHight + 16) {\r\n\t\t\t\t\theight = this.charObj.charHight + 16;\r\n\t\t\t\t}\r\n\t\t\t\tif (height + this.diffTop > this.scrollerArea.height) {\r\n\t\t\t\t\theight = this.scrollerArea.height - this.diffTop;\r\n\t\t\t\t}\r\n\t\t\t\tthis.diffHeight = height;\r\n\t\t\t\tthis.diffBottomSashMouseObj = e;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 鼠标抬起事件\r\n\t\tonDocumentMouseUp(e) {\r\n\t\t\t// 停止滚动选中\r\n\t\t\tglobalData.scheduler.removeUiTask(this.moveTask);\r\n\t\t\tthis.moveTask = null;\r\n\t\t\tthis.mouseStartObj = null;\r\n\t\t\tthis.diffBottomSashMouseObj = null;\r\n\t\t\tthis.mouseUpTime = Date.now();\r\n\t\t\tthis.$refs.searchDialog && this.$refs.searchDialog.directBlur();\r\n\t\t},\r\n\t\t// 调整diff弹框高度开始\r\n\t\tonDiffBottomSashBegin(e) {\r\n\t\t\tthis.diffBottomSashMouseObj = e;\r\n\t\t},\r\n\t\tonScroll() {\r\n\t\t\tthis.$refs.numScroller.scrollTop = 0;\r\n\t\t\tthis.$refs.scroller.scrollTop = 0;\r\n\t\t\tthis.$refs.scroller.scrollLeft = 0;\r\n\t\t},\r\n\t\t// 滚动滚轮\r\n\t\tonWheel(e) {\r\n\t\t\tthis.scrollDeltaY = e.deltaY;\r\n\t\t\tthis.scrollDeltaX = e.deltaX;\r\n\t\t\tif ((this.scrollDeltaY || this.scrollDeltaX) && !this.wheelTask) {\r\n\t\t\t\tthis.wheelTask = globalData.scheduler.addUiTask(() => {\r\n\t\t\t\t\tif (this.scrollDeltaY) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tthis.setStartLine(this.scrollTop + this.scrollDeltaY);\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollDeltaY = 0;\r\n\t\t\t\t\t} else if (this.scrollDeltaX) {\r\n\t\t\t\t\t\tlet scrollLeft = this.scrollLeft + this.scrollDeltaX;\r\n\t\t\t\t\t\tif (scrollLeft > this._contentMinWidth - this.scrollerArea.width) {\r\n\t\t\t\t\t\t\tscrollLeft = this._contentMinWidth - this.scrollerArea.width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tscrollLeft = scrollLeft < 0 ? 0 : scrollLeft;\r\n\t\t\t\t\t\tthis.scrollLeft = scrollLeft;\r\n\t\t\t\t\t\tthis.scrollDeltaX = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tglobalData.scheduler.removeUiTask(this.wheelTask);\r\n\t\t\t\t\t\tthis.wheelTask = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 右侧滚动条滚动事件\r\n\t\tonVBarScroll(e) {\r\n\t\t\tthis.setStartLine(e);\r\n\t\t},\r\n\t\tonHBarScroll(e) {\r\n\t\t\tthis.scrollLeft = e;\r\n\t\t},\r\n\t\t// 中文输入开始\r\n\t\tonCompositionstart() {\r\n\t\t\tif (!this.editAble) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tclearTimeout(this.compositionendTimer);\r\n\t\t\tthis.compositionstart = true;\r\n\t\t},\r\n\t\t// 中文输入结束\r\n\t\tonCompositionend() {\r\n\t\t\tif (this.compositionstart) {\r\n\t\t\t\tlet text = this.$refs.textarea.value || '';\r\n\t\t\t\tif (text) {\r\n\t\t\t\t\tthis.myContext.insertContent(text);\r\n\t\t\t\t\tthis.autocomplete.search();\r\n\t\t\t\t\tthis.$refs.textarea.value = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//避免有些浏览器compositionend在input事件之前触发的bug\r\n\t\t\tthis.compositionendTimer = setTimeout(() => {\r\n\t\t\t\tthis.compositionstart = false;\r\n\t\t\t}, 100);\r\n\t\t},\r\n\t\t// 输入事件\r\n\t\tonInput() {\r\n\t\t\tif (!this.editAble) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!this.compositionstart) {\r\n\t\t\t\tlet text = this.$refs.textarea.value || '';\r\n\t\t\t\tif (text) {\r\n\t\t\t\t\tthis.myContext.insertContent(text);\r\n\t\t\t\t\tthis.autocomplete.search();\r\n\t\t\t\t\tthis.$refs.textarea.value = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 复制事件\r\n\t\tonCopy(e) {\r\n\t\t\tlet mime = window.clipboardData ? 'Text' : 'text/plain';\r\n\t\t\tlet clipboardData = e.clipboardData || window.clipboardData;\r\n\t\t\tclipboardData.setData(mime, this.myContext.getCopyText());\r\n\t\t},\r\n\t\tonCut(e) {\r\n\t\t\tlet mime = window.clipboardData ? 'Text' : 'text/plain';\r\n\t\t\tlet clipboardData = e.clipboardData || window.clipboardData;\r\n\t\t\tclipboardData.setData(mime, this.myContext.getCopyText(this.editAble));\r\n\t\t},\r\n\t\t// 粘贴事件\r\n\t\tonPaste(e) {\r\n\t\t\tif (!this.editAble) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet mime = window.clipboardData ? 'Text' : 'text/plain';\r\n\t\t\tlet clipboardData = e.clipboardData || window.clipboardData;\r\n\t\t\tlet copyText = '';\r\n\t\t\tcopyText = clipboardData.getData(mime);\r\n\t\t\tthis.myContext.insertContent(copyText);\r\n\t\t},\r\n\t\t// 获得焦点\r\n\t\tonFocus() {\r\n\t\t\tthis.showCursor();\r\n\t\t},\r\n\t\t// 失去焦点\r\n\t\tonBlur() {\r\n\t\t\tthis.hideCursor();\r\n\t\t},\r\n\t\t// 键盘按下事件\r\n\t\tonKeydown(e) {\r\n\t\t\tif (!this.editAble) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.shortcut.onKeydown(e);\r\n\t\t},\r\n\t\t// 搜索框首次搜索\r\n\t\tonSearch(config) {\r\n\t\t\tthis.fSearcher.clearSearch();\r\n\t\t\tthis.searchText({ config: config });\r\n\t\t},\r\n\t\tonSearchNext() {\r\n\t\t\tthis.searchText({ direct: 'next' });\r\n\t\t},\r\n\t\tonSearchPrev() {\r\n\t\t\tthis.searchText({ direct: 'up' });\r\n\t\t},\r\n\t\tonCloseSearch() {\r\n\t\t\tthis.focus();\r\n\t\t\tif (this.fSelecter.activedRanges.size) {\r\n\t\t\t\tthis.searcher.clone(this.fSearcher.getCacheData());\r\n\t\t\t}\r\n\t\t\tthis.fSearcher.clearSearch();\r\n\t\t\tthis.searchVisible = false;\r\n\t\t},\r\n\t\tonShowDiff(line) {\r\n\t\t\tlet preDiff = this.getPrevDiff(this.diffRanges, line);\r\n\t\t\tthis.diffLine = line;\r\n\t\t\tthis.diffVisible = false;\r\n\t\t\tthis.diffMarginTop = 0;\r\n\t\t\tthis.diffHeight = (preDiff.added.length + preDiff.deleted.length) * this.charObj.charHight + 16;\r\n\t\t\tthis.diffHeight = this.diffHeight > 200 ? 200 : this.diffHeight;\r\n\t\t\tthis.setDiffTop();\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.diffVisible = true;\r\n\t\t\t\tthis.diffTabData = Object.assign({}, this.tabData);\r\n\t\t\t\tthis.diffTabData.id = 'diff-' + this.tabData.id;\r\n\t\t\t\tthis.toShowdiffObj = {\r\n\t\t\t\t\tmaxLine: this.maxLine,\r\n\t\t\t\t\tlanguage: this.language,\r\n\t\t\t\t\tstates: preDiff.line > 1 ? this.myContext.htmls[preDiff.line - 2].states : null,\r\n\t\t\t\t\tdiff: preDiff,\r\n\t\t\t\t\tline: line,\r\n\t\t\t\t\tbeforeLine: preDiff.line - 1,\r\n\t\t\t\t\tdeletedLength: preDiff.deleted.length,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t},\r\n\t\tonCloseDiff() {\r\n\t\t\tthis.diffVisible = false;\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=3f6b053c&\"\nimport script from \"./Editor.vue?vue&type=script&lang=js&\"\nexport * from \"./Editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"editorBar\",staticClass:\"my-editor-bar\",on:{\"selectstart\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"bar-scroller my-scroll-overlay my-scroll-mini\"},_vm._l((_vm.editorList),function(item){return _c('div',{staticClass:\"bar-item my-hover\",class:[item.active ? 'my-active' : ''],attrs:{\"title\":item.path},on:{\"click\":function($event){return _vm.onClickItem(item.id)},\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onContextmenu($event, item.id)}}},[_c('div',{staticClass:\"bar-content\",class:[item.icon]},[_c('span',{class:[item.statusColor]},[_c('span',{staticClass:\"bar-text\"},[_vm._v(_vm._s(item.name))]),(item.status!=='!!')?_c('span',{staticClass:\"bar-status\"},[_vm._v(_vm._s(item.status))]):_vm._e()]),_c('div',{staticClass:\"bar-icon\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.saved),expression:\"item.saved\"}],staticClass:\"bar-close-icon iconfont icon-close\",attrs:{\"title\":\"close\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onClose(item.id)}}}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!item.saved),expression:\"!item.saved\"}],staticClass:\"bar-dot\"})])])])}),0),_c('editor-bar-menu',{ref:\"editorBarMenu\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"wrap\"},[_c('Menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onMenuChange}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div ref=\"wrap\">\r\n\t\t<Menu :checkable=\"false\" :menuList=\"menuList\" :styles=\"menuStyle\" @change=\"onMenuChange\" ref=\"menu\" v-show=\"menuVisible\"></Menu>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport $ from 'jquery';\r\nimport Menu from './Menu';\r\nimport EventBus from '@/event';\r\n\r\nexport default {\r\n\tname: 'EditorBarMenu',\r\n\tcomponents: {\r\n\t\tMenu,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmenuList: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Close',\r\n\t\t\t\t\t\top: 'close',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+F4',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Close to the Left',\r\n\t\t\t\t\t\top: 'closeToLeft',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Close to the Right',\r\n\t\t\t\t\t\top: 'closeToRight',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Close Saved',\r\n\t\t\t\t\t\top: 'closeSaved',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+K U',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Close Other',\r\n\t\t\t\t\t\top: 'closeOther',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Close All',\r\n\t\t\t\t\t\top: 'closeAll',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+K W',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t\tmenuVisible: false,\r\n\t\t\tmenuStyle: {\r\n\t\t\t\tleft: '10px',\r\n\t\t\t\ttop: '40px',\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.initEventBus();\r\n\t},\r\n\tmethods: {\r\n\t\tinitEventBus() {\r\n\t\t\tEventBus.$on('close-menu', () => {\r\n\t\t\t\tthis.menuVisible = false;\r\n\t\t\t});\r\n\t\t},\r\n\t\tshow(e, id) {\r\n\t\t\tthis.tabId = id;\r\n\t\t\tthis.menuVisible = true;\r\n\t\t\tlet $parent = $(this.$refs.wrap).parent();\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tlet offset = $parent.offset();\r\n\t\t\t\tlet menuWidth = this.$refs.menu.$el.clientWidth;\r\n\t\t\t\tif (menuWidth + e.clientX > offset.left + $parent[0].clientWidth) {\r\n\t\t\t\t\tthis.menuStyle.left = e.clientX - offset.left - menuWidth + 'px';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.menuStyle.left = e.clientX - offset.left + 'px';\r\n\t\t\t\t}\r\n\t\t\t\tthis.menuStyle.top = e.clientY - offset.top + 'px';\r\n\t\t\t});\r\n\t\t},\r\n\t\tonMenuChange(item) {\r\n\t\t\tswitch (item.op) {\r\n\t\t\t\tcase 'close':\r\n\t\t\t\t\tEventBus.$emit('editor-close', this.tabId);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'closeToLeft':\r\n\t\t\t\t\tEventBus.$emit('editor-close-to-left', this.tabId);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'closeToRight':\r\n\t\t\t\t\tEventBus.$emit('editor-close-to-right', this.tabId);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'closeSaved':\r\n\t\t\t\t\tEventBus.$emit('editor-close-saved', this.tabId);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'closeOther':\r\n\t\t\t\t\tEventBus.$emit('editor-close-other', this.tabId);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'closeAll':\r\n\t\t\t\t\tEventBus.$emit('editor-close-all', this.tabId);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.menuVisible = false;\r\n\t\t},\r\n\t},\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditorBarMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditorBarMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorBarMenu.vue?vue&type=template&id=17367f24&\"\nimport script from \"./EditorBarMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorBarMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 16:13:15\r\n * @Description: \r\n */\r\nimport Util from '@/common/util';\r\n\r\nexport default class {\r\n    constructor(editorBar) {\r\n        this.editorBar = editorBar;\r\n    }\r\n    onKeydown(e) {\r\n        if (e.ctrlKey) {\r\n            if (this.pressK) {\r\n                this.pressK = false;\r\n                switch (e.keyCode) {\r\n                    case 85: //Ctrl+U\r\n                        e.preventDefault();\r\n                        this.editorBar.$emit('close-saved');\r\n                        break;\r\n                    case 87: //Ctrl+W\r\n                        e.preventDefault();\r\n                        this.editorBar.$emit('close-all');\r\n                        break;\r\n                }\r\n            } else {\r\n                switch (e.keyCode) {\r\n                    case 75: //Ctrl+K\r\n                        e.preventDefault();\r\n                        this.pressK = true;\r\n                        break;\r\n                    case 115: //Ctrl+F4\r\n                        e.preventDefault();\r\n                        this.editorBar.$emit('close');\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div @selectstart.prevent class=\"my-editor-bar\" ref=\"editorBar\">\r\n\t\t<div class=\"bar-scroller my-scroll-overlay my-scroll-mini\">\r\n\t\t\t<div\r\n\t\t\t\t:class=\"[item.active ? 'my-active' : '']\"\r\n\t\t\t\t:title=\"item.path\"\r\n\t\t\t\t@click=\"onClickItem(item.id)\"\r\n\t\t\t\t@contextmenu.prevent.stop=\"onContextmenu($event, item.id)\"\r\n\t\t\t\tclass=\"bar-item my-hover\"\r\n\t\t\t\tv-for=\"item in editorList\"\r\n\t\t\t>\r\n\t\t\t\t<div :class=\"[item.icon]\" class=\"bar-content\">\r\n\t\t\t\t\t<span :class=\"[item.statusColor]\">\r\n\t\t\t\t\t\t<span class=\"bar-text\">{{ item.name }}</span>\r\n\t\t\t\t\t\t<span class=\"bar-status\" v-if=\"item.status!=='!!'\">{{item.status}}</span>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<div class=\"bar-icon\">\r\n\t\t\t\t\t\t<span @click.stop=\"onClose(item.id)\" class=\"bar-close-icon iconfont icon-close\" title=\"close\" v-show=\"item.saved\"></span>\r\n\t\t\t\t\t\t<span class=\"bar-dot\" v-show=\"!item.saved\"></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<editor-bar-menu ref=\"editorBarMenu\"></editor-bar-menu>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport EditorBarMenu from './EditorBarMenu';\r\nimport ShortCut from '@/module/shortcut/editor-bar';\r\nimport EventBus from '@/event';\r\nimport Util from '@/common/util';\r\nimport $ from 'jquery';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst path = window.require('path');\r\n\r\nexport default {\r\n\tname: 'EditorBar',\r\n\tcomponents: {\r\n\t\tEditorBarMenu,\r\n\t},\r\n\tprops: {\r\n\t\teditorList: {\r\n\t\t\ttype: Array,\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tlist: [],\r\n\t\t};\r\n\t},\r\n\tprovide() {\r\n\t\treturn {\r\n\t\t\trootList: this.list,\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.shortcut = new ShortCut(this);\r\n\t\tthis.initEventBus();\r\n\t\t$(window).on('keydown', (e) => {\r\n\t\t\tthis.shortcut.onKeydown(e);\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\tinitEventBus() {\r\n\t\t\tEventBus.$on('editor-changed', (data) => {\r\n\t\t\t\tthis.scrollToView();\r\n\t\t\t});\r\n\t\t\tEventBus.$on('git-statused', (data) => {\r\n\t\t\t\tfor (let i = 0; i < this.editorList.length; i++) {\r\n\t\t\t\t\tlet item = this.editorList[i];\r\n\t\t\t\t\tlet status = null;\r\n\t\t\t\t\tlet statusColor = '';\r\n\t\t\t\t\tif (item.path === data.path) {\r\n\t\t\t\t\t\tstatus = Util.getFileStatus(item.path);\r\n\t\t\t\t\t\tstatusColor = status.statusColor;\r\n\t\t\t\t\t\tstatus = status.status;\r\n\t\t\t\t\t\tif (item.status !== status) {\r\n\t\t\t\t\t\t\titem.status = status;\r\n\t\t\t\t\t\t\titem.statusColor = statusColor;\r\n\t\t\t\t\t\t\tthis.$set(this.editorList, i, item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tEventBus.$on('file-renamed', (data) => {\r\n\t\t\t\tfor (let i = 0; i < this.editorList.length; i++) {\r\n\t\t\t\t\tlet item = this.editorList[i];\r\n\t\t\t\t\tif (item.path === data.path) {\r\n\t\t\t\t\t\titem.status = 'D';\r\n\t\t\t\t\t\titem.statusColor = Util.getFileStatusColor('D');\r\n\t\t\t\t\t\tthis.$set(this.editorList, i, item);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tscrollToView() {\r\n\t\t\t_scrollToView.call(this);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t_scrollToView.call(this);\r\n\t\t\t}, 300);\r\n\r\n\t\t\tfunction _scrollToView() {\r\n\t\t\t\tlet $tab = $(this.$refs.editorBar).find('div.my-active');\r\n\t\t\t\t$tab.length && $tab[0].scrollIntoView();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonClickItem(id) {\r\n\t\t\tEventBus.$emit('editor-change', id);\r\n\t\t},\r\n\t\tonClose(id) {\r\n\t\t\tEventBus.$emit('editor-close', id);\r\n\t\t},\r\n\t\tonContextmenu(e, id) {\r\n\t\t\tthis.$refs.editorBarMenu.show(e, id);\r\n\t\t},\r\n\t},\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditorBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditorBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorBar.vue?vue&type=template&id=e9311366&\"\nimport script from \"./EditorBar.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"my-title-bar my-width-100\",style:({ height: _vm.height + 'px' }),on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('div',{staticClass:\"my-height-100 my-center-between\"},[_c('div',{staticClass:\"menu-bar\"},[_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('fileMenuVisible')}}},[_c('span',[_vm._v(\"File\")]),(_vm.fileMenuVisible)?_c('Menu',{attrs:{\"hoverCheck\":true,\"menuList\":_vm.fileMenuList,\"styles\":{ left: 0, top: _vm._top }},on:{\"change\":_vm.onFileMenuChange}}):_vm._e()],1),_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('editMenuVisible')}}},[_c('span',[_vm._v(\"Edit\")]),(_vm.editMenuVisible)?_c('Menu',{attrs:{\"hoverCheck\":true,\"menuList\":_vm.editMenuList,\"styles\":{ left: 0, top: _vm._top }},on:{\"change\":_vm.onEditMenuChange}}):_vm._e()],1),_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('selectionMenuVisible')}}},[_c('span',[_vm._v(\"Selection\")]),(_vm.selectionMenuVisible)?_c('Menu',{attrs:{\"hoverCheck\":true,\"menuList\":_vm.selectionMenuList,\"styles\":{ left: 0, top: _vm._top }},on:{\"change\":_vm.onSelectionMenuChange}}):_vm._e()],1),_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('viewMenuVisible')}}},[_c('span',[_vm._v(\"View\")]),(_vm.viewMenuVisible)?_c('Menu',{attrs:{\"hoverCheck\":true,\"left-select\":true,\"menuList\":_vm.viewMenuList,\"styles\":{ left: 0, top: _vm._top }},on:{\"change\":_vm.onViewMenuChange}}):_vm._e()],1),_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('preferenceMenuVisible')}}},[_c('span',[_vm._v(\"Preference\")]),(_vm.preferenceMenuVisible)?_c('Menu',{attrs:{\"hoverCheck\":true,\"menuList\":_vm.preferenceMenuList,\"styles\":{ left: 0, top: _vm._top }},on:{\"change\":_vm.onPreferenceMenuChange}}):_vm._e()],1)]),(_vm.mode === 'app')?_c('div',{staticClass:\"bar-right\"},[_c('div',{staticClass:\"bar-item my-hover\",staticStyle:{\"width\":\"35px\",\"height\":\"35px\"},on:{\"click\":_vm.onMinimize}},[_c('span',{staticClass:\"iconfont icon-zuixiaohua\"})]),(_vm.maximize)?_c('div',{staticClass:\"bar-item my-hover\",staticStyle:{\"width\":\"35px\",\"height\":\"35px\"},on:{\"click\":_vm.onUnmaximize}},[_c('span',{staticClass:\"iconfont icon-huanyuan\"})]):_c('div',{staticClass:\"bar-item my-hover\",staticStyle:{\"width\":\"35px\",\"height\":\"35px\"},on:{\"click\":_vm.onMaximize}},[_c('span',{staticClass:\"iconfont icon-zuidahua\"})]),_c('div',{staticClass:\"bar-item my-hover-danger\",staticStyle:{\"width\":\"35px\",\"height\":\"35px\"},on:{\"click\":_vm.onClose}},[_c('span',{staticClass:\"iconfont icon-close\",staticStyle:{\"font-size\":\"18px\"}})])]):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 16:13:15\r\n * @Description:\r\n */\r\nimport EventBus from '@/event';\r\n\r\nexport default class {\r\n\tconstructor() { }\r\n\tonKeydown(e) {\r\n\t\tif (e.ctrlKey) {\r\n\t\t\tif (this.pressK) {\r\n\t\t\t\tthis.pressK = false;\r\n\t\t\t\tswitch (e.keyCode) {\r\n\t\t\t\t\tcase 79: //Ctrl+O\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tEventBus.$emit('folder-open');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tswitch (e.keyCode) {\r\n\t\t\t\t\tcase 75: //Ctrl+K\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tthis.pressK = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 78: //Ctrl+N\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tEventBus.$emit('file-open');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 79: //Ctrl+O\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tEventBus.$emit('file-open', null, true);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-09 21:38:38\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div :style=\"{ height: height + 'px' }\" @contextmenu.stop.prevent class=\"my-title-bar my-width-100\">\r\n\t\t<div class=\"my-height-100 my-center-between\">\r\n\t\t\t<div class=\"menu-bar\">\r\n\t\t\t\t<div @mousedown.stop=\"showMemu('fileMenuVisible')\" class=\"bar-item my-hover\">\r\n\t\t\t\t\t<span>File</span>\r\n\t\t\t\t\t<Menu :hoverCheck=\"true\" :menuList=\"fileMenuList\" :styles=\"{ left: 0, top: _top }\" @change=\"onFileMenuChange\" v-if=\"fileMenuVisible\"></Menu>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div @mousedown.stop=\"showMemu('editMenuVisible')\" class=\"bar-item my-hover\">\r\n\t\t\t\t\t<span>Edit</span>\r\n\t\t\t\t\t<Menu :hoverCheck=\"true\" :menuList=\"editMenuList\" :styles=\"{ left: 0, top: _top }\" @change=\"onEditMenuChange\" v-if=\"editMenuVisible\"></Menu>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div @mousedown.stop=\"showMemu('selectionMenuVisible')\" class=\"bar-item my-hover\">\r\n\t\t\t\t\t<span>Selection</span>\r\n\t\t\t\t\t<Menu :hoverCheck=\"true\" :menuList=\"selectionMenuList\" :styles=\"{ left: 0, top: _top }\" @change=\"onSelectionMenuChange\" v-if=\"selectionMenuVisible\"></Menu>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div @mousedown.stop=\"showMemu('viewMenuVisible')\" class=\"bar-item my-hover\">\r\n\t\t\t\t\t<span>View</span>\r\n\t\t\t\t\t<Menu :hoverCheck=\"true\" :left-select=\"true\" :menuList=\"viewMenuList\" :styles=\"{ left: 0, top: _top }\" @change=\"onViewMenuChange\" v-if=\"viewMenuVisible\"></Menu>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!--\r\n\t\t\t\t<div @mousedown.stop=\"showMemu('terminalMenuVisible')\" class=\"bar-item my-hover\">\r\n\t\t\t\t\t<span>Terminal</span>\r\n\t\t\t\t\t<Menu :hoverCheck=\"true\" :menuList=\"terminalMenuList\" :styles=\"{ left: 0, top: _top }\" @change=\"onTerminalMenuChange\" v-if=\"terminalMenuVisible\"></Menu>\r\n\t\t\t\t</div>\r\n\t\t\t\t-->\r\n\t\t\t\t<div @mousedown.stop=\"showMemu('preferenceMenuVisible')\" class=\"bar-item my-hover\">\r\n\t\t\t\t\t<span>Preference</span>\r\n\t\t\t\t\t<Menu :hoverCheck=\"true\" :menuList=\"preferenceMenuList\" :styles=\"{ left: 0, top: _top }\" @change=\"onPreferenceMenuChange\" v-if=\"preferenceMenuVisible\"></Menu>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"bar-right\" v-if=\"mode === 'app'\">\r\n\t\t\t\t<!-- 最小化 -->\r\n\t\t\t\t<div @click=\"onMinimize\" class=\"bar-item my-hover\" style=\"width: 35px; height: 35px\">\r\n\t\t\t\t\t<span class=\"iconfont icon-zuixiaohua\"></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- 还原最大化 -->\r\n\t\t\t\t<div @click=\"onUnmaximize\" class=\"bar-item my-hover\" style=\"width: 35px; height: 35px\" v-if=\"maximize\">\r\n\t\t\t\t\t<span class=\"iconfont icon-huanyuan\"></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- 最大化 -->\r\n\t\t\t\t<div @click=\"onMaximize\" class=\"bar-item my-hover\" style=\"width: 35px; height: 35px\" v-else>\r\n\t\t\t\t\t<span class=\"iconfont icon-zuidahua\"></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- 关闭 -->\r\n\t\t\t\t<div @click=\"onClose\" class=\"bar-item my-hover-danger\" style=\"width: 35px; height: 35px\">\r\n\t\t\t\t\t<span class=\"iconfont icon-close\" style=\"font-size: 18px\"></span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport Util from '@/common/util';\r\nimport Menu from './Menu';\r\nimport ShortCut from '@/module/shortcut/menu-bar';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\nconst remote = window.require('@electron/remote');\r\nconst currentWindow = remote && remote.getCurrentWindow();\r\n\r\nexport default {\r\n\tname: 'TitleBar',\r\n\tprops: {\r\n\t\theight: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 25,\r\n\t\t},\r\n\t},\r\n\tcomponents: {\r\n\t\tMenu,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tfileMenuVisible: false,\r\n\t\t\teditMenuVisible: false,\r\n\t\t\tselectionMenuVisible: false,\r\n\t\t\tviewMenuVisible: false,\r\n\t\t\tterminalMenuVisible: false,\r\n\t\t\tpreferenceMenuVisible: false,\r\n\t\t\tmaximize: false,\r\n\t\t\tmode: remote ? 'app' : 'web',\r\n\t\t\tfileMenuList: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'New File',\r\n\t\t\t\t\t\top: 'newFile',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+N',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Add Folder to Workspace',\r\n\t\t\t\t\t\top: 'addFolder',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Save Workspace As',\r\n\t\t\t\t\t\top: 'saveWorkspaceAs',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Save',\r\n\t\t\t\t\t\top: 'saveFile',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+S',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Save As',\r\n\t\t\t\t\t\top: 'saveFileAs',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Shift+S',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t\teditMenuList: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Undo',\r\n\t\t\t\t\t\top: 'undo',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Z',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Redo',\r\n\t\t\t\t\t\top: 'redo',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Y',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Cut',\r\n\t\t\t\t\t\top: 'cut',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+X',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Copy',\r\n\t\t\t\t\t\top: 'copy',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+C',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Paste',\r\n\t\t\t\t\t\top: 'paste',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+V',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Delete Line',\r\n\t\t\t\t\t\top: 'deleteLine',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Shift+K',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Find',\r\n\t\t\t\t\t\top: 'find',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+F',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Replace',\r\n\t\t\t\t\t\top: 'replace',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+H',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Find in Files',\r\n\t\t\t\t\t\top: 'findInFiles',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Shift+F',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Replace in Files',\r\n\t\t\t\t\t\top: 'replaceInFiles',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Shift+H',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t\tselectionMenuList: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Select All',\r\n\t\t\t\t\t\top: 'selectAll',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+A',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Copy Line Up',\r\n\t\t\t\t\t\top: 'copyLineUp',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Shift+D',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Copy Line Down',\r\n\t\t\t\t\t\top: 'copyLineDown',\r\n\t\t\t\t\t\tshortcut: 'Alt+Shift+Down',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Move Line Up',\r\n\t\t\t\t\t\top: 'moveLineUp',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Shift+Up',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Move Line Down',\r\n\t\t\t\t\t\top: 'moveLineDown',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Shift+Down',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Go to Line',\r\n\t\t\t\t\t\top: 'gotoLine',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+G',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Add Cursor Above',\r\n\t\t\t\t\t\top: 'addCursorAbove',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Alt+Up',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Add Cursor Below',\r\n\t\t\t\t\t\top: 'addCursorBelow',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Alt+Down',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Add Cursor to Line Ends',\r\n\t\t\t\t\t\top: 'addCursorLineEnds',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Shift+L',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Add Next Occurence',\r\n\t\t\t\t\t\top: 'addNextOccurence',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+D',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Add Previous Occurence',\r\n\t\t\t\t\t\top: 'addPrevOccurence',\r\n\t\t\t\t\t\tshortcut: 'Shift+D',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Select All Occurence',\r\n\t\t\t\t\t\top: 'selectAllOccurence',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Switch Alt+Click to Multi-Cursor',\r\n\t\t\t\t\t\top: 'switchMultiKeyCode',\r\n\t\t\t\t\t\tkeyCode: 'ctrl',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t\tviewMenuList: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Command Palette',\r\n\t\t\t\t\t\top: 'commandPanel',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+P',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Terminal',\r\n\t\t\t\t\t\top: 'toggleTerminal',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+`',\r\n\t\t\t\t\t\tselected: globalData.views.terminal,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Minimap',\r\n\t\t\t\t\t\top: 'toggleMinimap',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Shift+M',\r\n\t\t\t\t\t\tselected: globalData.views.minimap,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Sidebar',\r\n\t\t\t\t\t\top: 'toggleSidebar',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Shift+L',\r\n\t\t\t\t\t\tselected: globalData.views.sidebar,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Statusbar',\r\n\t\t\t\t\t\top: 'toggleStatusbar',\r\n\t\t\t\t\t\tshortcut: 'Ctrl+Shift+B',\r\n\t\t\t\t\t\tselected: globalData.views.statusbar,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t\tterminalMenuList: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'New Terminal',\r\n\t\t\t\t\t\top: 'newTerminal',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t\tpreferenceMenuList: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Color Theme',\r\n\t\t\t\t\t\top: 'changeTheme',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Icon Theme',\r\n\t\t\t\t\t\top: 'changeIconTheme',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t_top() {\r\n\t\t\treturn this.height + 2 + 'px';\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tif (this.mode === 'app') {\r\n\t\t\tthis.fileMenuList.splice(1, 0, [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: 'Open File',\r\n\t\t\t\t\top: 'openFile',\r\n\t\t\t\t\tshortcut: 'Ctrl+O',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: 'Open Folder',\r\n\t\t\t\t\top: 'openFolder',\r\n\t\t\t\t\tshortcut: 'Ctrl+K Ctrl+O',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: 'Open Workspace',\r\n\t\t\t\t\top: 'openWorkspace',\r\n\t\t\t\t},\r\n\t\t\t]);\r\n\t\t}\r\n\t\tthis.shortcut = new ShortCut(this);\r\n\t\tthis.initEventBus();\r\n\t\t$(window).on('keydown', (e) => {\r\n\t\t\tthis.shortcut.onKeydown(e);\r\n\t\t});\r\n\t},\r\n\tmounted() {\r\n\t\tif (this.mode === 'app') {\r\n\t\t\tthis.maximize = currentWindow.isMaximized();\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tinitEventBus() {\r\n\t\t\tEventBus.$on('close-menu', () => {\r\n\t\t\t\tthis.fileMenuVisible = false;\r\n\t\t\t\tthis.editMenuVisible = false;\r\n\t\t\t\tthis.selectionMenuVisible = false;\r\n\t\t\t\tthis.viewMenuVisible = false;\r\n\t\t\t\tthis.terminalMenuVisible = false;\r\n\t\t\t\tthis.preferenceMenuVisible = false;\r\n\t\t\t});\r\n\t\t\tEventBus.$on('terminal-toggle', () => {\r\n\t\t\t\tthis.viewMenuList[0][1].selected = !this.viewMenuList[0][1].selected;\r\n\t\t\t\tglobalData.views.terminal = !globalData.views.terminal;\r\n\t\t\t});\r\n\t\t\tEventBus.$on('minimap-toggle', () => {\r\n\t\t\t\tthis.viewMenuList[0][2].selected = !this.viewMenuList[0][2].selected;\r\n\t\t\t\tglobalData.views.minimap = !globalData.views.minimap;\r\n\t\t\t});\r\n\t\t\tEventBus.$on('sidebar-toggle', () => {\r\n\t\t\t\tthis.viewMenuList[0][3].selected = !this.viewMenuList[0][3].selected;\r\n\t\t\t\tglobalData.views.sidebar = !globalData.views.sidebar;\r\n\t\t\t});\r\n\t\t\tEventBus.$on('statusbar-toggle', () => {\r\n\t\t\t\tthis.viewMenuList[0][4].selected = !this.viewMenuList[0][4].selected;\r\n\t\t\t\tglobalData.views.statusbar = !globalData.views.statusbar;\r\n\t\t\t});\r\n\t\t},\r\n\t\tshowMemu(prop) {\r\n\t\t\tEventBus.$emit('close-menu');\r\n\t\t\tthis[prop] = true;\r\n\t\t},\r\n\t\t// 最小化\r\n\t\tonMinimize() {\r\n\t\t\tcurrentWindow.minimize();\r\n\t\t},\r\n\t\t// 最大化\r\n\t\tonMaximize() {\r\n\t\t\tcurrentWindow.maximize();\r\n\t\t\tthis.maximize = true;\r\n\t\t},\r\n\t\t// 最大化\r\n\t\tonUnmaximize() {\r\n\t\t\tcurrentWindow.unmaximize();\r\n\t\t\tthis.maximize = false;\r\n\t\t},\r\n\t\t// 关闭窗口\r\n\t\tonClose() {\r\n\t\t\tcurrentWindow.close();\r\n\t\t},\r\n\t\tonFileMenuChange(item) {\r\n\t\t\tswitch (item.op) {\r\n\t\t\t\tcase 'newFile':\r\n\t\t\t\t\tEventBus.$emit('file-open');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'addFolder':\r\n\t\t\t\t\tEventBus.$emit('folder-add');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'saveWorkspaceAs':\r\n\t\t\t\t\tEventBus.$emit('workspace-save-as');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'saveFile':\r\n\t\t\t\t\tEventBus.$emit('file-save', { id: globalData.nowEditorId });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'saveFileAs':\r\n\t\t\t\t\tEventBus.$emit('file-save-as', { id: globalData.nowEditorId });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'openFile':\r\n\t\t\t\t\tEventBus.$emit('file-open', null, true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'openFolder':\r\n\t\t\t\t\tEventBus.$emit('folder-open');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'openWorkspace':\r\n\t\t\t\t\tEventBus.$emit('workspace-open');\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\tthis.fileMenuVisible = false;\r\n\t\t\t});\r\n\t\t},\r\n\t\tonEditMenuChange(item) {\r\n\t\t\tlet editor = globalData.$mainWin.getNowEditor();\r\n\t\t\tlet context = globalData.$mainWin.getNowContext();\r\n\t\t\tswitch (item.op) {\r\n\t\t\t\tcase 'findInFiles':\r\n\t\t\t\t\tEventBus.$emit('find-in-folder');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'replaceInFiles':\r\n\t\t\t\t\tEventBus.$emit('find-in-folder', { replace: true });\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (!editor) {\r\n\t\t\t\tthis.editMenuVisible = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tswitch (item.op) {\r\n\t\t\t\tcase 'undo':\r\n\t\t\t\t\teditor.history.undo();\r\n\t\t\t\t\teditor.focus();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'redo':\r\n\t\t\t\t\teditor.history.redo();\r\n\t\t\t\t\teditor.focus();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'cut':\r\n\t\t\t\t\tUtil.writeClipboard(context.getCopyText(true));\r\n\t\t\t\t\teditor.focus();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'copy':\r\n\t\t\t\t\tUtil.writeClipboard(context.getCopyText());\r\n\t\t\t\t\teditor.focus();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'paste':\r\n\t\t\t\t\tUtil.readClipboard().then((text) => {\r\n\t\t\t\t\t\tcontext.insertContent(text);\r\n\t\t\t\t\t});\r\n\t\t\t\t\teditor.focus();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'deleteLine':\r\n\t\t\t\t\tcontext.deleteLine();\r\n\t\t\t\t\teditor.focus();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'find':\r\n\t\t\t\t\teditor.openSearch();\r\n\t\t\t\t\teditor.focus();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'replace':\r\n\t\t\t\t\teditor.openSearch(true);\r\n\t\t\t\t\teditor.focus();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\tthis.editMenuVisible = false;\r\n\t\t\t});\r\n\t\t},\r\n\t\tonSelectionMenuChange(item) {\r\n\t\t\tlet editor = globalData.$mainWin.getNowEditor();\r\n\t\t\tlet context = globalData.$mainWin.getNowContext();\r\n\t\t\tswitch (item.op) {\r\n\t\t\t\tcase 'gotoLine':\r\n\t\t\t\t\tEventBus.$emit('menu-close');\r\n\t\t\t\t\tEventBus.$emit('cmd-search-open', { input: ':' });\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (!editor) {\r\n\t\t\t\tthis.selectionMenuVisible = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tswitch (item.op) {\r\n\t\t\t\tcase 'selectAll':\r\n\t\t\t\t\teditor.selecter.selectAll();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'copyLineUp':\r\n\t\t\t\t\tcontext.copyLineUp();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'copyLineDown':\r\n\t\t\t\t\tcontext.copyLineDown();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'moveLineUp':\r\n\t\t\t\t\tcontext.moveLineUp();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'moveLineDown':\r\n\t\t\t\t\tcontext.moveLineDown();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'addCursorAbove':\r\n\t\t\t\t\teditor.cursor.addCursorAbove();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'addCursorBelow':\r\n\t\t\t\t\teditor.cursor.addCursorBelow();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'addCursorLineEnds':\r\n\t\t\t\t\teditor.cursor.addCursorLineEnds();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'addNextOccurence':\r\n\t\t\t\t\teditor.searchWord('down');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'addPrevOccurence':\r\n\t\t\t\t\teditor.searchWord('up');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'selectAllOccurence':\r\n\t\t\t\t\teditor.selecter.selectAllOccurence();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'switchMultiKeyCode':\r\n\t\t\t\t\teditor.cursor.switchMultiKeyCode();\r\n\t\t\t\t\titem.keyCode = editor.cursor.multiKeyCode;\r\n\t\t\t\t\titem.name = `Switch ${item.keyCode === 'alt' ? 'Ctrl' : 'Alt'}+Click to Multi-Cursor`;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\teditor.focus();\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\tthis.selectionMenuVisible = false;\r\n\t\t\t});\r\n\t\t},\r\n\t\tonPreferenceMenuChange(item) {\r\n\t\t\tswitch (item.op) {\r\n\t\t\t\tcase 'changeTheme':\r\n\t\t\t\t\tEventBus.$emit('cmd-menu-theme-open');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'changeIconTheme':\r\n\t\t\t\t\tEventBus.$emit('cmd-menu-icon-theme-open');\r\n\t\t\t}\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\tthis.preferenceMenuVisible = false;\r\n\t\t\t});\r\n\t\t},\r\n\t\tonViewMenuChange(item) {\r\n\t\t\tswitch (item.op) {\r\n\t\t\t\tcase 'commandPanel':\r\n\t\t\t\t\tEventBus.$emit('cmd-search-open');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'toggleTerminal':\r\n\t\t\t\t\tEventBus.$emit('terminal-toggle');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'toggleMinimap':\r\n\t\t\t\t\tEventBus.$emit('minimap-toggle');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'toggleSidebar':\r\n\t\t\t\t\tEventBus.$emit('sidebar-toggle');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'toggleStatusbar':\r\n\t\t\t\t\tEventBus.$emit('statusbar-toggle');\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\tthis.viewMenuVisible = false;\r\n\t\t\t});\r\n\t\t},\r\n\t\tonTerminalMenuChange(item) {\r\n\t\t\tswitch (item.op) {\r\n\t\t\t\tcase 'newTerminal':\r\n\t\t\t\t\tEventBus.$emit('terminal-new');\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\tthis.terminalMenuVisible = false;\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TitleBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TitleBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TitleBar.vue?vue&type=template&id=12245de8&\"\nimport script from \"./TitleBar.vue?vue&type=script&lang=js&\"\nexport * from \"./TitleBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"my-status-bar my-width-100\",style:({ height: _vm.height + 'px' }),on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('div',{staticClass:\"my-height-100 my-center-between\"},[_c('div',{staticClass:\"bar-left\"},[(_vm.hasEditor)?_c('div',{staticClass:\"bar-item\"},[_c('span',[_vm._v(\"Line \"+_vm._s(_vm.line)+\", Column \"+_vm._s(_vm.column))])]):_vm._e()]),_c('div',{staticClass:\"bar-right\"},[(_vm.hasEditor)?_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showTabsize.apply(null, arguments)}}},[_c('span',[_vm._v(\"Tab Size:\"+_vm._s(_vm.tabSize))])]):_vm._e(),(_vm.hasEditor)?_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showLanguage.apply(null, arguments)}}},[_c('span',[_vm._v(_vm._s(_vm.nowLanguage))])]):_vm._e()])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-09 21:38:38\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div :style=\"{ height: height + 'px' }\" @contextmenu.stop.prevent class=\"my-status-bar my-width-100\">\r\n\t\t<div class=\"my-height-100 my-center-between\">\r\n\t\t\t<div class=\"bar-left\">\r\n\t\t\t\t<div class=\"bar-item\" v-if=\"hasEditor\">\r\n\t\t\t\t\t<span>Line {{ line }}, Column {{ column }}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"bar-right\">\r\n\t\t\t\t<div @mousedown.stop=\"showTabsize\" class=\"bar-item my-hover\" v-if=\"hasEditor\">\r\n\t\t\t\t\t<span>Tab Size:{{ tabSize }}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div @mousedown.stop=\"showLanguage\" class=\"bar-item my-hover\" v-if=\"hasEditor\">\r\n\t\t\t\t\t<span>{{ nowLanguage }}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport Menu from './Menu';\r\nimport EventBus from '@/event';\r\nimport Util from '@/common/util';\r\nimport globalData from '@/data/globalData';\r\n\r\nexport default {\r\n\tname: 'StatusBar',\r\n\tprops: {\r\n\t\theight: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 25,\r\n\t\t},\r\n\t},\r\n\tcomponents: {\r\n\t\tMenu,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tline: 1,\r\n\t\t\tcolumn: 0,\r\n\t\t\ttabSize: 4,\r\n\t\t\tindent: 'tab',\r\n\t\t\tlanguage: '',\r\n\t\t\thasEditor: false,\r\n\t\t\tlanguageList: globalData.languageList,\r\n\t\t\ttabMenu: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\top: 'changeIndent',\r\n\t\t\t\t\t\tname: 'Indent Using Spacee',\r\n\t\t\t\t\t\tvalue: 'space',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\top: 'changeIndent',\r\n\t\t\t\t\t\tname: 'Indent Using Tabs',\r\n\t\t\t\t\t\tvalue: 'tab',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\top: 'convertTabToSpace',\r\n\t\t\t\t\t\tname: 'Convert Indentation to Spaces',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\top: 'convertSpaceToTab',\r\n\t\t\t\t\t\tname: 'Convert Indentation to Tabs',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tnowLanguage() {\r\n\t\t\tfor (let i = 0; i < this.languageList.length; i++) {\r\n\t\t\t\tif (this.languageList[i].value === this.language) {\r\n\t\t\t\t\treturn this.languageList[i].name;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tthis.initEventBus();\r\n\t\tlet indentList = [];\r\n\t\tfor (let i = 1; i <= 8; i++) {\r\n\t\t\tindentList.push({\r\n\t\t\t\top: 'changeTabSize',\r\n\t\t\t\tname: `Tab Width：${i}`,\r\n\t\t\t\tvalue: i,\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.tabMenu.unshift(indentList);\r\n\t},\r\n\tmounted() {},\r\n\tmethods: {\r\n\t\tinitEventBus() {\r\n\t\t\tEventBus.$on('editor-changed', (data) => {\r\n\t\t\t\tif (data) {\r\n\t\t\t\t\tthis.language = data.language;\r\n\t\t\t\t\tthis.tabSize = data.tabSize;\r\n\t\t\t\t\tthis.indent = data.indent;\r\n\t\t\t\t\tthis.line = data.line;\r\n\t\t\t\t\tthis.column = data.column;\r\n\t\t\t\t\tthis.hasEditor = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.hasEditor = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tEventBus.$on('cursor-change', (data) => {\r\n\t\t\t\tthis.line = data.line;\r\n\t\t\t\tthis.column = data.column;\r\n\t\t\t});\r\n\t\t\tEventBus.$on('language-change', (data) => {\r\n\t\t\t\tthis.language = data.language;\r\n\t\t\t});\r\n\t\t\tEventBus.$on('tab-size-change', (tabSize) => {\r\n\t\t\t\tthis.tabSize = tabSize;\r\n\t\t\t});\r\n\t\t\tEventBus.$on('indent-change', (indent) => {\r\n\t\t\t\tthis.indent = indent;\r\n\t\t\t});\r\n\t\t},\r\n\t\tshowTabsize() {\r\n\t\t\tlet cmdList = this.tabMenu.map((group, index) => {\r\n\t\t\t\treturn group.map((item) => {\r\n\t\t\t\t\titem = Object.assign({}, item);\r\n\t\t\t\t\tif (index === 0) {\r\n\t\t\t\t\t\titem.selected = item.value === this.tabSize;\r\n\t\t\t\t\t} else if (index === 1) {\r\n\t\t\t\t\t\titem.selected = item.value === this.indent;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tEventBus.$emit('close-menu');\r\n\t\t\tEventBus.$emit('cmd-menu-open', {\r\n\t\t\t\tcmdList: cmdList,\r\n\t\t\t\thoverCheck: false,\r\n\t\t\t});\r\n\t\t},\r\n\t\tshowLanguage() {\r\n\t\t\tlet value = globalData.nowEditorId && globalData.$mainWin.getNowEditor().language;\r\n\t\t\tlet cmdList = globalData.languageList.map((item) => {\r\n\t\t\t\tlet icon = Util.getIconByExtensions(item.extensions || []);\r\n\t\t\t\ticon = icon ? `my-file-icon my-file-icon-${icon}` : '';\r\n\t\t\t\treturn {\r\n\t\t\t\t\ticon,\r\n\t\t\t\t\tname: item.name + (item.language ? `（${item.language}）` : ''),\r\n\t\t\t\t\tvalue: item.value,\r\n\t\t\t\t\top: 'selectLanguage',\r\n\t\t\t\t\tactive: value === item.value,\r\n\t\t\t\t\tselected: value === item.value,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\tEventBus.$emit('close-menu');\r\n\t\t\tEventBus.$emit('cmd-menu-open', {\r\n\t\t\t\tcmdList: cmdList,\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StatusBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StatusBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StatusBar.vue?vue&type=template&id=70b21980&\"\nimport script from \"./StatusBar.vue?vue&type=script&lang=js&\"\nexport * from \"./StatusBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"sideBar\",staticClass:\"my-side-bar\",on:{\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onContextmenu.apply(null, arguments)},\"selectstart\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"my-height-100\",staticStyle:{\"overflow\":\"hidden\"},style:({opacity: _vm.opacity})},[_c('div',{staticClass:\"side-bar-title my-shadow\"},[_vm._v(\"EXPLORER\")]),_c('side-tree',{ref:\"tree\"})],1),(_vm.renameVisible)?_c('div',{staticClass:\"my-rename-overlay\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newFileNmme),expression:\"newFileNmme\"}],ref:\"input\",staticClass:\"my-rename-input\",style:(_vm.inputStyle),attrs:{\"spellcheck\":\"false\",\"type\":\"text\"},domProps:{\"value\":(_vm.newFileNmme)},on:{\"blur\":_vm.onBlur,\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.onConfirm.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"]))return null;return _vm.onCancel.apply(null, arguments)}],\"input\":function($event){if($event.target.composing)return;_vm.newFileNmme=$event.target.value}}})]):_vm._e(),_c('SideBarMenu',{ref:\"sideBarMenu\"}),_c('SideTreMenu',{ref:\"sideTreeMenu\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"wrap\",staticClass:\"side-tree-warp\",on:{\"mouseenter\":_vm.showScrollBar,\"mouseleave\":_vm.hideScrollBar,\"mousemove\":_vm.showScrollBar,\"wheel\":function($event){$event.stopPropagation();return _vm.onWheel.apply(null, arguments)}}},[_c('div',{staticClass:\"side-tree\"},[_c('div',{staticClass:\"side-tree-content\",style:({ top: -_vm.deltaTop + 'px' })},_vm._l((_vm.renderList),function(item){return _c('div',{staticClass:\"tree-item\",attrs:{\"id\":item.id},on:{\"click\":function($event){$event.stopPropagation();return _vm.onClickItem(item)}}},[_c('div',{staticClass:\"tree-item-title my-center-start\",class:[item.active ? 'my-active' : '', _vm.cutPath === item.path ? 'tree-item-cut' : ''],style:({ 'padding-left': _vm._paddingLeft(item) }),attrs:{\"title\":item.path},on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onContextmenu($event, item)}}},[(item.type === 'dir')?[(item.open)?_c('span',{staticClass:\"my-icon my-icon-down\"}):_c('span',{staticClass:\"my-icon my-icon-right\"})]:_vm._e(),_c('div',{staticClass:\"tree-item-content\",class:[item.icon, item.statusColor],style:({'margin-left': item.marginLeft})},[_c('div',{staticClass:\"my-center-between\",staticStyle:{\"width\":\"100%\",\"overflow\":\"hidden\"}},[_c('span',{staticClass:\"tree-item-text\"},[_vm._v(_vm._s(item.name))]),(item.type==='file'&&item.status!='!!')?_c('span',{staticStyle:{\"margin\":\"0 5px 0 10px\",\"flex-shrink\":\"0\"}},[_vm._v(_vm._s(item.status))]):_vm._e()])])],2)])}),0)]),_c('v-scroll-bar',{staticClass:\"my-scroll-small\",class:{'my-scroll-visible': _vm.scrollVisible},attrs:{\"height\":_vm.treeHeight,\"scroll-top\":_vm.scrollTop},on:{\"scroll\":_vm.onScroll}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n * @Author: lisong\n * @Date: 2022-03-09 17:17:02\n * @Description: \n-->\n<template>\n\t<div @mouseenter=\"showScrollBar\" @mouseleave=\"hideScrollBar\" @mousemove=\"showScrollBar\" @wheel.stop=\"onWheel\" class=\"side-tree-warp\" ref=\"wrap\">\n\t\t<div class=\"side-tree\">\n\t\t\t<div :style=\"{ top: -deltaTop + 'px' }\" class=\"side-tree-content\">\n\t\t\t\t<div :id=\"item.id\" @click.stop=\"onClickItem(item)\" class=\"tree-item\" v-for=\"item in renderList\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t:class=\"[item.active ? 'my-active' : '', cutPath === item.path ? 'tree-item-cut' : '']\"\n\t\t\t\t\t\t:style=\"{ 'padding-left': _paddingLeft(item) }\"\n\t\t\t\t\t\t:title=\"item.path\"\n\t\t\t\t\t\t@contextmenu.stop.prevent=\"onContextmenu($event, item)\"\n\t\t\t\t\t\tclass=\"tree-item-title my-center-start\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template v-if=\"item.type === 'dir'\">\n\t\t\t\t\t\t\t<span class=\"my-icon my-icon-down\" v-if=\"item.open\"></span>\n\t\t\t\t\t\t\t<span class=\"my-icon my-icon-right\" v-else></span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<div :class=\"[item.icon, item.statusColor]\" :style=\"{'margin-left': item.marginLeft}\" class=\"tree-item-content\">\n\t\t\t\t\t\t\t<div class=\"my-center-between\" style=\"width:100%;overflow:hidden\">\n\t\t\t\t\t\t\t\t<span class=\"tree-item-text\">{{item.name}}</span>\n\t\t\t\t\t\t\t\t<span style=\"margin:0 5px 0 10px;flex-shrink:0\" v-if=\"item.type==='file'&&item.status!='!!'\">{{item.status}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<v-scroll-bar :class=\"{'my-scroll-visible': scrollVisible}\" :height=\"treeHeight\" :scroll-top=\"scrollTop\" @scroll=\"onScroll\" class=\"my-scroll-small\"></v-scroll-bar>\n\t</div>\n</template>\n<script>\nimport VScrollBar from './VScrollBar.vue';\nimport EventBus from '@/event';\nimport Util from '@/common/util';\nimport globalData from '@/data/globalData';\n\nconst fs = window.require('fs');\nconst path = window.require('path');\nconst spawnSync = window.require('child_process').spawnSync;\n\nlet preActiveItem = null;\nlet openedList = [];\nlet gitIgnoreMap = {};\n\nexport default {\n\tname: 'SideTree',\n\tcomponents: {\n\t\tVScrollBar,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\titemHeight: 30,\n\t\t\titemPadding: 20,\n\t\t\trenderList: [],\n\t\t\tfileWatchs: [],\n\t\t\tstartLine: 1,\n\t\t\tmaxVisibleLines: 100,\n\t\t\tcutPath: '',\n\t\t\tscrollTop: 0,\n\t\t\ttreeHeight: 0,\n\t\t\tdomHeight: 0,\n\t\t\tdeltaTop: 0,\n\t\t\tscrollVisible: false,\n\t\t\tfileStatusMap: {},\n\t\t};\n\t},\n\tcomputed: {\n\t\t_paddingLeft() {\n\t\t\treturn function (item) {\n\t\t\t\treturn item.deep * this.itemPadding - 10 + 'px';\n\t\t\t};\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.initEventBus();\n\t\tthis.watchFileStatus();\n\t\tthis.watchFolder();\n\t\tthis.setOpendList();\n\t\tglobalData.$fileTree = this;\n\t},\n\tmounted() {\n\t\tthis.domHeight = this.$refs.wrap.clientHeight;\n\t\tthis.maxVisibleLines = Math.ceil(this.domHeight / this.itemHeight) + 1;\n\t\tthis.render();\n\t},\n\tmethods: {\n\t\tinitResizeEvent() {\n\t\t\tconst resizeObserver = new ResizeObserver((entries) => {\n\t\t\t\tif (this.$refs.wrap && this.$refs.wrap.clientHeight) {\n\t\t\t\t\tthis.domHeight = this.$refs.wrap.clientHeight;\n\t\t\t\t\tthis.render();\n\t\t\t\t}\n\t\t\t});\n\t\t\tresizeObserver.observe(this.$refs.wrap);\n\t\t},\n\t\tinitEventBus() {\n\t\t\tEventBus.$on('icon-changed', () => {\n\t\t\t\topenedList.forEach((item) => {\n\t\t\t\t\titem.icon = '';\n\t\t\t\t});\n\t\t\t\tthis.render();\n\t\t\t});\n\t\t\tEventBus.$on('theme-changed', () => {\n\t\t\t\topenedList.forEach((item) => {\n\t\t\t\t\titem.icon = '';\n\t\t\t\t});\n\t\t\t\tthis.render();\n\t\t\t});\n\t\t\tEventBus.$on('editor-changed', (data) => {\n\t\t\t\tlet path = data && data.path;\n\t\t\t\tif (path && !(preActiveItem && preActiveItem.path === path)) {\n\t\t\t\t\tif (preActiveItem) {\n\t\t\t\t\t\tpreActiveItem.active = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.focusItem(path);\n\t\t\t\t} else if (!path && preActiveItem) {\n\t\t\t\t\tpreActiveItem.active = false;\n\t\t\t\t\tpreActiveItem = null;\n\t\t\t\t}\n\t\t\t});\n\t\t\tEventBus.$on('file-create-tree', (dirPath) => {\n\t\t\t\tthis.newFileOrDir(dirPath, 'file');\n\t\t\t});\n\t\t\tEventBus.$on('folder-create-tree', (dirPath) => {\n\t\t\t\tthis.newFileOrDir(dirPath, 'dir');\n\t\t\t});\n\t\t\tEventBus.$on('file-copy', (item) => {\n\t\t\t\tthis.cutPath = '';\n\t\t\t});\n\t\t\tEventBus.$on('file-cut', (item) => {\n\t\t\t\tthis.cutPath = item.path;\n\t\t\t});\n\t\t\tEventBus.$on('file-paste', (item) => {\n\t\t\t\tthis.cutPath = '';\n\t\t\t});\n\t\t\tEventBus.$on('git-statused', (data) => {\n\t\t\t\tthis.render();\n\t\t\t});\n\t\t\tEventBus.$on('git-ignored', (data) => {\n\t\t\t\tgitIgnoreMap[data.path] = data.ignore;\n\t\t\t\tthis.render();\n\t\t\t});\n\t\t\tEventBus.$on('folder-opened', () => {\n\t\t\t\tthis.refreshWorkSpace();\n\t\t\t});\n\t\t\tEventBus.$on('folder-added', () => {\n\t\t\t\tthis.refreshWorkSpace();\n\t\t\t});\n\t\t\tEventBus.$on('folder-removed', () => {\n\t\t\t\tthis.refreshWorkSpace();\n\t\t\t});\n\t\t\tEventBus.$on('workspace-opened', () => {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.refreshWorkSpace();\n\t\t\t\t});\n\t\t\t});\n\t\t\tEventBus.$on('file-tree-loaded', (list) => {\n\t\t\t\tglobalData.fileTree.empty();\n\t\t\t\tthis.initOpendDiring = true;\n\t\t\t\tthis.initOpendDirList(list);\n\t\t\t});\n\t\t},\n\t\tinitOpendDirList(list) {\n\t\t\tif (list.length) {\n\t\t\t\tlet fileObj = list.shift();\n\t\t\t\tlet item = fileObj.parentPath && Util.getFileItemByPath(globalData.fileTree, fileObj.path, fileObj.rootPath);\n\t\t\t\tif (item) {\n\t\t\t\t\t_readdir.call(this, item);\n\t\t\t\t} else {\n\t\t\t\t\titem = this.createRootItem(fileObj.path);\n\t\t\t\t\tglobalData.fileTree.push(item);\n\t\t\t\t\tif (fileObj.open) {\n\t\t\t\t\t\t_readdir.call(this, item);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.initOpendDirList(list);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.refreshWorkSpace();\n\t\t\t\tthis.preLoadFolder();\n\t\t\t\tthis.initOpendDiring = false;\n\t\t\t}\n\n\t\t\tfunction _readdir(item) {\n\t\t\t\tthis.openFolder(item).then(() => {\n\t\t\t\t\tthis.initOpendDirList(list);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\trender() {\n\t\t\tcancelAnimationFrame(this.renderTimer);\n\t\t\tthis.renderTimer = requestAnimationFrame(() => {\n\t\t\t\tlet preItem = {};\n\t\t\t\tthis.renderList = openedList.slice(this.startLine - 1, this.startLine - 1 + this.maxVisibleLines);\n\t\t\t\tthis.renderList.forEach((item) => {\n\t\t\t\t\tif (globalData.nowIconData) {\n\t\t\t\t\t\titem.icon = Util.getIconByPath({\n\t\t\t\t\t\t\tfilePath: item.path,\n\t\t\t\t\t\t\tfileType: item.type,\n\t\t\t\t\t\t\topened: item.open,\n\t\t\t\t\t\t\tisRoot: !item.parentPath,\n\t\t\t\t\t\t});\n\t\t\t\t\t\titem.icon = item.icon ? `my-file-icon my-file-icon-${item.icon}` : '';\n\t\t\t\t\t}\n\t\t\t\t\tif (item.gitIgnore && gitIgnoreMap[item.gitIgnore] && item.relativePath && gitIgnoreMap[item.gitIgnore].ignores(item.relativePath)) {\n\t\t\t\t\t\titem.status = '!!';\n\t\t\t\t\t\titem.statusColor = 'my-status-ignore';\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem.status = Util.getFileStatus(item.path);\n\t\t\t\t\t\titem.statusColor = item.status.statusColor;\n\t\t\t\t\t\titem.status = item.status.status;\n\t\t\t\t\t}\n\t\t\t\t\tif(item.type === 'file') {\n\t\t\t\t\t\tif(preItem.type === 'file') {\n\t\t\t\t\t\t\titem.marginLeft = preItem.marginLeft;\n\t\t\t\t\t\t} else if(preItem.path === item.parentPath) {\n\t\t\t\t\t\t\titem.marginLeft = '10px';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpreItem = item;\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tpreLoadFolder() {\n\t\t\tglobalData.scheduler.removeTask(this.preLoadFolderTask);\n\t\t\tcancelIdleCallback(this.preLoadFolderTimer);\n\t\t\tthis.preLoadFolderTimer = requestIdleCallback(() => {\n\t\t\t\tthis.preLoadFolderStartTime = Date.now();\n\t\t\t\t_preloadFolder.call(this, globalData.fileTree.slice());\n\t\t\t});\n\n\t\t\tfunction _preloadFolder(list) {\n\t\t\t\tif (list.length) {\n\t\t\t\t\tlet item = list.shift();\n\t\t\t\t\tif (!item.loaded) {\n\t\t\t\t\t\tthis.readdir(item).then(() => {\n\t\t\t\t\t\t\t_check.call(this, item, list);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_check.call(this, item, list);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction _check(item, list) {\n\t\t\t\titem.children.forEach((item) => {\n\t\t\t\t\tif (item.type === 'dir' && item.deep <= 4 && !globalData.skipSearchDirs.test(item.path)) {\n\t\t\t\t\t\tlist.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// 最多加载30秒\n\t\t\t\tif (Date.now() - this.preLoadFolderStartTime < 30000) {\n\t\t\t\t\tthis.preLoadFolderTask = globalData.scheduler.addTask(() => {\n\t\t\t\t\t\t_preloadFolder.call(this, list);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcreateItems(parentItem, files) {\n\t\t\tlet results = [];\n\t\t\tfiles.forEach((name, index) => {\n\t\t\t\tlet fullPath = path.join(parentItem.path, name);\n\t\t\t\tif (!fs.existsSync(fullPath)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet stat = fs.statSync(fullPath);\n\t\t\t\tlet obj = {\n\t\t\t\t\tid: Util.getIdFromPath(fullPath),\n\t\t\t\t\tname: name,\n\t\t\t\t\tpath: fullPath,\n\t\t\t\t\tparentPath: parentItem.path,\n\t\t\t\t\trootPath: parentItem.rootPath,\n\t\t\t\t\tgitRootPath: parentItem.gitRootPath,\n\t\t\t\t\tgitIgnore: parentItem.gitIgnore,\n\t\t\t\t\trelativePath: path.join(parentItem.relativePath, name),\n\t\t\t\t\tgitRelativePath: (parentItem.gitRootPath && path.join(parentItem.gitRelativePath, name)) || '',\n\t\t\t\t\tdeep: parentItem.deep + 1,\n\t\t\t\t\tactive: false,\n\t\t\t\t\tchildren: [],\n\t\t\t\t};\n\t\t\t\tif (stat.isFile()) {\n\t\t\t\t\tobj.type = 'file';\n\t\t\t\t} else {\n\t\t\t\t\tobj.type = 'dir';\n\t\t\t\t\tobj.open = false;\n\t\t\t\t}\n\t\t\t\tresults.push(obj);\n\t\t\t});\n\t\t\treturn this.sortFileList(results);\n\t\t},\n\t\tcreateRootItem(filePath) {\n\t\t\tlet obj = {\n\t\t\t\tid: Util.getIdFromPath(filePath),\n\t\t\t\tname: path.basename(filePath),\n\t\t\t\tpath: filePath,\n\t\t\t\tparentPath: '',\n\t\t\t\trelativePath: '',\n\t\t\t\trootPath: filePath,\n\t\t\t\tdeep: 0,\n\t\t\t\tactive: false,\n\t\t\t\tchildren: [],\n\t\t\t\ttype: 'dir',\n\t\t\t\topen: false,\n\t\t\t};\n\t\t\treturn obj;\n\t\t},\n\t\treaddir(item) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\titem.loaded = false;\n\t\t\t\titem.children = [];\n\t\t\t\tfs.readdir(item.path, { encoding: 'utf8' }, (err, files) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn resolve([]);\n\t\t\t\t\t}\n\t\t\t\t\tif (!item.loaded) {\n\t\t\t\t\t\tfiles = this.createItems(item, files);\n\t\t\t\t\t\titem.loaded = true;\n\t\t\t\t\t\titem.children = files;\n\t\t\t\t\t\tObject.freeze(files);\n\t\t\t\t\t}\n\t\t\t\t\tresolve(item.children);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\trefreshDir(item) {\n\t\t\tthis.refreshFolderTimer = this.refreshFolderTimer || {};\n\t\t\tclearTimeout(this.refreshFolderTimer[item.id]);\n\t\t\tthis.refreshFolderTimer[item.id] = setTimeout(() => {\n\t\t\t\tif (fs.existsSync(item.path)) {\n\t\t\t\t\t_refresh.call(this);\n\t\t\t\t}\n\t\t\t}, 100);\n\n\t\t\tfunction _refresh() {\n\t\t\t\tlet children = item.children || [];\n\t\t\t\tthis.readdir(item).then(() => {\n\t\t\t\t\tlet idMap = {};\n\t\t\t\t\tchildren.forEach((item) => {\n\t\t\t\t\t\tidMap[item.id] = item;\n\t\t\t\t\t});\n\t\t\t\t\titem.children = item.children.map((item) => {\n\t\t\t\t\t\tlet obj = idMap[item.id];\n\t\t\t\t\t\tif (obj) {\n\t\t\t\t\t\t\tif (obj.path != item.path) {\n\t\t\t\t\t\t\t\tobj.name = item.name;\n\t\t\t\t\t\t\t\t// 递归更新路径\n\t\t\t\t\t\t\t\tthis.updateParentPath(obj, item.parentPath);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn obj;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t});\n\t\t\t\t\tif (item.open) {\n\t\t\t\t\t\tthis.closeFolder(item);\n\t\t\t\t\t\tthis.openFolder(item);\n\t\t\t\t\t}\n\t\t\t\t\tif (!item.gitRootPath) {\n\t\t\t\t\t\tthis.watchFileStatus(item.children);\n\t\t\t\t\t}\n\t\t\t\t\tthis.render();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\trefreshGitIgnore(gitIgnore) {\n\t\t\tthis.refreshGitIgnoreTimer = this.refreshGitIgnoreTimer || {};\n\t\t\tclearTimeout(this.refreshGitIgnoreTimer[gitIgnore]);\n\t\t\tthis.refreshGitIgnoreTimer[gitIgnore] = setTimeout(() => {\n\t\t\t\tEventBus.$emit('git-ignore', gitIgnore);\n\t\t\t}, 100);\n\t\t},\n\t\trefreshWorkSpace() {\n\t\t\tthis.watchFileStatus();\n\t\t\tthis.watchFolder();\n\t\t\tthis.setOpendList();\n\t\t\tthis.render();\n\t\t},\n\t\tasync newFileOrDir(dirPath, type) {\n\t\t\tthis.newId = 'new' + Util.getUUID();\n\t\t\tfor (let i = 0; i < this.renderList.length; i++) {\n\t\t\t\tlet item = this.renderList[i];\n\t\t\t\tif (item.path === dirPath) {\n\t\t\t\t\tlet obj = {\n\t\t\t\t\t\tid: this.newId,\n\t\t\t\t\t\tname: '',\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tparentPath: item.path,\n\t\t\t\t\t\tdeep: item.deep + 1,\n\t\t\t\t\t};\n\t\t\t\t\tif (!item.open) {\n\t\t\t\t\t\tawait this.onClickItem(item);\n\t\t\t\t\t}\n\t\t\t\t\tobj.icon = Util.getIconByPath({\n\t\t\t\t\t\tfilePath: '',\n\t\t\t\t\t\tfileType: type,\n\t\t\t\t\t\topened: false,\n\t\t\t\t\t\tisRoot: false,\n\t\t\t\t\t});\n\t\t\t\t\tobj.icon = obj.icon ? `my-file-icon my-file-icon-${obj.icon}` : '';\n\t\t\t\t\tthis.renderList.splice(i + 1, 0, obj);\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tEventBus.$emit('file-rename-input', obj);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcloseFolder(item) {\n\t\t\tif (!item.open) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet index = openedList.indexOf(item) + 1;\n\t\t\tlet endIn = index;\n\t\t\twhile (endIn < openedList.length && openedList[endIn].deep > item.deep) {\n\t\t\t\tendIn++;\n\t\t\t}\n\t\t\topenedList.splice(index, endIn - index);\n\t\t\tthis.setTreeHeight();\n\t\t\titem.open = false;\n\t\t\tthis.setStartLine(this.checkScrollTop(this.scrollTop));\n\t\t},\n\t\topenFolder(item) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tif (item.loaded) {\n\t\t\t\t\t_open.call(this);\n\t\t\t\t\tresolve();\n\t\t\t\t} else {\n\t\t\t\t\treturn this.readdir(item).then(() => {\n\t\t\t\t\t\t_open.call(this);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfunction _open() {\n\t\t\t\tif (!item.open) {\n\t\t\t\t\tlet index = openedList.indexOf(item);\n\t\t\t\t\topenedList = openedList\n\t\t\t\t\t\t.slice(0, index + 1)\n\t\t\t\t\t\t.concat(this.getRenderList(item.children, item.deep))\n\t\t\t\t\t\t.concat(openedList.slice(index + 1));\n\t\t\t\t\tglobalData.openedFileList = openedList;\n\t\t\t\t\titem.open = true;\n\t\t\t\t\tthis.setTreeHeight();\n\t\t\t\t}\n\t\t\t\tthis.setStartLine(this.checkScrollTop(this.scrollTop));\n\t\t\t}\n\t\t},\n\t\twatchFileStatus(list) {\n\t\t\tlist = list || globalData.fileTree;\n\t\t\tlist.forEach((item) => {\n\t\t\t\tif (item.type === 'dir' && !item.gitRootPath && fs.existsSync(item.path)) {\n\t\t\t\t\tif ((item.deep === 0 && Util.checkGitRep(item.path)) || (item.deep > 0 && fs.existsSync(path.join(item.path, '.git')))) {\n\t\t\t\t\t\tlet gitIgnore = Util.getIgnore(item.path);\n\t\t\t\t\t\tthis.updateGitRootPath(item, item.path, gitIgnore);\n\t\t\t\t\t\tEventBus.$emit('git-status-start', item.path);\n\t\t\t\t\t\tgitIgnore && this.refreshGitIgnore(gitIgnore);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.watchFileStatus(item.children);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\twatchFolder() {\n\t\t\tlet ignoreTimer = {};\n\t\t\tthis.removeFileWatcher();\n\t\t\tglobalData.fileTree.forEach((item) => {\n\t\t\t\tlet watcher = fs.watch(item.path, { recursive: true }, (event, filename) => {\n\t\t\t\t\tif (filename) {\n\t\t\t\t\t\tif (event === 'rename') {\n\t\t\t\t\t\t\tlet dirPath = path.dirname(path.join(item.path, filename));\n\t\t\t\t\t\t\tlet treeItems = Util.getFileItemByPath(globalData.fileTree, dirPath);\n\t\t\t\t\t\t\ttreeItems.forEach((treeItem) => {\n\t\t\t\t\t\t\t\tif (treeItem.children.length || treeItem.open) {\n\t\t\t\t\t\t\t\t\tthis.refreshDir(treeItem);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (filename === '.gitignore') {\n\t\t\t\t\t\t\tthis.refreshGitIgnore(path.join(item.path, '.gitignore'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.fileWatchs.push(watcher);\n\t\t\t});\n\t\t},\n\t\tremoveFileWatcher() {\n\t\t\tthis.fileWatchs.forEach((item) => {\n\t\t\t\titem.close();\n\t\t\t});\n\t\t},\n\t\tupdateParentPath(item, parentPath) {\n\t\t\titem.path = path.join(parentPath, item.name);\n\t\t\titem.parentPath = parentPath;\n\t\t\tparentPath = item.path;\n\t\t\titem.children.forEach((item) => {\n\t\t\t\tthis.updateParentPath(item, parentPath);\n\t\t\t});\n\t\t},\n\t\tupdateGitRootPath(item, gitRootPath, gitIgnore) {\n\t\t\titem.gitRootPath = gitRootPath;\n\t\t\titem.gitIgnore = gitIgnore;\n\t\t\titem.gitRelativePath = path.relative(gitRootPath, item.path);\n\t\t\titem.children.forEach((item) => {\n\t\t\t\tthis.updateGitRootPath(item, gitRootPath, gitIgnore);\n\t\t\t});\n\t\t},\n\t\tsortFileList(results) {\n\t\t\tresults.sort((a, b) => {\n\t\t\t\tif (a.type === 'dir' && b.type === 'file') {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else if (a.type === 'file' && b.type === 'dir') {\n\t\t\t\t\treturn 1;\n\t\t\t\t} else if (a.name > b.name) {\n\t\t\t\t\treturn 1;\n\t\t\t\t} else if (a.name < b.name) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn results;\n\t\t},\n\t\tshowScrollBar() {\n\t\t\tthis.scrollVisible = true;\n\t\t},\n\t\thideScrollBar() {\n\t\t\tthis.scrollVisible = false;\n\t\t},\n\t\tfocusItem(path) {\n\t\t\tclearTimeout(this.focusItemTimer);\n\n\t\t\tthis.focusItemTimer = setTimeout(() => {\n\t\t\t\tif (this.initOpendDiring) {\n\t\t\t\t\tthis.focusItem(path);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// root列表可能存在父子关系，优先从子列表中查找\n\t\t\t\tlet list = globalData.fileTree.slice().sort((a, b) => {\n\t\t\t\t\treturn b.path.length - a.path.length;\n\t\t\t\t});\n\t\t\t\t_findItem.call(this, path, list);\n\t\t\t}, 15);\n\n\t\t\tfunction _findItem(path, list) {\n\t\t\t\tfor (let i = 0; i < list.length; i++) {\n\t\t\t\t\tlet item = list[i];\n\t\t\t\t\tif (item.path === path) {\n\t\t\t\t\t\tlet scrollTop = openedList.indexOf(item) * this.itemHeight - this.domHeight / 2;\n\t\t\t\t\t\tif (preActiveItem) {\n\t\t\t\t\t\t\tpreActiveItem.active = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\titem.active = true;\n\t\t\t\t\t\tpreActiveItem = item;\n\t\t\t\t\t\tglobalData.nowFileItem = item;\n\t\t\t\t\t\tthis.setStartLine(this.checkScrollTop(scrollTop));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (path.startsWith(item.path)) {\n\t\t\t\t\t\tif (!item.open) {\n\t\t\t\t\t\t\tthis.openFolder(item).then(() => {\n\t\t\t\t\t\t\t\t_findItem.call(this, path, item.children);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_findItem.call(this, path, item.children);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcheckScrollTop(scrollTop) {\n\t\t\tif (scrollTop > this.treeHeight - this.domHeight) {\n\t\t\t\tscrollTop = this.treeHeight - this.domHeight;\n\t\t\t}\n\t\t\tscrollTop = scrollTop < 0 ? 0 : scrollTop;\n\t\t\treturn scrollTop;\n\t\t},\n\t\tsetStartLine(scrollTop) {\n\t\t\tthis.startLine = Math.floor(scrollTop / this.itemHeight) + 1;\n\t\t\tthis.scrollTop = scrollTop;\n\t\t\tthis.deltaTop = scrollTop % this.itemHeight;\n\t\t\tthis.render();\n\t\t},\n\t\tsetTreeHeight() {\n\t\t\tthis.treeHeight = openedList.length * this.itemHeight;\n\t\t},\n\t\tsetOpendList() {\n\t\t\topenedList = this.getRenderList(globalData.fileTree, 0);\n\t\t\tglobalData.openedFileList = openedList;\n\t\t\tthis.setTreeHeight();\n\t\t},\n\t\tgetRenderList(list, deep) {\n\t\t\tlet results = [];\n\t\t\t_loopList(list, deep);\n\t\t\treturn results;\n\n\t\t\tfunction _loopList(list, deep) {\n\t\t\t\tlist.forEach((item) => {\n\t\t\t\t\titem.deep = deep + 1;\n\t\t\t\t\tresults.push(item);\n\t\t\t\t\tif (item.open && item.children.length) {\n\t\t\t\t\t\t_loopList(item.children, item.deep);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tgetNowHash(cwd) {\n\t\t\treturn spawnSync('git', ['log', '-1', '--format=%H'], { cwd: cwd }).stdout.toString();\n\t\t},\n\t\tonClickItem(item) {\n\t\t\tif (!item.active) {\n\t\t\t\tif (preActiveItem) {\n\t\t\t\t\tpreActiveItem.active = false;\n\t\t\t\t}\n\t\t\t\titem.active = true;\n\t\t\t\tpreActiveItem = item;\n\t\t\t\tglobalData.nowFileItem = item;\n\t\t\t\tif (item.type === 'dir') {\n\t\t\t\t\tif (!item.loaded) {\n\t\t\t\t\t\tthis.openFolder(item).then(() => {\n\t\t\t\t\t\t\tif (!item.gitRootPath) {\n\t\t\t\t\t\t\t\tthis.watchFileStatus(item.children);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem.open ? this.closeFolder(item) : this.openFolder(item);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tEventBus.$emit('file-open', item);\n\t\t\t\t}\n\t\t\t} else if (item.type === 'dir') {\n\t\t\t\titem.open ? this.closeFolder(item) : this.openFolder(item);\n\t\t\t}\n\t\t},\n\t\tonWheel(e) {\n\t\t\tthis.scrollDeltaY = e.deltaY;\n\t\t\tif (this.scrollDeltaY && !this.wheelTask) {\n\t\t\t\tthis.wheelTask = globalData.scheduler.addUiTask(() => {\n\t\t\t\t\tif (this.scrollDeltaY) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet scrollTop = this.scrollTop + this.scrollDeltaY;\n\t\t\t\t\t\t\tif (scrollTop > this.treeHeight - this.domHeight) {\n\t\t\t\t\t\t\t\tscrollTop = this.treeHeight - this.domHeight;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tscrollTop = scrollTop < 0 ? 0 : scrollTop;\n\t\t\t\t\t\t\tthis.onScroll(scrollTop);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.scrollDeltaY = 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tglobalData.scheduler.removeUiTask(this.wheelTask);\n\t\t\t\t\t\tthis.wheelTask = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tonScroll(e) {\n\t\t\tthis.setStartLine(e);\n\t\t},\n\t\tonContextmenu(e, item) {\n\t\t\tthis.$parent.$refs.sideTreeMenu.show(e, item);\n\t\t},\n\t},\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SideTree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SideTree.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SideTree.vue?vue&type=template&id=44066cfe&\"\nimport script from \"./SideTree.vue?vue&type=script&lang=js&\"\nexport * from \"./SideTree.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],ref:\"wrap\"},[_c('Menu',{ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onMenuChange}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div ref=\"wrap\" v-show=\"menuVisible\">\r\n        <Menu :checkable=\"false\" :menuList=\"menuList\" :styles=\"menuStyle\" @change=\"onMenuChange\" ref=\"menu\"></Menu>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Menu from './Menu';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\n\r\nexport default {\r\n    components: {\r\n        Menu,\r\n    },\r\n    data() {\r\n        return {\r\n            list: [],\r\n            menuList: [],\r\n            menuVisible: false,\r\n            menuStyle: {\r\n                left: '10px',\r\n                top: '40px',\r\n            },\r\n        };\r\n    },\r\n    provide() {\r\n        return {\r\n            rootList: this.list,\r\n        };\r\n    },\r\n    created() {\r\n        this.initEventBus();\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on('close-menu', () => {\r\n                this.menuVisible = false;\r\n            });\r\n        },\r\n        show(e) {\r\n            let $parent = $(this.$refs.wrap).parent();\r\n            this.menuVisible = true;\r\n            this.$nextTick(() => {\r\n                let menuWidth = 0;\r\n                let menuHeight = 0;\r\n                menuWidth = this.$refs.menu.$el.clientWidth;\r\n                menuHeight = this.$refs.menu.$el.clientHeight;\r\n                let offset = $parent.offset();\r\n                if (menuHeight + e.clientY > offset.top + $parent.height()) {\r\n                    this.menuStyle.top = e.clientY - offset.top - menuHeight + 'px';\r\n                } else {\r\n                    this.menuStyle.top = e.clientY - offset.top + 'px';\r\n                }\r\n                this.menuStyle.left = e.clientX - offset.left + 'px';\r\n            });\r\n        },\r\n        onMenuChange(item) {\r\n            switch (item.op) {\r\n            }\r\n            this.menuVisible = false;\r\n        },\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SideBarMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SideBarMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SideBarMenu.vue?vue&type=template&id=6f2e7e86&\"\nimport script from \"./SideBarMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./SideBarMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],ref:\"wrap\"},[_c('Menu',{ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onMenuChange}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div ref=\"wrap\" v-show=\"menuVisible\">\r\n\t\t<Menu :checkable=\"false\" :menuList=\"menuList\" :styles=\"menuStyle\" @change=\"onMenuChange\" ref=\"menu\"></Menu>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport Menu from './Menu';\r\nimport EventBus from '@/event';\r\nimport Util from '@/common/util';\r\nimport $ from 'jquery';\r\n\r\nconst path = window.require('path');\r\n\r\nexport default {\r\n\tname: 'SideTreMenu',\r\n\tcomponents: {\r\n\t\tMenu,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trootMenu: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'New File',\r\n\t\t\t\t\t\top: 'newFile',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'New Folder',\r\n\t\t\t\t\t\top: 'newFolder',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Reveal in File Explorer',\r\n\t\t\t\t\t\top: 'revealInFileExplorer',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Find in Folder',\r\n\t\t\t\t\t\top: 'findInFolder',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Open in Terminal',\r\n\t\t\t\t\t\top: 'openInTerminal',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Add Folder to Workspace',\r\n\t\t\t\t\t\top: 'addFolder',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Remove Folder from Workspace',\r\n\t\t\t\t\t\top: 'removeFolder',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Copy',\r\n\t\t\t\t\t\top: 'copy',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Paste',\r\n\t\t\t\t\t\top: 'paste',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Copy Path',\r\n\t\t\t\t\t\top: 'copyPath',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Copy Relative Path',\r\n\t\t\t\t\t\top: 'copyRelativePath',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t\tdirMenu: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'New File',\r\n\t\t\t\t\t\top: 'newFile',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'New Folder',\r\n\t\t\t\t\t\top: 'newFolder',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Reveal in File Explorer',\r\n\t\t\t\t\t\top: 'revealInFileExplorer',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Find in Folder',\r\n\t\t\t\t\t\top: 'findInFolder',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Open in Terminal',\r\n\t\t\t\t\t\top: 'openInTerminal',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Cut',\r\n\t\t\t\t\t\top: 'cut',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Copy',\r\n\t\t\t\t\t\top: 'copy',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Paste',\r\n\t\t\t\t\t\top: 'paste',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Copy Path',\r\n\t\t\t\t\t\top: 'copyPath',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Copy Relative Path',\r\n\t\t\t\t\t\top: 'copyRelativePath',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Reaname',\r\n\t\t\t\t\t\top: 'rename',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Delete',\r\n\t\t\t\t\t\top: 'delete',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t\tfileMenu: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Reveal in File Explorer',\r\n\t\t\t\t\t\top: 'revealInFileExplorer',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Open in Terminal',\r\n\t\t\t\t\t\top: 'openInTerminal',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Cut',\r\n\t\t\t\t\t\top: 'cut',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Copy',\r\n\t\t\t\t\t\top: 'copy',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Copy Path',\r\n\t\t\t\t\t\top: 'copyPath',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Copy Relative Path',\r\n\t\t\t\t\t\top: 'copyRelativePath',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Reaname',\r\n\t\t\t\t\t\top: 'rename',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Delete',\r\n\t\t\t\t\t\top: 'delete',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t\tmenuList: [],\r\n\t\t\tmenuVisible: false,\r\n\t\t\tmenuStyle: {\r\n\t\t\t\tleft: '10px',\r\n\t\t\t\ttop: '40px',\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\tprovide() {},\r\n\tcreated() {\r\n\t\tthis.initEventBus();\r\n\t},\r\n\tmethods: {\r\n\t\tinitEventBus() {\r\n\t\t\tEventBus.$on('close-menu', () => {\r\n\t\t\t\tthis.menuVisible = false;\r\n\t\t\t});\r\n\t\t},\r\n\t\tshow(e, treeItem) {\r\n\t\t\tlet $parent = $(this.$refs.wrap).parent();\r\n\t\t\tthis.menuVisible = true;\r\n\t\t\tthis.treeItem = treeItem;\r\n\t\t\tif (treeItem.type === 'dir') {\r\n\t\t\t\tif (!treeItem.parentPath) {\r\n\t\t\t\t\tthis.menuList = this.rootMenu;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.menuList = this.dirMenu;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.menuList = this.fileMenu;\r\n\t\t\t}\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tlet menuHeight = 0;\r\n\t\t\t\tmenuHeight = this.$refs.menu.$el.clientHeight;\r\n\t\t\t\tlet offset = $parent.offset();\r\n\t\t\t\tif (menuHeight + e.clientY > offset.top + $parent.height()) {\r\n\t\t\t\t\tthis.menuStyle.top = e.clientY - offset.top - menuHeight + 'px';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.menuStyle.top = e.clientY - offset.top + 'px';\r\n\t\t\t\t}\r\n\t\t\t\tthis.menuStyle.left = e.clientX - offset.left + 'px';\r\n\t\t\t});\r\n\t\t},\r\n\t\tonMenuChange(item) {\r\n\t\t\tlet dirPath = '';\r\n\t\t\tlet treeItem = Object.assign({}, this.treeItem);\r\n\t\t\tswitch (item.op) {\r\n\t\t\t\tcase 'newFile':\r\n\t\t\t\t\tEventBus.$emit('file-create-tree', treeItem.path);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'newFolder':\r\n\t\t\t\t\tEventBus.$emit('folder-create-tree', treeItem.path);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'revealInFileExplorer':\r\n\t\t\t\t\tEventBus.$emit('reveal-in-file-explorer', treeItem.path);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'findInFolder':\r\n\t\t\t\t\tdirPath = path.relative(treeItem.rootPath, treeItem.path);\r\n\t\t\t\t\tdirPath = path.join(path.basename(treeItem.rootPath), dirPath);\r\n\t\t\t\t\tdirPath = '.' + path.sep + dirPath;\r\n\t\t\t\t\tEventBus.$emit('find-in-folder', { path: dirPath });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'openInTerminal':\r\n\t\t\t\t\tdirPath = '';\r\n\t\t\t\t\tif (this.treeItem.type === 'file') {\r\n\t\t\t\t\t\tdirPath = path.dirname(this.treeItem.path);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdirPath = this.treeItem.path;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tEventBus.$emit('terminal-new', dirPath);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'addFolder':\r\n\t\t\t\t\tEventBus.$emit('folder-add');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'removeFolder':\r\n\t\t\t\t\tEventBus.$emit('folder-remove', treeItem.path);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'cut':\r\n\t\t\t\t\tEventBus.$emit('file-cut', treeItem);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'copy':\r\n\t\t\t\t\tEventBus.$emit('file-copy', treeItem);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'paste':\r\n\t\t\t\t\tEventBus.$emit('file-paste', treeItem);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'copyPath':\r\n\t\t\t\t\tUtil.writeClipboard(treeItem.path);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'copyRelativePath':\r\n\t\t\t\t\tdirPath = treeItem.name;\r\n\t\t\t\t\twhile (treeItem.parent && treeItem.parent.parent) {\r\n\t\t\t\t\t\tdirPath = path.join(treeItem.parent.name, dirPath);\r\n\t\t\t\t\t\ttreeItem = treeItem.parent;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tUtil.writeClipboard(dirPath);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'rename':\r\n\t\t\t\t\tEventBus.$emit('file-rename-input', treeItem);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'delete':\r\n\t\t\t\t\tEventBus.$emit('file-delete', treeItem);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.menuVisible = false;\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SideTreMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SideTreMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SideTreMenu.vue?vue&type=template&id=82163e00&\"\nimport script from \"./SideTreMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./SideTreMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div @contextmenu.prevent.stop=\"onContextmenu\" @selectstart.prevent class=\"my-side-bar\" ref=\"sideBar\">\r\n\t\t<div :style=\"{opacity: opacity}\" class=\"my-height-100\" style=\"overflow: hidden\">\r\n\t\t\t<div class=\"side-bar-title my-shadow\">EXPLORER</div>\r\n\t\t\t<side-tree ref=\"tree\"></side-tree>\r\n\t\t</div>\r\n\t\t<div class=\"my-rename-overlay\" v-if=\"renameVisible\">\r\n\t\t\t<input :style=\"inputStyle\" @blur=\"onBlur\" @keydown.enter=\"onConfirm\" @keydown.esc=\"onCancel\" class=\"my-rename-input\" ref=\"input\" spellcheck=\"false\" type=\"text\" v-model=\"newFileNmme\" />\r\n\t\t</div>\r\n\t\t<SideBarMenu ref=\"sideBarMenu\"></SideBarMenu>\r\n\t\t<SideTreMenu ref=\"sideTreeMenu\"></SideTreMenu>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport SideTree from './SideTree';\r\nimport SideBarMenu from './SideBarMenu';\r\nimport SideTreMenu from './SideTreMenu';\r\nimport globalData from '@/data/globalData';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\tSideTree,\r\n\t\tSideBarMenu,\r\n\t\tSideTreMenu,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tnewFileNmme: '',\r\n\t\t\trenameVisible: false,\r\n\t\t\tinputStyle: {},\r\n\t\t\topacity: 1,\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.initEvent();\r\n\t},\r\n\tmethods: {\r\n\t\tinitEvent() {\r\n\t\t\tEventBus.$on('file-rename-input', (fileObj) => {\r\n\t\t\t\tthis.fileObj = fileObj;\r\n\t\t\t\tthis.newFileNmme = fileObj.name;\r\n\t\t\t\tthis.renameVisible = true;\r\n\t\t\t\tthis.opacity = 0.5;\r\n\t\t\t\tthis.setInputPosition(fileObj.id);\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tif (this.$refs.input) {\r\n\t\t\t\t\t\t\tthis.$refs.input.focus();\r\n\t\t\t\t\t\t\tthis.$refs.input.select();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetInputPosition(id) {\r\n\t\t\tlet $item = $('#' + id);\r\n\t\t\tlet $text = $item.find('.tree-item-text');\r\n\t\t\tlet left = $text.offset().left - 52;\r\n\t\t\tlet top = $item.offset().top - 35;\r\n\t\t\tthis.inputStyle = {\r\n\t\t\t\tleft: left + 'px',\r\n\t\t\t\ttop: top + 'px',\r\n\t\t\t\tright: 0,\r\n\t\t\t};\r\n\t\t},\r\n\t\tconfirmInput() {\r\n\t\t\tconst path = window.require('path');\r\n\t\t\tif (this.newFileNmme && this.newFileNmme != this.fileObj.name) {\r\n\t\t\t\tif (this.fileObj.path) {\r\n\t\t\t\t\tEventBus.$emit('file-rename', this.fileObj.path, this.newFileNmme);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet filePath = path.join(this.fileObj.parentPath, this.newFileNmme);\r\n\t\t\t\t\tif (this.fileObj.type === 'dir') {\r\n\t\t\t\t\t\tEventBus.$emit('folder-create', filePath);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tEventBus.$emit('file-create', filePath);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (!this.fileObj.path) {\r\n\t\t\t\tthis.$refs.tree.render();\r\n\t\t\t}\r\n\t\t\tthis.onCancel();\r\n\t\t},\r\n\t\tonBlur() {\r\n\t\t\tthis.confirmInput();\r\n\t\t},\r\n\t\tonConfirm() {\r\n\t\t\tthis.confirmInput();\r\n\t\t},\r\n\t\tonCancel() {\r\n\t\t\tthis.newFileNmme = '';\r\n\t\t\tthis.renameVisible = false;\r\n\t\t\tthis.opacity = 1;\r\n\t\t},\r\n\t\tonContextmenu(e) {},\r\n\t},\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SideBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SideBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SideBar.vue?vue&type=template&id=05204ea7&\"\nimport script from \"./SideBar.vue?vue&type=script&lang=js&\"\nexport * from \"./SideBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"my-activity-bar\",on:{\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();}}},[_c('div',{staticClass:\"bar-item\",class:{ 'my-active': _vm.activity === 'files' },on:{\"click\":function($event){return _vm.onChange('files')}}},[_c('i',{staticClass:\"my-icon my-icon-files\"})]),_c('div',{staticClass:\"bar-item\",class:{ 'my-active': _vm.activity === 'search' },on:{\"click\":function($event){return _vm.onChange('search')}}},[_c('i',{staticClass:\"my-icon my-icon-search\"})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2022-05-09 13:15:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div @contextmenu.prevent.stop class=\"my-activity-bar\">\r\n        <div class=\"bar-item\" :class=\"{ 'my-active': activity === 'files' }\" @click=\"onChange('files')\"><i class=\"my-icon my-icon-files\"></i></div>\r\n        <div class=\"bar-item\" :class=\"{ 'my-active': activity === 'search' }\" @click=\"onChange('search')\"><i class=\"my-icon my-icon-search\"></i></div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport EventBus from '@/event';\r\n\r\nexport default {\r\n    name: 'ActivityBar',\r\n    components: {},\r\n    data() {\r\n        return {\r\n            activity: 'files',\r\n        };\r\n    },\r\n    watch: {\r\n        activity() {\r\n            EventBus.$emit('activity-change', this.activity);\r\n        }\r\n    },\r\n    mounted() {\r\n        this.initEvent();\r\n    },\r\n    methods: {\r\n        initEvent() {\r\n            EventBus.$on('find-in-folder', () => {\r\n                this.activity = 'search';\r\n            });\r\n        },\r\n        onChange(activity) {\r\n            this.activity = activity;\r\n        },\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ActivityBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ActivityBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ActivityBar.vue?vue&type=template&id=7003a3c9&\"\nimport script from \"./ActivityBar.vue?vue&type=script&lang=js&\"\nexport * from \"./ActivityBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"my-side-search\"},[_c('div',{staticClass:\"my-search-wrap\"},[_c('div',{staticClass:\"my-search-condition\"},[_c('div',{staticClass:\"side-search-title my-shadow\"},[_vm._v(\"SEARCH\")]),_c('div',{staticStyle:{\"position\":\"relative\",\"padding\":\"0 10px 0 20px\"}},[_c('div',{staticClass:\"my-search-left active-click\",staticStyle:{\"border-radius\":\"0\"},attrs:{\"tabindex\":\"-1\"},on:{\"click\":function($event){_vm.replaceVisible = !_vm.replaceVisible}}},[_c('span',{staticClass:\"iconfont\",class:{ 'icon-down1': _vm.replaceVisible, 'icon-right': !_vm.replaceVisible },staticStyle:{\"font-size\":\"14px\"},attrs:{\"title\":\"Toggle Replace mode\"}})]),_c('div',{staticClass:\"my-search-input\",class:{ 'my-active': _vm.input1Focus }},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],ref:\"input1\",style:({ height: _vm.input1Height + 'px' }),attrs:{\"placeholder\":\"Search\",\"spellcheck\":\"false\",\"type\":\"text\"},domProps:{\"value\":(_vm.text)},on:{\"blur\":function($event){_vm.input1Focus = false},\"focus\":function($event){_vm.input1Focus = true},\"keydown\":_vm.onKeyDown1,\"input\":function($event){if($event.target.composing)return;_vm.text=$event.target.value}}}),_c('span',{staticClass:\"my-search-suffix\",class:{ 'my-active': _vm.matchCase },attrs:{\"title\":\"Match Case(Alt+C)\"},on:{\"click\":_vm.changeCase}},[_vm._v(\"Aa\")]),_c('span',{staticClass:\"my-search-suffix iconfont icon-whole-word\",class:{ 'my-active': _vm.wholeWord },attrs:{\"title\":\"Match Whole Word(Alt+W)\"},on:{\"click\":_vm.changeWhole}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.replaceVisible),expression:\"replaceVisible\"}],staticClass:\"my-center-start\",staticStyle:{\"margin-top\":\"10px\"}},[_c('div',{staticClass:\"my-search-input\",class:{ 'my-active': _vm.input2Focus },staticStyle:{\"flex-grow\":\"1\"}},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.replaceText),expression:\"replaceText\"}],ref:\"input2\",style:({ height: _vm.input2Height + 'px' }),attrs:{\"placeholder\":\"Replace\",\"spellcheck\":\"false\",\"type\":\"text\"},domProps:{\"value\":(_vm.replaceText)},on:{\"blur\":function($event){_vm.input2Focus = false},\"focus\":function($event){_vm.input2Focus = true},\"keydown\":_vm.onKeyDown2,\"input\":function($event){if($event.target.composing)return;_vm.replaceText=$event.target.value}}})]),_c('span',{staticClass:\"iconfont icon-replace-all active-click\",class:{ 'enabled-color': _vm.results.length > 0, 'disabled-color': _vm.results.length == 0 },staticStyle:{\"margin-left\":\"10px\"},attrs:{\"tabindex\":\"-1\",\"title\":\"Replace All(Ctrl+Alt+Enter)\"},on:{\"click\":_vm.replaceAll}})])]),_c('div',{staticStyle:{\"padding\":\"0 10px 0 20px\"}},[_c('div',{staticStyle:{\"line-height\":\"30px\"}},[_vm._v(\"files to include\")]),_c('div',{staticClass:\"my-search-input\",class:{ 'my-active': _vm.input3Focus }},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.includePath),expression:\"includePath\"}],ref:\"input2\",style:({ height: _vm.input3Height + 'px' }),attrs:{\"spellcheck\":\"false\",\"type\":\"text\"},domProps:{\"value\":(_vm.includePath)},on:{\"blur\":function($event){_vm.input3Focus = false},\"focus\":function($event){_vm.input3Focus = true},\"keydown\":_vm.onKeyDown3,\"input\":function($event){if($event.target.composing)return;_vm.includePath=$event.target.value}}})]),_c('div',{staticStyle:{\"line-height\":\"30px\"}},[_vm._v(\"files to include\")]),_c('div',{staticClass:\"my-search-input\",class:{ 'my-active': _vm.input4Focus }},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.excludePath),expression:\"excludePath\"}],ref:\"input2\",style:({ height: _vm.input4Height + 'px' }),attrs:{\"spellcheck\":\"false\",\"type\":\"text\"},domProps:{\"value\":(_vm.excludePath)},on:{\"blur\":function($event){_vm.input4Focus = false},\"focus\":function($event){_vm.input4Focus = true},\"keydown\":_vm.onKeyDown4,\"input\":function($event){if($event.target.composing)return;_vm.excludePath=$event.target.value}}})]),_c('div',{staticClass:\"my-center-between\",staticStyle:{\"height\":\"30px\",\"line-height\":\"30px\"}},[(_vm.count)?_c('span',[_vm._v(_vm._s(_vm.count)+\" results in \"+_vm._s(_vm.results.length)+\" files\")]):_vm._e(),(_vm.count&&_vm.searching)?_c('span',{staticClass:\"stop-search\",on:{\"click\":_vm.stopSeach}},[_vm._v(\"stop\")]):_vm._e()])])]),_c('file-content-search-results',{ref:\"results\",attrs:{\"list\":_vm.results}})],1),(_vm.replacing)?_c('div',{staticClass:\"my-search-replacing\"}):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"wrap\",staticClass:\"my-results-scroller\",on:{\"mouseenter\":_vm.showScrollBar,\"mouseleave\":_vm.hideScrollBar,\"mousemove\":_vm.showScrollBar,\"scroll\":_vm.onScroll,\"wheel\":function($event){$event.stopPropagation();return _vm.onWheel.apply(null, arguments)}}},[_c('div',{staticClass:\"my-results-content\",style:({ top: -_vm.deltaTop + 'px' })},_vm._l((_vm.renderList),function(item){return _c('div',{staticClass:\"tree-item\",on:{\"click\":function($event){$event.stopPropagation();return _vm.onClickItem(item)}}},[_c('div',{staticClass:\"tree-item-title my-center-start\",class:[item.active ? 'my-active' : ''],style:({ 'padding-left': _vm._paddingLeft(item) }),attrs:{\"title\":item.deep === 1 ? item.path : item.text},on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();}}},[(item.deep === 1)?[(item.open)?_c('span',{staticClass:\"left-icon iconfont icon-down1\"}):_c('span',{staticClass:\"left-icon iconfont icon-right\"})]:_vm._e(),_c('div',{staticClass:\"tree-item-content my-center-start\",class:[item.icon]},[_c('span',{staticClass:\"tree-item-text\",staticStyle:{\"margin-left\":\"4px\"},domProps:{\"innerHTML\":_vm._s(item.html)}}),(item.deep === 1)?_c('span',{staticClass:\"my-search-count\"},[_vm._v(_vm._s(item.children.length))]):_vm._e()])],2)])}),0),_c('v-scroll-bar',{staticClass:\"my-scroll-small\",class:{'my-scroll-visible': _vm.scrollVisible},attrs:{\"height\":_vm.treeHeight,\"scroll-top\":_vm.scrollTop},on:{\"scroll\":_vm.onScroll}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div @mouseenter=\"showScrollBar\" @mouseleave=\"hideScrollBar\" @mousemove=\"showScrollBar\" @scroll=\"onScroll\" @wheel.stop=\"onWheel\" class=\"my-results-scroller\" ref=\"wrap\">\r\n\t\t<div :style=\"{ top: -deltaTop + 'px' }\" class=\"my-results-content\">\r\n\t\t\t<div @click.stop=\"onClickItem(item)\" class=\"tree-item\" v-for=\"item in renderList\">\r\n\t\t\t\t<div\r\n\t\t\t\t\t:class=\"[item.active ? 'my-active' : '']\"\r\n\t\t\t\t\t:style=\"{ 'padding-left': _paddingLeft(item) }\"\r\n\t\t\t\t\t:title=\"item.deep === 1 ? item.path : item.text\"\r\n\t\t\t\t\t@contextmenu.stop.prevent\r\n\t\t\t\t\tclass=\"tree-item-title my-center-start\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template v-if=\"item.deep === 1\">\r\n\t\t\t\t\t\t<span class=\"left-icon iconfont icon-down1\" v-if=\"item.open\"></span>\r\n\t\t\t\t\t\t<span class=\"left-icon iconfont icon-right\" v-else></span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<div :class=\"[item.icon]\" class=\"tree-item-content my-center-start\">\r\n\t\t\t\t\t\t<span class=\"tree-item-text\" style=\"margin-left: 4px\" v-html=\"item.html\"></span>\r\n\t\t\t\t\t\t<span class=\"my-search-count\" v-if=\"item.deep === 1\">{{ item.children.length }}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<v-scroll-bar :class=\"{'my-scroll-visible': scrollVisible}\" :height=\"treeHeight\" :scroll-top=\"scrollTop\" @scroll=\"onScroll\" class=\"my-scroll-small\"></v-scroll-bar>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport VScrollBar from './VScrollBar.vue';\r\nimport EventBus from '@/event';\r\nimport Util from '@/common/util';\r\nimport globalData from '@/data/globalData';\r\n\r\nlet preActiveItem = null;\r\nlet openedList = [];\r\n\r\nexport default {\r\n\tname: 'FileContentSearchResults',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\titemHeight: 30,\r\n\t\t\titemPadding: 16,\r\n\t\t\trenderList: [],\r\n\t\t\tstartLine: 1,\r\n\t\t\tscrollTop: 0,\r\n\t\t\tdeltaTop: 0,\r\n\t\t\ttreeHeight: 0,\r\n\t\t\tmaxVisibleLines: 100,\r\n\t\t\tscrollVisible: false,\r\n\t\t};\r\n\t},\r\n\tcomponents: {\r\n\t\tVScrollBar,\r\n\t},\r\n\tcomputed: {\r\n\t\t_paddingLeft() {\r\n\t\t\treturn function (item) {\r\n\t\t\t\treturn item.deep * this.itemPadding + 'px';\r\n\t\t\t};\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tthis.initEventBus();\r\n\t},\r\n\tmounted() {\r\n\t\tthis.domHeight = this.$refs.wrap.clientHeight;\r\n\t\tthis.maxVisibleLines = Math.ceil(this.domHeight / this.itemHeight) + 1;\r\n\t\tthis.render();\r\n\t\tthis.initResizeEvent();\r\n\t},\r\n\tmethods: {\r\n\t\tinitResizeEvent() {\r\n\t\t\tconst resizeObserver = new ResizeObserver((entries) => {\r\n\t\t\t\tif (this.$refs.wrap && this.$refs.wrap.clientHeight) {\r\n\t\t\t\t\tthis.domHeight = this.$refs.wrap.clientHeight;\r\n\t\t\t\t\tthis.maxVisibleLines = Math.ceil(this.domHeight / this.itemHeight) + 1;\r\n\t\t\t\t\tthis.render();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tresizeObserver.observe(this.$refs.wrap);\r\n\t\t},\r\n\t\tinitEventBus() {\r\n\t\t\tEventBus.$on('icon-changed', () => {\r\n\t\t\t\topenedList.forEach((item) => {\r\n\t\t\t\t\titem.icon = '';\r\n\t\t\t\t});\r\n\t\t\t\tthis.render();\r\n\t\t\t});\r\n\t\t\tEventBus.$on('theme-changed', () => {\r\n\t\t\t\topenedList.forEach((item) => {\r\n\t\t\t\t\titem.icon = '';\r\n\t\t\t\t});\r\n\t\t\t\tthis.render();\r\n\t\t\t});\r\n\t\t\tEventBus.$on('editor-changed', (data) => {\r\n\t\t\t\tlet path = data && data.path;\r\n\t\t\t\tif (path && !(preActiveItem && preActiveItem.path === path)) {\r\n\t\t\t\t\tif (preActiveItem) {\r\n\t\t\t\t\t\tpreActiveItem.active = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.focusItem(path);\r\n\t\t\t\t} else if (!path && preActiveItem) {\r\n\t\t\t\t\tpreActiveItem.active = false;\r\n\t\t\t\t\tpreActiveItem = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tshowScrollBar() {\r\n\t\t\tthis.scrollVisible = true;\r\n\t\t},\r\n\t\thideScrollBar() {\r\n\t\t\tthis.scrollVisible = false;\r\n\t\t},\r\n\t\trender() {\r\n\t\t\tcancelAnimationFrame(this.renderTimer);\r\n\t\t\tthis.renderTimer = requestAnimationFrame(() => {\r\n\t\t\t\tthis.renderList = openedList.slice(this.startLine - 1, this.startLine - 1 + this.maxVisibleLines);\r\n\t\t\t\tthis.renderList.forEach((item) => {\r\n\t\t\t\t\tif (globalData.nowIconData && item.deep == 1) {\r\n\t\t\t\t\t\titem.icon = Util.getIconByPath({\r\n\t\t\t\t\t\t\tfilePath: item.path,\r\n\t\t\t\t\t\t\tfileType: 'file',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\titem.icon = item.icon ? `my-file-icon my-file-icon-${item.icon}` : '';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!item.html) {\r\n\t\t\t\t\t\tlet obj = this.getHtml(item);\r\n\t\t\t\t\t\titem.html = obj.html;\r\n\t\t\t\t\t\titem.text = obj.text;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\taddResults(results) {\r\n\t\t\tresults.forEach((item) => {\r\n\t\t\t\tObject.freeze(item.children);\r\n\t\t\t});\r\n\t\t\topenedList = openedList.concat(this.getRenderList(results, 0));\r\n\t\t\tthis.setTreeHeight();\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tclear() {\r\n\t\t\topenedList = [];\r\n\t\t\tthis.setTreeHeight();\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tfocusItem(path) {\r\n\t\t\tlet index = 0;\r\n\t\t\t_findItem.call(this, path);\r\n\r\n\t\t\tfunction _findItem(path) {\r\n\t\t\t\tfor (let i = index; i < openedList.length; i++) {\r\n\t\t\t\t\tlet item = openedList[i];\r\n\t\t\t\t\tif (item.path === path) {\r\n\t\t\t\t\t\tlet scrollTop = this.itemHeight * i - this.domHeight / 2;\r\n\t\t\t\t\t\tif (scrollTop > this.treeHeight - this.domHeight) {\r\n\t\t\t\t\t\t\tscrollTop = this.treeHeight - this.domHeight;\r\n\t\t\t\t\t\t} else if (scrollTop < 0) {\r\n\t\t\t\t\t\t\tscrollTop = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.setStartLine(scrollTop);\r\n\t\t\t\t\t\tif (!item.active) {\r\n\t\t\t\t\t\t\tthis.onClickItem(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else if (path.startsWith(item.path)) {\r\n\t\t\t\t\t\tif (!item.open) {\r\n\t\t\t\t\t\t\tindex = i + 1;\r\n\t\t\t\t\t\t\tthis.onClickItem(item).then(() => {\r\n\t\t\t\t\t\t\t\t_findItem.call(this, path);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcheckScrollTop(scrollTop) {\r\n\t\t\tif (scrollTop > this.treeHeight - this.domHeight) {\r\n\t\t\t\tscrollTop = this.treeHeight - this.domHeight;\r\n\t\t\t}\r\n\t\t\tscrollTop = scrollTop < 0 ? 0 : scrollTop;\r\n\t\t\treturn scrollTop;\r\n\t\t},\r\n\t\tsetStartLine(scrollTop) {\r\n\t\t\tthis.startLine = Math.floor(scrollTop / this.itemHeight) + 1;\r\n\t\t\tthis.scrollTop = scrollTop;\r\n\t\t\tthis.deltaTop = scrollTop % this.itemHeight;\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tsetTreeHeight() {\r\n\t\t\tthis.treeHeight = openedList.length * this.itemHeight;\r\n\t\t},\r\n\t\tgetRenderList(list, deep) {\r\n\t\t\tlet results = [];\r\n\t\t\t_loopList(list, deep);\r\n\t\t\treturn results;\r\n\r\n\t\t\tfunction _loopList(list, deep) {\r\n\t\t\t\tlist.forEach((item) => {\r\n\t\t\t\t\titem.deep = deep + 1;\r\n\t\t\t\t\tresults.push(item);\r\n\t\t\t\t\tif (item.open && item.children.length) {\r\n\t\t\t\t\t\t_loopList(item.children, item.deep);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetHtml(item) {\r\n\t\t\tlet html = '';\r\n\t\t\tlet text = '';\r\n\t\t\tif (item.deep === 1) {\r\n\t\t\t\thtml = item.name;\r\n\t\t\t} else {\r\n\t\t\t\ttext = item.text;\r\n\t\t\t\thtml = item.html;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\thtml: html,\r\n\t\t\t\ttext: text,\r\n\t\t\t};\r\n\t\t},\r\n\t\tonClickItem(item) {\r\n\t\t\tif (!item.active) {\r\n\t\t\t\tif (preActiveItem) {\r\n\t\t\t\t\tpreActiveItem.active = false;\r\n\t\t\t\t}\r\n\t\t\t\titem.active = true;\r\n\t\t\t\tpreActiveItem = item;\r\n\t\t\t}\r\n\t\t\tif (item.deep == 1) {\r\n\t\t\t\titem.open = !item.open;\r\n\t\t\t\t_changOpen.call(this, item);\r\n\t\t\t} else if (item.deep > 1) {\r\n\t\t\t\tEventBus.$emit('file-open', item);\r\n\t\t\t}\r\n\t\t\treturn Promise.resolve();\r\n\r\n\t\t\tfunction _changOpen(item) {\r\n\t\t\t\tif (item.children.length) {\r\n\t\t\t\t\tif (item.open) {\r\n\t\t\t\t\t\tlet index = openedList.indexOf(item);\r\n\t\t\t\t\t\topenedList = openedList\r\n\t\t\t\t\t\t\t.slice(0, index + 1)\r\n\t\t\t\t\t\t\t.concat(this.getRenderList(item.children, item.deep))\r\n\t\t\t\t\t\t\t.concat(openedList.slice(index + 1));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet index = openedList.indexOf(item) + 1;\r\n\t\t\t\t\t\tlet endIn = index;\r\n\t\t\t\t\t\twhile (endIn < openedList.length && openedList[endIn].path === item.path) {\r\n\t\t\t\t\t\t\tendIn++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\topenedList.splice(index, endIn - index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setTreeHeight();\r\n\t\t\t\t\tthis.setStartLine(this.checkScrollTop(this.scrollTop));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonWheel(e) {\r\n\t\t\tthis.scrollDeltaY = e.deltaY;\r\n\t\t\tif (this.scrollDeltaY && !this.wheelTask) {\r\n\t\t\t\tthis.wheelTask = globalData.scheduler.addUiTask(() => {\r\n\t\t\t\t\tif (this.scrollDeltaY) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tlet scrollTop = this.scrollTop + this.scrollDeltaY;\r\n\t\t\t\t\t\t\tthis.setStartLine(this.checkScrollTop(scrollTop));\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollDeltaY = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tglobalData.scheduler.removeUiTask(this.wheelTask);\r\n\t\t\t\t\t\tthis.wheelTask = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonScroll(e) {\r\n\t\t\tthis.setStartLine(e);\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FileContentSearchResults.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FileContentSearchResults.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FileContentSearchResults.vue?vue&type=template&id=3c571f81&\"\nimport script from \"./FileContentSearchResults.vue?vue&type=script&lang=js&\"\nexport * from \"./FileContentSearchResults.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div class=\"my-side-search\">\r\n\t\t<div class=\"my-search-wrap\">\r\n\t\t\t<div class=\"my-search-condition\">\r\n\t\t\t\t<div class=\"side-search-title my-shadow\">SEARCH</div>\r\n\t\t\t\t<div style=\"position: relative; padding: 0 10px 0 20px\">\r\n\t\t\t\t\t<div @click=\"replaceVisible = !replaceVisible\" class=\"my-search-left active-click\" style=\"border-radius: 0\" tabindex=\"-1\">\r\n\t\t\t\t\t\t<span :class=\"{ 'icon-down1': replaceVisible, 'icon-right': !replaceVisible }\" class=\"iconfont\" style=\"font-size: 14px\" title=\"Toggle Replace mode\"></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div :class=\"{ 'my-active': input1Focus }\" class=\"my-search-input\">\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t:style=\"{ height: input1Height + 'px' }\"\r\n\t\t\t\t\t\t\t@blur=\"input1Focus = false\"\r\n\t\t\t\t\t\t\t@focus=\"input1Focus = true\"\r\n\t\t\t\t\t\t\t@keydown=\"onKeyDown1\"\r\n\t\t\t\t\t\t\tplaceholder=\"Search\"\r\n\t\t\t\t\t\t\tref=\"input1\"\r\n\t\t\t\t\t\t\tspellcheck=\"false\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tv-model=\"text\"\r\n\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t<span :class=\"{ 'my-active': matchCase }\" @click=\"changeCase\" class=\"my-search-suffix\" title=\"Match Case(Alt+C)\">Aa</span>\r\n\t\t\t\t\t\t<span :class=\"{ 'my-active': wholeWord }\" @click=\"changeWhole\" class=\"my-search-suffix iconfont icon-whole-word\" title=\"Match Whole Word(Alt+W)\"></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"my-center-start\" style=\"margin-top: 10px\" v-show=\"replaceVisible\">\r\n\t\t\t\t\t\t<div :class=\"{ 'my-active': input2Focus }\" class=\"my-search-input\" style=\"flex-grow: 1\">\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t:style=\"{ height: input2Height + 'px' }\"\r\n\t\t\t\t\t\t\t\t@blur=\"input2Focus = false\"\r\n\t\t\t\t\t\t\t\t@focus=\"input2Focus = true\"\r\n\t\t\t\t\t\t\t\t@keydown=\"onKeyDown2\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Replace\"\r\n\t\t\t\t\t\t\t\tref=\"input2\"\r\n\t\t\t\t\t\t\t\tspellcheck=\"false\"\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tv-model=\"replaceText\"\r\n\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t:class=\"{ 'enabled-color': results.length > 0, 'disabled-color': results.length == 0 }\"\r\n\t\t\t\t\t\t\t@click=\"replaceAll\"\r\n\t\t\t\t\t\t\tclass=\"iconfont icon-replace-all active-click\"\r\n\t\t\t\t\t\t\tstyle=\"margin-left: 10px\"\r\n\t\t\t\t\t\t\ttabindex=\"-1\"\r\n\t\t\t\t\t\t\ttitle=\"Replace All(Ctrl+Alt+Enter)\"\r\n\t\t\t\t\t\t></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style=\"padding: 0 10px 0 20px\">\r\n\t\t\t\t\t<div style=\"line-height: 30px\">files to include</div>\r\n\t\t\t\t\t<div :class=\"{ 'my-active': input3Focus }\" class=\"my-search-input\">\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t:style=\"{ height: input3Height + 'px' }\"\r\n\t\t\t\t\t\t\t@blur=\"input3Focus = false\"\r\n\t\t\t\t\t\t\t@focus=\"input3Focus = true\"\r\n\t\t\t\t\t\t\t@keydown=\"onKeyDown3\"\r\n\t\t\t\t\t\t\tref=\"input2\"\r\n\t\t\t\t\t\t\tspellcheck=\"false\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tv-model=\"includePath\"\r\n\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style=\"line-height: 30px\">files to include</div>\r\n\t\t\t\t\t<div :class=\"{ 'my-active': input4Focus }\" class=\"my-search-input\">\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t:style=\"{ height: input4Height + 'px' }\"\r\n\t\t\t\t\t\t\t@blur=\"input4Focus = false\"\r\n\t\t\t\t\t\t\t@focus=\"input4Focus = true\"\r\n\t\t\t\t\t\t\t@keydown=\"onKeyDown4\"\r\n\t\t\t\t\t\t\tref=\"input2\"\r\n\t\t\t\t\t\t\tspellcheck=\"false\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tv-model=\"excludePath\"\r\n\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"my-center-between\" style=\"height: 30px; line-height: 30px\">\r\n\t\t\t\t\t\t<span v-if=\"count\">{{ count }} results in {{ results.length }} files</span>\r\n\t\t\t\t\t\t<span @click=\"stopSeach\" class=\"stop-search\" v-if=\"count&&searching\">stop</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<file-content-search-results :list=\"results\" ref=\"results\"></file-content-search-results>\r\n\t\t</div>\r\n\t\t<div class=\"my-search-replacing\" v-if=\"replacing\"></div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport EventBus from '@/event';\r\nimport FileContentSearchResults from './FileContentSearchResults.vue';\r\nimport Util from '@/common/util';\r\n\r\nconst path = window.require('path');\r\nconst child_process = window.require('child_process');\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\tFileContentSearchResults,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttext: '',\r\n\t\t\treplaceText: '',\r\n\t\t\treplaceVisible: true,\r\n\t\t\twholeWord: false,\r\n\t\t\tmatchCase: false,\r\n\t\t\tinput1Focus: false,\r\n\t\t\tinput2Focus: false,\r\n\t\t\tinput3Focus: false,\r\n\t\t\tinput4Focus: false,\r\n\t\t\treplacing: false,\r\n\t\t\tsearching: false,\r\n\t\t\tinput1Height: 30,\r\n\t\t\tinput2Height: 30,\r\n\t\t\tinput3Height: 30,\r\n\t\t\tinput4Height: 30,\r\n\t\t\tincludePath: '',\r\n\t\t\texcludePath: '',\r\n\t\t\tresults: [],\r\n\t\t\tcount: 0,\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\ttext() {\r\n\t\t\tlet lines = this.text.split(/\\n/);\r\n\t\t\tthis.input1Height = lines.length * 20 + 10;\r\n\t\t\tthis.search();\r\n\t\t},\r\n\t\tincludePath() {\r\n\t\t\tthis.search();\r\n\t\t},\r\n\t\texcludePath() {\r\n\t\t\tthis.search();\r\n\t\t},\r\n\t\treplaceText() {\r\n\t\t\tlet lines = this.replaceText.split(/\\n/);\r\n\t\t\tthis.input2Height = lines.length * 20 + 10;\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tthis.wholeWordPattern = new RegExp(`^(${globalData.defaultWordPattern.source})$`);\r\n\t\tthis.initEvent();\r\n\t},\r\n\tmounted() {},\r\n\tmethods: {\r\n\t\tinitEvent() {\r\n\t\t\tEventBus.$on('find-in-folder', (option) => {\r\n\t\t\t\toption = option || {};\r\n\t\t\t\tif (option.path) {\r\n\t\t\t\t\tthis.includePath = option.path;\r\n\t\t\t\t}\r\n\t\t\t\tif (option.replace) {\r\n\t\t\t\t\tthis.replaceVisible = true;\r\n\t\t\t\t}\r\n\t\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\t\tthis.$refs.input1.focus();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tcreateSearch() {\r\n\t\t\tlet searcher = child_process.fork(path.join(globalData.dirname, 'main/process/search/index.js'));\r\n\t\t\tlet results = [];\r\n\t\t\tsearcher.on('message', (data) => {\r\n\t\t\t\tif (data === 'end') {\r\n\t\t\t\t\tthis.stopSeach();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdata.results.forEach((item) => {\r\n\t\t\t\t\t\titem.open = false;\r\n\t\t\t\t\t\titem.active = false;\r\n\t\t\t\t\t\tthis.count += 1;\r\n\t\t\t\t\t\tresults.push(item);\r\n\t\t\t\t\t\t// 搜索完一个文件\r\n\t\t\t\t\t\tif (item.path) {\r\n\t\t\t\t\t\t\tlet file = { id: item.id, name: item.name, path: item.path, children: results, open: true };\r\n\t\t\t\t\t\t\tthis.results.push(file);\r\n\t\t\t\t\t\t\tthis.addQueue.push(file);\r\n\t\t\t\t\t\t\tresults.forEach((_item) => {\r\n\t\t\t\t\t\t\t\t_item.id = item.id;\r\n\t\t\t\t\t\t\t\t_item.name = item.name;\r\n\t\t\t\t\t\t\t\t_item.path = item.path;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tresults = [];\r\n\t\t\t\t\t\t\tthis.addResults();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn searcher;\r\n\t\t},\r\n\t\taddResults() {\r\n\t\t\tif (!this.addTimer) {\r\n\t\t\t\tthis.addTimer = setTimeout(() => {\r\n\t\t\t\t\tthis.$refs.results.addResults(this.addQueue);\r\n\t\t\t\t\tthis.addQueue = [];\r\n\t\t\t\t\tthis.addTimer = null;\r\n\t\t\t\t}, 60);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsearch() {\r\n\t\t\tclearTimeout(this.searchTimer);\r\n\t\t\tthis.stopSeach();\r\n\t\t\tthis.results = [];\r\n\t\t\tthis.addQueue = [];\r\n\t\t\tthis.count = 0;\r\n\t\t\tif (!this.includePath || !this.text || (this.excludePath && this.includePath.startsWith(this.excludePath))) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.searchTimer = setTimeout(() => {\r\n\t\t\t\tthis.searching = true;\r\n\t\t\t\tthis.searchingText = this.text;\r\n\t\t\t\tthis.searcher = this.createSearch();\r\n\t\t\t\tthis.searcher.send({\r\n\t\t\t\t\tpath: this.parsePath(this.includePath),\r\n\t\t\t\t\texcludePath: this.parsePath(this.excludePath),\r\n\t\t\t\t\tmatchCase: this.matchCase,\r\n\t\t\t\t\twholeWord: this.wholeWord,\r\n\t\t\t\t\ttext: this.text,\r\n\t\t\t\t});\r\n\t\t\t\tthis.$refs.results.clear();\r\n\t\t\t}, 300);\r\n\t\t},\r\n\t\tstopSeach() {\r\n\t\t\tthis.searching = false;\r\n\t\t\tif (this.searcher) {\r\n\t\t\t\tlet searcher = this.searcher;\r\n\t\t\t\tthis.searcher = null;\r\n\t\t\t\tsearcher.kill();\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangeCase() {\r\n\t\t\tthis.matchCase = !this.matchCase;\r\n\t\t\tthis.search();\r\n\t\t},\r\n\t\tchangeWhole() {\r\n\t\t\tthis.wholeWord = !this.wholeWord;\r\n\t\t\tthis.search();\r\n\t\t},\r\n\t\treplaceAll() {\r\n\t\t\tif (!this.results.length || this.searching) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet reg = this.text.replace(/\\\\|\\.|\\*|\\+|\\-|\\?|\\(|\\)|\\[|\\]|\\{|\\}|\\^|\\$|\\~|\\!|\\&|\\|/g, '\\\\$&');\r\n\t\t\tif (!/\\n/.test(reg) && this.wholeWordPattern.test(reg) && this.wholeWord) {\r\n\t\t\t\treg = '(?:\\\\b|(?<=[^0-9a-zA-Z]))' + reg + '(?:\\\\b|(?=[^0-9a-zA-Z]))';\r\n\t\t\t}\r\n\t\t\treg = new RegExp(reg, this.matchCase ? 'igm' : 'gm');\r\n\t\t\tthis.replacing = true;\r\n\t\t\t_replace.call(this, this.results);\r\n\r\n\t\t\tfunction _replace(results) {\r\n\t\t\t\tif (!results.length) {\r\n\t\t\t\t\tthis.replacing = false;\r\n\t\t\t\t\tthis.search();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet filePath = results.shift().path;\r\n\t\t\t\tUtil.readFile(filePath).then((text) => {\r\n\t\t\t\t\ttext = text.replace(reg, this.replaceText);\r\n\t\t\t\t\tUtil.writeFile(filePath, text).then(() => {\r\n\t\t\t\t\t\t_replace.call(this, results);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tparsePath(dirPath) {\r\n\t\t\tconst fileTree = globalData.fileTree;\r\n\t\t\tdirPath = dirPath || '';\r\n\t\t\tif (!dirPath) {\r\n\t\t\t\treturn dirPath;\r\n\t\t\t}\r\n\t\t\tlet res = /^\\.[\\\\\\/]([^\\\\\\/]+)(?:[\\\\\\/]|$)/.exec(dirPath);\r\n\t\t\tif (res) {\r\n\t\t\t\tlet project = (res && res[1]) || '';\r\n\t\t\t\tfor (let i = 0; i < fileTree.length; i++) {\r\n\t\t\t\t\tif (project === fileTree[i].name) {\r\n\t\t\t\t\t\tdirPath = path.join(fileTree[i].path, dirPath.slice(res[1].length + 2));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tdirPath = path.normalize(dirPath);\r\n\t\t\t\tdirPath = path.parse(dirPath);\r\n\t\t\t\tdirPath = path.join(dirPath.dir, dirPath.base);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tdirPath = '';\r\n\t\t\t}\r\n\t\t\treturn dirPath;\r\n\t\t},\r\n\t\tonKeyDown1(e) {\r\n\t\t\tif (e.keyCode === 13 || e.keyCode === 100) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.search();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonKeyDown2(e) {\r\n\t\t\tif (e.keyCode === 13 || e.keyCode === 100) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.search();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonKeyDown3(e) {\r\n\t\t\tif (e.keyCode === 13 || e.keyCode === 100) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.search();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonKeyDown4(e) {\r\n\t\t\tif (e.keyCode === 13 || e.keyCode === 100) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.search();\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FileContentSearch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FileContentSearch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FileContentSearch.vue?vue&type=template&id=4995d829&\"\nimport script from \"./FileContentSearch.vue?vue&type=script&lang=js&\"\nexport * from \"./FileContentSearch.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.overlay)?_c('div',{staticClass:\"my-dialog-overlay\"}):_vm._e(),_c('div',{staticClass:\"my-dialog\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"dialog-title\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_c('span',{staticClass:\"dialog-close iconfont icon-close\",on:{\"click\":_vm.onClose}})]),_c('div',{staticClass:\"dialog-content\"},[(_vm.icon)?_c('span',{class:[_vm.icon],staticStyle:{\"margin-right\":\"5px\",\"width\":\"30px\",\"height\":\"30px\"}}):_vm._e(),_c('div',[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.content)}})])]),_c('div',{staticClass:\"dialog-btns\"},[_vm._l((_vm.btns),function(item){return _c('div',{staticClass:\"dialog-btn\",on:{\"click\":function($event){return _vm.onClickBtn(item)}}},[_vm._v(_vm._s(item.name))])}),_c('div',{staticClass:\"dialog-btn\",on:{\"click\":function($event){return _vm.onClose()}}},[_vm._v(_vm._s(_vm.cancelText||'取消'))])],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div>\r\n\t\t<div class=\"my-dialog-overlay\" v-if=\"overlay\"></div>\r\n\t\t<div :style=\"styles\" @mousedown.stop class=\"my-dialog\">\r\n\t\t\t<div class=\"dialog-title\">\r\n\t\t\t\t<div v-html=\"title\"></div>\r\n\t\t\t\t<span @click=\"onClose\" class=\"dialog-close iconfont icon-close\"></span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"dialog-content\">\r\n\t\t\t\t<span :class=\"[icon]\" style=\"margin-right:5px;width:30px;height:30px;\" v-if=\"icon\"></span>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div v-html=\"content\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"dialog-btns\">\r\n\t\t\t\t<div @click=\"onClickBtn(item)\" class=\"dialog-btn\" v-for=\"item in btns\">{{item.name}}</div>\r\n\t\t\t\t<div @click=\"onClose()\" class=\"dialog-btn\">{{cancelText||'取消'}}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'Dialog',\r\n    props: {\r\n        title: String,\r\n        content: String,\r\n        btns: Array,\r\n        overlay: Boolean,\r\n        styles: Object,\r\n        icon: String,\r\n        iconColor: String,\r\n        cancelText: String\r\n    },\r\n    data() {\r\n        return {\r\n        }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n        onClickBtn(item) {\r\n            item.callback();\r\n        },\r\n        onClose() {\r\n            this.$emit('close');\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dialog.vue?vue&type=template&id=5fcd5165&\"\nimport script from \"./Dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./Dialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.visible)?_c('div',{staticClass:\"my-cmd-panel my-list\",on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',[_c('div',{staticClass:\"my-cmd-search\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchText),expression:\"searchText\"}],ref:\"input\",attrs:{\"spellcheck\":\"false\",\"type\":\"text\"},domProps:{\"value\":(_vm.searchText)},on:{\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.onEnter.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"]))return null;return _vm.onCancel.apply(null, arguments)}],\"input\":function($event){if($event.target.composing)return;_vm.searchText=$event.target.value}}})]),_c('div',[_c('Menu',{ref:\"menu\",staticStyle:{\"position\":\"relative\"},attrs:{\"checkable\":_vm.checkable,\"hover-check\":_vm.hoverCheck,\"menuList\":_vm.cmdList,\"top\":_vm.scrollTop},on:{\"change\":_vm.onChange,\"scroll\":_vm.onScroll}})],1)])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * @Author: lisong\r\n * @Date: 2022-03-22 23:00:49\r\n * @Description:\r\n */\r\nimport Util from '../../common/util';\r\nimport globalData from '@/data/globalData';\r\nimport chroma from 'chroma-js';\r\nimport EventBus from '@/event';\r\n\r\nconst path = window.require('path');\r\nconst settingMap = {\r\n\tforeground: 'color',\r\n\tbackground: 'background-color',\r\n\tfontStyle: 'font-style'\r\n};\r\n\r\nexport default class {\r\n\tconstructor() {}\r\n\tloadTheme(option) {\r\n\t\tlet result = { tokenColors: [], colors: {} };\r\n\t\treturn _loadTheme.call(this, option.path).then(() => {\r\n\t\t\tlet css = '';\r\n\t\t\tthis.setDefaultColor(result, option.type);\r\n\t\t\tcss = this.parseCss(result);\r\n\t\t\tthis.insertCss(css);\r\n\t\t\tglobalData.nowTheme = {\r\n\t\t\t\tvalue: option.value,\r\n\t\t\t\ttype: option.type,\r\n\t\t\t\tpath: option.path\r\n\t\t\t};\r\n\t\t\tEventBus.$emit('theme-changed', option.value);\r\n\t\t});\r\n\r\n\t\tfunction _loadTheme(fullPath) {\r\n\t\t\treturn Util.loadJsonFile(fullPath).then(data => {\r\n\t\t\t\tif (data.include) {\r\n\t\t\t\t\treturn _loadTheme.call(this, path.join(fullPath, '../' + data.include)).then(() => {\r\n\t\t\t\t\t\t_addColors(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_addColors(data);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction _addColors(data) {\r\n\t\t\tdata.tokenColors && result.tokenColors.push(...data.tokenColors);\r\n\t\t\tdata.colors && Object.assign(result.colors, data.colors);\r\n\t\t}\r\n\t}\r\n\tloadIconTheme(option) {\r\n\t\tif (!option.path) {\r\n\t\t\tglobalData.nowIconTheme = {\r\n\t\t\t\tvalue: option.value\r\n\t\t\t};\r\n\t\t\tglobalData.nowIconData = null;\r\n\t\t\tEventBus.$emit('icon-changed');\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t\tlet languages = globalData.languageList;\r\n\t\tlet languageMap = {};\r\n\t\tlanguages.forEach(item => {\r\n\t\t\tif (item.extensions) {\r\n\t\t\t\tlanguageMap[item.value] = item.extensions.map(e => {\r\n\t\t\t\t\treturn e.slice(1);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn _loadTheme.call(this, option.path);\r\n\r\n\t\tfunction _loadTheme(fullPath) {\r\n\t\t\treturn Util.loadJsonFile(fullPath).then(data => {\r\n\t\t\t\tlet fonts = data.fonts || [];\r\n\t\t\t\tlet css = '';\r\n\t\t\t\tfonts.forEach(font => {\r\n\t\t\t\t\tlet fontFace = '@font-face{\\nsrc:';\r\n\t\t\t\t\tfont.src.forEach((src, index) => {\r\n\t\t\t\t\t\tlet url = path.join(fullPath, '../' + src.path);\r\n\t\t\t\t\t\turl = url.replace(/\\\\/g, '/');\r\n\t\t\t\t\t\tfontFace += `url('my-file://${url}')`;\r\n\t\t\t\t\t\tfontFace += ` format('${src.format}')`;\r\n\t\t\t\t\t\tfontFace += index < font - src.length - 1 ? ', ' : '';\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfontFace += ';\\n';\r\n\t\t\t\t\tfontFace += `font-family:${font.id};\\n`;\r\n\t\t\t\t\tfontFace += `font-style:${font.style};\\n`;\r\n\t\t\t\t\tfontFace += `font-weight:${font.weight};\\n`;\r\n\t\t\t\t\tfontFace += '}\\n';\r\n\t\t\t\t\tcss += fontFace;\r\n\t\t\t\t\tcss += '.my-file-icon::before{\\n';\r\n\t\t\t\t\tcss += `font-family:${font.id};\\n`;\r\n\t\t\t\t\tcss += `font-size:${font.size};\\n`;\r\n\t\t\t\t\tcss += '}\\n';\r\n\t\t\t\t});\r\n\t\t\t\tfor (let icon in data.iconDefinitions) {\r\n\t\t\t\t\tcss += `.my-file-icon-${icon}::before{\\n`;\r\n\t\t\t\t\ticon = data.iconDefinitions[icon];\r\n\t\t\t\t\tif (icon.fontCharacter) {\r\n\t\t\t\t\t\tcss += 'top:2px;';\r\n\t\t\t\t\t\tcss += `content:\"${icon.fontCharacter}\";\\n`;\r\n\t\t\t\t\t\tcss += `color:${icon.fontColor};\\n`;\r\n\t\t\t\t\t} else if (icon.iconPath) {\r\n\t\t\t\t\t\tlet imgUrl = path.join(fullPath, '../' + icon.iconPath);\r\n\t\t\t\t\t\timgUrl = imgUrl.replace(/\\\\/g, '/');\r\n\t\t\t\t\t\tcss += 'content:\"\";';\r\n\t\t\t\t\t\tcss += `background-image:url(my-file://${imgUrl})`;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcss += '}\\n';\r\n\t\t\t\t}\r\n\t\t\t\tthis.insertFont(css);\r\n\t\t\t\tdata.fileNames = data.fileNames || {};\r\n\t\t\t\tdata.fileExtensions = data.fileExtensions || {};\r\n\t\t\t\t_setFileExtensions(data);\r\n\t\t\t\tglobalData.nowIconTheme = {\r\n\t\t\t\t\tvalue: option.value,\r\n\t\t\t\t\tpath: option.path\r\n\t\t\t\t};\r\n\t\t\t\tglobalData.nowIconData = data;\r\n\t\t\t\tEventBus.$emit('icon-changed', option.value);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction _setFileExtensions(data) {\r\n\t\t\tdata.languageIds && _parseLanguageIds(data.languageIds, data.fileExtensions);\r\n\t\t\tif (data.light) {\r\n\t\t\t\tdata.light.fileExtensions = data.light.fileExtensions || {};\r\n\t\t\t\tdata.light.fileNames = data.light.fileNames || {};\r\n\t\t\t\tdata.light.folderNames = data.light.folderNames || {};\r\n\t\t\t\tdata.light.folderNamesExpanded = data.light.folderNamesExpanded || {};\r\n\t\t\t\tdata.light.languageIds && _parseLanguageIds(data.light.languageIds, data.light.fileExtensions);\r\n\t\t\t\tfor (let key in data.fileExtensions) {\r\n\t\t\t\t\tdata.light.fileExtensions[key] = data.light.fileExtensions[key] || data.fileExtensions[key];\r\n\t\t\t\t}\r\n\t\t\t\tfor (let key in data.fileNames) {\r\n\t\t\t\t\tdata.light.fileNames[key] = data.light.fileNames[key] || data.fileNames[key];\r\n\t\t\t\t}\r\n\t\t\t\tfor (let key in data.folderNames) {\r\n\t\t\t\t\tdata.light.folderNames[key] = data.light.folderNames[key] || data.folderNames[key];\r\n\t\t\t\t}\r\n\t\t\t\tfor (let key in data.folderNamesExpanded) {\r\n\t\t\t\t\tdata.light.folderNamesExpanded[key] = data.light.folderNamesExpanded[key] || data.folderNamesExpanded[key];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdata.light = {\r\n\t\t\t\t\tfileExtensions: data.fileExtensions,\r\n\t\t\t\t\tfileNames: data.fileNames,\r\n\t\t\t\t\tfolderNames: data.folderNames,\r\n\t\t\t\t\tfolderNamesExpanded: data.folderNamesExpanded\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction _parseLanguageIds(languageIds, fileExtensions) {\r\n\t\t\tfor (let key in languageIds) {\r\n\t\t\t\tlet extensions = languageMap[key];\r\n\t\t\t\tlet value = languageIds[key];\r\n\t\t\t\tif (extensions) {\r\n\t\t\t\t\textensions.forEach(item => {\r\n\t\t\t\t\t\tfileExtensions[item] = value;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tparseCss(data) {\r\n\t\tlet css = '';\r\n\t\tlet scopeId = 1;\r\n\t\tlet scopeTokenList = [];\r\n\t\tlet dotReg = /\\./g;\r\n\t\tlet sReg = /\\s+/g;\r\n\t\tif (data.colors) {\r\n\t\t\tcss += ':root{\\n';\r\n\t\t\tfor (let key in data.colors) {\r\n\t\t\t\tcss += `--my-${key.replace(/\\./g, '-')}: ${data.colors[key]};\\n`;\r\n\t\t\t}\r\n\t\t\tcss += '}\\n';\r\n\t\t}\r\n\t\tif (data.tokenColors) {\r\n\t\t\tdata.tokenColors.forEach(token => {\r\n\t\t\t\tif (!token.scope) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet selector = [];\r\n\t\t\t\tlet style = '';\r\n\t\t\t\tlet settingsStr = '';\r\n\t\t\t\tlet scope = token.scope instanceof Array ? token.scope.join(',') : token.scope;\r\n\t\t\t\tscope = scope.replace(/\\s+/g, ' ');\r\n\t\t\t\tscope = scope.split(/\\s*\\,\\s*/);\r\n\t\t\t\tfor (let prop in token.settings) {\r\n\t\t\t\t\tstyle += `${settingMap[prop]}:${token.settings[prop]};\\n`;\r\n\t\t\t\t\tif (token.settings[prop]) {\r\n\t\t\t\t\t\tsettingsStr += `${prop}:${token.settings[prop]};`;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tscope.forEach((scope, index) => {\r\n\t\t\t\t\tselector.push(`.my-scope-${scopeId}`);\r\n\t\t\t\t\tscopeTokenList.push({\r\n\t\t\t\t\t\tscopeId: scopeId,\r\n\t\t\t\t\t\tscope: scope,\r\n\t\t\t\t\t\tscopes: scope.split(' '),\r\n\t\t\t\t\t\tlevel: _getLevel(scope),\r\n\t\t\t\t\t\tsettings: token.settings,\r\n\t\t\t\t\t\tsettingsStr: settingsStr\r\n\t\t\t\t\t});\r\n\t\t\t\t\tscopeId++;\r\n\t\t\t\t});\r\n\t\t\t\tcss += `${selector.join(',')}{\\n${style}\\n}`;\r\n\t\t\t});\r\n\t\t}\r\n\t\tscopeTokenList.sort((a, b) => {\r\n\t\t\treturn b.level - a.level;\r\n\t\t});\r\n\t\tglobalData.scopeIdMap = {};\r\n\t\tscopeTokenList.forEach(item => {\r\n\t\t\tglobalData.scopeIdMap[item.scopeId] = item;\r\n\t\t\tif (item.scopes.length > 1) {\r\n\t\t\t\titem.regexp = item.scopes.join('(?:\\\\.[^\\\\.\\\\s]+)*?(?:\\\\s[^\\\\s]+)*? ');\r\n\t\t\t} else {\r\n\t\t\t\titem.regexp = item.scope;\r\n\t\t\t}\r\n\t\t\titem.regexp = new RegExp(item.regexp);\r\n\t\t});\r\n\t\tglobalData.scopeTokenList = scopeTokenList;\r\n\t\tglobalData.colors = data.colors;\r\n\t\treturn css;\r\n\r\n\t\tfunction _getLevel(scope) {\r\n\t\t\tlet dot = scope.match(dotReg);\r\n\t\t\tlet s = scope.match(sReg);\r\n\t\t\tdot = (dot && dot.length) || 0;\r\n\t\t\ts = (s && s.length * 1000) || 0;\r\n\t\t\treturn dot + s;\r\n\t\t}\r\n\t}\r\n\tinsertCss(css) {\r\n\t\tif (globalData.themeStyle) {\r\n\t\t\tglobalData.themeStyle.innerText = '';\r\n\t\t} else {\r\n\t\t\tglobalData.themeStyle = document.createElement('style');\r\n\t\t\tglobalData.themeStyle.type = 'text/css';\r\n\t\t}\r\n\t\tglobalData.themeStyle.appendChild(document.createTextNode(css));\r\n\t\tdocument.getElementsByTagName('head')[0].appendChild(globalData.themeStyle);\r\n\t}\r\n\tinsertFont(css) {\r\n\t\tif (globalData.iconStyle) {\r\n\t\t\tglobalData.iconStyle.innerText = '';\r\n\t\t} else {\r\n\t\t\tglobalData.iconStyle = document.createElement('style');\r\n\t\t\tglobalData.iconStyle.type = 'text/css';\r\n\t\t}\r\n\t\tglobalData.iconStyle.appendChild(document.createTextNode(css));\r\n\t\tdocument.getElementsByTagName('head')[0].appendChild(globalData.iconStyle);\r\n\t}\r\n\tsetDefaultColor(result, type) {\r\n\t\tlet transparent = 'transparent';\r\n\t\tlet foreground = '';\r\n\t\tlet background = '';\r\n\t\tlet focusBorder = '';\r\n\t\tlet contrastBorder = '';\r\n\t\tlet contrastActiveBorder = '';\r\n\t\tlet isLight = type === 'light' || type === 'contrast light';\r\n\t\tlet isHc = type === 'contrast light' || type === 'contrast dark';\r\n\r\n\t\t_base();\r\n\t\t_scrollbar();\r\n\t\t_titleBar();\r\n\t\t_dropdown();\r\n\t\t_list();\r\n\t\t_menu();\r\n\t\t_statusBar();\r\n\t\t_sideBar();\r\n\t\t_editor();\r\n\t\t_terminal();\r\n\t\t_tab();\r\n\t\t_editorWidget();\r\n\t\t_input();\r\n\t\t_toolbar();\r\n\t\t_badge();\r\n\t\t_git();\r\n\t\t_minimap();\r\n\r\n\t\t// base\r\n\t\tfunction _base() {\r\n\t\t\tif (!result.colors['foreground']) {\r\n\t\t\t\tif (result.colors['editor.foreground']) {\r\n\t\t\t\t\tresult.colors['foreground'] = chroma(result.colors['editor.foreground']).alpha(0.8).css();\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['foreground'] = '#575757';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['foreground'] = 'rgb(221, 221, 221)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['errorForeground']) {\r\n\t\t\t\tresult.colors['errorForeground'] = '#ff0000';\r\n\t\t\t}\r\n\t\t\tif (!result.colors['background']) {\r\n\t\t\t\tif (result.colors['editor.background']) {\r\n\t\t\t\t\tresult.colors['background'] = chroma(result.colors['editor.background']).alpha(0.8).css();\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['background'] = '#fff';\r\n\t\t\t\t} else if (isHc) {\r\n\t\t\t\t\tresult.colors['background'] = '#000';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['background'] = 'rgba(60,60,60)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['focusBorder']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tif (isLight) {\r\n\t\t\t\t\t\tresult.colors['focusBorder'] = '#0f4a85';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.colors['focusBorder'] = '#f38518';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['focusBorder'] = '#0066b8';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['contrastBorder']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tif (isLight) {\r\n\t\t\t\t\t\tresult.colors['contrastBorder'] = '#0f4a85';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.colors['contrastBorder'] = '#6fc3df';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['contrastBorder'] = transparent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['contrastActiveBorder']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['contrastActiveBorder'] = result.colors['focusBorder'];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['contrastActiveBorder'] = transparent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['widget.shadow']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['widget.shadow'] = transparent;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['widget.shadow'] = 'rgba(0,0,0,0.16)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['widget.shadow'] = 'rgba(0,0,0,0.36)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['sash.hoverBorder']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['sash.hoverBorder'] = result.colors['contrastActiveBorder'];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['sash.hoverBorder'] = result.colors['focusBorder'];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['selection.background']) {\r\n\t\t\t\tresult.colors['selection.background'] = result.colors['focusBorder'];\r\n\t\t\t}\r\n\t\t\tbackground = result.colors['background'];\r\n\t\t\tforeground = result.colors['foreground'];\r\n\t\t\tfocusBorder = result.colors['focusBorder'];\r\n\t\t\tcontrastBorder = result.colors['contrastBorder'];\r\n\t\t\tcontrastActiveBorder = result.colors['contrastActiveBorder'];\r\n\t\t}\r\n\t\tfunction _scrollbar() {\r\n\t\t\tif (!result.colors['scrollbar.shadow']) {\r\n\t\t\t\tresult.colors['scrollbar.shadow'] = transparent;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['scrollbarSlider.background']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['scrollbarSlider.background'] = chroma(contrastBorder).alpha(0.6).css();\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['scrollbarSlider.background'] = 'rgba(100, 100, 100, 0.4)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['scrollbarSlider.background'] = 'rgba(121, 121, 121, 0.4);';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['scrollbarSlider.hoverBackground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['scrollbarSlider.hoverBackground'] = chroma(contrastBorder).alpha(0.8).css();\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['scrollbarSlider.hoverBackground'] = 'rgba(100, 100, 100, 0.7)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['scrollbarSlider.hoverBackground'] = 'rgba(100, 100, 100, 0.7);';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['scrollbarSlider.activeBackground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['scrollbarSlider.activeBackground'] = contrastBorder;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['scrollbarSlider.activeBackground'] = 'rgba(0, 0, 0, 0.6)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['scrollbarSlider.activeBackground'] = 'rgba(191, 191, 191, 0.4);';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//titleBar\r\n\t\tfunction _titleBar() {\r\n\t\t\tif (!result.colors['titleBar.border']) {\r\n\t\t\t\tresult.colors['titleBar.border'] = contrastBorder;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['titleBar.activeForeground']) {\r\n\t\t\t\tresult.colors['titleBar.activeForeground'] = foreground;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['titleBar.activeBackground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['titleBar.activeBackground'] = transparent;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['titleBar.activeBackground'] = 'rgb(221, 221, 221)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['menubar.selectionForeground']) {\r\n\t\t\t\tresult.colors['menubar.selectionForeground'] = foreground;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['menubar.selectionBackground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['menubar.selectionBackground'] = transparent;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['menubar.selectionBackground'] = 'rgba(0,0,0,0.1)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['menubar.selectionBackground'] = 'rgba(255,255,255,0.1)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['menubar.selectionBorder']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['menubar.selectionBorder'] = contrastActiveBorder;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['menubar.selectionBorder'] = transparent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// dropdown\r\n\t\tfunction _dropdown() {\r\n\t\t\tif (!result.colors['dropdown.background']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['dropdown.background'] = background;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['dropdown.background'] = '#eee';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['dropdown.background'] = 'rgba(37,37,38)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['dropdown.foreground']) {\r\n\t\t\t\tresult.colors['dropdown.foreground'] = foreground;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['dropdown.border']) {\r\n\t\t\t\tresult.colors['dropdown.border'] = contrastBorder;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// list\r\n\t\tfunction _list() {\r\n\t\t\tif (!result.colors['list.highlightForeground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['list.highlightForeground'] = contrastBorder;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['list.highlightForeground'] = foreground;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['list.activeSelectionBackground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['list.activeSelectionBackground'] = transparent;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['list.activeSelectionBackground'] = '#0066b8';\r\n\t\t\t\t\tresult.colors['list.activeSelectionForeground'] = '#fff';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['list.activeSelectionForeground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['list.activeSelectionForeground'] = foreground;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['list.activeSelectionForeground'] = 'rgba(51, 51, 51)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['list.activeSelectionForeground'] = 'rgba(255, 255, 255)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['list.hoverForeground']) {\r\n\t\t\t\tresult.colors['list.hoverForeground'] = foreground;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['list.hoverBackground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['list.hoverBackground'] = transparent;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['list.hoverBackground'] = 'rgba(0,0,0,0.1)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['list.hoverBackground'] = 'rgba(255,255,255,0.1)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['quickInputList.focusBackground']) {\r\n\t\t\t\tif (result.colors['list.inactiveFocusBackground']) {\r\n\t\t\t\t\tresult.colors['quickInputList.focusBackground'] = result.colors['list.inactiveFocusBackground'];\r\n\t\t\t\t} else if (isHc) {\r\n\t\t\t\t\tresult.colors['quickInputList.focusBackground'] = transparent;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['quickInputList.focusBackground'] = '#0066b8';\r\n\t\t\t\t\tresult.colors['quickInputList.focusForeground'] = '#fff';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['quickInputList.focusForeground']) {\r\n\t\t\t\tif (result.colors['list.inactiveFocusForeground']) {\r\n\t\t\t\t\tresult.colors['quickInputList.focusForeground'] = result.colors['list.inactiveFocusForeground'];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['quickInputList.focusForeground'] = result.colors['list.activeSelectionForeground'];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//menu\r\n\t\tfunction _menu() {\r\n\t\t\tif (!result.colors['menu.foreground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['menu.foreground'] = foreground;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['menu.foreground'] = 'rgba(51, 51, 51)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['menu.foreground'] = 'rgba(255, 255, 255)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['menu.background']) {\r\n\t\t\t\tresult.colors['menu.background'] = result.colors['dropdown.background'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['menu.border']) {\r\n\t\t\t\tresult.colors['menu.border'] = contrastBorder;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['menu.selectionForeground']) {\r\n\t\t\t\tresult.colors['menu.selectionForeground'] = result.colors['list.activeSelectionForeground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['menu.selectionBackground']) {\r\n\t\t\t\tresult.colors['menu.selectionBackground'] = result.colors['list.activeSelectionBackground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['menu.selectionBorder']) {\r\n\t\t\t\tresult.colors['menu.selectionBorder'] = contrastActiveBorder;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['menu.separatorBackground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['menu.separatorBackground'] = contrastBorder;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['menu.separatorBackground'] = 'rgba(0,0,0,0.2)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['menu.separatorBackground'] = 'rgba(255,255,255,0.2)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//statusBar\r\n\t\tfunction _statusBar() {\r\n\t\t\tif (!result.colors['statusBar.foreground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['statusBar.foreground'] = foreground;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['statusBar.foreground'] = '#fff';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['statusBar.background']) {\r\n\t\t\t\tif (isLight && !isHc) {\r\n\t\t\t\t\tresult.colors['statusBar.background'] = 'rgb(0, 122, 204)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['statusBar.background'] = transparent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['statusBar.border']) {\r\n\t\t\t\tresult.colors['statusBar.border'] = contrastBorder;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['statusBarItem.hoverBackground']) {\r\n\t\t\t\tresult.colors['statusBarItem.hoverBackground'] = transparent;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['statusBarItem.activeBackground']) {\r\n\t\t\t\tresult.colors['statusBarItem.activeBackground'] = transparent;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//sideBar\r\n\t\tfunction _sideBar() {\r\n\t\t\tif (!result.colors['sideBar.foreground']) {\r\n\t\t\t\tresult.colors['sideBar.foreground'] = foreground;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['sideBarTitle.foreground']) {\r\n\t\t\t\tresult.colors['sideBarTitle.foreground'] = foreground;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['sideBar.background']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['sideBar.background'] = transparent;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['sideBar.background'] = '#eee';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['sideBar.background'] = 'rgba(37,37,38)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['sideBar.border']) {\r\n\t\t\t\tresult.colors['sideBar.border'] = contrastBorder;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// editor\r\n\t\tfunction _editor() {\r\n\t\t\tif (!result.colors['editor.foreground']) {\r\n\t\t\t\tresult.colors['editor.foreground'] = foreground;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editor.background']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['editor.background'] = background;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['editor.background'] = '#fff';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['editor.background'] = 'rgb(30,30,30)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorLineNumber.foreground']) {\r\n\t\t\t\tresult.colors['editorLineNumber.foreground'] = chroma(result.colors['editor.foreground']).alpha(0.5).css();\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorLineNumber.activeForeground']) {\r\n\t\t\t\tresult.colors['editorLineNumber.activeForeground'] = result.colors['editor.foreground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorCursor.foreground']) {\r\n\t\t\t\tresult.colors['editorCursor.foreground'] = result.colors['editor.foreground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editor.selectionForeground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['editor.selectionForeground'] = foreground;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editor.selectionBackground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['editor.selectionBackground'] = focusBorder;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['editor.selectionBackground'] = chroma(focusBorder).alpha(0.8).css();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editor.selectionHighlightBackground']) {\r\n\t\t\t\tresult.colors['editor.selectionHighlightBackground'] = transparent;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editor.selectionHighlightBorder']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['editor.selectionHighlightBorder'] = contrastActiveBorder;\r\n\t\t\t\t} else if (result.colors['editor.selectionHighlightBackground'] === transparent) {\r\n\t\t\t\t\tresult.colors['editor.selectionHighlightBorder'] = focusBorder;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editor.findMatchBackground']) {\r\n\t\t\t\tresult.colors['editor.findMatchBackground'] = result.colors['editor.selectionBackground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editor.findMatchBorder']) {\r\n\t\t\t\tresult.colors['editor.findMatchBorder'] = transparent;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editor.findMatchHighlightBackground']) {\r\n\t\t\t\tresult.colors['editor.findMatchHighlightBackground'] = result.colors['editor.selectionHighlightBackground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editor.findMatchHighlightBorder']) {\r\n\t\t\t\tresult.colors['editor.findMatchHighlightBorder'] = result.colors['editor.selectionHighlightBorder'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editor.lineHighlightBackground']) {\r\n\t\t\t\tresult.colors['editor.lineHighlightBackground'] = transparent;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editor.lineHighlightBorder']) {\r\n\t\t\t\tif (result.colors['editor.lineHighlightBackground'] !== transparent) {\r\n\t\t\t\t\tresult.colors['editor.lineHighlightBorder'] = transparent;\r\n\t\t\t\t} else if (isHc) {\r\n\t\t\t\t\tresult.colors['editor.lineHighlightBorder'] = contrastActiveBorder;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['editor.lineHighlightBorder'] = 'rgba(0,0,0,0.2)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['editor.lineHighlightBorder'] = 'rgba(255,255,255,0.1)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorWhitespace.foreground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['editorWhitespace.foreground'] = result.colors['editor.foreground'];\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['editorWhitespace.foreground'] = 'rgba(0,0,0,0.2)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['editorWhitespace.foreground'] = 'rgba(255,255,255,0.1)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorIndentGuide.background']) {\r\n\t\t\t\tresult.colors['editorIndentGuide.background'] = result.colors['editorWhitespace.foreground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorBracketMatch.background']) {\r\n\t\t\t\tresult.colors['editorBracketMatch.background'] = transparent;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorBracketMatch.border']) {\r\n\t\t\t\tif (result.colors['editorBracketMatch.background'] === transparent) {\r\n\t\t\t\t\tresult.colors['editorBracketMatch.border'] = chroma(result.colors['editor.foreground']).alpha(0.6).css();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['editorBracketMatch.border'] = transparent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// terminal\r\n\t\tfunction _terminal() {\r\n\t\t\tif (!result.colors['terminal.background']) {\r\n\t\t\t\tresult.colors['terminal.background'] = result.colors['editor.background'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['terminal.foreground']) {\r\n\t\t\t\tresult.colors['terminal.foreground'] = result.colors['editor.foreground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['terminal.selectionBackground']) {\r\n\t\t\t\tresult.colors['terminal.selectionBackground'] = result.colors['selection.background'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['terminal.border']) {\r\n\t\t\t\tif (contrastBorder === transparent) {\r\n\t\t\t\t\tif (isLight) {\r\n\t\t\t\t\t\tresult.colors['terminal.border'] = chroma(result.colors['editor.background']).darken().css();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.colors['terminal.border'] = chroma(result.colors['editor.background']).brighten().css();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['terminal.border'] = contrastBorder;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// tab\r\n\t\tfunction _tab() {\r\n\t\t\tif (!result.colors['editorGroupHeader.tabsBackground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['editorGroupHeader.tabsBackground'] = transparent;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['editorGroupHeader.tabsBackground'] = result.colors['sideBar.background'];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorGroupHeader.tabsBackground']) {\r\n\t\t\t\tresult.colors['editorGroupHeader.tabsBackground'] = contrastBorder;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['tab.border']) {\r\n\t\t\t\tresult.colors['tab.border'] = contrastBorder;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['tab.activeForeground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['tab.activeForeground'] = foreground;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['tab.activeForeground'] = 'rgba(51, 51, 51)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['tab.activeForeground'] = '#fff';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['tab.activeBackground']) {\r\n\t\t\t\tresult.colors['tab.activeBackground'] = result.colors['editor.background'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['tab.inactiveForeground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['tab.inactiveForeground'] = foreground;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['tab.inactiveForeground'] = 'rgba(51, 51, 51, 0.7)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['tab.inactiveForeground'] = 'rgba(255, 255, 255, 0.5)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['tab.inactiveBackground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['tab.inactiveBackground'] = transparent;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['tab.inactiveBackground'] = 'rgb(236, 236, 236)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['tab.inactiveBackground'] = 'rgb(45, 45, 45)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['tab.activeBorder']) {\r\n\t\t\t\tresult.colors['tab.activeBorder'] = transparent;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['tab.activeBorderTop']) {\r\n\t\t\t\tresult.colors['tab.activeBorderTop'] = transparent;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['tab.hoverForeground']) {\r\n\t\t\t\tresult.colors['tab.hoverForeground'] = result.colors['tab.inactiveForeground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['tab.hoverBackground']) {\r\n\t\t\t\tresult.colors['tab.hoverBackground'] = transparent;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['tab.hoverBorder']) {\r\n\t\t\t\tresult.colors['tab.hoverBorder'] = transparent;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// editorWidget\r\n\t\tfunction _editorWidget() {\r\n\t\t\tif (!result.colors['editorWidget.foreground']) {\r\n\t\t\t\tresult.colors['editorWidget.foreground'] = result.colors['editor.foreground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorWidget.background']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['editorWidget.background'] = background;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['editorWidget.background'] = '#eee';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['editorWidget.background'] = 'rgb(37,37,38)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorWidget.border']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['editorWidget.border'] = contrastBorder;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['editorWidget.border'] = transparent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorSuggestWidget.foreground']) {\r\n\t\t\t\tresult.colors['editorSuggestWidget.foreground'] = result.colors['editorWidget.foreground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorSuggestWidget.background']) {\r\n\t\t\t\tresult.colors['editorSuggestWidget.background'] = result.colors['editorWidget.background'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorSuggestWidget.border']) {\r\n\t\t\t\tresult.colors['editorSuggestWidget.border'] = result.colors['editorWidget.border'];\r\n\t\t\t}\r\n\t\t\tif (result.colors['editorSuggestWidget.border'] === transparent) {\r\n\t\t\t\tresult.colors['editorSuggestWidget.shadow'] = result.colors['widget.shadow'];\r\n\t\t\t} else {\r\n\t\t\t\tresult.colors['editorSuggestWidget.shadow'] = transparent;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorSuggestWidget.selectedForeground']) {\r\n\t\t\t\tresult.colors['editorSuggestWidget.selectedForeground'] = result.colors['editor.foreground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorSuggestWidget.selectedBackground']) {\r\n\t\t\t\tresult.colors['editorSuggestWidget.selectedBackground'] = result.colors['quickInputList.focusBackground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorSuggestWidget.highlightForeground']) {\r\n\t\t\t\tresult.colors['editorSuggestWidget.highlightForeground'] = result.colors['list.highlightForeground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['editorSuggestWidget.focusHighlightForeground']) {\r\n\t\t\t\tresult.colors['editorSuggestWidget.focusHighlightForeground'] = result.colors['list.highlightForeground'];\r\n\t\t\t}\r\n\t\t}\r\n\t\t// input\r\n\t\tfunction _input() {\r\n\t\t\tif (!result.colors['input.foreground']) {\r\n\t\t\t\tresult.colors['input.foreground'] = foreground;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['input.background']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['input.background'] = transparent;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['input.background'] = '#fff';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['input.background'] = background;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['input.border']) {\r\n\t\t\t\tif (result.colors['input.background'] === transparent) {\r\n\t\t\t\t\tresult.colors['input.border'] = '#0066b8';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['input.border'] = transparent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['inputOption.activeForeground']) {\r\n\t\t\t\tresult.colors['inputOption.activeForeground'] = foreground;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['inputOption.activeBackground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['inputOption.activeBackground'] = transparent;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['inputOption.activeBackground'] = chroma(focusBorder).alpha(0.3).css();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['inputOption.activeBorder']) {\r\n\t\t\t\tresult.colors['inputOption.activeBorder'] = transparent;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['inputOption.hoverBackground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['inputOption.hoverBackground'] = transparent;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['inputOption.hoverBackground'] = 'rgba(0,0,0,0.1)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['inputOption.hoverBackground'] = 'rgba(255,255,255,0.1)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// toolbar\r\n\t\tfunction _toolbar() {\r\n\t\t\tif (!result.colors['toolbar.hoverBackground']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['toolbar.hoverBackground'] = transparent;\r\n\t\t\t\t} else if (isLight) {\r\n\t\t\t\t\tresult.colors['toolbar.hoverBackground'] = 'rgba(0,0,0,0.1)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['toolbar.hoverBackground'] = 'rgba(255,255,255,0.1)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['toolbar.activeBackground']) {\r\n\t\t\t\tresult.colors['toolbar.activeBackground'] = transparent;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['toolbar.hoverOutline']) {\r\n\t\t\t\tresult.colors['toolbar.hoverOutline'] = contrastActiveBorder;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//badge\r\n\t\tfunction _badge() {\r\n\t\t\tif (!result.colors['badge.foreground']) {\r\n\t\t\t\tresult.colors['badge.foreground'] = foreground;\r\n\t\t\t}\r\n\t\t\tif (!result.colors['badge.backround']) {\r\n\t\t\t\tif (isHc) {\r\n\t\t\t\t\tresult.colors['badge.backround'] = result.colors['contrastActiveBorder'];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['badge.backround'] = result.colors['focusBorder'];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//git\r\n\t\tfunction _git() {\r\n\t\t\tif (!result.colors['gitDecoration.untrackedResourceForeground']) {\r\n\t\t\t\tif (isLight) {\r\n\t\t\t\t\tresult.colors['gitDecoration.untrackedResourceForeground'] = '#28a745';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['gitDecoration.untrackedResourceForeground'] = '#73c991';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['gitDecoration.addedResourceForeground']) {\r\n\t\t\t\tif (isLight) {\r\n\t\t\t\t\tresult.colors['gitDecoration.addedResourceForeground'] = '#28a745';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['gitDecoration.addedResourceForeground'] = '#81b88b';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['gitDecoration.conflictingResourceForeground']) {\r\n\t\t\t\tif (isLight) {\r\n\t\t\t\t\tresult.colors['gitDecoration.conflictingResourceForeground'] = '#e36209';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['gitDecoration.conflictingResourceForeground'] = '#e4676b';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['gitDecoration.modifiedResourceForeground']) {\r\n\t\t\t\tif (isLight) {\r\n\t\t\t\t\tresult.colors['gitDecoration.modifiedResourceForeground'] = '#005cc5';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['gitDecoration.modifiedResourceForeground'] = '#e2c08d';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['gitDecoration.renamedResourceForeground']) {\r\n\t\t\t\tresult.colors['gitDecoration.renamedResourceForeground'] = result.colors['gitDecoration.untrackedResourceForeground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['gitDecoration.deletedResourceForeground']) {\r\n\t\t\t\tif (isLight) {\r\n\t\t\t\t\tresult.colors['gitDecoration.deletedResourceForeground'] = '#d73a49';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['gitDecoration.deletedResourceForeground'] = '#c74e39';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['gitDecoration.ignoredResourceForeground']) {\r\n\t\t\t\tif (isLight) {\r\n\t\t\t\t\tresult.colors['gitDecoration.ignoredResourceForeground'] = '#959da5';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['gitDecoration.ignoredResourceForeground'] = '#8c8c8c';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['diffEditor.removedTextBackground']) {\r\n\t\t\t\tif (isLight) {\r\n\t\t\t\t\tresult.colors['diffEditor.removedTextBackground'] = 'rgba(255, 0, 0, 0.2';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['diffEditor.removedTextBackground'] = 'rgba(144, 39, 74, 0.44)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!result.colors['diffEditor.insertedTextBackground']) {\r\n\t\t\t\tif (isLight) {\r\n\t\t\t\t\tresult.colors['diffEditor.insertedTextBackground'] = 'rgba(155, 185, 85, 0.2)';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.colors['diffEditor.insertedTextBackground'] = 'rgba(75, 102, 22, 0.5)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction _minimap() {\r\n\t\t\tif (!result.colors['minimap.selectionHighlight']) {\r\n\t\t\t\tresult.colors['minimap.selectionHighlight'] = result.colors['editor.selectionBackground'];\r\n\t\t\t}\r\n\t\t\tif (!result.colors['minimap.findMatchHighlight']) {\r\n\t\t\t\tresult.colors['minimap.findMatchHighlight'] = result.colors['editor.findMatchBackground'];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div @mousedown.stop class=\"my-cmd-panel my-list\" v-if=\"visible\">\r\n\t\t<div>\r\n\t\t\t<div class=\"my-cmd-search\">\r\n\t\t\t\t<input @keydown.enter=\"onEnter\" @keydown.esc=\"onCancel\" ref=\"input\" spellcheck=\"false\" type=\"text\" v-model=\"searchText\" />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<Menu :checkable=\"checkable\" :hover-check=\"hoverCheck\" :menuList=\"cmdList\" :top=\"scrollTop\" @change=\"onChange\" @scroll=\"onScroll\" ref=\"menu\" style=\"position: relative\"></Menu>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport Util from '@/common/util';\r\nimport Theme from '@/module/theme';\r\nimport Menu from './Menu';\r\nimport EventBus from '@/event';\r\nimport globalData from '@/data/globalData';\r\nimport Context from '@/module/context/index';\r\n\r\nconst path = window.require('path');\r\nconst contexts = Context.contexts;\r\n\r\nexport default {\r\n\tname: 'CmdPanel',\r\n\tcomponents: {\r\n\t\tMenu,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tsearchText: '',\r\n\t\t\tvalue: '',\r\n\t\t\tcmdList: [],\r\n\t\t\tvisible: false,\r\n\t\t\tcheckable: false,\r\n\t\t\thoverCheck: false,\r\n\t\t\tscrollTop: 0,\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\tsearchText() {\r\n\t\t\tif (this.isCmdSearch) {\r\n\t\t\t\tthis.searchCmd();\r\n\t\t\t} else {\r\n\t\t\t\tthis.searchMenu();\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tthis.theme = new Theme();\r\n\t\tthis.initEventBus();\r\n\t},\r\n\tmethods: {\r\n\t\tinitEventBus() {\r\n\t\t\tEventBus.$on('close-menu', () => {\r\n\t\t\t\tthis.onCancel();\r\n\t\t\t});\r\n\t\t\tEventBus.$on('cmd-menu-open', (data) => {\r\n\t\t\t\tthis.visible = true;\r\n\t\t\t\tthis.isCmdSearch = false;\r\n\t\t\t\tthis.searchText = data.input || '';\r\n\t\t\t\tthis.originCmdList = data.cmdList;\r\n\t\t\t\tthis.checkable = data.checkable === undefined ? true : data.checkable;\r\n\t\t\t\tthis.hoverCheck = data.hoverCheck === undefined ? false : data.hoverCheck;\r\n\t\t\t\tthis.value = data.value;\r\n\t\t\t\tif (this.originCmdList[0] && !(this.originCmdList[0] instanceof Array)) {\r\n\t\t\t\t\tthis.originCmdList = [this.originCmdList];\r\n\t\t\t\t}\r\n\t\t\t\tthis.searchMenu();\r\n\t\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\t\tthis.$refs.input.focus();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tEventBus.$on('cmd-search-open', (data) => {\r\n\t\t\t\tdata = data || {};\r\n\t\t\t\tthis.visible = true;\r\n\t\t\t\tthis.isCmdSearch = true;\r\n\t\t\t\tthis.checkable = true;\r\n\t\t\t\tthis.hoverCheck = false;\r\n\t\t\t\tthis.searchText = data.input || '';\r\n\t\t\t\tthis.cmdList = [];\r\n\t\t\t\tthis.searchCmd(1);\r\n\t\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\t\tthis.$refs.input.focus();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tsearchMenu() {\r\n\t\t\tthis.scrollTop = 0;\r\n\t\t\tif (this.searchText) {\r\n\t\t\t\tlet menu = [];\r\n\t\t\t\tthis.originCmdList[0].forEach((item) => {\r\n\t\t\t\t\tlet result = Util.fuzzyMatch(this.searchText, item.name, true);\r\n\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\tmenu.push([item, result]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tmenu = menu\r\n\t\t\t\t\t.sort((a, b) => {\r\n\t\t\t\t\t\treturn b[1].score - a[1].score;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.map((item) => {\r\n\t\t\t\t\t\treturn item[0];\r\n\t\t\t\t\t});\r\n\t\t\t\tthis.cmdList = [menu];\r\n\t\t\t} else {\r\n\t\t\t\tthis.cmdList = this.originCmdList.slice();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsearchCmd() {\r\n\t\t\tthis.scrollTop = 0;\r\n\t\t\tif (this.searchText.startsWith(':')) {\r\n\t\t\t\tlet editor = globalData.nowEditorId && globalData.$mainWin.getNowEditor();\r\n\t\t\t\tif (editor) {\r\n\t\t\t\t\tthis.cmdList = [{ name: `Current Line：${editor.nowCursorPos.line}，Type a Line number between 1 and ${editor.maxLine} to navigate to` }];\r\n\t\t\t\t\tthis.goToLine();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.cmdList = [{ name: 'Open a Editor first to go to a line' }];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.searchFile();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsearchFile() {\r\n\t\t\tlet results = [];\r\n\t\t\tlet timestamp = Date.now();\r\n\t\t\tlet searchId = Util.getUUID();\r\n\t\t\tlet searchText = _reverseString(this.searchText.replace(/[\\\\\\/]/g, path.sep));\r\n\t\t\tthis.searchId = searchId;\r\n\r\n\t\t\tclearTimeout(this.searchFileTimer);\r\n\t\t\tthis.searchFileTimer = null;\r\n\t\t\tglobalData.scheduler.removeTask(this.searchFileTask);\r\n\t\t\t_search.call(this, globalData.fileTree.slice());\r\n\r\n\t\t\tfunction _search(list) {\r\n\t\t\t\tif (list.length) {\r\n\t\t\t\t\tlet item = list.shift();\r\n\t\t\t\t\tif (item.loaded) {\r\n\t\t\t\t\t\t_checkFile.call(this, item.children, list);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tglobalData.$fileTree.readdir(item).then(() => {\r\n\t\t\t\t\t\t\t_checkFile.call(this, item.children, list);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclearTimeout(this.searchFileTimer);\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.$refs.menu.setMenuList(_sort(results));\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.searchFileTimer) {\r\n\t\t\t\t\tthis.searchFileTimer = setTimeout(\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tthis.$refs.menu.setMenuList(_sort(results));\r\n\t\t\t\t\t\t\tthis.searchFileTimer = null;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresults.length ? 60 : 0\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction _checkFile(children, list) {\r\n\t\t\t\tif (searchId !== this.searchId) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tchildren.forEach((item) => {\r\n\t\t\t\t\tif (item.type === 'file') {\r\n\t\t\t\t\t\t_match(item);\r\n\t\t\t\t\t} else if (!globalData.skipSearchDirs.test(item.path)) {\r\n\t\t\t\t\t\tlist.push(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.searchFileTask = globalData.scheduler.addTask(() => {\r\n\t\t\t\t\t_search.call(this, list);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction _match(item) {\r\n\t\t\t\tlet icon = Util.getIconByPath({ filePath: item.path, fileType: 'file' });\r\n\t\t\t\ticon = icon ? `my-file-icon my-file-icon-${icon}` : '';\r\n\t\t\t\tif (searchText) {\r\n\t\t\t\t\tlet m = Util.fuzzyMatch(searchText, _reverseString(item.path), true);\r\n\t\t\t\t\tif (m) {\r\n\t\t\t\t\t\tlet nameIndexs = [];\r\n\t\t\t\t\t\tlet descIndexs = [];\r\n\t\t\t\t\t\tm.indexs.forEach((index) => {\r\n\t\t\t\t\t\t\tdescIndexs.push(item.path.length - 1 - index);\r\n\t\t\t\t\t\t\tif (item.name.length - 1 - index >= 0) {\r\n\t\t\t\t\t\t\t\tnameIndexs.push(item.name.length - 1 - index);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnameIndexs.reverse();\r\n\t\t\t\t\t\tdescIndexs.reverse();\r\n\t\t\t\t\t\tresults.push({\r\n\t\t\t\t\t\t\tindex: results.length,\r\n\t\t\t\t\t\t\tname: item.name,\r\n\t\t\t\t\t\t\tdesc: item.path,\r\n\t\t\t\t\t\t\top: 'openFile',\r\n\t\t\t\t\t\t\titem: item,\r\n\t\t\t\t\t\t\tscore: m.score,\r\n\t\t\t\t\t\t\tdescIndexs,\r\n\t\t\t\t\t\t\tnameIndexs,\r\n\t\t\t\t\t\t\ticon,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresults.push({\r\n\t\t\t\t\t\tindex: results.length,\r\n\t\t\t\t\t\tname: item.name,\r\n\t\t\t\t\t\tdesc: item.path,\r\n\t\t\t\t\t\titem: item,\r\n\t\t\t\t\t\top: 'openFile',\r\n\t\t\t\t\t\tscore: 0,\r\n\t\t\t\t\t\ticon,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction _reverseString(str) {\r\n\t\t\t\treturn str.split('').reduce((reversed, character) => character + reversed, '');\r\n\t\t\t}\r\n\r\n\t\t\tfunction _sort(results) {\r\n\t\t\t\treturn results.sort((a, b) => {\r\n\t\t\t\t\treturn b.score - a.score;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tgoToLine() {\r\n\t\t\tlet editor = globalData.nowEditorId && globalData.$mainWin.getNowEditor();\r\n\t\t\tif (editor) {\r\n\t\t\t\tlet line = parseInt(this.searchText.slice(1));\r\n\t\t\t\tif (line > 0 && line <= editor.maxLine) {\r\n\t\t\t\t\tthis.nowCursorPos = this.nowCursorPos || editor.nowCursorPos;\r\n\t\t\t\t\tthis.scrollTop = this.scrollTop || editor.scrollTop;\r\n\t\t\t\t\tthis.scrollLeft = this.scrollLeft || editor.scrollLeft;\r\n\t\t\t\t\teditor.scrollToLine(line);\r\n\t\t\t\t\tif (this.preCursorPos) {\r\n\t\t\t\t\t\tthis.preCursorPos = editor.cursor.updateCursorPos(this.preCursorPos, line, 0);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.preCursorPos = editor.cursor.addCursorPos({\r\n\t\t\t\t\t\t\tline: line,\r\n\t\t\t\t\t\t\tcolumn: 0,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnter() {\r\n\t\t\tif (this.isCmdSearch) {\r\n\t\t\t\tif (this.searchText.startsWith(':')) {\r\n\t\t\t\t\tlet editor = globalData.nowEditorId && globalData.$mainWin.getNowEditor();\r\n\t\t\t\t\tlet line = parseInt(this.searchText.slice(1));\r\n\t\t\t\t\tif (editor && line && this.preCursorPos && this.preCursorPos.line === line) {\r\n\t\t\t\t\t\teditor.searcher.clearSearch();\r\n\t\t\t\t\t\teditor.cursor.setCursorPos(this.preCursorPos);\r\n\t\t\t\t\t\teditor.focus();\r\n\t\t\t\t\t\tthis.visible = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonCancel() {\r\n\t\t\tif (this.nowCursorPos) {\r\n\t\t\t\tlet editor = globalData.nowEditorId && globalData.$mainWin.getNowEditor();\r\n\t\t\t\tif (editor) {\r\n\t\t\t\t\teditor.setStartLine(this.scrollTop);\r\n\t\t\t\t\teditor.scrollLeft = this.scrollLeft;\r\n\t\t\t\t\teditor.cursor.removeCursor(this.preCursorPos);\r\n\t\t\t\t\teditor.cursor.addCursorPos(this.nowCursorPos);\r\n\t\t\t\t\teditor.focus();\r\n\t\t\t\t}\r\n\t\t\t\tthis.preCursorPos = null;\r\n\t\t\t\tthis.nowCursorPos = null;\r\n\t\t\t\tthis.scrollTop = 0;\r\n\t\t\t\tthis.scrollLeft = 0;\r\n\t\t\t}\r\n\t\t\tclearTimeout(this.searchFileTimer);\r\n\t\t\tglobalData.scheduler.removeTask(this.searchFileTask);\r\n\t\t\tthis.visible = false;\r\n\t\t},\r\n\t\tonChange(item) {\r\n\t\t\tswitch (item.op) {\r\n\t\t\t\tcase 'changeTheme':\r\n\t\t\t\t\tthis.theme.loadTheme(item);\r\n\t\t\t\t\tthis.visible = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'changeIconTheme':\r\n\t\t\t\t\tthis.theme.loadIconTheme(item);\r\n\t\t\t\t\tthis.visible = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'selectLanguage':\r\n\t\t\t\t\tEventBus.$emit('language-change', { id: globalData.nowEditorId, language: item.value });\r\n\t\t\t\t\tthis.visible = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'changeTabSize':\r\n\t\t\t\t\tEventBus.$emit('tab-size-change', item.value);\r\n\t\t\t\t\tthis.visible = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'changeIndent':\r\n\t\t\t\t\tEventBus.$emit('indent-change', item.value);\r\n\t\t\t\t\tthis.visible = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'convertTabToSpace':\r\n\t\t\t\t\tEventBus.$emit('convert-to-space', item.value);\r\n\t\t\t\t\tthis.visible = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'convertSpaceToTab':\r\n\t\t\t\t\tEventBus.$emit('convert-to-tab', item.value);\r\n\t\t\t\t\tthis.visible = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'openFile':\r\n\t\t\t\t\tEventBus.$emit('file-open', item.item);\r\n\t\t\t\t\tthis.onCancel();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonScroll(e) {\r\n\t\t\tthis.scrollTop = e;\r\n\t\t},\r\n\t},\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CmdPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CmdPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CmdPanel.vue?vue&type=template&id=687be0d6&\"\nimport script from \"./CmdPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./CmdPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"my-terminal\"},[_c('div',{ref:\"terminal\",staticClass:\"my-width-100 my-height-100\",attrs:{\"id\":_vm._id},on:{\"contextmenu\":_vm.onContextmenu}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2022-05-13 19:43:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div class=\"my-terminal\">\r\n\t\t<div :id=\"_id\" @contextmenu=\"onContextmenu\" class=\"my-width-100 my-height-100\" ref=\"terminal\"></div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport { Terminal } from 'xterm';\r\nimport { FitAddon } from 'xterm-addon-fit';\r\nimport { WebLinksAddon } from 'xterm-addon-web-links';\r\nimport { SearchAddon } from 'xterm-addon-search';\r\nimport globalData from '@/data/globalData';\r\nimport Util from '@/common/util';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\n\r\nconst { ipcRenderer } = window.require('electron');\r\n\r\nexport default {\r\n\tname: 'Terminal',\r\n\tprops: {\r\n\t\tid: { type: Number, default: 0 },\r\n\t\tpath: String,\r\n\t},\r\n\tdata() {\r\n\t\treturn {};\r\n\t},\r\n\tcomputed: {\r\n\t\t_id() {\r\n\t\t\treturn 'terminal-' + this.id;\r\n\t\t},\r\n\t},\r\n\tcreated() {},\r\n\tmounted() {\r\n\t\tthis.terminal = new Terminal({\r\n\t\t\twindowsMode: true,\r\n\t\t\tfontFamily: 'Consolas',\r\n\t\t\tcursorBlink: true,\r\n\t\t\ttheme: {\r\n\t\t\t\tlineHeight: 20,\r\n\t\t\t\tforeground: globalData.colors['terminal.foreground'],\r\n\t\t\t\tbackground: globalData.colors['terminal.background'],\r\n\t\t\t\tselection: globalData.colors['terminal.selectionBackground'],\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.fitAddon = new FitAddon(); //自适应容器大小插件\r\n\t\tthis.searchAddon = new SearchAddon();\r\n\t\tthis.terminal.loadAddon(this.fitAddon);\r\n\t\tthis.terminal.loadAddon(this.searchAddon);\r\n\t\tthis.terminal.loadAddon(new WebLinksAddon());\r\n\t\tthis.terminal.open(this.$refs.terminal);\r\n\t\tthis.initEvent();\r\n\t\tthis.initTerminalEvent();\r\n\t\tthis.initResizeEvent();\r\n\t\trequestAnimationFrame(() => {\r\n\t\t\tthis.fitAddon.fit();\r\n\t\t\tthis.createTerminal();\r\n\t\t});\r\n\t},\r\n\tdestroyed() {\r\n\t\tipcRenderer.send('terminal-destroy', {\r\n\t\t\tid: this.id,\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\tsetResize(data) {\r\n\t\t\tipcRenderer.send('terminal-resize', {\r\n\t\t\t\tid: this.id,\r\n\t\t\t\trows: data.rows,\r\n\t\t\t\tcols: data.cols,\r\n\t\t\t});\r\n\t\t},\r\n\t\tcreateTerminal() {\r\n\t\t\tipcRenderer.send('terminal-add', {\r\n\t\t\t\tid: this.id,\r\n\t\t\t\trows: this.terminal.rows,\r\n\t\t\t\tcols: this.terminal.cols,\r\n\t\t\t\tcwd: this.path,\r\n\t\t\t});\r\n\t\t},\r\n\t\tinitEvent() {\r\n\t\t\tEventBus.$on('theme-changed', () => {\r\n\t\t\t\tthis.terminal.setOption('theme', {\r\n\t\t\t\t\tforeground: globalData.colors['terminal.foreground'],\r\n\t\t\t\t\tbackground: globalData.colors['terminal.background'],\r\n\t\t\t\t\tselection: globalData.colors['terminal.selectionBackground'],\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tinitResizeEvent() {\r\n\t\t\tconst resizeObserver = new ResizeObserver((entries) => {\r\n\t\t\t\tcancelAnimationFrame(this.fitTimer);\r\n\t\t\t\tthis.fitTimer = requestAnimationFrame(() => {\r\n\t\t\t\t\tif (this.$refs.terminal && this.$refs.terminal.clientHeight) {\r\n\t\t\t\t\t\tthis.fitAddon.fit();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tresizeObserver.observe(this.$refs.terminal);\r\n\t\t},\r\n\t\tinitTerminalEvent() {\r\n\t\t\tipcRenderer.on('terminal-data', (event, data) => {\r\n\t\t\t\tif (this.id === data.id) {\r\n\t\t\t\t\tthis.terminal.write(data.text);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.terminal.onData((text) => {\r\n\t\t\t\tipcRenderer.send('terminal-write', {\r\n\t\t\t\t\tid: this.id,\r\n\t\t\t\t\ttext: text,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.terminal.onResize((data) => {\r\n\t\t\t\tthis.setResize(data);\r\n\t\t\t});\r\n\t\t\tthis.terminal.attachCustomKeyEventHandler((e) => {\r\n\t\t\t\tif (e.ctrlKey && e.code === 'KeyC' && e.type === 'keydown') {\r\n\t\t\t\t\tconst selection = this.terminal.getSelection();\r\n\t\t\t\t\tif (selection) {\r\n\t\t\t\t\t\tthis.terminal.clearSelection();\r\n\t\t\t\t\t\tUtil.writeClipboard(selection);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t},\r\n\t\tonContextmenu(e) {\r\n\t\t\tlet selection = terminal.terminal.getSelection();\r\n\t\t\tif (selection) {\r\n\t\t\t\tthis.terminal.clearSelection();\r\n\t\t\t\tUtil.writeClipboard(selection);\r\n\t\t\t} else {\r\n\t\t\t\tUtil.readClipboard().then((data) => {\r\n\t\t\t\t\tthis.terminal.paste(data);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Terminal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Terminal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Terminal.vue?vue&type=template&id=1709959c&\"\nimport script from \"./Terminal.vue?vue&type=script&lang=js&\"\nexport * from \"./Terminal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"terminalBar\",staticClass:\"my-terminal-bar\",on:{\"selectstart\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"my-center-between my-width-100 my-height-100\"},[_c('div',{staticClass:\"bar-scroller my-scroll-overlay my-scroll-mini\"},_vm._l((_vm.terminalList),function(item,index){return _c('div',{staticClass:\"bar-item my-hover\",class:[item.active ? 'my-active' : ''],attrs:{\"title\":item.path},on:{\"click\":function($event){return _vm.onClickItem(item.id)},\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onContextmenu($event, item.id)}}},[_c('div',{staticClass:\"bar-content\"},[_c('span',{staticClass:\"bar-text\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"bar-icon-wrap\"},[_c('span',{staticClass:\"bar-icon\",attrs:{\"title\":\"close\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onClose(item.id)}}},[_c('i',{staticClass:\"my-icon my-icon-close\"})])])])])}),0),_c('div',{staticClass:\"my-terminal-btns\"},[_c('div',{staticClass:\"bar-icon-wrap\"},[_c('span',{staticClass:\"bar-icon\",attrs:{\"title\":\"new\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onAdd()}}},[_c('i',{staticClass:\"my-icon my-icon-add\"})])]),_c('div',{staticClass:\"bar-icon-wrap\"},[_c('span',{staticClass:\"bar-icon\",attrs:{\"title\":\"new\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onToggle()}}},[_c('i',{staticClass:\"my-icon my-icon-close\"})])])])]),_c('terminal-bar-menu',{ref:\"terminalBarMenu\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onMenuChange}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n\t<Menu :checkable=\"false\" :menuList=\"menuList\" :styles=\"menuStyle\" @change=\"onMenuChange\" ref=\"menu\" v-show=\"menuVisible\"></Menu>\r\n</template>\r\n<script>\r\nimport $ from 'jquery';\r\nimport Util from '@/common/util';\r\nimport Menu from './Menu';\r\nimport EventBus from '@/event';\r\n\r\nexport default {\r\n\tname: 'TerminalBarMenu',\r\n\tcomponents: {\r\n\t\tMenu,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmenuList: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Close',\r\n\t\t\t\t\t\top: 'close',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Close to the Left',\r\n\t\t\t\t\t\top: 'closeToLeft',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Close to the Right',\r\n\t\t\t\t\t\top: 'closeToRight',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Close Ohter',\r\n\t\t\t\t\t\top: 'closeOther',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'Close All',\r\n\t\t\t\t\t\top: 'closeAll',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t\tmenuVisible: false,\r\n\t\t\tmenuStyle: {\r\n\t\t\t\tleft: '10px',\r\n\t\t\t\ttop: '40px',\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.initEventBus();\r\n\t},\r\n\tmethods: {\r\n\t\tinitEventBus() {\r\n\t\t\tEventBus.$on('close-menu', () => {\r\n\t\t\t\tthis.menuVisible = false;\r\n\t\t\t});\r\n\t\t},\r\n\t\tshow(e, id) {\r\n\t\t\tthis.tabId = id;\r\n\t\t\tthis.menuVisible = true;\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.menuStyle = Util.getMemnuPos(e, this.$refs.menu.$el, document.body);\r\n\t\t\t});\r\n\t\t},\r\n\t\tonMenuChange(item) {\r\n\t\t\tswitch (item.op) {\r\n\t\t\t\tcase 'close':\r\n\t\t\t\t\tEventBus.$emit('terminal-close', this.tabId);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'closeToLeft':\r\n\t\t\t\t\tEventBus.$emit('terminal-close-to-left', this.tabId);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'closeToRight':\r\n\t\t\t\t\tEventBus.$emit('terminal-close-to-right', this.tabId);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'closeOther':\r\n\t\t\t\t\tEventBus.$emit('terminal-close-other', this.tabId);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'closeAll':\r\n\t\t\t\t\tEventBus.$emit('terminal-close-all', this.tabId);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.menuVisible = false;\r\n\t\t},\r\n\t},\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TerminalBarMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TerminalBarMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TerminalBarMenu.vue?vue&type=template&id=562c1543&\"\nimport script from \"./TerminalBarMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./TerminalBarMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 16:13:15\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\n\r\nexport default class {\r\n\tconstructor() { }\r\n\tonKeydown(e) {\r\n\t\tif (e.ctrlKey) {\r\n\t\t\tif (this.pressK) {\r\n\t\t\t\tthis.pressK = false;\r\n\t\t\t\tswitch (e.keyCode) {\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tswitch (e.keyCode) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div @selectstart.prevent class=\"my-terminal-bar\" ref=\"terminalBar\">\r\n\t\t<div class=\"my-center-between my-width-100 my-height-100\">\r\n\t\t\t<div class=\"bar-scroller my-scroll-overlay my-scroll-mini\">\r\n\t\t\t\t<div\r\n\t\t\t\t\t:class=\"[item.active ? 'my-active' : '']\"\r\n\t\t\t\t\t:title=\"item.path\"\r\n\t\t\t\t\t@click=\"onClickItem(item.id)\"\r\n\t\t\t\t\t@contextmenu.prevent.stop=\"onContextmenu($event, item.id)\"\r\n\t\t\t\t\tclass=\"bar-item my-hover\"\r\n\t\t\t\t\tv-for=\"(item, index) in terminalList\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"bar-content\">\r\n\t\t\t\t\t\t<span class=\"bar-text\">{{ item.name }}</span>\r\n\t\t\t\t\t\t<div class=\"bar-icon-wrap\">\r\n\t\t\t\t\t\t\t<span @click.stop=\"onClose(item.id)\" class=\"bar-icon\" title=\"close\">\r\n\t\t\t\t\t\t\t\t<i class=\"my-icon my-icon-close\"></i>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"my-terminal-btns\">\r\n\t\t\t\t<div class=\"bar-icon-wrap\">\r\n\t\t\t\t\t<span @click.stop=\"onAdd()\" class=\"bar-icon\" title=\"new\">\r\n\t\t\t\t\t\t<i class=\"my-icon my-icon-add\"></i>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"bar-icon-wrap\">\r\n\t\t\t\t\t<span @click.stop=\"onToggle()\" class=\"bar-icon\" title=\"new\">\r\n\t\t\t\t\t\t<i class=\"my-icon my-icon-close\"></i>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<terminal-bar-menu ref=\"terminalBarMenu\"></terminal-bar-menu>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport TerminalBarMenu from './TerminalBarMenu';\r\nimport ShortCut from '@/module/shortcut/terminal-bar';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\n\r\nexport default {\r\n\tname: 'TerminalBar',\r\n\tcomponents: {\r\n\t\tTerminalBarMenu,\r\n\t},\r\n\tprops: {\r\n\t\tterminalList: {\r\n\t\t\ttype: Array,\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tlist: [],\r\n\t\t};\r\n\t},\r\n\tprovide() {\r\n\t\treturn {\r\n\t\t\trootList: this.list,\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.shortcut = new ShortCut(this);\r\n\t\tthis.initEventBus();\r\n\t\t$(window).on('keydown', (e) => {\r\n\t\t\tthis.shortcut.onKeydown(e);\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\tinitEventBus() {\r\n\t\t\tEventBus.$on('terminal-editor-changed', (data) => {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tlet $tab = $(this.$refs.terminalBar).find('div.my-active');\r\n\t\t\t\t\t$tab.length && $tab[0].scrollIntoView();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tonClickItem(id) {\r\n\t\t\tEventBus.$emit('terminal-change', id);\r\n\t\t},\r\n\t\tonClose(id) {\r\n\t\t\tEventBus.$emit('terminal-close', id);\r\n\t\t},\r\n\t\tonAdd() {\r\n\t\t\tEventBus.$emit('terminal-new');\r\n\t\t},\r\n\t\tonToggle() {\r\n\t\t\tEventBus.$emit('terminal-toggle');\r\n\t\t},\r\n\t\tonContextmenu(e, id) {\r\n\t\t\tthis.$refs.terminalBarMenu.show(e, id);\r\n\t\t},\r\n\t},\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TerminalBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TerminalBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TerminalBar.vue?vue&type=template&id=84241398&\"\nimport script from \"./TerminalBar.vue?vue&type=script&lang=js&\"\nexport * from \"./TerminalBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import EventBus from '@/event';\r\nimport Util from '@/common/util';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst path = window.require('path');\r\n\r\nexport default class {\r\n\tconstructor() {\r\n\t\tthis.terminalList = globalData.terminalList;\r\n\t\tthis.terminalId = 1;\r\n\t\tthis.init();\r\n\t}\r\n\tinit() {\r\n\t\tEventBus.$on('terminal-new', dirPath => {\r\n\t\t\tlet nowFileItem = globalData.nowFileItem;\r\n\t\t\tlet tab = {};\r\n\t\t\tlet name = '';\r\n\t\t\tif (!dirPath) {\r\n\t\t\t\tdirPath = window.process.env.HOME;\r\n\t\t\t\tif (nowFileItem) {\r\n\t\t\t\t\tif (nowFileItem.type === 'file') {\r\n\t\t\t\t\t\tdirPath = path.dirname(nowFileItem.path);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdirPath = nowFileItem.path;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tname = path.basename(dirPath);\r\n\t\t\ttab.name = name;\r\n\t\t\ttab.path = dirPath;\r\n\t\t\ttab.id = Util.getUUID();\r\n\t\t\tthis.terminalList.push(tab);\r\n\t\t\tEventBus.$emit('terminal-change', tab.id);\r\n\t\t});\r\n\t\tEventBus.$on('terminal-close', id => {\r\n\t\t\tthis.closeTerminal(id);\r\n\t\t});\r\n\t\tEventBus.$on('terminal-change', id => {\r\n\t\t\tthis.changeTerminalTab(id);\r\n\t\t});\r\n\t\tEventBus.$on('terminal-close-to-left', id => {\r\n\t\t\tthis.closeTerminalToLeft(id);\r\n\t\t});\r\n\t\tEventBus.$on('terminal-close-to-right', id => {\r\n\t\t\tthis.closeTerminalToRight(id);\r\n\t\t});\r\n\t\tEventBus.$on('terminal-close-other', id => {\r\n\t\t\tthis.closeTerminalOther(id);\r\n\t\t});\r\n\t\tEventBus.$on('terminal-close-all', id => {\r\n\t\t\tthis.terminalList.empty();\r\n\t\t\tif (globalData.views.terminal) {\r\n\t\t\t\tEventBus.$emit('terminal-toggle');\r\n\t\t\t}\r\n\t\t});\r\n\t\tEventBus.$on('terminal-loaded', list => {\r\n\t\t\tthis.loadTerminal(list);\r\n\t\t});\r\n\t}\r\n\tgetTerminalTabById(id) {\r\n\t\tfor (let i = 0; i < this.terminalList.length; i++) {\r\n\t\t\tif (id === this.terminalList[i].id) {\r\n\t\t\t\treturn this.terminalList[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tchangeTerminalTab(id) {\r\n\t\tthis.terminalList.forEach(item => {\r\n\t\t\titem.active = item.id === id;\r\n\t\t});\r\n\t\tthis.terminalList.splice();\r\n\t}\r\n\tcloseTerminal(id) {\r\n\t\tfor (let i = 0; i < this.terminalList.length; i++) {\r\n\t\t\tif (id === this.terminalList[i].id) {\r\n\t\t\t\tlet tab = null;\r\n\t\t\t\tthis.terminalList.splice(i, 1);\r\n\t\t\t\ttab = this.terminalList[i] || this.terminalList[i - 1];\r\n\t\t\t\tif (tab) {\r\n\t\t\t\t\tthis.changeTerminalTab(tab.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.terminalList.length === 0 && globalData.views.terminal) {\r\n\t\t\tEventBus.$emit('terminal-toggle');\r\n\t\t}\r\n\t}\r\n\tcloseTerminalToLeft(id) {\r\n\t\tfor (let i = 0; i < this.terminalList.length; i++) {\r\n\t\t\tif (id != this.terminalList[i].id) {\r\n\t\t\t\tthis.terminalList.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcloseTerminalToRight(id) {\r\n\t\tfor (let i = this.terminalList.length - 1; i >= 0; i--) {\r\n\t\t\tlet tab = this.terminalList[i];\r\n\t\t\tif (tab && id != tab.id) {\r\n\t\t\t\tthis.terminalList.splice(i, 1);\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcloseTerminalOther(id) {\r\n\t\tlet tab = this.getTerminalTabById(id);\r\n\t\tthis.terminalList.empty();\r\n\t\tthis.terminalList.push(tab);\r\n\t\tEventBus.$emit('terminal-change', tab.id);\r\n\t}\r\n\tloadTerminal(list) {\r\n\t\tlist.forEach((item) => {\r\n\t\t\tthis.terminalList.push(item);\r\n\t\t});\r\n\t}\r\n}\r\n","import Vue from 'vue';\r\nimport Context from '@/module/context/index';\r\nimport EventBus from '@/event';\r\nimport globalData from '@/data/globalData';\r\nimport Util from '@/common/util';\r\n\r\nconst remote = window.require('@electron/remote');\r\nconst contexts = Context.contexts;\r\n\r\nexport default class {\r\n\tconstructor() {\r\n\t\tthis.editorList = globalData.editorList;\r\n\t\tthis.mode = remote ? 'app' : 'mode';\r\n\t\tthis.init();\r\n\t}\r\n\tinit() {\r\n\t\tEventBus.$on('editor-close', id => {\r\n\t\t\tthis.closeTab(id);\r\n\t\t});\r\n\t\tEventBus.$on('editor-change', id => {\r\n\t\t\tthis.changeTab(id);\r\n\t\t});\r\n\t\tEventBus.$on('editor-saved', id => {\r\n\t\t\tthis.saveTab(id);\r\n\t\t});\r\n\t\tEventBus.$on('editor-close-to-left', id => {\r\n\t\t\tthis.closeToLeft(id);\r\n\t\t});\r\n\t\tEventBus.$on('editor-close-to-right', id => {\r\n\t\t\tthis.closeToRight(id);\r\n\t\t});\r\n\t\tEventBus.$on('editor-close-saved', id => {\r\n\t\t\tthis.closeSaved(id);\r\n\t\t});\r\n\t\tEventBus.$on('editor-close-other', id => {\r\n\t\t\tthis.closeOther(id);\r\n\t\t});\r\n\t\tEventBus.$on('editor-close-all', id => {\r\n\t\t\tthis.closeAll();\r\n\t\t});\r\n\t\tEventBus.$on('editor-loaded', list => {\r\n\t\t\tthis.loadEditor(list);\r\n\t\t});\r\n\t\tEventBus.$on('editor-content-change', data => {\r\n\t\t\tlet tab = Util.getTabById(this.editorList, data.id);\r\n\t\t\tif (tab) {\r\n\t\t\t\ttab.saved = false;\r\n\t\t\t\tthis.editorList.splice();\r\n\t\t\t}\r\n\t\t});\r\n\t\tEventBus.$on('language-check', () => {\r\n\t\t\tthis.checkLanguage();\r\n\t\t});\r\n\t\tEventBus.$on('folder-opened', () => {\r\n\t\t\tthis.editorList.empty();\r\n\t\t\tglobalData.nowEditorId = null;\r\n\t\t});\r\n\t}\r\n\tchangeTab(id) {\r\n\t\tlet tab = Util.getTabById(this.editorList, id);\r\n\t\tif (tab && !tab.active) {\r\n\t\t\tif (tab.path && !tab.loaded) {\r\n\t\t\t\t//tab对应的文件内容还未加载\r\n\t\t\t\tEventBus.$emit('file-open', tab);\r\n\t\t\t} else {\r\n\t\t\t\tthis.editorList.forEach(item => {\r\n\t\t\t\t\titem.active = false;\r\n\t\t\t\t});\r\n\t\t\t\ttab.active = true;\r\n\t\t\t\tglobalData.nowEditorId = id;\r\n\t\t\t\tthis.changeStatus();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.focusNowEditor();\r\n\t\t}\r\n\t}\r\n\tsaveTab(id) {\r\n\t\tlet tab = Util.getTabById(this.editorList, id);\r\n\t\ttab.saved = true;\r\n\t}\r\n\tchangeStatus() {\r\n\t\tlet changStatusId = this.changeStatus.id || 1;\r\n\t\tthis.changeStatus.id = changStatusId;\r\n\t\tVue.prototype.$nextTick(() => {\r\n\t\t\tif (this.changeStatus.id !== changStatusId) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet editor = globalData.$mainWin.getNowEditor();\r\n\t\t\tlet tab = Util.getTabById(this.editorList, globalData.nowEditorId);\r\n\t\t\tEventBus.$emit(`editor-changed`, {\r\n\t\t\t\tid: tab.id,\r\n\t\t\t\tpath: tab.path,\r\n\t\t\t\tlanguage: editor.language,\r\n\t\t\t\ttabSize: editor.tabSize,\r\n\t\t\t\tindent: editor.indent,\r\n\t\t\t\tline: editor.nowCursorPos ? editor.nowCursorPos.line : '?',\r\n\t\t\t\tcolumn: editor.nowCursorPos ? editor.nowCursorPos.column : '?'\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t// 检查当前打开的文件的语言\r\n\tcheckLanguage() {\r\n\t\tif (globalData.nowEditorId) {\r\n\t\t\tlet tab = Util.getTabById(this.editorList, globalData.nowEditorId);\r\n\t\t\tlet suffix = /\\.[^\\.]+$/.exec(tab.name);\r\n\t\t\tif (!suffix) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < globalData.languageList.length; i++) {\r\n\t\t\t\tlet language = globalData.languageList[i];\r\n\t\t\t\tif (language.extensions && language.extensions.indexOf(suffix[0]) > -1) {\r\n\t\t\t\t\tVue.prototype.$nextTick(() => {\r\n\t\t\t\t\t\tEventBus.$emit('language-change', { id: tab.id, language: language.value });\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcloseTab(id) {\r\n\t\tlet tab = Util.getTabById(this.editorList, id || globalData.nowEditorId);\r\n\t\tlet index = this.editorList.indexOf(tab);\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (!tab.saved) {\r\n\t\t\t\t_saveDialog.call(this, resolve);\r\n\t\t\t} else {\r\n\t\t\t\t_closeTab.call(this, resolve);\r\n\t\t\t}\r\n\t\t}).then(() => {\r\n\t\t\tEventBus.$emit('git-status-stop', tab.path);\r\n\t\t\tEventBus.$emit('file-watch-stop', tab.path);\r\n\t\t});\r\n\r\n\t\tfunction _closeTab(resolve) {\r\n\t\t\tthis.editorList.splice(index, 1);\r\n\t\t\tcontexts[id] = null;\r\n\t\t\tif (tab.active) {\r\n\t\t\t\tlet _tab = this.editorList[index] || this.editorList[index - 1];\r\n\t\t\t\tglobalData.nowEditorId = null;\r\n\t\t\t\ttab.active = false;\r\n\t\t\t\tif (_tab) {\r\n\t\t\t\t\tthis.changeTab(_tab.id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tEventBus.$emit('editor-changed', null);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.focusNowEditor();\r\n\t\t\t}\r\n\t\t\tresolve();\r\n\t\t}\r\n\r\n\t\tfunction _saveDialog(resolve) {\r\n\t\t\tEventBus.$emit('dialog-show', {\r\n\t\t\t\tcontent: '文件尚未保存，是否先保存文件？',\r\n\t\t\t\tcancel: true,\r\n\t\t\t\ticon: 'my-icon-warn',\r\n\t\t\t\ticonColor: 'rgba(255,196,0)',\r\n\t\t\t\tbtns: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '保存',\r\n\t\t\t\t\t\tcallback: () => {\r\n\t\t\t\t\t\t\tif (this.mode === 'app') {\r\n\t\t\t\t\t\t\t\tEventBus.$emit('file-save', {\r\n\t\t\t\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\t\t\t_closeTab.call(this, resolve);\r\n\t\t\t\t\t\t\t\t\t\tEventBus.$emit('dialog-close');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_closeTab.call(this, resolve);\r\n\t\t\t\t\t\t\t\tEventBus.$emit('dialog-close');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '不保存',\r\n\t\t\t\t\t\tcallback: () => {\r\n\t\t\t\t\t\t\t_closeTab.call(this, resolve);\r\n\t\t\t\t\t\t\tEventBus.$emit('dialog-close');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tcloseMultiple(editorList) {\r\n\t\tif (editorList.length) {\r\n\t\t\tthis.closeTab(editorList.pop().id).then(() => {\r\n\t\t\t\tthis.closeMultiple(editorList);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tcloseOther(id) {\r\n\t\tlet editorList = this.editorList.filter(item => {\r\n\t\t\treturn id !== item.id;\r\n\t\t});\r\n\t\tthis.closeMultiple(editorList);\r\n\t}\r\n\tcloseAll() {\r\n\t\tlet editorList = this.editorList.slice();\r\n\t\tthis.closeMultiple(editorList);\r\n\t}\r\n\tcloseSaved() {\r\n\t\tlet editorList = this.editorList.filter(item => {\r\n\t\t\treturn item.saved;\r\n\t\t});\r\n\t\tthis.closeMultiple(editorList);\r\n\t}\r\n\tcloseToLeft(id) {\r\n\t\tlet editorList = [];\r\n\t\tid = id || globalData.nowEditorId;\r\n\t\tfor (let i = 0; i < this.editorList.length; i++) {\r\n\t\t\tlet tab = this.editorList[i];\r\n\t\t\tif (tab.id !== id) {\r\n\t\t\t\teditorList.push(tab);\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.closeMultiple(editorList);\r\n\t}\r\n\tcloseToRight(id) {\r\n\t\tlet editorList = [];\r\n\t\tid = id || globalData.nowEditorId;\r\n\t\tfor (let i = this.editorList.length - 1; i >= 0; i++) {\r\n\t\t\tlet tab = this.editorList[i];\r\n\t\t\tif (tab.id !== id) {\r\n\t\t\t\teditorList.push(tab);\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.closeMultiple(editorList);\r\n\t}\r\n\tloadEditor(list) {\r\n\t\tlet activeTab = null;\r\n\t\tlist.forEach(tab => {\r\n\t\t\tif (tab.active) {\r\n\t\t\t\tactiveTab = tab;\r\n\t\t\t}\r\n\t\t\ttab.active = false;\r\n\t\t\tthis.editorList.push(tab);\r\n\t\t\tif (tab.path) {\r\n\t\t\t\tEventBus.$emit('file-watch-start', tab.path);\r\n\t\t\t\tEventBus.$emit('git-status-start', tab.path);\r\n\t\t\t}\r\n\t\t});\r\n\t\tactiveTab && this.changeTab(activeTab.id);\r\n\t}\r\n\tfocusNowEditor() {\r\n\t\tcancelAnimationFrame(this.closeTabTimer);\r\n\t\tthis.closeTabTimer = requestAnimationFrame(() => {\r\n\t\t\tif (globalData.nowEditorId) {\r\n\t\t\t\tglobalData.$mainWin.getNowEditor().focus();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n","import EventBus from '@/event';\r\nimport Context from '@/module/context/index';\r\nimport globalData from '@/data/globalData';\r\nimport Util from '@/common/util';\r\n\r\nconst { ipcRenderer } = window.require('electron');\r\nconst remote = window.require('@electron/remote');\r\nconst fs = window.require('fs');\r\nconst path = window.require('path');\r\nconst contexts = Context.contexts;\r\n\r\nexport default class {\r\n\tconstructor() {\r\n\t\tthis.titleCount = 1;\r\n\t\tthis.editorList = globalData.editorList;\r\n\t\tthis.fileWatcherMap = {};\r\n\t\tthis.fileWatcherTimer = {};\r\n\t\tthis.init();\r\n\t}\r\n\tinit() {\r\n\t\tEventBus.$on('file-open', (fileObj, choseFile) => {\r\n\t\t\tthis.openFile(fileObj, choseFile);\r\n\t\t});\r\n\t\tEventBus.$on('file-save', option => {\r\n\t\t\tthis.saveFile(option.id).then(() => {\r\n\t\t\t\toption.success && option.success();\r\n\t\t\t});\r\n\t\t});\r\n\t\tEventBus.$on('file-save-as', option => {\r\n\t\t\tthis.saveFile(option.id, true).then(() => {\r\n\t\t\t\toption.success && option.success();\r\n\t\t\t});\r\n\t\t});\r\n\t\tEventBus.$on('file-watch-start', filePath => {\r\n\t\t\tthis.watchFile(filePath);\r\n\t\t});\r\n\t\tEventBus.$on('file-watch-stop', filePath => {\r\n\t\t\tthis.stopWatchFile(filePath);\r\n\t\t});\r\n\t\tEventBus.$on('folder-open', () => {\r\n\t\t\tthis.openFolder();\r\n\t\t});\r\n\t\tEventBus.$on('folder-add', () => {\r\n\t\t\tthis.openFolder(true);\r\n\t\t});\r\n\t\tEventBus.$on('folder-remove', dirPath => {\r\n\t\t\tthis.removeFolder(dirPath);\r\n\t\t});\r\n\t\tEventBus.$on('reveal-in-file-explorer', path => {\r\n\t\t\tif (path) {\r\n\t\t\t\tremote.shell.showItemInFolder(path);\r\n\t\t\t}\r\n\t\t});\r\n\t\tEventBus.$on('file-copy', fileObj => {\r\n\t\t\tthis.cutPath = '';\r\n\t\t\tthis.copyFileToClip(fileObj);\r\n\t\t});\r\n\t\tEventBus.$on('file-cut', fileObj => {\r\n\t\t\tthis.cutPath = fileObj.path;\r\n\t\t\tthis.cutFileToClip(fileObj);\r\n\t\t});\r\n\t\tEventBus.$on('file-paste', fileObj => {\r\n\t\t\tthis.pasteFileFromClip(fileObj, this.cutPath);\r\n\t\t\tthis.cutPath = '';\r\n\t\t});\r\n\t\tEventBus.$on('file-rename', (filePath, newFileNmme) => {\r\n\t\t\tipcRenderer.send('file-rename', filePath, newFileNmme);\r\n\t\t});\r\n\t\tEventBus.$on('file-create', filePath => {\r\n\t\t\tipcRenderer.send('file-create', filePath);\r\n\t\t});\r\n\t\tEventBus.$on('folder-create', filePath => {\r\n\t\t\tipcRenderer.send('folder-create', filePath);\r\n\t\t});\r\n\t\tEventBus.$on('file-delete', fileObj => {\r\n\t\t\tipcRenderer.send('file-delete', fileObj.path);\r\n\t\t});\r\n\t\tEventBus.$on('workspace-save-as', () => {\r\n\t\t\tthis.saveWorkspace(true);\r\n\t\t});\r\n\t\tEventBus.$on('workspace-open', () => {\r\n\t\t\tthis.openWorkspace();\r\n\t\t});\r\n\t}\r\n\topenFolder(addToWorkspace) {\r\n\t\tthis.choseFolder().then(results => {\r\n\t\t\tif (results) {\r\n\t\t\t\tif (addToWorkspace) {\r\n\t\t\t\t\tlet rootPathMap = {};\r\n\t\t\t\t\tglobalData.fileTree.forEach(item => {\r\n\t\t\t\t\t\trootPathMap[item.path] = true;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tresults = results.filter(item => {\r\n\t\t\t\t\t\treturn !rootPathMap[item.path];\r\n\t\t\t\t\t});\r\n\t\t\t\t\tresults.length && globalData.fileTree.push(...results);\r\n\t\t\t\t\tEventBus.$emit('folder-added');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tglobalData.fileTree.forEach(item => {\r\n\t\t\t\t\t\tEventBus.$emit('git-status-stop', item.path);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tglobalData.fileTree.empty();\r\n\t\t\t\t\tglobalData.fileTree.push(...results);\r\n\t\t\t\t\tEventBus.$emit('folder-opened');\r\n\t\t\t\t}\r\n\t\t\t\tthis.saveWorkspace();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tremoveFolder(dirPath) {\r\n\t\tfor (let i = 0; i < globalData.fileTree.length; i++) {\r\n\t\t\tif (globalData.fileTree[i].path === dirPath) {\r\n\t\t\t\tglobalData.fileTree.splice(i, 1);\r\n\t\t\t\tEventBus.$emit('folder-removed');\r\n\t\t\t\tEventBus.$emit('git-status-stop', dirPath);\r\n\t\t\t\tthis.saveWorkspace();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tchoseFolder() {\r\n\t\tlet win = remote.getCurrentWindow();\r\n\t\tlet options = {\r\n\t\t\ttitle: '选择文件夹',\r\n\t\t\tproperties: ['openDirectory', 'multiSelections'],\r\n\t\t};\r\n\t\treturn remote.dialog\r\n\t\t\t.showOpenDialog(win, options)\r\n\t\t\t.then(result => {\r\n\t\t\t\tlet results = [];\r\n\t\t\t\tif (!result.canceled && result.filePaths) {\r\n\t\t\t\t\tresult.filePaths.forEach(item => {\r\n\t\t\t\t\t\tresults.push(this.createRootDirItem(item));\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn results;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}\r\n\topenFile(fileObj, choseFile) {\r\n\t\tlet tab = fileObj && Util.getTabByPath(this.editorList, fileObj.path);\r\n\t\tif (!tab) {\r\n\t\t\tlet index = -1;\r\n\t\t\tif (this.editorList.length) {\r\n\t\t\t\ttab = Util.getTabById(this.editorList, globalData.nowEditorId);\r\n\t\t\t\tindex = this.editorList.indexOf(tab); //在当前活动标签之后新增\r\n\t\t\t}\r\n\t\t\tif (choseFile) {\r\n\t\t\t\t//从资源管理器中选择文件\r\n\t\t\t\tthis.choseFile().then(results => {\r\n\t\t\t\t\tif (results) {\r\n\t\t\t\t\t\tlet editorMap = this.getEditorMap();\r\n\t\t\t\t\t\tlet firstId = results[0].id;\r\n\t\t\t\t\t\t// 过滤已经打开过的文件\r\n\t\t\t\t\t\tresults = results.filter(item => {\r\n\t\t\t\t\t\t\treturn !editorMap[item.id];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (results.length) {\r\n\t\t\t\t\t\t\tlet editorList = this.editorList.slice(0, index).concat(results).concat(this.editorList.slice(index));\r\n\t\t\t\t\t\t\ttab = results[0];\r\n\t\t\t\t\t\t\tthis.editorList.empty();\r\n\t\t\t\t\t\t\tthis.editorList.push(...editorList);\r\n\t\t\t\t\t\t\tresults.forEach(item => {\r\n\t\t\t\t\t\t\t\tthis.watchFile(item.path);\r\n\t\t\t\t\t\t\t\tEventBus.$emit('git-status-start', item.path);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttab = editorMap[firstId];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_done.call(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif (fileObj) {\r\n\t\t\t\t\ttab = Object.assign({}, fileObj);\r\n\t\t\t\t\tif (fileObj.path) {\r\n\t\t\t\t\t\tthis.watchFile(fileObj.path);\r\n\t\t\t\t\t\tEventBus.$emit('git-status-start', fileObj.path);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttab = this.createEmptyTabItem();\r\n\t\t\t\t}\r\n\t\t\t\ttab.saved = true;\r\n\t\t\t\ttab.active = false;\r\n\t\t\t\tthis.editorList.splice(index + 1, 0, tab);\r\n\t\t\t\t_done.call(this);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t_done.call(this);\r\n\t\t}\r\n\r\n\t\tfunction _done() {\r\n\t\t\tif (tab && (tab.path || tab.tempPath) && !tab.loaded) {\r\n\t\t\t\tlet filePath = tab.tempPath || tab.path;\r\n\t\t\t\tif (fs.existsSync(filePath)) {\r\n\t\t\t\t\ttab.loaded = true;\r\n\t\t\t\t\tUtil.readFile(filePath).then(data => {\r\n\t\t\t\t\t\tcontexts[tab.id].reload(data);\r\n\t\t\t\t\t\tEventBus.$emit('file-opened', filePath);\r\n\t\t\t\t\t\tif (!tab.tempPath) {\r\n\t\t\t\t\t\t\tEventBus.$emit('file-saved', tab.path);\r\n\t\t\t\t\t\t\ttab.saved = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//点击搜索结果\r\n\t\t\t\t\t\tif (fileObj && fileObj.range) {\r\n\t\t\t\t\t\t\tglobalData.$mainWin.getEditor(tab.id).cursor.setCursorPos(Object.assign({}, fileObj.range.start));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttab.mtimeMs = fs.statSync(filePath).mtimeMs;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else if (fileObj && fileObj.range) {\r\n\t\t\t\tglobalData.$mainWin.getEditor(tab.id).cursor.setCursorPos(Object.assign({}, fileObj.range.start));\r\n\t\t\t}\r\n\t\t\tEventBus.$emit('editor-change', tab.id);\r\n\t\t\tEventBus.$emit('language-check');\r\n\t\t}\r\n\t}\r\n\tchoseFile() {\r\n\t\tlet win = remote.getCurrentWindow();\r\n\t\tlet options = {\r\n\t\t\ttitle: '选择文件',\r\n\t\t\tproperties: ['openFile', 'multiSelections'],\r\n\t\t};\r\n\t\treturn remote.dialog\r\n\t\t\t.showOpenDialog(win, options)\r\n\t\t\t.then(result => {\r\n\t\t\t\tlet results = [];\r\n\t\t\t\tif (!result.canceled && result.filePaths) {\r\n\t\t\t\t\tresult.filePaths.forEach(item => {\r\n\t\t\t\t\t\tlet obj = this.createTabItem(item);\r\n\t\t\t\t\t\tresults.push(obj);\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn results;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}\r\n\tsaveFile(id, saveAs) {\r\n\t\tlet tab = Util.getTabById(this.editorList, id);\r\n\t\tif (this.mode === 'web') {\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t\tif (!tab.saved || saveAs) {\r\n\t\t\tif (tab.path && !saveAs) {\r\n\t\t\t\treturn Util.writeFile(tab.path, contexts[id].getAllText()).then(() => {\r\n\t\t\t\t\ttab.saved = true;\r\n\t\t\t\t\ttab.mtimeMs = fs.statSync(tab.path).mtimeMs;\r\n\t\t\t\t\tEventBus.$emit('file-saved', tab.path);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tlet win = remote.getCurrentWindow();\r\n\t\t\t\tlet options = {\r\n\t\t\t\t\ttitle: '请选择要保存的文件名',\r\n\t\t\t\t\tbuttonLabel: '保存',\r\n\t\t\t\t};\r\n\t\t\t\treturn remote.dialog.showSaveDialog(win, options).then(result => {\r\n\t\t\t\t\tif (!result.canceled && result.filePath) {\r\n\t\t\t\t\t\treturn Util.writeFile(result.filePath, contexts[id].getAllText()).then(() => {\r\n\t\t\t\t\t\t\tif (!tab.path) {\r\n\t\t\t\t\t\t\t\ttab.path = result.filePath;\r\n\t\t\t\t\t\t\t\ttab.mtimeMs = fs.statSync(tab.path).mtimeMs;\r\n\t\t\t\t\t\t\t\ttab.name = tab.path.match(/[^\\\\\\/]+$/)[0];\r\n\t\t\t\t\t\t\t\ttab.saved = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn Promise.reject();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn Promise.resolve();\r\n\t}\r\n\topenWorkspace() {\r\n\t\tlet win = remote.getCurrentWindow();\r\n\t\tlet options = {\r\n\t\t\ttitle: '选择文件',\r\n\t\t\tproperties: ['openFile'],\r\n\t\t};\r\n\t\treturn remote.dialog\r\n\t\t\t.showOpenDialog(win, options)\r\n\t\t\t.then(result => {\r\n\t\t\t\tif (!result.canceled && result.filePaths) {\r\n\t\t\t\t\tlet workSpacePath = result.filePaths[0];\r\n\t\t\t\t\tUtil.loadJsonFile(workSpacePath).then(data => {\r\n\t\t\t\t\t\tlet folders = data.folders;\r\n\t\t\t\t\t\tlet exsitMap = {};\r\n\t\t\t\t\t\tglobalData.fileTree.forEach(item => {\r\n\t\t\t\t\t\t\texsitMap[item.path] = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfolders = folders.filter(item => {\r\n\t\t\t\t\t\t\treturn !exsitMap[item.path];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfolders = folders.map(item => {\r\n\t\t\t\t\t\t\treturn this.createRootDirItem(item.path);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tglobalData.fileTree.push(...folders);\r\n\t\t\t\t\t\tEventBus.$emit('workspace-opened');\r\n\t\t\t\t\t\tglobalData.workSpacePath = workSpacePath;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}\r\n\tsaveWorkspace(saveAs) {\r\n\t\tlet list = globalData.fileTree.map(item => {\r\n\t\t\treturn { path: item.path };\r\n\t\t});\r\n\t\tlet data = JSON.stringify({\r\n\t\t\tfolders: list,\r\n\t\t});\r\n\t\tif (saveAs) {\r\n\t\t\tlet win = remote.getCurrentWindow();\r\n\t\t\tlet options = {\r\n\t\t\t\ttitle: '请选择要保存的文件名',\r\n\t\t\t\tbuttonLabel: '保存',\r\n\t\t\t};\r\n\t\t\treturn remote.dialog.showSaveDialog(win, options).then(result => {\r\n\t\t\t\tif (!result.canceled && result.filePath) {\r\n\t\t\t\t\treturn Util.writeFile(result.filePath, data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else if (globalData.workSpacePath) {\r\n\t\t\treturn Util.writeFile(globalData.workSpacePath, data);\r\n\t\t}\r\n\t}\r\n\tcopyFileToClip(fileObj) {\r\n\t\tipcRenderer.send('file-copy', [fileObj.path]);\r\n\t}\r\n\tcutFileToClip(fileObj) {\r\n\t\tipcRenderer.send('file-cut', [fileObj.path]);\r\n\t}\r\n\tpasteFileFromClip(fileObj, cutPath) {\r\n\t\tipcRenderer.send('file-paste', fileObj.path, cutPath);\r\n\t}\r\n\tcreateRootDirItem(filePath) {\r\n\t\treturn {\r\n\t\t\tid: Util.getIdFromPath(filePath),\r\n\t\t\tname: filePath.match(/[^\\\\\\/]+$/)[0],\r\n\t\t\tpath: filePath,\r\n\t\t\tparentPath: '',\r\n\t\t\trelativePath: '',\r\n\t\t\trootPath: filePath,\r\n\t\t\ttype: 'dir',\r\n\t\t\tactive: false,\r\n\t\t\topen: false,\r\n\t\t\tdeep: 0,\r\n\t\t\tparent: null,\r\n\t\t\tchildren: [],\r\n\t\t};\r\n\t}\r\n\tcreateTabItem(filePath) {\r\n\t\tlet fileObj = Util.getFileItemByPath(globalData.fileTree, filePath);\r\n\t\tfileObj.sort((a, b) => {\r\n\t\t\treturn b.rootPath.length - a.rootPath.length;\r\n\t\t});\r\n\t\tfileObj = fileObj[0];\r\n\t\tif (fileObj) {\r\n\t\t\tfileObj = Object.assign({}, fileObj);\r\n\t\t\tfileObj.active = false;\r\n\t\t\tfileObj.saved = true;\r\n\t\t} else {\r\n\t\t\tlet icon = Util.getIconByPath({\r\n\t\t\t\tfilePath: filePath,\r\n\t\t\t\tfileType: 'file',\r\n\t\t\t});\r\n\t\t\ticon = icon ? `my-file-icon my-file-icon-${icon}` : '';\r\n\t\t\tfileObj = {\r\n\t\t\t\tid: Util.getIdFromPath(filePath),\r\n\t\t\t\tname: filePath.match(/[^\\\\\\/]+$/)[0],\r\n\t\t\t\tpath: filePath,\r\n\t\t\t\tparentPath: path.dirname(filePath),\r\n\t\t\t\trelativePath: '',\r\n\t\t\t\trootPath: '',\r\n\t\t\t\ticon: icon,\r\n\t\t\t\tactive: false,\r\n\t\t\t\tsaved: true,\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn fileObj;\r\n\t}\r\n\tcreateEmptyTabItem() {\r\n\t\tlet titleCount = this.titleCount++;\r\n\t\tlet icon = Util.getIconByPath({\r\n\t\t\tfilePath: '',\r\n\t\t\tfileType: 'file',\r\n\t\t});\r\n\t\ticon = icon ? `my-file-icon my-file-icon-${icon}` : '';\r\n\t\treturn {\r\n\t\t\tid: 'file-' + titleCount,\r\n\t\t\tname: 'Untitled' + titleCount,\r\n\t\t\tpath: '',\r\n\t\t\tparentPath: '',\r\n\t\t\trelativePath: '',\r\n\t\t\trootPath: '',\r\n\t\t\ticon: icon,\r\n\t\t\tactive: false,\r\n\t\t\tsaved: true,\r\n\t\t};\r\n\t}\r\n\twatchFile(filePath) {\r\n\t\tif (this.fileWatcherMap[filePath]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.fileWatcherMap[filePath] = fs.watch(filePath, { recursive: true }, event => {\r\n\t\t\tclearTimeout(this.fileWatcherTimer[filePath]);\r\n\t\t\tthis.fileWatcherTimer[filePath] = setTimeout(() => {\r\n\t\t\t\tlet tab = Util.getTabByPath(this.editorList, filePath);\r\n\t\t\t\tif (event === 'rename') {\r\n\t\t\t\t\tEventBus.$emit('file-renamed', {\r\n\t\t\t\t\t\tpath: filePath,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.fileWatcherMap[filePath].close();\r\n\t\t\t\t} else if (event === 'change') {\r\n\t\t\t\t\tlet stat = fs.statSync(filePath);\r\n\t\t\t\t\t// 文件改变后与当前打开内容不一致\r\n\t\t\t\t\tif (tab && tab.saved && tab.mtimeMs !== stat.mtimeMs) {\r\n\t\t\t\t\t\tUtil.readFile(filePath).then(text => {\r\n\t\t\t\t\t\t\tif (contexts[tab.id].getAllText() !== text.replace(/\\r\\n/g, '\\n')) {\r\n\t\t\t\t\t\t\t\tcontexts[tab.id].reload(text);\r\n\t\t\t\t\t\t\t\tEventBus.$emit('file-saved', tab.path);\r\n\t\t\t\t\t\t\t\ttab.active && EventBus.$emit('git-diff', tab.path);\r\n\t\t\t\t\t\t\t\ttab.saved = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 15);\r\n\t\t});\r\n\t}\r\n\tstopWatchFile(filePath) {\r\n\t\tif (this.fileWatcherMap[filePath]) {\r\n\t\t\tthis.fileWatcherMap[filePath].close();\r\n\t\t\tclearTimeout(this.fileWatcherTimer[filePath]);\r\n\t\t\tdelete this.fileWatcherMap[filePath];\r\n\t\t\tdelete this.fileWatcherTimer[filePath];\r\n\t\t}\r\n\t}\r\n\tgetEditorMap() {\r\n\t\tlet editorMap = {};\r\n\t\tthis.editorList.forEach(item => {\r\n\t\t\teditorMap[item.id] = item;\r\n\t\t});\r\n\t\treturn editorMap;\r\n\t}\r\n}\r\n","import EventBus from '@/event';\r\nimport globalData from '@/data/globalData';\r\nimport Util from '@/common/util';\r\n\r\nexport default class {\r\n\tconstructor() {\r\n\t\tthis.editorList = globalData.editorList;\r\n\t\tthis.init();\r\n\t}\r\n\tinit() {\r\n\t\tEventBus.$on('icon-changed', () => {\r\n\t\t\tthis.changeFileIcon();\r\n\t\t});\r\n\t\tEventBus.$on('theme-changed', () => {\r\n\t\t\tthis.changeFileIcon();\r\n\t\t});\r\n\t\tEventBus.$on('cmd-menu-theme-open', () => {\r\n\t\t\tconst cmdList = globalData.themes.map(item => {\r\n\t\t\t\treturn item.map(item => {\r\n\t\t\t\t\titem = Object.assign({ op: 'changeTheme' }, item);\r\n\t\t\t\t\titem.active = item.value === globalData.nowTheme.value;\r\n\t\t\t\t\titem.selected = item.active;\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tEventBus.$emit('cmd-menu-open', {\r\n\t\t\t\tcmdList: cmdList\r\n\t\t\t});\r\n\t\t});\r\n\t\tEventBus.$on('cmd-menu-icon-theme-open', () => {\r\n\t\t\tconst cmdList = globalData.iconThemes.map(item => {\r\n\t\t\t\titem = Object.assign({ op: 'changeIconTheme' }, item);\r\n\t\t\t\titem.active = item.value === globalData.nowIconTheme.value;\r\n\t\t\t\titem.selected = item.active;\r\n\t\t\t\treturn item;\r\n\t\t\t});\r\n\t\t\tcmdList.push({\r\n\t\t\t\tname: 'None',\r\n\t\t\t\tvalue: 'none',\r\n\t\t\t\top: 'changeIconTheme',\r\n\t\t\t\tactive: 'none' === globalData.nowIconTheme.value,\r\n\t\t\t\tselected: 'none' === globalData.nowIconTheme.value\r\n\t\t\t});\r\n\t\t\tEventBus.$emit('cmd-menu-open', {\r\n\t\t\t\tcmdList: cmdList\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tchangeFileIcon() {\r\n\t\tthis.editorList.forEach(item => {\r\n\t\t\tif (globalData.nowIconTheme.value) {\r\n\t\t\t\tlet icon = Util.getIconByPath({\r\n\t\t\t\t\tfilePath: item.path,\r\n\t\t\t\t\tfileType: 'file'\r\n\t\t\t\t});\r\n\t\t\t\titem.icon = icon ? `my-file-icon my-file-icon-${icon}` : '';\r\n\t\t\t} else {\r\n\t\t\t\titem.icon = '';\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.editorList.splice();\r\n\t}\r\n}\r\n","import EventBus from '@/event';\r\nimport globalData from '@/data/globalData';\r\nimport Util from '@/common/util';\r\nimport Ignore from 'ignore';\r\n\r\nconst child_process = window.require('child_process');\r\nconst path = window.require('path');\r\nconst fs = window.require('fs');\r\n\r\nexport default class {\r\n\tconstructor() {\r\n\t\tthis.cwd = '';\r\n\t\tthis.gitStatusTimer = {};\r\n\t\tthis.gitStautsMap = {};\r\n\t\tthis.gitDiffTimer = {};\r\n\t\tthis.init();\r\n\t\tthis.createStatusProcess();\r\n\t}\r\n\tinit() {\r\n\t\tEventBus.$on('git-status-start', filePath => {\r\n\t\t\tthis.watchFileStatus(filePath);\r\n\t\t});\r\n\t\tEventBus.$on('git-status-stop', filePath => {\r\n\t\t\tthis.stopWatchFileStatus(filePath);\r\n\t\t});\r\n\t\tEventBus.$on('git-ignore', filePath => {\r\n\t\t\tthis.parseGitIgnore(filePath);\r\n\t\t});\r\n\t\tEventBus.$on('window-close', () => {\r\n\t\t\ttry {\r\n\t\t\t\tthis.statusProcess && this.statusProcess.kill();\r\n\t\t\t} catch (e) { }\r\n\t\t});\r\n\t}\r\n\tparseGitIgnore(filePath) {\r\n\t\ttry {\r\n\t\t\tif (fs.existsSync(filePath) && fs.statSync(filePath).isFile()) {\r\n\t\t\t\tUtil.readFile(filePath).then(data => {\r\n\t\t\t\t\tlet lines = data.split(/\\r\\n|\\n/);\r\n\t\t\t\t\tlines = lines.filter(line => {\r\n\t\t\t\t\t\treturn line && !/^\\s*#/.test(line);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (lines.length) {\r\n\t\t\t\t\t\tlet ignore = Ignore();\r\n\t\t\t\t\t\tignore.add(lines);\r\n\t\t\t\t\t\tEventBus.$emit('git-ignored', {\r\n\t\t\t\t\t\t\tpath: filePath,\r\n\t\t\t\t\t\t\tignore: ignore\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t}\r\n\tcreateStatusProcess() {\r\n\t\tthis.statusProcess = child_process.fork(path.join(globalData.dirname, 'main/process/git/status.js'));\r\n\t\tthis.statusProcess.on('message', data => {\r\n\t\t\tthis.parseStatus(data);\r\n\t\t\tdata.paths.forEach(path => {\r\n\t\t\t\tEventBus.$emit('git-statused', { path });\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.statusProcess.on('close', () => {\r\n\t\t\tthis.createStatusProcess();\r\n\t\t});\r\n\t}\r\n\twatchFileStatus(filePath) {\r\n\t\tthis.statusProcess.send({\r\n\t\t\ttype: 'start',\r\n\t\t\tpath: filePath\r\n\t\t});\r\n\t}\r\n\tstopWatchFileStatus(filePath) {\r\n\t\tthis.statusProcess.send({ type: 'stop', path: filePath });\r\n\t\tdelete globalData.fileStatus[filePath];\r\n\t}\r\n\tparseStatus(data) {\r\n\t\tlet gitDir = data.gitDir;\r\n\t\tlet results = data.results;\r\n\t\tlet statusMap = {};\r\n\t\tlet dirStatus = [];\r\n\t\tglobalData.fileStatus[gitDir] = statusMap;\r\n\t\tglobalData.dirStatus[gitDir] = dirStatus;\r\n\t\tresults.forEach(item => {\r\n\t\t\tlet parentPath = path.dirname(item.path);\r\n\t\t\tstatusMap[item.path] = item.status;\r\n\t\t\twhile (parentPath.length >= gitDir.length) {\r\n\t\t\t\tif (statusMap[parentPath]) {\r\n\t\t\t\t\tlet statusLevel1 = Util.getStatusLevel(item.status);\r\n\t\t\t\t\tlet statusLevel2 = Util.getStatusLevel(statusMap[parentPath]);\r\n\t\t\t\t\tif (statusLevel1 > statusLevel2) {\r\n\t\t\t\t\t\tstatusMap[parentPath] = item.status;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstatusMap[parentPath] = item.status;\r\n\t\t\t\t}\r\n\t\t\t\tparentPath = path.dirname(parentPath);\r\n\t\t\t}\r\n\t\t\tif (item.path[item.path.length - 1] === path.sep) {\r\n\t\t\t\tdirStatus.push({ path: item.path.slice(0, -1), status: item.status });\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n","import TerminalEvent from './terminal';\r\nimport EditorEvent from './editor';\r\nimport FileEvent from './file';\r\nimport ThemeEvent from './theme';\r\nimport GitEvent from './git';\r\n\r\nexport default class {\r\n\tconstructor() {\r\n\t\tthis.init();\r\n\t}\r\n\tinit() {\r\n\t\tthis.terminalEvent = new TerminalEvent();\r\n\t\tthis.editorEvent = new EditorEvent();\r\n\t\tthis.fileEvent = new FileEvent();\r\n\t\tthis.themeEvent = new ThemeEvent();\r\n\t\tthis.gitEvent = new GitEvent();\r\n\t}\r\n}\r\n","/*\n * @Author: lisong\n * @Date: 2022-02-18 16:13:15\n * @Description:\n */\nimport Util from '@/common/util';\nimport EventBus from '@/event';\nimport globalData from '@/data/globalData';\n\nconst remote = window.require('@electron/remote');\n\nexport default class {\n\tconstructor() { }\n\tonKeydown(e) {\n\t\tif (e.ctrlKey) {\n\t\t\tif (e.shiftKey) {\n\t\t\t\tswitch (e.code) {\n\t\t\t\t\tcase 'KeyS':\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tEventBus.$emit('file-save-as', { id: globalData.nowEditorId });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'KeyL':\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tEventBus.$emit('sidebar-toggle');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'KeyB':\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tEventBus.$emit('statusbar-toggle');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'KeyM':\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tEventBus.$emit('minimap-toggle');\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tswitch (e.code) {\n\t\t\t\t\tcase 'Equal':\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tglobalData.zoomLevel += 0.5;\n\t\t\t\t\t\tremote.getCurrentWindow().webContents.setZoomLevel(globalData.zoomLevel);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Minus':\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tglobalData.zoomLevel -= 0.5;\n\t\t\t\t\t\tremote.getCurrentWindow().webContents.setZoomLevel(globalData.zoomLevel);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'KeyS':\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tEventBus.$emit('file-save', { id: globalData.nowEditorId });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'KeyG': //ctrl+g，跳转\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tEventBus.$emit('menu-close');\n\t\t\t\t\t\tEventBus.$emit('cmd-search-open', { input: ':' });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'KeyP': //ctrl+p，命令面板\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tEventBus.$emit('menu-close');\n\t\t\t\t\t\tEventBus.$emit('cmd-search-open');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Backquote': //ctrl+`\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tEventBus.$emit('terminal-toggle');\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import Util from '../../common/util';\r\nimport globalData from '../../data/globalData';\r\nimport EventBus from '@/event';\r\nimport Context from '@/module/context/index';\r\n\r\nconst fs = window.require('fs');\r\nconst path = window.require('path');\r\nconst contexts = Context.contexts;\r\n\r\nexport default class {\r\n\tconstructor() {\r\n\t\tthis.storeTabDataTimer = {};\r\n\t\tEventBus.$on('window-close', () => {\r\n\t\t\tthis.storeData();\r\n\t\t});\r\n\t}\r\n\tstoreData() {\r\n\t\tthis.storeGlobalData();\r\n\t\tthis.storeFileTree();\r\n\t\tthis.storeTabData();\r\n\t\tthis.storeTerminalTabData();\r\n\t\tthis.storeTempData();\r\n\t}\r\n\tstoreGlobalData() {\r\n\t\tlet data = {\r\n\t\t\tnowTheme: globalData.nowTheme,\r\n\t\t\tnowIconTheme: globalData.nowIconTheme,\r\n\t\t\tviews: globalData.views\r\n\t\t};\r\n\t\tUtil.writeFileSync(globalData.configPath, JSON.stringify(data));\r\n\t}\r\n\tstoreFileTree() {\r\n\t\tlet openedFileList = globalData.openedFileList;\r\n\t\tlet results = [];\r\n\t\tfor (let i = 0; i < openedFileList.length; i++) {\r\n\t\t\tlet item = openedFileList[i];\r\n\t\t\tif (item.type === 'dir' && (item.open || !item.parentPath)) {\r\n\t\t\t\tresults.push({\r\n\t\t\t\t\tpath: item.path,\r\n\t\t\t\t\tparentPath: item.parentPath,\r\n\t\t\t\t\trootPath: item.rootPath,\r\n\t\t\t\t\topen: item.open,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tUtil.writeFileSync(globalData.fileTreePath, JSON.stringify(results));\r\n\t}\r\n\tloadFileTree() {\r\n\t\tif (fs.existsSync(globalData.fileTreePath)) {\r\n\t\t\tUtil.loadJsonFile(globalData.fileTreePath).then(data => {\r\n\t\t\t\tdata = data || [];\r\n\t\t\t\tEventBus.$emit('file-tree-loaded', data);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tEventBus.$emit('file-tree-loaded', []);\r\n\t\t}\r\n\t}\r\n\tstoreTabData() {\r\n\t\tlet data = globalData.editorList.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\tid: item.id,\r\n\t\t\t\tname: item.name,\r\n\t\t\t\tpath: item.path,\r\n\t\t\t\ttempPath: (!item.saved && path.join(globalData.cachePath, item.id)) || '',\r\n\t\t\t\tactive: item.active,\r\n\t\t\t\tsaved: item.saved,\r\n\t\t\t};\r\n\t\t});\r\n\t\tUtil.writeFileSync(globalData.tabPath, JSON.stringify(data));\r\n\t}\r\n\tloadTabData() {\r\n\t\tif (fs.existsSync(globalData.tabPath)) {\r\n\t\t\tUtil.loadJsonFile(globalData.tabPath).then(data => {\r\n\t\t\t\tif (data && data.length) {\r\n\t\t\t\t\tEventBus.$emit('editor-loaded', data);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tstoreTerminalTabData() {\r\n\t\tlet data = globalData.terminalList.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\tid: item.id,\r\n\t\t\t\tname: item.name,\r\n\t\t\t\tpath: item.path,\r\n\t\t\t\tactive: item.active,\r\n\t\t\t};\r\n\t\t});\r\n\t\tUtil.writeFileSync(globalData.terminalTabPath, JSON.stringify(data));\r\n\t}\r\n\tloadTerminalTabData() {\r\n\t\tif (fs.existsSync(globalData.terminalTabPath)) {\r\n\t\t\tUtil.loadJsonFile(globalData.terminalTabPath).then(data => {\r\n\t\t\t\tif (data && data.length) {\r\n\t\t\t\t\tEventBus.$emit('terminal-loaded', data);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tstoreTempData() {\r\n\t\tglobalData.editorList.forEach(item => {\r\n\t\t\tif (!item.saved && !item.tempSaved) {\r\n\t\t\t\tUtil.writeFileSync(path.join(globalData.cachePath, item.id), contexts[item.id].getAllText());\r\n\t\t\t\titem.tempSaved = true;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tstoreTempDataById(id) {\r\n\t\tlet tab = Util.getTabById(globalData.editorList, id);\r\n\t\tif (tab) {\r\n\t\t\ttab.tempSaved = false;\r\n\t\t\tclearTimeout(this.storeTabDataTimer[id]);\r\n\t\t\tthis.storeTabDataTimer[id] = setTimeout(() => {\r\n\t\t\t\tlet tab = Util.getTabById(globalData.editorList, id);\r\n\t\t\t\tif (tab && !tab.saved && !tab.tempSaved) {\r\n\t\t\t\t\tUtil.writeFile(path.join(globalData.cachePath, id), contexts[id].getAllText()).then(() => {\r\n\t\t\t\t\t\ttab.tempSaved = true;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}, 5000);\r\n\t\t}\r\n\t}\r\n}\r\n","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div\r\n\t\t:class=\"{ 'my-theme-dark': themeType === 'dark', 'my-theme-light': themeType === 'light' }\"\r\n\t\t:style=\"{ 'padding-top': _topBarHeight, 'padding-bottom': _statusHeight }\"\r\n\t\t@contextmenu.prevent.stop\r\n\t\t@mousedown=\"onWindMouseDown\"\r\n\t\tclass=\"my-window\"\r\n\t\tref=\"window\"\r\n\t>\r\n\t\t<div :style=\"{ width: leftWidth + 'px' }\" class=\"my-left-warp\" v-show=\"sidebarVisible\">\r\n\t\t\t<!-- 侧边栏 -->\r\n\t\t\t<activity-bar ref=\"activityBar\"></activity-bar>\r\n\t\t\t<div style=\"flex-grow:1\">\r\n\t\t\t\t<side-bar ref=\"sideBar\" v-show=\"activity === 'files'\"></side-bar>\r\n\t\t\t\t<file-content-search v-show=\"activity === 'search'\"></file-content-search>\r\n\t\t\t</div>\r\n\t\t\t<div @mousedown=\"onLeftSashBegin\" class=\"my-sash-v\" style=\"position:absolute;right:-4px\"></div>\r\n\t\t</div>\r\n\t\t<div class=\"my-right-wrap\" ref=\"rightWrap\">\r\n\t\t\t<!-- tab栏 -->\r\n\t\t\t<editor-bar :editorList=\"editorList\" v-show=\"editorList.length\"></editor-bar>\r\n\t\t\t<!-- 编辑区 -->\r\n\t\t\t<div class=\"my-editor-groups\">\r\n\t\t\t\t<template v-for=\"item in editorList\">\r\n\t\t\t\t\t<editor :active=\"item.active\" :key=\"item.id\" :ref=\"'editor' + item.id\" :tab-data=\"item\" v-show=\"item.active\"></editor>\r\n\t\t\t\t</template>\r\n\t\t\t</div>\r\n\t\t\t<template v-if=\"terminalVisible && terminalList.length\">\r\n\t\t\t\t<div @mousedown=\"onTerminalSashBegin\" class=\"my-sash-h\"></div>\r\n\t\t\t\t<!-- tab栏 -->\r\n\t\t\t\t<div :style=\"{height: terminalHeight+'px'}\" class=\"my-terminal-groups\">\r\n\t\t\t\t\t<terminal-bar :terminalList=\"terminalList\"></terminal-bar>\r\n\t\t\t\t\t<template v-for=\"item in terminalList\">\r\n\t\t\t\t\t\t<terminal :active=\"item.active\" :id=\"item.id\" :key=\"item.id\" :path=\"item.path\" :ref=\"'terminal' + item.id\" v-show=\"item.active\"></terminal>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</div>\r\n\t\t\t</template>\r\n\t\t</div>\r\n\t\t<!-- 顶部菜单栏 -->\r\n\t\t<title-bar :height=\"topBarHeight\" ref=\"titleBar\"></title-bar>\r\n\t\t<!-- 状态栏 -->\r\n\t\t<status-bar :height=\"statusHeight\" ref=\"statusBar\" v-show=\"statusbarVisible\"></status-bar>\r\n\t\t<cmd-panel></cmd-panel>\r\n\t\t<Dialog :btns=\"dialogBtns\" :content=\"dialogContent\" :icon=\"this.dialogIcon\" :icon-color=\"this.dialogIconColor\" :overlay=\"true\" :title=\"dialogTilte\" @close=\"closeDialog\" v-show=\"dialogVisible\"></Dialog>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport Editor from './Editor.vue';\r\nimport EditorBar from './EditorBar.vue';\r\nimport TitleBar from './TitleBar';\r\nimport StatusBar from './StatusBar';\r\nimport SideBar from './SideBar.vue';\r\nimport ActivityBar from './ActivityBar.vue';\r\nimport FileContentSearch from './FileContentSearch.vue';\r\nimport Dialog from './Dialog.vue';\r\nimport CmdPanel from './CmdPanel.vue';\r\nimport Terminal from './Terminal.vue';\r\nimport TerminalBar from './TerminalBar.vue';\r\nimport Context from '@/module/context/index';\r\nimport Theme from '@/module/theme';\r\nimport EventBus from '@/event';\r\nimport Util from '@/common/util';\r\nimport CommonEvent from '@/events';\r\nimport WinShorcut from '@/module/shortcut/window';\r\nimport Persistence from '@/module/persistence';\r\nimport $ from 'jquery';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst fs = window.require('fs');\r\nconst path = window.require('path');\r\nconst remote = window.require('@electron/remote');\r\nconst contexts = Context.contexts;\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\tEditor,\r\n\t\tEditorBar,\r\n\t\tTitleBar,\r\n\t\tStatusBar,\r\n\t\tActivityBar,\r\n\t\tFileContentSearch,\r\n\t\tSideBar,\r\n\t\tDialog,\r\n\t\tCmdPanel,\r\n\t\tTerminal,\r\n\t\tTerminalBar,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\textensionsPath: path.join(globalData.dirname, 'main/extensions'),\r\n\t\t\tstatusHeight: 30,\r\n\t\t\ttopBarHeight: 35,\r\n\t\t\teditorList: globalData.editorList,\r\n\t\t\tterminalList: globalData.terminalList,\r\n\t\t\tdialogVisible: false,\r\n\t\t\tdialogTilte: '',\r\n\t\t\tdialogContent: '',\r\n\t\t\tdialogBtns: [],\r\n\t\t\tdialogIcon: '',\r\n\t\t\tdialogIconColor: '',\r\n\t\t\tterminalVisible: globalData.views.terminal,\r\n\t\t\tsidebarVisible: globalData.views.sidebar,\r\n\t\t\tstatusbarVisible: globalData.views.statusbar,\r\n\t\t\tterminalHeight: 260,\r\n\t\t\tthemeType: 'dark',\r\n\t\t\tactivity: 'files',\r\n\t\t\tleftWidth: 400,\r\n\t\t\tmode: remote ? 'app' : 'mode',\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t_topBarHeight() {\r\n\t\t\treturn this.topBarHeight + 'px';\r\n\t\t},\r\n\t\t_statusHeight() {\r\n\t\t\tif (this.statusbarVisible) {\r\n\t\t\t\treturn this.statusHeight + 'px';\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tprovide() {\r\n\t\treturn {\r\n\t\t\tgetNowEditor: () => {\r\n\t\t\t\treturn this.getNowEditor();\r\n\t\t\t},\r\n\t\t\tgetNowContext: () => {\r\n\t\t\t\treturn this.getNowContext();\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tconst currentWindow = remote.getCurrentWindow();\r\n\t\tconst size = remote.screen.getPrimaryDisplay().size;\r\n\t\twindow.globalData = globalData;\r\n\t\tglobalData.$mainWin = this;\r\n\t\tthis.commonEvent = new CommonEvent(this);\r\n\t\tthis.winShorcut = new WinShorcut(this);\r\n\t\tthis.persistence = new Persistence();\r\n\t\tthis.initEvent();\r\n\t\tthis.initEventBus();\r\n\t\tthis.persistence.loadFileTree();\r\n\t\tthis.persistence.loadTabData();\r\n\t\tthis.persistence.loadTerminalTabData();\r\n\t\tcurrentWindow.on('blur', () => {\r\n\t\t\tEventBus.$emit('close-menu');\r\n\t\t});\r\n\t\tcurrentWindow.on('close', (e) => {\r\n\t\t\tthis.closeMain = true;\r\n\t\t});\r\n\t\twindow.onbeforeunload = (e) => {\r\n\t\t\tif (!this.preCloseDone) {\r\n\t\t\t\tEventBus.$emit('window-close');\r\n\t\t\t\te.returnValue = false;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.preCloseDone = true;\r\n\t\t\t\t\tif (this.closeMain) {\r\n\t\t\t\t\t\tcurrentWindow.close();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcurrentWindow.reload();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 0);\r\n\t\t\t}\r\n\t\t};\r\n\t\t// 大尺寸屏幕上，放大显示比例\r\n\t\t// if (size.width > 1400) {\r\n\t\t// \tglobalData.zoomLevel = 0.5;\r\n\t\t// }\r\n\t\tremote.getCurrentWindow().webContents.setZoomLevel(globalData.zoomLevel);\r\n\t},\r\n\tmounted() {\r\n\t\twindow.test = this;\r\n\t\tconst theme = new Theme();\r\n\t\ttheme.loadTheme(globalData.nowTheme);\r\n\t\tthis.loadExtensions().then((result) => {\r\n\t\t\tlet langeuages = result.languages;\r\n\t\t\tlet themes = result.themes;\r\n\t\t\tlet iconThemes = result.iconThemes;\r\n\t\t\tlet scopeFileList = result.scopeFileList;\r\n\t\t\tlangeuages.push({ name: 'Plain Text', value: '', checked: true });\r\n\t\t\tglobalData.languageList.empty().push(...langeuages);\r\n\t\t\tglobalData.scopeFileList.empty().push(...scopeFileList);\r\n\t\t\tglobalData.themes.empty().push(...themes);\r\n\t\t\tglobalData.iconThemes.empty().push(...iconThemes);\r\n\t\t\ttheme.loadIconTheme(globalData.nowIconTheme); // loadIconTheme需要用到globalData.languageList\r\n\t\t\tEventBus.$emit('language-check');\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\tinitEvent() {\r\n\t\t\t$(document)\r\n\t\t\t\t.on('mousemove', (e) => {\r\n\t\t\t\t\tif (this.leftSashMouseObj) {\r\n\t\t\t\t\t\tlet width = (this.leftWidth += e.clientX - this.leftSashMouseObj.clientX);\r\n\t\t\t\t\t\twidth = width > 50 ? width : 50;\r\n\t\t\t\t\t\tthis.leftWidth = width;\r\n\t\t\t\t\t\tthis.leftSashMouseObj = e;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.terminaSashMouseObj) {\r\n\t\t\t\t\t\tlet height = (this.terminalHeight -= e.clientY - this.terminaSashMouseObj.clientY);\r\n\t\t\t\t\t\theight = height > 0 ? height : 0;\r\n\t\t\t\t\t\tthis.terminalHeight = height;\r\n\t\t\t\t\t\tthis.terminaSashMouseObj = e;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.on('mouseup', (e) => {\r\n\t\t\t\t\tthis.leftSashMouseObj = null;\r\n\t\t\t\t\tthis.terminaSashMouseObj = null;\r\n\t\t\t\t})\r\n\t\t\t\t.on('keydown', (e) => {\r\n\t\t\t\t\tthis.winShorcut.onKeydown(e);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tinitEventBus() {\r\n\t\t\tEventBus.$on('theme-changed', (value) => {\r\n\t\t\t\tthis.themeType = globalData.nowTheme.type;\r\n\t\t\t});\r\n\t\t\tEventBus.$on('activity-change', (activity) => {\r\n\t\t\t\tthis.activity = activity;\r\n\t\t\t});\r\n\t\t\tEventBus.$on('terminal-toggle', () => {\r\n\t\t\t\tthis.terminalVisible = !this.terminalVisible;\r\n\t\t\t\tif (this.terminalVisible && !this.terminalList.length) {\r\n\t\t\t\t\tEventBus.$emit('terminal-new');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tEventBus.$on('sidebar-toggle', () => {\r\n\t\t\t\tthis.sidebarVisible = !this.sidebarVisible;\r\n\t\t\t});\r\n\t\t\tEventBus.$on('statusbar-toggle', () => {\r\n\t\t\t\tthis.statusbarVisible = !this.statusbarVisible;\r\n\t\t\t});\r\n\t\t\tEventBus.$on('dialog-show', (option) => {\r\n\t\t\t\tthis.showDialog(option);\r\n\t\t\t});\r\n\t\t\tEventBus.$on('dialog-close', () => {\r\n\t\t\t\tthis.closeDialog();\r\n\t\t\t});\r\n\t\t\tEventBus.$on('editor-changed', (data) => {\r\n\t\t\t\tif (!data || data.id !== this.nowEditorId) {\r\n\t\t\t\t\tthis.diffVisible = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tEventBus.$on('editor-content-change', (data) => {\r\n\t\t\t\t// 保存修改过的内存到缓存\r\n\t\t\t\tthis.persistence.storeTempDataById(data.id);\r\n\t\t\t});\r\n\t\t},\r\n\t\tonLeftSashBegin(e) {\r\n\t\t\tthis.leftSashMouseObj = e;\r\n\t\t},\r\n\t\tonTerminalSashBegin(e) {\r\n\t\t\tthis.terminaSashMouseObj = e;\r\n\t\t},\r\n\t\t// 点击编辑器\r\n\t\tonWindMouseDown() {\r\n\t\t\tEventBus.$emit('close-menu');\r\n\t\t},\r\n\t\tshowDialog(option) {\r\n\t\t\tthis.dialogTilte = option.title || '';\r\n\t\t\tthis.dialogContent = option.content || '';\r\n\t\t\tthis.dialogBtns = option.btns;\r\n\t\t\tthis.dialogVisible = true;\r\n\t\t\tthis.dialogIconColor = option.iconColor || '';\r\n\t\t\tthis.dialogIcon = option.icon || '';\r\n\t\t},\r\n\t\tcloseDialog() {\r\n\t\t\tthis.dialogVisible = false;\r\n\t\t},\r\n\t\tonCloseDiff() {\r\n\t\t\tthis.diffVisible = false;\r\n\t\t},\r\n\t\t// 加载语言支持\r\n\t\tloadExtensions() {\r\n\t\t\tlet languages = [];\r\n\t\t\tlet scopeFileList = [];\r\n\t\t\tlet themes = [[], [], [], []];\r\n\t\t\tlet iconThemes = [];\r\n\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t// 异步读取目录内容\r\n\t\t\t\tfs.readdir(this.extensionsPath, { encoding: 'utf8' }, (err, files) => {\r\n\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\tthrow err;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst promises = [];\r\n\t\t\t\t\tfiles.forEach((item, index) => {\r\n\t\t\t\t\t\tlet fullPath = path.join(this.extensionsPath, item);\r\n\t\t\t\t\t\tlet packPath = path.join(fullPath, './package.json');\r\n\t\t\t\t\t\tlet varConfigPath = path.join(fullPath, './package.nls.json');\r\n\t\t\t\t\t\tif (fs.existsSync(varConfigPath)) {\r\n\t\t\t\t\t\t\tpromises.push(\r\n\t\t\t\t\t\t\t\t_readVarFile(varConfigPath).then((varMap) => {\r\n\t\t\t\t\t\t\t\t\treturn _readConfigFile(packPath, fullPath, varMap);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else if (fs.existsSync(packPath)) {\r\n\t\t\t\t\t\t\tpromises.push(_readConfigFile(packPath, fullPath));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tPromise.all(promises).then(() => {\r\n\t\t\t\t\t\tthemes = themes.filter((item) => {\r\n\t\t\t\t\t\t\treturn item.length;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t\tlanguages: languages,\r\n\t\t\t\t\t\t\tscopeFileList: scopeFileList,\r\n\t\t\t\t\t\t\tthemes: themes,\r\n\t\t\t\t\t\t\ticonThemes: iconThemes,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tfunction _readVarFile(varConfigPath) {\r\n\t\t\t\treturn Util.loadJsonFile(varConfigPath);\r\n\t\t\t}\r\n\r\n\t\t\tfunction _readConfigFile(packPath, fullPath, varMap) {\r\n\t\t\t\treturn Util.loadJsonFile(packPath).then((data) => {\r\n\t\t\t\t\tlet contributes = data.contributes;\r\n\t\t\t\t\t_addLanguage(contributes, fullPath, varMap);\r\n\t\t\t\t\t_addTheme(contributes, fullPath, varMap);\r\n\t\t\t\t\t_addIconTheme(contributes, fullPath, varMap);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction _addLanguage(contributes, fullPath) {\r\n\t\t\t\tlet grammars = contributes.grammars;\r\n\t\t\t\tlet list = contributes.languages || [];\r\n\t\t\t\tlist.map((language) => {\r\n\t\t\t\t\tfor (let i = 0; i < grammars.length; i++) {\r\n\t\t\t\t\t\tlet grammar = grammars[i];\r\n\t\t\t\t\t\tscopeFileList.push({\r\n\t\t\t\t\t\t\tscopeName: grammar.scopeName,\r\n\t\t\t\t\t\t\tpath: path.join(fullPath, grammar.path),\r\n\t\t\t\t\t\t\tconfigPath: language.configuration ? path.join(fullPath, language.configuration) : '',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (language.id === grammar.language) {\r\n\t\t\t\t\t\t\tlet name = language.aliases && language.aliases[0];\r\n\t\t\t\t\t\t\tname = name || grammar.language;\r\n\t\t\t\t\t\t\tlanguages.push({\r\n\t\t\t\t\t\t\t\tname: name,\r\n\t\t\t\t\t\t\t\tvalue: grammar.language,\r\n\t\t\t\t\t\t\t\tlanguage: grammar.language,\r\n\t\t\t\t\t\t\t\tscopeName: grammar.scopeName,\r\n\t\t\t\t\t\t\t\tpath: path.join(fullPath, grammar.path),\r\n\t\t\t\t\t\t\t\tconfigPath: language.configuration ? path.join(fullPath, language.configuration) : '',\r\n\t\t\t\t\t\t\t\textensions: language.extensions,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction _addTheme(contributes, fullPath, varMap) {\r\n\t\t\t\tlet list = contributes.themes || [];\r\n\t\t\t\tlist.map((theme) => {\r\n\t\t\t\t\tlet type = 'light';\r\n\t\t\t\t\tlet index = 0;\r\n\t\t\t\t\tlet label = _getValue(theme.label, varMap);\r\n\t\t\t\t\tswitch (theme.uiTheme) {\r\n\t\t\t\t\t\tcase 'vs-dark':\r\n\t\t\t\t\t\t\ttype = 'dark';\r\n\t\t\t\t\t\t\tindex = 1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'hc-light':\r\n\t\t\t\t\t\t\ttype = 'contrast light';\r\n\t\t\t\t\t\t\tindex = 2;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'hc-black':\r\n\t\t\t\t\t\t\ttype = 'contrast dark';\r\n\t\t\t\t\t\t\tindex = 3;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthemes[index].push({\r\n\t\t\t\t\t\tname: theme.id || label,\r\n\t\t\t\t\t\tvalue: label || theme.id,\r\n\t\t\t\t\t\ttype: type,\r\n\t\t\t\t\t\tpath: path.join(fullPath, theme.path),\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction _addIconTheme(contributes, fullPath, varMap) {\r\n\t\t\t\tlet list = contributes.iconThemes || [];\r\n\t\t\t\tlist.map((theme) => {\r\n\t\t\t\t\tlet label = _getValue(theme.label, varMap);\r\n\t\t\t\t\ticonThemes.push({\r\n\t\t\t\t\t\tname: label || theme.id,\r\n\t\t\t\t\t\tvalue: theme.id || label,\r\n\t\t\t\t\t\tpath: path.join(fullPath, theme.path),\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction _getValue(name, varMap) {\r\n\t\t\t\tname = name || '';\r\n\t\t\t\tif (name[0] === '%' && name[name.length - 1] === '%') {\r\n\t\t\t\t\tname = varMap[name.slice(1, -1)] || name;\r\n\t\t\t\t}\r\n\t\t\t\treturn name;\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetTabById(id) {\r\n\t\t\tfor (let i = 0; i < this.editorList.length; i++) {\r\n\t\t\t\tif (this.editorList[i].id === id) {\r\n\t\t\t\t\treturn this.editorList[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetEditor(id) {\r\n\t\t\tlet editor = this.$refs[`editor${id}`];\r\n\t\t\treturn editor && editor[0];\r\n\t\t},\r\n\t\tgetNowEditor() {\r\n\t\t\treturn this.getEditor(globalData.nowEditorId);\r\n\t\t},\r\n\t\tgetContext(id) {\r\n\t\t\treturn contexts[id];\r\n\t\t},\r\n\t\tgetNowContext() {\r\n\t\t\treturn this.getContext(globalData.nowEditorId);\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Window.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Window.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Window.vue?vue&type=template&id=172d0a64&\"\nimport script from \"./Window.vue?vue&type=script&lang=js&\"\nexport * from \"./Window.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div id=\"app\">\r\n        <Window></Window>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Window from './components/Window.vue';\r\nexport default {\r\n    name: 'App',\r\n    components: {\r\n        Window,\r\n    },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=34237f10&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\nimport App from './App.vue';\r\nimport axios from 'axios';\r\nimport 'xterm/css/xterm.css';\r\nimport './scss/index.scss';\r\n\r\nwindow.require = window.require || function () {};\r\n\r\nVue.config.productionTip = false;\r\nVue.prototype.$http = axios.create({\r\n\ttimeout: 1000 * 30,\r\n\twithCredentials: true,\r\n\theaders: {\r\n\t\t'Content-Type': 'application/json; charset=utf-8',\r\n\t},\r\n});\r\n\r\nnew Vue({\r\n\trender: h => h(App),\r\n}).$mount('#app');","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmy_editor\"] = self[\"webpackChunkmy_editor\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(697); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","attrs","staticRenderFns","ref","staticClass","class","themeType","style","_topBarHeight","_statusHeight","on","$event","preventDefault","stopPropagation","onWindMouseDown","directives","name","rawName","value","sidebarVisible","expression","width","leftWidth","staticStyle","activity","onLeftSashBegin","editorList","length","_l","item","active","key","id","refInFor","terminalVisible","terminalList","onTerminalSashBegin","height","terminalHeight","path","_e","topBarHeight","statusbarVisible","statusHeight","dialogVisible","dialogBtns","dialogContent","dialogIcon","dialogIconColor","dialogTilte","closeDialog","onContextmenu","apply","arguments","showScrollBar","hideScrollBar","onWheel","_v","_s","diffObj","maxLine","_maxContentHeight","top","_top","renderNums","numItem","nowCursorPos","line","num","_num","fold","onToggleFold","type","diffType","onShowDiff","onScroll","_contentMinWidth","left","_left","onContentMdown","onContentMLeave","onContentMmove","onSelectend","renderObjs","_diffBg","_lineId","bgClass","domProps","html","renderCursorObjs","posList","pos","_lineHeight","visibility","_cursorVisible","renderSelectionObjs","range","isFsearch","activeLineBg","_activeLineTop","_bracketStartVisible","_bracketStartStyle","_bracketEndVisible","_bracketEndStyle","_tabLines","tabNum","autoTipList","autoTipStyle","onClickAuto","_textAreaPos","onBlur","onCompositionend","onCompositionstart","onCopy","onCut","onFocus","onInput","onKeydown","onPaste","scrollVisible","scrollLeft","onHBarScroll","_leftShadow","_rightShadow","searchVisible","searchCount","searchNow","onCloseSearch","onSearchNext","onSearchPrev","replace","replaceAll","onSearch","minimapVisible","contentHeight","startLine","scrollTop","onVBarScroll","tipContent","tipStyle","diffVisible","diffTop","diffHeight","tabData","onCloseDiff","toShowdiffObj","diffTabData","onDiffBottomSashBegin","fs","window","require","fse","Util","clipboardData","Promise","resolve","getData","navigator","clipboard","readText","text","setData","writeText","String","regex","r","exec","Number","tabSize","val","tmp","arr","sort","arg1","arg2","cb","delay","timer","clearTimeout","setTimeout","wrap","template","str1","str2","id1","getUUID","id2","$tempDom1","$","$tempDom2","append","charWidth","scrollWidth","charHight","clientHeight","fontSize","getComputedStyle","currentStyle","fullAngleCharWidth","remove","str","charW","fullCharW","start","end","substr","substring","match","FULL_ANGLE_REG","getStrExactWidth","count","$tempDom","_splitStr","dom","clientWidth","Math","floor","result","i","column","push","htmlTrans","slice","join","space","cont","targetObj","originObj","noDeepKeys","_assign","Map","assigned","indexOf","RegExp","nodeName","nodeType","has","get","Array","set","obj1","obj2","JSON","stringify","fun","funStr","toString","blob","Blob","url","URL","createObjectURL","worker","Worker","target","context","properties","forEach","property","bind","Object","defineProperties","reject","readFile","encoding","error","data","ensureFile","then","writeFile","ensureFileSync","writeFileSync","fullPath","stripJsonComments","parse","readFileSync","filePath","existsSync","dirname","word","fullMatch","wordMap","towMap","wordLength","score","preFinedChar","preFinedOriginChar","preFinded","targetMap","indexs","_target","toLowerCase","_setMap","originChar","char","_humpCheck","_complete","fuzzyMatch","cache","preChar","keys","preCode","charCodeAt","charCode","len","random","languageList","language","scopeName","wordPattern","globalData","defaultWordPattern","getLanguageById","_wordPattern","sourceWordMap","pattern","fileType","opened","isRoot","fileName","suffix1","suffix2","iconData","nowIconData","themType","nowTheme","light","folderNamesExpanded","rootFolderExpanded","folderExpanded","folderNames","rootFolder","folder","fileNames","fileExtensions","file","extensions","ext","mtimeMs","stat","statSync","dev","ino","e","fileTree","rootPath","results","_findItem","startsWith","parentItem","list","children","gitDir","fileStatus","status","originStatus","statusColor","getStatus","dirStatus","getFileStatusColor","statusMap","level","STATUS_LEVEMAP","menuEl","areaEl","menuWidth","menuHeight","menuPos","$menu","$parent","parent","$area","offset","parentOffset","clientY","clientX","index","_index","prototype","peek","empty","splice","insert","right","mid","KEYCODE","DELETE","BACKSPACE","HISTORY_COMMAND","INSERT","MOVEUP","MOVEDOWN","COPY_UP","COPY_DOWN","DELETE_COPY_UP","DELETE_COPY_DOWN","REPLACE","INSERT_LINE","DELETE_LINE","TAB_TO_SPACE","SPACE_TO_TAB","CONST_DATA","LINE_COMMENT","BLOCK_COMMENT","BRACKET","TAG","A","M","D","R","bus","Vue","constructor","taskId","uiTaskId","queue","uiQueue","frameTime","channel","MessageChannel","port2","onmessage","run","uiRun","addUiTask","task","__id__","__task__","removeUiTask","filter","uiTimestamp","Date","now","pending","port1","postMessage","addTask","loop","__time__","unshift","removeTask","timestamp","minGap","Infinity","done","timeGap","min","TOKEN_TYPE","TEXT","SOURCE","TAG_NAME","ATTR_NAME","STRING","WORD","CSS","CSS_VALUE","CSS_PROPERTY","CSS_SELECTOR","CSS_TAG","CSS_CLASS","CSS_ATTR","CSS_PSEUDO","EMMET_HTML","EMMET_CSS","TASK","UI","remote","app","getAppPath","nowIconTheme","views","terminal","minimap","sidebar","statusbar","skipSearchDirs","skipSearchFiles","fileTreePath","getPath","configPath","cachePath","tabPath","terminalTabPath","scheduler","Scheduler","enum","Enum","zoomLevel","scopeIdMap","scopeReg","colors","themes","iconThemes","scopeFileList","scopeTokenList","grammars","openedFileList","fileDiff","nowEditorId","nowFileItem","$mainWin","assign","console","log","regs","stringToken","editor","currentLine","initRegistry","initLanguage","wasmBin","buffer","vscodeOnigurumaLib","oniguruma","createOnigScanner","patterns","createOnigString","s","registry","vsctm","onigLib","loadGrammar","sourceFoldMap","hasTextGrammar","initLanguageConifg","grammar","foldType","scopeMap","tokenizeVisibleLins","grammarData","foldMap","source","__comments__","lineComment","blockComment","comments","__endCommentReg__","brackets","__foldReg__","destroy","cancelIdleCallback","tokenizeLinesTimer","tokenizeLinesTask","onInsertContentAfter","nowLine","newLine","$nextTick","onDeleteContentAfter","tokenizeVisibleLinsId","endLine","maxVisibleLines","getRealLine","tokenizeLines","callback","limit","processedLines","originStartLine","startTime","lineObj","htmls","tokens","tokenizeLine","folds","stateFold","EventBus","editorId","lineId","states","equals","requestIdleCallback","lineText","deletedLength","scopes","startIndex","endIndex","lineTokens","addFold","ruleStack","createHtml","preToken","splitLongToken","selector","scopeId","getScopeId","_compair","map","scope1","scope2","settingsStr","token","scope","outerLoop","_scope","regexp","test","existTag","isString","_scopeName","lastFold","addBracket","addTagFold","a","b","option","reg","res","preFold","side","_inString","lastIndex","tag","startCol","clearScopeMap","child_process","lintSupport","css","scss","less","javascript","workerFn","parseId","setErrors","runTimer","kill","_send","getAllText","send","createProcess","call","fork","workerId","reload","cursor","setCursorPos","cursorPos","setDiffObjs","tagToken","tagNameToken","tagAttrName","cssValueToken","cssPropertyToken","cssSelectorToken","cssAttributeToken","cssClassToken","cssPseudoToken","styleCss","styleCssProperty","Autocomplete","doneMap","reset","stop","searchTimer","search","_search","emmet","_insertTab","tokenIndex","getTokenIndex","nowToken","emmetObj","extract","_isCssToken","_isCssPropertyToken","_isCssValueToken","indent","insertContent","replaceTip","abbreviation","setAutoTip","_isTextToken","_searchEmmet","_isTagNameToken","_searchTagName","_isAttrNameToken","_getPreTagName","_searchTagAttrName","_searchCssProperty","_getPreCssProperty","_searchCssValue","_isCssSelectorToken","_searchCssTag","_searchCssPseudo","_searchSelector","_isTagToken","_searchStyle","_isSourceToken","_searchWord","_searchDocument","_isStringToken","_addTip","_isCssClassToken","skipMatch","showAll","_showTip","htmlData","getHtmlData","tags","attributes","tagMap","after","globalAttributes","cssData","getCssData","pseudo","split","trim","pseudoClasses","pseudoElements","keyValue","values","propertyMap","_word","before","_setTokenType","isSourceToken","isCssToken","isTextToken","isTagToken","isTagAttrNameToken","isTagNameToken","isStringToken","isCssValueToken","isCssPropertyToken","isCssSelectorToken","isCssClassToken","isCssAttributeToken","isCssPseudoToken","undefined","_isCssAttributeToken","_isCssPseudoToken","skipDone","obj","desc","icon","getIcon","all","checkEmmetValid","_text","invalidEmmetParen","paremEmmet","Node","max","dataList","linkList","next","prev","pNode","Btree","compare","root","head","size","node","arrayCache","link","half","iterator","findIndex","_insert","newNode","isPnode","j","delete","that","pIndex","leftNode","rightNode","_moveRight","_moveLeft","_join","orginIndex","originResult","_next","_prev","toArray","isInsert","comparator","singleTag","singleTagMap","preCursorPos","afterIndex","unFold","starLine","foldLine","resultFold","getRangeFold","getFoldByLine","it","getLineInFold","foldIconCheck","stack","startFold","foldStartText","trimLeft","_fold","getRangeFoldByStartFold","pop","getBracketMatch","_getBracket","exsitEnd","getBracketMatchTask","lineCount","realLine","getRelativeLine","relLine","selecter","wholeWordPattern","searchObj","resultObj","hasCache","config","getFromCache","direct","increase","getSearchConfig","searcher","addCursorPos","addActive","activedRanges","initIndexs","addRange","setActive","clearSearch","clearActive","rangePos","lines","wholeWord","matchCase","cacheData","ranges","refreshSearch","refreshSearchId","retainActive","clearInactiveRange","clearRange","setPrevActive","setNextActive","removeNow","clone","getCacheData","getNowRange","fSearcher","delta","getConfig","searchText","getRangeByCursorPos","getRangeText","getNowWord","startColumn","endColumn","getRange","getRangeByLine","getRangeWithCursorPos","select","multiCursorPos","moveCursor","updateRange","createRange","renderSelectedBgAsync","selectAll","setRange","selectAllOccurence","clearCursorPos","same","getCursorsByLineColumn","_range","filterRange","removeRange","removeCursor","dels","multiKeyCode","rightWrodPattern","leftWrodPattern","setNowCursorPos","addCursorAbove","moveWidth","getStrWidth","getColumnByWidth","addCursorBelow","addCursorLineEnds","updateCursorPos","renderCursor","del","removeCursorInRange","toDels","getCursorsByLine","stopUpdate","_column","switchMultiKeyCode","history","undo","command","doCommand","serial","_command","savedIndex","redo","commandType","deleteContent","deleteLine","insertLine","moveLineUp","moveLineDown","copyLineDown","deleteCopyLineDown","copyLineUp","deleteCopyLineUp","convertTabToSpace","convertSpaceToTab","pushHistory","lastCommand","sortComand","pushHistoryTime","_checkSameOp","_combCheck","_combCommand","commandList","keyCode","updateHistory","save","clear","endTag","Context","fgLines","lineIdMap","prop","allText","setLineWidthTimer","historyArr","cursorPosList","_historyArr","_insertMultiContent","prePos","historyObj","texts","lineDelta","columnDelta","commandObj","margin","_insertContent","alignmentTab","nowLineText","newPos","tabStr","_getTabStr","concat","lint","tokenizer","setLineWidth","contentChanged","differ","plus","spaceNum","ceil","rangeList","_deleteMultiContent","_deleteRangePos","_deleteCursorPos","_deleteContent","startObj","deleteText","rangeUuid","originPos","endObj","maxWidthObj","setMaxWidth","insertLineUp","preItem","lineOne","insertLineDown","deleteWord","preRange","moveLine","historyPosList","searchConifg","pass","preLine","enLine","_moveLine","upLine","downLine","copyLine","originList","deleteCopyLine","tip","_getResult","expand","_getRanges","_updatePos","deltaArr","_getDeltaPos","autocomplete","_getTabNum","_checkPos","tabCount","fSelecter","indexReg","preText","_setMaxWidth","setMaxWidthTimer","_setLineWidth","setLineWidthTask","getCopyText","cut","contexts","ctrlKey","shiftKey","code","altKey","_moveCursor","searchWord","openSearch","prevAutoTip","nextAutoTip","selectAutoTip","menuVisible","menuList","menuStyle","onMenuChange","allMenuList","styles","deltaTop","renderList","checkable","disabled","onClick","onHover","leftSelect","selected","_name","_desc","shortcut","seprator","_vScrollAble","vSliderClicked","onVBarDown","_vSliderHeight","_vSliderTop","onVsliderDown","props","default","barHeight","computed","created","mounted","destroyed","methods","initResizeEvent","resizeObserver","initEvent","document","unbindEvent","getScrollTop","onDocumentMouseMove","onDocumentMouseUp","component","hoverCheck","components","VScrollBar","itemHeight","groups","watch","initMenu","nameIndexs","descIndexs","renderObj","setMenuList","scrollToIndex","checkScrollTop","setTreeHeight","setStartLine","setCheckedByIndex","clearChecked","Menu","op","initEventBus","show","showReplace","replaceVisible","input1Focus","input1Height","composing","changeCase","changeWhole","input2Focus","replaceText","input2Height","onKeyDown2","preFocus","searchPrev","nextFocus","searchNext","close","searchPrevActive","searchNextActive","initData","focus","requestAnimationFrame","directBlur","tipList","_html","nowIndex","$auto","getActiveIndex","content","onMinimapDown","rightWidth","blockTop","blockHeight","opacity","blockClicked","onBlockMDown","cacheMap","renderedIdMap","dataObj","canvas","leftDiffCanvas","rightDiffCanvas","ctx","leftDiffCtx","rightDiffCtx","singleLines","diffRanges","allDiffRanges","selectedData","allSelectedData","cursors","allCursors","cursorsImg","allCursorImg","canvasImgData","selectedImg","allSelectedImg","leftDiffCanvasImgData","rightDiffCanvasImgData","drawLine","compairCache","preRuleId","imgData","_createImageData","dataWidth","color","getRgb","buffers","fill","ImageData","getDrawTokens","getDrawText","settings","foreground","_pushImgData","buf","getCharImgData","h","w","pixl","drawLines","clearRect","putImageData","globalCompositeOperation","drawImage","cacheCanvas","drawSingleLiens","round","drawLeftDiff","rgb","getDiffColor","putRectPixl","drawRightDiff","drawSelectedBg","fResults","slectedImgData","createImageBitmap","img","drawAllSelected","drawCursor","getCursorColor","drawAllCursor","originIndex","_putPixl","cancelAnimationFrame","cacheLineObj","getContext","_clearCache","getLineObj","htmlTokens","offscreen","OffscreenCanvas","offCtx","font","textBaseline","fillText","getImageData","useTextColor","self","event","canvasHeight","scale","initWorkerData","setSize","maxScrollTop1","setTop","renderLines","renderLine","renderSelectedBg","renderAllSearchdBg","preTop","renderDiff","renderAllDiff","sliderHeight","renderAllCursor","getEndLine","getRenderObj","getDiffObj","delLength","onDocumentMmove","maxScrollTop2","_hScrollAble","hSliderClicked","onHBarDown","_hSliderWidth","_vSliderLeft","onHsliderDown","barWidth","getScrollLeft","gitTypeMap","SearchDialog","AutoTip","Tip","Minimap","HScrollBar","EditorMenu","diff","beforeLine","cursorVisible","cursorFocus","theme","cursorLeft","maxContentHeight","errorMap","errors","renderedLineMap","renderNumsIdMap","selectedFg","diffMarginTop","scrollerArea","bracketMatch","charObj","_contentHeight","myContext","editAble","handler","deep","initRenderData","showEditor","showDiff","showCursor","_timer","hideCursor","toRnederNums","preRenderObjs","renderNumMap","_setRenderObjs","numObj","_renderWholeLineBg","firstLine","lastLine","cross","_renderSelectedBg","renderSelectionToken","_renderSelectionToken","_tokens","renderBracketMatch","clearSelectionToken","_clearSelectionToken","cursorList","_setLine","renderError","$content","keyMap","_renderColError","_renderLineError","_renderError","searchDialog","moveSelection","_run","scrollToLine","setNumExtraData","setScrollerArea","setContentHeight","setDiffTop","maxScrollTop","_formatError","selection","getTabNum","_line","getStrWidthByLine","w1","w2","getPosByEvent","getExactLeft","spans","span","getPrevDiff","time","onErrorMousemove","_checkErrorOver","copyText","onClickItem","saved","onClose","editorBar","pressK","$emit","EditorBarMenu","provide","rootList","scrollToView","$tab","_scrollToView","showMemu","fileMenuVisible","fileMenuList","onFileMenuChange","editMenuVisible","editMenuList","onEditMenuChange","selectionMenuVisible","selectionMenuList","onSelectionMenuChange","viewMenuVisible","viewMenuList","onViewMenuChange","preferenceMenuVisible","preferenceMenuList","onPreferenceMenuChange","mode","onMinimize","maximize","onUnmaximize","onMaximize","currentWindow","getCurrentWindow","terminalMenuVisible","terminalMenuList","input","onTerminalMenuChange","hasEditor","showTabsize","showLanguage","nowLanguage","tabMenu","indentList","cmdList","renameVisible","newFileNmme","inputStyle","_k","onConfirm","onCancel","cutPath","_paddingLeft","open","marginLeft","treeHeight","spawnSync","preActiveItem","openedList","gitIgnoreMap","itemPadding","fileWatchs","domHeight","fileStatusMap","initOpendDirList","_readdir","preLoadFolder","_check","_preloadFolder","createItems","files","parentPath","gitRootPath","gitIgnore","relativePath","gitRelativePath","createRootItem","readdir","refreshDir","idMap","_refresh","refreshGitIgnore","refreshWorkSpace","closeFolder","endIn","openFolder","_open","watchFileStatus","watchFolder","recursive","treeItems","removeFileWatcher","updateParentPath","updateGitRootPath","sortFileList","focusItem","setOpendList","getRenderList","_loopList","getNowHash","cwd","rootMenu","dirMenu","fileMenu","dirPath","treeItem","SideTree","SideBarMenu","SideTreMenu","setInputPosition","confirmInput","onChange","onKeyDown1","input3Focus","includePath","input3Height","onKeyDown3","input4Focus","excludePath","input4Height","onKeyDown4","searching","stopSeach","replacing","addResults","getHtml","_changOpen","FileContentSearchResults","createSearch","_item","_replace","parsePath","overlay","title","btns","onClickBtn","cancelText","iconColor","visible","onEnter","settingMap","background","fontStyle","loadTheme","tokenColors","_loadTheme","setDefaultColor","parseCss","insertCss","include","_addColors","loadIconTheme","languages","languageMap","fonts","fontFace","src","format","weight","iconDefinitions","fontCharacter","fontColor","iconPath","imgUrl","insertFont","_setFileExtensions","languageIds","_parseLanguageIds","dotReg","sReg","_getLevel","dot","createElement","createTextNode","getElementsByTagName","appendChild","transparent","focusBorder","contrastBorder","contrastActiveBorder","isLight","isHc","_base","chroma","alpha","_scrollbar","_titleBar","_dropdown","_list","_menu","_statusBar","_sideBar","_editor","_terminal","darken","brighten","_tab","_editorWidget","_input","_toolbar","_badge","_git","_minimap","searchMenu","menu","searchCmd","searchFile","_checkFile","_match","m","goToLine","_id","ipcRenderer","windowsMode","fontFamily","cursorBlink","lineHeight","setResize","rows","cols","createTerminal","initTerminalEvent","onAdd","onToggle","TerminalBarMenu","terminalId","init","tab","process","env","HOME","basename","closeTerminal","changeTerminalTab","closeTerminalToLeft","closeTerminalToRight","closeTerminalOther","loadTerminal","getTerminalTabById","closeTab","changeTab","saveTab","closeToLeft","closeToRight","closeSaved","closeOther","closeAll","loadEditor","checkLanguage","loaded","changeStatus","focusNowEditor","changStatusId","suffix","_closeTab","_saveDialog","cancel","success","closeMultiple","activeTab","closeTabTimer","titleCount","fileWatcherMap","fileWatcherTimer","fileObj","choseFile","openFile","saveFile","watchFile","stopWatchFile","removeFolder","shell","showItemInFolder","copyFileToClip","cutFileToClip","pasteFileFromClip","saveWorkspace","openWorkspace","addToWorkspace","choseFolder","rootPathMap","win","options","dialog","showOpenDialog","canceled","filePaths","createRootDirItem","catch","err","_done","editorMap","getEditorMap","firstId","createEmptyTabItem","tempPath","createTabItem","saveAs","buttonLabel","showSaveDialog","workSpacePath","folders","exsitMap","changeFileIcon","gitStatusTimer","gitStautsMap","gitDiffTimer","createStatusProcess","stopWatchFileStatus","parseGitIgnore","statusProcess","isFile","ignore","Ignore","add","parseStatus","paths","statusLevel1","statusLevel2","sep","terminalEvent","TerminalEvent","editorEvent","EditorEvent","fileEvent","FileEvent","themeEvent","ThemeEvent","gitEvent","GitEvent","webContents","setZoomLevel","storeTabDataTimer","storeData","storeGlobalData","storeFileTree","storeTabData","storeTerminalTabData","storeTempData","loadFileTree","loadTabData","loadTerminalTabData","tempSaved","storeTempDataById","Editor","EditorBar","TitleBar","StatusBar","ActivityBar","FileContentSearch","SideBar","Dialog","CmdPanel","Terminal","TerminalBar","extensionsPath","getNowEditor","getNowContext","langeuages","checked","showDialog","loadExtensions","promises","_readVarFile","_addLanguage","_addTheme","_addIconTheme","getTabById","getEditor","Window","axios","timeout","withCredentials","headers","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","deferred","O","chunkIds","fn","priority","notFulfilled","fulfilled","every","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}