{"version":3,"file":"js/app.65b4b9d5.js","mappings":"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A7B,SAAAA,UAEA,CACA/C,KAAAA,cACA4E,GAAAA,aACA7B,SAAAA,mBAIA,2BACA,oBACAe,GAAAA,CAAAA,QAAAA,GAAAA,WAAAA,IACA,+BAGAD,UACA,oBACA,iCAGAG,QAAAA,CACAgB,eACAC,EAAAA,IAAAA,cAAAA,KACA,wBACA,wBACA,6BACA,kCAGA22B,SAAAA,GACA32B,EAAAA,MAAAA,cACA,YAGAo3B,aACAM,GAAAA,YAGAJ,aACAI,GAAAA,WACA,kBAGAL,eACAK,GAAAA,aACA,kBAGAv6B,UACAu6B,GAAAA,SAEAb,iBAAAA,GACA,aACA,cACA,gBACA,MACA,eACA,uBACA,MACA,iBACA,kBACA,MAEA,yBAEAE,iBAAAA,GACA,gBAIA,aACA,WACA,2BACA,MACA,WACA,2BACA,MACA,UACAn1B,EAAAA,eAAAA,KAAAA,QAAAA,aAAAA,IACA,MACA,WACAA,EAAAA,eAAAA,KAAAA,QAAAA,eACA,MACA,YACAA,EAAAA,gBAAAA,MAAAA,IACA,iCAEA,MACA,iBACA,0BACA,MACA,WACA,yBACA,MACA,cACA,2BACA,MAEA,oBACA,6BAhCA,yBAkCAq1B,sBAAAA,GACA,gBAIA,aACA,gBACA,iCACA,MACA,iBACA,0BACA,MACA,mBACA,4BACA,MACA,iBACA,0BACA,MACA,mBACA,4BACA,MACA,qBACA,oCACA,MACA,qBACA,oCACA,MACA,wBACA,uCACA,MACA,uBACA,+BACA,MACA,uBACA,6BACA,MACA,yBACA,0CACA,MACA,yBACA,wCACAt7B,EAAAA,QAAAA,KAAAA,OAAAA,OAAAA,aACAA,EAAAA,KAAAA,UAAAA,QAAAA,EAAAA,QAAAA,OAAAA,8BACA,MAEA,oBACA,kCA5CA,8BA8CAw7B,uBAAAA,GACA,aACA,kBACA,uBACA,MACA,sBACA,uBAEA,iCCjauT,MCOnT,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,QClB5B,GAAS,WAAa,IAAI59B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACK,YAAY,6BAA6BC,MAAM,CAAGgU,OAAQ1U,EAAI0U,OAAS,MAAQ7T,GAAG,CAAC,YAAc,SAASI,GAAQA,EAAOE,kBAAkBF,EAAOC,oBAAqB,CAACd,EAAG,MAAM,CAACK,YAAY,mCAAmC,CAACL,EAAG,MAAM,CAACK,YAAY,YAAY,CAAET,EAAa,UAAEI,EAAG,MAAM,CAACK,YAAY,YAAY,CAACL,EAAG,OAAO,CAACJ,EAAI0D,GAAG,QAAQ1D,EAAI2D,GAAG3D,EAAI0N,MAAM,YAAY1N,EAAI2D,GAAG3D,EAAImM,aAAanM,EAAIgB,OAAOZ,EAAG,MAAM,CAACK,YAAY,aAAa,CAAET,EAAa,UAAEI,EAAG,MAAM,CAACK,YAAY,oBAAoBI,GAAG,CAAC,UAAY,SAASI,GAAiC,OAAzBA,EAAOE,kBAAyBnB,EAAI2+B,YAAYt9B,MAAM,KAAMC,cAAc,CAAClB,EAAG,OAAO,CAACJ,EAAI0D,GAAG,YAAY1D,EAAI2D,GAAG3D,EAAIuJ,YAAYnJ,EAAG,MAAM,CAACK,YAAY,UAAU8T,YAAY,CAAC,SAAW,WAAW,OAAS,SAAS,CAAEvU,EAAkB,eAAEI,EAAG,OAAO,CAACE,MAAM,CAAC,SAAWN,EAAI4+B,YAAY,OAAS,CAAEC,SAAU,YAAa,MAAQ7+B,EAAIuJ,SAAS1I,GAAG,CAAC,OAASb,EAAI8+B,mBAAmB9+B,EAAIgB,MAAM,KAAKhB,EAAIgB,KAAMhB,EAAa,UAAEI,EAAG,MAAM,CAACK,YAAY,oBAAoBI,GAAG,CAAC,UAAY,SAASI,GAAiC,OAAzBA,EAAOE,kBAAyBnB,EAAI++B,aAAa19B,MAAM,KAAMC,cAAc,CAAClB,EAAG,OAAO,CAACJ,EAAI0D,GAAG1D,EAAI2D,GAAG3D,EAAIg/B,kBAAkBh/B,EAAIgB,YAC5tC,GAAkB,GCoCtB,IACAQ,KAAAA,YACAkD,MAAAA,CACAgQ,OAAAA,CACA/P,KAAAA,OACAC,QAAAA,IAEA9B,aAAAA,OAEAoD,WAAAA,CACAC,KAAAA,GAEApB,OACA,OACA2I,KAAAA,EACAvB,OAAAA,EACA5C,QAAAA,EACAoF,SAAAA,GACAswB,gBAAAA,EACAC,WAAAA,EACAN,YAAAA,GACAO,UAAAA,CAAAA,IACAC,YAAAA,KAGAj6B,MAAAA,CACArC,eACA,SACA,+BACAs8B,EAAAA,EAAAA,OAAAA,EAAAA,QAEA,mCACA,qBAGAn6B,SAAAA,CACA+5B,cACA,yCAGA55B,UACA,oBACA,qBACA,uBACA5D,KAAAA,aAAAA,IACAE,MAAAA,KAIA2D,YACAG,QAAAA,CACAgB,eACAC,EAAAA,IAAAA,cAAAA,IACA,GACA,yBACA,uBACA,iBACA,qBACA,mBAEA,qBAGAA,EAAAA,IAAAA,iBAAAA,IACA,iBACA,wBAEAA,EAAAA,IAAAA,mBAAAA,IACA,mBAEAA,EAAAA,IAAAA,cAAAA,IACA,2BAGAk4B,cACA,0BACAl4B,EAAAA,MAAAA,cACA,wBAEAs4B,eACAt4B,EAAAA,MAAAA,cACA,gCAEAq4B,gBAAAA,GACA,wBACAr4B,EAAAA,MAAAA,kBAAAA,EAAAA,OACA,sBAEA,0BC7HwT,MCOpT,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,QClB5B,GAAS,WAAa,IAAIzG,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,IAAI,UAAUC,YAAY,cAAcC,MAAM,CAAG+K,MAAOzL,EAAIyL,MAAQ,MAAQ5K,GAAG,CAAC,YAAc,SAASI,GAAyD,OAAjDA,EAAOC,iBAAiBD,EAAOE,kBAAyBnB,EAAIoB,cAAcC,MAAM,KAAMC,YAAY,YAAc,SAASL,GAAQA,EAAOC,oBAAqB,CAACd,EAAG,MAAM,CAACK,YAAY,gBAAgB8T,YAAY,CAAC,SAAW,WAAW,CAACnU,EAAG,MAAM,CAACK,YAAY,4BAA4B,CAACT,EAAI0D,GAAG,cAActD,EAAG,YAAY,CAACE,MAAM,CAAC,KAAON,EAAIiU,SAAS,GAAG7T,EAAG,cAAc,CAACI,IAAI,gBAAgBJ,EAAG,MAAM,CAACK,YAAY,YAAYI,GAAG,CAAC,UAAYb,EAAIq/B,gBAAgB,IAC/pB,GAAkB,GCDlB,GAAS,WAAa,IAAIr/B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACI,IAAI,OAAOC,YAAY,mCAAmCI,GAAG,CAAC,OAASb,EAAI+U,WAAW,CAAC3U,EAAG,MAAM,CAACmU,YAAY,CAAC,MAAQ,OAAO,SAAW,WAAW,CAACnU,EAAG,MAAM,CAACK,YAAY,YAAYC,MAAM,CAAGgU,OAAQ1U,EAAIs/B,gBAAkB,CAACl/B,EAAG,MAAM,CAACK,YAAY,oBAAoBC,MAAM,CAAG6F,IAAKvG,EAAIuV,OAASvV,EAAImC,GAAInC,EAAc,YAAE,SAASoC,GAAM,OAAOhC,EAAG,MAAM,CAACK,YAAY,YAAYI,GAAG,CAAC,MAAQ,SAASI,GAAiC,OAAzBA,EAAOE,kBAAyBnB,EAAIwD,YAAYpB,MAAS,CAAChC,EAAG,MAAM,CAACK,YAAY,kCAAkC6C,MAAM,CAAClB,EAAKI,OAAS,YAAc,IAAI9B,MAAM,CAAG,eAAgBV,EAAIu/B,aAAan9B,IAAS9B,MAAM,CAAC,MAAQ8B,EAAKmB,MAAM1C,GAAG,CAAC,YAAc,SAASI,GAAQA,EAAOE,kBAAkBF,EAAOC,oBAAqB,CAAgB,QAAdkB,EAAKuC,KAAgB,CAAEvC,EAAS,KAAEhC,EAAG,OAAO,CAACK,YAAY,kCAAkCL,EAAG,OAAO,CAACK,YAAY,mCAAmCT,EAAIgB,KAAKZ,EAAG,MAAM,CAACK,YAAY,oCAAoC6C,MAAM,CAAClB,EAAKqB,OAAO,CAACrD,EAAG,OAAO,CAACK,YAAY,iBAAiB8T,YAAY,CAAC,cAAc,QAAQ,CAACvU,EAAI0D,GAAG1D,EAAI2D,GAAGvB,EAAKZ,YAAY,QAAO,UACppC,GAAkB,GCoCtB,MAAM,GAAUuF,OAAOD,SAAWC,OAAOC,OAAOF,SAAW,aAC3D,IAAI04B,GAAgB,KAEpB,QACAh+B,KAAAA,WACAkD,MAAAA,CACAuP,KAAAA,CACAtP,KAAAA,QAGA+5B,OAAAA,CAAAA,YACA35B,OACA,OACAC,WAAAA,GACAy6B,YAAAA,GACAC,WAAAA,GACAC,WAAAA,GACAplB,UAAAA,EACAE,gBAAAA,MAGAxV,SAAAA,CACAsQ,OACA,+CAEA+pB,gBACA,oDAEAC,eACA,mBACA,uCAIAp6B,MAAAA,CACA8O,OACA,mBACA,mBACA,gDACA,gBAGA7O,UACA,gDACA,qBAEAC,UACA,+EACA,eAEAG,QAAAA,CACAgB,eACAC,EAAAA,IAAAA,eAAAA,KACA,6BACArE,EAAAA,KAAAA,MAEA,iBAEAqE,EAAAA,IAAAA,gBAAAA,KACA,6BACArE,EAAAA,KAAAA,MAEA,iBAEAqE,EAAAA,IAAAA,cAAAA,IACA,gBACA,oBACA+4B,GAAAA,QAAAA,EACA,oBACA,QACAA,GAAAA,QAAAA,EACAA,GAAAA,UAIAz/B,SACA,8FACA,6BACA,gBACAqC,EAAAA,KAAAA,EAAAA,cAAAA,EAAAA,YAAAA,EAAAA,KAAAA,EAAAA,SAAAA,KAAAA,EAAAA,KAAAA,EAAAA,MACAA,EAAAA,KAAAA,EAAAA,KAAAA,6BAAAA,EAAAA,OAAAA,QAIAw9B,QAAAA,GACA,iBACA,aACA,wBACA,SAEAx3B,EAAAA,QAAAA,EAAAA,CAAAy3B,SAAAA,SAAA,QACA,KACA,QAEAC,EAAAA,SAAAA,CAAAA,EAAAA,KACA,kBACA,gBACA,GACAt+B,KAAAA,EACA+B,KAAAA,EACAw8B,WAAAA,EACAv9B,QAAAA,EACAg6B,SAAAA,IAEA,WACArW,EAAAA,KAAAA,QAEAA,EAAAA,KAAAA,MACAA,EAAAA,MAAAA,GAEAzH,EAAAA,KAAAA,GACA,gBACAlW,EAAAA,KAAAA,aAAAA,cAMAw3B,aAAAA,GAcA,OAbAthB,EAAAA,MAAAA,CAAAA,EAAAA,IACA,iCACA,EACA,iCAEA,cADA,EAGA,eACA,EAEA,IAGA,GAEAuhB,cAAAA,EAAAA,GACA,SAEA,OADAC,EAAAA,EAAAA,GACA,EAEA,gBACAjsB,EAAAA,SAAAA,IACA7R,EAAAA,KAAAA,EAAAA,EACAsc,EAAAA,KAAAA,GACA,2BACAwhB,EAAAA,EAAAA,SAAAA,EAAAA,WAKAC,UAAAA,GACA,QAGA,cACA,0CACA,yBACA,eACA,sBACA,cACA,iBACA,wBACA,MACAr2B,EAAAA,UAAAA,EAAAA,EACA,sBACAA,EAAAA,UAAAA,EAAAA,KAAAA,YAEA,UACA,oBAEA,MACA,0BACA,QACA7F,EAAAA,EAAAA,EACA,+BACAm8B,EAAAA,KAAAA,KAAAA,MAEA,QAzBAA,EAAAA,KAAAA,KAAAA,IA+BA58B,YAAAA,GACA,YAuBA,iBACApB,EAAAA,MAAAA,EAAAA,KACAi+B,EAAAA,KAAAA,KAAAA,SAnBA,GALA,KACAb,GAAAA,QAAAA,GAEAp9B,EAAAA,QAAAA,EACAo9B,GAAAA,EACA,gBAEA,GADAp9B,EAAAA,MAAAA,EAAAA,MACA,SACA,sCACAA,EAAAA,SAAAA,EACAA,EAAAA,QAAAA,EACA2C,EAAAA,SAAAA,IACAu7B,EAAAA,KAAAA,EAAAA,KAAAA,KAEAD,EAAAA,KAAAA,KAAAA,MAGAA,EAAAA,KAAAA,KAAAA,QAGA,iBAMA,yBAEA,cACA,sBACA,WACA,iCACA,gCACA/zB,MAAA,EAAArI,EAAAA,GACA8vB,OAAA,uCACAA,OAAA,gCACA,CACA,mCACA,IACA,4EACAwM,IAEA,8BAEA,iBAIAxrB,SAAAA,GACA,yBACA,+CACA,iBChRuT,MCOnT,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,QClB5B,GAAS,WAAa,IAAI/U,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACmB,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAO1B,EAAe,YAAE4B,WAAW,gBAAgBpB,IAAI,QAAQ,CAACJ,EAAG,OAAO,CAACI,IAAI,OAAOF,MAAM,CAAC,WAAY,EAAM,SAAWN,EAAI8D,SAAS,OAAS9D,EAAI+D,WAAWlD,GAAG,CAAC,OAASb,EAAI4C,iBAAiB,IACjV,GAAkB,GCoBtB,IACAsD,WAAAA,CACAC,KAAAA,GAEApB,OACA,OACAkP,KAAAA,GACAnQ,SAAAA,GACAuC,aAAAA,EACAtC,UAAAA,CACAuC,KAAAA,OACAC,IAAAA,UAIA2N,UACA,OACAC,SAAAA,KAAAA,OAGA/O,UACA,qBAEAI,QAAAA,CACAgB,eACAC,EAAAA,IAAAA,cAAAA,KACA,uBAEAA,EAAAA,IAAAA,kBAAAA,KACA,wBAGAC,KAAAA,GACA,oCACA,qBACA,QACA,IACAC,EAAAA,KAAAA,MAAAA,KAAAA,IAAAA,YACA+1B,EAAAA,KAAAA,MAAAA,KAAAA,IAAAA,aACA,iBACA,6BACA,mBACA71B,EAAAA,QAAAA,EAAAA,IAAAA,EAAAA,KAEA,wCAEA,8CAGAjE,aAAAA,GACA,cAEA,uBCzE0T,MCOtT,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,QCShC,IACAsD,WAAAA,CACAs6B,SADA,GAEAC,YAAAA,IAEA17B,OACA,OACA0G,MAAAA,IACAwI,KAAAA,KAGAC,UACA,OACAwsB,YAAAA,IACA,YAIAr7B,UACA,kBAEAG,QAAAA,CACA4Y,YACA9Y,GAAAA,CAAAA,UACAzE,GAAA,aAAAgG,IACA,kBACA,kDACA,2CACA4E,EAAAA,EAAAA,GAAAA,GAAAA,EACAA,EAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,EACA,aACA,oBAGA5K,GAAA,WAAAgG,IACA,uBAGAzF,cAAAA,KAGAi+B,YAAAA,GACA,sBACA,mBCtEsT,MCOlT,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,QClB5B,GAAS,WAAa,IAAIr/B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAEJ,EAAW,QAAEI,EAAG,MAAM,CAACK,YAAY,sBAAsBT,EAAIgB,KAAKZ,EAAG,MAAM,CAACK,YAAY,YAAYC,MAAOV,EAAU,OAAEa,GAAG,CAAC,UAAY,SAASI,GAAQA,EAAOE,qBAAsB,CAACf,EAAG,MAAM,CAACK,YAAY,gBAAgB,CAACL,EAAG,MAAM,CAACwV,SAAS,CAAC,UAAY5V,EAAI2D,GAAG3D,EAAI2gC,UAAUvgC,EAAG,OAAO,CAACK,YAAY,mCAAmCI,GAAG,CAAC,MAAQb,EAAI4D,aAAaxD,EAAG,MAAM,CAACK,YAAY,kBAAkB,CAAET,EAAQ,KAAEI,EAAG,OAAO,CAACkD,MAAM,CAACtD,EAAIyD,MAAM8Q,YAAY,CAAC,eAAe,MAAM,MAAQ,OAAO,OAAS,UAAUvU,EAAIgB,KAAKZ,EAAG,MAAM,CAACA,EAAG,MAAM,CAACwV,SAAS,CAAC,UAAY5V,EAAI2D,GAAG3D,EAAI+4B,gBAAgB34B,EAAG,MAAM,CAACK,YAAY,eAAe,CAACT,EAAImC,GAAInC,EAAQ,MAAE,SAASoC,GAAM,OAAOhC,EAAG,MAAM,CAACK,YAAY,aAAaI,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOjB,EAAI4gC,WAAWx+B,MAAS,CAACpC,EAAI0D,GAAG1D,EAAI2D,GAAGvB,EAAKZ,YAAWpB,EAAG,MAAM,CAACK,YAAY,aAAaI,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOjB,EAAI4D,aAAa,CAAC5D,EAAI0D,GAAG,SAAS,QACv+B,GAAkB,GC0BtB,IACAlC,KAAAA,SACAkD,MAAAA,CACAi8B,MAAAA,OACA5H,QAAAA,OACA8H,KAAAA,MACAC,QAAAA,QACAj8B,OAAAA,OACApB,KAAAA,OACAs9B,UAAAA,QAEAh8B,OACA,UAGAK,YAEAI,QAAAA,CACAo7B,WAAAA,GACAx+B,EAAAA,YAEAwB,UACA,uBCjDqT,MCOjT,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,QClB5B,GAAS,WAAa,IAAI5D,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACmB,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAO1B,EAAe,YAAE4B,WAAW,gBAAgBpB,IAAI,QAAQ,CAACJ,EAAG,OAAO,CAACI,IAAI,OAAOF,MAAM,CAAC,WAAY,EAAM,SAAWN,EAAI8D,SAAS,OAAS9D,EAAI+D,WAAWlD,GAAG,CAAC,OAASb,EAAI4C,iBAAiB,IACjV,GAAkB,GCoBtB,IACApB,KAAAA,aACA0E,WAAAA,CACAC,KAAAA,GAEAzB,MAAAA,CACAG,OAAAA,CACAF,KAAAA,SAGAI,OACA,OACAjB,SAAAA,GACAuC,aAAAA,EACAtC,UAAAA,CACAuC,KAAAA,MACAC,IAAAA,SAIAnB,UACA,qBAEAI,QAAAA,CACAgB,eACAC,EAAAA,IAAAA,cAAAA,KACA,uBAEAA,EAAAA,IAAAA,iBAAAA,KACA,wBAGA7D,aAAAA,GACA,cAEA,qBAEA8D,KAAAA,GACA,oBACA,qBACA,oCACA,aACA,kCACA,mCAEAg2B,EAAAA,EAAAA,QACA91B,EAAAA,IAAAA,EAAAA,GAAAA,aAEA,mBACAC,EAAAA,QAAAA,EAAAA,IAAAA,EAAAA,KAEA,wCAGAF,EAAAA,EAAAA,QACAC,EAAAA,KAAAA,EAAAA,GAAAA,YAEA,oBACAC,EAAAA,QAAAA,EAAAA,KAAAA,EAAAA,KAEA,8CAIAm6B,OACA,uBCtFyT,MCOrT,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,QClB5B,GAAS,WAAa,IAAIhhC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAW,QAAEI,EAAG,MAAM,CAACK,YAAY,uBAAuBI,GAAG,CAAC,UAAY,SAASI,GAAQA,EAAOE,qBAAsB,CAACf,EAAG,MAAM,CAACA,EAAG,MAAM,CAACK,YAAY,iBAAiB,CAACL,EAAG,QAAQ,CAACmB,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAO1B,EAAc,WAAE4B,WAAW,eAAepB,IAAI,QAAQF,MAAM,CAAC,KAAO,QAAQsV,SAAS,CAAC,MAAS5V,EAAc,YAAGa,GAAG,CAAC,MAAQ,SAASI,GAAWA,EAAOkN,OAAOspB,YAAqBz3B,EAAIwtB,WAAWvsB,EAAOkN,OAAOzM,aAAYtB,EAAG,MAAM,CAACA,EAAG,OAAO,CAACK,YAAY,mCAAmC8T,YAAY,CAAC,SAAW,YAAYjU,MAAM,CAAC,WAAY,EAAK,SAAWN,EAAIihC,QAAQ,MAAQjhC,EAAI0B,MAAM,WAAa,SAASb,GAAG,CAAC,OAASb,EAAIkhC,aAAa,OAAOlhC,EAAIgB,MAC3wB,GAAkB,G,qBCStB,MAAM8F,GAAUC,OAAOD,SAAWC,OAAOC,OAAOF,SAAW,aACrDvD,GAAOuD,GAAQ,QACfq6B,GAAa,CACfC,WAAY,QACZC,WAAY,mBACZC,UAAW,cAGf,aACI7tB,eACA8tB,UAAU9jB,GACN,IAAIxR,EAAS,CAAEu1B,YAAa,GAAIh6B,OAAQ,IACxC,OAAOi6B,EAAW7iB,KAAK3e,KAAMwd,EAAOla,MAAM0M,MAAK,KAC3C,IAAIyxB,EAAM,GACVzhC,KAAK0hC,gBAAgB11B,EAAQwR,EAAO9Y,MACpC+8B,EAAMzhC,KAAK2hC,SAAS31B,GACpBhM,KAAK4hC,UAAUH,GACfr6B,EAAAA,SAAsB,CAClB3F,MAAO+b,EAAO/b,MACdiD,KAAM8Y,EAAO9Y,KACbpB,KAAMka,EAAOla,MAEjBkD,EAAAA,MAAe,eAAgBgX,EAAO/b,UAG1C,SAAS+/B,EAAWzxB,GAChB,OAAO3H,EAAAA,aAAkB2H,GAAUC,MAAMlL,IACrC,GAAIA,EAAK+8B,QACL,OAAOL,EAAW7iB,KAAK3e,KAAMsD,GAAKmE,KAAKsI,EAAU,MAAQjL,EAAK+8B,UAAU7xB,MAAK,KACzE8xB,EAAWh9B,MAGfg9B,EAAWh9B,MAKvB,SAASg9B,EAAWh9B,GAChBA,EAAKy8B,aAAev1B,EAAOu1B,YAAYp1B,QAAQrH,EAAKy8B,aACpDz8B,EAAKyC,QAAUiH,OAAO2b,OAAOne,EAAOzE,OAAQzC,EAAKyC,SAGzDw6B,cAAcvkB,GACV,IAAKA,EAAOla,KAMR,OALA8D,EAAAA,aAA0B,CACtB3F,MAAO+b,EAAO/b,OAElB2F,EAAAA,YAAyB,KACzBZ,EAAAA,MAAe,eACR8B,QAAQC,UAEnB,IAAI22B,EAAY93B,EAAAA,aACZ+3B,EAAc,GASlB,OARAD,EAAU7wB,SAASlM,IACXA,EAAK6/B,aACL7C,EAAYh9B,EAAKV,OAASU,EAAK6/B,WAAWhmB,KAAKpV,GACpCA,EAAEyF,MAAM,SAKpBm1B,EAAW7iB,KAAK3e,KAAMwd,EAAOla,MAEpC,SAASk+B,EAAWzxB,GAChB,OAAO3H,EAAAA,aAAkB2H,GAAUC,MAAMlL,IACrC,IAAIm9B,EAAQn9B,EAAKm9B,OAAS,GACtBR,EAAM,GACVQ,EAAM5zB,SAAS6zB,IACX,IAAIC,EAAW,oBACfD,EAAKE,IAAI/zB,SAAQ,CAAC+zB,EAAKp+B,KACnB,IAAI6J,EAAMvK,GAAKmE,KAAKsI,EAAU,MAAQqyB,EAAI9+B,MAC1CuK,EAAMA,EAAI7E,QAAQ,MAAO,KACzBm5B,GAAa,kBAAiBt0B,MAC9Bs0B,GAAa,YAAWC,EAAIC,WAC5BF,GAAYn+B,EAAQk+B,EAAOE,EAAI59B,OAAS,EAAI,KAAO,MAEvD29B,GAAY,MACZA,GAAa,eAAcD,EAAK7/B,QAChC8/B,GAAa,cAAaD,EAAKzhC,WAC/B0hC,GAAa,eAAcD,EAAKI,YAChCH,GAAY,MACZV,GAAOU,EACPV,GAAO,2BACPA,GAAQ,eAAcS,EAAK7/B,QAC3Bo/B,GAAQ,aAAYS,EAAK3a,UACzBka,GAAO,SAEX,IAAK,IAAIj+B,KAAQsB,EAAKy9B,gBAAiB,CAGnC,GAFAd,GAAQ,iBAAgBj+B,eACxBA,EAAOsB,EAAKy9B,gBAAgB/+B,GACxBA,EAAKg/B,cACLf,GAAO,kBACPA,GAAQ,YAAWj+B,EAAKg/B,oBACxBf,GAAQ,SAAQj+B,EAAKi/B,oBAClB,GAAIj/B,EAAKk/B,SAAU,CACtB,IAAIC,EAASr/B,GAAKmE,KAAKsI,EAAU,MAAQvM,EAAKk/B,UAC9CC,EAASA,EAAO35B,QAAQ,MAAO,KAC/By4B,GAAO,cACPA,GAAQ,kCAAiCkB,KAE7ClB,GAAO,MAEXzhC,KAAK4iC,WAAWnB,GAChB38B,EAAK2K,UAAY3K,EAAK2K,WAAa,GACnC3K,EAAK4K,eAAiB5K,EAAK4K,gBAAkB,GAC7CmzB,EAAmB/9B,GACnBsC,EAAAA,aAA0B,CACtB3F,MAAO+b,EAAO/b,MACd6B,KAAMka,EAAOla,MAEjB8D,EAAAA,YAAyBtC,EACzB0B,EAAAA,MAAe,cAAegX,EAAO/b,UAI7C,SAASohC,EAAmB/9B,GAExB,GADAA,EAAKg+B,aAAeC,EAAkBj+B,EAAKg+B,YAAah+B,EAAK4K,gBACzD5K,EAAKwK,MAAO,CACZxK,EAAKwK,MAAMI,eAAiB5K,EAAKwK,MAAMI,gBAAkB,GACzD5K,EAAKwK,MAAMG,UAAY3K,EAAKwK,MAAMG,WAAa,GAC/C3K,EAAKwK,MAAMwzB,aAAeC,EAAkBj+B,EAAKwK,MAAMwzB,YAAah+B,EAAKwK,MAAMI,gBAC/E,IAAK,IAAItN,KAAO0C,EAAK4K,eACjB5K,EAAKwK,MAAMI,eAAetN,GAAO0C,EAAKwK,MAAMI,eAAetN,IAAQ0C,EAAK4K,eAAetN,GAE3F,IAAK,IAAIA,KAAO0C,EAAK2K,UACjB3K,EAAKwK,MAAMG,UAAUrN,GAAO0C,EAAKwK,MAAMG,UAAUrN,IAAQ0C,EAAK2K,UAAUrN,QAG5E0C,EAAKwK,MAAQ,CACTI,eAAgB5K,EAAK4K,eACrBD,UAAW3K,EAAK2K,WAK5B,SAASszB,EAAkBD,EAAapzB,GACpC,IAAK,IAAItN,KAAO0gC,EAAa,CACzB,IAAId,EAAa7C,EAAY/8B,GACzBX,EAAQqhC,EAAY1gC,GACpB4/B,GACAA,EAAW3zB,SAASlM,IAChBuN,EAAevN,GAAQV,OAM3CkgC,SAAS78B,GACL,IAAI28B,EAAM,GACNnlB,EAAU,EACVvU,EAAiB,GACjBi7B,EAAS,MACTC,EAAO,OACX,GAAIn+B,EAAKyC,OAAQ,CACbk6B,GAAO,WACP,IAAK,IAAIr/B,KAAO0C,EAAKyC,OACjBk6B,GAAQ,QAAOr/B,EAAI4G,QAAQ,MAAO,SAASlE,EAAKyC,OAAOnF,QAE3Dq/B,GAAO,MA0CX,OAxCI38B,EAAKy8B,aACLz8B,EAAKy8B,YAAYlzB,SAASkO,IACtB,IAAKA,EAAMC,MACP,OAEJ,IAAIP,EAAW,GACXO,EAAQD,EAAMC,iBAAiBpP,MAAQmP,EAAMC,MAAM/U,KAAK,KAAO8U,EAAMC,MACzEA,EAAQA,EAAMxT,QAAQ,OAAQ,KAC9BwT,EAAQA,EAAM+H,MAAM,YACpB/H,EAAMnO,SAAQ,CAACmO,EAAOxY,KAClBiY,EAAS9P,KAAM,aAAYmQ,KAC3BvU,EAAeoE,KAAK,CAChBmQ,QAASA,EACTE,MAAOA,EACPJ,OAAQI,EAAM+H,MAAM,KACpB2e,MAAOC,EAAU3mB,KAErBF,OAEJL,EAAWA,EAASxU,KAAK,KACzBg6B,GAAQ,GAAExlB,OACV,IAAK,IAAI6R,KAAQvR,EAAM6mB,SACnB3B,GAAQ,GAAEP,GAAWpT,MAASvR,EAAM6mB,SAAStV,QAEjD2T,GAAO,SAGf15B,EAAe2B,MAAK,CAAC4T,EAAGC,IACbA,EAAE2lB,MAAQ5lB,EAAE4lB,QAEvBn7B,EAAesG,SAASlM,IAChBA,EAAKia,OAAO5X,OAAS,EACrBrC,EAAKwa,OAASxa,EAAKia,OAAO3U,KAAK,wCAE/BtF,EAAKwa,OAASxa,EAAKqa,MAEvBra,EAAKwa,OAAS,IAAI5P,OAAO5K,EAAKwa,WAElCvV,EAAAA,eAA4BW,EAC5BX,EAAAA,OAAoBtC,EAAKyC,OAClBk6B,EAEP,SAAS0B,EAAU3mB,GACf,IAAI6mB,EAAM7mB,EAAMlR,MAAM03B,GAClB1qB,EAAIkE,EAAMlR,MAAM23B,GAGpB,OAFAI,EAAOA,GAAOA,EAAI7+B,QAAW,EAC7B8T,EAAKA,GAAgB,IAAXA,EAAE9T,QAAkB,EACvB6+B,EAAM/qB,GAGrBspB,UAAUH,GACFr6B,EAAAA,YACAA,EAAAA,WAAAA,SAEJA,EAAAA,WAAwBk8B,SAASC,cAAc,SAC/Cn8B,EAAAA,WAAAA,KAA6B,WAC7BA,EAAAA,WAAAA,YAAkCk8B,SAASE,eAAe/B,IAC1D6B,SAASG,qBAAqB,QAAQ,GAAGC,YAAYt8B,EAAAA,YAEzDw7B,WAAWnB,GACHr6B,EAAAA,WACAA,EAAAA,UAAAA,SAEJA,EAAAA,UAAuBk8B,SAASC,cAAc,SAC9Cn8B,EAAAA,UAAAA,KAA4B,WAC5BA,EAAAA,UAAAA,YAAiCk8B,SAASE,eAAe/B,IACzD6B,SAASG,qBAAqB,QAAQ,GAAGC,YAAYt8B,EAAAA,WAEzDs6B,gBAAgB11B,EAAQtH,GACpB,IAAIi/B,EAAc,cACdxC,EAAa,GACbC,EAAa,GACbwC,EAAc,GACdC,EAAiB,GACjBC,EAAuB,GACvBC,EAAmB,UAATr/B,GAA6B,mBAATA,EAC9Bs/B,EAAgB,mBAATt/B,GAAsC,kBAATA,EAiBxC,SAASu/B,IACAj4B,EAAOzE,OAAO,gBACXyE,EAAOzE,OAAO,qBACdyE,EAAOzE,OAAO,cAAgB28B,IAAAA,CAAOl4B,EAAOzE,OAAO,sBAAsB48B,MAAM,IAAK1C,MAEpFz1B,EAAOzE,OAAO,cADPw8B,EACuB,UAEA,sBAGjC/3B,EAAOzE,OAAO,qBACfyE,EAAOzE,OAAO,mBAAqB,WAElCyE,EAAOzE,OAAO,gBACXyE,EAAOzE,OAAO,qBACdyE,EAAOzE,OAAO,cAAgB28B,IAAAA,CAAOl4B,EAAOzE,OAAO,sBAAsB48B,MAAM,IAAK1C,MAEpFz1B,EAAOzE,OAAO,cADPw8B,EACuB,OACvBC,EACuB,OAEA,kBAGjCh4B,EAAOzE,OAAO,iBAGPyE,EAAOzE,OAAO,eAFlBy8B,EACID,EAC+B,UAEA,UAGJ,WAGlC/3B,EAAOzE,OAAO,oBAGPyE,EAAOzE,OAAO,kBAFlBy8B,EACID,EACkC,UAEA,UAGJJ,GAGrC33B,EAAOzE,OAAO,0BAEXyE,EAAOzE,OAAO,wBADdy8B,EACwCh4B,EAAOzE,OAAO,eAEdo8B,GAG3C33B,EAAOzE,OAAO,mBAEXyE,EAAOzE,OAAO,iBADdy8B,EACiCL,EAC1BI,EAC0B,mBAEA,oBAGpC/3B,EAAOzE,OAAO,sBAEXyE,EAAOzE,OAAO,oBADdy8B,EACoCh4B,EAAOzE,OAAO,wBAEdyE,EAAOzE,OAAO,gBAGrDyE,EAAOzE,OAAO,0BACfyE,EAAOzE,OAAO,wBAA0ByE,EAAOzE,OAAO,gBAE1D65B,EAAap1B,EAAOzE,OAAO,cAC3B45B,EAAan1B,EAAOzE,OAAO,cAC3Bq8B,EAAc53B,EAAOzE,OAAO,eAC5Bs8B,EAAiB73B,EAAOzE,OAAO,kBAC/Bu8B,EAAuB93B,EAAOzE,OAAO,wBAEzC,SAAS68B,IACAp4B,EAAOzE,OAAO,sBACfyE,EAAOzE,OAAO,oBAAsBo8B,GAEnC33B,EAAOzE,OAAO,gCAEXyE,EAAOzE,OAAO,8BADdy8B,EAC8CE,IAAAA,CAAOL,GAAgBM,MAAM,IAAK1C,MACzEsC,EACuC,2BAEA,6BAGjD/3B,EAAOzE,OAAO,qCAEXyE,EAAOzE,OAAO,mCADdy8B,EACmDE,IAAAA,CAAOL,GAAgBM,MAAM,IAAK1C,MAC9EsC,EAC4C,2BAEA,6BAGtD/3B,EAAOzE,OAAO,sCAEXyE,EAAOzE,OAAO,oCADdy8B,EACoDH,EAC7CE,EAC6C,qBAEA,6BAKhE,SAASM,IACAr4B,EAAOzE,OAAO,qBACfyE,EAAOzE,OAAO,mBAAqBs8B,GAElC73B,EAAOzE,OAAO,+BACfyE,EAAOzE,OAAO,6BAA+B45B,GAE5Cn1B,EAAOzE,OAAO,+BACXy8B,EACAh4B,EAAOzE,OAAO,6BAA+Bo8B,EACtCI,IACP/3B,EAAOzE,OAAO,6BAA+B,uBAGhDyE,EAAOzE,OAAO,iCACfyE,EAAOzE,OAAO,+BAAiC45B,GAE9Cn1B,EAAOzE,OAAO,iCAEXyE,EAAOzE,OAAO,+BADdy8B,EAC+CL,EACxCI,EACwC,kBAEA,yBAGlD/3B,EAAOzE,OAAO,6BAEXyE,EAAOzE,OAAO,2BADdy8B,EAC2CF,EAEAH,GAKvD,SAASW,IACAt4B,EAAOzE,OAAO,yBAEXyE,EAAOzE,OAAO,uBADdy8B,EACuC5C,EAChC2C,EACgC,OAEA,kBAG1C/3B,EAAOzE,OAAO,yBACfyE,EAAOzE,OAAO,uBAAyB45B,GAEtCn1B,EAAOzE,OAAO,qBACfyE,EAAOzE,OAAO,mBAAqBs8B,GAI3C,SAASU,IACAv4B,EAAOzE,OAAO,8BAEXyE,EAAOzE,OAAO,4BADdy8B,EAC4CH,EAEA1C,GAG/Cn1B,EAAOzE,OAAO,oCACXy8B,EACAh4B,EAAOzE,OAAO,kCAAoCo8B,GAElD33B,EAAOzE,OAAO,kCAAoC,UAClDyE,EAAOzE,OAAO,kCAAoC,SAGrDyE,EAAOzE,OAAO,oCAEXyE,EAAOzE,OAAO,kCADdy8B,EACkD7C,EAC3C4C,EAC2C,mBAEA,uBAGrD/3B,EAAOzE,OAAO,0BACfyE,EAAOzE,OAAO,wBAA0B45B,GAEvCn1B,EAAOzE,OAAO,0BAEXyE,EAAOzE,OAAO,wBADdy8B,EACwCL,EACjCI,EACiC,kBAEA,yBAG3C/3B,EAAOzE,OAAO,oCACXyE,EAAOzE,OAAO,gCACdyE,EAAOzE,OAAO,kCAAoCyE,EAAOzE,OAAO,gCACzDy8B,EACPh4B,EAAOzE,OAAO,kCAAoCo8B,GAElD33B,EAAOzE,OAAO,kCAAoC,UAClDyE,EAAOzE,OAAO,kCAAoC,SAGrDyE,EAAOzE,OAAO,oCACXyE,EAAOzE,OAAO,gCACdyE,EAAOzE,OAAO,kCAAoCyE,EAAOzE,OAAO,gCAEhEyE,EAAOzE,OAAO,kCAAoCyE,EAAOzE,OAAO,mCAK5E,SAASi9B,IACAx4B,EAAOzE,OAAO,qBAEXyE,EAAOzE,OAAO,mBADdy8B,EACmC7C,EAC5B4C,EAC4B,mBAEA,uBAGtC/3B,EAAOzE,OAAO,qBACfyE,EAAOzE,OAAO,mBAAqByE,EAAOzE,OAAO,wBAEhDyE,EAAOzE,OAAO,iBACfyE,EAAOzE,OAAO,eAAiBs8B,GAE9B73B,EAAOzE,OAAO,8BACfyE,EAAOzE,OAAO,4BAA8ByE,EAAOzE,OAAO,mCAEzDyE,EAAOzE,OAAO,8BACfyE,EAAOzE,OAAO,4BAA8ByE,EAAOzE,OAAO,mCAEzDyE,EAAOzE,OAAO,0BACfyE,EAAOzE,OAAO,wBAA0Bu8B,GAEvC93B,EAAOzE,OAAO,8BAEXyE,EAAOzE,OAAO,4BADdy8B,EAC4CH,EACrCE,EACqC,kBAEA,yBAKxD,SAASU,IACAz4B,EAAOzE,OAAO,0BAEXyE,EAAOzE,OAAO,wBADdy8B,EACwC7C,EAEA,QAG3Cn1B,EAAOzE,OAAO,0BAEXyE,EAAOzE,OAAO,wBADdw8B,IAAYC,EAC4B,mBAEAL,GAG3C33B,EAAOzE,OAAO,sBACfyE,EAAOzE,OAAO,oBAAsBs8B,GAEnC73B,EAAOzE,OAAO,mCACfyE,EAAOzE,OAAO,iCAAmCo8B,GAEhD33B,EAAOzE,OAAO,oCACfyE,EAAOzE,OAAO,kCAAoCo8B,GAI1D,SAASe,IACA14B,EAAOzE,OAAO,wBACfyE,EAAOzE,OAAO,sBAAwB45B,GAErCn1B,EAAOzE,OAAO,6BACfyE,EAAOzE,OAAO,2BAA6B45B,GAE1Cn1B,EAAOzE,OAAO,wBAEXyE,EAAOzE,OAAO,sBADdy8B,EACsCL,EAC/BI,EAC+B,OAEA,kBAGzC/3B,EAAOzE,OAAO,oBACfyE,EAAOzE,OAAO,kBAAoBs8B,GAI1C,SAASc,IACA34B,EAAOzE,OAAO,uBACfyE,EAAOzE,OAAO,qBAAuB45B,GAEpCn1B,EAAOzE,OAAO,uBAEXyE,EAAOzE,OAAO,qBADdy8B,EACqC5C,EAC9B2C,EAC8B,OAEA,iBAGxC/3B,EAAOzE,OAAO,iCACfyE,EAAOzE,OAAO,+BAAiC28B,IAAAA,CAAOl4B,EAAOzE,OAAO,sBAAsB48B,MAAM,IAAK1C,OAEpGz1B,EAAOzE,OAAO,uCACfyE,EAAOzE,OAAO,qCAAuCyE,EAAOzE,OAAO,sBAElEyE,EAAOzE,OAAO,6BACfyE,EAAOzE,OAAO,2BAA6ByE,EAAOzE,OAAO,sBAExDyE,EAAOzE,OAAO,+BACXy8B,IACAh4B,EAAOzE,OAAO,8BAAgC45B,GAGjDn1B,EAAOzE,OAAO,gCAEXyE,EAAOzE,OAAO,8BADdy8B,EAC8CJ,EAEAM,IAAAA,CAAON,GAAaO,MAAM,IAAK1C,OAGhFz1B,EAAOzE,OAAO,yCACfyE,EAAOzE,OAAO,uCAAyCo8B,GAEtD33B,EAAOzE,OAAO,qCACXy8B,EACAh4B,EAAOzE,OAAO,mCAAqCu8B,EAC5C93B,EAAOzE,OAAO,yCAA2Co8B,IAChE33B,EAAOzE,OAAO,mCAAqCq8B,IAGtD53B,EAAOzE,OAAO,gCACfyE,EAAOzE,OAAO,8BAAgCyE,EAAOzE,OAAO,+BAE3DyE,EAAOzE,OAAO,4BACfyE,EAAOzE,OAAO,0BAA4Bo8B,GAEzC33B,EAAOzE,OAAO,yCACfyE,EAAOzE,OAAO,uCAAyCyE,EAAOzE,OAAO,wCAEpEyE,EAAOzE,OAAO,qCACfyE,EAAOzE,OAAO,mCAAqCyE,EAAOzE,OAAO,oCAEhEyE,EAAOzE,OAAO,oCACfyE,EAAOzE,OAAO,kCAAoCo8B,GAEjD33B,EAAOzE,OAAO,gCACXyE,EAAOzE,OAAO,oCAAsCo8B,EACpD33B,EAAOzE,OAAO,8BAAgCo8B,EAE9C33B,EAAOzE,OAAO,8BADPy8B,EACuCF,EACvCC,EACuC,kBAEA,yBAGjD/3B,EAAOzE,OAAO,iCAEXyE,EAAOzE,OAAO,+BADdy8B,EAC+Ch4B,EAAOzE,OAAO,qBACtDw8B,EACwC,kBAEA,yBAGlD/3B,EAAOzE,OAAO,kCACfyE,EAAOzE,OAAO,gCAAkCyE,EAAOzE,OAAO,gCAE7DyE,EAAOzE,OAAO,mCACfyE,EAAOzE,OAAO,iCAAmCo8B,GAEhD33B,EAAOzE,OAAO,+BACXyE,EAAOzE,OAAO,mCAAqCo8B,EACnD33B,EAAOzE,OAAO,6BAA+B28B,IAAAA,CAAOl4B,EAAOzE,OAAO,sBAAsB48B,MAAM,IAAK1C,MAEnGz1B,EAAOzE,OAAO,6BAA+Bo8B,GAKzD,SAASiB,IACA54B,EAAOzE,OAAO,sCAEXyE,EAAOzE,OAAO,oCADdy8B,EACoDL,EAEA33B,EAAOzE,OAAO,uBAGrEyE,EAAOzE,OAAO,sCACfyE,EAAOzE,OAAO,oCAAsCs8B,GAEnD73B,EAAOzE,OAAO,gBACfyE,EAAOzE,OAAO,cAAgBs8B,GAE7B73B,EAAOzE,OAAO,0BAEXyE,EAAOzE,OAAO,wBADdy8B,EACwC7C,EACjC4C,EACiC,mBAEA,QAG3C/3B,EAAOzE,OAAO,0BACfyE,EAAOzE,OAAO,wBAA0ByE,EAAOzE,OAAO,sBAErDyE,EAAOzE,OAAO,4BAEXyE,EAAOzE,OAAO,0BADdy8B,EAC0C7C,EACnC4C,EACmC,wBAEA,4BAG7C/3B,EAAOzE,OAAO,4BAEXyE,EAAOzE,OAAO,0BADdy8B,EAC0CL,EACnCI,EACmC,qBAEA,mBAG7C/3B,EAAOzE,OAAO,sBACfyE,EAAOzE,OAAO,oBAAsBo8B,GAEnC33B,EAAOzE,OAAO,yBACfyE,EAAOzE,OAAO,uBAAyBo8B,GAEtC33B,EAAOzE,OAAO,yBACfyE,EAAOzE,OAAO,uBAAyByE,EAAOzE,OAAO,2BAEpDyE,EAAOzE,OAAO,yBACfyE,EAAOzE,OAAO,uBAAyBo8B,GAEtC33B,EAAOzE,OAAO,qBACfyE,EAAOzE,OAAO,mBAAqBo8B,GAI3C,SAASkB,IACA74B,EAAOzE,OAAO,6BACfyE,EAAOzE,OAAO,2BAA6ByE,EAAOzE,OAAO,sBAExDyE,EAAOzE,OAAO,6BAEXyE,EAAOzE,OAAO,2BADdy8B,EAC2C5C,EACpC2C,EACoC,OAEA,iBAG9C/3B,EAAOzE,OAAO,yBAEXyE,EAAOzE,OAAO,uBADdy8B,EACuCH,EAEAF,GAG1C33B,EAAOzE,OAAO,oCACfyE,EAAOzE,OAAO,kCAAoCyE,EAAOzE,OAAO,4BAE/DyE,EAAOzE,OAAO,oCACfyE,EAAOzE,OAAO,kCAAoCyE,EAAOzE,OAAO,4BAE/DyE,EAAOzE,OAAO,gCACfyE,EAAOzE,OAAO,8BAAgCyE,EAAOzE,OAAO,wBAE5DyE,EAAOzE,OAAO,gCAAkCo8B,EAChD33B,EAAOzE,OAAO,8BAAgCyE,EAAOzE,OAAO,iBAE5DyE,EAAOzE,OAAO,8BAAgCo8B,EAE7C33B,EAAOzE,OAAO,4CACfyE,EAAOzE,OAAO,0CAA4CyE,EAAOzE,OAAO,sBAEvEyE,EAAOzE,OAAO,4CACfyE,EAAOzE,OAAO,0CAA4CyE,EAAOzE,OAAO,mCAEvEyE,EAAOzE,OAAO,6CACfyE,EAAOzE,OAAO,2CAA6CyE,EAAOzE,OAAO,6BAExEyE,EAAOzE,OAAO,kDACfyE,EAAOzE,OAAO,gDAAkDyE,EAAOzE,OAAO,6BAItF,SAASu9B,IACA94B,EAAOzE,OAAO,sBACfyE,EAAOzE,OAAO,oBAAsB45B,GAEnCn1B,EAAOzE,OAAO,sBAEXyE,EAAOzE,OAAO,oBADdy8B,EACoCL,EAC7BI,EAC6B,OAEA3C,GAGvCp1B,EAAOzE,OAAO,kBACXyE,EAAOzE,OAAO,sBAAwBo8B,EACtC33B,EAAOzE,OAAO,gBAAkB,UAEhCyE,EAAOzE,OAAO,gBAAkBo8B,GAGnC33B,EAAOzE,OAAO,kCACfyE,EAAOzE,OAAO,gCAAkC45B,GAE/Cn1B,EAAOzE,OAAO,kCAEXyE,EAAOzE,OAAO,gCADdy8B,EACgDL,EAEAO,IAAAA,CAAON,GAAaO,MAAM,IAAK1C,OAGlFz1B,EAAOzE,OAAO,8BACfyE,EAAOzE,OAAO,4BAA8Bo8B,GAE3C33B,EAAOzE,OAAO,iCAEXyE,EAAOzE,OAAO,+BADdy8B,EAC+CL,EACxCI,EACwC,kBAEA,yBAK3D,SAASgB,IACA/4B,EAAOzE,OAAO,6BAEXyE,EAAOzE,OAAO,2BADdy8B,EAC2CL,EACpCI,EACoC,kBAEA,yBAG9C/3B,EAAOzE,OAAO,8BACfyE,EAAOzE,OAAO,4BAA8Bo8B,GAE3C33B,EAAOzE,OAAO,0BACfyE,EAAOzE,OAAO,wBAA0Bu8B,GAnkBhDG,IACAG,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,MCrOR,IACAxjC,KAAAA,WACA0E,WAAAA,CACAC,KAAAA,GAEApB,OACA,OACAyoB,WAAAA,GACAyT,QAAAA,GACA/7B,SAAAA,IAGAC,MAAAA,CACAqoB,aACA,oBAGApoB,UACA,kBACA,qBAEAI,QAAAA,CACAgB,eACAC,EAAAA,IAAAA,cAAAA,KACA,mBAEAA,EAAAA,IAAAA,iBAAAA,IACA,gBACA,mBACA,6BACA,oBACA,+DACA,yCAEA,kBACA+xB,uBAAAA,KACA,gCAIAyM,aACA,oBACA,SACA,mCACA,8CACA,GACAC,EAAAA,KAAAA,CAAAA,EAAAA,OAGAA,EAAAA,EACAv7B,MAAA,OACA,wBAEAsS,KAAA7Z,GACA,OAEA,sBAEA,yCAGA8+B,SAAAA,GACA,aACA,kBACA,wBACA,MACA,sBACA,4BACA,MACA,qBACAz6B,EAAAA,MAAAA,kBAAAA,EAAAA,OACA,MAEA,mBCxGuT,MCOnT,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,QCkDhC,MAAM,GAAUM,OAAOD,SAAWC,OAAOC,OAAOF,SAAW,aACrD,GAAK,GAAQ,MACb,GAAO,GAAQ,QACf,GAAS,GAAQ,oBACjB,GAAW,YAEjB,QACAZ,WAAAA,CACAi/B,OADA,GAEAC,UAFA,EAGAC,SAHA,GAIAC,UAJA,GAKAC,QALA,GAMAC,OANA,GAOAC,WAPA,GAQAC,SAAAA,IAEA3gC,OACA,OACA4gC,eAAAA,GAAAA,KAAAA,EAAAA,QAAAA,mBACA7iC,aAAAA,GACAD,aAAAA,GACAF,aAAAA,GACAijC,MAAAA,KACAC,QAAAA,EACAC,WAAAA,EACAnkC,WAAAA,GACAyB,YAAAA,GACAH,cAAAA,GACA8iC,eAAAA,EACA/iC,WAAAA,GACAE,WAAAA,GACAC,gBAAAA,GACApC,KAAAA,GAAAA,MAAAA,SAGAkE,SAAAA,CACAtE,gBACA,+BAEAC,gBACA,gCAGAsT,UACA,OACA8xB,aAAAA,IACA,oBAEAC,cAAAA,IACA,qBAEA/H,SAAAA,CAAAA,EAAAA,KACA,oBAEAD,WAAAA,KACA,qBAIA74B,UAEA,GADA2B,OAAAA,WAAAA,EACA,mBACA,8BACAo3B,EAAAA,GAAAA,QAAAA,KACA13B,EAAAA,MAAAA,iBAGA,qBAEApB,UACA0B,OAAAA,KAAAA,KACA,eACAuyB,EAAAA,UAAAA,EAAAA,UACA,gBACA,gCACA,kBACA,WACA,eACA,kBACA4M,EAAAA,KAAAA,CAAA1kC,KAAAA,aAAAE,MAAAA,GAAAyC,SAAAA,IACAkD,EAAAA,aAAAA,EAAAA,QACAA,EAAAA,cAAAA,EAAAA,QACAA,EAAAA,OAAAA,EAAAA,QACAA,EAAAA,WAAAA,EAAAA,QACA,oBACA,qBAEAiyB,EAAAA,cAAAA,EAAAA,kBAGA9zB,QAAAA,CACAgB,eACA,UACA,6BACA,MACA,4DACApE,EAAAA,KAAAA,EAAAA,6BAAAA,IAAAA,QAEAA,EAAAA,KAAAA,MAGA,0BAEAqE,EAAAA,IAAAA,cAAAA,GACAA,EAAAA,IAAAA,eAAAA,IAEArF,cAAAA,KAIAN,kBACA2F,EAAAA,MAAAA,eAEA5E,YAAAA,GACA,yBACA,SAQA,6BAPA,6BACAO,EAAAA,QAAAA,KAEA4T,EAAAA,QAAAA,EACA,aACA,sBAKAlU,WAAAA,GACA,eACA,OAEA,qCACA,6BAmCA,aACA,4BACA+0B,GAAAA,GAAAA,KACA,UACA7gB,EAAAA,QAAAA,EACAA,EAAAA,KAAAA,WAAAA,IAAAA,KAAAA,WAAAA,EAAAA,GACA,EACA,wBAEA,gBACAvP,EAAAA,MAAAA,aAAAA,QAGA,4BA/CA,QA+BA0/B,EAAAA,KAAAA,MA9BA,iBACApN,QAAAA,kBACAqN,QAAAA,EACA3iC,KAAAA,eACAs9B,UAAAA,kBACAF,KAAAA,CACA,CACAr/B,KAAAA,KACAkiB,SAAAA,KACA,kBACA,8BACAyiB,EAAAA,KAAAA,MACA,yBAGAA,EAAAA,KAAAA,MACA,wBAIA,CACA3kC,KAAAA,MACAkiB,SAAAA,KACAyiB,EAAAA,KAAAA,MACA,2BA0BApkC,aACA,4CACA,UAEA,6BACA,yBAEA,iBAEAC,eACA,qCACA,SACA,0BAIAC,cAAAA,GACA,WACAK,EAAAA,GAAAA,KAAAA,MACA,4BACA,YAGA,MAFA,wBAMAJ,eAAAA,GACA,WACAI,EAAAA,GAAAA,KAAAA,MACA,gCACA,YAGA,MAFA,wBAMAM,aAAAA,GACA,WACA,aACA,kBACAq+B,EAAAA,EAAAA,OAAAA,KAAAA,GACA,UACA,eAAA76B,GAAAA,eAAA,OAGAK,EAAAA,MAAAA,gBAAAA,CACAw6B,QAAAA,EACAv/B,MAAAA,EAAAA,SAAAA,QAEA,MACA,sBACAu/B,EAAAA,EAAAA,WAAAA,KAAAA,GACA,eAAA76B,GAAAA,mBAAA,KAEA66B,EAAAA,KAAAA,CACAz/B,KAAAA,OACAE,MAAAA,OACA0E,GAAAA,oBAEAK,EAAAA,MAAAA,gBAAAA,CACAw6B,QAAAA,EACAv/B,MAAAA,EAAAA,aAAAA,QAEA,QAGAqB,mBACA,8BACA,CACAqD,GAAAA,iBACA5E,KAAAA,EAAAA,MAAAA,EAAAA,SAAAA,IAAAA,EAAAA,YAAAA,IACAE,MAAAA,EAAAA,UAGA+E,EAAAA,MAAAA,gBAAAA,CACAw6B,QAAAA,EACAv/B,MAAAA,KAAAA,OAAAA,KAAAA,eAAAA,YAGAe,aAAAA,GACA,yBACAuT,EAAAA,OAAAA,GAEAtT,WAAAA,GACA,yBACA,qBACA,yBAEA,aACA,UAGA,OAFA,0CACAsT,EAAAA,OAAAA,EACA,kBACA,CACA,4BACA,GACA2qB,MAAAA,aACA0F,YAAAA,MAEA,+CACA,2BAMA,wBALArwB,EAAAA,KAAAA,EAAAA,SACAA,EAAAA,KAAAA,EAAAA,KAAAA,MAAAA,aAAAA,GACA,0CACAA,EAAAA,OAAAA,QAQA3S,gBACA,uBAEA46B,aACA,6BACA,IACA,0BACA,mBACA,qBAIAqI,cACA,4BACA,GACA3F,MAAAA,QACAtyB,WAAAA,CAAAA,gBAAAA,oBAEA,iBACAk4B,eAAAC,EAAAC,GACAx2B,MAAAhE,IACA,SACA,4BAYA,OAXAA,EAAAA,UAAAA,SAAAA,IACA,OACAzK,KAAAA,EAAAA,MAAAA,aAAAA,GACA+B,KAAAA,EACAoB,KAAAA,MACAnC,QAAAA,EACAkkC,MAAAA,EACAlK,SAAAA,IAEA9d,EAAAA,KAAAA,OAAAA,OAAAA,GAAAA,OAEA,KAGAioB,OAAAC,IACAroB,QAAAA,IAAAA,OAGA2f,SAAAA,EAAAA,GACA,mCACA,KAiCA2I,EAAAA,KAAAA,UAjCA,CACA,SACA,0CAKA,GAJA,yBACA7wB,EAAAA,KAAAA,WAAAA,KAAAA,OACA/R,EAAAA,KAAAA,WAAAA,QAAAA,IAEA,EAEA,2BACA,IACA+R,EAAAA,EAAAA,GACA,sFACA6wB,EAAAA,KAAAA,cAGA,CASA,GARA7wB,EAAAA,CACA1T,GAAAA,KAAAA,UACAd,KAAAA,EACA+B,KAAAA,GAAAA,EAAAA,MAAAA,GACAE,KAAAA,GAAAA,EAAAA,MAAAA,GACAI,OAAAA,EACArB,QAAAA,IAEA,QACA,wDACAwT,EAAAA,KAAAA,EAAAA,6BAAAA,IAAAA,GAEA,gCACA6wB,EAAAA,KAAAA,OAMA,aACA,qBACA,sBACAz+B,GAAAA,SAAAA,EAAAA,KAAAA,CAAAy3B,SAAAA,SAAA,QACA,KACA,QAEA,uCACA7pB,EAAAA,OAAAA,EACAA,EAAAA,QAAAA,KAGA,uBACA,0BAIA8wB,YACA,4BACA,GACAnG,MAAAA,OACAtyB,WAAAA,CAAAA,WAAAA,oBAEA,iBACAk4B,eAAAC,EAAAC,GACAx2B,MAAAhE,IACA,SACA,4BAcA,OAbAA,EAAAA,UAAAA,SAAAA,IACA,uDACAxI,EAAAA,EAAAA,6BAAAA,IAAAA,GACA,OACAnB,GAAAA,KAAAA,UACAd,KAAAA,EAAAA,MAAAA,aAAAA,GACA+B,KAAAA,EACAE,KAAAA,EACAI,OAAAA,EACArB,QAAAA,GAEAkc,EAAAA,KAAAA,OAAAA,OAAAA,GAAAA,OAEA,KAGAioB,OAAAC,IACAroB,QAAAA,IAAAA,OAGAyhB,eACA,uBACA,gBACA,gBACA,EACA,cACA,GAEA,EAGA,gBACA,EAEA,KAGA+G,WAAAA,GACA,6BACA,iCACA,uBACA,sBACA,qCACA,4BAEAC,UAAAA,EAAAA,GACA5+B,GAAAA,cAAAA,EAAAA,EAAAA,CAAAy3B,SAAAA,WAEAoH,eACA,8BACA,uBACA,qBACA,4BACA,OAEA,0BACA,8BACAxgC,EAAAA,MAAAA,aAAAA,CACAlD,KAAAA,EAAAA,KACAoL,SAAAA,EAAAA,SACApF,QAAAA,EAAAA,QACAmE,KAAAA,EAAAA,aAAAA,EAAAA,aAAAA,KAAAA,IACAvB,OAAAA,EAAAA,aAAAA,EAAAA,aAAAA,OAAAA,UAKA+6B,gBACA,eACA,kCACA,2BACA,MACA,OAEA,4CACA,2BACA,gDACA,qBACAzgC,EAAAA,MAAAA,kBAAAA,EAAAA,UAEA,UAMA0gC,iBACA,SACA,KACA,gBACA,KACA,wBAEA/+B,GAAAA,QAAAA,KAAAA,eAAAA,CAAAy3B,SAAAA,SAAA,QACA,KACA,QAEA,WACAC,EAAAA,SAAAA,CAAAA,EAAAA,KACA,qCACA,8BACA,kCACA,iBACAsH,EAAAA,KACAC,EAAAA,GAAAA,MAAAA,GACA,YAGA,kBACAD,EAAAA,KAAAA,EAAAA,EAAAA,OAGA7+B,QAAAA,IAAAA,GAAAA,MAAAA,KACAV,EAAAA,EAAAA,QAAAA,GACA,WAEAW,EAAAA,CACA22B,UAAAA,EACAp3B,cAAAA,EACAF,OAAAA,EACAC,WAAAA,aAMA,cACA,yBAGA,kBACA,mCACA,oBACAw/B,EAAAA,EAAAA,EAAAA,GACAC,EAAAA,EAAAA,EAAAA,GACAC,EAAAA,EAAAA,EAAAA,MAIA,gBACA,iBACA,kBACAvzB,EAAAA,KAAAA,IACA,4BACA,WAMA,GALAlM,EAAAA,KAAAA,CACA6G,UAAAA,EAAAA,UACArL,KAAAA,GAAAA,KAAAA,EAAAA,EAAAA,MACAqV,WAAAA,EAAAA,cAAAA,GAAAA,KAAAA,EAAAA,EAAAA,eAAAA,KAEA,mBACA,8BACApX,EAAAA,GAAAA,EAAAA,SACA29B,EAAAA,KAAAA,CACA39B,KAAAA,EACAE,MAAAA,EAAAA,SACAiN,SAAAA,EAAAA,SACAC,UAAAA,EAAAA,UACArL,KAAAA,GAAAA,KAAAA,EAAAA,EAAAA,MACAqV,WAAAA,EAAAA,cAAAA,GAAAA,KAAAA,EAAAA,EAAAA,eAAAA,GACAqpB,WAAAA,EAAAA,aAEA,WAMA,kBACA,mBACAhuB,EAAAA,KAAAA,IACA,cACA,IACA,eACA,kBACA,cACAtP,EAAAA,OACAV,EAAAA,EACA,MACA,eACAU,EAAAA,iBACAV,EAAAA,EACA,MACA,eACAU,EAAAA,gBACAV,EAAAA,EACA,MAEA4D,EAAAA,GAAAA,KAAAA,CACArG,KAAAA,EAAAA,IAAAA,EACAE,MAAAA,GAAAA,EAAAA,GACAiD,KAAAA,EACApB,KAAAA,GAAAA,KAAAA,EAAAA,EAAAA,WAKA,kBACA,uBACA0Q,EAAAA,KAAAA,IACA,mBACAnM,EAAAA,KAAAA,CACAtG,KAAAA,GAAAA,EAAAA,GACAE,MAAAA,EAAAA,IAAAA,EACA6B,KAAAA,GAAAA,KAAAA,EAAAA,EAAAA,WAKA,gBAKA,OAJA/B,EAAAA,GAAAA,GACA,kCACAA,EAAAA,EAAAA,EAAAA,MAAAA,GAAAA,KAAAA,GAEA,IAGAimC,WAAAA,GACA,yCACA,6BACA,2BAIAC,aAAAA,GACA,yCACA,+BACA,2BAIAC,UAAAA,GACA,+BACA,gBAEA3B,eACA,mCAEA4B,WAAAA,GACA,cAEA3B,gBACA,sCC3sBqT,MCOjT,IAAY,OACd,GACA,EACA,GACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,QCVhC,IACAzkC,KAAAA,MACA0E,WAAAA,CACA2hC,OAAAA,KCXyS,MCOrS,IAAY,OACd,GACA9nC,EACAQ,GACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,Q,qBCbhC0F,EAAAA,EAAAA,OAAAA,eAA2B,EAC3BA,EAAAA,EAAAA,UAAAA,MAAsB6hC,KAAAA,OAAa,CAC/BC,QAAS,IACTC,iBAAiB,EACjBC,QAAS,CACL,eAAgB,qCAIxB,IAAIhiC,EAAAA,EAAI,CACJlG,OAASmoC,GAAMA,EAAEC,MAClBC,OAAO,UCfNC,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBxiB,IAAjByiB,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,IAOV,OAHAE,EAAoBJ,GAAU3pB,KAAK8pB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAGpEI,EAAOD,QAIfH,EAAoBM,EAAID,E,WCzBxB,IAAIE,EAAW,GACfP,EAAoBQ,EAAI,SAAS78B,EAAQ88B,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAe1f,EAAAA,EACnB,IAAStd,EAAI,EAAGA,EAAI28B,EAASpkC,OAAQyH,IAAK,CACrC68B,EAAWF,EAAS38B,GAAG,GACvB88B,EAAKH,EAAS38B,GAAG,GACjB+8B,EAAWJ,EAAS38B,GAAG,GAE3B,IAJA,IAGIi9B,GAAY,EACPjhB,EAAI,EAAGA,EAAI6gB,EAAStkC,OAAQyjB,MACpB,EAAX+gB,GAAsBC,GAAgBD,IAAax6B,OAAOkD,KAAK22B,EAAoBQ,GAAGM,OAAM,SAAS/mC,GAAO,OAAOimC,EAAoBQ,EAAEzmC,GAAK0mC,EAAS7gB,OAC3J6gB,EAAS12B,OAAO6V,IAAK,IAErBihB,GAAY,EACTF,EAAWC,IAAcA,EAAeD,IAG7C,GAAGE,EAAW,CACbN,EAASx2B,OAAOnG,IAAK,GACrB,IAAI/C,EAAI6/B,SACEjjB,IAAN5c,IAAiB8C,EAAS9C,IAGhC,OAAO8C,EAzBNg9B,EAAWA,GAAY,EACvB,IAAI,IAAI/8B,EAAI28B,EAASpkC,OAAQyH,EAAI,GAAK28B,EAAS38B,EAAI,GAAG,GAAK+8B,EAAU/8B,IAAK28B,EAAS38B,GAAK28B,EAAS38B,EAAI,GACrG28B,EAAS38B,GAAK,CAAC68B,EAAUC,EAAIC,I,cCJ/BX,EAAoBe,EAAI,SAASX,GAChC,IAAIY,EAASZ,GAAUA,EAAOa,WAC7B,WAAa,OAAOb,EAAO,YAC3B,WAAa,OAAOA,GAErB,OADAJ,EAAoBkB,EAAEF,EAAQ,CAAE/rB,EAAG+rB,IAC5BA,G,cCLRhB,EAAoBkB,EAAI,SAASf,EAASgB,GACzC,IAAI,IAAIpnC,KAAOonC,EACXnB,EAAoBoB,EAAED,EAAYpnC,KAASimC,EAAoBoB,EAAEjB,EAASpmC,IAC5EoM,OAAOk7B,eAAelB,EAASpmC,EAAK,CAAEunC,YAAY,EAAMx8B,IAAKq8B,EAAWpnC,M,cCJ3EimC,EAAoBuB,EAAI,WACvB,GAA0B,kBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAO7pC,MAAQ,IAAI8pC,SAAS,cAAb,GACd,MAAOljC,GACR,GAAsB,kBAAXE,OAAqB,OAAOA,QALjB,G,cCAxBuhC,EAAoBoB,EAAI,SAASvjB,EAAK4H,GAAQ,OAAOtf,OAAOsD,UAAUi4B,eAAeprB,KAAKuH,EAAK4H,I,cCK/F,IAAIkc,EAAkB,CACrB,IAAK,GAaN3B,EAAoBQ,EAAE5gB,EAAI,SAASgiB,GAAW,OAAoC,IAA7BD,EAAgBC,IAGrE,IAAIC,EAAuB,SAASC,EAA4BrlC,GAC/D,IAKIwjC,EAAU2B,EALVnB,EAAWhkC,EAAK,GAChBslC,EAActlC,EAAK,GACnBulC,EAAUvlC,EAAK,GAGImH,EAAI,EAC3B,GAAG68B,EAASwB,MAAK,SAASjoC,GAAM,OAA+B,IAAxB2nC,EAAgB3nC,MAAe,CACrE,IAAIimC,KAAY8B,EACZ/B,EAAoBoB,EAAEW,EAAa9B,KACrCD,EAAoBM,EAAEL,GAAY8B,EAAY9B,IAGhD,GAAG+B,EAAS,IAAIr+B,EAASq+B,EAAQhC,GAGlC,IADG8B,GAA4BA,EAA2BrlC,GACrDmH,EAAI68B,EAAStkC,OAAQyH,IACzBg+B,EAAUnB,EAAS78B,GAChBo8B,EAAoBoB,EAAEO,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAO5B,EAAoBQ,EAAE78B,IAG1Bu+B,EAAqBC,KAAK,yBAA2BA,KAAK,0BAA4B,GAC1FD,EAAmBl8B,QAAQ67B,EAAqB37B,KAAK,KAAM,IAC3Dg8B,EAAmBp+B,KAAO+9B,EAAqB37B,KAAK,KAAMg8B,EAAmBp+B,KAAKoC,KAAKg8B,I,GC/CvF,IAAIE,EAAsBpC,EAAoBQ,OAAE/iB,EAAW,CAAC,MAAM,WAAa,OAAOuiB,EAAoB,QAC1GoC,EAAsBpC,EAAoBQ,EAAE4B,I","sources":["webpack://my-editor/./src/App.vue?862d","webpack://my-editor/./src/components/Window.vue?f0d4","webpack://my-editor/./src/components/EditorBar.vue?d5d5","webpack://my-editor/./src/components/EditorBarMenu.vue?6fa6","webpack://my-editor/./src/components/Menu.vue?63c5","webpack://my-editor/src/components/Menu.vue","webpack://my-editor/./src/components/Menu.vue?5e7b","webpack://my-editor/./src/components/Menu.vue","webpack://my-editor/./src/event.js","webpack://my-editor/src/components/EditorBarMenu.vue","webpack://my-editor/./src/components/EditorBarMenu.vue?6809","webpack://my-editor/./src/components/EditorBarMenu.vue","webpack://my-editor/./src/data/globalData.js","webpack://my-editor/./src/common/util.js","webpack://my-editor/./src/module/shortcut/editor-bar.js","webpack://my-editor/src/components/EditorBar.vue","webpack://my-editor/./src/components/EditorBar.vue?761d","webpack://my-editor/./src/components/EditorBar.vue","webpack://my-editor/./src/components/Editor.vue?cec4","webpack://my-editor/./src/module/tokenizer/index.js","webpack://my-editor/./src/module/lint/index.js","webpack://my-editor/./src/data/enum.js","webpack://my-editor/./src/module/autocomplete/index.js","webpack://my-editor/./src/common/btree.js","webpack://my-editor/./src/module/fold/index.js","webpack://my-editor/./src/module/search/index.js","webpack://my-editor/./src/module/select/index.js","webpack://my-editor/./src/module/cursor/index.js","webpack://my-editor/./src/module/history/index.js","webpack://my-editor/./src/module/context/index.js","webpack://my-editor/./src/module/shortcut/editor.js","webpack://my-editor/./src/components/Search.vue?2ea8","webpack://my-editor/src/components/Search.vue","webpack://my-editor/./src/components/Search.vue?a1d0","webpack://my-editor/./src/components/Search.vue","webpack://my-editor/./src/components/AutoTip.vue?d675","webpack://my-editor/src/components/AutoTip.vue","webpack://my-editor/./src/components/AutoTip.vue?0baf","webpack://my-editor/./src/components/AutoTip.vue","webpack://my-editor/./src/components/Tip.vue?9a48","webpack://my-editor/src/components/Tip.vue","webpack://my-editor/./src/components/Tip.vue?c927","webpack://my-editor/./src/components/Tip.vue","webpack://my-editor/src/components/Editor.vue","webpack://my-editor/./src/components/Editor.vue?baff","webpack://my-editor/./src/components/Editor.vue","webpack://my-editor/./src/components/TitleBar.vue?03aa","webpack://my-editor/./src/module/shortcut/menu-bar.js","webpack://my-editor/src/components/TitleBar.vue","webpack://my-editor/./src/components/TitleBar.vue?8226","webpack://my-editor/./src/components/TitleBar.vue","webpack://my-editor/./src/components/StatusBar.vue?eafc","webpack://my-editor/src/components/StatusBar.vue","webpack://my-editor/./src/components/StatusBar.vue?132e","webpack://my-editor/./src/components/StatusBar.vue","webpack://my-editor/./src/components/SideBar.vue?f67e","webpack://my-editor/./src/components/SideTree.vue?ccf9","webpack://my-editor/src/components/SideTree.vue","webpack://my-editor/./src/components/SideTree.vue?d92b","webpack://my-editor/./src/components/SideTree.vue","webpack://my-editor/./src/components/SideBarMenu.vue?cf1a","webpack://my-editor/src/components/SideBarMenu.vue","webpack://my-editor/./src/components/SideBarMenu.vue?1134","webpack://my-editor/./src/components/SideBarMenu.vue","webpack://my-editor/src/components/SideBar.vue","webpack://my-editor/./src/components/SideBar.vue?ce7f","webpack://my-editor/./src/components/SideBar.vue","webpack://my-editor/./src/components/Dialog.vue?ff40","webpack://my-editor/src/components/Dialog.vue","webpack://my-editor/./src/components/Dialog.vue?8211","webpack://my-editor/./src/components/Dialog.vue","webpack://my-editor/./src/components/WindowMenu.vue?3724","webpack://my-editor/src/components/WindowMenu.vue","webpack://my-editor/./src/components/WindowMenu.vue?25d3","webpack://my-editor/./src/components/WindowMenu.vue","webpack://my-editor/./src/components/CmdPanel.vue?8ddc","webpack://my-editor/./src/module/theme/index.js","webpack://my-editor/src/components/CmdPanel.vue","webpack://my-editor/./src/components/CmdPanel.vue?07bb","webpack://my-editor/./src/components/CmdPanel.vue","webpack://my-editor/src/components/Window.vue","webpack://my-editor/./src/components/Window.vue?5df1","webpack://my-editor/./src/components/Window.vue","webpack://my-editor/src/App.vue","webpack://my-editor/./src/App.vue?1acc","webpack://my-editor/./src/App.vue","webpack://my-editor/./src/main.js","webpack://my-editor/webpack/bootstrap","webpack://my-editor/webpack/runtime/chunk loaded","webpack://my-editor/webpack/runtime/compat get default export","webpack://my-editor/webpack/runtime/define property getters","webpack://my-editor/webpack/runtime/global","webpack://my-editor/webpack/runtime/hasOwnProperty shorthand","webpack://my-editor/webpack/runtime/jsonp chunk loading","webpack://my-editor/webpack/startup"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Window')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"window\",staticClass:\"my-window\",style:({\n        'padding-top': _vm._topBarHeight,\n        'padding-bottom': _vm._statusHeight,\n    }),on:{\"mousedown\":_vm.onWindMouseDown}},[(_vm.mode === 'app')?_c('side-bar',{ref:\"sideBar\"}):_vm._e(),_c('div',{ref:\"rightWrap\",staticClass:\"my-right-wrap\",on:{\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onContextmenu.apply(null, arguments)}}},[_c('editor-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.editorList.length),expression:\"editorList.length\"}],attrs:{\"editorList\":_vm.editorList},on:{\"change\":_vm.onChangeTab,\"close\":_vm.onCloseTab,\"close-all\":_vm.onCloseAll,\"close-saved\":_vm.onCloseSaved,\"close-to-left\":_vm.onCloseToLeft,\"close-to-right\":_vm.onCloseToRight}}),_vm._l((_vm.editorList),function(item){return [_c('editor',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.active),expression:\"item.active\"}],key:item.id,ref:'editor' + item.id,refInFor:true,attrs:{\"active\":item.active,\"id\":item.id},on:{\"change\":function($event){return _vm.onFileChange(item.id)},\"save\":function($event){return _vm.onSaveFile(item.id)}}})]}),_c('window-menu',{ref:\"winMenu\"})],2),_c('title-bar',{ref:\"titleBar\",attrs:{\"height\":_vm.topBarHeight},on:{\"change\":_vm.onMenuChange}}),_c('status-bar',{ref:\"statusBar\",attrs:{\"height\":_vm.statusHeight,\"languageList\":_vm.languageList},on:{\"select-langeuage\":_vm.onSelectLanguage}}),_c('cmd-panel'),_c('Dialog',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dialogVisible),expression:\"dialogVisible\"}],attrs:{\"btns\":_vm.dialogBtns,\"content\":_vm.dialogContent,\"icon\":this.dialogIcon,\"icon-color\":this.dialogIconColor,\"overlay\":true,\"title\":_vm.dialogTilte},on:{\"close\":_vm.onDialogClose}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"editorBar\",staticClass:\"my-editor-bar\",on:{\"selectstart\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"bar-scroller my-scroll-overlay my-scroll-mini\"},_vm._l((_vm.editorList),function(item){return _c('div',{staticClass:\"bar-item my-hover\",class:[item.active ? 'my-active' : ''],attrs:{\"title\":item.path},on:{\"click\":function($event){return _vm.onClickItem(item.id)},\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onContextmenu($event, item.id)}}},[_c('div',{staticClass:\"bar-content\",class:[item.icon]},[_c('span',{staticClass:\"bar-text\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"bar-icon\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.saved),expression:\"item.saved\"}],staticClass:\"bar-close-icon iconfont icon-close\",attrs:{\"title\":\"close\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onClose(item.id)}}}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!item.saved),expression:\"!item.saved\"}],staticClass:\"bar-dot\"})])])])}),0),_c('editor-bar-menu',{ref:\"editorBarMenu\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wrap\"},[_c('Menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onMenuChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"scroller\",staticClass:\"my-menu my-shadow my-border\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],ref:\"content\"},[_vm._l((_vm.myMenuList),function(group,index){return [_c('div',{staticClass:\"my-menu-group\"},_vm._l((group),function(item){return _c('div',{staticClass:\"my-menu-item my-center-between my-hover\",class:{\n                        'my-active': _vm.checkable && item.checked,\n                        disabled: item.disabled,\n                    },on:{\"mousedown\":function($event){return _vm.onClick(item)},\"mouseover\":function($event){return _vm.onHover(item)}}},[_c('div',{staticClass:\"my-menu-title\"},[_vm._v(_vm._s(item.name))]),(item.shortcut)?_c('div',{staticClass:\"my-menu-shortcut\"},[_vm._v(\" \"+_vm._s(item.shortcut)+\" \")]):_vm._e()])}),0),(index < _vm.myMenuList.length - 1)?_c('div',{staticClass:\"my-separator\"}):_vm._e()]})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n    <div :style=\"styles\" @mousedown.stop class=\"my-menu my-shadow my-border\" ref=\"scroller\">\r\n        <div v-show=\"visible\" ref=\"content\">\r\n            <template v-for=\"(group, index) in myMenuList\">\r\n                <div class=\"my-menu-group\">\r\n                    <div\r\n                        :class=\"{\r\n                            'my-active': checkable && item.checked,\r\n                            disabled: item.disabled,\r\n                        }\"\r\n                        @mousedown=\"onClick(item)\"\r\n                        @mouseover=\"onHover(item)\"\r\n                        class=\"my-menu-item my-center-between my-hover\"\r\n                        v-for=\"item in group\"\r\n                    >\r\n                        <div class=\"my-menu-title\">{{ item.name }}</div>\r\n                        <div class=\"my-menu-shortcut\" v-if=\"item.shortcut\">\r\n                            {{ item.shortcut }}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"my-separator\" v-if=\"index < myMenuList.length - 1\"></div>\r\n            </template>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport $ from 'jquery';\r\nexport default {\r\n    name: 'Menu',\r\n    props: {\r\n        menuList: {\r\n            type: Array,\r\n            default: [],\r\n        },\r\n        styles: {\r\n            type: Object,\r\n        },\r\n        checkable: {\r\n            type: Boolean,\r\n            default: true,\r\n        },\r\n        hoverCheck: {\r\n            type: Boolean,\r\n            default: false,\r\n        },\r\n        value: {\r\n            type: [Number, String],\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            index: -1,\r\n            itemHeight: 26,\r\n            myMenuList: [],\r\n        };\r\n    },\r\n    computed: {\r\n        visible() {\r\n            for (let i = 0; i < this.myMenuList.length; i++) {\r\n                if (this.myMenuList[i].length) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n    },\r\n    watch: {\r\n        menuList() {\r\n            this.initMenu();\r\n        },\r\n        value(newVal) {\r\n            this.setChecked(newVal);\r\n        },\r\n        index() {\r\n            this.$nextTick(() => {\r\n                this.scrollToIndex();\r\n            });\r\n        },\r\n    },\r\n    created() {\r\n        this.initMenu();\r\n    },\r\n    mounted() {\r\n        this.keydownFn = (e) => {\r\n            if (this.$refs.content.clientHeight) {\r\n                if (e.keyCode === 38) {\r\n                    this.setCheckedByIndex(this.index - 1);\r\n                } else if (e.keyCode === 40) {\r\n                    this.setCheckedByIndex(this.index + 1);\r\n                } else if (e.keyCode === 13) {\r\n                    if (this.index > -1) {\r\n                        this.$emit('change', this.indexMap[this.index]);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        $(window).on('keydown', this.keydownFn);\r\n    },\r\n    destroyed() {\r\n        $(window).unbind('keydown', this.keydownFn);\r\n    },\r\n    methods: {\r\n        initMenu() {\r\n            let index = -1;\r\n            let menuList = this.menuList;\r\n            this.index = -1;\r\n            this.maxIndex = -1;\r\n            this.indexMap = {};\r\n            if (menuList[0] && !(menuList[0] instanceof Array)) {\r\n                menuList = [menuList];\r\n            }\r\n            this.myMenuList = menuList.map((group) => {\r\n                return group.map((item) => {\r\n                    item = Object.assign({}, item);\r\n                    item.value = item.value === undefined ? item.name : item.value;\r\n                    item.checked = item.value === this.value;\r\n                    this.indexMap[++index] = item;\r\n                    this.maxIndex = index;\r\n                    if (item.checked) {\r\n                        this.index = index;\r\n                    }\r\n                    return item;\r\n                });\r\n            });\r\n        },\r\n        scrollToIndex() {\r\n            let $scroller = this.$refs.scroller;\r\n            let height = (this.index + 1) * this.itemHeight;\r\n            if ($scroller && height > $scroller.clientHeight + $scroller.scrollTop) {\r\n                $scroller.scrollTop = height - $scroller.clientHeight;\r\n            } else if ($scroller && height < $scroller.scrollTop + this.itemHeight) {\r\n                $scroller.scrollTop = height - this.itemHeight;\r\n            }\r\n        },\r\n        onClick(item) {\r\n            if (item.disabled) {\r\n                return;\r\n            }\r\n            this.clearChecked();\r\n            item.checked = true;\r\n            this.$emit('change', item);\r\n        },\r\n        onHover(item) {\r\n            this.hoverCheck && this.setChecked(item.value);\r\n        },\r\n        setChecked(value) {\r\n            let index = -1;\r\n            this.myMenuList.forEach((group) => {\r\n                group.forEach((item) => {\r\n                    item.checked = item.value === value;\r\n                    index++;\r\n                    if (item.checked) {\r\n                        this.index = index;\r\n                    }\r\n                });\r\n            });\r\n            this.myMenuList.splice();\r\n        },\r\n        setCheckedByIndex(index) {\r\n            this.clearChecked();\r\n            if (index < 0) {\r\n                index = this.maxIndex;\r\n            } else if (index > this.maxIndex) {\r\n                index = 0;\r\n            }\r\n            this.indexMap[index].checked = true;\r\n            this.index = index;\r\n            this.myMenuList.splice();\r\n        },\r\n        clearChecked() {\r\n            this.myMenuList.forEach((group) => {\r\n                group.forEach((item) => {\r\n                    item.checked = false;\r\n                });\r\n            });\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Menu.vue?vue&type=template&id=88f3abd8&\"\nimport script from \"./Menu.vue?vue&type=script&lang=js&\"\nexport * from \"./Menu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\n\r\nconst bus = new Vue();\r\n\r\nexport default bus;","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div ref=\"wrap\">\r\n        <Menu\r\n            :checkable=\"false\"\r\n            :menuList=\"menuList\"\r\n            :styles=\"menuStyle\"\r\n            @change=\"onMenuChange\"\r\n            ref=\"menu\"\r\n            v-show=\"menuVisible\"\r\n        ></Menu>\r\n    </div>\r\n</template>\r\n<script>\r\nimport $ from \"jquery\";\r\nimport Menu from \"./Menu\";\r\nimport EventBus from \"@/event\";\r\n\r\nexport default {\r\n    name: \"EditorBar\",\r\n    components: {\r\n        Menu,\r\n    },\r\n    data() {\r\n        return {\r\n            menuList: [\r\n                [\r\n                    {\r\n                        name: \"Close\",\r\n                        op: \"close\",\r\n                        shortcut: \"Ctrl+F4\",\r\n                    },\r\n                    {\r\n                        name: \"Close to the Left\",\r\n                        op: \"closeToLeft\",\r\n                    },\r\n                    {\r\n                        name: \"Close to the Right\",\r\n                        op: \"closeToRight\",\r\n                    },\r\n                    {\r\n                        name: \"Close Saved\",\r\n                        op: \"closeSaved\",\r\n                        shortcut: \"Ctrl+K U\",\r\n                    },\r\n                    {\r\n                        name: \"Close All\",\r\n                        op: \"closeAll\",\r\n                        shortcut: \"Ctrl+K W\",\r\n                    },\r\n                ],\r\n            ],\r\n            menuVisible: false,\r\n            menuStyle: {\r\n                left: \"10px\",\r\n                top: \"40px\",\r\n            },\r\n        };\r\n    },\r\n    created() {\r\n        this.initEventBus();\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on(\"close-menu\", () => {\r\n                this.menuVisible = false;\r\n            });\r\n        },\r\n        show(e, id) {\r\n            this.tabId = id;\r\n            this.menuVisible = true;\r\n            let $parent = $(this.$refs.wrap).parent();\r\n            this.$nextTick(() => {\r\n                let offset = $parent.offset();\r\n                let menuWidth = this.$refs.menu.$el.clientWidth;\r\n                if (\r\n                    menuWidth + e.clientX >\r\n                    offset.left + $parent[0].clientWidth\r\n                ) {\r\n                    this.menuStyle.left =\r\n                        e.clientX - offset.left - menuWidth + \"px\";\r\n                } else {\r\n                    this.menuStyle.left = e.clientX - offset.left + \"px\";\r\n                }\r\n                this.menuStyle.top = e.clientY - offset.top + \"px\";\r\n            });\r\n        },\r\n        onMenuChange(item) {\r\n            switch (item.op) {\r\n                case \"close\":\r\n                    this.$parent.$emit(\"close\", this.tabId);\r\n                    break;\r\n                case \"closeToLeft\":\r\n                    this.$parent.$emit(\"close-to-left\", this.tabId);\r\n                    break;\r\n                case \"closeToRight\":\r\n                    this.$parent.$emit(\"close-to-right\", this.tabId);\r\n                    break;\r\n                case \"closeSaved\":\r\n                    this.$parent.$emit(\"close-saved\", this.tabId);\r\n                    break;\r\n                case \"closeAll\":\r\n                    this.$parent.$emit(\"close-all\", this.tabId);\r\n                    break;\r\n            }\r\n            this.menuVisible = false;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./EditorBarMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./EditorBarMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorBarMenu.vue?vue&type=template&id=dd126106&\"\nimport script from \"./EditorBarMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorBarMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","const require = window.require || window.parent.require || function () {};\r\nconst remote = require('@electron/remote');\r\nconst path = require('path');\r\nconst dirname = remote.app.getAppPath();\r\n\r\nconst globalData = {\r\n    dirname: dirname,\r\n    scopeIdMap: {},\r\n    scopeReg: null,\r\n    colors: {},\r\n    nowTheme: {\r\n        value: 'Monokai',\r\n        type: 'dark',\r\n        path: path.join(dirname, 'main/extensions/theme-monokai/themes/monokai-color-theme.json'),\r\n    },\r\n    nowIconTheme: {\r\n        value: 'vs-seti',\r\n        path: path.join(dirname, 'main/extensions/theme-seti/icons/vs-seti-icon-theme.json'),\r\n    },\r\n    nowIconData: {},\r\n    themes: [],\r\n    iconThemes: [],\r\n    languageList: [],\r\n    scopeFileList: [],\r\n    scopeTokenList: [],\r\n    grammars: {},\r\n    sourceWordMap: {},\r\n    defaultWordPattern: '(-?\\\\d*\\\\.\\\\d\\\\w*)|([^\\\\`\\\\~\\\\!\\\\@\\\\%\\\\^\\\\&\\\\*\\\\(\\\\)\\\\-\\\\=\\\\+\\\\[\\\\{\\\\]\\\\}\\\\\\\\\\\\|\\\\;\\\\:\\\\\\'\\\\\"\\\\,\\\\.\\\\<\\\\>/\\\\?\\\\s]+)',\r\n};\r\n\r\nexport default globalData;\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2020-10-31 13:48:50\r\n * @Description: 工具类\r\n */\r\nimport globalData from '@/data/globalData';\r\nimport $ from 'jquery';\r\nimport stripJsonComments from 'strip-json-comments';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nconst fs = require('fs');\r\n\r\nclass Util {\r\n    static readClipboard() {\r\n        if (window.clipboardData) {\r\n            return new Promise((resolve) => {\r\n                resolve(clipboardData.getData('Text'));\r\n            });\r\n        } else if (navigator.clipboard) {\r\n            return navigator.clipboard.readText();\r\n        }\r\n    }\r\n    static writeClipboard(text) {\r\n        if (window.clipboardData) {\r\n            clipboardData.setData('Text', text);\r\n        } else if (navigator.clipboard) {\r\n            navigator.clipboard.writeText(text);\r\n        }\r\n    }\r\n    //获取数字\r\n    static getNum(value) {\r\n        value = String(value);\r\n        value = value.replace(/[^0123456789\\.]/g, '');\r\n        var regex = /^\\d+(\\.\\d*)?$/;\r\n        var r = regex.exec(value);\r\n        var num = (r && r[0]) || '';\r\n        if (num) {\r\n            num = Number(r[0]);\r\n        }\r\n        return num;\r\n    }\r\n    //生成指定个数的空白符\r\n    static space(tabSize) {\r\n        var val = '';\r\n        for (var tmp = 0; tmp < tabSize; tmp++) {\r\n            val += ' ';\r\n        }\r\n        return val;\r\n    }\r\n    //数组数字排序\r\n    static sortNum(arr) {\r\n        arr.sort(function (arg1, arg2) {\r\n            return Number(arg1) - Number(arg2);\r\n        });\r\n    }\r\n    //获取字符宽度\r\n    static getCharWidth(wrap) {\r\n        var str1 = '------------------------------------------------------------------------------------';\r\n        var str2 = '一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一';\r\n        var id1 = 'char-width-' + Util.getUUID();\r\n        var id2 = 'char-width-' + Util.getUUID();\r\n        var $tempDom = $(`<div class=\"my-line\">\r\n        <div class=\"my-code\"><span id=\"${id1}\">${str1}</span><span id=\"${id2}\">${str2}</span></div>\r\n        </div>`);\r\n        $(wrap).append($tempDom);\r\n        var dom = $('#' + id1)[0];\r\n        var charWidth = dom.scrollWidth / str1.length;\r\n        var charHight = dom.clientHeight;\r\n        var fontSize = window.getComputedStyle ? window.getComputedStyle(dom, null).fontSize : dom.currentStyle.fontSize;\r\n        var fullAngleCharWidth = $('#' + id2)[0].scrollWidth / str2.length;\r\n        $tempDom.remove();\r\n        return {\r\n            charWidth: charWidth,\r\n            fullAngleCharWidth: fullAngleCharWidth,\r\n            charHight: charHight,\r\n            fontSize: fontSize,\r\n        };\r\n    }\r\n    /**\r\n     * 获取文本在浏览器中的真实宽度\r\n     * @param  {string} str       文本\r\n     * @param  {number} charW     半角符号/文字宽度\r\n     * @param  {number} fullCharW 全角符号/文字宽度\r\n     * @param  {number} tabSize   tab符所占宽度\r\n     * @param  {number} start     文本开始索引\r\n     * @param  {number} end       文本结束索引\r\n     * @return {number}           文本真实宽度\r\n     */\r\n    static getStrWidth(str, charW, fullCharW, tabSize, start, end) {\r\n        tabSize = tabSize || 4;\r\n        if (typeof start != 'undefined') {\r\n            str = str.substr(start);\r\n        }\r\n        if (typeof end != 'undefined') {\r\n            str = str.substring(0, end - start);\r\n        }\r\n        var match = str.match(this.fullAngleReg);\r\n        var width = str.length * charW;\r\n        var tabNum = str.match(/\\t/g);\r\n        tabNum = (tabNum && tabNum.length) || 0;\r\n        match = (match && match.length) || 0;\r\n        if (match) {\r\n            match = match - tabNum;\r\n            width = match * fullCharW + (str.length - match) * charW;\r\n            width += tabNum * charW * (tabSize - 1);\r\n        }\r\n        return width;\r\n    }\r\n    /**\r\n     * 获取文本在浏览器中的真实宽度\r\n     * @param  {string} str       文本\r\n     * @param  {DOM} wrap     容器\r\n     */\r\n    static getStrExactWidth(str, tabSize, wrap) {\r\n        Util.getStrExactWidth.count = Util.getStrExactWidth.count || 0;\r\n        Util.getStrExactWidth.count++;\r\n        if (!str) {\r\n            return 0;\r\n        }\r\n        var id = 'str-width-' + Util.getUUID();\r\n        var $tempDom = $(`<div class=\"my-line my-temp-text\" style=\"visibility:hidden\">\r\n        <div class=\"my-code\" id=\"${id}\">${_splitStr(str)}</div>\r\n        </div>`);\r\n        $(wrap).append($tempDom);\r\n        var dom = $('#' + id)[0];\r\n        var charWidth = dom.clientWidth;\r\n        $('.my-temp-text').remove();\r\n        // if (Util.getStrExactWidth.count > 5) { //避免频繁删除dom导致浏览器卡顿\r\n        //     $('.my-temp-text').remove();\r\n        // } else {\r\n        //     clearTimeout(Util.getStrExactWidth.timer);\r\n        //     Util.getStrExactWidth.timer = setTimeout(() => {\r\n        //         $('.my-temp-text').remove();\r\n        //     }, 500);\r\n        // }\r\n        return charWidth;\r\n\r\n        function _splitStr(str) {\r\n            let count = Math.floor(str.length / 100);\r\n            let result = [];\r\n            for (let i = 0; i < count; i++) {\r\n                let column = i * 100;\r\n                result.push(Util.htmlTrans(str.slice(column, column + 100)));\r\n            }\r\n            count = count * 100;\r\n            if (count < str.length) {\r\n                result.push(Util.htmlTrans(str.slice(count)));\r\n            }\r\n            return `<span>${result.join('</span><span>').replace(/\\t/g, Util.space(tabSize || 4))}</span>`;\r\n        }\r\n    }\r\n    //<,>转义\r\n    static htmlTrans(cont) {\r\n        cont = cont.replace(/\\&\\#/g, '&amp;#');\r\n        return cont.replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n    }\r\n    // 深度克隆\r\n    static deepAssign(targetObj, originObj, noDeepKeys) {\r\n        return _assign(targetObj, originObj, noDeepKeys, new Map());\r\n\r\n        function _assign(targetObj, originObj, noDeepKeys, assigned) {\r\n            noDeepKeys = noDeepKeys || [];\r\n            for (var key in originObj) {\r\n                var value = originObj[key];\r\n                if (noDeepKeys.indexOf(key) > -1) {\r\n                    targetObj[key] = value;\r\n                    continue;\r\n                }\r\n                if (typeof value === 'object' && !(value instanceof RegExp) && value !== null && (!value.nodeName || !value.nodeType)) {\r\n                    if (assigned.has(value)) {\r\n                        targetObj[key] = assigned.get(value);\r\n                    } else {\r\n                        let tmp = null;\r\n                        if (value instanceof Array) {\r\n                            tmp = targetObj[key] || [];\r\n                            assigned.set(value, tmp);\r\n                            targetObj[key] = _assign(tmp, value, noDeepKeys, new Map(assigned));\r\n                        } else {\r\n                            tmp = targetObj[key] || {};\r\n                            assigned.set(value, tmp);\r\n                            targetObj[key] = _assign(tmp, value, noDeepKeys, new Map(assigned));\r\n                        }\r\n                    }\r\n                } else {\r\n                    targetObj[key] = value;\r\n                }\r\n            }\r\n            return targetObj;\r\n        }\r\n    }\r\n    static getUUID(len) {\r\n        len = len || 16;\r\n        var str = '';\r\n        for (var i = 0; i < len; i++) {\r\n            str += ((Math.random() * 16) | 0).toString(16);\r\n        }\r\n        return str;\r\n    }\r\n    /**\r\n     * 比较坐标的前后\r\n     * @param {Object} start\r\n     * @param {Object} end\r\n     */\r\n    static comparePos(start, end) {\r\n        if (start.line > end.line || (start.line == end.line && start.column > end.column)) {\r\n            return 1;\r\n        } else if (start.line == end.line && start.column == end.column) {\r\n            return 0;\r\n        } else {\r\n            return -1;\r\n        }\r\n    }\r\n    static createWorker(funStr) {\r\n        var blob = new Blob([funStr]);\r\n        var url = window.URL.createObjectURL(blob);\r\n        var worker = new Worker(url);\r\n        return worker;\r\n    }\r\n    static defineProperties(target, context, properties) {\r\n        let result = {};\r\n        properties.forEach((property) => {\r\n            result[property] = {\r\n                get: function () {\r\n                    if (typeof context[property] == 'function') {\r\n                        return context[property].bind(context);\r\n                    } else {\r\n                        return context[property];\r\n                    }\r\n                },\r\n            };\r\n        });\r\n        Object.defineProperties(target, result);\r\n    }\r\n    static getLanguageById(languageList, language) {\r\n        for (let i = 0; i < languageList.length; i++) {\r\n            if (languageList[i].language === language) {\r\n                return languageList[i];\r\n            }\r\n        }\r\n    }\r\n    static getLanguageByScopeName(languageList, scopeName) {\r\n        for (let i = 0; i < languageList.length; i++) {\r\n            if (languageList[i].scopeName === scopeName) {\r\n                return languageList[i];\r\n            }\r\n        }\r\n    }\r\n    static getWordPattern(language) {\r\n        let wordPattern = globalData.defaultWordPattern;\r\n        language = Util.getLanguageById(globalData.languageList, language);\r\n        if (language) {\r\n            let _wordPattern = globalData.sourceWordMap[language.scopeName];\r\n            _wordPattern = _wordPattern && _wordPattern.pattern;\r\n            wordPattern = _wordPattern || wordPattern;\r\n        }\r\n        return new RegExp(wordPattern);\r\n    }\r\n    static getIconByPath(iconData, path, type, fileType, opened) {\r\n        let fileName = /[^\\\\\\/]+$/.exec(path);\r\n        let suffix1 = '';\r\n        let suffix2 = '';\r\n        fileName = fileName && fileName[0];\r\n        if (!iconData) {\r\n            return '';\r\n        }\r\n        if (fileName) {\r\n            suffix1 = /(?<=\\.)[^\\.]+$/.exec(fileName);\r\n            suffix2 = /(?<=\\.)[^\\.]+\\.[^\\.]+$/.exec(fileName);\r\n            suffix1 = suffix1 && suffix1[0];\r\n            suffix2 = suffix2 && suffix2[0];\r\n        }\r\n        if (type === 'light' || type === 'contrast light') {\r\n            iconData = iconData.light;\r\n        }\r\n        if (fileType === 'dir') {\r\n            return opened ? iconData.folderExpanded : iconData.folder;\r\n        }\r\n        if (iconData.fileNames && iconData.fileNames[fileName]) {\r\n            return iconData.fileNames[fileName];\r\n        }\r\n        if (iconData.fileExtensions && iconData.fileExtensions[suffix2]) {\r\n            return iconData.fileExtensions[suffix2];\r\n        }\r\n        if (iconData.fileExtensions && iconData.fileExtensions[suffix1]) {\r\n            return iconData.fileExtensions[suffix1];\r\n        }\r\n        return iconData.file;\r\n    }\r\n    static readFile(path) {\r\n        return new Promise((resolve, reject) => {\r\n            fs.readFile(path, (error, data) => (error ? reject(error) : resolve(data)));\r\n        });\r\n    }\r\n    static loadJsonFile(fullPath) {\r\n        return Util.readFile(fullPath).then((data) => {\r\n            data = data.toString();\r\n            data = stripJsonComments(data);\r\n            data = data.replaceAll(/\\,(?=\\s*(?:(?:\\r\\n|\\n|\\r))*\\s*[\\]\\}])/g, '');\r\n            data = JSON.parse(data);\r\n            return data;\r\n        });\r\n    }\r\n    /**\r\n     * 模糊匹配【word是否存在于target中】\r\n     * @param {String} word 被搜索的单词\r\n     * @param {String} target 模板单词\r\n     */\r\n    static fuzzyMatch(word, target, fullMatch) {\r\n        let wordMap = {};\r\n        let towMap = {};\r\n        let wordLength = 0;\r\n        let score = 0;\r\n        let preFinedChar = '';\r\n        let preFinedOriginChar = '';\r\n        let preFinded = false;\r\n        let targetMap = {};\r\n        let count = 0;\r\n        let indexs = [];\r\n        let result = null;\r\n        let _target = target.toLowerCase();\r\n        if (word === target) {\r\n            return fullMatch ? { score: 100, indexs: [] } : null;\r\n        }\r\n        _setMap();\r\n        for (let i = 0; i < target.length; i++) {\r\n            let originChar = target[i];\r\n            let char = _target[i];\r\n            if (\r\n                wordMap[char] &&\r\n                //保证前后字符顺序最多只出现一个位置颠倒且颠倒的两个字符必须相邻\r\n                (!preFinedChar || towMap[preFinedChar + char] || (towMap[char + preFinedChar] && preFinded))\r\n            ) {\r\n                if (!targetMap[char] || targetMap[char] < wordMap[char]) {\r\n                    targetMap[char] = targetMap[char] ? targetMap[char] + 1 : 1;\r\n                    indexs.push(i);\r\n                    if (char === '_' || char === '$') {\r\n                        //检测到连接符+10分\r\n                        score += 10;\r\n                    } else if (preFinded) {\r\n                        //检测到连续匹配\r\n                        score += 5;\r\n                        if (towMap[preFinedChar + char]) {\r\n                            //连续匹配且顺序正确\r\n                            score += 1;\r\n                            if (_humpCheck(preFinedOriginChar, originChar) && preFinded) {\r\n                                //检测到驼峰命名+10分\r\n                                score += 5;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (_complete(char)) {\r\n                        return result;\r\n                    }\r\n                    if (!towMap[char + preFinedChar] || towMap[preFinedChar + char]) {\r\n                        preFinedChar = char;\r\n                        preFinedOriginChar = originChar;\r\n                    }\r\n                    preFinded = true;\r\n                } else {\r\n                    //检测到字符不匹配-1分\r\n                    score--;\r\n                    preFinded = char === preFinedChar;\r\n                }\r\n            } else {\r\n                if (!count && score > -9) {\r\n                    //检测到前三个首字符不匹配-3分\r\n                    score -= 3;\r\n                } else {\r\n                    //检测到字符不匹配-1分\r\n                    score--;\r\n                }\r\n                preFinded = char === preFinedChar;\r\n            }\r\n        }\r\n\r\n        // 预处理搜素单词\r\n        function _setMap() {\r\n            if (Util.fuzzyMatch.cache && Util.fuzzyMatch.cache.word === word) {\r\n                wordMap = Util.fuzzyMatch.cache.wordMap;\r\n                towMap = Util.fuzzyMatch.cache.towMap;\r\n                wordLength = Util.fuzzyMatch.cache.wordLength;\r\n                return;\r\n            }\r\n            let preChar = '';\r\n            for (let i = 0; i < word.length; i++) {\r\n                let char = word[i].toLowerCase();\r\n                wordMap[char] = wordMap[char] ? wordMap[char] + 1 : 1;\r\n                if (i > 0) {\r\n                    towMap[preChar + char] = true;\r\n                }\r\n                preChar = char;\r\n            }\r\n            wordLength = Object.keys(wordMap).length;\r\n            Util.fuzzyMatch.cache = {\r\n                word: word,\r\n                wordMap: wordMap,\r\n                towMap: towMap,\r\n                wordLength: wordLength,\r\n            };\r\n        }\r\n\r\n        // 检查驼峰命名\r\n        function _humpCheck(preChar, char) {\r\n            let preCode = preChar.charCodeAt(0);\r\n            let charCode = char.charCodeAt(0);\r\n            if ((preCode < 97 && charCode >= 97) || (charCode < 97 && preCode >= 97)) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        // 检查是否匹配完成\r\n        function _complete(char) {\r\n            if (targetMap[char] === wordMap[char]) {\r\n                if (++count === wordLength) {\r\n                    result = {\r\n                        score: score,\r\n                        indexs: indexs,\r\n                    };\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nArray.prototype.peek = function (index) {\r\n    if (this.length) {\r\n        return this[this.length - (index || 1)];\r\n    }\r\n};\r\nArray.prototype.empty = function () {\r\n    this.length = 0;\r\n    return this;\r\n};\r\nArray.prototype.insert = function (item, sort) {\r\n    if (sort && this.length) {\r\n        let left = 0,\r\n            right = this.length - 1;\r\n        while (left < right) {\r\n            let mid = Math.floor((left + right) / 2);\r\n            if (sort(item, this[mid]) > 0) {\r\n                left = mid + 1;\r\n            } else {\r\n                right = mid;\r\n            }\r\n        }\r\n        if (sort(item, this[left]) < 0) {\r\n            left--;\r\n        }\r\n        this.splice(left + 1, 0, item);\r\n    } else {\r\n        this.push(item);\r\n    }\r\n};\r\nString.prototype.peek = function (index) {\r\n    if (this.length) {\r\n        return this[this.length - (index || 1)];\r\n    }\r\n};\r\n//全角符号和中文字符\r\nUtil.fullAngleReg =\r\n    /[\\x00-\\x1f\\x80-\\xa0\\xad\\u1680\\u180E\\u2000-\\u200f\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF\\uFFF9-\\uFFFC]|[\\u1100-\\u115F\\u11A3-\\u11A7\\u11FA-\\u11FF\\u2329-\\u232A\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3000-\\u303E\\u3041-\\u3096\\u3099-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u3190-\\u31BA\\u31C0-\\u31E3\\u31F0-\\u321E\\u3220-\\u3247\\u3250-\\u32FE\\u3300-\\u4DBF\\u4E00-\\uA48C\\uA490-\\uA4C6\\uA960-\\uA97C\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFAFF\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFF01-\\uFF60\\uFFE0-\\uFFE6]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\r\nUtil.keyCode = {\r\n    DELETE: 46,\r\n    BACKSPACE: 8,\r\n};\r\nUtil.command = {\r\n    DELETE: 'delete',\r\n    INSERT: 'insert',\r\n    MOVEUP: 'moveLineUp',\r\n    MOVEDOWN: 'moveLineDown',\r\n    COPY_UP: 'copyLineUp',\r\n    COPY_DOWN: 'copyLineDown',\r\n    DELETE_COPY_UP: 'deleteCopyLineUp',\r\n    DELETE_COPY_DOWN: 'deleteCopyLineDown',\r\n    REPLACE: 'replace',\r\n    INSERT_LINE: 'insertLine',\r\n    DELETE_LINE: 'deleteLine',\r\n    REPLACE: 'replace',\r\n};\r\nUtil.constData = {\r\n    LINE_COMMENT: 'line-comment',\r\n    BLOCK_COMMENT: 'block-comment',\r\n    BRACKET: 'bracket',\r\n    TAG: 'tag',\r\n};\r\nexport default Util;\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 16:13:15\r\n * @Description: \r\n */\r\nimport Util from '@/common/util';\r\n\r\nexport default class {\r\n    constructor(editorBar) {\r\n        this.initProperties(editorBar);\r\n    }\r\n    initProperties(editorBar) {\r\n        Util.defineProperties(this, editorBar, [\r\n            '$emit',\r\n        ]);\r\n    }\r\n    onKeyDown(e) {\r\n        if (e.ctrlKey) {\r\n            if (this.pressK) {\r\n                this.pressK = false;\r\n                switch (e.keyCode) {\r\n                    case 85: //Ctrl+U\r\n                        e.preventDefault();\r\n                        this.$emit('close-saved');\r\n                        break;\r\n                    case 87: //Ctrl+W\r\n                        e.preventDefault();\r\n                        this.$emit('close-all');\r\n                        break;\r\n                }\r\n            } else {\r\n                switch (e.keyCode) {\r\n                    case 75: //Ctrl+K\r\n                        e.preventDefault();\r\n                        this.pressK = true;\r\n                        break;\r\n                    case 115: //Ctrl+F4\r\n                        e.preventDefault();\r\n                        this.$emit('close');\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div @selectstart.prevent class=\"my-editor-bar\" ref=\"editorBar\">\r\n        <div class=\"bar-scroller my-scroll-overlay my-scroll-mini\">\r\n            <div\r\n                :class=\"[item.active ? 'my-active' : '']\"\r\n                :title=\"item.path\"\r\n                @click=\"onClickItem(item.id)\"\r\n                @contextmenu.prevent.stop=\"onContextmenu($event, item.id)\"\r\n                class=\"bar-item my-hover\"\r\n                v-for=\"item in editorList\"\r\n            >\r\n                <div class=\"bar-content\" :class=\"[item.icon]\">\r\n                    <span class=\"bar-text\">{{ item.name }}</span>\r\n                    <div class=\"bar-icon\">\r\n                        <span @click.stop=\"onClose(item.id)\" class=\"bar-close-icon iconfont icon-close\" title=\"close\" v-show=\"item.saved\"></span>\r\n                        <span class=\"bar-dot\" v-show=\"!item.saved\"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <editor-bar-menu ref=\"editorBarMenu\"></editor-bar-menu>\r\n    </div>\r\n</template>\r\n<script>\r\nimport EditorBarMenu from './EditorBarMenu';\r\nimport ShortCut from '@/module/shortcut/editor-bar';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\n\r\nexport default {\r\n    name: 'EditorBar',\r\n    components: {\r\n        EditorBarMenu,\r\n    },\r\n    props: {\r\n        editorList: {\r\n            type: Array,\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            list: [],\r\n        };\r\n    },\r\n    provide() {\r\n        return {\r\n            rootList: this.list,\r\n        };\r\n    },\r\n    created() {\r\n        this.shortcut = new ShortCut(this);\r\n        this.initEventBus();\r\n        $(window).on('keydown', (e) => {\r\n            this.shortcut.onKeyDown(e);\r\n        });\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on('tab-change', (data) => {\r\n                this.$nextTick(() => {\r\n                    let $tab = $(this.$refs.editorBar).find('div.my-active');\r\n                    $tab.length && $tab[0].scrollIntoView();\r\n                });\r\n            });\r\n        },\r\n        onClickItem(id) {\r\n            this.$emit('change', id);\r\n        },\r\n        onClose(id) {\r\n            this.$emit('close', id);\r\n        },\r\n        onContextmenu(e, id) {\r\n            this.$refs.editorBarMenu.show(e, id);\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./EditorBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./EditorBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorBar.vue?vue&type=template&id=7451f082&\"\nimport script from \"./EditorBar.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"editor\",staticClass:\"my-editor-wrap\",on:{\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onContextmenu.apply(null, arguments)},\"selectstart\":function($event){$event.preventDefault();},\"wheel\":function($event){$event.preventDefault();return _vm.onWheel.apply(null, arguments)}}},[(_vm.active)?_c('div',{staticClass:\"my-nums\",style:({ top: _vm._numTop })},[_c('div',{staticClass:\"my-num\",staticStyle:{\"visibility\":\"hidden\"}},[_vm._v(_vm._s(_vm.maxLine))]),_vm._l((_vm.renderHtmls),function(line){return _c('div',{key:line.num,staticClass:\"my-num\",class:{ 'my-active': _vm.nowCursorPos.line === line.num },style:({ height: _vm._lineHeight, 'line-height': _vm._lineHeight })},[_c('span',{staticClass:\"num\"},[_vm._v(_vm._s(line.num))]),(line.fold)?_c('span',{staticClass:\"my-fold my-center-center\",class:['iconfont', line.fold == 'open' ? 'my-fold-open icon-down1' : 'my-fold-close icon-right'],on:{\"click\":function($event){return _vm.onToggleFold(line.num)}}}):_vm._e()])})],2):_vm._e(),_c('div',{staticClass:\"my-content-wrap\",style:({ 'box-shadow': _vm._leftShadow })},[_c('div',{ref:\"scroller\",staticClass:\"my-scroller my-scroll-overlay\",on:{\"scroll\":_vm.onScroll}},[_c('div',{ref:\"content\",staticClass:\"my-content\",style:({ minWidth: _vm._contentMinWidth, height: _vm.contentHeight }),on:{\"mousedown\":_vm.onContentMdown,\"mousemove\":_vm.onContentMmove,\"mouseleave\":_vm.onContentMLeave,\"selectend\":function($event){$event.preventDefault();return _vm.onSelectend.apply(null, arguments)}}},[(_vm.active)?_c('div',{ref:\"render\",staticClass:\"my-render\",style:({ top: _vm._top })},_vm._l((_vm.renderHtmls),function(line){return _c('div',{key:line.num,staticClass:\"my-line\",class:{ 'my-active': _vm._activeLine(line.num) },style:({ height: _vm._lineHeight, 'line-height': _vm._lineHeight }),attrs:{\"data-line\":line.num,\"id\":'line_' + line.num}},[_c('div',{staticClass:\"my-code\",class:[\n                                line.active ? 'my-active' : '',\n                                line.selected ? (line.isFsearch ? 'my-search-bg' : 'my-select-bg') : '',\n                                line.selected && _vm.selectedFg ? 'my-select-fg' : '',\n                                line.fold == 'close' ? 'fold-close' : '' ],attrs:{\"data-line\":line.num},domProps:{\"innerHTML\":_vm._s(line.html)}}),(_vm.bracketMatch && line.num == _vm.bracketMatch.start.line)?_c('div',{staticClass:\"my-bracket-match\",style:({ left: _vm.bracketMatch.start.left + 'px', width: _vm.bracketMatch.start.width + 'px' })}):_vm._e(),(_vm.bracketMatch && line.num == _vm.bracketMatch.end.line)?_c('div',{staticClass:\"my-bracket-match\",style:({ left: _vm.bracketMatch.end.left + 'px', width: _vm.bracketMatch.end.width + 'px' })}):_vm._e(),_vm._l((line.selectStarts),function(range){return _c('div',{staticClass:\"my-line-bg my-select-bg\",class:{ 'my-active': range.active, 'my-search-bg': range.isFsearch },style:({ left: range.left + 'px', width: range.width + 'px' })})}),_vm._l((line.selectEnds),function(range){return _c('div',{staticClass:\"my-line-bg my-select-bg\",class:{ 'my-active': range.active, 'my-search-bg': range.isFsearch },style:({ left: range.left + 'px', width: range.width + 'px' })})}),_vm._l((line.tabNum),function(tab){return _c('span',{staticClass:\"my-tab-line\",style:({ left: _vm._tabLineLeft(tab) })})}),_vm._l((line.cursorList),function(left){return _c('div',{staticClass:\"my-cursor\",staticStyle:{\"top\":\"0px\"},style:({ height: _vm._lineHeight, left: left, visibility: _vm._cursorVisible })})})],2)}),0):_vm._e(),_c('textarea',{ref:\"textarea\",staticClass:\"my-textarea\",style:({ top: _vm._textAreaPos.top, left: _vm._textAreaPos.left }),on:{\"blur\":_vm.onBlur,\"compositionend\":_vm.onCompositionend,\"compositionstart\":_vm.onCompositionstart,\"copy\":function($event){$event.preventDefault();return _vm.onCopy.apply(null, arguments)},\"cut\":function($event){$event.preventDefault();return _vm.onCut.apply(null, arguments)},\"focus\":_vm.onFocus,\"input\":_vm.onInput,\"keydown\":_vm.onKeyDown,\"paste\":function($event){$event.preventDefault();return _vm.onPaste.apply(null, arguments)}}}),_c('auto-tip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.autoTipList && _vm.autoTipList.length),expression:\"autoTipList && autoTipList.length\"}],ref:\"autoTip\",attrs:{\"styles\":_vm.autoTipStyle,\"tipList\":_vm.autoTipList},on:{\"change\":_vm.onClickAuto}})],1)]),_c('search-dialog',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchVisible),expression:\"searchVisible\"}],ref:\"searchDialog\",attrs:{\"count\":_vm.searchCount,\"now\":_vm.searchNow},on:{\"close\":_vm.onCloseSearch,\"next\":function($event){return _vm.onSearchNext()},\"prev\":function($event){return _vm.onSearchPrev()},\"replace\":_vm.replace,\"replaceAll\":_vm.replaceAll,\"search\":_vm.onSearch}})],1),_c('Menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onClickMenu}}),_c('tip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tipContent),expression:\"tipContent\"}],ref:\"tip\",attrs:{\"content\":_vm.tipContent,\"styles\":_vm.tipStyle}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-15 11:39:41\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport globalData from '@/data/globalData';\r\nimport * as vsctm from 'vscode-textmate';\r\nimport * as oniguruma from 'vscode-oniguruma';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\nconst regs = {\r\n    stringToken: /(\\.|^)string(\\.|$)/,\r\n};\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.currentLine = 1;\r\n        this.initRegistry();\r\n        this.initProperties(editor, context);\r\n        this.initLanguage(editor.language);\r\n    }\r\n    initRegistry() {\r\n        const wasmBin = fs.readFileSync(path.join(globalData.dirname, 'main/lib/onig.wasm')).buffer;\r\n        const vscodeOnigurumaLib = oniguruma.loadWASM(wasmBin).then(() => {\r\n            return {\r\n                createOnigScanner(patterns) {\r\n                    return new oniguruma.OnigScanner(patterns);\r\n                },\r\n                createOnigString(s) {\r\n                    return new oniguruma.OnigString(s);\r\n                },\r\n            };\r\n        });\r\n        this.registry = new vsctm.Registry({\r\n            onigLib: vscodeOnigurumaLib,\r\n            loadGrammar: (scopeName) => {\r\n                let language = Util.getLanguageByScopeName(globalData.scopeFileList, scopeName);\r\n                if (language) {\r\n                    if (language.configPath) {\r\n                        return Util.loadJsonFile(language.configPath).then((data) => {\r\n                            // 每种语言都有对应的折叠标记\r\n                            this.sourceFoldMap[language.scopeName] = {};\r\n                            globalData.sourceWordMap[language.scopeName] = data.wordPattern;\r\n                            // 是否存在标记性语言\r\n                            this.hasTextGrammar = this.hasTextGrammar || language.scopeName.startsWith('text');\r\n                            this.initLanguageConifg(this.sourceFoldMap[language.scopeName], data);\r\n                            return Util.readFile(language.path).then((data) => vsctm.parseRawGrammar(data.toString(), language.path));\r\n                        });\r\n                    } else {\r\n                        return Util.readFile(language.path).then((data) => vsctm.parseRawGrammar(data.toString(), language.path));\r\n                    }\r\n                }\r\n                return null;\r\n            },\r\n        });\r\n    }\r\n    initLanguage(language) {\r\n        if (this.language === language) {\r\n            return;\r\n        }\r\n        this.language = language;\r\n        this.grammar = null;\r\n        this.foldType = 1;\r\n        this.sourceFoldMap = {};\r\n        this.hasTextGrammar = false;\r\n        this.currentLine = 1;\r\n        language = Util.getLanguageById(globalData.languageList, language);\r\n        this.scopeName = (language && language.scopeName) || '';\r\n        if (this.scopeName) {\r\n            if (globalData.grammars[this.scopeName]) {\r\n                let grammarData = globalData.grammars[this.scopeName];\r\n                this.grammar = grammarData.grammar;\r\n                this.sourceFoldMap = grammarData.sourceFoldMap;\r\n                this.hasTextGrammar = grammarData.hasTextGrammar;\r\n            } else {\r\n                return this.registry.loadGrammar(this.scopeName).then((grammar) => {\r\n                    this.grammar = grammar;\r\n                    globalData.grammars[this.scopeName] = {\r\n                        grammar: grammar,\r\n                        sourceFoldMap: this.sourceFoldMap,\r\n                        hasTextGrammar: this.hasTextGrammar,\r\n                    };\r\n                    this.tokenizeVisibleLins();\r\n                });\r\n            }\r\n        }\r\n        this.tokenizeVisibleLins();\r\n        return Promise.resolve();\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, ['startLine', 'maxVisibleLines', 'maxLine', 'renderLine', 'folder', '$nextTick']);\r\n        Util.defineProperties(this, context, ['htmls']);\r\n    }\r\n    initLanguageConifg(foldMap, data) {\r\n        let source = [];\r\n        foldMap.__comments__ = {\r\n            lineComment: '',\r\n            blockComment: [],\r\n        };\r\n        if (data.comments) {\r\n            if (data.comments.lineComment) {\r\n                source.push(data.comments.lineComment);\r\n                foldMap[data.comments.lineComment] = 0;\r\n                foldMap.__comments__.lineComment = data.comments.lineComment;\r\n            }\r\n            if (data.comments.blockComment) {\r\n                source.push(data.comments.blockComment[0]);\r\n                source.push(data.comments.blockComment[1]);\r\n                foldMap[data.comments.blockComment[0]] = -this.foldType;\r\n                foldMap[data.comments.blockComment[1]] = this.foldType;\r\n                foldMap.__comments__.blockComment = data.comments.blockComment;\r\n                foldMap.__endCommentReg__ = new RegExp(data.comments.blockComment[1].replace(/[\\{\\}\\(\\)\\[\\]\\&\\?\\+\\*\\\\]/g, '\\\\$&'), 'g');\r\n                this.foldType++;\r\n            }\r\n        }\r\n        if (data.brackets) {\r\n            data.brackets.forEach((item) => {\r\n                if (foldMap[item[0]]) {\r\n                    //相同的前缀\r\n                    if (!foldMap[item[1]]) {\r\n                        source.push(item[1]);\r\n                        foldMap[item[1]] = -foldMap[item[0]];\r\n                    }\r\n                } else if (foldMap[item[1]]) {\r\n                    //相同的后缀\r\n                    if (!foldMap[item[0]]) {\r\n                        source.push(item[0]);\r\n                        foldMap[item[0]] = -foldMap[item[1]];\r\n                    }\r\n                } else {\r\n                    source.push(item[0]);\r\n                    source.push(item[1]);\r\n                    foldMap[item[0]] = -this.foldType;\r\n                    foldMap[item[1]] = this.foldType;\r\n                    this.foldType++;\r\n                }\r\n            });\r\n        }\r\n        source = source.join('|');\r\n        source = source.replace(/[\\{\\}\\(\\)\\[\\]\\&\\?\\+\\*\\\\]/g, '\\\\$&');\r\n        foldMap.__foldReg__ = new RegExp(source, 'g');\r\n    }\r\n    onInsertContentAfter(nowLine, newLine) {\r\n        if (nowLine <= this.currentLine) {\r\n            this.currentLine = nowLine;\r\n            clearTimeout(this.tokenizeLinesTimer);\r\n            this.$nextTick(() => {\r\n                if (this.currentLine !== nowLine) {\r\n                    return;\r\n                }\r\n                this.tokenizeLines(nowLine);\r\n            });\r\n        } else {\r\n            this.tokenizeVisibleLins();\r\n        }\r\n    }\r\n    onDeleteContentAfter(nowLine, newLine) {\r\n        if (newLine <= this.currentLine) {\r\n            this.currentLine = newLine;\r\n            clearTimeout(this.tokenizeLinesTimer);\r\n            this.$nextTick(() => {\r\n                if (this.currentLine !== newLine) {\r\n                    return;\r\n                }\r\n                this.tokenizeLines(newLine);\r\n            });\r\n        } else {\r\n            this.tokenizeVisibleLins();\r\n        }\r\n    }\r\n    tokenizeVisibleLins() {\r\n        let tokenizeVisibleLinsId = this.tokenizeVisibleLinsId + 1 || 1;\r\n        this.tokenizeVisibleLinsId = tokenizeVisibleLinsId;\r\n        this.$nextTick(() => {\r\n            if (this.tokenizeVisibleLinsId !== tokenizeVisibleLinsId) {\r\n                return;\r\n            }\r\n            let currentLine = this.currentLine;\r\n            let startLine = this.startLine;\r\n            let endLine = this.startLine + this.maxVisibleLines;\r\n            endLine = this.folder.getRealLine(endLine);\r\n            // 先渲染可视范围内的行\r\n            this.asyncTokenizeLines(startLine, endLine).then(() => {\r\n                startLine = this.startLine - 2000;\r\n                startLine = startLine < 1 ? 1 : startLine;\r\n                // 考虑到当前行可能处于内嵌语法种，渲染前2000行\r\n                if (startLine > currentLine) {\r\n                    this.asyncTokenizeLines(startLine, endLine).then(() => {\r\n                        this.tokenizeLines(currentLine);\r\n                    });\r\n                } else {\r\n                    this.tokenizeLines(currentLine);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    asyncTokenizeLines(startLine, endLine) {\r\n        return new Promise((resolve) => {\r\n            this.tokenizeLines(startLine, endLine, resolve);\r\n        });\r\n    }\r\n    tokenizeLines(startLine, endLine, resolve) {\r\n        let processedLines = 0;\r\n        let processedTime = Date.now();\r\n        endLine = endLine || this.maxLine;\r\n        endLine = endLine > this.maxLine ? this.maxLine : endLine;\r\n        cancelIdleCallback(this.tokenizeLinesTimer);\r\n        if (this.scopeName && !this.grammar) {\r\n            this.tokenizeLinesTimer = setTimeout(() => {\r\n                this.tokenizeLines(startLine, endLine, resolve);\r\n            });\r\n            return;\r\n        }\r\n        while (startLine <= endLine) {\r\n            let lineObj = this.htmls[startLine - 1];\r\n            if (!lineObj.tokens) {\r\n                //文本超过一万时跳过高亮\r\n                let data = this.tokenizeLine(startLine);\r\n                lineObj.tokens = data.tokens;\r\n                lineObj.folds = data.folds;\r\n                lineObj.stateFold = data.stateFold;\r\n                if (this.checkLineVisible(startLine)) {\r\n                    lineObj.tokens = this.splitLongToken(lineObj.tokens);\r\n                    lineObj.html = this.createHtml(lineObj.tokens, lineObj.text);\r\n                    this.renderLine(lineObj.lineId);\r\n                }\r\n                if (!lineObj.states || (lineObj.states.equals && !lineObj.states.equals(data.states)) || lineObj.states.toString() !== data.states.toString()) {\r\n                    lineObj.states = data.states;\r\n                    lineObj = this.htmls[startLine];\r\n                    if (lineObj) {\r\n                        lineObj.tokens = null;\r\n                        lineObj.html = '';\r\n                    }\r\n                }\r\n                processedLines++;\r\n                // 避免卡顿\r\n                if (processedLines % 5 == 0 && Date.now() - processedTime >= 20) {\r\n                    startLine++;\r\n                    break;\r\n                }\r\n            }\r\n            startLine++;\r\n        }\r\n        this.currentLine = startLine;\r\n        if (startLine <= endLine) {\r\n            this.tokenizeLinesTimer = requestIdleCallback(() => {\r\n                this.tokenizeLines(startLine, endLine, resolve);\r\n            });\r\n        } else if (resolve) {\r\n            resolve();\r\n        }\r\n    }\r\n    createHtml(tokens, lineText) {\r\n        return tokens\r\n            .map((item) => {\r\n                let selector = '';\r\n                let value = lineText.substring(item.startIndex, item.endIndex);\r\n                if (item.scopes[0] === 'plain') {\r\n                    selector = 'my-plain';\r\n                } else if (item.scopes[0] === 'selected') {\r\n                    selector = 'my-select-fg';\r\n                } else {\r\n                    selector = _getSelector(item);\r\n                    selector = (selector && `my-scope-${selector.scopeId}`) || '';\r\n                }\r\n                return `<span class=\"${selector}\" data-column=\"${item.startIndex}\">${Util.htmlTrans(value)}</span>`;\r\n            })\r\n            .join('');\r\n\r\n        function _getSelector(token) {\r\n            let result = null;\r\n            let scopes = token.scopes;\r\n            token.scope = scopes.join(' ');\r\n            outerLoop: for (let i = scopes.length - 1; i >= 0; i--) {\r\n                let scope = scopes[i];\r\n                for (let i = 0; i < globalData.scopeTokenList.length; i++) {\r\n                    let item = globalData.scopeTokenList[i];\r\n                    let _scope = item.scopes.peek();\r\n                    if (scope.indexOf(_scope) > -1) {\r\n                        if (item.regexp.test(token.scope)) {\r\n                            result = item;\r\n                            break outerLoop;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n    tokenizeLine(line) {\r\n        let lineText = this.htmls[line - 1].text;\r\n        let folds = [];\r\n        if (lineText.length > 10000 || !this.scopeName) {\r\n            return {\r\n                tokens: [\r\n                    {\r\n                        scopes: ['plain'],\r\n                        startIndex: 0,\r\n                        endIndex: lineText.length,\r\n                    },\r\n                ],\r\n                folds: [],\r\n                states: vsctm.INITIAL,\r\n            };\r\n        }\r\n        let states = (line > 1 && this.htmls[line - 2].states) || vsctm.INITIAL;\r\n        let lineTokens = this.grammar.tokenizeLine(lineText, states);\r\n        let stateFold = this.addFold(line, lineTokens.tokens, folds);\r\n        lineTokens.tokens.peek().endIndex = lineText.length; //某些情况下，会大于lineText.length\r\n        return {\r\n            tokens: lineTokens.tokens,\r\n            states: lineTokens.ruleStack,\r\n            folds: folds,\r\n            stateFold: stateFold,\r\n        };\r\n    }\r\n    addFold(line, tokens, folds) {\r\n        let scopeName = '';\r\n        let startIndex = 0;\r\n        let existTag = false;\r\n        let lineText = this.htmls[line - 1].text;\r\n        let stateFold = line > 1 ? this.htmls[line - 2].stateFold : null;\r\n        //给字符串token打上标记\r\n        tokens.forEach((token) => {\r\n            if (regs.stringToken.test(token.scopes.join('.'))) {\r\n                token.isString = true;\r\n            }\r\n        });\r\n        outerLoop: for (let index = 0; index < tokens.length; index++) {\r\n            let token = tokens[index];\r\n            let _scopeName = '';\r\n            let foldMap = null;\r\n            for (let i = token.scopes.length - 1; i >= 0; i--) {\r\n                foldMap = this.sourceFoldMap[token.scopes[i]];\r\n                if (!foldMap) {\r\n                    continue;\r\n                }\r\n                _scopeName = token.scopes[i];\r\n                if (scopeName || index === tokens.length - 1) {\r\n                    if (_scopeName !== scopeName || index === tokens.length - 1) {\r\n                        let endIndex = index === tokens.length - 1 ? token.endIndex : token.startIndex;\r\n                        let lastFold = this.addBracket({\r\n                            tokens: tokens,\r\n                            line: line,\r\n                            foldMap: foldMap,\r\n                            folds: folds,\r\n                            startIndex: startIndex,\r\n                            endIndex: endIndex,\r\n                            stateFold: stateFold,\r\n                            lineText: lineText,\r\n                        });\r\n                        // 单行注释\r\n                        if (lastFold && lastFold.type === Util.constData.LINE_COMMENT) {\r\n                            break outerLoop;\r\n                        }\r\n                        scopeName = token.scopes[i];\r\n                        startIndex = token.startIndex;\r\n                    }\r\n                } else {\r\n                    scopeName = token.scopes[i];\r\n                    startIndex = token.startIndex;\r\n                }\r\n                break;\r\n            }\r\n            if (\r\n                this.addTagFold({\r\n                    token: token,\r\n                    foldMap: foldMap,\r\n                    folds: folds,\r\n                    lineText: lineText,\r\n                })\r\n            ) {\r\n                existTag = true;\r\n            }\r\n        }\r\n        if (existTag) {\r\n            folds.sort((a, b) => {\r\n                return a.startIndex - b.startIndex;\r\n            });\r\n        }\r\n        if (folds.length) {\r\n            return folds.peek().type === Util.constData.BLOCK_COMMENT ? folds.peek() : null;\r\n        } else {\r\n            return stateFold;\r\n        }\r\n    }\r\n    addBracket(option) {\r\n        let tokens = option.tokens;\r\n        let foldMap = option.foldMap;\r\n        let folds = option.folds;\r\n        let startIndex = option.startIndex;\r\n        let endIndex = option.endIndex;\r\n        let stateFold = option.stateFold;\r\n        let text = option.lineText.slice(startIndex, endIndex);\r\n        let reg = foldMap.__foldReg__;\r\n        let res = null;\r\n        let preFold = null;\r\n        if (folds.length) {\r\n            preFold = folds.peek();\r\n        } else {\r\n            preFold = stateFold;\r\n        }\r\n        if (preFold && preFold.type === Util.constData.BLOCK_COMMENT && preFold.side < 0) {\r\n            reg = foldMap.__endCommentReg__;\r\n        }\r\n        while ((res = reg.exec(text))) {\r\n            let type = Util.constData.BRACKET;\r\n            if (foldMap.__comments__.lineComment === res[0]) {\r\n                type = Util.constData.LINE_COMMENT;\r\n            } else if (foldMap.__comments__.blockComment[0] === res[0] || foldMap.__comments__.blockComment[1] === res[0]) {\r\n                type = Util.constData.BLOCK_COMMENT;\r\n            }\r\n            // 如果处于字符串中，则无效\r\n            if (_inString(res)) {\r\n                continue;\r\n            }\r\n            folds.push({\r\n                startIndex: startIndex + res.index,\r\n                endIndex: startIndex + res.index + res[0].length,\r\n                side: foldMap[res[0]],\r\n                type: type,\r\n            });\r\n            if (type === Util.constData.BLOCK_COMMENT && foldMap[res[0]] < 0) {\r\n                foldMap.__endCommentReg__.lastIndex = reg.lastIndex;\r\n                reg.lastIndex = 0;\r\n                reg = foldMap.__endCommentReg__;\r\n            } else if (type === Util.constData.LINE_COMMENT) {\r\n                break;\r\n            }\r\n        }\r\n        reg.lastIndex = 0;\r\n        return folds.length && folds.peek();\r\n\r\n        function _inString(res) {\r\n            let index = res.index;\r\n            for (let i = 0; i < tokens.length; i++) {\r\n                if (tokens[i].startIndex <= index && tokens[i].endIndex > index) {\r\n                    if (tokens[i].isString) {\r\n                        return true;\r\n                    }\r\n                    break;\r\n                } else if (tokens[i].startIndex > index) {\r\n                    break;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    addTagFold(option) {\r\n        let token = option.token;\r\n        let folds = option.folds;\r\n        let foldMap = option.foldMap;\r\n        let lineText = option.lineText;\r\n        if (this.hasTextGrammar && token.scopes.peek().startsWith('entity.name.tag')) {\r\n            //html、xml标签名称\r\n            let tag = lineText.slice(token.startIndex, token.endIndex);\r\n            let side = 0;\r\n            if (foldMap[tag]) {\r\n                side = foldMap[tag];\r\n            } else {\r\n                side = this.foldType++;\r\n                foldMap[tag] = side;\r\n            }\r\n            //开始标签\r\n            if (lineText[token.startIndex - 1] === '<') {\r\n                side = -side;\r\n            }\r\n            folds.push({\r\n                startIndex: token.startIndex,\r\n                endIndex: token.endIndex,\r\n                side: side,\r\n                type: Util.constData.TAG,\r\n            });\r\n            return true;\r\n        }\r\n    }\r\n    splitLongToken(tokens) {\r\n        let result = [];\r\n        tokens.forEach((token) => {\r\n            let length = token.endIndex - token.startIndex;\r\n            if (length > 100) {\r\n                //将文本数量大于100的token分隔\r\n                let startCol = token.startIndex;\r\n                let count = Math.floor(length / 100);\r\n                for (let i = 0; i < count; i++) {\r\n                    let startIndex = i * 100;\r\n                    let endIndex = (i + 1) * 100;\r\n                    endIndex = endIndex > token.endIndex ? token.endIndex : endIndex;\r\n                    result.push({\r\n                        startIndex: startIndex + startCol,\r\n                        endIndex: endIndex,\r\n                        scopes: token.scopes,\r\n                    });\r\n                }\r\n                count = count * 100;\r\n                if (count < length) {\r\n                    result.push({\r\n                        startIndex: count + startCol,\r\n                        endIndex: token.endIndex,\r\n                        scopes: token.scopes,\r\n                    });\r\n                }\r\n            } else {\r\n                result.push(token);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    checkLineVisible(line) {\r\n        let endLine = this.startLine + this.maxVisibleLines;\r\n        endLine = this.folder.getRealLine(endLine);\r\n        if (this.folder.getLineInFold(line)) {\r\n            //该行被包裹\r\n            return false;\r\n        }\r\n        return line >= this.startLine && line <= endLine;\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-01-05 14:28:42\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nconst path = require('path');\r\nconst child_process = require('child_process');\r\n\r\nlet worker = null;\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.initProperties(editor, context);\r\n        this.initLanguage(editor.language);\r\n        this.initEvent();\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, context, ['htmls', 'getAllText']);\r\n        Util.defineProperties(this, editor, ['setErrors']);\r\n    }\r\n    initLanguage(language) {\r\n        if (this.language === language) {\r\n            return;\r\n        }\r\n        this.language = language;\r\n        this.setErrors([]);\r\n        this.initEvent();\r\n        this.parse();\r\n    }\r\n    initEvent() {\r\n        if (worker === null) {\r\n            setTimeout(() => {\r\n                worker = child_process.fork(path.join(globalData.dirname, 'main/process/lint/index.js'));\r\n                _bindMsg.call(this);\r\n            }, 300);\r\n        } else {\r\n            _bindMsg.call(this);\r\n        }\r\n\r\n        function _bindMsg() {\r\n            worker.on('message', (data) => {\r\n                console.log(data);\r\n                if (data.parseId === this.parseId) {\r\n                    this.setErrors(data.results);\r\n                }\r\n            });\r\n            worker.on('close', () => {\r\n                worker = null;\r\n                this.initEvent();\r\n            });\r\n        }\r\n    }\r\n    onInsertContentAfter(nowLine, newLine) {\r\n        clearTimeout(this.parseTimer);\r\n        this.parseId = '';\r\n        this.parseTimer = setTimeout(() => {\r\n            this.parse();\r\n        }, 300);\r\n    }\r\n    onDeleteContentAfter(nowLine, newLine) {\r\n        clearTimeout(this.parseTimer);\r\n        this.parseId = '';\r\n        this.parseTimer = setTimeout(() => {\r\n            this.parse();\r\n        }, 300);\r\n    }\r\n    parse() {\r\n        if (!this.language) {\r\n            return;\r\n        }\r\n        const text = this.getAllText();\r\n        this.parseId = Util.getUUID();\r\n        worker.send({\r\n            text: text,\r\n            parseId: this.parseId,\r\n            language: this.language,\r\n        });\r\n    }\r\n}\r\n","export default {\r\n    TOKEN_TYPE: {\r\n        TEXT: 'text',\r\n        SOURCE: 'source',\r\n        TAG_NAME: 'tag-name',\r\n        ATTR_NAME: 'attr-name',\r\n        STRING: 'string',\r\n        WORD: 'word',\r\n        CSS: 'css',\r\n        CSS_VALUE: 'css-value',\r\n        CSS_PROPERTY: 'css-property',\r\n        CSS_SELECTOR: 'css-selector',\r\n        CSS_TAG: 'css-tag',\r\n        CSS_CLASS: 'css-class',\r\n        CSS_ATTR: 'css-attr',\r\n        CSS_PSEUDO: 'css-pseudo',\r\n        EMMET_HTML: 'emmet-html',\r\n        EMMET_CSS: 'emmet-css'\r\n    },\r\n};\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-03-17 15:29:26\r\n * @Description:\r\n */\r\nimport { extract } from 'emmet';\r\nimport Util from '@/common/util';\r\nimport Enum from '@/data/enum';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nconst path = require('path');\r\n\r\nconst regs = {\r\n    stringToken: /(?:\\.|^)(?:string|regexp)(?:\\.|$)/,\r\n    tagToken: /meta\\.tag/,\r\n    tagNameToken: /entity\\.name\\.tag/,\r\n    tagAttrName: /attribute\\-name/,\r\n    cssValueToken: /property\\-list|property\\-value|separator/,\r\n    cssPropertyToken: /meta\\.property\\-name/,\r\n    cssSelectorToken: /meta\\.selector/,\r\n    cssAttributeToken: /attribute\\-selector/,\r\n    cssClassToken: /attribute\\-name\\.class/,\r\n    cssPseudoToken: /pseudo\\-element/,\r\n    styleCss: /([^\\:\\;\\\"\\'\\s]+)\\s*\\:\\s*([^\\:\\;]+)?$/,\r\n    styleCssProperty: /(?:^|[\\;\\\"\\'])([^\\:\\;]+)$/,\r\n};\r\n\r\nclass Autocomplete {\r\n    constructor(editor, context) {\r\n        this.initProperties(editor, context);\r\n        this.doneMap = {};\r\n        this.results = [];\r\n        this.wordPattern = Util.getWordPattern(this.language);\r\n        this.wordPattern = new RegExp(`^(${this.wordPattern.source})$`);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, ['language', 'cursor', 'nowCursorPos', 'tokenizer', 'autoTipList', 'setAutoTip', 'selectAutoTip']);\r\n        Util.defineProperties(this, context, ['htmls', 'replaceTip', 'insertContent']);\r\n    }\r\n    reset() {\r\n        this.currentLine = 1;\r\n        this.results = [];\r\n        this.doneMap = {};\r\n    }\r\n    stop() {\r\n        cancelIdleCallback(this.searchTimer);\r\n    }\r\n    search() {\r\n        this.stop();\r\n        this.searchTimer = requestIdleCallback(() => {\r\n            this._search();\r\n        });\r\n    }\r\n    emmet() {\r\n        let lineObj = this.htmls[this.nowCursorPos.line - 1];\r\n        let tokenIndex = this.getTokenIndex(this.nowCursorPos);\r\n        let nowToken = lineObj.tokens[tokenIndex];\r\n        let word = nowToken && lineObj.text.slice(nowToken.startIndex, this.nowCursorPos.column);\r\n        let emmetObj = null;\r\n        let type = '';\r\n        if (word) {\r\n            let scope = nowToken.scopes.peek();\r\n            if (scope.startsWith('text.')) {\r\n                emmetObj = extract(word);\r\n                type = Enum.TOKEN_TYPE.EMMET_HTML;\r\n            } else if (this._isCssToken(nowToken)) {\r\n                if (this._isCssPropertyToken(nowToken)) {\r\n                    emmetObj = extract(word, word.length, { type: 'stylesheet' });\r\n                } else if (this._isCssValueToken(nowToken)) {\r\n                    //p10将会被分成pd和10两个token\r\n                    let preToken = lineObj.tokens[tokenIndex - 1];\r\n                    if (preToken && this._isCssPropertyToken(preToken)) {\r\n                        word = lineObj.text.slice(preToken.startIndex, preToken.endIndex) + word;\r\n                        emmetObj = extract(word, word.length, { type: 'stylesheet' });\r\n                    }\r\n                }\r\n                type = Enum.TOKEN_TYPE.EMMET_CSS;\r\n            }\r\n        }\r\n        if (emmetObj) {\r\n            this.replaceTip({ word: emmetObj.abbreviation, result: emmetObj.abbreviation, type: type });\r\n        } else if (this.autoTipList && this.autoTipList.length) {\r\n            this.selectAutoTip();\r\n        } else {\r\n            this.insertContent('\\t');\r\n        }\r\n    }\r\n    _search() {\r\n        let lineObj = this.htmls[this.nowCursorPos.line - 1];\r\n        let tokenIndex = this.getTokenIndex(this.nowCursorPos);\r\n        let nowToken = lineObj.tokens[tokenIndex];\r\n        let word = nowToken && lineObj.text.slice(nowToken.startIndex, this.nowCursorPos.column);\r\n        this.reset();\r\n        this.setAutoTip(null);\r\n        if (!word) {\r\n            return;\r\n        }\r\n        if (this._isTextToken(nowToken)) {\r\n            let scope = nowToken.scopes.peek();\r\n            if (scope.startsWith('text.')) {\r\n                //emmet表达式\r\n                this._searchEmmet(word);\r\n            } else if (this._isTagNameToken(nowToken)) {\r\n                //标签名\r\n                this._searchTagName(word);\r\n            } else if (this._isAttrNameToken(nowToken)) {\r\n                //属性名\r\n                let tag = this._getPreTagName(tokenIndex, this.nowCursorPos.line);\r\n                if (tag) {\r\n                    this._searchTagAttrName(word, tag);\r\n                }\r\n            }\r\n        } else if (this._isCssToken(nowToken)) {\r\n            if (this._isCssPropertyToken(nowToken)) {\r\n                //css属性名\r\n                this._searchCssProperty(word);\r\n            } else if (this._isCssValueToken(nowToken)) {\r\n                //css属性值\r\n                let preToken = lineObj.tokens[tokenIndex - 1];\r\n                //p10将会被分成pd和10两个token\r\n                if (preToken && this._isCssPropertyToken(preToken)) {\r\n                    let preToken = lineObj.tokens[tokenIndex - 1];\r\n                    if (preToken && this._isCssPropertyToken(preToken)) {\r\n                        word = lineObj.text.slice(preToken.startIndex, preToken.endIndex) + word;\r\n                        this._searchCssProperty(word);\r\n                    }\r\n                } else {\r\n                    let property = this._getPreCssProperty(tokenIndex, this.nowCursorPos.line);\r\n                    if (property) {\r\n                        this._searchCssValue(word, property);\r\n                    }\r\n                }\r\n            } else if (this._isCssSelectorToken(nowToken)) {\r\n                if (this._isTagNameToken(nowToken)) {\r\n                    this._searchCssTag(word);\r\n                } else if (word.indexOf(':') > -1) {\r\n                    this._searchCssPseudo(word);\r\n                }\r\n                this._searchSelector(word, nowToken);\r\n            } else if (this._isTagToken(nowToken)) {\r\n                //style种的css样式\r\n                this._searchStyle(word, nowToken);\r\n            }\r\n        } else if (this._isSourceToken(nowToken)) {\r\n            if (this.wordPattern.test(word)) {\r\n                this._searchWord(word, nowToken);\r\n            }\r\n        }\r\n    }\r\n    _searchWord(word, nowToken) {\r\n        this._searchDocument((lineObj) => {\r\n            lineObj.tokens.forEach((token) => {\r\n                if (token === nowToken) {\r\n                    return;\r\n                }\r\n                let text = lineObj.text.slice(token.startIndex, token.endIndex);\r\n                if (this.wordPattern.test(text)) {\r\n                    // 跳过标签和字符串\r\n                    if (this._isTextToken(token) || this._isStringToken(token)) {\r\n                        return;\r\n                    }\r\n                    this._addTip({ word: word, value: text, type: Enum.TOKEN_TYPE.WORD });\r\n                }\r\n            });\r\n        });\r\n    }\r\n    _searchSelector(word, nowToken) {\r\n        if (this._isCssClassToken(nowToken) && word !== '.') {\r\n            word = '.' + word;\r\n        }\r\n        this._searchDocument((lineObj) => {\r\n            lineObj.tokens.forEach((token) => {\r\n                if (token === nowToken) {\r\n                    return;\r\n                }\r\n                if (this._isCssSelectorToken(token)) {\r\n                    let text = lineObj.text.slice(token.startIndex, token.endIndex);\r\n                    if (!this.wordPattern.test(text)) {\r\n                        return;\r\n                    }\r\n                    if (this._isCssClassToken(token)) {\r\n                        text = '.' + text;\r\n                    }\r\n                    if (word === '.') {\r\n                        if (this._isCssClassToken(token) && text !== '..') {\r\n                            this._addTip({ word: word, value: text, type: Enum.TOKEN_TYPE.CSS_CLASS, skipMatch: true });\r\n                        }\r\n                    } else if (this._isCssClassToken(nowToken)) {\r\n                        if (this._isCssClassToken(token)) {\r\n                            this._addTip({ word: word, value: text, type: Enum.TOKEN_TYPE.CSS_CLASS });\r\n                        }\r\n                    } else {\r\n                        this._addTip({ word: word, value: text, type: Enum.TOKEN_TYPE.CSS_SELECTOR });\r\n                    }\r\n                }\r\n            });\r\n        }, true);\r\n    }\r\n    _searchDocument(callback, showAll) {\r\n        let line = this.currentLine;\r\n        let startTime = Date.now();\r\n        let processedLines = 0;\r\n        while (line <= this.htmls.length) {\r\n            let lineObj = this.htmls[line - 1];\r\n            line++;\r\n            if (!lineObj.tokens) {\r\n                continue;\r\n            }\r\n            callback(lineObj);\r\n            processedLines++;\r\n            // 避免卡顿\r\n            if (processedLines % 5 == 0 && Date.now() - startTime >= 20) {\r\n                break;\r\n            }\r\n        }\r\n        this.currentLine = line;\r\n        this._showTip(showAll);\r\n        if (line <= this.htmls.length) {\r\n            this.searchTimer = requestIdleCallback(() => {\r\n                this._searchDocument(callback, showAll);\r\n            });\r\n        }\r\n    }\r\n    _searchTagName(word) {\r\n        const htmlData = this.getHtmlData();\r\n        htmlData.tags.forEach((item) => {\r\n            this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.TAG_NAME });\r\n        });\r\n        if (!this.results.length) {\r\n            this._addTip({ word: word, value: word, type: Enum.TOKEN_TYPE.TAG_NAME, skipMatch: true });\r\n        }\r\n        this._showTip();\r\n    }\r\n    _searchTagAttrName(word, tag) {\r\n        const htmlData = this.getHtmlData();\r\n        let attributes = htmlData.tagMap[tag];\r\n        attributes = attributes && attributes.attributes;\r\n        if (attributes) {\r\n            // 标签专有属性\r\n            attributes.forEach((item) => {\r\n                this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.ATTR_NAME, after: '=\"\"' });\r\n            });\r\n        }\r\n        // 公共属性\r\n        htmlData.globalAttributes.forEach((item) => {\r\n            this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.ATTR_NAME, after: '=\"\"' });\r\n        });\r\n        this._showTip();\r\n    }\r\n    _searchCssTag(word) {\r\n        const htmlData = this.getHtmlData();\r\n        htmlData.tags.forEach((item) => {\r\n            this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_TAG });\r\n        });\r\n    }\r\n    _searchCssPseudo(word) {\r\n        const cssData = this.getCssData();\r\n        const pseudo = word.split(':').peek().trim();\r\n        cssData.pseudoClasses.forEach((item) => {\r\n            if (pseudo) {\r\n                this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PSEUDO });\r\n            } else {\r\n                this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PSEUDO, skipMatch: true });\r\n            }\r\n        });\r\n        cssData.pseudoElements.forEach((item) => {\r\n            if (pseudo) {\r\n                this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PSEUDO });\r\n            } else {\r\n                this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PSEUDO, skipMatch: true });\r\n            }\r\n        });\r\n    }\r\n    _searchStyle(word, nowToken) {\r\n        let column = this.nowCursorPos.column;\r\n        let lineObj = this.htmls[this.nowCursorPos.line - 1];\r\n        let keyValue = null;\r\n        word = lineObj.text.slice(nowToken.startIndex, column);\r\n        keyValue = regs.styleCss.exec(word);\r\n        if (keyValue && keyValue[1]) {\r\n            let property = keyValue[1];\r\n            let value = keyValue[2] || '';\r\n            this._searchCssValue(value, property);\r\n            return;\r\n        }\r\n        keyValue = regs.styleCssProperty.exec(word);\r\n        if (keyValue && keyValue[1]) {\r\n            this._searchCssProperty(keyValue[1]);\r\n        }\r\n    }\r\n    _searchCssProperty(word) {\r\n        const cssData = this.getCssData();\r\n        cssData.properties.forEach((item) => {\r\n            this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PROPERTY, after: ': ' });\r\n        });\r\n        if (!this.results.length) {\r\n            const emmetObj = extract(word, word.length, { type: 'stylesheet' });\r\n            if (emmetObj && emmetObj.abbreviation) {\r\n                this._addTip({ word: emmetObj.abbreviation, value: emmetObj.abbreviation, type: Enum.TOKEN_TYPE.EMMET_CSS, skipMatch: true });\r\n            }\r\n        }\r\n        this._showTip();\r\n    }\r\n    _searchCssValue(word, property) {\r\n        const cssData = this.getCssData();\r\n        let values = cssData.propertyMap[property];\r\n        values = values && values.values;\r\n        if (values) {\r\n            let _word = word.trim();\r\n            if (_word === ':' || _word === '') {\r\n                values.forEach((item) => {\r\n                    this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_VALUE, before: ' ', after: ';', skipMatch: true });\r\n                });\r\n                this._showTip(true);\r\n            } else {\r\n                values.forEach((item) => {\r\n                    this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_VALUE, after: ';' });\r\n                });\r\n                this._showTip();\r\n            }\r\n        }\r\n    }\r\n    _searchEmmet(word) {\r\n        const emmetObj = extract(word);\r\n        if (emmetObj && emmetObj.abbreviation) {\r\n            this._addTip({ word: emmetObj.abbreviation, value: emmetObj.abbreviation, type: Enum.TOKEN_TYPE.EMMET_HTML, skipMatch: true });\r\n            this._showTip();\r\n        }\r\n    }\r\n    _setTokenType(token) {\r\n        token.isSourceToken = false;\r\n        token.isCssToken = false;\r\n        token.isTextToken = false;\r\n        token.isTagToken = false;\r\n        token.isTagAttrNameToken = false;\r\n        token.scope = token.scope || token.scopes.join(' ');\r\n        for (let i = token.scopes.length - 1; i >= 0; i--) {\r\n            let scope = token.scopes[i];\r\n            if (scope.startsWith('source.')) {\r\n                token.isSourceToken = true;\r\n                if (scope.startsWith('source.css')) {\r\n                    token.isCssToken = true;\r\n                }\r\n                break;\r\n            } else if (scope.startsWith('text.')) {\r\n                token.isTextToken = true;\r\n                token.isTagAttrNameToken = regs.tagAttrName.test(token.scope);\r\n                break;\r\n            }\r\n        }\r\n        token.isTagToken = regs.tagToken.test(token.scope);\r\n        token.isTagNameToken = regs.tagNameToken.test(token.scope);\r\n        token.isStringToken = regs.stringToken.test(token.scope);\r\n        if (token.isCssToken) {\r\n            token.isCssValueToken = regs.cssValueToken.test(token.scope);\r\n            token.isCssPropertyToken = regs.cssPropertyToken.test(token.scope);\r\n            token.isCssSelectorToken = regs.cssSelectorToken.test(token.scope);\r\n            token.isCssClassToken = regs.cssClassToken.test(token.scope);\r\n            token.isCssAttributeToken = regs.cssAttributeToken.test(token.scope);\r\n            token.isCssPseudoToken = regs.cssPseudoToken.test(token.scope);\r\n        }\r\n    }\r\n    _isTextToken(token) {\r\n        if (token.isTextToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isTextToken;\r\n    }\r\n    _isSourceToken(token) {\r\n        if (token.isSourceToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isSourceToken;\r\n    }\r\n    _isCssToken(token) {\r\n        if (token.isCssToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssToken;\r\n    }\r\n    _isCssPropertyToken(token) {\r\n        if (token.isCssPropertyToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssPropertyToken;\r\n    }\r\n    _isCssValueToken(token) {\r\n        if (token.isCssValueToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssValueToken;\r\n    }\r\n    _isCssSelectorToken(token) {\r\n        if (token.isCssSelectorToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssSelectorToken;\r\n    }\r\n    _isCssClassToken(token) {\r\n        if (token.isCssClassToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssClassToken;\r\n    }\r\n    _isCssAttributeToken(token) {\r\n        if (token.isCssAttributeToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssAttributeToken;\r\n    }\r\n    _isCssPseudoToken(token) {\r\n        if (token.isCssPseudoToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssPseudoToken;\r\n    }\r\n    _isStringToken(token) {\r\n        if (token.isStringToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isStringToken;\r\n    }\r\n    _isTagToken(token) {\r\n        if (token.isTagToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isTagToken;\r\n    }\r\n    _isTagNameToken(token) {\r\n        if (token.isTagNameToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isTagNameToken;\r\n    }\r\n    _isAttrNameToken(token) {\r\n        if (token.isTagAttrNameToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isTagAttrNameToken;\r\n    }\r\n    _getPreTagName(tokenIndex, line) {\r\n        let tag = '';\r\n        let count = 0;\r\n        outerLoop: while (line >= 1) {\r\n            let lineObj = this.htmls[line - 1];\r\n            if (!lineObj.tokens) {\r\n                break;\r\n            }\r\n            tokenIndex = tokenIndex > -1 ? tokenIndex : lineObj.tokens.length;\r\n            for (let i = tokenIndex - 1; i >= 0; i--) {\r\n                let token = lineObj.tokens[i];\r\n                if (this._isTagNameToken(token)) {\r\n                    tag = lineObj.text.slice(token.startIndex, token.endIndex);\r\n                    break outerLoop;\r\n                }\r\n                count++;\r\n                if (count > 100) {\r\n                    break outerLoop;\r\n                }\r\n            }\r\n            line--;\r\n            tokenIndex = -1;\r\n        }\r\n        return tag;\r\n    }\r\n    _getPreCssProperty(tokenIndex, line) {\r\n        let property = '';\r\n        let count = 0;\r\n        outerLoop: while (line >= 1) {\r\n            let lineObj = this.htmls[line - 1];\r\n            if (!lineObj.tokens) {\r\n                break;\r\n            }\r\n            tokenIndex = tokenIndex > -1 ? tokenIndex : lineObj.tokens.length;\r\n            for (let i = tokenIndex - 1; i >= 0; i--) {\r\n                let token = lineObj.tokens[i];\r\n                if (this._isCssPropertyToken(token)) {\r\n                    property = lineObj.text.slice(token.startIndex, token.endIndex);\r\n                    break outerLoop;\r\n                }\r\n                count++;\r\n                if (count > 100 || !this._isCssValueToken(token)) {\r\n                    break outerLoop;\r\n                }\r\n            }\r\n            line--;\r\n            tokenIndex = -1;\r\n        }\r\n        return property;\r\n    }\r\n    _addTip(option) {\r\n        let result = null;\r\n        let fullMatch = option.fullMatch;\r\n        fullMatch = fullMatch === undefined ? true : fullMatch;\r\n        if (this.doneMap[option.value] && !option.skipDone) {\r\n            return;\r\n        }\r\n        if (option.skipMatch) {\r\n            result = {\r\n                indexs: [],\r\n                score: 0,\r\n            };\r\n        } else {\r\n            result = Util.fuzzyMatch(option.word.trim(), option.value, fullMatch);\r\n        }\r\n        if (result) {\r\n            let obj = {\r\n                result: option.value,\r\n                word: option.word || '',\r\n                desc: option.desc || '',\r\n                type: option.type || '',\r\n                before: option.before || '',\r\n                after: option.after || '',\r\n                icon: this.getIcon(option.scope),\r\n                indexs: result.indexs,\r\n                score: result.score,\r\n            };\r\n            this.results.push(obj);\r\n            this.doneMap[option.value] = obj;\r\n        } else {\r\n            this.doneMap[option.value] = true;\r\n        }\r\n    }\r\n    _showTip(all) {\r\n        let results = null;\r\n        let limit = all ? 200 : 10;\r\n        this.results.sort((a, b) => {\r\n            return b.score - a.score;\r\n        });\r\n        results = this.results.slice(0, limit);\r\n        this.setAutoTip(results);\r\n    }\r\n    checkEmmetValid(text) {\r\n        let _text = '';\r\n        if (regs.invalidEmmetParen.exec(text)) {\r\n            return false;\r\n        }\r\n        while (text !== (_text = text.replace(regs.paremEmmet, 'a'))) {\r\n            text = _text;\r\n        }\r\n        return !!regs.emmet.exec(text);\r\n    }\r\n    getTokenIndex(cursorPos) {\r\n        let tokens = this.htmls[cursorPos.line - 1].tokens;\r\n        if (tokens) {\r\n            for (let i = 0; i < tokens.length; i++) {\r\n                if (tokens[i].startIndex < cursorPos.column && tokens[i].endIndex >= cursorPos.column) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    getHtmlData() {\r\n        if (this.htmlData) {\r\n            return this.htmlData;\r\n        } else {\r\n            const htmlData = require(path.join(globalData.dirname, 'main/data/browsers.html-data'));\r\n            this.htmlData = htmlData;\r\n            htmlData.tagMap = {};\r\n            htmlData.tags.forEach((item) => {\r\n                htmlData.tagMap[item.name] = item;\r\n            });\r\n            return this.htmlData;\r\n        }\r\n    }\r\n    getCssData() {\r\n        if (this.cssData) {\r\n            return this.cssData;\r\n        } else {\r\n            const cssData = require(path.join(globalData.dirname, 'main/data/browsers.css-data'));\r\n            this.cssData = cssData;\r\n            cssData.propertyMap = {};\r\n            cssData.properties.forEach((item) => {\r\n                cssData.propertyMap[item.name] = item;\r\n            });\r\n            return this.cssData;\r\n        }\r\n    }\r\n    getIcon(scope) {\r\n        return '';\r\n    }\r\n}\r\n\r\nexport default Autocomplete;\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-03-04 16:13:41\r\n * @Description: \r\n */\r\nclass Node {\r\n    constructor(max) {\r\n        this.dataList = new Array(max + 1);\r\n        this.linkList = new Array(max + 2);\r\n        this.num = 0;\r\n        this.next = null;\r\n        this.prev = null;\r\n        this.pNode = null;\r\n    }\r\n}\r\nclass Btree {\r\n    /**\r\n     * 构造器\r\n     * @param {Function} compare 比较器\r\n     * @param {Number} max 节点可存储的最大数量 \r\n     */\r\n    constructor(compare, max) {\r\n        this.max = max || 4;\r\n        this.root = null;\r\n        this.head = null;\r\n        this.size = 0;\r\n        this.compare = compare || function (a, b) {\r\n            return a - b;\r\n        }\r\n    }\r\n    /**\r\n     * 插入\r\n     * @param {Any} value \r\n     */\r\n    insert(value) {\r\n        if (!this.root) {\r\n            let node = new Node(this.max);\r\n            node.dataList[0] = value;\r\n            node.num++;\r\n            this.root = node;\r\n            this.head = node;\r\n            this.size++;\r\n            this.arrayCache = null;\r\n            return;\r\n        }\r\n        let node = this._search(value, true);\r\n        let link = null;\r\n        let half = Math.floor(this.max / 2) || 1; //m为1时，n应该也为1\r\n        let result = this.iterator(node, value);\r\n        if (this.findIndex(node, value) > -1) { //value已经存在，直接返回\r\n            return result;\r\n        }\r\n        this.size++;\r\n        this.arrayCache = null;\r\n        while (node) {\r\n            let linkList = node.linkList;\r\n            let dataList = node.dataList;\r\n            for (let i = 0; i < node.num; i++) {\r\n                let data = dataList[i];\r\n                if (this.compare(value, data) < 0) {\r\n                    _insert(dataList, linkList, i);\r\n                    break;\r\n                } else if (i === node.num - 1) {\r\n                    _insert(dataList, linkList, i + 1);\r\n                }\r\n            }\r\n            node.num++; //关键字数量加1\r\n            if (node.num <= this.max) { //存储数量未超过最大限制，直接结束插入\r\n                break;\r\n            }\r\n            let newNode = new Node(this.max);\r\n            let isPnode = node.linkList[0];\r\n            value = dataList[half]; //父节点需要插入的值\r\n            if (!isPnode) { //叶子节点更新前后件\r\n                if (node.next) {\r\n                    node.next.prev = newNode;\r\n                }\r\n                newNode.next = node.next;\r\n                node.next = newNode;\r\n                newNode.prev = node;\r\n                newNode.pNode = node.pNode;\r\n            }\r\n            link = newNode;\r\n            //复制数据到新节点，如果是叶子节点，需要把value留在叶子节点中\r\n            for (let i = (isPnode ? half + 1 : half), j = 0; i < node.num; i++, j++) {\r\n                newNode.dataList[j] = dataList[i];\r\n                newNode.linkList[j + 1] = linkList[i + 1];\r\n                if (newNode.linkList[j + 1]) {\r\n                    newNode.linkList[j + 1].pNode = newNode;\r\n                }\r\n                dataList[i] = null;\r\n                linkList[i + 1] = null;\r\n                newNode.num++;\r\n            }\r\n            node.num = half; //关键字数量为最大值的一半\r\n            if (isPnode) {\r\n                node.dataList[node.num] = null;\r\n                // 非叶子节点，需要把左侧最后一个指针域复制过来\r\n                newNode.linkList[0] = node.linkList[node.num + 1];\r\n                if (newNode.linkList[0]) {\r\n                    newNode.linkList[0].pNode = newNode;\r\n                }\r\n                node.linkList[node.num + 1] = null;\r\n            }\r\n            if (!node.pNode) { //上溢到了根节点\r\n                this.root = new Node(this.max);\r\n                this.root.dataList[0] = value;\r\n                this.root.linkList[0] = node;\r\n                this.root.linkList[1] = newNode;\r\n                this.root.num = 1;\r\n                node.pNode = this.root;\r\n                newNode.pNode = this.root;\r\n                break;\r\n            }\r\n            node = node.pNode;\r\n        }\r\n        return result;\r\n\r\n        // 在i位置插入数据\r\n        function _insert(dataList, linkList, i) {\r\n            for (let j = node.num; j >= i + 1; j--) { //后移元素\r\n                dataList[j] = dataList[j - 1];\r\n                linkList[j + 1] = linkList[j];\r\n            }\r\n            dataList[i] = value;\r\n            linkList[i + 1] = link;\r\n            if (link) {\r\n                link.pNode = node;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 删除\r\n     * @param {Any} value \r\n     */\r\n    delete(value) {\r\n        let that = this;\r\n        let node = this._search(value);\r\n        let result = null;\r\n        let half = Math.floor(this.max / 2) || 1;\r\n        if (node) {\r\n            let dataList = node.dataList;\r\n            let index = this.findIndex(node, value);\r\n            result = dataList[index];\r\n            for (let i = index; i < node.num; i++) { //前移元素\r\n                dataList[i] = dataList[i + 1];\r\n            }\r\n            node.num--;\r\n            this.size--;\r\n            this.arrayCache = null;\r\n            if (!this.size) {\r\n                this.root = null;\r\n                return result;\r\n            }\r\n        }\r\n        while (node && node.num < half && node.pNode) {\r\n            let pNode = node.pNode;\r\n            let pIndex = pNode.linkList.indexOf(node);\r\n            let leftNode = pNode.linkList[pIndex - 1];\r\n            let rightNode = pNode.linkList[pIndex + 1];\r\n            let isPnode = node.linkList[0];\r\n            if (leftNode && leftNode.num > half) { //从左节点借\r\n                _moveRight(node, 1);\r\n                if (isPnode) {\r\n                    node.dataList[0] = pNode.dataList[pIndex - 1];\r\n                    node.linkList[0] = leftNode.linkList[leftNode.num];\r\n                    pNode.dataList[pIndex - 1] = leftNode.dataList[leftNode.num - 1];\r\n                } else {\r\n                    node.dataList[0] = leftNode.dataList[leftNode.num - 1];\r\n                    pNode.dataList[pIndex - 1] = node.dataList[0];\r\n                }\r\n                if (node.linkList[0]) {\r\n                    node.linkList[0].pNode = node;\r\n                }\r\n                pNode.dataList[pIndex - 1] = leftNode.dataList[leftNode.num - 1];\r\n                leftNode.dataList[leftNode.num - 1] = null;\r\n                leftNode.linkList[leftNode.num] = null;\r\n                leftNode.num--;\r\n                node.num++;\r\n            } else if (rightNode && rightNode.num > half) { //从右节点借\r\n                if (isPnode) {\r\n                    node.dataList[node.num] = pNode.dataList[pIndex];\r\n                    node.linkList[node.num + 1] = rightNode.linkList[0];\r\n                    pNode.dataList[pIndex] = rightNode.dataList[0];\r\n                } else {\r\n                    node.dataList[node.num] = rightNode.dataList[0];\r\n                    pNode.dataList[pIndex] = rightNode.dataList[1];\r\n                }\r\n                if (node.linkList[node.num + 1]) {\r\n                    node.linkList[node.num + 1].pNode = node;\r\n                }\r\n                _moveLeft(rightNode, 1);\r\n                rightNode.num--;\r\n                node.num++;\r\n            } else if (rightNode) { //向右合并\r\n                _join(node.pNode, pIndex, node, rightNode);\r\n            } else if (leftNode) { //向左合并\r\n                _join(node.pNode, pIndex - 1, leftNode, node);\r\n            }\r\n        }\r\n        return result;\r\n\r\n        function _join(pNode, pIndex, leftNode, rightNode) {\r\n            let isPnode = leftNode.linkList[0] ? 1 : 0;\r\n            // 右移右节点\r\n            _moveRight(rightNode, leftNode.num + isPnode);\r\n            //复制左节点到右节点\r\n            for (let i = 0; i < leftNode.num; i++) {\r\n                rightNode.dataList[i] = leftNode.dataList[i];\r\n                rightNode.linkList[i + 1] = leftNode.linkList[i + 1];\r\n                if (rightNode.linkList[i + 1]) {\r\n                    rightNode.linkList[i + 1].pNode = rightNode;\r\n                }\r\n            }\r\n            rightNode.linkList[0] = leftNode.linkList[0];\r\n            if (rightNode.linkList[0]) {\r\n                rightNode.linkList[0].pNode = rightNode;\r\n            }\r\n            if (isPnode) { //当前节点非叶子节点，父节点下移\r\n                rightNode.dataList[leftNode.num] = pNode.dataList[pIndex];\r\n            }\r\n            _moveLeft(pNode, 1, pIndex); //删除父节点和左域\r\n            rightNode.num += leftNode.num + isPnode;\r\n            pNode.num--;\r\n            if (!isPnode) { //叶子节点更新前后件\r\n                if (that.head === leftNode) { //头结点被删除\r\n                    that.head = rightNode;\r\n                    that.head.prev = null;\r\n                } else {\r\n                    leftNode.prev.next = rightNode;\r\n                    rightNode.prev = leftNode.prev;\r\n                }\r\n            }\r\n            if (!pNode.num) { //已经到了根节点\r\n                that.root = rightNode;\r\n                that.root.pNode = null;\r\n                node = null;\r\n            } else {\r\n                node = pNode;\r\n            }\r\n        }\r\n\r\n        //右移num个节点\r\n        function _moveRight(target, num) {\r\n            for (let i = target.num - 1; i >= 0; i--) {\r\n                target.dataList[num + i] = target.dataList[i];\r\n                target.linkList[num + i + 1] = target.linkList[i + 1];\r\n            }\r\n            target.linkList[num] = target.linkList[0];\r\n        }\r\n\r\n        //左移num个节点\r\n        function _moveLeft(target, num, index) {\r\n            index = index || 0;\r\n            for (let i = index; i < target.num; i++) {\r\n                target.dataList[i] = target.dataList[i + num];\r\n                target.linkList[i] = target.linkList[i + num];\r\n            }\r\n            target.linkList[target.num] = target.linkList[target.num + num];\r\n        }\r\n    }\r\n    /**\r\n     * 查找\r\n     * @param {Any} value \r\n     * @param {Function} compare 自定义查找比较器 \r\n     * @param {Boolean} insert 是否查找查找最近的节点 \r\n     */\r\n    search(value, compare, insert) {\r\n        let result = this._search(value, insert, compare);\r\n        if (result) {\r\n            result = this.iterator(result, value, compare);\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * @param {Node} node \r\n     * @param {Any} value \r\n     */\r\n    findIndex(node, value) {\r\n        for (let i = 0; i < node.num; i++) {\r\n            if (this.compare(value, node.dataList[i]) === 0) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    /**\r\n     * 把搜索结果封装成迭代器\r\n     * @param {Node} result \r\n     * @param {Any} value \r\n     */\r\n    iterator(result, value, compare) {\r\n        let index = result.num;\r\n        let orginIndex = result.num;\r\n        let originResult = result.num;\r\n        compare = compare || this.compare;\r\n        for (let i = 0; i < result.num; i++) {\r\n            let item = result.dataList[i];\r\n            let res = compare(value, item);\r\n            if(res <= 0) { //确保next一定大于等于当前值value\r\n                orginIndex = i;\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return {\r\n            next: _next,\r\n            prev: _prev,\r\n            reset: function () {\r\n                index = orginIndex;\r\n                result = originResult;\r\n            }\r\n        }\r\n\r\n        function _next() {\r\n            if (index < result.num) {\r\n                return result.dataList[index++];\r\n            } else if (result.next) {\r\n                result = result.next;\r\n                index = 0;\r\n                return result.dataList[index];\r\n            }\r\n            return null;\r\n        }\r\n\r\n        function _prev() {\r\n            index--;\r\n            if (index >= 0) {\r\n                return result.dataList[index];\r\n            } else if (result.prev) {\r\n                result = result.prev;\r\n                index = result.num - 1;\r\n                return result.dataList[index];\r\n            } else {\r\n                index++;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n    forEach(cb) {\r\n        let arr = this.toArray();\r\n        for (let i = 0; i < arr.length; i++) {\r\n            cb(arr[i], i);\r\n        }\r\n    }\r\n    toArray() {\r\n        if (this.arrayCache) {\r\n            return this.arrayCache;\r\n        }\r\n        let results = [];\r\n        let node = this.head;\r\n        while (node) {\r\n            let dataList = node.dataList;\r\n            for (let index = 0; index < node.num; index++) {\r\n                results.push(dataList[index]);\r\n            }\r\n            node = node.next;\r\n        }\r\n        this.arrayCache = results;\r\n        return results;\r\n    }\r\n    get(index) {\r\n        let node = this.head;\r\n        let count = -1;\r\n        while (node) {\r\n            let dataList = node.dataList;\r\n            for (let i = 0; i < node.num; i++) {\r\n                count++;\r\n                if (count == index) {\r\n                    return dataList[i];\r\n                }\r\n            }\r\n            node = node.next;\r\n        }\r\n        return null;\r\n    }\r\n    empty() {\r\n        this.root = null;\r\n        this.head = null;\r\n        this.size = 0;\r\n        this.arrayCache = null;\r\n    }\r\n    _search(value, isInsert, compare) {\r\n        let node = this.root;\r\n        compare = compare || this.compare;\r\n        while (node) {\r\n            let linkList = node.linkList;\r\n            let dataList = node.dataList;\r\n            for (let i = 0; i < node.num; i++) {\r\n                let res = compare(value, dataList[i]);\r\n                if (res === 0) {\r\n                    if (linkList[i + 1]) { //右侧子节点存放了父节点\r\n                        node = linkList[i + 1];\r\n                        break;\r\n                    } else {\r\n                        return node;\r\n                    }\r\n                } else if (res > 0) {\r\n                    if (!dataList[i + 1] || compare(value, dataList[i + 1]) < 0) { //目标在右侧子树中\r\n                        if (linkList[i + 1]) {\r\n                            node = linkList[i + 1];\r\n                            break;\r\n                        } else {\r\n                            return isInsert ? node : null;\r\n                        }\r\n                    }\r\n                } else { //目标在左侧子树中\r\n                    if (linkList[i]) {\r\n                        node = linkList[i];\r\n                        break;\r\n                    } else {\r\n                        return isInsert ? node : null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Btree;","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-31 14:42:01\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport Btree from '@/common/btree';\r\n\r\nconst comparator = function (a, b) {\r\n    return a.start.line - b.start.line;\r\n};\r\n\r\nconst singleTag = ['br', 'hr', 'area', 'base', 'img', 'input', 'link', 'meta', 'basefont', 'param', 'col', 'frame', 'embed', 'keygen', 'source'];\r\nconst singleTagMap = {};\r\nsingleTag.forEach((tag) => {\r\n    singleTagMap[tag] = true;\r\n});\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.folds = new Btree(comparator);\r\n        this.editorFunObj = {};\r\n        this.initProperties(editor, context);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this.editorFunObj, editor, ['unFold']);\r\n        Util.defineProperties(this, editor, ['selecter']);\r\n        Util.defineProperties(this, context, ['htmls']);\r\n    }\r\n    onInsertContentAfter(preCursorPos, cursorPos) {\r\n        let folds = this.folds.toArray();\r\n        let afterIndex = Infinity;\r\n        // 历史记录中操作光标在折叠区，需要先展开\r\n        for (let i = 0; i < folds.length; i++) {\r\n            let fold = folds[i];\r\n            if (fold.start.line < preCursorPos.line) {\r\n                if (fold.end.line > preCursorPos.line) {\r\n                    this.editorFunObj.unFold(fold.start.line);\r\n                }\r\n            } else {\r\n                afterIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        if (cursorPos.line > preCursorPos.line) {\r\n            if (folds[afterIndex] && folds[afterIndex].start.line === preCursorPos.line) {\r\n                this.editorFunObj.unFold(preCursorPos.line);\r\n                afterIndex++;\r\n            }\r\n            // 更新后面的行号\r\n            for (let i = afterIndex; i < folds.length; i++) {\r\n                folds[i].start.line += cursorPos.line - preCursorPos.line;\r\n                folds[i].end.line += cursorPos.line - preCursorPos.line;\r\n            }\r\n        }\r\n    }\r\n    onDeleteContentAfter(preCursorPos, cursorPos) {\r\n        let folds = this.folds.toArray();\r\n        let afterIndex = Infinity;\r\n        for (let i = 0; i < folds.length; i++) {\r\n            let fold = folds[i];\r\n            let starLine = fold.start.line;\r\n            let endLine = fold.end.line;\r\n            if (starLine <= preCursorPos.line) {\r\n                if (starLine < preCursorPos.line) {\r\n                    if ((starLine >= cursorPos.line && starLine < preCursorPos.line) || (starLine < cursorPos.line && endLine > cursorPos.line)) {\r\n                        this.editorFunObj.unFold(starLine);\r\n                    }\r\n                } else {\r\n                    if (preCursorPos.line > cursorPos.line) {\r\n                        this.editorFunObj.unFold(starLine);\r\n                    }\r\n                }\r\n            } else {\r\n                afterIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        if (preCursorPos.line > cursorPos.line) {\r\n            // 更新后面的行号\r\n            for (let i = afterIndex; i < folds.length; i++) {\r\n                folds[i].start.line += cursorPos.line - preCursorPos.line;\r\n                folds[i].end.line += cursorPos.line - preCursorPos.line;\r\n            }\r\n        }\r\n    }\r\n    // 折叠行\r\n    foldLine(line) {\r\n        let resultFold = this.getRangeFold(line);\r\n        if (resultFold) {\r\n            // 避免交叉折叠\r\n            for (let line = resultFold.start.line + 1; line < resultFold.end.line; line++) {\r\n                let fold = this.getFoldByLine(line);\r\n                if (fold) {\r\n                    if (fold.end.line > resultFold.end.line) {\r\n                        this.editorFunObj.unFold(line);\r\n                    }\r\n                }\r\n            }\r\n            this.folds.insert(resultFold);\r\n        }\r\n        return resultFold;\r\n    }\r\n    // 展开折叠行\r\n    unFold(line) {\r\n        let fold = this.getFoldByLine(line);\r\n        fold && this.folds.delete(fold);\r\n        return fold;\r\n    }\r\n    getFoldByLine(line) {\r\n        let it = this.folds.search(line, (a, b) => {\r\n            return a - b.start.line;\r\n        });\r\n        return it && it.next();\r\n    }\r\n    getLineInFold(line) {\r\n        let it = this.folds.search(\r\n            line,\r\n            (a, b) => {\r\n                return a - b.start.line;\r\n            },\r\n            true\r\n        );\r\n        if (it) {\r\n            let fold = it.prev();\r\n            if (fold && fold.start.line < line && fold.end.line > line) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * 获取折叠范围\r\n     * @param {Number} line 行号\r\n     * @param {Boolean} foldIconCheck 检测是否显示折叠图标\r\n     */\r\n    getRangeFold(line, foldIconCheck) {\r\n        let stack = [];\r\n        let startLine = line;\r\n        let lineObj = this.htmls[startLine - 1];\r\n        let startFold = null;\r\n        if (lineObj.folds && lineObj.folds.length) {\r\n            for (let i = 0; i < lineObj.folds.length; i++) {\r\n                let fold = lineObj.folds[i];\r\n                if (fold.side <= 0) {\r\n                    stack.push(fold);\r\n                } else if (fold.side > 0) {\r\n                    for (let i = stack.length - 1; i >= 0; i--) {\r\n                        if (stack[i].side + fold.side === 0) {\r\n                            stack.splice(i, 1);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (stack.length) {\r\n            let foldStartText = '';\r\n            startFold = stack.peek();\r\n            startFold = Object.assign({ line: startLine }, startFold);\r\n            foldStartText = lineObj.text.slice(startFold.startIndex, startFold.endIndex);\r\n            // 单标签没有折叠\r\n            if (singleTagMap[foldStartText]) {\r\n                return false;\r\n            }\r\n            // 单行注释\r\n            if (startFold.type === Util.constData.LINE_COMMENT) {\r\n                let endLine = startLine;\r\n                let fold = null;\r\n                line = startLine + 1;\r\n                while (line <= this.htmls.length) {\r\n                    let lineObj = this.htmls[line - 1];\r\n                    let text = lineObj.text.trimLeft();\r\n                    let startIndex = lineObj.text.length - text.length;\r\n                    let _fold = lineObj.folds && lineObj.folds[0];\r\n                    if (_fold && _fold.type === Util.constData.LINE_COMMENT && _fold.startIndex === startIndex) {\r\n                        endLine = line;\r\n                        fold = _fold;\r\n                        if (foldIconCheck && endLine - startLine > 1) {\r\n                            return true;\r\n                        }\r\n                        line++;\r\n                    } else {\r\n                        break;\r\n                    }\r\n                }\r\n                if (foldIconCheck) {\r\n                    return endLine - startLine > 1;\r\n                } else {\r\n                    return {\r\n                        start: startFold,\r\n                        end: Object.assign({ line: endLine }, fold),\r\n                    };\r\n                }\r\n            }\r\n            return this.getRangeFoldByStartFold(startFold, foldIconCheck);\r\n        }\r\n        return false;\r\n    }\r\n    getRangeFoldByStartFold(startFold, foldIconCheck) {\r\n        let line = startFold.line;\r\n        let stack = [];\r\n        let resultFold = null;\r\n        while (line <= this.htmls.length && (!foldIconCheck || line - startFold.line <= 1)) {\r\n            let lineObj = this.htmls[line - 1];\r\n            if (lineObj.folds && lineObj.folds.length) {\r\n                for (let i = 0; i < lineObj.folds.length; i++) {\r\n                    let fold = lineObj.folds[i];\r\n                    if (line === startFold.line && fold.startIndex <= startFold.startIndex) {\r\n                        continue;\r\n                    }\r\n                    if (fold.side === startFold.side) {\r\n                        stack.push(fold);\r\n                    } else if (startFold.side + fold.side === 0) {\r\n                        if (stack.length === 0) {\r\n                            resultFold = {\r\n                                start: startFold,\r\n                                end: Object.assign({ line: line }, fold),\r\n                            };\r\n                            return foldIconCheck ? line - startFold.line > 1 : resultFold;\r\n                        } else {\r\n                            stack.pop();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            line++;\r\n        }\r\n        return foldIconCheck ? line - startFold.line > 1 : resultFold;\r\n    }\r\n    /**\r\n     * 获取当前光标所处的范围\r\n     * @param {Object} cursorPos\r\n     */\r\n    getBracketMatch(cursorPos) {\r\n        let line = cursorPos.line;\r\n        let startFold = null;\r\n        let stack = [];\r\n        outerLoop: while (line >= 1 && !startFold) {\r\n            let folds = this.htmls[line - 1].folds || [];\r\n            for (let i = folds.length - 1; i >= 0; i--) {\r\n                let fold = folds[i];\r\n                // 跳过标签名\r\n                if(fold.type === Util.constData.TAG) {\r\n                    continue;\r\n                } else if (fold.side > 0 && (line < cursorPos.line || fold.endIndex < cursorPos.column)) {\r\n                    stack.push(fold);\r\n                } else if (fold.side < 0 && (line < cursorPos.line || fold.startIndex <= cursorPos.column)) {\r\n                    let exsitEnd = false;\r\n                    if (stack.length) {\r\n                        for (let i = stack.length - 1; i >= 0; i--) {\r\n                            if (stack[i].side + fold.side === 0) {\r\n                                stack.splice(i, 1);\r\n                                exsitEnd = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (!exsitEnd) {\r\n                        startFold = Object.assign({ line: line }, fold);\r\n                        break outerLoop;\r\n                    }\r\n                }\r\n            }\r\n            line--;\r\n        }\r\n        if (startFold) {\r\n            return this.getRangeFoldByStartFold(startFold);\r\n        }\r\n    }\r\n    // 根据相对行号获取真实行号(折叠后行号会改变)\r\n    getRealLine(line) {\r\n        let i = 0;\r\n        let lineCount = 1;\r\n        let realLine = 1;\r\n        let folds = this.folds.toArray();\r\n        while (i < folds.length && lineCount < line) {\r\n            let fold = folds[i];\r\n            if (lineCount + fold.start.line - realLine < line) {\r\n                lineCount += fold.start.line + 1 - realLine;\r\n                realLine = fold.end.line;\r\n            } else {\r\n                break;\r\n            }\r\n            i++;\r\n            while (i < folds.length && folds[i].end.line <= fold.end.line) {\r\n                //多级折叠\r\n                i++;\r\n            }\r\n        }\r\n        realLine += line - lineCount;\r\n        return realLine;\r\n    }\r\n    // 根据真实行号获取相对行号\r\n    getRelativeLine(line) {\r\n        let relLine = line;\r\n        let i = 0;\r\n        let folds = this.folds.toArray();\r\n        while (i < folds.length) {\r\n            let fold = folds[i];\r\n            if (line >= fold.end.line) {\r\n                relLine -= fold.end.line - fold.start.line - 1;\r\n            } else {\r\n                break;\r\n            }\r\n            i++;\r\n            while (i < folds.length && folds[i].end.line <= fold.end.line) {\r\n                //多级折叠\r\n                i++;\r\n            }\r\n        }\r\n        return relLine;\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-12 09:52:06\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\n\r\nexport default class {\r\n    constructor(editor, context, selecter) {\r\n        this.selecter = selecter;\r\n        this.initProperties(editor, context);\r\n        this.wordPattern = Util.getWordPattern(this.language);\r\n        this.wholeWordPattern = new RegExp(`^(${this.wordPattern.source})$`);\r\n        this.wordPattern = new RegExp(this.wordPattern.source, 'g');\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, ['language', 'fSearcher', 'searcher', 'nowCursorPos', 'cursor', '$nextTick', '$refs']);\r\n        Util.defineProperties(this, context, ['htmls', 'getRangeText', 'getAllText']);\r\n    }\r\n    search(searchObj) {\r\n        let resultObj = null;\r\n        let now = 0;\r\n        let count = 0;\r\n        let hasCache = this.hasCache();\r\n        let config = null;\r\n        searchObj = searchObj || {};\r\n        if (hasCache) {\r\n            resultObj = this.getFromCache(searchObj.direct, searchObj.increase);\r\n        } else {\r\n            config = (searchObj && searchObj.config) || this.getSearchConfig();\r\n            if (!config || !config.text) {\r\n                return { now: 0, count: 0 };\r\n            }\r\n            resultObj = this._search(config);\r\n        }\r\n        if (resultObj && resultObj.result) {\r\n            if (this.searcher === this || searchObj.increase) {\r\n                if (hasCache) {\r\n                    this.cursor.addCursorPos(resultObj.result.end);\r\n                    this.selecter.addActive(resultObj.result.end);\r\n                } else {\r\n                    //当前光标已处于选中区域边界，则不处理（历史记录后退时可能存在多个选中区域的情况）\r\n                    if (this.selecter.activedRanges.size === 0) {\r\n                        this.cursor.setCursorPos(resultObj.result.end);\r\n                    } else {\r\n                        this.initIndexs();\r\n                    }\r\n                    this.selecter.addRange(resultObj.results);\r\n                }\r\n            } else {\r\n                if (hasCache) {\r\n                    this.selecter.setActive(resultObj.result.end);\r\n                    this.cursor.setCursorPos(resultObj.result.end);\r\n                    this.searcher.clearSearch(); //搜索框确认搜索后，删除按键搜索\r\n                } else {\r\n                    this.selecter.addRange(resultObj.results);\r\n                    this.clearActive();\r\n                }\r\n            }\r\n            now = resultObj.now;\r\n            count = resultObj.results.length;\r\n        }\r\n\r\n        return {\r\n            now: now,\r\n            count: count,\r\n        };\r\n    }\r\n    _search(config) {\r\n        let that = this;\r\n        let reg = null;\r\n        let exec = null;\r\n        let start = null;\r\n        let end = null;\r\n        let result = null;\r\n        let results = [];\r\n        let indexs = {};\r\n        let rangePos = null;\r\n        let line = 1;\r\n        let column = 0;\r\n        let index = 0;\r\n        let text = this.getAllText();\r\n        let lines = config.text.split(/\\n/);\r\n        let source = config.text.replace(/\\\\|\\.|\\*|\\+|\\-|\\?|\\(|\\)|\\[|\\]|\\{|\\}|\\^|\\$|\\~|\\!|\\&|\\|/g, '\\\\$&');\r\n        //完整匹配\r\n        if (this.wholeWordPattern.test(config.text) && config.wholeWord) {\r\n            source = '(?:\\\\b|(?<=[^0-9a-zA-Z]))' + source + '(?:\\\\b|(?=[^0-9a-zA-Z]))';\r\n        }\r\n        reg = new RegExp('[^\\n]*?(' + source + ')|[^\\n]*?\\n', config.ignoreCase ? 'img' : 'mg');\r\n        config = config || {};\r\n        while ((exec = reg.exec(text))) {\r\n            if (!exec[1]) {\r\n                line++;\r\n                column = 0;\r\n            } else {\r\n                start = {\r\n                    line: line,\r\n                    column: column + exec[0].length - exec[1].length,\r\n                };\r\n                end = {\r\n                    line: line + lines.length - 1,\r\n                    column: lines.length > 1 ? lines.peek().length : column + exec[0].length,\r\n                };\r\n                line = end.line;\r\n                column = end.column;\r\n                rangePos = {\r\n                    start: start,\r\n                    end: end,\r\n                };\r\n                results.push(rangePos);\r\n                if (!result && Util.comparePos(end, that.nowCursorPos) >= 0) {\r\n                    result = rangePos;\r\n                    index = results.length - 1;\r\n                    indexs[results.length - 1] = true;\r\n                }\r\n            }\r\n        }\r\n        if (!results.length) {\r\n            return null;\r\n        }\r\n        if (!result && results.length) {\r\n            index = 0;\r\n            result = results[0];\r\n        }\r\n        this.cacheData = {\r\n            config: config,\r\n            results: results,\r\n            indexs: indexs,\r\n            index: index,\r\n        };\r\n        return {\r\n            now: this.cacheData.index + 1,\r\n            results: results,\r\n            result: result,\r\n        };\r\n    }\r\n    initIndexs() {\r\n        let ranges = this.selecter.activedRanges.toArray();\r\n        this.cacheData.indexs = {};\r\n        ranges.forEach((range) => {\r\n            for (let i = 0; i < this.cacheData.results.length; i++) {\r\n                let item = this.cacheData.results[i];\r\n                if (Util.comparePos(range.start, item.start) === 0) {\r\n                    this.cacheData.index = i;\r\n                    this.cacheData.indexs[i] = true;\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    // 重新搜索\r\n    refreshSearch(config) {\r\n        if (!this.hasCache() && !config) {\r\n            return;\r\n        }\r\n        return new Promise((resolve) => {\r\n            let refreshSearchId = this.refreshSearch.id + 1 || 1;\r\n            this.refreshSearch.id = refreshSearchId;\r\n            this.$nextTick(() => {\r\n                if (this.refreshSearch.id !== refreshSearchId) {\r\n                    return;\r\n                }\r\n                if (this.hasCache() || config) {\r\n                    config = config || this.cacheData.config;\r\n                    this.clearSearch();\r\n                    this.search({\r\n                        config: config,\r\n                    });\r\n                }\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n    hasCache() {\r\n        return !!this.cacheData;\r\n    }\r\n    /**\r\n     * 清除搜索\r\n     * @param {Boolean} retainActive 是否保留活动的选中区域\r\n     */\r\n    clearSearch(retainActive) {\r\n        if (retainActive) {\r\n            this.selecter.clearInactiveRange();\r\n        } else {\r\n            this.selecter.clearRange();\r\n        }\r\n        this.cacheData = null;\r\n    }\r\n    clearActive() {\r\n        if (this.cacheData) {\r\n            this.cacheData.index = -1;\r\n            this.cacheData.indexs = {};\r\n            this.selecter.clearActive();\r\n        }\r\n    }\r\n    setPrevActive(cursorPos) {\r\n        let results = this.cacheData.results;\r\n        let index = this.cacheData.index;\r\n        this.cacheData.index = results.length - 1;\r\n        for (let i = results.length - 1; i >= 0; i--) {\r\n            let item = results[i];\r\n            let res = Util.comparePos(item.end, cursorPos);\r\n            if (res < 0 || (index === -1 && res === 0)) {\r\n                this.cacheData.index = i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    setNextActive(cursorPos) {\r\n        let results = this.cacheData.results;\r\n        let index = this.cacheData.index;\r\n        this.cacheData.index = 0;\r\n        for (let i = 0; i < results.length; i++) {\r\n            let item = results[i];\r\n            let res = Util.comparePos(item.end, cursorPos);\r\n            if (res > 0 || (index === -1 && res === 0)) {\r\n                this.cacheData.index = i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    removeNow() {\r\n        this.cacheData.results.splice(this.cacheData.index, 1);\r\n        this.cacheData.index--;\r\n    }\r\n    clone(cacheData) {\r\n        this.cacheData = cacheData;\r\n        if (cacheData) {\r\n            this.selecter.addRange(cacheData.results);\r\n        }\r\n    }\r\n    getCacheData() {\r\n        return this.cacheData;\r\n    }\r\n    getNowRange() {\r\n        return this.cacheData.results[this.cacheData.index];\r\n    }\r\n    getFromCache(direct, increase) {\r\n        let results = this.cacheData.results;\r\n        let result = null;\r\n        let index = 0;\r\n        if (this.fSearcher === this && !increase) {\r\n            // 搜索框移动活动区域\r\n            if (direct === 'up') {\r\n                this.setPrevActive(this.nowCursorPos);\r\n            } else {\r\n                this.setNextActive(this.nowCursorPos);\r\n            }\r\n            index = this.cacheData.index;\r\n            result = this.cacheData.results[index];\r\n            this.cacheData.indexs = { i: true };\r\n        } else {\r\n            //CTRL+D移动活动区域\r\n            let indexs = this.cacheData.indexs;\r\n            let delta = 0;\r\n            if (direct === 'up') {\r\n                delta = -1;\r\n            } else {\r\n                delta = 1;\r\n            }\r\n            index = this.cacheData.index + delta;\r\n            if (index == results.length) {\r\n                index = 0;\r\n            } else if (index < 0) {\r\n                index = results.length - 1;\r\n            }\r\n            // 已经没有非活动区域\r\n            if (!indexs[index]) {\r\n                result = results[index];\r\n                indexs[index] = true;\r\n                this.cacheData.index = index;\r\n            } else {\r\n                index = this.cacheData.index;\r\n            }\r\n        }\r\n\r\n        return {\r\n            now: index + 1,\r\n            result: result,\r\n            results: results,\r\n        };\r\n    }\r\n    getConfig() {\r\n        if (!this.cacheData) {\r\n            return;\r\n        }\r\n        return Object.assign({}, this.cacheData.config);\r\n    }\r\n    // 获取待搜索的文本\r\n    getSearchConfig() {\r\n        let result = null;\r\n        let wholeWord = false;\r\n        let searchText = '';\r\n        let range = this.searcher.selecter.getRangeByCursorPos(this.nowCursorPos);\r\n        if (this.searcher === this && this.selecter.ranges.size > 0) {\r\n            return null;\r\n        }\r\n        if (range) {\r\n            searchText = this.getRangeText(range.start, range.end);\r\n        } else {\r\n            searchText = this.getNowWord().text;\r\n            wholeWord = true;\r\n        }\r\n        if (searchText) {\r\n            result = {\r\n                text: searchText,\r\n                wholeWord: wholeWord,\r\n                ignoreCase: wholeWord,\r\n            };\r\n        }\r\n        return result;\r\n    }\r\n    getNowWord() {\r\n        let text = this.htmls[this.nowCursorPos.line - 1].text;\r\n        let str = '';\r\n        let index = this.nowCursorPos.column;\r\n        let startColumn = index;\r\n        let endColumn = index;\r\n        let res = null;\r\n        while ((res = this.wordPattern.exec(text))) {\r\n            if (res.index <= index && res.index + res[0].length >= index) {\r\n                startColumn = res.index;\r\n                endColumn = res.index + res[0].length;\r\n                str = res[0];\r\n                break;\r\n            } else if (res.index > index) {\r\n                break;\r\n            }\r\n        }\r\n        this.wordPattern.lastIndex = 0;\r\n\r\n        return {\r\n            text: str,\r\n            range: {\r\n                start: {\r\n                    line: this.nowCursorPos.line,\r\n                    column: startColumn,\r\n                },\r\n                end: {\r\n                    line: this.nowCursorPos.line,\r\n                    column: endColumn,\r\n                },\r\n            },\r\n        };\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-13 10:41:16\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport Btree from '@/common/btree';\r\n\r\nconst comparator = function (a, b) {\r\n    let res = Util.comparePos(a.start, b.start);\r\n    if (res === 0) {\r\n        return Util.comparePos(a.end, b.end);\r\n    }\r\n    return res;\r\n};\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.initProperties(editor, context);\r\n        this.ranges = new Btree(comparator);\r\n        this.activedRanges = new Btree(comparator);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, ['cursor', 'renderSelectedBg', 'clearSelectionToken']);\r\n        Util.defineProperties(this, context, ['htmls']);\r\n        this.setContextData = (prop, value) => {\r\n            context.setData(prop, value);\r\n        };\r\n        this.setEditorData = (prop, value) => {\r\n            editor.setData(prop, value);\r\n        };\r\n    }\r\n    getRange(range) {\r\n        let it = this.ranges.search(range);\r\n        return it && it.next();\r\n    }\r\n    getRangeByLine(line) {\r\n        let results = [];\r\n        let it = this.ranges.search(\r\n            { line: line, column: 0 },\r\n            (value, item) => {\r\n                return value - item.start.line;\r\n            },\r\n            true\r\n        );\r\n        if (it) {\r\n            let value = it.next();\r\n            while (value) {\r\n                if (value.start === line || value.end.line === line) {\r\n                    results.push(value);\r\n                } else if (value.start.line > line) {\r\n                    break;\r\n                }\r\n                value = it.next();\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    // 检测光标是否在选中区域范围的边界\r\n    getRangeByCursorPos(cursorPos) {\r\n        let result = this.ranges.search(cursorPos, (value, item) => {\r\n            if (Util.comparePos(value, item.start) === 0 || Util.comparePos(value, item.end) === 0) {\r\n                return 0;\r\n            }\r\n            return Util.comparePos(value, item.start);\r\n        });\r\n        return result && result.next();\r\n    }\r\n    // 检查光标是否在选中范围内\r\n    getRangeWithCursorPos(cursorPos) {\r\n        let it = this.ranges.search(\r\n            cursorPos,\r\n            (value, item) => {\r\n                return Util.comparePos(value, item.start);\r\n            },\r\n            true\r\n        );\r\n        if (it) {\r\n            let value = it.prev();\r\n            if (value && Util.comparePos(value.end, cursorPos) >= 0) {\r\n                return value;\r\n            }\r\n            it.reset();\r\n            value = it.next();\r\n            if (value && Util.comparePos(value.start, cursorPos) == 0) {\r\n                return value;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    select(direct, wholeWord) {\r\n        this.cursor.multiCursorPos.forEach((cursorPos) => {\r\n            let range = this.getRangeByCursorPos(cursorPos);\r\n            if (range) {\r\n                let start = range.start;\r\n                let end = range.end;\r\n                this.cursor.moveCursor(cursorPos, direct, wholeWord);\r\n                if (direct === 'left') {\r\n                    if (Util.comparePos(cursorPos, range.start) < 0) {\r\n                        start = cursorPos;\r\n                    } else {\r\n                        end = cursorPos;\r\n                    }\r\n                } else {\r\n                    if (Util.comparePos(cursorPos, range.end) > 0) {\r\n                        end = cursorPos;\r\n                    } else {\r\n                        start = cursorPos;\r\n                    }\r\n                }\r\n                this.updateRange(range, {\r\n                    start: start,\r\n                    end: end,\r\n                });\r\n            } else {\r\n                let start = Object.assign({}, cursorPos);\r\n                let end = this.cursor.moveCursor(cursorPos, direct, wholeWord);\r\n                range = this.createRange(start, end);\r\n                if (range) {\r\n                    this.addRange({\r\n                        start: start,\r\n                        end: end,\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        this.renderSelectedBg();\r\n    }\r\n    selectAll() {\r\n        let end = {\r\n            line: this.htmls.length,\r\n            column: this.htmls.peek().text.length,\r\n        };\r\n        this.setEditorData('forceCursorView', false);\r\n        this.cursor.setCursorPos(end);\r\n        this.setRange(\r\n            {\r\n                line: 1,\r\n                column: 0,\r\n            },\r\n            end\r\n        );\r\n        this.renderSelectedBg();\r\n    }\r\n    selectAllOccurence() {\r\n        this.cursor.clearCursorPos();\r\n        this.ranges.forEach((item) => {\r\n            this.cursor.addCursorPos(item.end);\r\n            if (!item.active) {\r\n                item.active = true;\r\n                this.activedRanges.insert(item);\r\n            }\r\n        });\r\n        this.renderSelectedBg();\r\n    }\r\n    addActive(cursorPos) {\r\n        let range = this.getRangeByCursorPos(cursorPos);\r\n        if (range && !range.active) {\r\n            range.active = true;\r\n            this.activedRanges.insert(range);\r\n        }\r\n        this.renderSelectedBg();\r\n    }\r\n    // 添加选中区域\r\n    addRange(ranges) {\r\n        let results = [];\r\n        let list = ranges instanceof Array ? ranges : [ranges];\r\n        list.forEach((range) => {\r\n            let start = range.start;\r\n            let end = range.end;\r\n            let same = Util.comparePos(start, end);\r\n            if (same > 0) {\r\n                let tmp = start;\r\n                start = end;\r\n                end = tmp;\r\n            } else if (!same) {\r\n                return;\r\n            }\r\n            let active = this.cursor.getCursorsByLineColumn(start.line, start.column) || this.cursor.getCursorsByLineColumn(end.line, end.column);\r\n            range = {\r\n                start: {\r\n                    line: start.line,\r\n                    column: start.column,\r\n                },\r\n                end: {\r\n                    line: end.line,\r\n                    column: end.column,\r\n                },\r\n                active: !!active,\r\n            };\r\n            let _range = this.getRange(range);\r\n            if(_range) {\r\n                if(!_range.active) {\r\n                    _range.active = active;\r\n                    this.activedRanges.insert(_range);\r\n                }\r\n                results.push(_range);\r\n            } else {\r\n                this.ranges.insert(range);\r\n                active && this.activedRanges.insert(range);\r\n                results.push(range);\r\n                this.filterRange(range);\r\n            }\r\n        });\r\n        this.renderSelectedBg();\r\n        return ranges instanceof Array ? results : results[0];\r\n    }\r\n    removeRange(range) {\r\n        range = this.ranges.delete(range);\r\n        if (range) {\r\n            if (range.active) {\r\n                this.activedRanges.delete(range);\r\n            }\r\n            this.cursor.removeCursor(range.start);\r\n            this.cursor.removeCursor(range.end);\r\n            this.renderSelectedBg();\r\n        }\r\n    }\r\n    /**\r\n     * 设置选中区域\r\n     * @param {Object} start\r\n     * @param {Object} end\r\n     */\r\n    setRange(start, end) {\r\n        let same = Util.comparePos(start, end);\r\n        if (same > 0) {\r\n            let tmp = start;\r\n            start = end;\r\n            end = tmp;\r\n        } else if (!same) {\r\n            return;\r\n        }\r\n        let active = this.cursor.getCursorsByLineColumn(start.line, start.column) || this.cursor.getCursorsByLineColumn(end.line, end.column);\r\n        let range = {\r\n            start: Object.assign({}, start),\r\n            end: Object.assign({}, end),\r\n            active: !!active,\r\n        };\r\n        this.clearRange();\r\n        this.ranges.insert(range);\r\n        active && this.activedRanges.insert(range);\r\n        this.renderSelectedBg();\r\n        return range;\r\n    }\r\n    setActive(cursorPos) {\r\n        let range = this.getRangeByCursorPos(cursorPos);\r\n        this.activedRanges.forEach((item) => {\r\n            item.active = false;\r\n        });\r\n        this.activedRanges.empty();\r\n        if (range) {\r\n            range.active = true;\r\n            this.activedRanges.insert(range);\r\n        }\r\n        this.renderSelectedBg();\r\n    }\r\n    updateRange(target, range) {\r\n        let start = range.start;\r\n        let end = range.end;\r\n        let same = Util.comparePos(start, end);\r\n        if (same > 0) {\r\n            let tmp = start;\r\n            start = end;\r\n            end = tmp;\r\n        } else if (!same) {\r\n            return false;\r\n        }\r\n        this.ranges.delete(target);\r\n        target.start.line = start.line;\r\n        target.start.column = start.column;\r\n        target.end.line = end.line;\r\n        target.end.column = end.column;\r\n        this.ranges.insert(target);\r\n        this.filterRange(target);\r\n        this.renderSelectedBg();\r\n    }\r\n    filterRange(range) {\r\n        let it = this.ranges.search(range);\r\n        let dels = [];\r\n        let value = it.prev();\r\n        if (value && Util.comparePos(value.end, range.start) > 0) {\r\n            //删除前件\r\n            dels.push(value);\r\n        }\r\n        it.reset();\r\n        it.next();\r\n        value = it.next();\r\n        if (value && Util.comparePos(range.end, value.start) > 0) {\r\n            dels.push(value);\r\n        }\r\n        dels.forEach((item) => {\r\n            this.ranges.delete(item);\r\n            this.activedRanges.delete(item);\r\n            this.cursor.removeCursor(item.start);\r\n            this.cursor.removeCursor(item.end);\r\n        });\r\n    }\r\n    createRange(start, end) {\r\n        let same = Util.comparePos(start, end);\r\n        if (same > 0) {\r\n            let tmp = start;\r\n            start = end;\r\n            end = tmp;\r\n        }\r\n        if (same === 0) {\r\n            return null;\r\n        }\r\n        return {\r\n            start: start,\r\n            end: end,\r\n        };\r\n    }\r\n    // 清除选中背景\r\n    clearRange() {\r\n        this.ranges.empty();\r\n        this.activedRanges.empty();\r\n        this.renderSelectedBg();\r\n    }\r\n    clearActive() {\r\n        this.activedRanges.forEach((item) => {\r\n            item.active = false;\r\n        });\r\n        this.activedRanges.empty();\r\n        this.renderSelectedBg();\r\n    }\r\n    clearInactiveRange() {\r\n        if (!this.activedRanges.size) {\r\n            this.clearRange();\r\n        } else {\r\n            this.ranges.forEach((item) => {\r\n                if (!item.active) {\r\n                    this.ranges.delete(item);\r\n                }\r\n            });\r\n            this.renderSelectedBg();\r\n        }\r\n    }\r\n    clone(range, properties) {\r\n        properties = properties || [];\r\n        let result = {\r\n            start: Object.assign({}, range.start),\r\n            end: Object.assign({}, range.end),\r\n        };\r\n        properties.forEach((key) => {\r\n            result[key] = range[key];\r\n        });\r\n        return result;\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-14 11:20:31\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport Btree from '@/common/btree';\r\n\r\nconst regs = {\r\n    word: /[a-zA-Z0-9_]/,\r\n    dWord: Util.fullAngleReg,\r\n    space: /\\s/,\r\n};\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.initProperties(editor, context);\r\n        this.multiCursorPos = new Btree(Util.comparePos);\r\n        this.multiKeyCode = 'ctrl';\r\n        this.wordPattern = Util.getWordPattern(this.language);\r\n        this.rightWrodPattern = new RegExp(`^(${this.wordPattern.source})`);\r\n        this.leftWrodPattern = new RegExp(`(${this.wordPattern.source})$`);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, ['language', 'nowCursorPos', 'searcher', 'selecter', 'setNowCursorPos', 'renderCursor', 'getColumnByWidth', 'getStrWidth']);\r\n        Util.defineProperties(this, context, ['htmls']);\r\n    }\r\n    // 添加光标\r\n    addCursorPos(cursorPos) {\r\n        let pos = this.getCursorsByLineColumn(cursorPos.line, cursorPos.column);\r\n        if (pos) {\r\n            this.setNowCursorPos(pos);\r\n            return pos;\r\n        }\r\n        cursorPos = {\r\n            line: cursorPos.line,\r\n            column: cursorPos.column,\r\n        };\r\n        this.multiCursorPos.insert(cursorPos);\r\n        this.setNowCursorPos(cursorPos);\r\n        return cursorPos;\r\n    }\r\n    addCursorAbove() {\r\n        this.multiCursorPos.forEach((item) => {\r\n            if (item.line > 1) {\r\n                let width = item.moveWidth || this.getStrWidth(this.htmls[item.line - 1].text, 0, item.column);\r\n                let column = this.getColumnByWidth(this.htmls[item.line - 2].text, width);\r\n                let cursorPos = this.addCursorPos({\r\n                    line: item.line - 1,\r\n                    column: column,\r\n                });\r\n                cursorPos.moveWidth = width;\r\n                this.setNowCursorPos(cursorPos);\r\n            }\r\n        });\r\n    }\r\n    addCursorBelow() {\r\n        this.multiCursorPos.forEach((item) => {\r\n            if (item.line < this.htmls.length) {\r\n                let width = item.moveWidth || this.getStrWidth(this.htmls[item.line - 1].text, 0, item.column);\r\n                let column = this.getColumnByWidth(this.htmls[item.line].text, width);\r\n                let cursorPos = this.addCursorPos({\r\n                    line: item.line + 1,\r\n                    column: column,\r\n                });\r\n                cursorPos.moveWidth = width;\r\n                this.setNowCursorPos(cursorPos);\r\n            }\r\n        });\r\n    }\r\n    addCursorLineEnds() {\r\n        if (this.selecter.activedRanges.size) {\r\n            this.clearCursorPos();\r\n            this.selecter.activedRanges.forEach((item) => {\r\n                let startLine = item.start.line;\r\n                let endLine = item.end.line;\r\n                while (startLine < endLine) {\r\n                    this.addCursorPos({\r\n                        line: startLine,\r\n                        column: this.htmls[startLine - 1].text.length,\r\n                    });\r\n                    startLine++;\r\n                }\r\n                this.setNowCursorPos(\r\n                    this.addCursorPos({\r\n                        line: endLine,\r\n                        column: this.htmls[endLine - 1].text.length,\r\n                    })\r\n                );\r\n            });\r\n            this.searcher.clearSearch();\r\n        }\r\n    }\r\n    // 设置光标\r\n    setCursorPos(cursorPos) {\r\n        cursorPos = {\r\n            line: cursorPos.line,\r\n            column: cursorPos.column,\r\n        };\r\n        if (this.multiCursorPos.size == 1) {\r\n            let pos = this.multiCursorPos.get(0);\r\n            if (Util.comparePos(pos, cursorPos) === 0) {\r\n                return pos;\r\n            }\r\n        }\r\n        this.multiCursorPos.empty();\r\n        this.multiCursorPos.insert(cursorPos);\r\n        this.setNowCursorPos(cursorPos);\r\n        return cursorPos;\r\n    }\r\n    updateCursorPos(cursorPos, line, column) {\r\n        let pos = this.getCursorsByLineColumn(cursorPos.line, cursorPos.column);\r\n        if (pos === cursorPos) {\r\n            this.multiCursorPos.delete(cursorPos);\r\n        }\r\n        cursorPos.line = line;\r\n        cursorPos.column = column;\r\n        this.multiCursorPos.insert(cursorPos);\r\n        if (cursorPos === this.nowCursorPos) {\r\n            //触发滚动\r\n            this.setNowCursorPos(this.nowCursorPos);\r\n        } else {\r\n            this.renderCursor();\r\n        }\r\n        return cursorPos;\r\n    }\r\n    removeCursor(cursorPos) {\r\n        cursorPos = this.getCursorsByLineColumn(cursorPos.line, cursorPos.column);\r\n        if (cursorPos) {\r\n            cursorPos.del = true;\r\n            this.multiCursorPos.delete(cursorPos);\r\n            if (cursorPos === this.nowCursorPos) {\r\n                this.setNowCursorPos(null);\r\n            }\r\n            this.renderCursor();\r\n        }\r\n    }\r\n    removeCursorInRange(range) {\r\n        let it = this.multiCursorPos.search(range.start, null, true);\r\n        if (it) {\r\n            let value = null;\r\n            let toDels = [];\r\n            while ((value = it.next())) {\r\n                let res = Util.comparePos(value, range.end);\r\n                if (res >= 0) {\r\n                    break;\r\n                }\r\n                if (Util.comparePos(value, range.start) > 0) {\r\n                    toDels.push(value);\r\n                }\r\n            }\r\n            toDels.forEach((item) => {\r\n                item.del = true;\r\n                this.multiCursorPos.delete(item);\r\n            });\r\n            this.renderCursor();\r\n        }\r\n    }\r\n    clearCursorPos() {\r\n        this.multiCursorPos.forEach((item) => {\r\n            item.del = true;\r\n        });\r\n        this.multiCursorPos.empty();\r\n        this.setNowCursorPos(null);\r\n    }\r\n    getCursorsByLine(line) {\r\n        let results = [];\r\n        let value = null;\r\n        let it = this.multiCursorPos.search(\r\n            {\r\n                line: line,\r\n                column: 0,\r\n            },\r\n            null,\r\n            true\r\n        );\r\n        if (it) {\r\n            while ((value = it.next())) {\r\n                if (value.line === line) {\r\n                    results.push(value);\r\n                } else if (value.line > line) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    getCursorsByLineColumn(line, column) {\r\n        let it = this.multiCursorPos.search({\r\n            line: line,\r\n            column: column,\r\n        });\r\n        return it && it.next();\r\n    }\r\n    // 移动光标\r\n    moveCursor(cursorPos, direct, wholeWord) {\r\n        let text = this.htmls[cursorPos.line - 1].text;\r\n        let line = cursorPos.line;\r\n        let column = cursorPos.column;\r\n        // 去除上下移动光标的初始宽度记录\r\n        if(direct !== 'up' && direct !== 'down') {\r\n            cursorPos.moveWidth = 0;\r\n        }\r\n        if (direct === 'home') {\r\n            column = 0;\r\n        } else if (direct === 'end') {\r\n            column = this.htmls[line - 1].text.length;\r\n        } else if (direct === 'up') {\r\n            if (line > 1) {\r\n                let width = cursorPos.moveWidth || this.getStrWidth(text, 0, column);\r\n                cursorPos.moveWidth = width;\r\n                line--;\r\n                text = this.htmls[line - 1].text;\r\n                column = this.getColumnByWidth(text, width);\r\n            }\r\n        } else if (direct === 'down') {\r\n            if (line < this.htmls.length) {\r\n                let width = cursorPos.moveWidth || this.getStrWidth(text, 0, column);\r\n                cursorPos.moveWidth = width;\r\n                line++;\r\n                text = this.htmls[line - 1].text;\r\n                column = this.getColumnByWidth(text, width);\r\n            }\r\n        } else if (direct === 'left') {\r\n            while (column === 0 && line > 1) {\r\n                line--;\r\n                text = this.htmls[line - 1].text;\r\n                column = text.length;\r\n            }\r\n            if (column > 0) {\r\n                if (wholeWord) {\r\n                    //过滤开始的空格\r\n                    while (column && text[column - 1].match(regs.space)) {\r\n                        column--;\r\n                    }\r\n                    if (column > 0) {\r\n                        let res = null;\r\n                        let _column = column;\r\n                        column--;\r\n                        text = text.slice(0, _column);\r\n                        res = this.leftWrodPattern.exec(text);\r\n                        if (res) {\r\n                            column = res.index;\r\n                        }\r\n                    }\r\n                } else if (cursorPos.line === line) {\r\n                    column--;\r\n                }\r\n            }\r\n        } else {\r\n            while (column === text.length && line < this.htmls.length) {\r\n                line++;\r\n                column = 0;\r\n                text = this.htmls[line - 1].text;\r\n            }\r\n            if (column < text.length) {\r\n                if (wholeWord) {\r\n                    //过滤开始的空格\r\n                    while (column < text.length && text[column].match(regs.space)) {\r\n                        column++;\r\n                    }\r\n                    if (column < text.length) {\r\n                        text = text.slice(column);\r\n                        text = this.rightWrodPattern.exec(text);\r\n                        if (text && text.index == 0) {\r\n                            column += text[0].length;\r\n                        } else {\r\n                            column++;\r\n                        }\r\n                    }\r\n                } else if (cursorPos.line === line) {\r\n                    column++;\r\n                }\r\n            }\r\n        }\r\n        this.updateCursorPos(cursorPos, line, column);\r\n\r\n        return {\r\n            line: line,\r\n            column: column,\r\n        };\r\n    }\r\n    switchMultiKeyCode() {\r\n        this.multiKeyCode = this.multiKeyCode === 'ctrl' ? 'alt' : 'ctrl';\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-31 15:11:27\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.history = [];\r\n        this.initProperties(editor, context);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, ['cursor']);\r\n        Util.defineProperties(this, context, [\r\n            'insertContent',\r\n            'deleteContent',\r\n            'moveLineUp',\r\n            'moveLineDown',\r\n            'copyLineUp',\r\n            'copyLineDown',\r\n            'deleteCopyLineUp',\r\n            'deleteCopyLineDown',\r\n            'insertLine',\r\n            'deleteLine',\r\n            'replace',\r\n        ]);\r\n    }\r\n    // 撤销操作\r\n    undo() {\r\n        if (this.history.index > 0) {\r\n            let command = this.history[this.history.index - 1];\r\n            this.doCommand(command);\r\n            this.history.index--;\r\n            if (command.serial) {\r\n                //连续操作标识\r\n                let _command = this.history[this.history.index - 1];\r\n                _command && _command.serial === command.serial && this.undo();\r\n            }\r\n        }\r\n    }\r\n    // 重做操作\r\n    redo() {\r\n        if (this.history.index < this.history.length) {\r\n            let command = this.history[this.history.index];\r\n            this.history.index++;\r\n            this.doCommand(command);\r\n            if (command.serial) {\r\n                //连续操作标识\r\n                let _command = this.history[this.history.index];\r\n                _command && _command.serial === command.serial && this.redo();\r\n            }\r\n        }\r\n    }\r\n    // 操作命令\r\n    doCommand(command) {\r\n        let commandType = command.type || (command instanceof Array ? command[0].type : command.type);\r\n        switch (commandType) {\r\n            case Util.command.DELETE:\r\n                this.cursor.clearCursorPos();\r\n                this.deleteContent(Util.keyCode.BACKSPACE, command);\r\n                break;\r\n            case Util.command.INSERT:\r\n                this.cursor.clearCursorPos();\r\n                if (command instanceof Array) {\r\n                    var text = [];\r\n                    command.forEach((item) => {\r\n                        text.push(item.text);\r\n                    });\r\n                    this.insertContent(text, command);\r\n                } else {\r\n                    this.insertContent(command.text, command);\r\n                }\r\n                break;\r\n            case Util.command.DELETE_LINE:\r\n                this.cursor.clearCursorPos();\r\n                this.deleteLine(command);\r\n                break;\r\n            case Util.command.INSERT_LINE:\r\n                this.cursor.clearCursorPos();\r\n                this.insertLine(command);\r\n                break;\r\n            case Util.command.MOVEUP:\r\n                this.cursor.clearCursorPos();\r\n                this.moveLineUp(command);\r\n                break;\r\n            case Util.command.MOVEDOWN:\r\n                this.cursor.clearCursorPos();\r\n                this.moveLineDown(command);\r\n                break;\r\n            case Util.command.COPY_DOWN:\r\n                this.cursor.clearCursorPos();\r\n                this.copyLineDown(command);\r\n                break;\r\n            case Util.command.DELETE_COPY_DOWN:\r\n                this.cursor.clearCursorPos();\r\n                this.deleteCopyLineDown(command);\r\n                break;\r\n            case Util.command.COPY_UP:\r\n                this.cursor.clearCursorPos();\r\n                this.copyLineUp(command);\r\n                break;\r\n            case Util.command.DELETE_COPY_UP:\r\n                this.cursor.clearCursorPos();\r\n                this.deleteCopyLineUp(command);\r\n                break;\r\n            case Util.command.REPLACE:\r\n                this.cursor.clearCursorPos();\r\n                this.replace(command.text, command.cursorPos, command);\r\n                break;\r\n        }\r\n    }\r\n    // 添加历史记录\r\n    pushHistory(command) {\r\n        while (this.history.length > this.history.index) {\r\n            this.history.pop();\r\n        }\r\n        let that = this;\r\n        let lastCommand = this.history[this.history.index - 1];\r\n        command = this.sortComand(command);\r\n        if (lastCommand instanceof Array && command instanceof Array && lastCommand.length === command.length && Date.now() - this.pushHistoryTime < 2000) {\r\n            if (_checkSameOp(lastCommand) && _checkSameOp(command) && _combCheck(lastCommand[0], command[0])) {\r\n                for (let i = 0; i < lastCommand.length; i++) {\r\n                    _combCommand(lastCommand[i], command[i]);\r\n                }\r\n            } else {\r\n                this.history.push(command);\r\n            }\r\n        } else if (_combCheck(lastCommand, command)) {\r\n            _combCommand(lastCommand, command);\r\n        } else {\r\n            this.history.push(command);\r\n        }\r\n        this.history.index = this.history.length;\r\n        this.pushHistoryTime = Date.now();\r\n\r\n        function _checkSameOp(commandList) {\r\n            for (let i = 1; i < commandList.length; i++) {\r\n                if (commandList[i].type !== commandList[i - 1].type) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        function _combCheck(lastCommand, command) {\r\n            // 检测是否为连续插入或连续删除\r\n            if (\r\n                (command.type == Util.command.DELETE || command.type == Util.command.INSERT) &&\r\n                lastCommand &&\r\n                lastCommand.type == command.type &&\r\n                lastCommand.preCursorPos.line == command.cursorPos.line &&\r\n                Date.now() - that.pushHistoryTime < 2000\r\n            ) {\r\n                if (lastCommand.type == Util.command.DELETE) {\r\n                    if (Util.comparePos(lastCommand.cursorPos, command.preCursorPos) == 0) {\r\n                        return true;\r\n                    }\r\n                }\r\n                if (lastCommand.type == Util.command.INSERT) {\r\n                    if (Util.comparePos(lastCommand.cursorPos, command.preCursorPos) == 0 || Util.comparePos(lastCommand.cursorPos, command.cursorPos) == 0) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // 检查两次操作是否可以合并\r\n        function _combCommand(lastCommand, command) {\r\n            if (lastCommand.type === Util.command.DELETE) {\r\n                command.preCursorPos.column -= lastCommand.cursorPos.column - lastCommand.preCursorPos.column;\r\n                lastCommand.preCursorPos = command.preCursorPos;\r\n                lastCommand.cursorPos = command.cursorPos;\r\n            } else {\r\n                lastCommand.cursorPos = command.cursorPos;\r\n                if (command.keyCode === Util.keyCode.DELETE) {\r\n                    lastCommand.text = lastCommand.text + command.text;\r\n                } else {\r\n                    lastCommand.text = command.text + lastCommand.text;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // 更新历史记录\r\n    updateHistory(command) {\r\n        let index = this.history.index;\r\n        if (command instanceof Array) {\r\n            command.forEach((item, _index) => {\r\n                item.keyCode = this.history[index - 1][_index].keyCode;\r\n            });\r\n        } else {\r\n            command.keyCode = this.history[index - 1].keyCode;\r\n        }\r\n        this.history[index - 1] = this.sortComand(command);\r\n    }\r\n    sortComand(command) {\r\n        if (command instanceof Array) {\r\n            command.sort((a, b) => {\r\n                a = a.cursorPos;\r\n                b = b.cursorPos;\r\n                if (a.line === b.line) {\r\n                    return a.column - b.column;\r\n                }\r\n                return a.line - b.line;\r\n            });\r\n        }\r\n        return command;\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 13:42:22\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport Enum from '@/data/enum';\r\nimport expand from 'emmet';\r\n\r\nconst regs = {\r\n    word: /[a-zA-Z0-9_]/,\r\n    emmetWord: /^[a-zA-Z][a-zA-Z0-9\\-]*/,\r\n    emmetAttr: /^[\\.\\#]([^\\.\\#\\>\\<\\+\\*\\(\\)]*)/,\r\n    emmetNum: /^\\*(\\d+)/,\r\n    dWord: Util.fullAngleReg,\r\n    endTag: /(?=\\<\\/)/,\r\n    space: /\\s/,\r\n};\r\n\r\nclass Context {\r\n    constructor(editor) {\r\n        this.lineId = Number.MIN_SAFE_INTEGER;\r\n        this.serial = 1;\r\n        this.htmls = [];\r\n        this.fgLines = [];\r\n        this.lineIdMap = new Map(); //htmls的唯一标识对象\r\n        this.renderedIdMap = new Map(); //renderHtmls的唯一标识对象\r\n        this.renderedLineMap = new Map(); //renderHtmls的唯一标识对象\r\n        this.initProperties(editor);\r\n        this.initData();\r\n    }\r\n    initProperties(editor) {\r\n        Util.defineProperties(this, editor, [\r\n            'language',\r\n            'tabSize',\r\n            'nowCursorPos',\r\n            'maxLine',\r\n            'maxWidthObj',\r\n            'cursor',\r\n            'history',\r\n            'tokenizer',\r\n            'lint',\r\n            'folder',\r\n            'selecter',\r\n            'searcher',\r\n            'fSelecter',\r\n            'fSearcher',\r\n            'autocomplete',\r\n            'render',\r\n            'unFold',\r\n            'setNowCursorPos',\r\n            'setErrors',\r\n            'setAutoTip',\r\n            'getStrWidth',\r\n            '$emit',\r\n        ]);\r\n        this.setEditorData = (prop, value) => {\r\n            editor.setData(prop, value);\r\n        };\r\n    }\r\n    initData() {\r\n        this.htmls.push({\r\n            lineId: this.lineId++,\r\n            text: '',\r\n            html: '',\r\n            width: 0,\r\n            tokens: [],\r\n            folds: [],\r\n            states: [],\r\n            stateFold: null,\r\n        });\r\n        this.lineIdMap.set(this.htmls[0].lineId, this.htmls[0]);\r\n    }\r\n    setData(prop, value) {\r\n        if (typeof this[prop] === 'function') {\r\n            return;\r\n        }\r\n        this[prop] = value;\r\n    }\r\n    insertContent(text, command) {\r\n        let historyArr = null;\r\n        let cursorPosList = [];\r\n        let serial = false;\r\n        if (!command) {\r\n            // 如果有选中区域，需要先删除选中区域\r\n            if (this.selecter.activedRanges.size) {\r\n                let _historyArr = this.deleteContent();\r\n                // 连续操作标识\r\n                _historyArr.serial = this.serial++;\r\n                serial = _historyArr.serial;\r\n            }\r\n            cursorPosList = this.cursor.multiCursorPos.toArray();\r\n        } else {\r\n            command.forEach((item) => {\r\n                // 多个插入的光标可能相同，这里不能先添加光标\r\n                cursorPosList.push(item.cursorPos);\r\n            });\r\n        }\r\n        historyArr = this._insertMultiContent(text, cursorPosList, command);\r\n        historyArr.serial = serial;\r\n        if (!command) {\r\n            // 新增历史记录\r\n            this.history.pushHistory(historyArr);\r\n        } else {\r\n            // 撤销或重做操作后，更新历史记录\r\n            this.history.updateHistory(historyArr);\r\n            historyArr.serial = command.serial;\r\n        }\r\n        this.setNowCursorPos(this.cursor.multiCursorPos.get(0));\r\n        this.fSearcher.refreshSearch();\r\n        return historyArr;\r\n    }\r\n    _insertMultiContent(text, cursorPosList, command) {\r\n        let prePos = null;\r\n        let historyObj = null;\r\n        let historyArr = [];\r\n        let texts = text instanceof Array ? text : text.split(/\\r\\n|\\n/);\r\n        let lineDelta = 0;\r\n        let columnDelta = 0;\r\n        this.cursor.clearCursorPos();\r\n        if (text === '\\n') {\r\n            texts = ['\\n'];\r\n        }\r\n        cursorPosList.forEach((cursorPos, index) => {\r\n            let _text = texts.length === cursorPosList.length ? texts[index] : text;\r\n            let commandObj = (command && command[index]) || {};\r\n            let margin = commandObj.margin || 'right';\r\n            let active = commandObj.active || false;\r\n            let pos = {\r\n                line: cursorPos.line,\r\n                column: cursorPos.column,\r\n            };\r\n            pos.line += lineDelta;\r\n            if (prePos && pos.line === prePos.line) {\r\n                pos.column += columnDelta;\r\n            } else {\r\n                columnDelta = 0;\r\n            }\r\n            historyObj = this._insertContent(_text, pos, !command);\r\n            historyArr.push(historyObj);\r\n            prePos = historyObj.cursorPos;\r\n            historyObj.margin = margin;\r\n            historyObj.active = active;\r\n            lineDelta += historyObj.cursorPos.line - historyObj.preCursorPos.line;\r\n            columnDelta += historyObj.cursorPos.column - historyObj.preCursorPos.column;\r\n            if (margin === 'right') {\r\n                this.cursor.addCursorPos(historyObj.cursorPos);\r\n            } else {\r\n                this.cursor.addCursorPos(historyObj.preCursorPos);\r\n            }\r\n            if (active) {\r\n                this.selecter.addRange({\r\n                    start: historyObj.preCursorPos,\r\n                    end: historyObj.cursorPos,\r\n                });\r\n            }\r\n        });\r\n        return historyArr;\r\n    }\r\n    // 插入内容\r\n    _insertContent(text, cursorPos, alignmentTab) {\r\n        let lineObj = this.htmls[cursorPos.line - 1];\r\n        let nowLineText = lineObj.text;\r\n        let newPos = Object.assign({}, cursorPos);\r\n        cursorPos.moveWidth = 0; //去除上下移动光标的初始宽度记录\r\n        text = text.split(/\\r\\n|\\n/);\r\n        text = text.map((item) => {\r\n            item = {\r\n                lineId: this.lineId++,\r\n                text: item,\r\n                html: '',\r\n                width: 0,\r\n                tokens: null,\r\n                folds: null,\r\n                states: null,\r\n                stateFold: null,\r\n            };\r\n            this.lineIdMap.set(item.lineId, item);\r\n            return item;\r\n        });\r\n        if (text.length > 1) {\r\n            // 换行对齐\r\n            if (!text[0].text && alignmentTab) {\r\n                let tabStr = _getTabStr.call(this, nowLineText, this.folder.getRangeFold(cursorPos.line, true));\r\n                if (tabStr) {\r\n                    text[1].text = tabStr + text[1].text.trimLeft();\r\n                }\r\n            }\r\n            // 插入多行\r\n            newPos.column = text[text.length - 1].text.length;\r\n            text[0].text = nowLineText.slice(0, cursorPos.column) + text[0].text;\r\n            text[text.length - 1].text = text[text.length - 1].text + nowLineText.slice(cursorPos.column);\r\n            this.htmls = this.htmls\r\n                .slice(0, cursorPos.line - 1)\r\n                .concat(text)\r\n                .concat(this.htmls.slice(cursorPos.line));\r\n        } else {\r\n            // 插入一行\r\n            newPos.column += text[0].text.length;\r\n            text[0].text = nowLineText.slice(0, cursorPos.column) + text[0].text + nowLineText.slice(cursorPos.column);\r\n            this.htmls.splice(cursorPos.line - 1, 1, text[0]);\r\n        }\r\n        newPos.line += text.length - 1;\r\n        this.setEditorData('maxLine', this.htmls.length);\r\n        this.lint.onInsertContentAfter(cursorPos.line, newPos.line);\r\n        this.tokenizer.onInsertContentAfter(cursorPos.line, newPos.line);\r\n        this.folder.onInsertContentAfter(Object.assign({}, cursorPos), Object.assign({}, newPos));\r\n        this.setLineWidth(text);\r\n        this.setErrors([]);\r\n        this.setAutoTip(null);\r\n        this.render(true);\r\n        this.$emit('change');\r\n        let historyObj = {\r\n            type: Util.command.DELETE,\r\n            cursorPos: Object.assign({}, newPos),\r\n            preCursorPos: Object.assign({}, cursorPos),\r\n        };\r\n        return historyObj;\r\n\r\n        function _getTabStr(text, plus) {\r\n            let tabNum = 0;\r\n            let tabStr = '';\r\n            //该行有内容\r\n            let spaceNum = /^\\s+/.exec(text);\r\n            if (spaceNum) {\r\n                tabNum = /\\t+/.exec(spaceNum[0]);\r\n                tabNum = (tabNum && tabNum[0].length) || 0;\r\n                tabNum = tabNum + Math.ceil((spaceNum[0].length - tabNum) / this.tabSize);\r\n            }\r\n            tabNum += plus ? 1 : 0;\r\n            for (let i = 0; i < tabNum; i++) {\r\n                tabStr += '\\t';\r\n            }\r\n            return tabStr;\r\n        }\r\n    }\r\n    deleteContent(keyCode, command) {\r\n        let historyArr = [];\r\n        let rangeList = [];\r\n        if (command) {\r\n            rangeList = command.map((item) => {\r\n                let obj = {\r\n                    start: item.preCursorPos,\r\n                    end: item.cursorPos,\r\n                    margin: item.margin,\r\n                    active: item.active,\r\n                };\r\n                return obj;\r\n            });\r\n        } else {\r\n            this.cursor.multiCursorPos.forEach((item) => {\r\n                let range = this.selecter.getRangeByCursorPos(item);\r\n                if (range) {\r\n                    if (Util.comparePos(range.start, item) === 0) {\r\n                        range.margin = 'left';\r\n                    } else {\r\n                        range.margin = 'right';\r\n                    }\r\n                    rangeList.push(range);\r\n                } else {\r\n                    rangeList.push(item);\r\n                }\r\n            });\r\n        }\r\n        historyArr = this._deleteMultiContent(rangeList, keyCode);\r\n        if (!command) {\r\n            // 新增历史记录\r\n            historyArr.length && this.history.pushHistory(historyArr);\r\n        } else {\r\n            // 撤销或重做操作后，更新历史记录\r\n            historyArr.serial = command.serial;\r\n            this.history.updateHistory(historyArr);\r\n            historyArr.forEach((item) => {\r\n                this.cursor.addCursorPos(item.cursorPos);\r\n            });\r\n        }\r\n        this.setNowCursorPos(this.cursor.multiCursorPos.get(0));\r\n        this.searcher.clearSearch();\r\n        this.fSearcher.refreshSearch();\r\n        return historyArr;\r\n    }\r\n    _deleteMultiContent(rangeList, keyCode) {\r\n        let that = this;\r\n        let historyArr = [];\r\n        let historyObj = null;\r\n        let prePos = null;\r\n        let lineDelta = 0;\r\n        let columnDelta = 0;\r\n        this.cursor.clearCursorPos();\r\n        rangeList.forEach((item) => {\r\n            if (item.start && item.end) {\r\n                _deleteRangePos(item);\r\n            } else {\r\n                _deleteCursorPos(item);\r\n            }\r\n        });\r\n        return historyArr;\r\n\r\n        function _deleteCursorPos(cursorPos) {\r\n            let pos = {\r\n                line: cursorPos.line,\r\n                column: cursorPos.column,\r\n            };\r\n            pos.line -= lineDelta;\r\n            if (prePos && pos.line === prePos.line) {\r\n                pos.column -= columnDelta;\r\n            } else {\r\n                columnDelta = 0;\r\n            }\r\n            historyObj = that._deleteContent(pos, keyCode);\r\n            historyObj.text && historyArr.push(historyObj);\r\n            prePos = historyObj.cursorPos;\r\n            lineDelta += historyObj.preCursorPos.line - prePos.line;\r\n            columnDelta += historyObj.preCursorPos.column - prePos.column;\r\n            that.cursor.addCursorPos({\r\n                line: prePos.line,\r\n                column: prePos.column,\r\n            });\r\n        }\r\n\r\n        function _deleteRangePos(rangePos) {\r\n            let start = rangePos.start;\r\n            let end = rangePos.end;\r\n            start.line -= lineDelta;\r\n            end.line -= lineDelta;\r\n            if (prePos && start.line === prePos.line) {\r\n                start.column -= columnDelta;\r\n                if (start.line === end.line) {\r\n                    end.column -= columnDelta;\r\n                } else {\r\n                    columnDelta = 0;\r\n                }\r\n            } else {\r\n                columnDelta = 0;\r\n            }\r\n            historyObj = that._deleteContent(rangePos, keyCode);\r\n            historyObj.text && historyArr.push(historyObj);\r\n            prePos = historyObj.cursorPos;\r\n            lineDelta += historyObj.preCursorPos.line - prePos.line;\r\n            columnDelta += historyObj.preCursorPos.column - prePos.column;\r\n            that.cursor.addCursorPos({\r\n                line: prePos.line,\r\n                column: prePos.column,\r\n            });\r\n        }\r\n    }\r\n    // 删除内容\r\n    _deleteContent(cursorPos, keyCode) {\r\n        let range = null;\r\n        let margin = keyCode === Util.keyCode.DELETE ? 'left' : 'right';\r\n        cursorPos.moveWidth = 0; //去除上下移动光标的初始宽度记录\r\n        if (cursorPos.start && cursorPos.end) {\r\n            //删除范围内的内容\r\n            range = cursorPos;\r\n            cursorPos = range.end;\r\n            margin = range.margin;\r\n        }\r\n        let start = null;\r\n        let startObj = this.htmls[cursorPos.line - 1];\r\n        let text = startObj.text;\r\n        let deleteText = '';\r\n        let rangeUuid = [startObj.lineId];\r\n        let originPos = Object.assign({}, cursorPos);\r\n        let newPos = Object.assign({}, cursorPos);\r\n        if (range) {\r\n            // 删除选中区域\r\n            let end = range.end;\r\n            let endObj = this.htmls[end.line - 1];\r\n            start = range.start;\r\n            startObj = this.htmls[start.line - 1];\r\n            text = startObj.text;\r\n            deleteText = this.getRangeText(range.start, range.end);\r\n            if (start.line == 1 && end.line == this.maxLine) {\r\n                //全选删除\r\n                rangeUuid = [this.maxWidthObj.lineId];\r\n                this.lineIdMap.clear();\r\n            } else {\r\n                rangeUuid = this.htmls.slice(start.line - 1, end.line).map((item) => {\r\n                    this.lineIdMap.delete(item.lineId);\r\n                    return item.lineId;\r\n                });\r\n            }\r\n            this.lineIdMap.set(startObj.lineId, startObj);\r\n            if (start.line == end.line) {\r\n                // 单行选中\r\n                text = text.slice(0, start.column) + text.slice(end.column);\r\n                startObj.text = text;\r\n            } else {\r\n                // 多行选中\r\n                text = text.slice(0, start.column);\r\n                startObj.text = text;\r\n                text = endObj.text;\r\n                text = text.slice(end.column);\r\n                startObj.text += text;\r\n                this.htmls.splice(start.line, end.line - start.line);\r\n            }\r\n            newPos.line = start.line;\r\n            newPos.column = start.column;\r\n        } else if (Util.keyCode.DELETE == keyCode) {\r\n            // 向后删除一个字符\r\n            if (cursorPos.column == text.length) {\r\n                // 光标处于行尾\r\n                if (cursorPos.line < this.htmls.length) {\r\n                    this.lineIdMap.delete(this.htmls[cursorPos.line].lineId);\r\n                    text = startObj.text + this.htmls[cursorPos.line].text;\r\n                    this.htmls.splice(cursorPos.line, 1);\r\n                    deleteText = '\\n';\r\n                    originPos = {\r\n                        line: cursorPos.line - 1,\r\n                        column: 0,\r\n                    };\r\n                }\r\n            } else {\r\n                deleteText = text[cursorPos.column];\r\n                text = text.slice(0, cursorPos.column) + text.slice(cursorPos.column + 1);\r\n                originPos = {\r\n                    line: cursorPos.line,\r\n                    column: cursorPos.column + 1,\r\n                };\r\n            }\r\n            startObj.text = text;\r\n        } else {\r\n            // 向前删除一个字符\r\n            if (cursorPos.column == 0) {\r\n                // 光标处于行首\r\n                if (cursorPos.line > 1) {\r\n                    let column = this.htmls[cursorPos.line - 2].text.length;\r\n                    this.lineIdMap.delete(this.htmls[cursorPos.line - 2].lineId);\r\n                    text = this.htmls[cursorPos.line - 2].text + text;\r\n                    this.htmls.splice(cursorPos.line - 2, 1);\r\n                    deleteText = '\\n';\r\n                    newPos.line = cursorPos.line - 1;\r\n                    newPos.column = column;\r\n                }\r\n            } else {\r\n                deleteText = text[cursorPos.column - 1];\r\n                text = text.slice(0, cursorPos.column - 1) + text.slice(cursorPos.column);\r\n                newPos.column = cursorPos.column - 1;\r\n            }\r\n            startObj.text = text;\r\n        }\r\n        startObj.width = this.getStrWidth(startObj.text);\r\n        startObj.html = '';\r\n        startObj.tokens = null;\r\n        startObj.folds = null;\r\n        startObj.states = null;\r\n        startObj.stateFold = null;\r\n        this.setEditorData('maxLine', this.htmls.length);\r\n        this.lint.onDeleteContentAfter(originPos.line, newPos.line);\r\n        this.tokenizer.onDeleteContentAfter(originPos.line, newPos.line);\r\n        this.folder.onDeleteContentAfter(Object.assign({}, originPos), Object.assign({}, newPos));\r\n        this.setErrors([]);\r\n        this.setAutoTip(null);\r\n        this.render(true);\r\n        this.$emit('change');\r\n        // 更新最大文本宽度\r\n        if (startObj.width >= this.maxWidthObj.width) {\r\n            this.setEditorData('maxWidthObj', {\r\n                lineId: startObj.lineId,\r\n                text: startObj.text,\r\n                width: startObj.width,\r\n            });\r\n        } else if (rangeUuid.indexOf(this.maxWidthObj.lineId) > -1) {\r\n            this.setMaxWidth();\r\n        }\r\n        let historyObj = {\r\n            type: Util.command.INSERT,\r\n            cursorPos: Object.assign({}, newPos),\r\n            preCursorPos: Object.assign({}, originPos),\r\n            text: deleteText,\r\n            keyCode: keyCode,\r\n            margin: margin,\r\n            active: range && range.active,\r\n        };\r\n        return historyObj;\r\n    }\r\n    // 获取最大宽度\r\n    setMaxWidth() {\r\n        let that = this;\r\n        let index = 0;\r\n        let startTime = Date.now();\r\n        let maxWidthObj = {\r\n            line: this.htmls[0].lineId,\r\n            width: 0,\r\n        };\r\n        clearTimeout(this.setMaxWidthTimer);\r\n        _setMaxWidth();\r\n\r\n        function _setMaxWidth() {\r\n            while (index < that.htmls.length) {\r\n                let item = that.htmls[index];\r\n                if (item.width > maxWidthObj.width) {\r\n                    maxWidthObj = {\r\n                        lineId: item.lineId,\r\n                        text: item.text,\r\n                        width: item.width,\r\n                    };\r\n                }\r\n                index++;\r\n                if (Date.now() - startTime > 20) {\r\n                    break;\r\n                }\r\n            }\r\n            if (index < that.htmls.length) {\r\n                that.setMaxWidthTimer = setTimeout(() => {\r\n                    _setMaxWidth();\r\n                }, 20);\r\n            } else {\r\n                that.setEditorData('maxWidthObj', maxWidthObj);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 设置每行文本的宽度\r\n     * @param {Array} texts\r\n     */\r\n    setLineWidth(texts) {\r\n        let that = this;\r\n        let index = 0;\r\n        let startTime = Date.now();\r\n        let maxWidthObj = this.maxWidthObj;\r\n        clearTimeout(this.setLineWidthTimer);\r\n        _setLineWidth();\r\n\r\n        function _setLineWidth() {\r\n            while (index < texts.length) {\r\n                let lineObj = texts[index];\r\n                if (that.lineIdMap.has(lineObj.lineId)) {\r\n                    let width = that.getStrWidth(lineObj.text);\r\n                    lineObj.width = width;\r\n                    if (width > maxWidthObj.width) {\r\n                        maxWidthObj = {\r\n                            lineId: lineObj.lineId,\r\n                            text: lineObj.text,\r\n                            width: width,\r\n                        };\r\n                    }\r\n                }\r\n                index++;\r\n                if (Date.now() - startTime > 20) {\r\n                    break;\r\n                }\r\n            }\r\n            if (index < texts.length) {\r\n                that.setLineWidthTimer = setTimeout(() => {\r\n                    _setLineWidth();\r\n                }, 20);\r\n            } else {\r\n                that.setEditorData('maxWidthObj', maxWidthObj);\r\n            }\r\n        }\r\n    }\r\n    moveLineUp(command) {\r\n        this.moveLine(command, 'up');\r\n    }\r\n    moveLineDown(command) {\r\n        this.moveLine(command, 'down');\r\n    }\r\n    moveLine(command, direct) {\r\n        let cursorPosList = [];\r\n        let historyPosList = [];\r\n        let index = 0;\r\n        let prePos = null;\r\n        let searchConifg = null;\r\n        if (command) {\r\n            searchConifg = command.searchConifg;\r\n            cursorPosList = command.cursorPos;\r\n        } else {\r\n            searchConifg = this.searcher.getConfig();\r\n            cursorPosList = [];\r\n            // 过滤光标，去除上下相邻的光标\r\n            this.cursor.multiCursorPos.toArray().forEach((item) => {\r\n                let range = this.selecter.getRangeByCursorPos(item); //当前光标处于活动区域边界\r\n                let pass = true;\r\n                let line = range ? range.start.line : item.line;\r\n                if (prePos) {\r\n                    let preLine = prePos.end ? prePos.end.line : prePos.line;\r\n                    if (preLine + 1 === line || preLine === line) {\r\n                        //和之前的光标冲突，移除当前光标所处的活动区域\r\n                        range && this.selecter.removeRange(range);\r\n                        pass = false;\r\n                    }\r\n                }\r\n                if (pass) {\r\n                    var enLine = (range && range.end.line) || line;\r\n                    if ((line === 1 && direct === 'up') || (enLine === this.maxLine && direct === 'down')) {\r\n                        pass = false;\r\n                    } else {\r\n                        if (range) {\r\n                            range.margin = Util.comparePos(range.start, item) === 0 ? 'left' : 'right';\r\n                            prePos = range;\r\n                        } else {\r\n                            prePos = item;\r\n                        }\r\n                        cursorPosList.push(prePos);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        while (index < cursorPosList.length) {\r\n            let pos = cursorPosList[index];\r\n            let range = pos.start ? pos : null;\r\n            this._moveLine(pos, direct);\r\n            //移动光标和选区\r\n            let delta = direct === 'down' ? 1 : -1;\r\n            if (range) {\r\n                //更新选中区域坐标\r\n                range.start.line = range.start.line + delta;\r\n                range.end.line = range.end.line + delta;\r\n            } else {\r\n                // 更新光标坐标\r\n                pos.line = pos.line + delta;\r\n            }\r\n            historyPosList.push(range ? this.selecter.clone(range, ['margin']) : Object.assign({}, pos));\r\n            index++;\r\n        }\r\n        if (!historyPosList.length) {\r\n            return;\r\n        }\r\n        this.searcher.clearSearch();\r\n        this.cursor.clearCursorPos();\r\n        // 恢复活动区域和光标\r\n        historyPosList.forEach((item) => {\r\n            if (item.start) {\r\n                this.cursor.addCursorPos(item.margin === 'left' ? item.start : item.end);\r\n                this.selecter.addRange(item);\r\n            } else {\r\n                this.cursor.addCursorPos(item);\r\n            }\r\n        });\r\n        let historyObj = {\r\n            type: direct === 'down' ? Util.command.MOVEUP : Util.command.MOVEDOWN,\r\n            cursorPos: historyPosList,\r\n            searchConifg: searchConifg, // 记录搜索配置\r\n        };\r\n        if (!command) {\r\n            // 新增历史记录\r\n            this.history.pushHistory(historyObj);\r\n            this.searcher.refreshSearch(searchConifg);\r\n        } else {\r\n            // 撤销或重做操作后，更新历史记录\r\n            this.history.updateHistory(historyObj);\r\n            this.searcher.refreshSearch(command.searchConifg);\r\n        }\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    _moveLine(cursorPos, direct) {\r\n        let range = cursorPos.start ? cursorPos : null;\r\n        let upLine = 0;\r\n        let downLine = 0;\r\n        let text = '';\r\n        // 当前光标处于选中区域边界\r\n        if (range) {\r\n            text = this.htmls\r\n                .slice(range.start.line - 1, range.end.line)\r\n                .map((item) => {\r\n                    return item.text;\r\n                })\r\n                .join('\\n');\r\n            if (direct === 'down') {\r\n                upLine = range.start.line;\r\n                downLine = range.end.line + 1;\r\n                text = this.htmls[downLine - 1].text + '\\n' + text;\r\n            } else {\r\n                upLine = range.start.line - 1;\r\n                downLine = range.end.line;\r\n                text = text + '\\n' + this.htmls[upLine - 1].text;\r\n            }\r\n        } else {\r\n            upLine = cursorPos.line - (direct === 'down' ? 0 : 1);\r\n            downLine = upLine + 1;\r\n            text = this.htmls[downLine - 1].text + '\\n' + this.htmls[upLine - 1].text;\r\n        }\r\n        let start = {\r\n            line: upLine,\r\n            column: 0,\r\n        };\r\n        let end = {\r\n            line: downLine,\r\n            column: this.htmls[downLine - 1].text.length,\r\n        };\r\n        this._deleteContent({\r\n            start: start,\r\n            end: end,\r\n        });\r\n        this._insertContent(text, start);\r\n    }\r\n    // 向上复制一行\r\n    copyLineUp(command) {\r\n        this.copyLine(command, 'up');\r\n    }\r\n    // 向下复制一行\r\n    copyLineDown(command) {\r\n        this.copyLine(command, 'down');\r\n    }\r\n    copyLine(command, direct) {\r\n        let originList = [];\r\n        let cursorPosList = [];\r\n        let historyPosList = [];\r\n        let prePos = null;\r\n        let texts = [];\r\n        let searchConifg = null;\r\n        if (command) {\r\n            searchConifg = command.searchConifg;\r\n            originList = command.cursorPos;\r\n        } else {\r\n            searchConifg = this.searcher.getConfig();\r\n            originList = [];\r\n            // 过滤重叠光标和活动区域\r\n            this.cursor.multiCursorPos.toArray().forEach((item) => {\r\n                let range = this.selecter.getRangeByCursorPos(item);\r\n                let line = (range && range.start.line) || item.line;\r\n                let pass = true;\r\n                if (prePos) {\r\n                    let preLine = prePos.end ? prePos.end.line : prePos.line;\r\n                    if (preLine === line) {\r\n                        pass = false;\r\n                    }\r\n                }\r\n                if (pass) {\r\n                    if (range) {\r\n                        range.margin = Util.comparePos(range.start, item) === 0 ? 'left' : 'right';\r\n                        prePos = range;\r\n                    } else {\r\n                        prePos = item;\r\n                    }\r\n                    originList.push(prePos);\r\n                }\r\n            });\r\n        }\r\n        originList.forEach((item) => {\r\n            let line = 0;\r\n            let text = '';\r\n            if (item.end) {\r\n                line = item.start.line - 1;\r\n                text = this.htmls\r\n                    .slice(item.start.line - 1, item.end.line)\r\n                    .map((item) => {\r\n                        return item.text;\r\n                    })\r\n                    .join('\\n');\r\n            } else {\r\n                line = item.line - 1;\r\n                text = this.htmls[item.line - 1].text;\r\n            }\r\n            line = line < 1 ? 1 : line;\r\n            text = '\\n' + text;\r\n            texts.push(text);\r\n            cursorPosList.push({ line: line, column: this.htmls[line - 1].text.length });\r\n        });\r\n        this._insertMultiContent(texts, cursorPosList).forEach((item, index) => {\r\n            let line = 0;\r\n            let originPos = originList[index];\r\n            line = item.cursorPos.line;\r\n            if (direct === 'down') {\r\n                line = line + (originPos.start ? originPos.end.line - originPos.start.line + 1 : 1);\r\n            }\r\n            if (originPos.start) {\r\n                let delta = originPos.end.line - originPos.start.line;\r\n                originPos.end.line = line;\r\n                originPos.start.line = line - delta;\r\n            } else {\r\n                originPos.line = line;\r\n            }\r\n            historyPosList.push(originPos.start ? this.selecter.clone(originPos, ['margin']) : Object.assign({}, originPos));\r\n        });\r\n        this.searcher.clearSearch();\r\n        this.cursor.clearCursorPos();\r\n        // 恢复活动区域和光标\r\n        historyPosList.forEach((item) => {\r\n            if (item.start) {\r\n                this.cursor.addCursorPos(item.margin === 'left' ? item.start : item.end);\r\n                this.selecter.addRange(item);\r\n            } else {\r\n                this.cursor.addCursorPos(item);\r\n            }\r\n        });\r\n        let historyObj = {\r\n            type: direct === 'down' ? Util.command.DELETE_COPY_DOWN : Util.command.DELETE_COPY_UP,\r\n            cursorPos: historyPosList,\r\n            searchConifg: searchConifg, // 记录搜索配置\r\n        };\r\n        if (!command) {\r\n            // 新增历史记录\r\n            this.history.pushHistory(historyObj);\r\n            this.searcher.refreshSearch(searchConifg);\r\n        } else {\r\n            // 撤销或重做操作后，更新历史记录\r\n            this.history.updateHistory(historyObj);\r\n            this.searcher.refreshSearch(command.searchConifg);\r\n        }\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    // 删除上面一行\r\n    deleteCopyLineUp(command) {\r\n        this.deleteCopyLine(command, 'up');\r\n    }\r\n    // 删除下面一行\r\n    deleteCopyLineDown(command) {\r\n        this.deleteCopyLine(command, 'down');\r\n    }\r\n    deleteCopyLine(command, direct) {\r\n        let originList = [];\r\n        let cursorPosList = [];\r\n        let historyPosList = [];\r\n        originList = command.cursorPos;\r\n        originList.forEach((item) => {\r\n            let upLine = 0;\r\n            let downLine = 0;\r\n            let range = null;\r\n            let startColumn = 0;\r\n            let endColumn = 0;\r\n            if (item.end) {\r\n                upLine = item.start.line - 1;\r\n                downLine = item.end.line;\r\n            } else {\r\n                upLine = item.line - 1;\r\n                downLine = item.line;\r\n            }\r\n            endColumn = this.htmls[downLine - 1].text.length;\r\n            if (upLine < 1) {\r\n                upLine = 1;\r\n                if (downLine < this.maxLine) {\r\n                    downLine++;\r\n                    endColumn = 0;\r\n                }\r\n            } else {\r\n                startColumn = this.htmls[upLine - 1].text.length;\r\n            }\r\n            range = {\r\n                start: { line: upLine, column: startColumn },\r\n                end: { line: downLine, column: endColumn },\r\n            };\r\n            cursorPosList.push(range);\r\n        });\r\n        this._deleteMultiContent(cursorPosList).forEach((item, index) => {\r\n            let originPos = originList[index];\r\n            if (originPos.start) {\r\n                let delta = originPos.end.line - originPos.start.line;\r\n                if (direct === 'up') {\r\n                    originPos.start.line = item.cursorPos.line + (originPos.start.line === 1 ? 0 : 1);\r\n                    originPos.end.line = originPos.start.line + delta;\r\n                } else {\r\n                    originPos.end.line = item.cursorPos.line;\r\n                    originPos.start.line = originPos.end.line - delta;\r\n                }\r\n            } else {\r\n                if (direct === 'up') {\r\n                    originPos.line = item.cursorPos.line + (originPos.line === 1 ? 0 : 1);\r\n                } else {\r\n                    originPos.line = item.cursorPos.line;\r\n                }\r\n            }\r\n            historyPosList.push(originPos.start ? this.selecter.clone(originPos, ['margin']) : Object.assign({}, originPos));\r\n        });\r\n        this.searcher.clearSearch();\r\n        this.cursor.clearCursorPos();\r\n        // 恢复活动区域和光标\r\n        historyPosList.forEach((item) => {\r\n            if (item.start) {\r\n                this.cursor.addCursorPos(item.margin === 'left' ? item.start : item.end);\r\n                this.selecter.addRange(item);\r\n            } else {\r\n                this.cursor.addCursorPos(item);\r\n            }\r\n        });\r\n        let historyObj = {\r\n            type: direct === 'down' ? Util.command.COPY_UP : Util.command.COPY_DOWN,\r\n            cursorPos: historyPosList,\r\n            searchConifg: command.searchConifg,\r\n        };\r\n        this.history.updateHistory(historyObj);\r\n        this.searcher.refreshSearch(command.searchConifg);\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    // 插入当前行\r\n    insertLine(command) {\r\n        let searchConifg = command.searchConifg;\r\n        let originList = command.cursorPos;\r\n        let texts = command.text;\r\n        let cursorPosList = [];\r\n        originList.forEach((item) => {\r\n            let line = item.start ? item.start.line - 1 : item.line - 1;\r\n            line = line < 1 ? 1 : line;\r\n            cursorPosList.push({ line: line, column: this.htmls[line - 1].text.length });\r\n        });\r\n        this._insertMultiContent(texts, cursorPosList);\r\n        this.searcher.clearSearch();\r\n        this.cursor.clearCursorPos();\r\n        originList.forEach((item) => {\r\n            if (item.start) {\r\n                this.cursor.addCursorPos(item.margin === 'left' ? item.start : item.end);\r\n                this.selecter.addRange(item);\r\n            } else {\r\n                this.cursor.addCursorPos(item);\r\n            }\r\n        });\r\n        let historyObj = {\r\n            type: Util.command.DELETE_LINE,\r\n            cursorPos: originList,\r\n            searchConifg: searchConifg,\r\n        };\r\n        // 撤销或重做操作后，更新历史记录\r\n        this.history.updateHistory(historyObj);\r\n        this.searcher.refreshSearch(command.searchConifg);\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    // 删除当前行\r\n    deleteLine(command) {\r\n        let originList = [];\r\n        let cursorPosList = [];\r\n        let historyPosList = [];\r\n        let prePos = null;\r\n        let texts = [];\r\n        let searchConifg = null;\r\n        if (command) {\r\n            searchConifg = command.searchConifg;\r\n            originList = command.cursorPos;\r\n        } else {\r\n            searchConifg = this.searcher.getConfig();\r\n            this.cursor.multiCursorPos.forEach((item) => {\r\n                let range = this.selecter.getRangeByCursorPos(item);\r\n                let line = (range && range.start.line) || item.line;\r\n                let pass = true;\r\n                if (prePos) {\r\n                    let preLine = prePos.end ? prePos.end.line : prePos.line;\r\n                    if (preLine === line) {\r\n                        pass = false;\r\n                    }\r\n                }\r\n                if (pass) {\r\n                    if (range) {\r\n                        range.margin = Util.comparePos(range.start, item) === 0 ? 'left' : 'right';\r\n                        prePos = range;\r\n                    } else {\r\n                        prePos = item;\r\n                    }\r\n                    originList.push(prePos);\r\n                }\r\n            });\r\n        }\r\n        originList.forEach((item) => {\r\n            let upLine = 0;\r\n            let downLine = 0;\r\n            let range = null;\r\n            let startColumn = 0;\r\n            let endColumn = 0;\r\n            if (item.end) {\r\n                upLine = item.start.line - 1;\r\n                downLine = item.end.line;\r\n            } else {\r\n                upLine = item.line - 1;\r\n                downLine = item.line;\r\n            }\r\n            endColumn = this.htmls[downLine - 1].text.length;\r\n            if (upLine < 1) {\r\n                upLine = 1;\r\n                if (downLine < this.maxLine) {\r\n                    downLine++;\r\n                    endColumn = 0;\r\n                }\r\n            } else {\r\n                startColumn = this.htmls[upLine - 1].text.length;\r\n            }\r\n            range = {\r\n                start: { line: upLine, column: startColumn },\r\n                end: { line: downLine, column: endColumn },\r\n            };\r\n            texts.push(this.getRangeText(range.start, range.end));\r\n            cursorPosList.push(range);\r\n        });\r\n        this._deleteMultiContent(cursorPosList).forEach((item, index) => {\r\n            let originPos = originList[index];\r\n            let line = item.cursorPos.line;\r\n            let column = originList[index].column;\r\n            if (originPos.start) {\r\n                column = originPos.margin === 'left' ? originPos.start.column : originPos.end.column;\r\n            }\r\n            column = column > this.htmls[line - 1].text.length ? this.htmls[line - 1].text.length : column;\r\n            historyPosList.push({ line: line, column: column });\r\n        });\r\n        this.searcher.clearSearch();\r\n        this.cursor.clearCursorPos();\r\n        historyPosList.forEach((item) => {\r\n            this.cursor.addCursorPos(item);\r\n        });\r\n        let historyObj = {\r\n            type: Util.command.INSERT_LINE,\r\n            cursorPos: originList,\r\n            text: texts,\r\n            searchConifg: searchConifg,\r\n        };\r\n        if (!command) {\r\n            // 新增历史记录\r\n            this.history.pushHistory(historyObj);\r\n        } else {\r\n            // 撤销或重做操作后，更新历史记录\r\n            this.history.updateHistory(historyObj);\r\n            this.searcher.refreshSearch(command.searchConifg);\r\n        }\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    replace(texts, ranges) {\r\n        let historyArr = null;\r\n        let serial = this.serial++;\r\n        historyArr = this._deleteMultiContent(ranges);\r\n        historyArr.serial = serial;\r\n        this.history.pushHistory(historyArr);\r\n        historyArr = this._insertMultiContent(texts, this.cursor.multiCursorPos.toArray());\r\n        historyArr.serial = serial;\r\n        this.history.pushHistory(historyArr);\r\n        return this.fSearcher.refreshSearch();\r\n    }\r\n    // 点击自动提示替换输入的内容\r\n    replaceTip(tip) {\r\n        let word = tip.word || '';\r\n        let after = tip.after || '';\r\n        let before = tip.before || '';\r\n        let result = before + _getResult(tip) + after;\r\n        let ranges = null;\r\n        if (result === word) {\r\n            //替换前后一致，不做操作\r\n            return;\r\n        }\r\n        ranges = _getRanges.call(this);\r\n        this.replace(result, ranges);\r\n        _updatePos.call(this);\r\n        if (tip.type === Enum.TOKEN_TYPE.CSS_PROPERTY) {\r\n            //选中css属性名后，自动弹出属性值列表\r\n            this.autocomplete.search();\r\n        }\r\n\r\n        function _getResult(tip) {\r\n            let result = '';\r\n            if (tip.type === Enum.TOKEN_TYPE.EMMET_HTML || tip.type === Enum.TOKEN_TYPE.EMMET_CSS) {\r\n                try {\r\n                    const config = {};\r\n                    if (tip.type === Enum.TOKEN_TYPE.EMMET_CSS) {\r\n                        config.type = 'stylesheet';\r\n                    }\r\n                    result = expand(tip.result, config);\r\n                } catch (e) {\r\n                    result = tip.result;\r\n                }\r\n            } else if (tip.type === Enum.TOKEN_TYPE.TAG_NAME) {\r\n                result += tip.result + `></${tip.result}>`;\r\n            } else {\r\n                result = tip.result;\r\n            }\r\n            return result;\r\n        }\r\n\r\n        function _getRanges() {\r\n            let ranges = [];\r\n            this.cursor.multiCursorPos.forEach((cursorPos) => {\r\n                let range = null;\r\n                range = {\r\n                    start: { line: cursorPos.line, column: cursorPos.column - word.length },\r\n                    end: { line: cursorPos.line, column: cursorPos.column },\r\n                };\r\n                ranges.push(range);\r\n            });\r\n            return ranges;\r\n        }\r\n\r\n        function _updatePos() {\r\n            if (tip.type === Enum.TOKEN_TYPE.TAG_NAME || tip.type === Enum.TOKEN_TYPE.EMMET_HTML) {\r\n                //生成标签后，光标定位到标签中间的位置\r\n                let exec = regs.endTag.exec(result);\r\n                if (exec) {\r\n                    let text = result.slice(exec.index);\r\n                    let deltaArr = text.split('\\n');\r\n                    let multiCursorPos = this.cursor.multiCursorPos.toArray();\r\n                    for (let i = multiCursorPos.length - 1; i >= 0; i--) {\r\n                        let cursorPos = _getDeltaPos.call(this, deltaArr, multiCursorPos[i]);\r\n                        this.cursor.updateCursorPos(multiCursorPos[i], cursorPos.line, cursorPos.column);\r\n                    }\r\n                }\r\n            } else if (tip.type === Enum.TOKEN_TYPE.ATTR_NAME) {\r\n                //选中标签属性后，光标移动端\"\"内\r\n                this.cursor.multiCursorPos.forEach((item) => {\r\n                    this.cursor.moveCursor(item, 'left');\r\n                });\r\n            }\r\n        }\r\n\r\n        function _getDeltaPos(deltaArr, cursorPos) {\r\n            let line = cursorPos.line;\r\n            let column = cursorPos.column;\r\n            if (deltaArr.length === 1) {\r\n                column -= deltaArr[0].length;\r\n            } else {\r\n                line -= deltaArr.length - 1;\r\n                column = this.htmls[line - 1].text.length - deltaArr[0].length;\r\n            }\r\n            return {\r\n                line: line,\r\n                column: column,\r\n            };\r\n        }\r\n    }\r\n    // 获取选中范围内的文本\r\n    getRangeText(start, end) {\r\n        var text = this.htmls[start.line - 1].text;\r\n        if (start.line != end.line) {\r\n            let arr = [];\r\n            text = text.slice(start.column);\r\n            arr = this.htmls.slice(start.line, end.line - 1);\r\n            arr = arr.map((item) => {\r\n                return item.text;\r\n            });\r\n            text += arr.length ? '\\n' + arr.join('\\n') : '';\r\n            if (end.line <= this.maxLine) {\r\n                text += '\\n' + this.htmls[end.line - 1].text.slice(0, end.column);\r\n            }\r\n        } else {\r\n            text = text.slice(start.column, end.column);\r\n        }\r\n        return text;\r\n    }\r\n    // 获取待复制的文本\r\n    getCopyText(cut) {\r\n        let text = '';\r\n        let prePos = null;\r\n        let ranges = [];\r\n        this.cursor.multiCursorPos.forEach((item) => {\r\n            let range = this.selecter.getRangeByCursorPos(item);\r\n            let start = null;\r\n            if (range) {\r\n                ranges.push(range);\r\n                return;\r\n            }\r\n            if (prePos && item.line === prePos.line) {\r\n                return;\r\n            }\r\n            if (item.line > 1) {\r\n                start = {\r\n                    line: item.line - 1,\r\n                    column: this.htmls[item.line - 2].text.length,\r\n                };\r\n            } else {\r\n                start = {\r\n                    line: item.line,\r\n                    column: 0,\r\n                };\r\n            }\r\n            range = {\r\n                start: start,\r\n                end: {\r\n                    line: item.line,\r\n                    column: this.htmls[item.line - 1].text.length,\r\n                },\r\n            };\r\n            ranges.push(range);\r\n            prePos = item;\r\n        });\r\n        ranges.forEach((item) => {\r\n            let str = this.getRangeText(item.start, item.end);\r\n            text = str[0] === '\\n' ? (text += str) : (text += '\\n' + str);\r\n        });\r\n        if (cut) {\r\n            this.history.pushHistory(this._deleteMultiContent(ranges));\r\n            this.searcher.clearSearch();\r\n            this.fSearcher.refreshSearch();\r\n        }\r\n        return text.slice(1);\r\n    }\r\n    getAllText() {\r\n        return this.htmls\r\n            .map((item) => {\r\n                return item.text;\r\n            })\r\n            .join('\\n');\r\n    }\r\n}\r\nContext.contexts = {};\r\n\r\nexport default Context;\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 16:13:15\r\n * @Description: \r\n */\r\nimport Util from '@/common/util';\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.initProperties(editor, context);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, [\r\n            'nowCursorPos',\r\n            'cursor',\r\n            'selecter',\r\n            'searcher',\r\n            'autocomplete',\r\n            'fSearcher',\r\n            'history',\r\n            'autoTipList',\r\n            'setAutoTip',\r\n            'prevAutoTip',\r\n            'nextAutoTip',\r\n            'selectAutoTip',\r\n            'searchWord',\r\n            'openSearch',\r\n            '$emit',\r\n        ]);\r\n        Util.defineProperties(this, context, [\r\n            'htmls',\r\n            'insertContent',\r\n            'deleteContent',\r\n            'moveLineUp',\r\n            'moveLineDown',\r\n            'copyLineUp',\r\n            'copyLineDown',\r\n            'deleteLine'\r\n        ]);\r\n        this.setEditorData = (prop, value) => {\r\n            editor.setData(prop, value);\r\n        }\r\n    }\r\n    onKeyDown(e) {\r\n        let that = this;\r\n        if (e.ctrlKey && e.shiftKey) {\r\n            e.preventDefault();\r\n            switch (e.keyCode) {\r\n                case 37: //ctrl+shift+left\r\n                    this.selecter.select('left', true);\r\n                    break;\r\n                case 38: //ctrl+shift+up\r\n                    this.moveLineUp();\r\n                    break;\r\n                case 39: //ctrl+shift+right\r\n                    this.selecter.select('right', true);\r\n                    break;\r\n                case 40: //ctrl+shift+down\r\n                    this.moveLineDown();\r\n                    break;\r\n                case 68: //ctrl+shift+D\r\n                    this.copyLineUp();\r\n                    break;\r\n                case 75: //ctrl+shift+K\r\n                    this.deleteLine();\r\n                    break;\r\n                case 76: //ctrl+alt+L\r\n                    e.preventDefault();\r\n                    this.cursor.addCursorLineEnds();\r\n                    break;\r\n            }\r\n            return false;\r\n        } else if (e.ctrlKey && e.altKey) {\r\n            switch (e.keyCode) {\r\n                case 38: //ctrl+alt+up\r\n                    e.preventDefault();\r\n                    this.cursor.addCursorAbove();\r\n                    break;\r\n                case 40: //ctrl+alt+down\r\n                    e.preventDefault();\r\n                    this.cursor.addCursorBelow();\r\n                    break;\r\n            }\r\n        } else if (e.altKey && e.shiftKey) {\r\n            switch (e.keyCode) {\r\n                case 40: //alt+shift+down\r\n                    e.preventDefault();\r\n                    this.copyLineDown();\r\n                    break;\r\n            }\r\n        } else if (e.ctrlKey) {\r\n            switch (e.keyCode) {\r\n                case 37: //left arrow\r\n                    _moveCursor('left', true);\r\n                    break;\r\n                case 39: //right arrow\r\n                    _moveCursor('right', true);\r\n                    break;\r\n                case 65: //ctrl+A,全选\r\n                    e.preventDefault();\r\n                    this.selecter.selectAll();\r\n                    break;\r\n                case 68: //ctrl+D，搜素\r\n                    e.preventDefault();\r\n                    this.searchWord('down');\r\n                    break;\r\n                case 70: //ctrl+F，搜素\r\n                    e.preventDefault();\r\n                    this.openSearch();\r\n                    break;\r\n                case 72: //ctrl+H，搜素替换\r\n                    e.preventDefault();\r\n                    this.openSearch(true);\r\n                    break;\r\n                case 83: //ctrl+s 保存\r\n                    this.$emit('save');\r\n                    break;\r\n                case 90: //ctrl+Z，撤销\r\n                case 122:\r\n                    e.preventDefault();\r\n                    this.history.undo();\r\n                    break;\r\n                case 89: //ctrl+Y，重做\r\n                case 121:\r\n                    e.preventDefault();\r\n                    this.history.redo();\r\n                    break;\r\n            }\r\n        } else if (e.shiftKey) {\r\n            switch (e.keyCode) {\r\n                case 37: //left arrow\r\n                    this.selecter.select('left');\r\n                    break;\r\n                case 38: //up arrow\r\n                    this.selecter.select('up');\r\n                    break;\r\n                case 39: //right arrow\r\n                    this.selecter.select('right');\r\n                    break;\r\n                case 40: //down arrow\r\n                    this.selecter.select('down');\r\n                    break;\r\n            }\r\n        } else {\r\n            switch (e.keyCode) {\r\n                case 9: //tab键\r\n                    e.preventDefault();\r\n                    this.autocomplete.emmet();\r\n                    break;\r\n                case 37: //left arrow\r\n                    _moveCursor('left');\r\n                    break;\r\n                case 35: //end键\r\n                    _moveCursor('end');\r\n                    break;\r\n                case 36: //home键\r\n                    _moveCursor('home');\r\n                    break;\r\n                case 38: //up arrow\r\n                    if (this.autoTipList && this.autoTipList.length) {\r\n                        that.prevAutoTip();\r\n                    } else {\r\n                        _moveCursor('up');\r\n                    }\r\n                    break;\r\n                case 39: //right arrow\r\n                    _moveCursor('right');\r\n                    break;\r\n                case 40: //down arrow\r\n                    if (this.autoTipList && this.autoTipList.length) {\r\n                        that.nextAutoTip();\r\n                    } else {\r\n                        _moveCursor('down');\r\n                    }\r\n                    break;\r\n                case 13:\r\n                case 100: //enter\r\n                    if (this.autoTipList && this.autoTipList.length) {\r\n                        e.preventDefault();\r\n                        this.selectAutoTip();\r\n                    }\r\n                    break;\r\n                case Util.keyCode.DELETE: //delete\r\n                    this.deleteContent(Util.keyCode.DELETE);\r\n                    this.autocomplete.search();\r\n                    break;\r\n                case Util.keyCode.BACKSPACE: //backspace\r\n                    this.deleteContent(Util.keyCode.BACKSPACE);\r\n                    this.autocomplete.search();\r\n                    break;\r\n            }\r\n        }\r\n\r\n        function _moveCursor(direct, wholeWord) {\r\n            //ctrl+d后，第一次移动光标只是取消选中状态\r\n            if (!that.selecter.getRangeByCursorPos(that.nowCursorPos)) {\r\n                that.cursor.multiCursorPos.forEach((cursorPos) => {\r\n                    that.cursor.moveCursor(cursorPos, direct, wholeWord);\r\n                });\r\n            }\r\n            that.setAutoTip(null); //取消自动提示\r\n            that.searcher.clearSearch();\r\n            that.fSearcher.clearActive();\r\n        }\r\n    }\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-search\",on:{\"contextmenu\":[function($event){$event.preventDefault();},function($event){$event.stopPropagation();}],\"mousedown\":function($event){$event.stopPropagation();},\"selectstart\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"my-search-left active-click\",staticStyle:{\"border-radius\":\"0\"},attrs:{\"tabindex\":\"-1\"},on:{\"click\":_vm.showReplace}},[_c('span',{staticClass:\"iconfont\",class:{ 'icon-down1': _vm.replaceVisible, 'icon-right': !_vm.replaceVisible },staticStyle:{\"font-size\":\"14px\"},attrs:{\"title\":\"Toggle Replace mode\"}})]),_c('div',{staticStyle:{\"flex-grow\":\"1\"}},[_c('div',{staticClass:\"my-search-top\"},[_c('div',{staticClass:\"my-search-input\",class:{ 'my-active': _vm.input1Focus }},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],ref:\"input1\",style:({ height: _vm.input1Height + 'px' }),attrs:{\"type\":\"text\",\"spellcheck\":\"false\"},domProps:{\"value\":(_vm.text)},on:{\"blur\":function($event){_vm.input1Focus = false},\"focus\":function($event){_vm.input1Focus = true},\"keydown\":_vm.onKeyDown,\"input\":[function($event){if($event.target.composing){ return; }_vm.text=$event.target.value},_vm.onInput]}}),_c('span',{staticClass:\"my-search-suffix\",class:{ 'my-active': _vm.ignoreCase },attrs:{\"title\":\"Match Case(Alt+C)\"},on:{\"click\":_vm.changeCase}},[_vm._v(\"Aa\")]),_c('span',{staticClass:\"my-search-suffix iconfont icon-whole-word\",class:{ 'my-active': _vm.wholeWord },attrs:{\"title\":\"Match Whole Word(Alt+W)\"},on:{\"click\":_vm.changeWhole}})]),(_vm.count)?_c('div',[_c('span',[_vm._v(_vm._s(_vm.now))]),_c('span',[_vm._v(\" of \")]),_c('span',[_vm._v(_vm._s(_vm.count))])]):_c('span',{staticClass:\"no-result\",class:{ 'my-active': _vm.text }},[_vm._v(\"No results\")])]),(_vm.replaceVisible)?_c('div',{staticClass:\"my-search-bottom\",staticStyle:{\"margin-top\":\"5px\"}},[_c('div',{staticClass:\"my-search-input\",class:{ 'my-active': _vm.input2Focus }},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.replaceText),expression:\"replaceText\"}],ref:\"input2\",style:({ height: _vm.input2Height + 'px' }),attrs:{\"type\":\"text\",\"spellcheck\":\"false\"},domProps:{\"value\":(_vm.replaceText)},on:{\"blur\":function($event){_vm.input2Focus = false},\"focus\":function($event){_vm.input2Focus = true},\"keydown\":_vm.onKeyDown2,\"input\":function($event){if($event.target.composing){ return; }_vm.replaceText=$event.target.value}}})]),_c('span',{staticClass:\"iconfont icon-replace active-click\",class:{ 'enabled-color': _vm.count > 0, 'disabled-color': _vm.count == 0 },staticStyle:{\"margin-right\":\"5px\"},attrs:{\"title\":\"Replace(Enter)\",\"tabindex\":\"-1\"},on:{\"click\":_vm.replace}}),_c('span',{staticClass:\"iconfont icon-replace-all active-click\",class:{ 'enabled-color': _vm.count > 0, 'disabled-color': _vm.count == 0 },staticStyle:{\"margin-right\":\"5px\"},attrs:{\"title\":\"Replace All(Ctrl+Alt+Enter)\",\"tabindex\":\"-1\"},on:{\"click\":_vm.replaceAll}})]):_vm._e()]),_c('div',{staticClass:\"my-search-right\"},[_c('span',{staticClass:\"iconfont icon-up active-click\",class:{ 'enabled-color': _vm.count > 0, 'disabled-color': _vm.count == 0 },staticStyle:{\"margin-right\":\"5px\"},attrs:{\"title\":\"Previous Match(Shift Enter)\",\"tabindex\":\"-1\"},on:{\"click\":_vm.searchPrev,\"focus\":function($event){_vm.preFocus = true},\"blur\":function($event){_vm.preFocus = false}}}),_c('span',{staticClass:\"iconfont icon-down active-click\",class:{ 'enabled-color': _vm.count > 0, 'disabled-color': _vm.count == 0 },staticStyle:{\"margin-right\":\"5px\"},attrs:{\"title\":\"Next Match(Enter)\",\"tabindex\":\"-1\"},on:{\"click\":_vm.searchNext,\"focus\":function($event){_vm.nextFocus = true},\"blur\":function($event){_vm.nextFocus = false}}}),_c('span',{staticClass:\"iconfont icon-close active-click\",attrs:{\"title\":\"Close\"},on:{\"click\":_vm.close}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n    <div @contextmenu.prevent @contextmenu.stop @mousedown.stop @selectstart.stop class=\"my-search\">\r\n        <div class=\"my-search-left active-click\" style=\"border-radius: 0\" tabindex=\"-1\" @click=\"showReplace\">\r\n            <span :class=\"{ 'icon-down1': replaceVisible, 'icon-right': !replaceVisible }\" class=\"iconfont\" style=\"font-size: 14px\" title=\"Toggle Replace mode\"></span>\r\n        </div>\r\n        <div style=\"flex-grow: 1\">\r\n            <div class=\"my-search-top\">\r\n                <div :class=\"{ 'my-active': input1Focus }\" class=\"my-search-input\">\r\n                    <textarea\r\n                        @blur=\"input1Focus = false\"\r\n                        @focus=\"input1Focus = true\"\r\n                        @keydown=\"onKeyDown\"\r\n                        @input=\"onInput\"\r\n                        ref=\"input1\"\r\n                        :style=\"{ height: input1Height + 'px' }\"\r\n                        type=\"text\"\r\n                        spellcheck=\"false\"\r\n                        v-model=\"text\"\r\n                    ></textarea>\r\n                    <span :class=\"{ 'my-active': ignoreCase }\" @click=\"changeCase\" class=\"my-search-suffix\" title=\"Match Case(Alt+C)\">Aa</span>\r\n                    <span :class=\"{ 'my-active': wholeWord }\" @click=\"changeWhole\" class=\"my-search-suffix iconfont icon-whole-word\" title=\"Match Whole Word(Alt+W)\"></span>\r\n                </div>\r\n                <div v-if=\"count\">\r\n                    <span>{{ now }}</span>\r\n                    <span>&nbsp;of&nbsp;</span>\r\n                    <span>{{ count }}</span>\r\n                </div>\r\n                <span class=\"no-result\" :class=\"{ 'my-active': text }\" v-else>No results</span>\r\n            </div>\r\n            <div class=\"my-search-bottom\" style=\"margin-top: 5px\" v-if=\"replaceVisible\">\r\n                <div :class=\"{ 'my-active': input2Focus }\" class=\"my-search-input\">\r\n                    <textarea\r\n                        @blur=\"input2Focus = false\"\r\n                        @focus=\"input2Focus = true\"\r\n                        @keydown=\"onKeyDown2\"\r\n                        ref=\"input2\"\r\n                        :style=\"{ height: input2Height + 'px' }\"\r\n                        type=\"text\"\r\n                        v-model=\"replaceText\"\r\n                        spellcheck=\"false\"\r\n                    ></textarea>\r\n                </div>\r\n                <span\r\n                    :class=\"{ 'enabled-color': count > 0, 'disabled-color': count == 0 }\"\r\n                    @click=\"replace\"\r\n                    class=\"iconfont icon-replace active-click\"\r\n                    style=\"margin-right: 5px\"\r\n                    title=\"Replace(Enter)\"\r\n                    tabindex=\"-1\"\r\n                ></span>\r\n                <span\r\n                    :class=\"{ 'enabled-color': count > 0, 'disabled-color': count == 0 }\"\r\n                    @click=\"replaceAll\"\r\n                    class=\"iconfont icon-replace-all active-click\"\r\n                    style=\"margin-right: 5px\"\r\n                    title=\"Replace All(Ctrl+Alt+Enter)\"\r\n                    tabindex=\"-1\"\r\n                ></span>\r\n            </div>\r\n        </div>\r\n        <div class=\"my-search-right\">\r\n            <span\r\n                :class=\"{ 'enabled-color': count > 0, 'disabled-color': count == 0 }\"\r\n                @click=\"searchPrev\"\r\n                @focus=\"preFocus = true\"\r\n                @blur=\"preFocus = false\"\r\n                class=\"iconfont icon-up active-click\"\r\n                style=\"margin-right: 5px\"\r\n                title=\"Previous Match(Shift Enter)\"\r\n                tabindex=\"-1\"\r\n            ></span>\r\n            <span\r\n                :class=\"{ 'enabled-color': count > 0, 'disabled-color': count == 0 }\"\r\n                @click=\"searchNext\"\r\n                @focus=\"nextFocus = true\"\r\n                @blur=\"nextFocus = false\"\r\n                class=\"iconfont icon-down active-click\"\r\n                style=\"margin-right: 5px\"\r\n                title=\"Next Match(Enter)\"\r\n                tabindex=\"-1\"\r\n            ></span>\r\n            <span @click=\"close\" class=\"iconfont icon-close active-click\" title=\"Close\"></span>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport $ from 'jquery';\r\nexport default {\r\n    name: 'Search',\r\n    props: {\r\n        now: {\r\n            type: Number,\r\n            default: 1,\r\n        },\r\n        count: {\r\n            type: Number,\r\n            default: 0,\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            text: '',\r\n            replaceText: '',\r\n            replaceVisible: false,\r\n            wholeWord: false,\r\n            ignoreCase: false,\r\n            searchPrevActive: false,\r\n            searchNextActive: false,\r\n            input1Focus: false,\r\n            input2Focus: false,\r\n            preFocus: false,\r\n            nextFocus: false,\r\n            input1Height: 30,\r\n            input2Height: 30,\r\n        };\r\n    },\r\n    watch: {\r\n        text() {\r\n            let lines = this.text.split(/\\n/);\r\n            this.input1Height = lines.length * 20 + 10;\r\n        },\r\n        replaceText() {\r\n            let lines = this.replaceText.split(/\\n/);\r\n            this.input2Height = lines.length * 20 + 10;\r\n        },\r\n    },\r\n    created() {\r\n        $(document).on('keydown', (e) => {\r\n            if (e.keyCode === 13 || e.keyCode === 100) {\r\n                if (this.preFocus) {\r\n                    this.searchPrev();\r\n                } else if (this.nextFocus) {\r\n                    this.searchNext();\r\n                }\r\n            }\r\n        });\r\n    },\r\n    methods: {\r\n        initData(obj) {\r\n            for (let key in obj) {\r\n                this[key] = obj[key];\r\n            }\r\n        },\r\n        getData() {\r\n            return {\r\n                text: this.text,\r\n                wholeWord: this.wholeWord,\r\n                ignoreCase: this.ignoreCase,\r\n            };\r\n        },\r\n        search() {\r\n            let searchId = this.search.id || 1;\r\n            this.search.id = searchId;\r\n            this.$nextTick(() => {\r\n                if (this.search.id !== searchId) {\r\n                    return;\r\n                }\r\n                this.$emit('search', {\r\n                    text: this.text,\r\n                    ignoreCase: this.ignoreCase,\r\n                    wholeWord: this.wholeWord,\r\n                });\r\n            });\r\n        },\r\n        changeCase() {\r\n            this.ignoreCase = !this.ignoreCase;\r\n            this.focus();\r\n            this.onInput();\r\n        },\r\n        changeWhole() {\r\n            this.wholeWord = !this.wholeWord;\r\n            this.focus();\r\n            this.onInput();\r\n        },\r\n        showReplace() {\r\n            this.replaceVisible = !this.replaceVisible;\r\n        },\r\n        searchNext() {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            this.$emit('next');\r\n        },\r\n        searchPrev() {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            this.$emit('prev');\r\n        },\r\n        replace() {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            this.$emit('replace', { text: this.replaceText });\r\n        },\r\n        replaceAll() {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            this.$emit('replaceAll', { text: this.replaceText });\r\n        },\r\n        close() {\r\n            this.$emit('close');\r\n        },\r\n        focus() {\r\n            this.$refs.input1.focus();\r\n            requestAnimationFrame(() => {\r\n                this.$refs.input1.focus();\r\n            });\r\n        },\r\n        directBlur() {\r\n            this.searchPrevActive = false;\r\n            this.searchNextActive = false;\r\n        },\r\n        onKeyDown(e) {\r\n            if (e.keyCode === 13 || e.keyCode === 100) {\r\n                e.preventDefault();\r\n                this.$emit('next');\r\n            }\r\n        },\r\n        onKeyDown2(e) {\r\n            if (e.keyCode === 13 || e.keyCode === 100) {\r\n                e.preventDefault();\r\n                if (this.count) {\r\n                    if (e.ctrlKey && e.altKey) {\r\n                        this.replaceAll();\r\n                    } else {\r\n                        this.replace();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        onInput() {\r\n            clearTimeout(this.searchTimer);\r\n            this.searchTimer = setTimeout(() => {\r\n                this.search();\r\n            }, 100);\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=097d468a&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"auto\",staticClass:\"my-auto my-shadow my-border my-scroll-overlay my-scroll-mini\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();},\"wheel\":function($event){$event.stopPropagation();}}},[_c('div',_vm._l((_vm.tipList),function(item){return _c('div',{staticClass:\"my-auto-item my-center-between\",class:{'my-active': item.active},on:{\"mousedown\":function($event){return _vm.onClick(item)}}},[_c('div',{staticClass:\"my-center-between\"},[_c('div',{staticClass:\"my-auto-icon my-center-center iconfont\",class:[item.icon]}),_c('div',{staticClass:\"my-auto-content\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm._html(item))}})])]),_c('div',{staticClass:\"my-auto-desc\"},[_vm._v(_vm._s(item.desc))])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div :style=\"styles\" @mousedown.stop @wheel.stop class=\"my-auto my-shadow my-border my-scroll-overlay my-scroll-mini\" ref=\"auto\">\r\n\t\t<div>\r\n\t\t\t<div :class=\"{'my-active': item.active}\" @mousedown=\"onClick(item)\" class=\"my-auto-item my-center-between\" v-for=\"item in tipList\">\r\n\t\t\t\t<div class=\"my-center-between\">\r\n\t\t\t\t\t<div :class=\"[item.icon]\" class=\"my-auto-icon my-center-center iconfont\"></div>\r\n\t\t\t\t\t<div class=\"my-auto-content\">\r\n\t\t\t\t\t\t<span v-html=\"_html(item)\"></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"my-auto-desc\">{{item.desc}}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'AutoTip',\r\n    props: {\r\n        tipList: {\r\n            type: Array,\r\n            default: []\r\n        },\r\n        styles: {\r\n            type: Object\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            nowIndex: 0,\r\n            itemHeight: 25\r\n        }\r\n    },\r\n    computed: {\r\n        _html() {\r\n            return (item) => {\r\n                let index = 0;\r\n                let html = '';\r\n                item.indexs.forEach((_index) => {\r\n                    html += item.result.slice(index, _index);\r\n                    html += `<span class=\"match-char\">${item.result[_index]}</span>`;\r\n                    index = _index + 1;\r\n                });\r\n                return html + item.result.slice(index);\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        nowIndex() {\r\n            let $auto = this.$refs.auto;\r\n            let height = (this.nowIndex + 1) * this.itemHeight;\r\n            if ($auto && height > $auto.clientHeight + $auto.scrollTop) {\r\n                $auto.scrollTop = height - $auto.clientHeight;\r\n            } else if ($auto && height < $auto.scrollTop + this.itemHeight) {\r\n                $auto.scrollTop = height - this.itemHeight;\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n        onClick(item) {\r\n            this.$emit('change', item);\r\n        },\r\n        prev() {\r\n            let index = this.getActiveIndex();\r\n            this.tipList[index].active = false;\r\n            index = index - 1;\r\n            index = index < 0 ? this.tipList.length - 1 : index;\r\n            this.tipList[index].active = true;\r\n            this.nowIndex = index;\r\n        },\r\n        next() {\r\n            let index = this.getActiveIndex();\r\n            this.tipList[index].active = false;\r\n            index = index + 1;\r\n            index = index > this.tipList.length - 1 ? 0 : index;\r\n            this.tipList[index].active = true;\r\n            this.nowIndex = index;\r\n        },\r\n        getActiveIndex() {\r\n            for (let i = 0; i < this.tipList.length; i++) {\r\n                if (this.tipList[i].active) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.icon-function {\r\n    color: #a6e22e;\r\n}\r\n.icon-class {\r\n    color: gold;\r\n}\r\n.icon-property {\r\n    color: lightskyblue;\r\n}\r\n.icon-value {\r\n    color: lightblue;\r\n}\r\n</style>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./AutoTip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./AutoTip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AutoTip.vue?vue&type=template&id=378f7506&scoped=true&\"\nimport script from \"./AutoTip.vue?vue&type=script&lang=js&\"\nexport * from \"./AutoTip.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AutoTip.vue?vue&type=style&index=0&id=378f7506&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"378f7506\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-tip\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"my-tip-content\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.content)}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div :style=\"styles\" @mousedown.stop class=\"my-tip\">\r\n\t\t<div class=\"my-tip-content\">\r\n\t\t\t<div v-html=\"content\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'Tip',\r\n    props: {\r\n        content: String,\r\n        styles: {\r\n            type: Object\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n        }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Tip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Tip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tip.vue?vue&type=template&id=3edf792c&\"\nimport script from \"./Tip.vue?vue&type=script&lang=js&\"\nexport * from \"./Tip.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div @contextmenu.prevent.stop=\"onContextmenu\" @selectstart.prevent @wheel.prevent=\"onWheel\" class=\"my-editor-wrap\" ref=\"editor\">\r\n        <!-- 行号 -->\r\n        <div :style=\"{ top: _numTop }\" class=\"my-nums\" v-if=\"active\">\r\n            <!-- 占位行号，避免行号宽度滚动时变化 -->\r\n            <div class=\"my-num\" style=\"visibility: hidden\">{{ maxLine }}</div>\r\n            <div :class=\"{ 'my-active': nowCursorPos.line === line.num }\" :key=\"line.num\" :style=\"{ height: _lineHeight, 'line-height': _lineHeight }\" class=\"my-num\" v-for=\"line in renderHtmls\">\r\n                <span class=\"num\">{{ line.num }}</span>\r\n                <!-- 折叠图标 -->\r\n                <span\r\n                    :class=\"['iconfont', line.fold == 'open' ? 'my-fold-open icon-down1' : 'my-fold-close icon-right']\"\r\n                    @click=\"onToggleFold(line.num)\"\r\n                    class=\"my-fold my-center-center\"\r\n                    v-if=\"line.fold\"\r\n                ></span>\r\n            </div>\r\n        </div>\r\n        <div :style=\"{ 'box-shadow': _leftShadow }\" class=\"my-content-wrap\">\r\n            <!-- 可滚动区域 -->\r\n            <div @scroll=\"onScroll\" class=\"my-scroller my-scroll-overlay\" ref=\"scroller\">\r\n                <!-- 内如区域 -->\r\n                <div\r\n                    :style=\"{ minWidth: _contentMinWidth, height: contentHeight }\"\r\n                    @mousedown=\"onContentMdown\"\r\n                    @mousemove=\"onContentMmove\"\r\n                    @mouseleave=\"onContentMLeave\"\r\n                    @selectend.prevent=\"onSelectend\"\r\n                    class=\"my-content\"\r\n                    ref=\"content\"\r\n                >\r\n                    <div :style=\"{ top: _top }\" class=\"my-render\" ref=\"render\" v-if=\"active\">\r\n                        <div\r\n                            :class=\"{ 'my-active': _activeLine(line.num) }\"\r\n                            :data-line=\"line.num\"\r\n                            :id=\"'line_' + line.num\"\r\n                            :key=\"line.num\"\r\n                            :style=\"{ height: _lineHeight, 'line-height': _lineHeight }\"\r\n                            class=\"my-line\"\r\n                            v-for=\"line in renderHtmls\"\r\n                        >\r\n                            <!-- my-select-bg为选中状态 -->\r\n                            <div\r\n                                :class=\"[\r\n                                    line.active ? 'my-active' : '',\r\n                                    line.selected ? (line.isFsearch ? 'my-search-bg' : 'my-select-bg') : '',\r\n                                    line.selected && selectedFg ? 'my-select-fg' : '',\r\n                                    line.fold == 'close' ? 'fold-close' : '',\r\n                                ]\"\r\n                                :data-line=\"line.num\"\r\n                                class=\"my-code\"\r\n                                v-html=\"line.html\"\r\n                            ></div>\r\n                            <!-- 当前光标所处范围-begin -->\r\n                            <div\r\n                                class=\"my-bracket-match\"\r\n                                :style=\"{ left: bracketMatch.start.left + 'px', width: bracketMatch.start.width + 'px' }\"\r\n                                v-if=\"bracketMatch && line.num == bracketMatch.start.line\"\r\n                            ></div>\r\n                            <!-- 当前光标所处范围-end -->\r\n                            <div\r\n                                class=\"my-bracket-match\"\r\n                                :style=\"{ left: bracketMatch.end.left + 'px', width: bracketMatch.end.width + 'px' }\"\r\n                                v-if=\"bracketMatch && line.num == bracketMatch.end.line\"\r\n                            ></div>\r\n                            <!-- 选中时的首行背景 -->\r\n                            <div\r\n                                :class=\"{ 'my-active': range.active, 'my-search-bg': range.isFsearch }\"\r\n                                :style=\"{ left: range.left + 'px', width: range.width + 'px' }\"\r\n                                class=\"my-line-bg my-select-bg\"\r\n                                v-for=\"range in line.selectStarts\"\r\n                            ></div>\r\n                            <!-- 选中时的末行背景 -->\r\n                            <div\r\n                                :class=\"{ 'my-active': range.active, 'my-search-bg': range.isFsearch }\"\r\n                                :style=\"{ left: range.left + 'px', width: range.width + 'px' }\"\r\n                                class=\"my-line-bg my-select-bg\"\r\n                                v-for=\"range in line.selectEnds\"\r\n                            ></div>\r\n                            <span :style=\"{ left: _tabLineLeft(tab) }\" class=\"my-tab-line\" v-for=\"tab in line.tabNum\"></span>\r\n                            <!-- 模拟光标 -->\r\n                            <div :style=\"{ height: _lineHeight, left: left, visibility: _cursorVisible }\" class=\"my-cursor\" style=\"top: 0px\" v-for=\"left in line.cursorList\"></div>\r\n                        </div>\r\n                    </div>\r\n                    <!-- 输入框 -->\r\n                    <textarea\r\n                        :style=\"{ top: _textAreaPos.top, left: _textAreaPos.left }\"\r\n                        @blur=\"onBlur\"\r\n                        @compositionend=\"onCompositionend\"\r\n                        @compositionstart=\"onCompositionstart\"\r\n                        @copy.prevent=\"onCopy\"\r\n                        @cut.prevent=\"onCut\"\r\n                        @focus=\"onFocus\"\r\n                        @input=\"onInput\"\r\n                        @keydown=\"onKeyDown\"\r\n                        @paste.prevent=\"onPaste\"\r\n                        class=\"my-textarea\"\r\n                        ref=\"textarea\"\r\n                    ></textarea>\r\n                    <auto-tip :styles=\"autoTipStyle\" :tipList=\"autoTipList\" @change=\"onClickAuto\" ref=\"autoTip\" v-show=\"autoTipList && autoTipList.length\"></auto-tip>\r\n                </div>\r\n            </div>\r\n            <!-- 搜索框 -->\r\n            <search-dialog\r\n                :count=\"searchCount\"\r\n                :now=\"searchNow\"\r\n                @close=\"onCloseSearch\"\r\n                @next=\"onSearchNext()\"\r\n                @prev=\"onSearchPrev()\"\r\n                @replace=\"replace\"\r\n                @replaceAll=\"replaceAll\"\r\n                @search=\"onSearch\"\r\n                ref=\"searchDialog\"\r\n                v-show=\"searchVisible\"\r\n            ></search-dialog>\r\n        </div>\r\n        <!-- 右键菜单 -->\r\n        <Menu :checkable=\"false\" :menuList=\"menuList\" :styles=\"menuStyle\" @change=\"onClickMenu\" ref=\"menu\" v-show=\"menuVisible\"></Menu>\r\n        <tip :content=\"tipContent\" :styles=\"tipStyle\" ref=\"tip\" v-show=\"tipContent\"></tip>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Tokenizer from '@/module/tokenizer/index';\r\nimport Lint from '@/module/lint/index';\r\nimport Autocomplete from '@/module/autocomplete/index';\r\nimport Fold from '@/module/fold/index';\r\nimport Search from '@/module/search/index';\r\nimport Select from '@/module/select/index';\r\nimport Cursor from '@/module/cursor/index';\r\nimport History from '@/module/history/index';\r\nimport Context from '@/module/context/index';\r\nimport ShortCut from '@/module/shortcut/editor';\r\nimport SearchDialog from './Search';\r\nimport Menu from './Menu';\r\nimport AutoTip from './AutoTip';\r\nimport Tip from './Tip';\r\nimport Util from '@/common/util';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst contexts = Context.contexts;\r\n\r\nexport default {\r\n    name: 'Editor',\r\n    components: {\r\n        SearchDialog,\r\n        Menu,\r\n        AutoTip,\r\n        Tip,\r\n    },\r\n    props: {\r\n        id: {\r\n            type: Number,\r\n        },\r\n        active: {\r\n            type: Boolean,\r\n            default: false,\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            charObj: {\r\n                charWidth: 7.15,\r\n                fullAngleCharWidth: 15,\r\n                charHight: 19,\r\n            },\r\n            nowCursorPos: {\r\n                line: 1,\r\n                column: 0,\r\n            },\r\n            cursorVisible: true,\r\n            cursorFocus: true,\r\n            language: '',\r\n            theme: '',\r\n            tabSize: 4,\r\n            renderHtmls: [],\r\n            startLine: 1,\r\n            top: 0,\r\n            cursorLeft: 0,\r\n            scrollLeft: 0,\r\n            scrollTop: 0,\r\n            maxVisibleLines: 1,\r\n            maxLine: 1,\r\n            contentHeight: '100%',\r\n            scrollerArea: {},\r\n            bracketMatch: {\r\n                start: {},\r\n                end: {},\r\n            },\r\n            maxWidthObj: {\r\n                lineId: null,\r\n                text: '',\r\n                width: 0,\r\n            },\r\n            menuList: [\r\n                [\r\n                    {\r\n                        name: 'Cut',\r\n                        op: 'cut',\r\n                        shortcut: 'Ctrl+X',\r\n                    },\r\n                    {\r\n                        name: 'Copy',\r\n                        op: 'copy',\r\n                        shortcut: 'Ctrl+C',\r\n                    },\r\n                    {\r\n                        name: 'Paste',\r\n                        op: 'paste',\r\n                        shortcut: 'Ctrl+V',\r\n                    },\r\n                ],\r\n            ],\r\n            menuStyle: {\r\n                top: '0px',\r\n                left: '0px',\r\n                'min-width': '200px',\r\n            },\r\n            tipStyle: {\r\n                top: '0px',\r\n                left: '0px',\r\n            },\r\n            autoTipStyle: {\r\n                top: '50%',\r\n                left: '50%',\r\n            },\r\n            errorMap: {},\r\n            errors: [],\r\n            autoTipList: [],\r\n            tipContent: null,\r\n            menuVisible: false,\r\n            searchVisible: false,\r\n            selectedFg: false,\r\n            activeLineBg: true,\r\n            searchNow: 1,\r\n            searchCount: 0,\r\n        };\r\n    },\r\n    computed: {\r\n        _numTop() {\r\n            return this.top - this.charObj.charHight + 'px';\r\n        },\r\n        _leftShadow() {\r\n            return this.scrollLeft ? '17px 0 16px -16px rgba(0, 0, 0, 0.8) inset' : 'none';\r\n        },\r\n        _top() {\r\n            return (this.folder.getRelativeLine(this.startLine) - 1) * this.charObj.charHight + 'px';\r\n        },\r\n        _lineHeight() {\r\n            return this.charObj.charHight + 'px';\r\n        },\r\n        _cursorVisible() {\r\n            return this.cursorVisible && this.cursorFocus ? 'visible' : 'hidden';\r\n        },\r\n        _hScrollWidth() {\r\n            return this._contentMinWidth;\r\n        },\r\n        _contentMinWidth() {\r\n            let width = 0;\r\n            if (this.$refs.content) {\r\n                width = Util.getStrExactWidth(this.maxWidthObj.text, this.tabSize, this.$refs.content);\r\n                width += this.charObj.fullAngleCharWidth;\r\n            }\r\n            width = this.scrollerArea.width > width ? this.scrollerArea.width : width;\r\n            return width + 'px';\r\n        },\r\n        _textAreaPos() {\r\n            let left = this.cursorLeft;\r\n            let top = this.top;\r\n            if (this.nowCursorPos) {\r\n                let line = this.nowCursorPos.line < this.startLine ? this.startLine : this.nowCursorPos.line;\r\n                top = this.folder.getRelativeLine(line) * this.charObj.charHight;\r\n                if (top > this.scrollTop + this.scrollerArea.height - 2 * this.charObj.charHight) {\r\n                    top = this.scrollTop + this.scrollerArea.height - 2 * this.charObj.charHight;\r\n                }\r\n            }\r\n            return {\r\n                top: top + 'px',\r\n                left: left + 'px',\r\n            };\r\n        },\r\n        _tabLineLeft() {\r\n            return (tab) => {\r\n                return (tab - 1) * this.tabSize * this.charObj.charWidth + 'px';\r\n            };\r\n        },\r\n        _activeLine() {\r\n            return (num) => {\r\n                return this.nowCursorPos.line == num && this.activeLineBg;\r\n            };\r\n        },\r\n        space() {\r\n            return Util.space(this.tabSize);\r\n        },\r\n        myContext() {\r\n            return contexts[this.id];\r\n        },\r\n    },\r\n    watch: {\r\n        language: function (newVal) {\r\n            this.myContext.htmls.forEach((lineObj) => {\r\n                lineObj.tokens = null;\r\n                lineObj.folds = null;\r\n                lineObj.stateFold = null;\r\n                lineObj.states = null;\r\n                lineObj.html = '';\r\n            });\r\n            this.lint.initLanguage(newVal);\r\n            this.tokenizer.initLanguage(newVal);\r\n        },\r\n        theme: function () {\r\n            this.myContext.htmls.forEach((lineObj) => {\r\n                lineObj.html = '';\r\n            });\r\n            this.render();\r\n        },\r\n        tabSize: function (newVal) {\r\n            this.render();\r\n            this.maxWidthObj = { lineId: null, text: '', width: 0 };\r\n            this.myContext.setLineWidth(this.myContext.htmls);\r\n        },\r\n        maxLine: function (newVal) {\r\n            this.setContentHeight();\r\n        },\r\n        startLine: function (newVal) {\r\n            this.render();\r\n            this.tokenizer.tokenizeVisibleLins();\r\n        },\r\n        nowCursorPos: {\r\n            handler: function (newVal) {\r\n                EventBus.$emit('cursor-change', {\r\n                    line: newVal ? newVal.line : '?',\r\n                    column: newVal ? newVal.column : '?',\r\n                });\r\n                this.renderBracketMatch();\r\n            },\r\n            deep: true,\r\n        },\r\n        active: function (newVal) {\r\n            if (newVal) {\r\n                this.showEditor();\r\n            } else {\r\n                this.autocomplete.stop();\r\n            }\r\n        },\r\n    },\r\n    created() {\r\n        this.initData();\r\n        this.initEventBus();\r\n        this.initEvent();\r\n    },\r\n    mounted() {\r\n        this.selectedFg = !!globalData.colors['editor.selectionForeground'];\r\n        this.showEditor();\r\n        this.initResizeEvent();\r\n    },\r\n    destroyed() {\r\n        this.unbindEvent();\r\n    },\r\n    methods: {\r\n        // 初始化数据\r\n        initData() {\r\n            this.editorId = this.id;\r\n            contexts[this.editorId] = new Context(this);\r\n            this.maxWidthObj.lineId = this.myContext.htmls[0].lineId;\r\n            this.tokenizer = new Tokenizer(this, this.myContext);\r\n            this.lint = new Lint(this, this.myContext);\r\n            this.autocomplete = new Autocomplete(this, this.myContext);\r\n            this.folder = new Fold(this, this.myContext);\r\n            this.history = new History(this, this.myContext);\r\n            this.selecter = new Select(this, this.myContext);\r\n            this.searcher = new Search(this, this.myContext, this.selecter);\r\n            this.fSelecter = new Select(this, this.myContext);\r\n            this.fSearcher = new Search(this, this.myContext, this.fSelecter);\r\n            this.shortcut = new ShortCut(this, this.myContext);\r\n            this.cursor = new Cursor(this, this.myContext);\r\n            this.cursor.addCursorPos(this.nowCursorPos);\r\n            this.wordPattern = Util.getWordPattern(this.language);\r\n            this.wordPattern = new RegExp(`^(${this.wordPattern.source})`);\r\n        },\r\n        // 初始化文档事件\r\n        initEvent() {\r\n            this.initEvent.fn1 = (e) => {\r\n                this.active && this.onDocumentMmove(e);\r\n            };\r\n            this.initEvent.fn2 = (e) => {\r\n                this.active && this.onDocumentMouseUp(e);\r\n            };\r\n            $(document).on('mousemove', this.initEvent.fn1);\r\n            $(document).on('mouseup', this.initEvent.fn2);\r\n        },\r\n        initResizeEvent() {\r\n            const resizeObserver = new ResizeObserver((entries) => {\r\n                if (this.$refs.editor) {\r\n                    this.showEditor();\r\n                }\r\n            });\r\n            resizeObserver.observe(this.$refs.editor);\r\n        },\r\n        initEventBus() {\r\n            EventBus.$on(\r\n                'language-change',\r\n                (this.initEventBus.fn1 = (language) => {\r\n                    if (this.active) {\r\n                        this.language = language;\r\n                    }\r\n                    this._language = language;\r\n                })\r\n            );\r\n            EventBus.$on(\r\n                'tab-size-change',\r\n                (this.initEventBus.fn2 = (tabSize) => {\r\n                    if (this.active) {\r\n                        this.tabSize = tabSize;\r\n                    }\r\n                })\r\n            );\r\n            EventBus.$on(\r\n                'close-menu',\r\n                (this.initEventBus.fn3 = () => {\r\n                    this.menuVisible = false;\r\n                    this.autoTipList = null;\r\n                    this.autocomplete.stop();\r\n                })\r\n            );\r\n            EventBus.$on(\r\n                'theme-change',\r\n                (this.initEventBus.fn4 = (theme) => {\r\n                    this.selectedFg = !!globalData.colors['editor.selectionForeground'];\r\n                    if (this.active) {\r\n                        this.theme = theme;\r\n                    }\r\n                    this._theme = theme;\r\n                })\r\n            );\r\n        },\r\n        unbindEvent() {\r\n            $(document).unbind('mousemove', this.initEvent.fn1);\r\n            $(document).unbind('mouseup', this.initEvent.fn2);\r\n            EventBus.$off('language-change', this.initEventBus.fn1);\r\n            EventBus.$off('tab-size-change', this.initEventBus.fn2);\r\n            EventBus.$off('close-menu', this.initEventBus.fn3);\r\n            EventBus.$off('theme-change', this.initEventBus.fn4);\r\n        },\r\n        showEditor() {\r\n            if (this.active) {\r\n                this.$nextTick(() => {\r\n                    this.language = this._language || '';\r\n                    this.theme = this._theme || '';\r\n                    this.charObj = Util.getCharWidth(this.$refs.content);\r\n                    this.maxVisibleLines = Math.ceil(this.$refs.scroller.clientHeight / this.charObj.charHight) + 1;\r\n                    this.render();\r\n                    this.focus();\r\n                });\r\n            }\r\n        },\r\n        // 显示光标\r\n        showCursor() {\r\n            this.cursorFocus = true;\r\n            if (!this.cursor.multiCursorPos.size) {\r\n                this.showCursor.show = false;\r\n                return;\r\n            }\r\n            if (this.showCursor.show) {\r\n                return;\r\n            }\r\n            this.showCursor.show = true;\r\n            this.cursorVisible = true;\r\n            let _timer = () => {\r\n                clearTimeout(this.curserTimer);\r\n                this.curserTimer = setTimeout(() => {\r\n                    this.cursorVisible = !this.cursorVisible;\r\n                    _timer();\r\n                }, 500);\r\n            };\r\n            _timer();\r\n        },\r\n        // 隐藏光标\r\n        hideCursor() {\r\n            clearTimeout(this.curserTimer);\r\n            this.showCursor.show = false;\r\n            this.cursorFocus = false;\r\n        },\r\n        // 聚焦\r\n        focus() {\r\n            this.$refs.textarea.focus();\r\n            requestAnimationFrame(() => {\r\n                this.$refs.textarea.focus();\r\n            });\r\n        },\r\n        // 渲染\r\n        render(forceCursorView) {\r\n            let renderId = this.renderId + 1 || 1;\r\n            this.renderId = renderId;\r\n            this.$nextTick(() => {\r\n                if (this.renderId !== renderId) {\r\n                    return;\r\n                }\r\n                this.renderLine();\r\n                this.renderSelectedBg();\r\n                this.renderSelectionToken();\r\n                this.renderError();\r\n                this.renderCursor(forceCursorView);\r\n                this.$nextTick(() => {\r\n                    this.scrollerArea = {\r\n                        height: this.$refs.scroller.clientHeight,\r\n                        width: this.$refs.scroller.clientWidth,\r\n                    };\r\n                });\r\n            });\r\n        },\r\n        // 渲染代码\r\n        renderLine(lineId) {\r\n            let that = this;\r\n            // 只更新一行\r\n            if (lineId) {\r\n                if (this.myContext.renderedIdMap.has(lineId)) {\r\n                    let item = this.myContext.lineIdMap.get(lineId);\r\n                    let obj = this.myContext.renderedIdMap.get(lineId);\r\n                    // 高亮完成渲染某一行时，render可能还没完成，导致num没更新，此时跳过\r\n                    if (this.myContext.htmls[obj.num - 1] && this.myContext.htmls[obj.num - 1].lineId === lineId) {\r\n                        Object.assign(obj, _getObj(item, obj.num));\r\n                        this.renderCursor();\r\n                        this.renderSelectedBg();\r\n                        this.renderSelectionToken(obj.line);\r\n                        this.renderError(obj.line);\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            this.myContext.renderedIdMap.clear();\r\n            this.myContext.renderedLineMap.clear();\r\n            this.renderHtmls = [];\r\n            for (let i = 0, startLine = this.startLine; i < this.maxVisibleLines && startLine <= this.myContext.htmls.length; i++) {\r\n                let lineObj = this.myContext.htmls[startLine - 1];\r\n                let lineId = lineObj.lineId;\r\n                let obj = _getObj(lineObj, startLine);\r\n                let fold = this.folder.getFoldByLine(startLine);\r\n                this.renderHtmls.push(obj);\r\n                this.myContext.renderedIdMap.set(lineId, obj);\r\n                this.myContext.renderedLineMap.set(startLine, obj);\r\n                if (fold) {\r\n                    startLine = fold.end.line;\r\n                } else {\r\n                    startLine++;\r\n                }\r\n            }\r\n\r\n            function _getObj(item, line) {\r\n                let tabNum = _getTabNum(line);\r\n                let fold = '';\r\n                if (that.folder.getFoldByLine(line)) {\r\n                    //该行已经折叠\r\n                    fold = 'close';\r\n                } else if (that.folder.getRangeFold(line, true)) {\r\n                    //可折叠\r\n                    fold = 'open';\r\n                }\r\n                let html = item.html;\r\n                if (!html) {\r\n                    if (item.tokens && item.tokens.length) {\r\n                        item.tokens = that.tokenizer.splitLongToken(item.tokens);\r\n                        item.html = that.tokenizer.createHtml(item.tokens, item.text);\r\n                        html = item.html;\r\n                    } else {\r\n                        html = Util.htmlTrans(item.text);\r\n                    }\r\n                }\r\n                html = html.replace(/\\t/g, that.space);\r\n                return {\r\n                    html: html,\r\n                    num: line,\r\n                    tabNum: tabNum,\r\n                    selectStarts: [],\r\n                    selectEnds: [],\r\n                    selected: false,\r\n                    isFsearch: false,\r\n                    fold: fold,\r\n                    cursorList: [],\r\n                };\r\n            }\r\n\r\n            function _getTabNum(line) {\r\n                let text = that.myContext.htmls[line - 1].text;\r\n                let wReg = /[^\\s]/;\r\n                let tabNum = 0;\r\n                if (that.myContext.renderedLineMap.has(line)) {\r\n                    return that.myContext.renderedLineMap.get(line).tabNum;\r\n                }\r\n                if (wReg.exec(text)) {\r\n                    //该行有内容\r\n                    let spaceNum = /^\\s+/.exec(text);\r\n                    if (spaceNum) {\r\n                        tabNum = /\\t+/.exec(spaceNum[0]);\r\n                        tabNum = (tabNum && tabNum[0].length) || 0;\r\n                        tabNum = tabNum + Math.ceil((spaceNum[0].length - tabNum) / that.tabSize);\r\n                    }\r\n                } else {\r\n                    //空行\r\n                    let _line = line - 1;\r\n                    while (_line >= 1) {\r\n                        if (wReg.exec(that.myContext.htmls[_line - 1].text)) {\r\n                            tabNum = _getTabNum(_line);\r\n                            if (that.folder.getRangeFold(_line, true)) {\r\n                                tabNum++;\r\n                            }\r\n                            break;\r\n                        }\r\n                        _line--;\r\n                    }\r\n                }\r\n                return tabNum;\r\n            }\r\n        },\r\n        renderSelectedBg() {\r\n            let renderSelectedBgId = this.renderSelectedBgId + 1 || 1;\r\n            this.renderSelectedBgId = renderSelectedBgId;\r\n            this.activeLineBg = true;\r\n            this.$nextTick(() => {\r\n                if (this.renderSelectedBgId != renderSelectedBgId) {\r\n                    return;\r\n                }\r\n                if (!this.renderHtmls.length) {\r\n                    //删除内容后，窗口还没滚动到可视区域\r\n                    requestAnimationFrame(() => {\r\n                        this.renderSelectedBg();\r\n                    });\r\n                    return;\r\n                }\r\n                this.clearSelectionToken();\r\n                this.renderHtmls.forEach((item) => {\r\n                    item.selected = false;\r\n                    item.selectStarts = [];\r\n                    item.selectEnds = [];\r\n                });\r\n                this.fSelecter.ranges.forEach((range) => {\r\n                    this._renderSelectedBg(range, true);\r\n                });\r\n                this.selecter.ranges.forEach((range) => {\r\n                    let _range = this.fSelecter.getRangeByCursorPos(range.start);\r\n                    if (this.searchVisible) {\r\n                        // 优先渲染搜索框的选中范围\r\n                        if (!_range && range.active) {\r\n                            this._renderSelectedBg(range);\r\n                        }\r\n                    } else {\r\n                        this._renderSelectedBg(range);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        // 渲染选中背景\r\n        _renderSelectedBg(range, isFsearch) {\r\n            let firstLine = this.renderHtmls[0].num;\r\n            let lastLine = this.renderHtmls.peek().num;\r\n            let start = range.start;\r\n            let end = range.end;\r\n            let text = this.myContext.htmls[start.line - 1].text;\r\n            let endColumn = text.length;\r\n            start.left = this.getStrWidth(text, 0, start.column);\r\n            if (start.line == end.line) {\r\n                start.width = this.getStrWidth(text, start.column, end.column) || 10;\r\n            } else {\r\n                start.width = this.getStrWidth(text, start.column) || 10;\r\n                end.left = 0;\r\n                text = this.myContext.htmls[end.line - 1].text;\r\n                end.width = this.getStrWidth(text, 0, end.column) || 10;\r\n            }\r\n            firstLine = firstLine > start.line + 1 ? firstLine : start.line + 1;\r\n            lastLine = lastLine < end.line - 1 ? lastLine : end.line - 1;\r\n            for (let line = firstLine; line <= lastLine; line++) {\r\n                if (this.myContext.renderedLineMap.has(line)) {\r\n                    let lineObj = this.myContext.renderedLineMap.get(line);\r\n                    lineObj.selected = true;\r\n                    lineObj.isFsearch = isFsearch;\r\n                    lineObj.active = range.active;\r\n                }\r\n            }\r\n            if (this.myContext.renderedLineMap.has(start.line)) {\r\n                this.myContext.renderedLineMap.get(start.line).selectStarts.push({\r\n                    left: start.left,\r\n                    width: start.width,\r\n                    active: range.active,\r\n                    isFsearch: isFsearch,\r\n                });\r\n                if (end.line == start.line) {\r\n                    endColumn = end.column;\r\n                }\r\n                range.active && this._renderSelectionToken(start.line, start.column, endColumn);\r\n            }\r\n            if (end.line > start.line && this.myContext.renderedLineMap.has(end.line)) {\r\n                this.myContext.renderedLineMap.get(end.line).selectEnds.push({\r\n                    left: end.left,\r\n                    width: end.width,\r\n                    active: range.active,\r\n                    isFsearch: isFsearch,\r\n                });\r\n                range.active && this._renderSelectionToken(end.line, 0, end.column);\r\n            }\r\n            if (start.line === this.nowCursorPos.line || end.line === this.nowCursorPos.line) {\r\n                this.activeLineBg = false;\r\n            }\r\n        },\r\n        renderSelectionToken(line) {\r\n            // 只有设置了选中前景色才处理\r\n            if (!globalData.colors['editor.selectionForeground']) {\r\n                return;\r\n            }\r\n            let results = this.selecter.getRangeByLine(line);\r\n            results.forEach((range) => {\r\n                if (range.active) {\r\n                    let startColumn = range.start.column;\r\n                    let endColumn = range.end.column;\r\n                    if (range.start.line === line) {\r\n                        if (range.end.line > range.start.line) {\r\n                            endColumn = this.myContext.htmls[range.start.line - 1].text.length;\r\n                        }\r\n                    } else {\r\n                        startColumn = 0;\r\n                    }\r\n                    this._renderSelectionToken(line, startColumn, endColumn);\r\n                }\r\n            });\r\n        },\r\n        _renderSelectionToken(line, startColumn, endColumn) {\r\n            // 只有设置了选中前景色才处理\r\n            if (!globalData.colors['editor.selectionForeground']) {\r\n                return;\r\n            }\r\n            let lineObj = this.myContext.htmls[line - 1];\r\n            let tokens = lineObj.tokens;\r\n            let scopes = ['selected'];\r\n            let _tokens = [];\r\n            this.myContext.fgLines.push(line);\r\n            for (let i = 0; i < tokens.length; i++) {\r\n                let token = tokens[i];\r\n                if (token.startIndex <= startColumn && token.endIndex > startColumn) {\r\n                    if (token.startIndex < startColumn) {\r\n                        _tokens.push({\r\n                            startIndex: token.startIndex,\r\n                            endIndex: startColumn,\r\n                            scopes: token.scopes,\r\n                        });\r\n                    }\r\n                    if (token.endIndex > endColumn) {\r\n                        _tokens.push({\r\n                            startIndex: startColumn,\r\n                            endIndex: endColumn,\r\n                            scopes: scopes,\r\n                        });\r\n                        _tokens.push({\r\n                            startIndex: endColumn,\r\n                            endIndex: token.endIndex,\r\n                            scopes: token.scopes,\r\n                        });\r\n                        _tokens = _tokens.concat(tokens.slice(i + 1));\r\n                        break;\r\n                    } else {\r\n                        _tokens.push({\r\n                            startIndex: startColumn,\r\n                            endIndex: token.endIndex,\r\n                            scopes: scopes,\r\n                        });\r\n                    }\r\n                } else if (token.startIndex > startColumn && token.endIndex <= endColumn) {\r\n                    _tokens.push({\r\n                        startIndex: token.startIndex,\r\n                        endIndex: token.endIndex,\r\n                        scopes: scopes,\r\n                    });\r\n                } else if (token.startIndex < endColumn && token.endIndex > endColumn) {\r\n                    _tokens.push({\r\n                        startIndex: token.startIndex,\r\n                        endIndex: endColumn,\r\n                        scopes: scopes,\r\n                    });\r\n                    _tokens.push({\r\n                        startIndex: endColumn,\r\n                        endIndex: token.endIndex,\r\n                        scopes: token.scopes,\r\n                    });\r\n                    _tokens = _tokens.concat(tokens.slice(i + 1));\r\n                    break;\r\n                } else if (token.startIndex >= endColumn) {\r\n                    _tokens = _tokens.concat(tokens.slice(i));\r\n                    break;\r\n                } else {\r\n                    _tokens.push(token);\r\n                }\r\n            }\r\n            lineObj.html = this.tokenizer.createHtml(_tokens, lineObj.text);\r\n            this.myContext.renderedIdMap.get(lineObj.lineId).html = lineObj.html;\r\n            this.$nextTick(() => {\r\n                lineObj.fgTokens = _tokens;\r\n            });\r\n        },\r\n        renderBracketMatch() {\r\n            this.bracketMatch = this.folder.getBracketMatch(this.nowCursorPos);\r\n            if (this.bracketMatch) {\r\n                let lineObj = null;\r\n                let pos = null;\r\n\r\n                lineObj = this.myContext.htmls[this.bracketMatch.start.line - 1];\r\n                pos = this.bracketMatch.start;\r\n                this.bracketMatch.start.width = this.getStrWidth(lineObj.text, pos.startIndex, pos.endIndex);\r\n                this.bracketMatch.start.left = this.getStrWidth(lineObj.text, 0, pos.startIndex);\r\n\r\n                lineObj = this.myContext.htmls[this.bracketMatch.end.line - 1];\r\n                pos = this.bracketMatch.end;\r\n                this.bracketMatch.end.width = this.getStrWidth(lineObj.text, pos.startIndex, pos.endIndex);\r\n                this.bracketMatch.end.left = this.getStrWidth(lineObj.text, 0, pos.startIndex);\r\n            }\r\n        },\r\n        // 清除选中前景色\r\n        clearSelectionToken() {\r\n            this.myContext.fgLines.forEach((line) => {\r\n                this._clearSelectionToken(line);\r\n            });\r\n            this.myContext.fgLines.empty();\r\n        },\r\n        _clearSelectionToken(line) {\r\n            let lineObj = this.myContext.htmls[line - 1];\r\n            if (!lineObj || !lineObj.fgTokens) {\r\n                return;\r\n            }\r\n            lineObj.fgTokens = null;\r\n            if (this.myContext.renderedLineMap.has(line)) {\r\n                this.myContext.renderedIdMap.get(lineObj.lineId).html = this.tokenizer.createHtml(lineObj.tokens, lineObj.text);\r\n            }\r\n            lineObj.html = '';\r\n        },\r\n        // 渲染光标\r\n        renderCursor(forceCursorView) {\r\n            let that = this;\r\n            let renderCursorId = this.renderCursorId + 1 || 1;\r\n            this.renderCursorId = renderCursorId;\r\n            this.$nextTick(() => {\r\n                if (this.renderCursorId !== renderCursorId || !this.renderHtmls.length) {\r\n                    return;\r\n                }\r\n                this.renderHtmls.forEach((item) => {\r\n                    _setLine(item);\r\n                });\r\n                this.cursorVisible = true;\r\n            });\r\n\r\n            function _setLine(item) {\r\n                let cursorList = [];\r\n                that.cursor.getCursorsByLine(item.num).forEach((cursorPos) => {\r\n                    cursorList.push(_setCursorRealPos(cursorPos));\r\n                });\r\n                item.cursorList = cursorList;\r\n            }\r\n\r\n            function _setCursorRealPos(cursorPos) {\r\n                let left = 0;\r\n                if (cursorPos.del) {\r\n                    return;\r\n                }\r\n                left = that.getExactLeft(cursorPos);\r\n                // 强制滚动使光标处于可见区域\r\n                if (forceCursorView && cursorPos === that.nowCursorPos) {\r\n                    if (left > that.scrollerArea.width + that.scrollLeft - that.charObj.fullAngleCharWidth) {\r\n                        that.$refs.scroller.scrollLeft = left + that.charObj.fullAngleCharWidth - that.scrollerArea.width;\r\n                    } else if (left < that.scrollLeft) {\r\n                        that.$refs.scroller.scrollLeft = left - 1;\r\n                    }\r\n                }\r\n                if (cursorPos === that.nowCursorPos) {\r\n                    that.cursorLeft = left;\r\n                }\r\n                return left + 'px';\r\n            }\r\n        },\r\n        renderError(line) {\r\n            this.$nextTick(() => {\r\n                _renderError.call(this);\r\n            });\r\n\r\n            function _renderError() {\r\n                let $render = $(this.$refs.render);\r\n                let keyMap = {};\r\n                $render.find('span.my-token-error').remove();\r\n                this.errors.forEach((item) => {\r\n                    let key = item.line + ',' + item.originColumn;\r\n                    let lineObj = null;\r\n                    if ((line && item.line !== line) || keyMap[key]) {\r\n                        return;\r\n                    }\r\n                    keyMap[key] = true;\r\n                    lineObj = this.myContext.htmls[item.line - 1];\r\n                    if (!item.endLine) {\r\n                        item.endLine = item.line;\r\n                    }\r\n                    if (item.column >= lineObj.text.length) {\r\n                        item.column = lineObj.text.length - 1;\r\n                    }\r\n                    if (!item.endColumn) {\r\n                        let res = null;\r\n                        if ((res = this.wordPattern.exec(lineObj.text.slice(item.column)))) {\r\n                            item.endColumn = item.column + res[0].length;\r\n                        } else {\r\n                            item.endColumn = item.column + 1;\r\n                        }\r\n                    }\r\n                    if (item.endColumn > lineObj.text.length) {\r\n                        item.endColumn = lineObj.text.length;\r\n                    }\r\n                    if (item.line === item.endLine) {\r\n                        _renderColError.call(this, item.line, item.column, item.endColumn, key);\r\n                    } else {\r\n                        _renderColError.call(this, item.line, item.column, lineObj.text.length, key);\r\n                        _renderColError.call(this, item.endLine, 0, item.endColumn, key);\r\n                        for (let line = item.line + 1; line < item.endLine; line++) {\r\n                            _renderLineError.call(this, line, key);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            function _renderColError(line, column, endColumn, key) {\r\n                if (line < this.startLine || line > this.startLine + this.maxVisibleLines) {\r\n                    return;\r\n                }\r\n                let $render = $(this.$refs.render);\r\n                let lineObj = this.myContext.htmls[line - 1];\r\n                let token = this.getToken(line, column);\r\n                let left = 0;\r\n                if (token) {\r\n                    let $token = $render.find(`div.my-code[data-line=\"${line}\"]`).find(`span[data-column=\"${token.startIndex}\"]`);\r\n                    left = $token[0].offsetLeft + this.getStrWidth(lineObj.text, token.startIndex, column);\r\n                }\r\n                let width = this.getStrWidth(lineObj.text, column, endColumn) || this.charObj.charWidth;\r\n                let html = `<span class=\"my-token-error\" style=\"width:${width}px;left:${left}px\" data-key=\"${key}\"></span>`;\r\n                $render.find(`div.my-code[data-line=\"${line}\"]`).append(html);\r\n            }\r\n\r\n            function _renderLineError(line, key) {\r\n                if (line < this.startLine || line > this.startLine + this.maxVisibleLines) {\r\n                    return;\r\n                }\r\n                let $render = $(this.$refs.render);\r\n                let html = `<span class=\"my-token-error\" style=\"width:100%;left:0px\" data-key=\"${key}\"></span>`;\r\n                $render.find(`div.my-code[data-line=\"${line}\"]`).append(html);\r\n            }\r\n        },\r\n        // 折叠行\r\n        foldLine(line) {\r\n            let resultFold = this.folder.foldLine(line);\r\n            this.focus();\r\n            if (resultFold) {\r\n                this.cursor.multiCursorPos.forEach((cursorPos) => {\r\n                    if (cursorPos.line > line && cursorPos.line < resultFold.end.line) {\r\n                        let lineObj = this.myContext.htmls[line - 1];\r\n                        cursorPos.line = line;\r\n                        cursorPos.column = lineObj.text.length;\r\n                    }\r\n                });\r\n                this.setContentHeight();\r\n                this.render();\r\n            }\r\n        },\r\n        // 展开折叠行\r\n        unFold(line) {\r\n            this.focus();\r\n            if (this.folder.unFold(line)) {\r\n                this.setContentHeight();\r\n                this.render();\r\n            }\r\n        },\r\n        // ctrl+f打开搜索\r\n        openSearch(replaceMode) {\r\n            let searchDialog = this.$refs.searchDialog;\r\n            if (this.searchVisible && (this.fSelecter.activedRanges.size || !this.cursorFocus)) {\r\n                //无效操作\r\n                return;\r\n            }\r\n            if (this.cursorFocus) {\r\n                let searchConfig = this.fSearcher.getSearchConfig();\r\n                if (searchConfig) {\r\n                    //有效搜索\r\n                    searchDialog.initData({\r\n                        ignoreCase: searchConfig.ignoreCase,\r\n                        wholeWord: searchConfig.wholeWord,\r\n                        text: searchConfig.text,\r\n                    });\r\n                } else if (this.searchVisible) {\r\n                    //无效搜索\r\n                    return;\r\n                }\r\n            }\r\n            this.searchVisible = true;\r\n            this.fSearcher.clearSearch();\r\n            this.searchText({ config: searchDialog.getData() });\r\n            searchDialog.initData({ replaceVisible: !!replaceMode });\r\n            searchDialog.focus();\r\n        },\r\n        // 搜索完整单词\r\n        searchWord(direct) {\r\n            let resultObj = null;\r\n            this.searcher.search({ direct: direct });\r\n            if (this.searchVisible) {\r\n                if (this.fSelecter.activedRanges.size === 0) {\r\n                    let searchConfig = this.fSearcher.getSearchConfig();\r\n                    if (searchConfig) {\r\n                        this.fSearcher.clearSearch();\r\n                        resultObj = this.fSearcher.search({ direct: direct, increase: true });\r\n                    }\r\n                } else {\r\n                    resultObj = this.fSearcher.search({ direct: direct, increase: true });\r\n                }\r\n                if (resultObj) {\r\n                    this.searchNow = resultObj.now;\r\n                    this.searchCount = resultObj.count;\r\n                }\r\n            }\r\n        },\r\n        searchText(option) {\r\n            let resultObj = this.fSearcher.search(option);\r\n            if (resultObj) {\r\n                this.searchNow = resultObj.now;\r\n                this.searchCount = resultObj.count;\r\n            } else {\r\n                this.searchCount = 0;\r\n            }\r\n        },\r\n        replace(data) {\r\n            if (this.fSelecter.activedRanges.size) {\r\n                let range = this.fSearcher.getNowRange();\r\n                this.myContext.replace(data.text, [range]).then(() => {\r\n                    this.searchText();\r\n                });\r\n            } else {\r\n                this.searchText();\r\n            }\r\n        },\r\n        replaceAll(data) {\r\n            if (this.fSelecter.ranges.size) {\r\n                this.myContext.replace(data.text, this.fSelecter.ranges.toArray()).then(() => {\r\n                    this.fSearcher.clearSearch();\r\n                    this.searchCount = 0;\r\n                });\r\n            }\r\n        },\r\n        // 上一个提示\r\n        prevAutoTip() {\r\n            this.$refs.autoTip.prev();\r\n        },\r\n        // 下一个提示\r\n        nextAutoTip() {\r\n            this.$refs.autoTip.next();\r\n        },\r\n        selectAutoTip() {\r\n            let index = this.$refs.autoTip.getActiveIndex();\r\n            this.onClickAuto(this.autoTipList[index]);\r\n        },\r\n        setData(prop, value) {\r\n            if (typeof this[prop] === 'function') {\r\n                return;\r\n            }\r\n            this[prop] = value;\r\n        },\r\n        setNowCursorPos(nowCursorPos) {\r\n            this.nowCursorPos = nowCursorPos || { line: 1, column: 0 };\r\n            if (nowCursorPos) {\r\n                let setNowCursorPosId = this.setNowCursorPosId + 1 || 1;\r\n                this.setNowCursorPosId = setNowCursorPosId;\r\n                // 强制滚动使光标处于可见区域\r\n                this.$nextTick(() => {\r\n                    if (this.setNowCursorPosId != setNowCursorPosId) {\r\n                        return;\r\n                    }\r\n                    let height = this.folder.getRelativeLine(nowCursorPos.line) * this.charObj.charHight;\r\n                    if (height + this.charObj.charHight > this.scrollTop + this.scrollerArea.height) {\r\n                        requestAnimationFrame(() => {\r\n                            this.setStartLine(height + this.charObj.charHight - this.scrollerArea.height);\r\n                            this.$refs.scroller.scrollTop = height + this.charObj.charHight - this.scrollerArea.height;\r\n                        });\r\n                    } else if (nowCursorPos.line <= this.startLine) {\r\n                        requestAnimationFrame(() => {\r\n                            if (nowCursorPos.line <= this.startLine) {\r\n                                //此时this.startLine可能已经通过onScrll而改变\r\n                                this.startLine = nowCursorPos.line;\r\n                                this.$refs.scroller.scrollTop = (this.folder.getRelativeLine(nowCursorPos.line) - 1) * this.charObj.charHight;\r\n                            }\r\n                        });\r\n                    }\r\n                    this.renderCursor(true);\r\n                });\r\n            }\r\n        },\r\n        // 设置滚动区域真实高度\r\n        setContentHeight() {\r\n            let maxLine = this.myContext.htmls.length;\r\n            let contentHeight = 0;\r\n            maxLine = this.folder.getRelativeLine(maxLine);\r\n            contentHeight = maxLine * this.charObj.charHight;\r\n            if (this.scrollerArea) {\r\n                contentHeight += this.scrollerArea.height - this.charObj.charHight;\r\n            }\r\n            this.contentHeight = contentHeight + 'px';\r\n        },\r\n        setStartLine(scrollTop) {\r\n            let startLine = 1;\r\n            startLine = Math.floor(scrollTop / this.charObj.charHight);\r\n            startLine++;\r\n            this.startLine = this.folder.getRealLine(startLine);\r\n            this.top = -scrollTop % this.charObj.charHight;\r\n        },\r\n        setErrors(errors) {\r\n            this.errorMap = {};\r\n            this.errors = errors;\r\n            _formatError.call(this, this.errorMap, errors);\r\n            this.renderError();\r\n\r\n            function _formatError(errorMap, errors) {\r\n                let index = 0;\r\n                while (index < errors.length) {\r\n                    let line = errors[index].line;\r\n                    let arr = [];\r\n                    while (index < errors.length && errors[index].line === line) {\r\n                        let key = line + ',' + errors[index].column;\r\n                        errors[index].originColumn = errors[index].column;\r\n                        arr.push(errors[index].reason);\r\n                        if (errorMap[key]) {\r\n                            errorMap[key] += '<br>' + errors[index].reason;\r\n                        } else {\r\n                            errorMap[key] = errors[index].reason;\r\n                        }\r\n                        index++;\r\n                    }\r\n                    line = line || this.htmls.length;\r\n                    errorMap[line] = arr.join('<br>');\r\n                }\r\n            }\r\n        },\r\n        setAutoTip(results) {\r\n            clearTimeout(this.setAutoTip.hideTimer);\r\n            if (results && results.length) {\r\n                results.forEach((item) => {\r\n                    item.active = false;\r\n                });\r\n                this.autoTipList = results;\r\n                this.autoTipList[0].active = true;\r\n                this.$nextTick(() => {\r\n                    let width = this.$refs.autoTip.$el.clientWidth;\r\n                    let height = this.$refs.autoTip.$el.clientHeight;\r\n                    this.autoTipStyle.top = this.folder.getRelativeLine(this.nowCursorPos.line) * this.charObj.charHight;\r\n                    this.autoTipStyle.left = this.getExactLeft(this.nowCursorPos);\r\n                    if (this.autoTipStyle.top + height > Util.getNum(this._top) + this.$refs.scroller.clientHeight) {\r\n                        this.autoTipStyle.top -= height + this.charObj.charHight;\r\n                    }\r\n                    if (this.autoTipStyle.left + width > this.scrollLeft + this.scrollerArea.width) {\r\n                        this.autoTipStyle.left -= width;\r\n                    }\r\n                    this.autoTipStyle.top += 'px';\r\n                    this.autoTipStyle.left += 'px';\r\n                });\r\n            } else {\r\n                //内容改变时会触发setAutoTip(null)\r\n                this.setAutoTip.hideTimer = setTimeout(() => {\r\n                    this.autoTipList = null;\r\n                }, 60);\r\n            }\r\n        },\r\n        // 获取文本在浏览器中的宽度\r\n        getStrWidth(str, start, end) {\r\n            return Util.getStrWidth(str, this.charObj.charWidth, this.charObj.fullAngleCharWidth, this.tabSize, start, end);\r\n        },\r\n        // 获取行对应的文本在浏览器中的宽度\r\n        getStrWidthByLine(line, start, end) {\r\n            return this.getStrWidth(this.myContext.htmls[line - 1].text, start, end);\r\n        },\r\n        // 根据文本宽度计算当前列号\r\n        getColumnByWidth(text, offsetX) {\r\n            let left = 0,\r\n                right = text.length;\r\n            let mid, width, w1, w2;\r\n            while (left < right) {\r\n                mid = Math.floor((left + right) / 2);\r\n                width = this.getStrWidth(text, 0, mid);\r\n                w1 = text[mid - 1] && this.getStrWidth(text[mid - 1]) / 2;\r\n                w2 = (text[mid] && this.getStrWidth(text[mid]) / 2) || w1;\r\n                if ((width >= offsetX && width - offsetX < w1) || (offsetX >= width && offsetX - width < w2)) {\r\n                    left = mid;\r\n                    break;\r\n                } else if (width > offsetX) {\r\n                    right = mid;\r\n                } else {\r\n                    left = mid + 1;\r\n                }\r\n            }\r\n            return left;\r\n        },\r\n        // 根据鼠标事件对象获取行列坐标\r\n        getPosByEvent(e) {\r\n            let $target = $(e.target);\r\n            let line = ($target.attr('data-line') || $target.parent().attr('data-line')) - 0;\r\n            let column = $target.attr('data-column');\r\n            if (!line) {\r\n                if (e.target === this.$refs.content) {\r\n                    line = this.myContext.htmls.length;\r\n                } else {\r\n                    //移动到了区域外\r\n                    return null;\r\n                }\r\n            }\r\n            let lineObj = this.myContext.htmls[line - 1];\r\n            let tokens = lineObj.fgTokens || lineObj.tokens;\r\n            if (!column) {\r\n                column = lineObj.text.length;\r\n            } else {\r\n                column = column - 0;\r\n                for (let i = 0; i < tokens.length; i++) {\r\n                    let token = tokens[i];\r\n                    if (tokens[i].startIndex == column) {\r\n                        column += this.getColumnByWidth(lineObj.text.slice(token.startIndex, token.endIndex), e.offsetX);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return {\r\n                line: line,\r\n                column: column,\r\n            };\r\n        },\r\n        // 获取光标真实位置\r\n        getExactLeft(cursorPos) {\r\n            let lineObj = this.myContext.htmls[cursorPos.line - 1];\r\n            if (!lineObj.tokens || !lineObj.tokens.length) {\r\n                return 0;\r\n            }\r\n            let tokens = lineObj.fgTokens || lineObj.tokens;\r\n            let token = tokens[0];\r\n            for (let i = 1; i < tokens.length; i++) {\r\n                if (tokens[i].startIndex < cursorPos.column) {\r\n                    token = tokens[i];\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n            let $token = $('#line_' + cursorPos.line)\r\n                .children('.my-code')\r\n                .children('span[data-column=\"' + token.startIndex + '\"]');\r\n            if (!$token.length) {\r\n                return 0;\r\n            }\r\n            let text = lineObj.text.slice(token.startIndex, cursorPos.column);\r\n            return $token[0].offsetLeft + this.getStrWidth(text);\r\n        },\r\n        getToken(line, column) {\r\n            let lineObj = this.myContext.htmls[line - 1];\r\n            if (lineObj && lineObj.tokens) {\r\n                if (column > lineObj.tokens.peek().startIndex) {\r\n                    return lineObj.tokens.peek();\r\n                }\r\n                for (let i = 0; i < lineObj.tokens.length; i++) {\r\n                    if (lineObj.tokens[i].startIndex <= column && lineObj.tokens[i].endIndex > column) {\r\n                        return lineObj.tokens[i];\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        },\r\n        // 右键菜单事件\r\n        onContextmenu(e) {\r\n            let menuWidth = 0;\r\n            let menuHeight = 0;\r\n            let $editor = $(this.$refs.editor);\r\n            let offset = $editor.offset();\r\n            this.menuVisible = true;\r\n            this.$nextTick(() => {\r\n                menuWidth = this.$refs.menu.$el.clientWidth;\r\n                menuHeight = this.$refs.menu.$el.clientHeight;\r\n                if (menuHeight + e.clientY > offset.top + this.scrollerArea.height) {\r\n                    this.menuStyle.top = e.clientY - offset.top - menuHeight + 'px';\r\n                } else {\r\n                    this.menuStyle.top = e.clientY - offset.top + 'px';\r\n                }\r\n                if (menuWidth + e.clientX > offset.left + $editor[0].clientWidth) {\r\n                    this.menuStyle.left = e.clientX - offset.left - menuWidth + 'px';\r\n                } else {\r\n                    this.menuStyle.left = e.clientX - offset.left + 'px';\r\n                }\r\n                this.focus();\r\n            });\r\n        },\r\n        // 选中菜单\r\n        onClickMenu(menu) {\r\n            switch (menu.op) {\r\n                case 'cut':\r\n                case 'copy':\r\n                    Util.writeClipboard(this.myContext.getCopyText(menu.op === 'cut'));\r\n                    break;\r\n                case 'paste':\r\n                    this.$refs.textarea.focus();\r\n                    Util.readClipboard().then((text) => {\r\n                        this.myContext.insertContent(text);\r\n                    });\r\n                    break;\r\n            }\r\n            this.menuVisible = false;\r\n            this.focus();\r\n        },\r\n        // 选中自动提示\r\n        onClickAuto(item) {\r\n            this.myContext.replaceTip(item);\r\n            this.autoTipList = null;\r\n            this.focus();\r\n        },\r\n        // 折叠/展开\r\n        onToggleFold(line) {\r\n            if (this.folder.getFoldByLine(line)) {\r\n                this.unFold(line);\r\n            } else {\r\n                this.foldLine(line);\r\n            }\r\n        },\r\n        // 内容区域鼠标按下事件\r\n        onContentMdown(e) {\r\n            if (e.which == 3) {\r\n                //右键\r\n                return;\r\n            }\r\n            let pos = this.getPosByEvent(e);\r\n            let cursorPos = null;\r\n            this.mouseStartObj = {\r\n                time: Date.now(),\r\n                start: pos,\r\n            };\r\n            if ((e.ctrlKey && this.cursor.multiKeyCode === 'ctrl') || (e.altKey && this.cursor.multiKeyCode === 'alt')) {\r\n                // 多光标编辑\r\n                let range = this.selecter.getRangeWithCursorPos(pos);\r\n                //删除重叠选中区域\r\n                range && this.selecter.removeRange(range);\r\n                cursorPos = this.cursor.addCursorPos(pos);\r\n            } else {\r\n                cursorPos = this.cursor.setCursorPos(pos);\r\n                // 非多点编辑情况下，鼠标左键删除选中区域\r\n                if (e.which !== 3) {\r\n                    this.searcher.clearSearch();\r\n                }\r\n            }\r\n            if (e.which != 3) {\r\n                this.fSearcher.clearActive(); //光标更改后，搜索框取消当前活动区域\r\n                if (this.mouseUpTime && Date.now() - this.mouseUpTime < 200) {\r\n                    //双击选中单词\r\n                    this.mouseStartObj.doubleClick = true;\r\n                    this.searchWord();\r\n                }\r\n            }\r\n            this.mouseStartObj.cursorPos = cursorPos;\r\n            // 删除非活动区域的选中区域\r\n            this.searcher.clearSearch(true);\r\n            this.focus();\r\n        },\r\n        onErrorMousemove(e, line) {\r\n            let $errors = $(`div.my-code[data-line=${line}]`).children('span.my-token-error');\r\n            let left = e.clientX - $(this.$refs.render).offset().left;\r\n            for (let i = 0; i < $errors.length; i++) {\r\n                let $error = $errors.eq(i);\r\n                let width = $error.width();\r\n                let _left = $error[0].offsetLeft;\r\n                if (left >= _left && left <= _left + width) {\r\n                    _showTip.call(this, e, $error.attr('data-key'));\r\n                    break;\r\n                }\r\n            }\r\n\r\n            function _showTip(e, key) {\r\n                let $editor = $(this.$refs.editor);\r\n                let $tip = $(this.$refs.tip.$el);\r\n                let offset = $editor.offset();\r\n                let top = e.clientY - offset.top;\r\n                let left = e.clientX - offset.left;\r\n                this.tipContent = this.errorMap[key];\r\n                this.$nextTick(() => {\r\n                    if (top + $tip[0].clientHeight > this.scrollerArea.height) {\r\n                        top = this.scrollerArea.height - $tip[0].clientHeight;\r\n                    }\r\n                    this.tipStyle = {\r\n                        left: left + 10 + 'px',\r\n                        top: top + 10 + 'px',\r\n                    };\r\n                });\r\n            }\r\n        },\r\n        onContentMmove(e) {\r\n            if (this.mouseStartObj && Date.now() - this.mouseStartObj.time > 100) {\r\n                let end = this.getPosByEvent(e);\r\n                if (end && Util.comparePos(end, this.mouseStartObj.cursorPos)) {\r\n                    let range = this.selecter.getRangeWithCursorPos(end);\r\n                    //删除重叠选中区域\r\n                    range && this.selecter.removeRange(range);\r\n                    this.cursor.removeCursor(this.mouseStartObj.cursorPos);\r\n                    this.mouseStartObj.cursorPos = this.cursor.addCursorPos({\r\n                        line: end.line,\r\n                        column: end.column,\r\n                    });\r\n                    if (this.mouseStartObj.preRange) {\r\n                        this.selecter.updateRange(this.mouseStartObj.preRange, {\r\n                            start: this.mouseStartObj.start,\r\n                            end: end,\r\n                        });\r\n                    } else {\r\n                        this.mouseStartObj.preRange = this.selecter.addRange({\r\n                            start: this.mouseStartObj.start,\r\n                            end: end,\r\n                        });\r\n                    }\r\n                    // 删除区域范围内的光标\r\n                    this.cursor.removeCursorInRange(this.mouseStartObj.preRange);\r\n                }\r\n            }\r\n            _checkErrorOver.call(this, e);\r\n\r\n            function _checkErrorOver(e) {\r\n                let $target = $(e.target);\r\n                let line = $target.parent().attr('data-line');\r\n                this.tipContent = '';\r\n                line && this.onErrorMousemove(e, line);\r\n            }\r\n        },\r\n        onContentMLeave() {\r\n            this.tipContent = '';\r\n        },\r\n        // 鼠标移动事件\r\n        onDocumentMmove(e) {\r\n            let that = this;\r\n            let offset = $(this.$refs.scroller).offset();\r\n            if (this.mouseStartObj && Date.now() - this.mouseStartObj.time > 100) {\r\n                let line = Math.ceil((this.scrollTop + e.clientY - offset.top) / this.charObj.charHight);\r\n                line = line < 1 ? 1 : line;\r\n                line = line > this.maxLine ? this.maxLine : line;\r\n                cancelAnimationFrame(this.selectMoveTimer);\r\n                if (e.clientY > offset.top + this.scrollerArea.height) {\r\n                    //鼠标超出底部区域\r\n                    _move('down', e.clientY - offset.top - this.scrollerArea.height);\r\n                } else if (e.clientY < offset.top) {\r\n                    //鼠标超出顶部区域\r\n                    _move('up', offset.top - e.clientY);\r\n                } else if (e.clientX < offset.left) {\r\n                    //鼠标超出左边区域\r\n                    _move('left', offset.left - e.clientX, line);\r\n                } else if (e.clientX > offset.left + this.scrollerArea.width) {\r\n                    //鼠标超出右边区域\r\n                    _move('right', e.clientX - offset.left - this.scrollerArea.width, line);\r\n                }\r\n            }\r\n            function _move(autoDirect, speed, line) {\r\n                let originLine = line || that.folder.getRelativeLine(that.nowCursorPos.line);\r\n                let originColumn = that.nowCursorPos.column;\r\n                let count = 0; // 累计滚动距离\r\n                _run(autoDirect, speed);\r\n\r\n                function _run(autoDirect, speed) {\r\n                    let line = originLine;\r\n                    let column = originColumn;\r\n                    switch (autoDirect) {\r\n                        case 'up':\r\n                            count += speed;\r\n                            line = Math.floor(count / that.charObj.charHight);\r\n                            line = originLine - line;\r\n                            column = 0;\r\n                            break;\r\n                        case 'down':\r\n                            count += speed;\r\n                            line = Math.floor(count / that.charObj.charHight);\r\n                            line = originLine + line;\r\n                            break;\r\n                        case 'left':\r\n                            count += speed;\r\n                            column = Math.floor(count / that.charObj.charWidth);\r\n                            column = originColumn - column;\r\n                            break;\r\n                        case 'right':\r\n                            count += speed;\r\n                            column = Math.floor(count / that.charObj.charWidth);\r\n                            column = originColumn + column;\r\n                            break;\r\n                    }\r\n                    line = that.folder.getRealLine(line);\r\n                    line = line < 1 ? 1 : line > that.maxLine ? that.maxLine : line;\r\n                    if (autoDirect === 'down') {\r\n                        column = that.myContext.htmls[line - 1].text.length;\r\n                    } else {\r\n                        column = column < 0 ? 0 : column > that.myContext.htmls[line - 1].text.length ? that.myContext.htmls[line - 1].text.length : column;\r\n                    }\r\n                    that.mouseStartObj.cursorPos = that.cursor.setCursorPos({\r\n                        line: line,\r\n                        column: column,\r\n                    });\r\n                    that.mouseStartObj.preRange = that.selecter.setRange(that.mouseStartObj.start, {\r\n                        line: line,\r\n                        column: column,\r\n                    });\r\n                    that.selectMoveTimer = requestAnimationFrame(() => {\r\n                        _run(autoDirect, speed);\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        // 鼠标抬起事件\r\n        onDocumentMouseUp(e) {\r\n            // 停止滚动选中\r\n            cancelAnimationFrame(this.selectMoveTimer);\r\n            this.mouseStartObj = null;\r\n            this.mouseUpTime = Date.now();\r\n            this.$refs.searchDialog && this.$refs.searchDialog.directBlur();\r\n        },\r\n        // 左右滚动事件\r\n        onScroll(e) {\r\n            this.setStartLine(e.target.scrollTop);\r\n            this.scrollTop = e.target.scrollTop;\r\n            this.scrollLeft = e.target.scrollLeft;\r\n            this.$refs.scroller.scrollLeft = this.scrollLeft;\r\n        },\r\n        // 滚动滚轮\r\n        onWheel(e) {\r\n            this.$refs.scroller.scrollTop = this.scrollTop + e.deltaY;\r\n            this.$refs.scroller.scrollLeft = this.scrollLeft + e.deltaX;\r\n        },\r\n        // 中文输入开始\r\n        onCompositionstart() {\r\n            clearTimeout(this.compositionendTimer);\r\n            this.compositionstart = true;\r\n        },\r\n        // 中文输入结束\r\n        onCompositionend() {\r\n            if (this.compositionstart) {\r\n                let text = this.$refs.textarea.value || '';\r\n                if (text) {\r\n                    this.myContext.insertContent(text);\r\n                    this.autocomplete.search();\r\n                    this.$refs.textarea.value = '';\r\n                }\r\n            }\r\n            //避免有些浏览器compositionend在input事件之前触发的bug\r\n            this.compositionendTimer = setTimeout(() => {\r\n                this.compositionstart = false;\r\n            }, 100);\r\n        },\r\n        // 输入事件\r\n        onInput() {\r\n            if (!this.compositionstart) {\r\n                let text = this.$refs.textarea.value || '';\r\n                if (text) {\r\n                    this.myContext.insertContent(text);\r\n                    this.autocomplete.search();\r\n                    this.$refs.textarea.value = '';\r\n                }\r\n            }\r\n        },\r\n        // 复制事件\r\n        onCopy(e) {\r\n            let mime = window.clipboardData ? 'Text' : 'text/plain';\r\n            let clipboardData = e.clipboardData || window.clipboardData;\r\n            clipboardData.setData(mime, this.myContext.getCopyText());\r\n        },\r\n        onCut(e) {\r\n            let mime = window.clipboardData ? 'Text' : 'text/plain';\r\n            let clipboardData = e.clipboardData || window.clipboardData;\r\n            clipboardData.setData(mime, this.myContext.getCopyText(true));\r\n        },\r\n        // 粘贴事件\r\n        onPaste(e) {\r\n            let mime = window.clipboardData ? 'Text' : 'text/plain';\r\n            let clipboardData = e.clipboardData || window.clipboardData;\r\n            let copyText = '';\r\n            copyText = clipboardData.getData(mime);\r\n            this.myContext.insertContent(copyText);\r\n        },\r\n        // 获得焦点\r\n        onFocus() {\r\n            this.showCursor();\r\n        },\r\n        // 失去焦点\r\n        onBlur() {\r\n            this.hideCursor();\r\n        },\r\n        // 键盘按下事件\r\n        onKeyDown(e) {\r\n            this.shortcut.onKeyDown(e);\r\n        },\r\n        // 搜索框首次搜索\r\n        onSearch(config) {\r\n            this.fSearcher.clearSearch();\r\n            this.searchText({ config: config });\r\n        },\r\n        onSearchNext() {\r\n            this.searchText({ direct: 'next' });\r\n        },\r\n        onSearchPrev() {\r\n            this.searchText({ direct: 'up' });\r\n        },\r\n        onCloseSearch() {\r\n            this.focus();\r\n            if (this.fSelecter.activedRanges.size) {\r\n                this.searcher.clone(this.fSearcher.getCacheData());\r\n            }\r\n            this.fSearcher.clearSearch();\r\n            this.searchVisible = false;\r\n        },\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=784caa1a&\"\nimport script from \"./Editor.vue?vue&type=script&lang=js&\"\nexport * from \"./Editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-title-bar my-width-100\",style:({ height: _vm.height + 'px' }),on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('div',{staticClass:\"my-height-100 my-center-between\"},[_c('div',{staticClass:\"menu-bar\"},[_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('fileMenuVisible')}}},[_c('span',[_vm._v(\"File\")]),(_vm.fileMenuVisible)?_c('Menu',{attrs:{\"hoverCheck\":true,\"menuList\":_vm.fileMenuList,\"styles\":{ left: 0, top: _vm._top }},on:{\"change\":_vm.onFileMenuChange}}):_vm._e()],1),_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('editMenuVisible')}}},[_c('span',[_vm._v(\"Edit\")]),(_vm.editMenuVisible)?_c('Menu',{attrs:{\"hoverCheck\":true,\"menuList\":_vm.editMenuList,\"styles\":{ left: 0, top: _vm._top }},on:{\"change\":_vm.onEditMenuChange}}):_vm._e()],1),_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('selectionMenuVisible')}}},[_c('span',[_vm._v(\"Selection\")]),(_vm.selectionMenuVisible)?_c('Menu',{attrs:{\"hoverCheck\":true,\"menuList\":_vm.selectionMenuList,\"styles\":{ left: 0, top: _vm._top }},on:{\"change\":_vm.onSelectionMenuChange}}):_vm._e()],1),_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('preferenceMenuVisible')}}},[_c('span',[_vm._v(\"Preference\")]),(_vm.preferenceMenuVisible)?_c('Menu',{attrs:{\"hoverCheck\":true,\"menuList\":_vm.preferenceMenuList,\"styles\":{ left: 0, top: _vm._top }},on:{\"change\":_vm.onPreferenceMenuChange}}):_vm._e()],1)]),(_vm.mode === 'app')?_c('div',{staticClass:\"bar-right\"},[_c('div',{staticClass:\"bar-item my-hover\",staticStyle:{\"width\":\"35px\",\"height\":\"35px\"},on:{\"click\":_vm.onMinimize}},[_c('span',{staticClass:\"iconfont icon-zuixiaohua\"})]),(_vm.maximize)?_c('div',{staticClass:\"bar-item my-hover\",staticStyle:{\"width\":\"35px\",\"height\":\"35px\"},on:{\"click\":_vm.onUnmaximize}},[_c('span',{staticClass:\"iconfont icon-huanyuan\"})]):_c('div',{staticClass:\"bar-item my-hover\",staticStyle:{\"width\":\"35px\",\"height\":\"35px\"},on:{\"click\":_vm.onMaximize}},[_c('span',{staticClass:\"iconfont icon-zuidahua\"})]),_c('div',{staticClass:\"bar-item my-hover-danger\",staticStyle:{\"width\":\"35px\",\"height\":\"35px\"},on:{\"click\":_vm.onClose}},[_c('span',{staticClass:\"iconfont icon-close\",staticStyle:{\"font-size\":\"18px\"}})])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 16:13:15\r\n * @Description: \r\n */\r\nimport Util from '@/common/util';\r\n\r\nexport default class {\r\n    constructor(titleBar) {\r\n        this.initProperties(titleBar);\r\n    }\r\n    initProperties(titleBar) {\r\n        Util.defineProperties(this, titleBar, [\r\n            'openFile',\r\n            'openFolder'\r\n        ]);\r\n    }\r\n    onKeyDown(e) {\r\n        if (e.ctrlKey) {\r\n            if (this.pressK) {\r\n                this.pressK = false;\r\n                switch (e.keyCode) {\r\n                    case 79: //Ctrl+O\r\n                        e.preventDefault();\r\n                        this.openFolder();\r\n                        break;\r\n                }\r\n            } else {\r\n                switch (e.keyCode) {\r\n                    case 75: //Ctrl+K\r\n                        e.preventDefault();\r\n                        this.pressK = true;\r\n                        break;\r\n                    case 78: //Ctrl+N\r\n                        e.preventDefault();\r\n                        this.openFile();\r\n                        break;\r\n                    case 79: //Ctrl+O\r\n                        e.preventDefault();\r\n                        this.openFile(null, true);\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-09 21:38:38\r\n * @Description: \r\n-->\r\n<template>\r\n    <div :style=\"{ height: height + 'px' }\" @contextmenu.stop.prevent class=\"my-title-bar my-width-100\">\r\n        <div class=\"my-height-100 my-center-between\">\r\n            <div class=\"menu-bar\">\r\n                <div @mousedown.stop=\"showMemu('fileMenuVisible')\" class=\"bar-item my-hover\">\r\n                    <span>File</span>\r\n                    <Menu\r\n                        :hoverCheck=\"true\"\r\n                        :menuList=\"fileMenuList\"\r\n                        :styles=\"{ left: 0, top: _top }\"\r\n                        @change=\"onFileMenuChange\"\r\n                        v-if=\"fileMenuVisible\"\r\n                    ></Menu>\r\n                </div>\r\n                <div @mousedown.stop=\"showMemu('editMenuVisible')\" class=\"bar-item my-hover\">\r\n                    <span>Edit</span>\r\n                    <Menu\r\n                        :hoverCheck=\"true\"\r\n                        :menuList=\"editMenuList\"\r\n                        :styles=\"{ left: 0, top: _top }\"\r\n                        @change=\"onEditMenuChange\"\r\n                        v-if=\"editMenuVisible\"\r\n                    ></Menu>\r\n                </div>\r\n                <div @mousedown.stop=\"showMemu('selectionMenuVisible')\" class=\"bar-item my-hover\">\r\n                    <span>Selection</span>\r\n                    <Menu\r\n                        :hoverCheck=\"true\"\r\n                        :menuList=\"selectionMenuList\"\r\n                        :styles=\"{ left: 0, top: _top }\"\r\n                        @change=\"onSelectionMenuChange\"\r\n                        v-if=\"selectionMenuVisible\"\r\n                    ></Menu>\r\n                </div>\r\n                <div @mousedown.stop=\"showMemu('preferenceMenuVisible')\" class=\"bar-item my-hover\">\r\n                    <span>Preference</span>\r\n                    <Menu\r\n                        :hoverCheck=\"true\"\r\n                        :menuList=\"preferenceMenuList\"\r\n                        :styles=\"{ left: 0, top: _top }\"\r\n                        @change=\"onPreferenceMenuChange\"\r\n                        v-if=\"preferenceMenuVisible\"\r\n                    ></Menu>\r\n                </div>\r\n            </div>\r\n            <div class=\"bar-right\" v-if=\"mode === 'app'\">\r\n                <!-- 最小化 -->\r\n                <div @click=\"onMinimize\" class=\"bar-item my-hover\" style=\"width: 35px; height: 35px\">\r\n                    <span class=\"iconfont icon-zuixiaohua\"></span>\r\n                </div>\r\n                <!-- 还原最大化 -->\r\n                <div @click=\"onUnmaximize\" class=\"bar-item my-hover\" style=\"width: 35px; height: 35px\" v-if=\"maximize\">\r\n                    <span class=\"iconfont icon-huanyuan\"></span>\r\n                </div>\r\n                <!-- 最大化 -->\r\n                <div @click=\"onMaximize\" class=\"bar-item my-hover\" style=\"width: 35px; height: 35px\" v-else>\r\n                    <span class=\"iconfont icon-zuidahua\"></span>\r\n                </div>\r\n                <!-- 关闭 -->\r\n                <div @click=\"onClose\" class=\"bar-item my-hover-danger\" style=\"width: 35px; height: 35px\">\r\n                    <span class=\"iconfont icon-close\" style=\"font-size: 18px\"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Util from '@/common/util';\r\nimport Menu from './Menu';\r\nimport ShortCut from '@/module/shortcut/menu-bar';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\nconst require = window.require || window.parent.require || function () {};\r\nconst remote = require('@electron/remote');\r\nconst currentWindow = remote && remote.getCurrentWindow();\r\n\r\nexport default {\r\n    name: 'TitleBar',\r\n    props: {\r\n        height: {\r\n            type: Number,\r\n            default: 25,\r\n        },\r\n    },\r\n    components: {\r\n        Menu,\r\n    },\r\n    data() {\r\n        return {\r\n            fileMenuVisible: false,\r\n            editMenuVisible: false,\r\n            selectionMenuVisible: false,\r\n            preferenceMenuVisible: false,\r\n            maximize: false,\r\n            mode: remote ? 'app' : 'web',\r\n            fileMenuList: [\r\n                [\r\n                    {\r\n                        name: 'New File',\r\n                        op: 'newFile',\r\n                        shortcut: 'Ctrl+N',\r\n                    },\r\n                ],\r\n            ],\r\n            editMenuList: [\r\n                [\r\n                    {\r\n                        name: 'Undo',\r\n                        op: 'undo',\r\n                        shortcut: 'Ctrl+Z',\r\n                    },\r\n                    {\r\n                        name: 'Redo',\r\n                        op: 'redo',\r\n                        shortcut: 'Ctrl+Y',\r\n                    },\r\n                ],\r\n                [\r\n                    {\r\n                        name: 'Cut',\r\n                        op: 'cut',\r\n                        shortcut: 'Ctrl+X',\r\n                    },\r\n                    {\r\n                        name: 'Copy',\r\n                        op: 'copy',\r\n                        shortcut: 'Ctrl+C',\r\n                    },\r\n                    {\r\n                        name: 'Paste',\r\n                        op: 'paste',\r\n                        shortcut: 'Ctrl+V',\r\n                    },\r\n                ],\r\n                [\r\n                    {\r\n                        name: 'Delete Line',\r\n                        op: 'deleteLine',\r\n                        shortcut: 'Ctrl+Shift+K',\r\n                    },\r\n                ],\r\n                [\r\n                    {\r\n                        name: 'Find',\r\n                        op: 'find',\r\n                        shortcut: 'Ctrl+F',\r\n                    },\r\n                    {\r\n                        name: 'Replace',\r\n                        op: 'replace',\r\n                        shortcut: 'Ctrl+H',\r\n                    },\r\n                ],\r\n            ],\r\n            selectionMenuList: [\r\n                [\r\n                    {\r\n                        name: 'Select All',\r\n                        op: 'selectAll',\r\n                        shortcut: 'Ctrl+A',\r\n                    },\r\n                ],\r\n                [\r\n                    {\r\n                        name: 'Copy Line Up',\r\n                        op: 'copyLineUp',\r\n                        shortcut: 'Ctrl+Shift+D',\r\n                    },\r\n                    {\r\n                        name: 'Copy Line Down',\r\n                        op: 'copyLineDown',\r\n                        shortcut: 'Alt+Shift+Down',\r\n                    },\r\n                    {\r\n                        name: 'Move Line Up',\r\n                        op: 'moveLineUp',\r\n                        shortcut: 'Ctrl+Shift+Up',\r\n                    },\r\n                    {\r\n                        name: 'Move Line Down',\r\n                        op: 'moveLineDown',\r\n                        shortcut: 'Ctrl+Shift+Down',\r\n                    },\r\n                ],\r\n                [\r\n                    {\r\n                        name: 'Add Cursor Above',\r\n                        op: 'addCursorAbove',\r\n                        shortcut: 'Ctrl+Alt+Up',\r\n                    },\r\n                    {\r\n                        name: 'Add Cursor Below',\r\n                        op: 'addCursorBelow',\r\n                        shortcut: 'Ctrl+Alt+Down',\r\n                    },\r\n                    {\r\n                        name: 'Add Cursor to Line Ends',\r\n                        op: 'addCursorLineEnds',\r\n                        shortcut: 'Ctrl+Shift+L',\r\n                    },\r\n                    {\r\n                        name: 'Add Next Occurence',\r\n                        op: 'addNextOccurence',\r\n                        shortcut: 'Ctrl+D',\r\n                    },\r\n                    {\r\n                        name: 'Add Previous Occurence',\r\n                        op: 'addPrevOccurence',\r\n                        shortcut: 'Shift+D',\r\n                    },\r\n                    {\r\n                        name: 'Select All Occurence',\r\n                        op: 'selectAllOccurence',\r\n                    },\r\n                ],\r\n                [\r\n                    {\r\n                        name: 'Switch Alt+Click to Multi-Cursor',\r\n                        op: 'switchMultiKeyCode',\r\n                        keyCode: 'ctrl',\r\n                    },\r\n                ],\r\n            ],\r\n            preferenceMenuList: [\r\n                [\r\n                    {\r\n                        name: 'Color Theme',\r\n                        op: 'changeTheme',\r\n                    },\r\n                    {\r\n                        name: 'Icon Theme',\r\n                        op: 'changeIconTheme',\r\n                    },\r\n                ],\r\n            ],\r\n        };\r\n    },\r\n    computed: {\r\n        _top() {\r\n            return this.height + 2 + 'px';\r\n        },\r\n        editor() {\r\n            return this.getNowEditor();\r\n        },\r\n        context() {\r\n            return this.getNowContext();\r\n        },\r\n    },\r\n    inject: ['getNowEditor', 'getNowContext', 'openFile', 'openFolder'],\r\n    created() {\r\n        if (this.mode === 'app') {\r\n            this.fileMenuList.push([\r\n                {\r\n                    name: 'Open File',\r\n                    op: 'openFile',\r\n                    shortcut: 'Ctrl+O',\r\n                },\r\n                {\r\n                    name: 'Open Folder',\r\n                    op: 'openFolder',\r\n                    shortcut: 'Ctrl+K Ctrl+O',\r\n                },\r\n            ]);\r\n        }\r\n        this.shortcut = new ShortCut(this);\r\n        this.initEventBus();\r\n        $(window).on('keydown', (e) => {\r\n            this.shortcut.onKeyDown(e);\r\n        });\r\n    },\r\n    mounted() {\r\n        if (this.mode === 'app') {\r\n            this.maximize = currentWindow.isMaximized();\r\n        }\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on('close-menu', () => {\r\n                this.fileMenuVisible = false;\r\n                this.editMenuVisible = false;\r\n                this.selectionMenuVisible = false;\r\n                this.preferenceMenuVisible = false;\r\n            });\r\n        },\r\n        showMemu(prop) {\r\n            EventBus.$emit('close-menu');\r\n            this[prop] = true;\r\n        },\r\n        // 最小化\r\n        onMinimize() {\r\n            currentWindow.minimize();\r\n        },\r\n        // 最大化\r\n        onMaximize() {\r\n            currentWindow.maximize();\r\n            this.maximize = true;\r\n        },\r\n        // 最大化\r\n        onUnmaximize() {\r\n            currentWindow.unmaximize();\r\n            this.maximize = false;\r\n        },\r\n        // 关闭窗口\r\n        onClose() {\r\n            currentWindow.close();\r\n        },\r\n        onFileMenuChange(item) {\r\n            switch (item.op) {\r\n                case 'newFile':\r\n                    this.openFile();\r\n                    break;\r\n                case 'openFile':\r\n                    this.openFile(null, true);\r\n                    break;\r\n                case 'openFolder':\r\n                    this.openFolder();\r\n                    break;\r\n            }\r\n            this.fileMenuVisible = false;\r\n        },\r\n        onEditMenuChange(item) {\r\n            if (!this.editor) {\r\n                this.editMenuVisible = false;\r\n                return;\r\n            }\r\n            switch (item.op) {\r\n                case 'undo':\r\n                    this.editor.history.undo();\r\n                    break;\r\n                case 'redo':\r\n                    this.editor.history.redo();\r\n                    break;\r\n                case 'cut':\r\n                    Util.writeClipboard(this.context.getCopyText(true));\r\n                    break;\r\n                case 'copy':\r\n                    Util.writeClipboard(this.context.getCopyText());\r\n                    break;\r\n                case 'paste':\r\n                    Util.readClipboard().then((text) => {\r\n                        this.context.insertContent(text);\r\n                    });\r\n                    break;\r\n                case 'deleteLine':\r\n                    this.context.deleteLine();\r\n                    break;\r\n                case 'find':\r\n                    this.editor.openSearch();\r\n                    break;\r\n                case 'replace':\r\n                    this.editor.openSearch(true);\r\n                    break;\r\n            }\r\n            this.editor.focus();\r\n            this.editMenuVisible = false;\r\n        },\r\n        onSelectionMenuChange(item) {\r\n            if (!this.editor) {\r\n                this.selectionMenuVisible = false;\r\n                return;\r\n            }\r\n            switch (item.op) {\r\n                case 'selectAll':\r\n                    this.editor.selecter.selectAll();\r\n                    break;\r\n                case 'copyLineUp':\r\n                    this.context.copyLineUp();\r\n                    break;\r\n                case 'copyLineDown':\r\n                    this.context.copyLineDown();\r\n                    break;\r\n                case 'moveLineUp':\r\n                    this.context.moveLineUp();\r\n                    break;\r\n                case 'moveLineDown':\r\n                    this.context.moveLineDown();\r\n                    break;\r\n                case 'addCursorAbove':\r\n                    this.editor.cursor.addCursorAbove();\r\n                    break;\r\n                case 'addCursorBelow':\r\n                    this.editor.cursor.addCursorBelow();\r\n                    break;\r\n                case 'addCursorLineEnds':\r\n                    this.editor.cursor.addCursorLineEnds();\r\n                    break;\r\n                case 'addNextOccurence':\r\n                    this.editor.searchWord('down');\r\n                    break;\r\n                case 'addPrevOccurence':\r\n                    this.editor.searchWord('up');\r\n                    break;\r\n                case 'selectAllOccurence':\r\n                    this.editor.selecter.selectAllOccurence();\r\n                    break;\r\n                case 'switchMultiKeyCode':\r\n                    this.editor.cursor.switchMultiKeyCode();\r\n                    item.keyCode = this.editor.cursor.multiKeyCode;\r\n                    item.name = `Switch ${item.keyCode === 'alt' ? 'Ctrl' : 'Alt'}+Click to Multi-Cursor`;\r\n                    break;\r\n            }\r\n            this.editor.focus();\r\n            this.selectionMenuVisible = false;\r\n        },\r\n        onPreferenceMenuChange(item) {\r\n            switch (item.op) {\r\n                case 'changeTheme':\r\n                    this.$emit('change', item);\r\n                    break;\r\n                case 'changeIconTheme':\r\n                    this.$emit('change', item);\r\n            }\r\n            this.preferenceMenuVisible = false;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./TitleBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./TitleBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TitleBar.vue?vue&type=template&id=020a2e8f&\"\nimport script from \"./TitleBar.vue?vue&type=script&lang=js&\"\nexport * from \"./TitleBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-status-bar my-width-100\",style:({ height: _vm.height + 'px' }),on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('div',{staticClass:\"my-height-100 my-center-between\"},[_c('div',{staticClass:\"bar-left\"},[(_vm.hasEditor)?_c('div',{staticClass:\"bar-item\"},[_c('span',[_vm._v(\"Line \"+_vm._s(_vm.line)+\", Column \"+_vm._s(_vm.column))])]):_vm._e()]),_c('div',{staticClass:\"bar-right\"},[(_vm.hasEditor)?_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showTabsize.apply(null, arguments)}}},[_c('span',[_vm._v(\"Tab Size:\"+_vm._s(_vm.tabSize))]),_c('div',{staticClass:\"my-list\",staticStyle:{\"position\":\"absolute\",\"bottom\":\"30px\"}},[(_vm.tabsizeVisible)?_c('Menu',{attrs:{\"menuList\":_vm.tabSizeList,\"styles\":{ position: 'relative' },\"value\":_vm.tabSize},on:{\"change\":_vm.onTabsizeChange}}):_vm._e()],1)]):_vm._e(),(_vm.hasEditor)?_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showLanguage.apply(null, arguments)}}},[_c('span',[_vm._v(_vm._s(_vm.nowLanguage))])]):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-09 21:38:38\r\n * @Description: \r\n-->\r\n<template>\r\n    <div :style=\"{ height: height + 'px' }\" @contextmenu.stop.prevent class=\"my-status-bar my-width-100\">\r\n        <div class=\"my-height-100 my-center-between\">\r\n            <div class=\"bar-left\">\r\n                <div class=\"bar-item\" v-if=\"hasEditor\">\r\n                    <span>Line {{ line }}, Column {{ column }}</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"bar-right\">\r\n                <div @mousedown.stop=\"showTabsize\" class=\"bar-item my-hover\" v-if=\"hasEditor\">\r\n                    <span>Tab Size:{{ tabSize }}</span>\r\n                    <div class=\"my-list\" style=\"position: absolute; bottom: 30px\">\r\n                        <Menu\r\n                            :menuList=\"tabSizeList\"\r\n                            :styles=\"{ position: 'relative' }\"\r\n                            :value=\"tabSize\"\r\n                            @change=\"onTabsizeChange\"\r\n                            v-if=\"tabsizeVisible\"\r\n                        ></Menu>\r\n                    </div>\r\n                </div>\r\n                <div @mousedown.stop=\"showLanguage\" class=\"bar-item my-hover\" v-if=\"hasEditor\">\r\n                    <span>{{ nowLanguage }}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Menu from './Menu';\r\nimport EventBus from '@/event';\r\n\r\nexport default {\r\n    name: 'StatusBar',\r\n    props: {\r\n        height: {\r\n            type: Number,\r\n            default: 25,\r\n        },\r\n        languageList: Array,\r\n    },\r\n    components: {\r\n        Menu,\r\n    },\r\n    data() {\r\n        return {\r\n            line: 1,\r\n            column: 0,\r\n            tabSize: 4,\r\n            language: '',\r\n            tabsizeVisible: false,\r\n            hasEditor: false,\r\n            tabSizeList: [],\r\n            languages: [[]],\r\n            languageMap: {},\r\n        };\r\n    },\r\n    watch: {\r\n        languageList() {\r\n            let languageMap = {};\r\n            this.languageList.forEach((item) => {\r\n                languageMap[item.value] = item.name;\r\n            });\r\n            this.languages = [this.languageList];\r\n            this.languageMap = languageMap;\r\n        },\r\n    },\r\n    computed: {\r\n        nowLanguage() {\r\n            return this.languageMap[this.language];\r\n        },\r\n    },\r\n    created() {\r\n        this.initEventBus();\r\n        for (let i = 1; i <= 8; i++) {\r\n            this.tabSizeList.push({\r\n                name: `Tab Width：${i}`,\r\n                value: i,\r\n            });\r\n        }\r\n    },\r\n    mounted() {},\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on('tab-change', (data) => {\r\n                if (data) {\r\n                    this.language = data.language;\r\n                    this.tabSize = data.tabSize;\r\n                    this.line = data.line;\r\n                    this.column = data.column;\r\n                    this.hasEditor = true;\r\n                } else {\r\n                    this.hasEditor = false;\r\n                }\r\n            });\r\n            EventBus.$on('cursor-change', (data) => {\r\n                this.line = data.line;\r\n                this.column = data.column;\r\n            });\r\n            EventBus.$on('language-change', (language) => {\r\n                this.language = language;\r\n            });\r\n            EventBus.$on('close-menu', (language) => {\r\n                this.tabsizeVisible = false;\r\n            });\r\n        },\r\n        showTabsize() {\r\n            let visible = this.tabsizeVisible;\r\n            EventBus.$emit('close-menu');\r\n            this.tabsizeVisible = !visible;\r\n        },\r\n        showLanguage() {\r\n            EventBus.$emit('close-menu');\r\n            this.$emit('select-langeuage');\r\n        },\r\n        onTabsizeChange(item) {\r\n            if (this.tabSize != item.value) {\r\n                EventBus.$emit('tab-size-change', item.value);\r\n                this.tabSize = item.value;\r\n            }\r\n            this.tabsizeVisible = false;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./StatusBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./StatusBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StatusBar.vue?vue&type=template&id=67eb5ef1&\"\nimport script from \"./StatusBar.vue?vue&type=script&lang=js&\"\nexport * from \"./StatusBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"sideBar\",staticClass:\"my-side-bar\",style:({ width: _vm.width + 'px' }),on:{\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onContextmenu.apply(null, arguments)},\"selectstart\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"my-height-100\",staticStyle:{\"overflow\":\"hidden\"}},[_c('div',{staticClass:\"side-bar-title my-shadow\"},[_vm._v(\"EXPLORER\")]),_c('side-tree',{attrs:{\"list\":_vm.list}})],1),_c('SideBarMenu',{ref:\"sideBarMenu\"}),_c('div',{staticClass:\"my-sash-v\",on:{\"mousedown\":_vm.onSashBegin}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wrap\",staticClass:\"side-tree-warp my-scroll-overlay\",on:{\"scroll\":_vm.onScroll}},[_c('div',{staticStyle:{\"width\":\"100%\",\"overflow\":\"hidden\"}},[_c('div',{staticClass:\"side-tree\",style:({ height: _vm._scrollHeight })},[_c('div',{staticClass:\"side-tree-content\",style:({ top: _vm._top })},_vm._l((_vm.renderList),function(item){return _c('div',{staticClass:\"tree-item\",on:{\"click\":function($event){$event.stopPropagation();return _vm.onClickItem(item)}}},[_c('div',{staticClass:\"tree-item-title my-center-start\",class:[item.active ? 'my-active' : ''],style:({ 'padding-left': _vm._paddingLeft(item) }),attrs:{\"title\":item.path},on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();}}},[(item.type === 'dir')?[(item.open)?_c('span',{staticClass:\"left-icon iconfont icon-down1\"}):_c('span',{staticClass:\"left-icon iconfont icon-right\"})]:_vm._e(),_c('div',{staticClass:\"tree-item-content my-center-start\",class:[item.icon]},[_c('span',{staticClass:\"tree-item-text\",staticStyle:{\"margin-left\":\"4px\"}},[_vm._v(_vm._s(item.name))])])],2)])}),0)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div @scroll=\"onScroll\" class=\"side-tree-warp my-scroll-overlay\" ref=\"wrap\">\r\n        <div style=\"width: 100%; overflow: hidden\">\r\n            <div :style=\"{ height: _scrollHeight }\" class=\"side-tree\">\r\n                <div :style=\"{ top: _top }\" class=\"side-tree-content\">\r\n                    <div @click.stop=\"onClickItem(item)\" class=\"tree-item\" v-for=\"item in renderList\">\r\n                        <div\r\n                            :class=\"[item.active ? 'my-active' : '']\"\r\n                            :style=\"{ 'padding-left': _paddingLeft(item) }\"\r\n                            :title=\"item.path\"\r\n                            @contextmenu.stop.prevent\r\n                            class=\"tree-item-title my-center-start\"\r\n                        >\r\n                            <template v-if=\"item.type === 'dir'\">\r\n                                <span class=\"left-icon iconfont icon-down1\" v-if=\"item.open\"></span>\r\n                                <span class=\"left-icon iconfont icon-right\" v-else></span>\r\n                            </template>\r\n                            <div class=\"tree-item-content my-center-start\" :class=\"[item.icon]\">\r\n                                <span class=\"tree-item-text\" style=\"margin-left: 4px\">{{ item.name }}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport EventBus from '@/event';\r\nimport Util from '@/common/util';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nlet preActiveItem = null;\r\n\r\nexport default {\r\n    name: 'SideTree',\r\n    props: {\r\n        list: {\r\n            type: Array,\r\n        },\r\n    },\r\n    inject: ['openFile'],\r\n    data() {\r\n        return {\r\n            itemHeight: 30,\r\n            itemPadding: 16,\r\n            openedList: [],\r\n            renderList: [],\r\n            startLine: 1,\r\n            maxVisibleLines: 100,\r\n        };\r\n    },\r\n    computed: {\r\n        _top() {\r\n            return (this.startLine - 1) * this.itemHeight + 'px';\r\n        },\r\n        _scrollHeight() {\r\n            return this.openedList.length * this.itemHeight + 'px';\r\n        },\r\n        _paddingLeft() {\r\n            return function (item) {\r\n                return item.deep * this.itemPadding + 'px';\r\n            };\r\n        },\r\n    },\r\n    watch: {\r\n        list() {\r\n            this.openedList = [];\r\n            this.renderList = [];\r\n            this.openedList = this.getRenderList(this.list, 0);\r\n            this.render();\r\n        },\r\n    },\r\n    created() {\r\n        this.openedList = this.getRenderList(this.list, 0);\r\n        this.initEventBus();\r\n    },\r\n    mounted() {\r\n        this.maxVisibleLines = Math.ceil(this.$refs.wrap.clientHeight / this.itemHeight) + 1;\r\n        this.render();\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on('icon-change', () => {\r\n                this.openedList.forEach((item) => {\r\n                    item.icon = '';\r\n                });\r\n                this.render();\r\n            });\r\n            EventBus.$on('theme-change', () => {\r\n                this.openedList.forEach((item) => {\r\n                    item.icon = '';\r\n                });\r\n                this.render();\r\n            });\r\n            EventBus.$on('tab-change', (data) => {\r\n                let path = data && data.path;\r\n                if (path && preActiveItem && preActiveItem.path !== path) {\r\n                    preActiveItem.active = false;\r\n                    this.focusItem(path);\r\n                } else if (!path && preActiveItem) {\r\n                    preActiveItem.active = false;\r\n                    preActiveItem = null;\r\n                }\r\n            });\r\n        },\r\n        render() {\r\n            this.renderList = this.openedList.slice(this.startLine - 1, this.startLine - 1 + this.maxVisibleLines);\r\n            this.renderList.forEach((item) => {\r\n                if (globalData.nowIconData) {\r\n                    item.icon = Util.getIconByPath(globalData.nowIconData, item.path, globalData.nowTheme.type, item.type, item.open);\r\n                    item.icon = item.icon ? `my-file-icon my-file-icon-${item.icon}` : '';\r\n                }\r\n            });\r\n        },\r\n        readdir(dirPath) {\r\n            const fs = require('fs');\r\n            const path = require('path');\r\n            return new Promise((resolve) => {\r\n                let results = [];\r\n                // 异步读取目录内容\r\n                fs.readdir(dirPath, { encoding: 'utf8' }, (err, files) => {\r\n                    if (err) {\r\n                        throw err;\r\n                    }\r\n                    files.forEach((item, index) => {\r\n                        let fullPath = path.join(dirPath, item);\r\n                        let state = fs.statSync(fullPath);\r\n                        let obj = {\r\n                            name: item,\r\n                            path: fullPath,\r\n                            parentPath: dirPath,\r\n                            active: false,\r\n                            children: [],\r\n                        };\r\n                        if (state.isFile()) {\r\n                            obj.type = 'file';\r\n                        } else {\r\n                            obj.type = 'dir';\r\n                            obj.open = false;\r\n                        }\r\n                        results.push(obj);\r\n                        if (index === files.length - 1) {\r\n                            resolve(this.sortFileList(results));\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n        },\r\n        sortFileList(results) {\r\n            results.sort((a, b) => {\r\n                if (a.type === 'dir' && b.type === 'file') {\r\n                    return -1;\r\n                } else if (a.type === 'file' && b.type === 'dir') {\r\n                    return 1;\r\n                } else if (a.name > b.name) {\r\n                    return 1;\r\n                } else if (a.name < b.name) {\r\n                    return -1;\r\n                } else {\r\n                    return 0;\r\n                }\r\n            });\r\n            return results;\r\n        },\r\n        getRenderList(list, deep) {\r\n            let results = [];\r\n            _loopList(list, deep);\r\n            return results;\r\n\r\n            function _loopList(list, deep) {\r\n                list.forEach((item) => {\r\n                    item.deep = deep + 1;\r\n                    results.push(item);\r\n                    if (item.open && item.children.length) {\r\n                        _loopList(item.children, item.deep);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        focusItem(path) {\r\n            let index = 0;\r\n            _findItem.call(this, path);\r\n\r\n            function _findItem(path) {\r\n                for (let i = index; i < this.openedList.length; i++) {\r\n                    let item = this.openedList[i];\r\n                    if (item.path === path) {\r\n                        let wrap = this.$refs.wrap;\r\n                        let scrollTop = wrap.scrollTop;\r\n                        let clientHeight = wrap.clientHeight;\r\n                        let height = (i + 1) * this.itemHeight;\r\n                        if (scrollTop + clientHeight < height) {\r\n                            wrap.scrollTop = height - clientHeight;\r\n                        } else if (scrollTop + this.itemHeight > height) {\r\n                            wrap.scrollTop = height - this.itemHeight;\r\n                        }\r\n                        if (!item.active) {\r\n                            this.onClickItem(item);\r\n                        }\r\n                        break;\r\n                    } else if (path.startsWith(item.path)) {\r\n                        if (!item.open) {\r\n                            index = i + 1;\r\n                            this.onClickItem(item).then(() => {\r\n                                _findItem.call(this, path);\r\n                            });\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        onClickItem(item) {\r\n            if (!item.active) {\r\n                if (preActiveItem) {\r\n                    preActiveItem.active = false;\r\n                }\r\n                item.active = true;\r\n                preActiveItem = item;\r\n                if (item.type === 'dir') {\r\n                    item.open = !item.open;\r\n                    if (!item.loaded) {\r\n                        return this.readdir(item.path).then((data) => {\r\n                            item.children = data;\r\n                            item.loaded = true;\r\n                            data.forEach((_item) => {\r\n                                _item.deep = item.deep + 1;\r\n                            });\r\n                            _changOpen.call(this, item);\r\n                        });\r\n                    } else {\r\n                        _changOpen.call(this, item);\r\n                    }\r\n                } else {\r\n                    this.openFile(item);\r\n                }\r\n            } else if (item.type === 'dir') {\r\n                item.open = !item.open;\r\n                _changOpen.call(this, item);\r\n            }\r\n            return Promise.resolve();\r\n\r\n            function _changOpen(item) {\r\n                if (item.children.length) {\r\n                    if (item.open) {\r\n                        let index = this.openedList.indexOf(item);\r\n                        this.openedList = this.openedList\r\n                            .slice(0, index + 1)\r\n                            .concat(this.getRenderList(item.children, item.deep))\r\n                            .concat(this.openedList.slice(index + 1));\r\n                    } else {\r\n                        let index = this.openedList.indexOf(item) + 1;\r\n                        let endIn = index;\r\n                        while (endIn < this.openedList.length && this.openedList[endIn].parentPath != item.parentPath) {\r\n                            endIn++;\r\n                        }\r\n                        this.openedList.splice(index, endIn - index);\r\n                    }\r\n                    this.render();\r\n                }\r\n            }\r\n        },\r\n        onScroll(e) {\r\n            let scrollTop = e.target.scrollTop;\r\n            this.startLine = Math.floor(scrollTop / this.itemHeight) + 1;\r\n            this.render();\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./SideTree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./SideTree.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SideTree.vue?vue&type=template&id=4d5a5b30&\"\nimport script from \"./SideTree.vue?vue&type=script&lang=js&\"\nexport * from \"./SideTree.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],ref:\"wrap\"},[_c('Menu',{ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onMenuChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div ref=\"wrap\" v-show=\"menuVisible\">\r\n        <Menu\r\n            :checkable=\"false\"\r\n            :menuList=\"menuList\"\r\n            :styles=\"menuStyle\"\r\n            @change=\"onMenuChange\"\r\n            ref=\"menu\"\r\n        ></Menu>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Menu from \"./Menu\";\r\nimport EventBus from \"@/event\";\r\nimport $ from \"jquery\";\r\n\r\nexport default {\r\n    components: {\r\n        Menu,\r\n    },\r\n    data() {\r\n        return {\r\n            list: [],\r\n            menuList: [],\r\n            menuVisible: false,\r\n            menuStyle: {\r\n                left: \"10px\",\r\n                top: \"40px\",\r\n            },\r\n        };\r\n    },\r\n    provide() {\r\n        return {\r\n            rootList: this.list,\r\n        };\r\n    },\r\n    created() {\r\n        this.initEventBus();\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on(\"close-menu\", () => {\r\n                this.menuVisible = false;\r\n            });\r\n            EventBus.$on(\"open-side-menu\", () => {\r\n                this.menuVisible = true;\r\n            });\r\n        },\r\n        show(e) {\r\n            let $parent = $(this.$refs.wrap).parent();\r\n            this.$nextTick(() => {\r\n                let menuWidth = 0;\r\n                let menuHeight = 0;\r\n                menuWidth = this.$refs.menu.$el.clientWidth;\r\n                menuHeight = this.$refs.menu.$el.clientHeight;\r\n                let offset = $parent.offset();\r\n                if (menuHeight + e.clientY > offset.top + $parent.height()) {\r\n                    this.menuStyle.top =\r\n                        e.clientY - offset.top - menuHeight + \"px\";\r\n                } else {\r\n                    this.menuStyle.top = e.clientY - offset.top + \"px\";\r\n                }\r\n                this.menuStyle.left = e.clientX - offset.left + \"px\";\r\n            });\r\n        },\r\n        onMenuChange(item) {\r\n            switch (item.op) {\r\n            }\r\n            this.menuVisible = false;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./SideBarMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./SideBarMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SideBarMenu.vue?vue&type=template&id=bccab2a0&\"\nimport script from \"./SideBarMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./SideBarMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div\r\n        @contextmenu.prevent.stop=\"onContextmenu\"\r\n        @selectstart.prevent\r\n        class=\"my-side-bar\"\r\n        ref=\"sideBar\"\r\n        :style=\"{ width: width + 'px' }\"\r\n    >\r\n        <div class=\"my-height-100\" style=\"overflow: hidden\">\r\n            <div class=\"side-bar-title my-shadow\">EXPLORER</div>\r\n            <side-tree :list=\"list\"></side-tree>\r\n        </div>\r\n        <SideBarMenu ref=\"sideBarMenu\"></SideBarMenu>\r\n        <div class=\"my-sash-v\" @mousedown=\"onSashBegin\"></div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport SideTree from './SideTree';\r\nimport SideBarMenu from './SideBarMenu';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\n\r\nexport default {\r\n    components: {\r\n        SideTree,\r\n        SideBarMenu,\r\n    },\r\n    data() {\r\n        return {\r\n            width: 300,\r\n            list: [],\r\n        };\r\n    },\r\n    provide() {\r\n        return {\r\n            getRootList: () => {\r\n                return this.list;\r\n            },\r\n        };\r\n    },\r\n    mounted() {\r\n        this.initEvent();\r\n    },\r\n    methods: {\r\n        initEvent() {\r\n            $(document)\r\n                .on('mousemove', (e) => {\r\n                    if (this.mouseObj) {\r\n                        let width = (this.width += e.clientX - this.mouseObj.clientX);\r\n                        let pWidth = $(this.$refs.sideBar).parent().width();\r\n                        width = width < 10 ? 10 : width;\r\n                        width = width > pWidth - 10 ? pWidth - 10 : width;\r\n                        this.width = width;\r\n                        this.mouseObj = e;\r\n                    }\r\n                })\r\n                .on('mouseup', (e) => {\r\n                    this.mouseObj = null;\r\n                });\r\n        },\r\n        onContextmenu(e) {\r\n            // EventBus.$emit(\"open-side-menu\");\r\n        },\r\n        onSashBegin(e) {\r\n            this.originMouseObj = e;\r\n            this.mouseObj = e;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./SideBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./SideBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SideBar.vue?vue&type=template&id=36596f36&\"\nimport script from \"./SideBar.vue?vue&type=script&lang=js&\"\nexport * from \"./SideBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.overlay)?_c('div',{staticClass:\"my-dialog-overlay\"}):_vm._e(),_c('div',{staticClass:\"my-dialog\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"dialog-title\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_c('span',{staticClass:\"dialog-close iconfont icon-close\",on:{\"click\":_vm.onClose}})]),_c('div',{staticClass:\"dialog-content\"},[(_vm.icon)?_c('span',{class:[_vm.icon],staticStyle:{\"margin-right\":\"5px\",\"width\":\"30px\",\"height\":\"30px\"}}):_vm._e(),_c('div',[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.content)}})])]),_c('div',{staticClass:\"dialog-btns\"},[_vm._l((_vm.btns),function(item){return _c('div',{staticClass:\"dialog-btn\",on:{\"click\":function($event){return _vm.onClickBtn(item)}}},[_vm._v(_vm._s(item.name))])}),_c('div',{staticClass:\"dialog-btn\",on:{\"click\":function($event){return _vm.onClose()}}},[_vm._v(\"取消\")])],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n * @Author: lisong\n * @Date: 2021-12-24 11:00:11\n * @Description: \n-->\n<template>\n\t<div>\n\t\t<div class=\"my-dialog-overlay\" v-if=\"overlay\"></div>\n\t\t<div :style=\"styles\" @mousedown.stop class=\"my-dialog\">\n\t\t\t<div class=\"dialog-title\">\n\t\t\t\t<div v-html=\"title\"></div>\n\t\t\t\t<span @click=\"onClose\" class=\"dialog-close iconfont icon-close\"></span>\n\t\t\t</div>\n\t\t\t<div class=\"dialog-content\">\n\t\t\t\t<span :class=\"[icon]\" style=\"margin-right:5px;width:30px;height:30px;\" v-if=\"icon\"></span>\n\t\t\t\t<div>\n\t\t\t\t\t<div v-html=\"content\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"dialog-btns\">\n\t\t\t\t<div @click=\"onClickBtn(item)\" class=\"dialog-btn\" v-for=\"item in btns\">{{item.name}}</div>\n\t\t\t\t<div @click=\"onClose()\" class=\"dialog-btn\">取消</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n    name: 'Dialog',\n    props: {\n        title: String,\n        content: String,\n        btns: Array,\n        overlay: Boolean,\n        styles: Object,\n        icon: String,\n        iconColor: String,\n    },\n    data() {\n        return {\n        }\n    },\n    created() {\n    },\n    methods: {\n        onClickBtn(item) {\n            item.callback();\n        },\n        onClose() {\n            this.$emit('close');\n        }\n    }\n}\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dialog.vue?vue&type=template&id=3fea6a40&\"\nimport script from \"./Dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./Dialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],ref:\"wrap\"},[_c('Menu',{ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onMenuChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n    <div ref=\"wrap\" v-show=\"menuVisible\">\r\n        <Menu\r\n            :checkable=\"false\"\r\n            :menuList=\"menuList\"\r\n            :styles=\"menuStyle\"\r\n            @change=\"onMenuChange\"\r\n            ref=\"menu\"\r\n        ></Menu>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Menu from \"./Menu.vue\";\r\nimport EventBus from \"@/event\";\r\nimport $ from \"jquery\";\r\n\r\nexport default {\r\n    name: \"WindowMenu\",\r\n    components: {\r\n        Menu,\r\n    },\r\n    props: {\r\n        styles: {\r\n            type: Object,\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            menuList: [],\r\n            menuVisible: false,\r\n            menuStyle: {\r\n                left: \"50%\",\r\n                top: \"50%\",\r\n            },\r\n        };\r\n    },\r\n    created() {\r\n        this.initEventBus();\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on(\"close-menu\", () => {\r\n                this.menuVisible = false;\r\n            });\r\n            EventBus.$on(\"open-win-menu\", () => {\r\n                this.menuVisible = true;\r\n            });\r\n        },\r\n        onMenuChange(item) {\r\n            switch (item.op) {\r\n            }\r\n            this.menuVisible = false;\r\n        },\r\n        show(e) {\r\n            this.menuVisible = true;\r\n            this.$nextTick(() => {\r\n                let $parent = $(this.$refs.wrap).parent();\r\n                let offset = $parent.offset();\r\n                let menuWidth = this.$refs.menu.$el.clientWidth;\r\n                let menuHeight = this.$refs.menu.$el.clientHeight;\r\n                if (\r\n                    menuHeight + e.clientY >\r\n                    offset.top + $parent[0].clientHeight\r\n                ) {\r\n                    this.menuStyle.top =\r\n                        e.clientY - offset.top - menuHeight + \"px\";\r\n                } else {\r\n                    this.menuStyle.top = e.clientY - offset.top + \"px\";\r\n                }\r\n                if (\r\n                    menuWidth + e.clientX >\r\n                    offset.left + $parent[0].clientWidth\r\n                ) {\r\n                    this.menuStyle.left =\r\n                        e.clientX - offset.left - menuWidth + \"px\";\r\n                } else {\r\n                    this.menuStyle.left = e.clientX - offset.left + \"px\";\r\n                }\r\n            });\r\n        },\r\n        hide() {\r\n            this.menuVisible = false;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./WindowMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./WindowMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WindowMenu.vue?vue&type=template&id=3b84567e&\"\nimport script from \"./WindowMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./WindowMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{staticClass:\"my-cmd-panel my-list\",on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',[_c('div',{staticClass:\"my-cmd-search\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchText),expression:\"searchText\"}],ref:\"input\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.searchText)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.searchText=$event.target.value}}})]),_c('div',[_c('Menu',{staticClass:\"my-scroll-overlay my-scroll-mini\",staticStyle:{\"position\":\"relative\"},attrs:{\"checkable\":true,\"menuList\":_vm.cmdList,\"value\":_vm.value,\"spellcheck\":\"false\"},on:{\"change\":_vm.onChange}})],1)])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * @Author: lisong\r\n * @Date: 2022-03-22 23:00:49\r\n * @Description:\r\n */\r\nimport Util from '../../common/util';\r\nimport globalData from '@/data/globalData';\r\nimport chroma from 'chroma-js';\r\nimport EventBus from '@/event';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nconst path = require('path');\r\nconst settingMap = {\r\n    foreground: 'color',\r\n    background: 'background-color',\r\n    fontStyle: 'font-style',\r\n};\r\n\r\nexport default class {\r\n    constructor() {}\r\n    loadTheme(option) {\r\n        let result = { tokenColors: [], colors: {} };\r\n        return _loadTheme.call(this, option.path).then(() => {\r\n            let css = '';\r\n            this.setDefaultColor(result, option.type);\r\n            css = this.parseCss(result);\r\n            this.insertCss(css);\r\n            globalData.nowTheme = {\r\n                value: option.value,\r\n                type: option.type,\r\n                path: option.path,\r\n            };\r\n            EventBus.$emit('theme-change', option.value);\r\n        });\r\n\r\n        function _loadTheme(fullPath) {\r\n            return Util.loadJsonFile(fullPath).then((data) => {\r\n                if (data.include) {\r\n                    return _loadTheme.call(this, path.join(fullPath, '../' + data.include)).then(() => {\r\n                        _addColors(data);\r\n                    });\r\n                } else {\r\n                    _addColors(data);\r\n                }\r\n            });\r\n        }\r\n\r\n        function _addColors(data) {\r\n            data.tokenColors && result.tokenColors.push(...data.tokenColors);\r\n            data.colors && Object.assign(result.colors, data.colors);\r\n        }\r\n    }\r\n    loadIconTheme(option) {\r\n        if (!option.path) {\r\n            globalData.nowIconTheme = {\r\n                value: option.value,\r\n            };\r\n            globalData.nowIconData = null;\r\n            EventBus.$emit('icon-change');\r\n            return Promise.resolve();\r\n        }\r\n        let languages = globalData.languageList;\r\n        let languageMap = {};\r\n        languages.forEach((item) => {\r\n            if (item.extensions) {\r\n                languageMap[item.value] = item.extensions.map((e) => {\r\n                    return e.slice(1);\r\n                });\r\n            }\r\n        });\r\n\r\n        return _loadTheme.call(this, option.path);\r\n\r\n        function _loadTheme(fullPath) {\r\n            return Util.loadJsonFile(fullPath).then((data) => {\r\n                let fonts = data.fonts || [];\r\n                let css = '';\r\n                fonts.forEach((font) => {\r\n                    let fontFace = '@font-face{\\nsrc:';\r\n                    font.src.forEach((src, index) => {\r\n                        let url = path.join(fullPath, '../' + src.path);\r\n                        url = url.replace(/\\\\/g, '/');\r\n                        fontFace += `url('my-file://${url}')`;\r\n                        fontFace += ` format('${src.format}')`;\r\n                        fontFace += index < font - src.length - 1 ? ', ' : '';\r\n                    });\r\n                    fontFace += ';\\n';\r\n                    fontFace += `font-family:${font.id};\\n`;\r\n                    fontFace += `font-style:${font.style};\\n`;\r\n                    fontFace += `font-weight:${font.weight};\\n`;\r\n                    fontFace += '}\\n';\r\n                    css += fontFace;\r\n                    css += '.my-file-icon::before{\\n';\r\n                    css += `font-family:${font.id};\\n`;\r\n                    css += `font-size:${font.size};\\n`;\r\n                    css += '}\\n';\r\n                });\r\n                for (let icon in data.iconDefinitions) {\r\n                    css += `.my-file-icon-${icon}::before{\\n`;\r\n                    icon = data.iconDefinitions[icon];\r\n                    if (icon.fontCharacter) {\r\n                        css += 'margin-top:3px;';\r\n                        css += `content:\"${icon.fontCharacter}\";\\n`;\r\n                        css += `color:${icon.fontColor};\\n`;\r\n                    } else if (icon.iconPath) {\r\n                        let imgUrl = path.join(fullPath, '../' + icon.iconPath);\r\n                        imgUrl = imgUrl.replace(/\\\\/g, '/');\r\n                        css += 'content:\"\";';\r\n                        css += `background-image:url(my-file://${imgUrl})`;\r\n                    }\r\n                    css += '}\\n';\r\n                }\r\n                this.insertFont(css);\r\n                data.fileNames = data.fileNames || {};\r\n                data.fileExtensions = data.fileExtensions || {};\r\n                _setFileExtensions(data);\r\n                globalData.nowIconTheme = {\r\n                    value: option.value,\r\n                    path: option.path,\r\n                };\r\n                globalData.nowIconData = data;\r\n                EventBus.$emit('icon-change', option.value);\r\n            });\r\n        }\r\n\r\n        function _setFileExtensions(data) {\r\n            data.languageIds && _parseLanguageIds(data.languageIds, data.fileExtensions);\r\n            if (data.light) {\r\n                data.light.fileExtensions = data.light.fileExtensions || {};\r\n                data.light.fileNames = data.light.fileNames || {};\r\n                data.light.languageIds && _parseLanguageIds(data.light.languageIds, data.light.fileExtensions);\r\n                for (let key in data.fileExtensions) {\r\n                    data.light.fileExtensions[key] = data.light.fileExtensions[key] || data.fileExtensions[key];\r\n                }\r\n                for (let key in data.fileNames) {\r\n                    data.light.fileNames[key] = data.light.fileNames[key] || data.fileNames[key];\r\n                }\r\n            } else {\r\n                data.light = {\r\n                    fileExtensions: data.fileExtensions,\r\n                    fileNames: data.fileNames,\r\n                };\r\n            }\r\n        }\r\n\r\n        function _parseLanguageIds(languageIds, fileExtensions) {\r\n            for (let key in languageIds) {\r\n                let extensions = languageMap[key];\r\n                let value = languageIds[key];\r\n                if (extensions) {\r\n                    extensions.forEach((item) => {\r\n                        fileExtensions[item] = value;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    parseCss(data) {\r\n        let css = '';\r\n        let scopeId = 1;\r\n        let scopeTokenList = [];\r\n        let dotReg = /\\./g;\r\n        let sReg = /\\s+/g;\r\n        if (data.colors) {\r\n            css += ':root{\\n';\r\n            for (let key in data.colors) {\r\n                css += `--my-${key.replace(/\\./g, '-')}: ${data.colors[key]};\\n`;\r\n            }\r\n            css += '}\\n';\r\n        }\r\n        if (data.tokenColors) {\r\n            data.tokenColors.forEach((token) => {\r\n                if (!token.scope) {\r\n                    return;\r\n                }\r\n                let selector = [];\r\n                let scope = token.scope instanceof Array ? token.scope.join(',') : token.scope;\r\n                scope = scope.replace(/\\s+/g, ' ');\r\n                scope = scope.split(/\\s*\\,\\s*/);\r\n                scope.forEach((scope, index) => {\r\n                    selector.push(`.my-scope-${scopeId}`);\r\n                    scopeTokenList.push({\r\n                        scopeId: scopeId,\r\n                        scope: scope,\r\n                        scopes: scope.split(' '),\r\n                        level: _getLevel(scope),\r\n                    });\r\n                    scopeId++;\r\n                });\r\n                selector = selector.join(',');\r\n                css += `${selector}{\\n`;\r\n                for (let prop in token.settings) {\r\n                    css += `${settingMap[prop]}:${token.settings[prop]};\\n`;\r\n                }\r\n                css += '}\\n';\r\n            });\r\n        }\r\n        scopeTokenList.sort((a, b) => {\r\n            return b.level - a.level;\r\n        });\r\n        scopeTokenList.forEach((item) => {\r\n            if (item.scopes.length > 1) {\r\n                item.regexp = item.scopes.join('(?:\\\\.[^\\\\.\\\\s]+)*?(?:\\\\s[^\\\\s]+)*? ');\r\n            } else {\r\n                item.regexp = item.scope;\r\n            }\r\n            item.regexp = new RegExp(item.regexp);\r\n        });\r\n        globalData.scopeTokenList = scopeTokenList;\r\n        globalData.colors = data.colors;\r\n        return css;\r\n\r\n        function _getLevel(scope) {\r\n            let dot = scope.match(dotReg);\r\n            let s = scope.match(sReg);\r\n            dot = (dot && dot.length) || 0;\r\n            s = (s && s.length * 1000) || 0;\r\n            return dot + s;\r\n        }\r\n    }\r\n    insertCss(css) {\r\n        if (globalData.themeStyle) {\r\n            globalData.themeStyle.remove();\r\n        }\r\n        globalData.themeStyle = document.createElement('style');\r\n        globalData.themeStyle.type = 'text/css';\r\n        globalData.themeStyle.appendChild(document.createTextNode(css));\r\n        document.getElementsByTagName('head')[0].appendChild(globalData.themeStyle);\r\n    }\r\n    insertFont(css) {\r\n        if (globalData.iconStyle) {\r\n            globalData.iconStyle.remove();\r\n        }\r\n        globalData.iconStyle = document.createElement('style');\r\n        globalData.iconStyle.type = 'text/css';\r\n        globalData.iconStyle.appendChild(document.createTextNode(css));\r\n        document.getElementsByTagName('head')[0].appendChild(globalData.iconStyle);\r\n    }\r\n    setDefaultColor(result, type) {\r\n        let transparent = 'transparent';\r\n        let foreground = '';\r\n        let background = '';\r\n        let focusBorder = '';\r\n        let contrastBorder = '';\r\n        let contrastActiveBorder = '';\r\n        let isLight = type === 'light' || type === 'contrast light';\r\n        let isHc = type === 'contrast light' || type === 'contrast dark';\r\n\r\n        _base();\r\n        _scrollbar();\r\n        _titleBar();\r\n        _dropdown();\r\n        _list();\r\n        _menu();\r\n        _statusBar();\r\n        _sideBar();\r\n        _editor();\r\n        _tab();\r\n        _editorWidget();\r\n        _input();\r\n        _toolbar();\r\n\r\n        // base\r\n        function _base() {\r\n            if (!result.colors['foreground']) {\r\n                if (result.colors['editor.foreground']) {\r\n                    result.colors['foreground'] = chroma(result.colors['editor.foreground']).alpha(0.8).css();\r\n                } else if (isLight) {\r\n                    result.colors['foreground'] = '#575757';\r\n                } else {\r\n                    result.colors['foreground'] = 'rgb(221, 221, 221)';\r\n                }\r\n            }\r\n            if (!result.colors['errorForeground']) {\r\n                result.colors['errorForeground'] = '#ff0000';\r\n            }\r\n            if (!result.colors['background']) {\r\n                if (result.colors['editor.background']) {\r\n                    result.colors['background'] = chroma(result.colors['editor.background']).alpha(0.8).css();\r\n                } else if (isLight) {\r\n                    result.colors['background'] = '#fff';\r\n                } else if (isHc) {\r\n                    result.colors['background'] = '#000';\r\n                } else {\r\n                    result.colors['background'] = 'rgba(60,60,60)';\r\n                }\r\n            }\r\n            if (!result.colors['focusBorder']) {\r\n                if (isHc) {\r\n                    if (isLight) {\r\n                        result.colors['focusBorder'] = '#0f4a85';\r\n                    } else {\r\n                        result.colors['focusBorder'] = '#f38518';\r\n                    }\r\n                } else {\r\n                    result.colors['focusBorder'] = '#0066b8';\r\n                }\r\n            }\r\n            if (!result.colors['contrastBorder']) {\r\n                if (isHc) {\r\n                    if (isLight) {\r\n                        result.colors['contrastBorder'] = '#0f4a85';\r\n                    } else {\r\n                        result.colors['contrastBorder'] = '#6fc3df';\r\n                    }\r\n                } else {\r\n                    result.colors['contrastBorder'] = transparent;\r\n                }\r\n            }\r\n            if (!result.colors['contrastActiveBorder']) {\r\n                if (isHc) {\r\n                    result.colors['contrastActiveBorder'] = result.colors['focusBorder'];\r\n                } else {\r\n                    result.colors['contrastActiveBorder'] = transparent;\r\n                }\r\n            }\r\n            if (!result.colors['widget.shadow']) {\r\n                if (isHc) {\r\n                    result.colors['widget.shadow'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['widget.shadow'] = 'rgba(0,0,0,0.16)';\r\n                } else {\r\n                    result.colors['widget.shadow'] = 'rgba(0,0,0,0.36)';\r\n                }\r\n            }\r\n            if (!result.colors['sash.hoverBorder']) {\r\n                if (isHc) {\r\n                    result.colors['sash.hoverBorder'] = result.colors['contrastActiveBorder'];\r\n                } else {\r\n                    result.colors['sash.hoverBorder'] = result.colors['focusBorder'];\r\n                }\r\n            }\r\n            if (!result.colors['selection.background']) {\r\n                result.colors['selection.background'] = result.colors['focusBorder'];\r\n            }\r\n            background = result.colors['background'];\r\n            foreground = result.colors['foreground'];\r\n            focusBorder = result.colors['focusBorder'];\r\n            contrastBorder = result.colors['contrastBorder'];\r\n            contrastActiveBorder = result.colors['contrastActiveBorder'];\r\n        }\r\n        function _scrollbar() {\r\n            if (!result.colors['scrollbar.shadow']) {\r\n                result.colors['scrollbar.shadow'] = transparent;\r\n            }\r\n            if (!result.colors['scrollbarSlider.background']) {\r\n                if (isHc) {\r\n                    result.colors['scrollbarSlider.background'] = chroma(contrastBorder).alpha(0.6).css();\r\n                } else if (isLight) {\r\n                    result.colors['scrollbarSlider.background'] = 'rgba(100, 100, 100, 0.4)';\r\n                } else {\r\n                    result.colors['scrollbarSlider.background'] = 'rgba(121, 121, 121, 0.4);';\r\n                }\r\n            }\r\n            if (!result.colors['scrollbarSlider.hoverBackground']) {\r\n                if (isHc) {\r\n                    result.colors['scrollbarSlider.hoverBackground'] = chroma(contrastBorder).alpha(0.8).css();\r\n                } else if (isLight) {\r\n                    result.colors['scrollbarSlider.hoverBackground'] = 'rgba(100, 100, 100, 0.7)';\r\n                } else {\r\n                    result.colors['scrollbarSlider.hoverBackground'] = 'rgba(100, 100, 100, 0.7);';\r\n                }\r\n            }\r\n            if (!result.colors['scrollbarSlider.activeBackground']) {\r\n                if (isHc) {\r\n                    result.colors['scrollbarSlider.activeBackground'] = contrastBorder;\r\n                } else if (isLight) {\r\n                    result.colors['scrollbarSlider.activeBackground'] = 'rgba(0, 0, 0, 0.6)';\r\n                } else {\r\n                    result.colors['scrollbarSlider.activeBackground'] = 'rgba(191, 191, 191, 0.4);';\r\n                }\r\n            }\r\n        }\r\n        //titleBar\r\n        function _titleBar() {\r\n            if (!result.colors['titleBar.border']) {\r\n                result.colors['titleBar.border'] = contrastBorder;\r\n            }\r\n            if (!result.colors['titleBar.activeForeground']) {\r\n                result.colors['titleBar.activeForeground'] = foreground;\r\n            }\r\n            if (!result.colors['titleBar.activeBackground']) {\r\n                if (isHc) {\r\n                    result.colors['titleBar.activeBackground'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['titleBar.activeBackground'] = 'rgb(221, 221, 221)';\r\n                }\r\n            }\r\n            if (!result.colors['menubar.selectionForeground']) {\r\n                result.colors['menubar.selectionForeground'] = foreground;\r\n            }\r\n            if (!result.colors['menubar.selectionBackground']) {\r\n                if (isHc) {\r\n                    result.colors['menubar.selectionBackground'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['menubar.selectionBackground'] = 'rgba(0,0,0,0.1)';\r\n                } else {\r\n                    result.colors['menubar.selectionBackground'] = 'rgba(255,255,255,0.1)';\r\n                }\r\n            }\r\n            if (!result.colors['menubar.selectionBorder']) {\r\n                if (isHc) {\r\n                    result.colors['menubar.selectionBorder'] = contrastActiveBorder;\r\n                } else {\r\n                    result.colors['menubar.selectionBorder'] = transparent;\r\n                }\r\n            }\r\n        }\r\n        // dropdown\r\n        function _dropdown() {\r\n            if (!result.colors['dropdown.background']) {\r\n                if (isHc) {\r\n                    result.colors['dropdown.background'] = background;\r\n                } else if (isLight) {\r\n                    result.colors['dropdown.background'] = '#eee';\r\n                } else {\r\n                    result.colors['dropdown.background'] = 'rgba(37,37,38)';\r\n                }\r\n            }\r\n            if (!result.colors['dropdown.foreground']) {\r\n                result.colors['dropdown.foreground'] = foreground;\r\n            }\r\n            if (!result.colors['dropdown.border']) {\r\n                result.colors['dropdown.border'] = contrastBorder;\r\n            }\r\n        }\r\n        // list\r\n        function _list() {\r\n            if (!result.colors['list.highlightForeground']) {\r\n                if (isHc) {\r\n                    result.colors['list.highlightForeground'] = contrastBorder;\r\n                } else {\r\n                    result.colors['list.highlightForeground'] = foreground;\r\n                }\r\n            }\r\n            if (!result.colors['list.activeSelectionBackground']) {\r\n                if (isHc) {\r\n                    result.colors['list.activeSelectionBackground'] = transparent;\r\n                } else {\r\n                    result.colors['list.activeSelectionBackground'] = '#0066b8';\r\n                    result.colors['list.activeSelectionForeground'] = '#fff';\r\n                }\r\n            }\r\n            if (!result.colors['list.activeSelectionForeground']) {\r\n                if (isHc) {\r\n                    result.colors['list.activeSelectionForeground'] = foreground;\r\n                } else if (isLight) {\r\n                    result.colors['list.activeSelectionForeground'] = 'rgba(51, 51, 51)';\r\n                } else {\r\n                    result.colors['list.activeSelectionForeground'] = 'rgba(255, 255, 255)';\r\n                }\r\n            }\r\n            if (!result.colors['list.hoverForeground']) {\r\n                result.colors['list.hoverForeground'] = foreground;\r\n            }\r\n            if (!result.colors['list.hoverBackground']) {\r\n                if (isHc) {\r\n                    result.colors['list.hoverBackground'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['list.hoverBackground'] = 'rgba(0,0,0,0.1)';\r\n                } else {\r\n                    result.colors['list.hoverBackground'] = 'rgba(255,255,255,0.1)';\r\n                }\r\n            }\r\n            if (!result.colors['quickInputList.focusBackground']) {\r\n                if (result.colors['list.inactiveFocusBackground']) {\r\n                    result.colors['quickInputList.focusBackground'] = result.colors['list.inactiveFocusBackground'];\r\n                } else if (isHc) {\r\n                    result.colors['quickInputList.focusBackground'] = transparent;\r\n                } else {\r\n                    result.colors['quickInputList.focusBackground'] = '#0066b8';\r\n                    result.colors['quickInputList.focusForeground'] = '#fff';\r\n                }\r\n            }\r\n            if (!result.colors['quickInputList.focusForeground']) {\r\n                if (result.colors['list.inactiveFocusForeground']) {\r\n                    result.colors['quickInputList.focusForeground'] = result.colors['list.inactiveFocusForeground'];\r\n                } else {\r\n                    result.colors['quickInputList.focusForeground'] = result.colors['list.activeSelectionForeground'];\r\n                }\r\n            }\r\n        }\r\n        //menu\r\n        function _menu() {\r\n            if (!result.colors['menu.foreground']) {\r\n                if (isHc) {\r\n                    result.colors['menu.foreground'] = foreground;\r\n                } else if (isLight) {\r\n                    result.colors['menu.foreground'] = 'rgba(51, 51, 51)';\r\n                } else {\r\n                    result.colors['menu.foreground'] = 'rgba(255, 255, 255)';\r\n                }\r\n            }\r\n            if (!result.colors['menu.background']) {\r\n                result.colors['menu.background'] = result.colors['dropdown.background'];\r\n            }\r\n            if (!result.colors['menu.border']) {\r\n                result.colors['menu.border'] = contrastBorder;\r\n            }\r\n            if (!result.colors['menu.selectionForeground']) {\r\n                result.colors['menu.selectionForeground'] = result.colors['list.activeSelectionForeground'];\r\n            }\r\n            if (!result.colors['menu.selectionBackground']) {\r\n                result.colors['menu.selectionBackground'] = result.colors['list.activeSelectionBackground'];\r\n            }\r\n            if (!result.colors['menu.selectionBorder']) {\r\n                result.colors['menu.selectionBorder'] = contrastActiveBorder;\r\n            }\r\n            if (!result.colors['menu.separatorBackground']) {\r\n                if (isHc) {\r\n                    result.colors['menu.separatorBackground'] = contrastBorder;\r\n                } else if (isLight) {\r\n                    result.colors['menu.separatorBackground'] = 'rgba(0,0,0,0.2)';\r\n                } else {\r\n                    result.colors['menu.separatorBackground'] = 'rgba(255,255,255,0.2)';\r\n                }\r\n            }\r\n        }\r\n        //statusBar\r\n        function _statusBar() {\r\n            if (!result.colors['statusBar.foreground']) {\r\n                if (isHc) {\r\n                    result.colors['statusBar.foreground'] = foreground;\r\n                } else {\r\n                    result.colors['statusBar.foreground'] = '#fff';\r\n                }\r\n            }\r\n            if (!result.colors['statusBar.background']) {\r\n                if (isLight && !isHc) {\r\n                    result.colors['statusBar.background'] = 'rgb(0, 122, 204)';\r\n                } else {\r\n                    result.colors['statusBar.background'] = transparent;\r\n                }\r\n            }\r\n            if (!result.colors['statusBar.border']) {\r\n                result.colors['statusBar.border'] = contrastBorder;\r\n            }\r\n            if (!result.colors['statusBarItem.hoverBackground']) {\r\n                result.colors['statusBarItem.hoverBackground'] = transparent;\r\n            }\r\n            if (!result.colors['statusBarItem.activeBackground']) {\r\n                result.colors['statusBarItem.activeBackground'] = transparent;\r\n            }\r\n        }\r\n        //sideBar\r\n        function _sideBar() {\r\n            if (!result.colors['sideBar.foreground']) {\r\n                result.colors['sideBar.foreground'] = foreground;\r\n            }\r\n            if (!result.colors['sideBarTitle.foreground']) {\r\n                result.colors['sideBarTitle.foreground'] = foreground;\r\n            }\r\n            if (!result.colors['sideBar.background']) {\r\n                if (isHc) {\r\n                    result.colors['sideBar.background'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['sideBar.background'] = '#eee';\r\n                } else {\r\n                    result.colors['sideBar.background'] = 'rgba(37,37,38)';\r\n                }\r\n            }\r\n            if (!result.colors['sideBar.border']) {\r\n                result.colors['sideBar.border'] = contrastBorder;\r\n            }\r\n        }\r\n        // editor\r\n        function _editor() {\r\n            if (!result.colors['editor.foreground']) {\r\n                result.colors['editor.foreground'] = foreground;\r\n            }\r\n            if (!result.colors['editor.background']) {\r\n                if (isHc) {\r\n                    result.colors['editor.background'] = background;\r\n                } else if (isLight) {\r\n                    result.colors['editor.background'] = '#fff';\r\n                } else {\r\n                    result.colors['editor.background'] = 'rgb(30,30,30)';\r\n                }\r\n            }\r\n            if (!result.colors['editorLineNumber.foreground']) {\r\n                result.colors['editorLineNumber.foreground'] = chroma(result.colors['editor.foreground']).alpha(0.5).css();\r\n            }\r\n            if (!result.colors['editorLineNumber.activeForeground']) {\r\n                result.colors['editorLineNumber.activeForeground'] = result.colors['editor.foreground'];\r\n            }\r\n            if (!result.colors['editorCursor.foreground']) {\r\n                result.colors['editorCursor.foreground'] = result.colors['editor.foreground'];\r\n            }\r\n            if (!result.colors['editor.selectionForeground']) {\r\n                if (isHc) {\r\n                    result.colors['editor.selectionForeground'] = foreground;\r\n                }\r\n            }\r\n            if (!result.colors['editor.selectionBackground']) {\r\n                if (isHc) {\r\n                    result.colors['editor.selectionBackground'] = focusBorder;\r\n                } else {\r\n                    result.colors['editor.selectionBackground'] = chroma(focusBorder).alpha(0.8).css();\r\n                }\r\n            }\r\n            if (!result.colors['editor.selectionHighlightBackground']) {\r\n                result.colors['editor.selectionHighlightBackground'] = transparent;\r\n            }\r\n            if (!result.colors['editor.selectionHighlightBorder']) {\r\n                if (isHc) {\r\n                    result.colors['editor.selectionHighlightBorder'] = contrastActiveBorder;\r\n                } else if (result.colors['editor.selectionHighlightBackground'] === transparent) {\r\n                    result.colors['editor.selectionHighlightBorder'] = focusBorder;\r\n                }\r\n            }\r\n            if (!result.colors['editor.findMatchBackground']) {\r\n                result.colors['editor.findMatchBackground'] = result.colors['editor.selectionBackground'];\r\n            }\r\n            if (!result.colors['editor.findMatchBorder']) {\r\n                result.colors['editor.findMatchBorder'] = transparent;\r\n            }\r\n            if (!result.colors['editor.findMatchHighlightBackground']) {\r\n                result.colors['editor.findMatchHighlightBackground'] = result.colors['editor.selectionHighlightBackground'];\r\n            }\r\n            if (!result.colors['editor.findMatchHighlightBorder']) {\r\n                result.colors['editor.findMatchHighlightBorder'] = result.colors['editor.selectionHighlightBorder'];\r\n            }\r\n            if (!result.colors['editor.lineHighlightBackground']) {\r\n                result.colors['editor.lineHighlightBackground'] = transparent;\r\n            }\r\n            if (!result.colors['editor.lineHighlightBorder']) {\r\n                if (result.colors['editor.lineHighlightBackground'] !== transparent) {\r\n                    result.colors['editor.lineHighlightBorder'] = transparent;\r\n                } else if (isHc) {\r\n                    result.colors['editor.lineHighlightBorder'] = contrastActiveBorder;\r\n                } else if (isLight) {\r\n                    result.colors['editor.lineHighlightBorder'] = 'rgba(0,0,0,0.2)';\r\n                } else {\r\n                    result.colors['editor.lineHighlightBorder'] = 'rgba(255,255,255,0.1)';\r\n                }\r\n            }\r\n            if (!result.colors['editorWhitespace.foreground']) {\r\n                if (isHc) {\r\n                    result.colors['editorWhitespace.foreground'] = result.colors['editor.foreground'];\r\n                } else if (isLight) {\r\n                    result.colors['editorWhitespace.foreground'] = 'rgba(0,0,0,0.2)';\r\n                } else {\r\n                    result.colors['editorWhitespace.foreground'] = 'rgba(255,255,255,0.1)';\r\n                }\r\n            }\r\n            if (!result.colors['editorIndentGuide.background']) {\r\n                result.colors['editorIndentGuide.background'] = result.colors['editorWhitespace.foreground'];\r\n            }\r\n            if (!result.colors['editorBracketMatch.background']) {\r\n                result.colors['editorBracketMatch.background'] = transparent;\r\n            }\r\n            if (!result.colors['editorBracketMatch.border']) {\r\n                if (result.colors['editorBracketMatch.background'] === transparent) {\r\n                    result.colors['editorBracketMatch.border'] = chroma(result.colors['editor.foreground']).alpha(0.6).css();\r\n                } else {\r\n                    result.colors['editorBracketMatch.border'] = transparent;\r\n                }\r\n            }\r\n        }\r\n        // tab\r\n        function _tab() {\r\n            if (!result.colors['editorGroupHeader.tabsBackground']) {\r\n                if (isHc) {\r\n                    result.colors['editorGroupHeader.tabsBackground'] = transparent;\r\n                } else {\r\n                    result.colors['editorGroupHeader.tabsBackground'] = result.colors['sideBar.background'];\r\n                }\r\n            }\r\n            if (!result.colors['editorGroupHeader.tabsBackground']) {\r\n                result.colors['editorGroupHeader.tabsBackground'] = contrastBorder;\r\n            }\r\n            if (!result.colors['tab.border']) {\r\n                result.colors['tab.border'] = contrastBorder;\r\n            }\r\n            if (!result.colors['tab.activeForeground']) {\r\n                if (isHc) {\r\n                    result.colors['tab.activeForeground'] = foreground;\r\n                } else if (isLight) {\r\n                    result.colors['tab.activeForeground'] = 'rgba(51, 51, 51)';\r\n                } else {\r\n                    result.colors['tab.activeForeground'] = '#fff';\r\n                }\r\n            }\r\n            if (!result.colors['tab.activeBackground']) {\r\n                result.colors['tab.activeBackground'] = result.colors['editor.background'];\r\n            }\r\n            if (!result.colors['tab.inactiveForeground']) {\r\n                if (isHc) {\r\n                    result.colors['tab.inactiveForeground'] = foreground;\r\n                } else if (isLight) {\r\n                    result.colors['tab.inactiveForeground'] = 'rgba(51, 51, 51, 0.7)';\r\n                } else {\r\n                    result.colors['tab.inactiveForeground'] = 'rgba(255, 255, 255, 0.5)';\r\n                }\r\n            }\r\n            if (!result.colors['tab.inactiveBackground']) {\r\n                if (isHc) {\r\n                    result.colors['tab.inactiveBackground'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['tab.inactiveBackground'] = 'rgb(236, 236, 236)';\r\n                } else {\r\n                    result.colors['tab.inactiveBackground'] = 'rgb(45, 45, 45)';\r\n                }\r\n            }\r\n            if (!result.colors['tab.activeBorder']) {\r\n                result.colors['tab.activeBorder'] = transparent;\r\n            }\r\n            if (!result.colors['tab.activeBorderTop']) {\r\n                result.colors['tab.activeBorderTop'] = transparent;\r\n            }\r\n            if (!result.colors['tab.hoverForeground']) {\r\n                result.colors['tab.hoverForeground'] = result.colors['tab.inactiveForeground'];\r\n            }\r\n            if (!result.colors['tab.hoverBackground']) {\r\n                result.colors['tab.hoverBackground'] = transparent;\r\n            }\r\n            if (!result.colors['tab.hoverBorder']) {\r\n                result.colors['tab.hoverBorder'] = transparent;\r\n            }\r\n        }\r\n        // editorWidget\r\n        function _editorWidget() {\r\n            if (!result.colors['editorWidget.foreground']) {\r\n                result.colors['editorWidget.foreground'] = result.colors['editor.foreground'];\r\n            }\r\n            if (!result.colors['editorWidget.background']) {\r\n                if (isHc) {\r\n                    result.colors['editorWidget.background'] = background;\r\n                } else if (isLight) {\r\n                    result.colors['editorWidget.background'] = '#eee';\r\n                } else {\r\n                    result.colors['editorWidget.background'] = 'rgb(37,37,38)';\r\n                }\r\n            }\r\n            if (!result.colors['editorWidget.border']) {\r\n                if (isHc) {\r\n                    result.colors['editorWidget.border'] = contrastBorder;\r\n                } else {\r\n                    result.colors['editorWidget.border'] = transparent;\r\n                }\r\n            }\r\n            if (!result.colors['editorSuggestWidget.foreground']) {\r\n                result.colors['editorSuggestWidget.foreground'] = result.colors['editorWidget.foreground'];\r\n            }\r\n            if (!result.colors['editorSuggestWidget.background']) {\r\n                result.colors['editorSuggestWidget.background'] = result.colors['editorWidget.background'];\r\n            }\r\n            if (!result.colors['editorSuggestWidget.border']) {\r\n                result.colors['editorSuggestWidget.border'] = result.colors['editorWidget.border'];\r\n            }\r\n            if (result.colors['editorSuggestWidget.border'] === transparent) {\r\n                result.colors['editorSuggestWidget.shadow'] = result.colors['widget.shadow'];\r\n            } else {\r\n                result.colors['editorSuggestWidget.shadow'] = transparent;\r\n            }\r\n            if (!result.colors['editorSuggestWidget.selectedForeground']) {\r\n                result.colors['editorSuggestWidget.selectedForeground'] = result.colors['editor.foreground'];\r\n            }\r\n            if (!result.colors['editorSuggestWidget.selectedBackground']) {\r\n                result.colors['editorSuggestWidget.selectedBackground'] = result.colors['quickInputList.focusBackground'];\r\n            }\r\n            if (!result.colors['editorSuggestWidget.highlightForeground']) {\r\n                result.colors['editorSuggestWidget.highlightForeground'] = result.colors['list.highlightForeground'];\r\n            }\r\n            if (!result.colors['editorSuggestWidget.focusHighlightForeground']) {\r\n                result.colors['editorSuggestWidget.focusHighlightForeground'] = result.colors['list.highlightForeground'];\r\n            }\r\n        }\r\n        // input\r\n        function _input() {\r\n            if (!result.colors['input.foreground']) {\r\n                result.colors['input.foreground'] = foreground;\r\n            }\r\n            if (!result.colors['input.background']) {\r\n                if (isHc) {\r\n                    result.colors['input.background'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['input.background'] = '#fff';\r\n                } else {\r\n                    result.colors['input.background'] = background;\r\n                }\r\n            }\r\n            if (!result.colors['input.border']) {\r\n                if (result.colors['input.background'] === transparent) {\r\n                    result.colors['input.border'] = '#0066b8';\r\n                } else {\r\n                    result.colors['input.border'] = transparent;\r\n                }\r\n            }\r\n            if (!result.colors['inputOption.activeForeground']) {\r\n                result.colors['inputOption.activeForeground'] = foreground;\r\n            }\r\n            if (!result.colors['inputOption.activeBackground']) {\r\n                if (isHc) {\r\n                    result.colors['inputOption.activeBackground'] = transparent;\r\n                } else {\r\n                    result.colors['inputOption.activeBackground'] = chroma(focusBorder).alpha(0.3).css();\r\n                }\r\n            }\r\n            if (!result.colors['inputOption.activeBorder']) {\r\n                result.colors['inputOption.activeBorder'] = transparent;\r\n            }\r\n            if (!result.colors['inputOption.hoverBackground']) {\r\n                if (isHc) {\r\n                    result.colors['inputOption.hoverBackground'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['inputOption.hoverBackground'] = 'rgba(0,0,0,0.1)';\r\n                } else {\r\n                    result.colors['inputOption.hoverBackground'] = 'rgba(255,255,255,0.1)';\r\n                }\r\n            }\r\n        }\r\n        // toolbar\r\n        function _toolbar() {\r\n            if (!result.colors['toolbar.hoverBackground']) {\r\n                if (isHc) {\r\n                    result.colors['toolbar.hoverBackground'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['toolbar.hoverBackground'] = 'rgba(0,0,0,0.1)';\r\n                } else {\r\n                    result.colors['toolbar.hoverBackground'] = 'rgba(255,255,255,0.1)';\r\n                }\r\n            }\r\n            if (!result.colors['toolbar.activeBackground']) {\r\n                result.colors['toolbar.activeBackground'] = transparent;\r\n            }\r\n            if (!result.colors['toolbar.hoverOutline']) {\r\n                result.colors['toolbar.hoverOutline'] = contrastActiveBorder;\r\n            }\r\n        }\r\n    }\r\n}\r\n","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n    <div @mousedown.stop class=\"my-cmd-panel my-list\" v-if=\"visible\">\r\n        <div>\r\n            <div class=\"my-cmd-search\">\r\n                <input type=\"text\" v-model=\"searchText\" ref=\"input\" />\r\n            </div>\r\n            <div>\r\n                <Menu\r\n                    :checkable=\"true\"\r\n                    :menuList=\"cmdList\"\r\n                    :value=\"value\"\r\n                    @change=\"onChange\"\r\n                    style=\"position: relative\"\r\n                    class=\"my-scroll-overlay my-scroll-mini\"\r\n                    spellcheck=\"false\"\r\n                ></Menu>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Util from '@/common/util';\r\nimport Theme from '@/module/theme';\r\nimport Menu from './Menu';\r\nimport EventBus from '@/event';\r\n\r\nexport default {\r\n    name: 'CmdPanel',\r\n    components: {\r\n        Menu,\r\n    },\r\n    data() {\r\n        return {\r\n            searchText: '',\r\n            cmdList: [],\r\n            visible: false,\r\n        };\r\n    },\r\n    watch: {\r\n        searchText() {\r\n            this.searchMenu();\r\n        },\r\n    },\r\n    created() {\r\n        this.theme = new Theme();\r\n        this.initEventBus();\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on('close-menu', () => {\r\n                this.visible = false;\r\n            });\r\n            EventBus.$on('open-cmd-menu', (data) => {\r\n                this.visible = true;\r\n                this.searchText = '';\r\n                this.originCmdList = data.cmdList;\r\n                this.value = data.value;\r\n                if (this.originCmdList[0] && !(this.originCmdList[0] instanceof Array)) {\r\n                    this.originCmdList = [this.originCmdList];\r\n                }\r\n                this.searchMenu();\r\n                requestAnimationFrame(() => {\r\n                    this.$refs.input.focus();\r\n                });\r\n            });\r\n        },\r\n        searchMenu() {\r\n            if (this.searchText) {\r\n                let menu = [];\r\n                this.originCmdList[0].forEach((item) => {\r\n                    let result = Util.fuzzyMatch(this.searchText, item.name, true);\r\n                    if (result) {\r\n                        menu.push([item, result]);\r\n                    }\r\n                });\r\n                menu = menu\r\n                    .sort((a, b) => {\r\n                        return b[1].score - a[1].score;\r\n                    })\r\n                    .map((item) => {\r\n                        return item[0];\r\n                    });\r\n                this.cmdList = [menu];\r\n            } else {\r\n                this.cmdList = this.originCmdList.slice();\r\n            }\r\n        },\r\n        onChange(item) {\r\n            switch (item.op) {\r\n                case 'changeTheme':\r\n                    this.theme.loadTheme(item);\r\n                    break;\r\n                case 'changeIconTheme':\r\n                    this.theme.loadIconTheme(item);\r\n                    break;\r\n                case 'selectLanguage':\r\n                    EventBus.$emit('language-change', item.value);\r\n                    break;\r\n            }\r\n            this.visible = false;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./CmdPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./CmdPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CmdPanel.vue?vue&type=template&id=3ba36677&\"\nimport script from \"./CmdPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./CmdPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div\r\n        :style=\"{\r\n            'padding-top': _topBarHeight,\r\n            'padding-bottom': _statusHeight,\r\n        }\"\r\n        @mousedown=\"onWindMouseDown\"\r\n        class=\"my-window\"\r\n        ref=\"window\"\r\n    >\r\n        <!-- 侧边栏 -->\r\n        <side-bar ref=\"sideBar\" v-if=\"mode === 'app'\"></side-bar>\r\n        <div @contextmenu.prevent.stop=\"onContextmenu\" class=\"my-right-wrap\" ref=\"rightWrap\">\r\n            <!-- tab栏 -->\r\n            <editor-bar\r\n                :editorList=\"editorList\"\r\n                @change=\"onChangeTab\"\r\n                @close=\"onCloseTab\"\r\n                @close-all=\"onCloseAll\"\r\n                @close-saved=\"onCloseSaved\"\r\n                @close-to-left=\"onCloseToLeft\"\r\n                @close-to-right=\"onCloseToRight\"\r\n                v-show=\"editorList.length\"\r\n            ></editor-bar>\r\n            <!-- 编辑区 -->\r\n            <template v-for=\"item in editorList\">\r\n                <editor :active=\"item.active\" :id=\"item.id\" :key=\"item.id\" :ref=\"'editor' + item.id\" @change=\"onFileChange(item.id)\" @save=\"onSaveFile(item.id)\" v-show=\"item.active\"></editor>\r\n            </template>\r\n            <window-menu ref=\"winMenu\"></window-menu>\r\n        </div>\r\n        <!-- 顶部菜单栏 -->\r\n        <title-bar :height=\"topBarHeight\" @change=\"onMenuChange\" ref=\"titleBar\"></title-bar>\r\n        <!-- 状态栏 -->\r\n        <status-bar :height=\"statusHeight\" :languageList=\"languageList\" ref=\"statusBar\" @select-langeuage=\"onSelectLanguage\"></status-bar>\r\n        <cmd-panel></cmd-panel>\r\n        <Dialog\r\n            :btns=\"dialogBtns\"\r\n            :content=\"dialogContent\"\r\n            :icon=\"this.dialogIcon\"\r\n            :icon-color=\"this.dialogIconColor\"\r\n            :overlay=\"true\"\r\n            :title=\"dialogTilte\"\r\n            @close=\"onDialogClose\"\r\n            v-show=\"dialogVisible\"\r\n        ></Dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nimport EditorBar from './EditorBar.vue';\r\nimport Editor from './Editor.vue';\r\nimport TitleBar from './TitleBar';\r\nimport StatusBar from './StatusBar';\r\nimport SideBar from './SideBar.vue';\r\nimport Dialog from './Dialog.vue';\r\nimport WindowMenu from './WindowMenu.vue';\r\nimport CmdPanel from './CmdPanel.vue';\r\nimport Context from '@/module/context/index';\r\nimport Theme from '@/module/theme';\r\nimport EventBus from '@/event';\r\nimport Util from '@/common/util';\r\nimport globalData from '@/data/globalData';\r\nimport stripJsonComments from 'strip-json-comments';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nconst fs = require('fs');\r\nconst path = require('path');\r\nconst remote = require('@electron/remote');\r\nconst contexts = Context.contexts;\r\n\r\nexport default {\r\n    components: {\r\n        Editor,\r\n        EditorBar,\r\n        TitleBar,\r\n        StatusBar,\r\n        SideBar,\r\n        Dialog,\r\n        WindowMenu,\r\n        CmdPanel,\r\n    },\r\n    data() {\r\n        return {\r\n            extensionsPath: path.join(globalData.dirname, 'main/extensions'),\r\n            languageList: [],\r\n            statusHeight: 30,\r\n            topBarHeight: 35,\r\n            nowId: null,\r\n            idCount: 1,\r\n            titleCount: 1,\r\n            editorList: [],\r\n            dialogTilte: '',\r\n            dialogContent: '',\r\n            dialogVisible: false,\r\n            dialogBtns: [],\r\n            dialogIcon: '',\r\n            dialogIconColor: '',\r\n            mode: remote ? 'app' : 'mode',\r\n        };\r\n    },\r\n    computed: {\r\n        _topBarHeight() {\r\n            return this.topBarHeight + 'px';\r\n        },\r\n        _statusHeight() {\r\n            return this.statusHeight + 'px';\r\n        },\r\n    },\r\n    provide() {\r\n        return {\r\n            getNowEditor: () => {\r\n                return this.getNowEditor();\r\n            },\r\n            getNowContext: () => {\r\n                return this.getNowContext();\r\n            },\r\n            openFile: (fileObj, choseFile) => {\r\n                this.openFile(fileObj, choseFile);\r\n            },\r\n            openFolder: () => {\r\n                this.openFolder();\r\n            },\r\n        };\r\n    },\r\n    created() {\r\n        window.globalData = globalData;\r\n        if (this.mode === 'app') {\r\n            const currentWindow = remote.getCurrentWindow();\r\n            currentWindow.on('blur', () => {\r\n                EventBus.$emit('close-menu');\r\n            });\r\n        }\r\n        this.initEventBus();\r\n    },\r\n    mounted() {\r\n        window.test = this;\r\n        const theme = new Theme();\r\n        theme.loadTheme(globalData.nowTheme);\r\n        this.openFile();\r\n        this.loadExtensions().then((result) => {\r\n            let langeuages = result.languages;\r\n            let themes = result.themes;\r\n            let iconThemes = result.iconThemes;\r\n            let scopeFileList = result.scopeFileList;\r\n            langeuages.push({ name: 'Plain Text', value: '', checked: true });\r\n            globalData.languageList = langeuages.slice();\r\n            globalData.scopeFileList = scopeFileList.slice();\r\n            globalData.themes = themes.slice();\r\n            globalData.iconThemes = iconThemes.slice();\r\n            this.languageList = langeuages;\r\n            this.checkLanguage();\r\n            // loadIconTheme需要用到globalData.languageList\r\n            theme.loadIconTheme(globalData.nowIconTheme);\r\n        });\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            let iconFn = (value) => {\r\n                this.editorList.forEach((item) => {\r\n                    if (value) {\r\n                        let icon = Util.getIconByPath(globalData.nowIconData, item.path, globalData.nowTheme.type);\r\n                        item.icon = icon ? `my-file-icon my-file-icon-${icon}` : '';\r\n                    } else {\r\n                        item.icon = '';\r\n                    }\r\n                });\r\n                this.editorList.splice();\r\n            };\r\n            EventBus.$on('icon-change', iconFn);\r\n            EventBus.$on('theme-change', iconFn);\r\n        },\r\n        onContextmenu(e) {\r\n            // EventBus.$emit('open-win-menu');\r\n        },\r\n        // 点击编辑器\r\n        onWindMouseDown() {\r\n            EventBus.$emit('close-menu');\r\n        },\r\n        onChangeTab(id) {\r\n            let tab = this.getTabById(id);\r\n            if (!tab.active) {\r\n                this.editorList.forEach((item) => {\r\n                    item.active = false;\r\n                });\r\n                tab.active = true;\r\n                this.nowId = id;\r\n                this.changeStatus();\r\n            } else {\r\n                this.getNowEditor().focus();\r\n            }\r\n        },\r\n        onCloseTab(id) {\r\n            if (!this.nowId) {\r\n                return;\r\n            }\r\n            let tab = this.getTabById(id || this.nowId);\r\n            let index = this.editorList.indexOf(tab);\r\n            if (!tab.saved) {\r\n                this.showDialog({\r\n                    content: '文件尚未保存，是否先保存文件？',\r\n                    cancel: true,\r\n                    icon: 'my-icon-warn',\r\n                    iconColor: 'rgba(255,196,0)',\r\n                    btns: [\r\n                        {\r\n                            name: '保存',\r\n                            callback: () => {\r\n                                if (this.mode === 'app') {\r\n                                    this.onSaveFile(id).then(() => {\r\n                                        _closeTab.call(this);\r\n                                        this.onDialogClose();\r\n                                    });\r\n                                } else {\r\n                                    _closeTab.call(this);\r\n                                    this.onDialogClose();\r\n                                }\r\n                            },\r\n                        },\r\n                        {\r\n                            name: '不保存',\r\n                            callback: () => {\r\n                                _closeTab.call(this);\r\n                                this.onDialogClose();\r\n                            },\r\n                        },\r\n                    ],\r\n                });\r\n            } else {\r\n                _closeTab.call(this);\r\n            }\r\n\r\n            function _closeTab() {\r\n                this.editorList.splice(index, 1);\r\n                contexts[id] = null;\r\n                if (tab.active) {\r\n                    tab.active = false;\r\n                    tab = this.editorList[index] || this.editorList[index - 1];\r\n                    if (tab) {\r\n                        this.onChangeTab(tab.id);\r\n                    } else {\r\n                        this.nowId = null;\r\n                        EventBus.$emit('tab-change', null);\r\n                    }\r\n                } else {\r\n                    this.getNowEditor().focus();\r\n                }\r\n            }\r\n        },\r\n        onCloseAll() {\r\n            this.editorList = this.editorList.filter((item) => {\r\n                return !item.saved;\r\n            });\r\n            this.editorList.forEach((item) => {\r\n                this.onCloseTab(item.id);\r\n            });\r\n            this.nowId = null;\r\n        },\r\n        onCloseSaved() {\r\n            this.editorList.slice().forEach((item) => {\r\n                if (item.saved) {\r\n                    this.onCloseTab(item.id);\r\n                }\r\n            });\r\n        },\r\n        onCloseToLeft(id) {\r\n            let tab = null;\r\n            id = id || this.nowId;\r\n            while ((tab = this.editorList[0])) {\r\n                if (tab.id !== id) {\r\n                    this.onCloseTab(tab.id);\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        onCloseToRight(id) {\r\n            let tab = null;\r\n            id = id || this.nowId;\r\n            while ((tab = this.editorList.peek())) {\r\n                if (tab.id !== id) {\r\n                    this.onCloseTab(tab.id);\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        onMenuChange(item) {\r\n            let cmdList = null;\r\n            switch (item.op) {\r\n                case 'changeTheme':\r\n                    cmdList = globalData.themes.map((item) => {\r\n                        return item.map((item) => {\r\n                            return Object.assign({ op: 'changeTheme' }, item);\r\n                        });\r\n                    });\r\n                    EventBus.$emit('open-cmd-menu', {\r\n                        cmdList: cmdList,\r\n                        value: globalData.nowTheme.value,\r\n                    });\r\n                    break;\r\n                case 'changeIconTheme':\r\n                    cmdList = globalData.iconThemes.map((item) => {\r\n                        return Object.assign({ op: 'changeIconTheme' }, item);\r\n                    });\r\n                    cmdList.push({\r\n                        name: 'None',\r\n                        value: 'none',\r\n                        op: 'changeIconTheme',\r\n                    });\r\n                    EventBus.$emit('open-cmd-menu', {\r\n                        cmdList: cmdList,\r\n                        value: globalData.nowIconTheme.value,\r\n                    });\r\n                    break;\r\n            }\r\n        },\r\n        onSelectLanguage() {\r\n            let cmdList = globalData.languageList.map((item) => {\r\n                return {\r\n                    op: 'selectLanguage',\r\n                    name: item.name + (item.language ? `（${item.language}）` : ''),\r\n                    value: item.value,\r\n                };\r\n            });\r\n            EventBus.$emit('open-cmd-menu', {\r\n                cmdList: cmdList,\r\n                value: this.nowId && this.getNowEditor().language,\r\n            });\r\n        },\r\n        onFileChange(id) {\r\n            let tab = this.getTabById(id);\r\n            tab.saved = false;\r\n        },\r\n        onSaveFile(id) {\r\n            let tab = this.getTabById(id);\r\n            if (this.mode === 'web') {\r\n                return Promise.resolve();\r\n            }\r\n            if (!tab.saved) {\r\n                if (tab.path) {\r\n                    this.writeFile(tab.path, contexts[id].getAllText());\r\n                    tab.saved = true;\r\n                    return Promise.resolve();\r\n                } else {\r\n                    let win = remote.getCurrentWindow();\r\n                    let options = {\r\n                        title: '请选择要保存的文件名',\r\n                        buttonLabel: '保存',\r\n                    };\r\n                    return remote.dialog.showSaveDialog(win, options).then((result) => {\r\n                        if (!result.canceled && result.filePath) {\r\n                            tab.path = result.filePath;\r\n                            tab.name = tab.path.match(/[^\\\\\\/]+$/)[0];\r\n                            this.writeFile(tab.path, contexts[id].getAllText());\r\n                            tab.saved = true;\r\n                        } else {\r\n                            return Promise.reject();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        onDialogClose() {\r\n            this.dialogVisible = false;\r\n        },\r\n        openFolder() {\r\n            this.choseFolder().then((results) => {\r\n                if (results) {\r\n                    this.$refs.sideBar.list = results;\r\n                    this.editorList = [];\r\n                    this.nowId = null;\r\n                }\r\n            });\r\n        },\r\n        choseFolder() {\r\n            let win = remote.getCurrentWindow();\r\n            let options = {\r\n                title: '选择文件夹',\r\n                properties: ['openDirectory', 'multiSelections'],\r\n            };\r\n            return remote.dialog\r\n                .showOpenDialog(win, options)\r\n                .then((result) => {\r\n                    let results = [];\r\n                    if (!result.canceled && result.filePaths) {\r\n                        result.filePaths.forEach((item) => {\r\n                            let obj = {\r\n                                name: item.match(/[^\\\\\\/]+$/)[0],\r\n                                path: item,\r\n                                type: 'dir',\r\n                                active: false,\r\n                                open: false,\r\n                                children: [],\r\n                            };\r\n                            results.push(Object.assign({}, obj));\r\n                        });\r\n                        return results;\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n        openFile(fileObj, choseFile) {\r\n            let tab = fileObj && this.getTabByPath(fileObj.path);\r\n            if (!tab) {\r\n                let index = -1;\r\n                let name = (fileObj && fileObj.name) || `Untitled${this.titleCount++}`;\r\n                if (this.editorList.length) {\r\n                    tab = this.getTabById(this.nowId);\r\n                    index = this.editorList.indexOf(tab);\r\n                }\r\n                if (choseFile) {\r\n                    //从资源管理器中选择文件\r\n                    this.choseFile().then((results) => {\r\n                        if (results) {\r\n                            tab = results[0];\r\n                            this.editorList = this.editorList.slice(0, index).concat(results).concat(this.editorList.slice(index));\r\n                            _done.call(this);\r\n                        }\r\n                    });\r\n                } else {\r\n                    tab = {\r\n                        id: this.idCount++,\r\n                        name: name,\r\n                        path: (fileObj && fileObj.path) || '',\r\n                        icon: (fileObj && fileObj.icon) || '',\r\n                        saved: true,\r\n                        active: false,\r\n                    };\r\n                    if (!tab.icon) {\r\n                        let icon = Util.getIconByPath(globalData.nowIconData, '', globalData.nowTheme.type);\r\n                        tab.icon = icon ? `my-file-icon my-file-icon-${icon}` : '';\r\n                    }\r\n                    this.editorList.splice(index + 1, 0, tab);\r\n                    _done.call(this);\r\n                }\r\n            } else {\r\n                _done.call(this);\r\n            }\r\n\r\n            function _done() {\r\n                this.$nextTick(() => {\r\n                    if (tab && tab.path && !tab.loaded) {\r\n                        fs.readFile(tab.path, { encoding: 'utf8' }, (err, data) => {\r\n                            if (err) {\r\n                                throw err;\r\n                            }\r\n                            this.getContext(tab.id).insertContent(data);\r\n                            tab.saved = true;\r\n                            tab.loaded = true;\r\n                        });\r\n                    }\r\n                    this.onChangeTab(tab.id);\r\n                    this.checkLanguage();\r\n                });\r\n            }\r\n        },\r\n        choseFile() {\r\n            let win = remote.getCurrentWindow();\r\n            let options = {\r\n                title: '选择文件',\r\n                properties: ['openFile', 'multiSelections'],\r\n            };\r\n            return remote.dialog\r\n                .showOpenDialog(win, options)\r\n                .then((result) => {\r\n                    let results = [];\r\n                    if (!result.canceled && result.filePaths) {\r\n                        result.filePaths.forEach((item) => {\r\n                            let icon = Util.getIconByPath(globalData.nowIconData, item, globalData.nowTheme.type);\r\n                            icon = icon ? `my-file-icon my-file-icon-${icon}` : '';\r\n                            let obj = {\r\n                                id: this.idCount++,\r\n                                name: item.match(/[^\\\\\\/]+$/)[0],\r\n                                path: item,\r\n                                icon: icon,\r\n                                saved: true,\r\n                                active: false,\r\n                            };\r\n                            results.push(Object.assign({}, obj));\r\n                        });\r\n                        return results;\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n        sortFileList() {\r\n            this.list.sort((a, b) => {\r\n                if (a.type === b.type) {\r\n                    if (a.name === b.name) {\r\n                        return 0;\r\n                    } else if (a.name > b.name) {\r\n                        return 1;\r\n                    } else {\r\n                        return -1;\r\n                    }\r\n                }\r\n                if (a.type === 'dir') {\r\n                    return -1;\r\n                }\r\n                return 1;\r\n            });\r\n        },\r\n        showDialog(option) {\r\n            this.dialogTilte = option.title || '';\r\n            this.dialogContent = option.content || '';\r\n            this.dialogBtns = option.btns;\r\n            this.dialogVisible = true;\r\n            this.dialogIconColor = option.iconColor || '';\r\n            this.dialogIcon = option.icon || '';\r\n        },\r\n        writeFile(path, text) {\r\n            fs.writeFileSync(path, text, { encoding: 'utf-8' });\r\n        },\r\n        changeStatus() {\r\n            let changStatusId = this.changeStatus.id || 1;\r\n            this.changeStatus.id = changStatusId;\r\n            this.$nextTick(() => {\r\n                if (this.changeStatus.id !== changStatusId) {\r\n                    return;\r\n                }\r\n                let editor = this.getNowEditor();\r\n                let tab = this.getTabById(this.nowId);\r\n                EventBus.$emit(`tab-change`, {\r\n                    path: tab.path,\r\n                    language: editor.language,\r\n                    tabSize: editor.tabSize,\r\n                    line: editor.nowCursorPos ? editor.nowCursorPos.line : '?',\r\n                    column: editor.nowCursorPos ? editor.nowCursorPos.column : '?',\r\n                });\r\n            });\r\n        },\r\n        // 检查当前打开的文件的语言\r\n        checkLanguage() {\r\n            if (this.nowId) {\r\n                let tab = this.getTabById(this.nowId);\r\n                let suffix = /\\.[^\\.]+$/.exec(tab.name);\r\n                if (!suffix) {\r\n                    return;\r\n                }\r\n                for (let i = 0; i < this.languageList.length; i++) {\r\n                    let language = this.languageList[i];\r\n                    if (language.extensions && language.extensions.indexOf(suffix[0]) > -1) {\r\n                        this.$nextTick(() => {\r\n                            EventBus.$emit('language-change', language.value);\r\n                        });\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        // 加载语言支持\r\n        loadExtensions() {\r\n            let languages = [];\r\n            let scopeFileList = [];\r\n            let themes = [[], [], [], []];\r\n            let iconThemes = [];\r\n            return new Promise((resolve) => {\r\n                // 异步读取目录内容\r\n                fs.readdir(this.extensionsPath, { encoding: 'utf8' }, (err, files) => {\r\n                    if (err) {\r\n                        throw err;\r\n                    }\r\n                    const promises = [];\r\n                    files.forEach((item, index) => {\r\n                        let fullPath = path.join(this.extensionsPath, item);\r\n                        let packPath = path.join(fullPath, './package.json');\r\n                        let varConfigPath = path.join(fullPath, './package.nls.json');\r\n                        if (fs.existsSync(varConfigPath)) {\r\n                            promises.push(\r\n                                _readVarFile(varConfigPath).then((varMap) => {\r\n                                    return _readConfigFile(packPath, fullPath, varMap);\r\n                                })\r\n                            );\r\n                        } else if (fs.existsSync(packPath)) {\r\n                            promises.push(_readConfigFile(packPath, fullPath));\r\n                        }\r\n                    });\r\n                    Promise.all(promises).then(() => {\r\n                        themes = themes.filter((item) => {\r\n                            return item.length;\r\n                        });\r\n                        resolve({\r\n                            languages: languages,\r\n                            scopeFileList: scopeFileList,\r\n                            themes: themes,\r\n                            iconThemes: iconThemes,\r\n                        });\r\n                    });\r\n                });\r\n            });\r\n\r\n            function _readVarFile(varConfigPath) {\r\n                return Util.loadJsonFile(varConfigPath);\r\n            }\r\n\r\n            function _readConfigFile(packPath, fullPath, varMap) {\r\n                return Util.loadJsonFile(packPath).then((data) => {\r\n                    let contributes = data.contributes;\r\n                    _addLanguage(contributes, fullPath, varMap);\r\n                    _addTheme(contributes, fullPath, varMap);\r\n                    _addIconTheme(contributes, fullPath, varMap);\r\n                });\r\n            }\r\n\r\n            function _addLanguage(contributes, fullPath) {\r\n                let grammars = contributes.grammars;\r\n                let list = contributes.languages || [];\r\n                list.map((language) => {\r\n                    for (let i = 0; i < grammars.length; i++) {\r\n                        let grammar = grammars[i];\r\n                        scopeFileList.push({\r\n                            scopeName: grammar.scopeName,\r\n                            path: path.join(fullPath, grammar.path),\r\n                            configPath: language.configuration ? path.join(fullPath, language.configuration) : '',\r\n                        });\r\n                        if (language.id === grammar.language) {\r\n                            let name = language.aliases && language.aliases[0];\r\n                            name = name || grammar.language;\r\n                            languages.push({\r\n                                name: name,\r\n                                value: grammar.language,\r\n                                language: grammar.language,\r\n                                scopeName: grammar.scopeName,\r\n                                path: path.join(fullPath, grammar.path),\r\n                                configPath: language.configuration ? path.join(fullPath, language.configuration) : '',\r\n                                extensions: language.extensions,\r\n                            });\r\n                            break;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            function _addTheme(contributes, fullPath, varMap) {\r\n                let list = contributes.themes || [];\r\n                list.map((theme) => {\r\n                    let type = 'light';\r\n                    let index = 0;\r\n                    let label = _getValue(theme.label, varMap);\r\n                    switch (theme.uiTheme) {\r\n                        case 'vs-dark':\r\n                            type = 'dark';\r\n                            index = 1;\r\n                            break;\r\n                        case 'hc-light':\r\n                            type = 'contrast light';\r\n                            index = 2;\r\n                            break;\r\n                        case 'hc-black':\r\n                            type = 'contrast dark';\r\n                            index = 3;\r\n                            break;\r\n                    }\r\n                    themes[index].push({\r\n                        name: theme.id || label,\r\n                        value: label || theme.id,\r\n                        type: type,\r\n                        path: path.join(fullPath, theme.path),\r\n                    });\r\n                });\r\n            }\r\n\r\n            function _addIconTheme(contributes, fullPath, varMap) {\r\n                let list = contributes.iconThemes || [];\r\n                list.map((theme) => {\r\n                    let label = _getValue(theme.label, varMap);\r\n                    iconThemes.push({\r\n                        name: label || theme.id,\r\n                        value: theme.id || label,\r\n                        path: path.join(fullPath, theme.path),\r\n                    });\r\n                });\r\n            }\r\n\r\n            function _getValue(name, varMap) {\r\n                name = name || '';\r\n                if (name[0] === '%' && name[name.length - 1] === '%') {\r\n                    name = varMap[name.slice(1, -1)] || name;\r\n                }\r\n                return name;\r\n            }\r\n        },\r\n        getTabById(id) {\r\n            for (let i = 0; i < this.editorList.length; i++) {\r\n                if (this.editorList[i].id === id) {\r\n                    return this.editorList[i];\r\n                }\r\n            }\r\n        },\r\n        getTabByPath(path) {\r\n            for (let i = 0; i < this.editorList.length; i++) {\r\n                if (this.editorList[i].path === path) {\r\n                    return this.editorList[i];\r\n                }\r\n            }\r\n        },\r\n        getEditor(id) {\r\n            let editor = this.$refs[`editor${id}`];\r\n            return editor && editor[0];\r\n        },\r\n        getNowEditor() {\r\n            return this.getEditor(this.nowId);\r\n        },\r\n        getContext(id) {\r\n            return contexts[id];\r\n        },\r\n        getNowContext() {\r\n            return this.getContext(this.nowId);\r\n        },\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Window.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Window.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Window.vue?vue&type=template&id=7f036aae&\"\nimport script from \"./Window.vue?vue&type=script&lang=js&\"\nexport * from \"./Window.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div id=\"app\">\r\n        <Window></Window>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Window from './components/Window.vue';\r\nexport default {\r\n    name: 'App',\r\n    components: {\r\n        Window,\r\n    },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=34237f10&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\nimport App from './App.vue';\r\nimport axios from 'axios';\r\nimport './scss/index.scss';\r\n\r\nVue.config.productionTip = false;\r\nVue.prototype.$http = axios.create({\r\n    timeout: 1000 * 30,\r\n    withCredentials: true,\r\n    headers: {\r\n        'Content-Type': 'application/json; charset=utf-8',\r\n    },\r\n});\r\n\r\nnew Vue({\r\n    render: (h) => h(App),\r\n}).$mount('#app');\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmy_editor\"] = self[\"webpackChunkmy_editor\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(197); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","ref","staticClass","style","_topBarHeight","_statusHeight","on","onWindMouseDown","mode","_e","$event","preventDefault","stopPropagation","onContextmenu","apply","arguments","directives","name","rawName","value","editorList","expression","onChangeTab","onCloseTab","onCloseAll","onCloseSaved","onCloseToLeft","onCloseToRight","_l","item","key","id","refInFor","active","onFileChange","onSaveFile","topBarHeight","onMenuChange","statusHeight","languageList","onSelectLanguage","dialogBtns","dialogContent","dialogIcon","dialogIconColor","dialogTilte","onDialogClose","class","path","onClickItem","icon","_v","_s","onClose","saved","menuList","menuStyle","group","index","checkable","checked","disabled","onClick","onHover","shortcut","myMenuList","length","props","type","default","styles","hoverCheck","data","itemHeight","computed","visible","watch","created","mounted","$","destroyed","methods","initMenu","scrollToIndex","$scroller","setChecked","setCheckedByIndex","clearChecked","component","bus","Vue","components","Menu","op","menuVisible","left","top","initEventBus","EventBus","show","menuWidth","offset","e","require","window","parent","remote","dirname","app","getAppPath","globalData","scopeIdMap","scopeReg","colors","nowTheme","join","nowIconTheme","nowIconData","themes","iconThemes","scopeFileList","scopeTokenList","grammars","sourceWordMap","defaultWordPattern","fs","Util","clipboardData","Promise","resolve","getData","navigator","clipboard","readText","text","setData","writeText","String","replace","regex","r","exec","num","Number","tabSize","val","tmp","arr","sort","arg1","arg2","wrap","str1","str2","id1","getUUID","id2","$tempDom","append","dom","charWidth","scrollWidth","charHight","clientHeight","fontSize","getComputedStyle","currentStyle","fullAngleCharWidth","remove","str","charW","fullCharW","start","end","substr","substring","match","fullAngleReg","width","tabNum","getStrExactWidth","count","_splitStr","clientWidth","Math","floor","result","i","column","push","htmlTrans","slice","space","cont","targetObj","originObj","noDeepKeys","_assign","Map","assigned","indexOf","RegExp","nodeName","nodeType","has","get","Array","set","len","random","toString","line","funStr","blob","Blob","url","URL","createObjectURL","worker","Worker","target","context","properties","forEach","property","bind","Object","defineProperties","language","scopeName","wordPattern","getLanguageById","_wordPattern","pattern","iconData","fileType","opened","fileName","suffix1","suffix2","light","folderExpanded","folder","fileNames","fileExtensions","file","reject","readFile","error","fullPath","then","stripJsonComments","replaceAll","JSON","parse","word","fullMatch","wordMap","towMap","wordLength","score","preFinedChar","preFinedOriginChar","preFinded","targetMap","indexs","_target","toLowerCase","_setMap","originChar","char","_humpCheck","_complete","fuzzyMatch","cache","preChar","keys","preCode","charCodeAt","charCode","prototype","peek","empty","insert","right","mid","splice","keyCode","DELETE","BACKSPACE","command","INSERT","MOVEUP","MOVEDOWN","COPY_UP","COPY_DOWN","DELETE_COPY_UP","DELETE_COPY_DOWN","REPLACE","INSERT_LINE","DELETE_LINE","constData","LINE_COMMENT","BLOCK_COMMENT","BRACKET","TAG","constructor","editorBar","initProperties","onKeyDown","ctrlKey","pressK","$emit","EditorBarMenu","list","provide","rootList","$tab","onWheel","_numTop","staticStyle","maxLine","nowCursorPos","height","_lineHeight","fold","onToggleFold","_leftShadow","onScroll","minWidth","_contentMinWidth","contentHeight","onContentMdown","onContentMmove","onContentMLeave","onSelectend","_top","_activeLine","selected","isFsearch","selectedFg","domProps","html","bracketMatch","range","tab","_tabLineLeft","visibility","_cursorVisible","_textAreaPos","onBlur","onCompositionend","onCompositionstart","onCopy","onCut","onFocus","onInput","onPaste","autoTipList","autoTipStyle","onClickAuto","searchCount","searchNow","onCloseSearch","onSearchNext","onSearchPrev","onSearch","onClickMenu","tipContent","tipStyle","regs","stringToken","editor","currentLine","initRegistry","initLanguage","wasmBin","readFileSync","buffer","vscodeOnigurumaLib","oniguruma","createOnigScanner","patterns","createOnigString","s","registry","vsctm","onigLib","loadGrammar","configPath","sourceFoldMap","hasTextGrammar","startsWith","initLanguageConifg","grammar","foldType","tokenizeVisibleLins","grammarData","foldMap","source","__comments__","lineComment","blockComment","comments","__endCommentReg__","brackets","__foldReg__","onInsertContentAfter","nowLine","newLine","clearTimeout","tokenizeLinesTimer","$nextTick","tokenizeLines","onDeleteContentAfter","tokenizeVisibleLinsId","startLine","endLine","maxVisibleLines","getRealLine","asyncTokenizeLines","processedLines","processedTime","Date","now","cancelIdleCallback","lineObj","htmls","tokens","tokenizeLine","folds","stateFold","checkLineVisible","splitLongToken","createHtml","renderLine","lineId","states","equals","requestIdleCallback","setTimeout","lineText","map","selector","startIndex","endIndex","scopes","_getSelector","scopeId","token","scope","outerLoop","_scope","regexp","test","lineTokens","addFold","ruleStack","existTag","isString","_scopeName","lastFold","addBracket","addTagFold","a","b","option","reg","res","preFold","side","_inString","lastIndex","tag","startCol","getLineInFold","child_process","initEvent","setErrors","_bindMsg","console","log","parseId","results","fork","call","parseTimer","getAllText","send","TOKEN_TYPE","TEXT","SOURCE","TAG_NAME","ATTR_NAME","STRING","WORD","CSS","CSS_VALUE","CSS_PROPERTY","CSS_SELECTOR","CSS_TAG","CSS_CLASS","CSS_ATTR","CSS_PSEUDO","EMMET_HTML","EMMET_CSS","tagToken","tagNameToken","tagAttrName","cssValueToken","cssPropertyToken","cssSelectorToken","cssAttributeToken","cssClassToken","cssPseudoToken","styleCss","styleCssProperty","Autocomplete","doneMap","reset","stop","searchTimer","search","_search","emmet","tokenIndex","getTokenIndex","nowToken","emmetObj","extract","Enum","_isCssToken","_isCssPropertyToken","_isCssValueToken","preToken","replaceTip","abbreviation","selectAutoTip","insertContent","setAutoTip","_isTextToken","_searchEmmet","_isTagNameToken","_searchTagName","_isAttrNameToken","_getPreTagName","_searchTagAttrName","_searchCssProperty","_getPreCssProperty","_searchCssValue","_isCssSelectorToken","_searchCssTag","_searchCssPseudo","_searchSelector","_isTagToken","_searchStyle","_isSourceToken","_searchWord","_searchDocument","_isStringToken","_addTip","_isCssClassToken","skipMatch","callback","showAll","startTime","_showTip","htmlData","getHtmlData","tags","attributes","tagMap","after","globalAttributes","cssData","getCssData","pseudo","split","trim","pseudoClasses","pseudoElements","keyValue","values","propertyMap","_word","before","_setTokenType","isSourceToken","isCssToken","isTextToken","isTagToken","isTagAttrNameToken","isTagNameToken","isStringToken","isCssValueToken","isCssPropertyToken","isCssSelectorToken","isCssClassToken","isCssAttributeToken","isCssPseudoToken","undefined","_isCssAttributeToken","_isCssPseudoToken","skipDone","obj","desc","getIcon","all","limit","checkEmmetValid","_text","invalidEmmetParen","paremEmmet","cursorPos","Node","max","dataList","linkList","next","prev","pNode","Btree","compare","root","head","size","node","arrayCache","link","half","iterator","findIndex","_insert","newNode","isPnode","j","delete","that","pIndex","leftNode","rightNode","_moveRight","_moveLeft","_join","orginIndex","originResult","_next","_prev","cb","toArray","isInsert","comparator","singleTag","singleTagMap","editorFunObj","preCursorPos","afterIndex","Infinity","unFold","starLine","foldLine","resultFold","getRangeFold","getFoldByLine","it","foldIconCheck","stack","startFold","foldStartText","assign","trimLeft","_fold","getRangeFoldByStartFold","pop","getBracketMatch","exsitEnd","lineCount","realLine","getRelativeLine","relLine","selecter","wholeWordPattern","searchObj","resultObj","hasCache","config","getFromCache","direct","increase","getSearchConfig","searcher","cursor","addCursorPos","addActive","activedRanges","setCursorPos","initIndexs","addRange","setActive","clearSearch","clearActive","rangePos","lines","wholeWord","ignoreCase","cacheData","ranges","refreshSearch","refreshSearchId","retainActive","clearInactiveRange","clearRange","setPrevActive","setNextActive","removeNow","clone","getCacheData","getNowRange","fSearcher","delta","getConfig","searchText","getRangeByCursorPos","getRangeText","getNowWord","startColumn","endColumn","setContextData","prop","setEditorData","getRange","getRangeByLine","getRangeWithCursorPos","select","multiCursorPos","moveCursor","updateRange","createRange","renderSelectedBg","selectAll","setRange","selectAllOccurence","clearCursorPos","same","getCursorsByLineColumn","_range","filterRange","removeRange","removeCursor","dels","dWord","multiKeyCode","rightWrodPattern","leftWrodPattern","pos","setNowCursorPos","addCursorAbove","moveWidth","getStrWidth","getColumnByWidth","addCursorBelow","addCursorLineEnds","updateCursorPos","renderCursor","del","removeCursorInRange","toDels","getCursorsByLine","_column","switchMultiKeyCode","history","undo","doCommand","serial","_command","redo","commandType","deleteContent","deleteLine","insertLine","moveLineUp","moveLineDown","copyLineDown","deleteCopyLineDown","copyLineUp","deleteCopyLineUp","pushHistory","lastCommand","sortComand","pushHistoryTime","_checkSameOp","_combCheck","_combCommand","commandList","updateHistory","_index","emmetWord","emmetAttr","emmetNum","endTag","Context","MIN_SAFE_INTEGER","fgLines","lineIdMap","renderedIdMap","renderedLineMap","initData","historyArr","cursorPosList","_historyArr","_insertMultiContent","prePos","historyObj","texts","lineDelta","columnDelta","commandObj","margin","_insertContent","alignmentTab","nowLineText","newPos","tabStr","_getTabStr","concat","lint","tokenizer","setLineWidth","plus","spaceNum","ceil","rangeList","_deleteMultiContent","_deleteRangePos","_deleteCursorPos","_deleteContent","startObj","deleteText","rangeUuid","originPos","endObj","maxWidthObj","clear","setMaxWidth","_setMaxWidth","setMaxWidthTimer","_setLineWidth","setLineWidthTimer","moveLine","historyPosList","searchConifg","pass","preLine","enLine","_moveLine","upLine","downLine","copyLine","originList","deleteCopyLine","tip","_getResult","expand","_getRanges","_updatePos","deltaArr","_getDeltaPos","autocomplete","getCopyText","cut","contexts","shiftKey","altKey","_moveCursor","searchWord","openSearch","prevAutoTip","nextAutoTip","showReplace","replaceVisible","input1Focus","input1Height","composing","changeCase","changeWhole","input2Focus","input2Height","onKeyDown2","replaceText","searchPrev","preFocus","searchNext","nextFocus","close","searchPrevActive","searchNextActive","focus","requestAnimationFrame","directBlur","_html","tipList","nowIndex","$auto","getActiveIndex","content","SearchDialog","AutoTip","Tip","charObj","cursorVisible","cursorFocus","theme","renderHtmls","cursorLeft","scrollLeft","scrollTop","scrollerArea","errorMap","errors","searchVisible","activeLineBg","_hScrollWidth","myContext","handler","deep","initResizeEvent","resizeObserver","unbindEvent","showEditor","showCursor","_timer","hideCursor","selectStarts","selectEnds","cursorList","_line","_renderSelectedBg","firstLine","lastLine","renderSelectionToken","_renderSelectionToken","_tokens","renderBracketMatch","clearSelectionToken","_clearSelectionToken","_setLine","renderError","$render","keyMap","_renderColError","_renderLineError","_renderError","searchDialog","setContentHeight","setStartLine","_formatError","getStrWidthByLine","w1","w2","getPosByEvent","getExactLeft","children","getToken","menuHeight","time","onErrorMousemove","_checkErrorOver","onDocumentMmove","cancelAnimationFrame","_move","_run","onDocumentMouseUp","copyText","showMemu","fileMenuList","onFileMenuChange","editMenuList","onEditMenuChange","selectionMenuList","onSelectionMenuChange","preferenceMenuList","onPreferenceMenuChange","onMinimize","onUnmaximize","onMaximize","titleBar","openFolder","openFile","currentWindow","getCurrentWindow","fileMenuVisible","editMenuVisible","selectionMenuVisible","preferenceMenuVisible","maximize","inject","showTabsize","tabSizeList","position","onTabsizeChange","showLanguage","nowLanguage","tabsizeVisible","hasEditor","languages","languageMap","onSashBegin","_scrollHeight","_paddingLeft","preActiveItem","itemPadding","openedList","renderList","readdir","encoding","files","parentPath","sortFileList","getRenderList","_loopList","focusItem","_findItem","_changOpen","_item","endIn","SideTree","SideBarMenu","getRootList","title","onClickBtn","btns","overlay","iconColor","hide","cmdList","onChange","settingMap","foreground","background","fontStyle","loadTheme","tokenColors","_loadTheme","css","setDefaultColor","parseCss","insertCss","include","_addColors","loadIconTheme","extensions","fonts","font","fontFace","src","format","weight","iconDefinitions","fontCharacter","fontColor","iconPath","imgUrl","insertFont","_setFileExtensions","languageIds","_parseLanguageIds","dotReg","sReg","level","_getLevel","settings","dot","document","createElement","createTextNode","getElementsByTagName","appendChild","transparent","focusBorder","contrastBorder","contrastActiveBorder","isLight","isHc","_base","chroma","alpha","_scrollbar","_titleBar","_dropdown","_list","_menu","_statusBar","_sideBar","_editor","_tab","_editorWidget","_input","_toolbar","searchMenu","menu","Editor","EditorBar","TitleBar","StatusBar","SideBar","Dialog","WindowMenu","CmdPanel","extensionsPath","nowId","idCount","titleCount","dialogVisible","getNowEditor","getNowContext","langeuages","_closeTab","cancel","buttonLabel","choseFolder","showOpenDialog","win","options","open","catch","err","_done","choseFile","showDialog","writeFile","changeStatus","checkLanguage","loadExtensions","promises","_readVarFile","_addLanguage","_addTheme","_addIconTheme","getTabById","getTabByPath","getEditor","getContext","Window","axios","timeout","withCredentials","headers","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","fulfilled","every","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}