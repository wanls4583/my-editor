{"version":3,"file":"js/app-legacy.b29f4e50.js","mappings":"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","sources":["webpack://my-editor/./src/App.vue?862d","webpack://my-editor/./src/components/Window.vue?f0d4","webpack://my-editor/./src/components/EditorBar.vue?d5d5","webpack://my-editor/./src/components/EditorBarMenu.vue?6fa6","webpack://my-editor/./src/components/Menu.vue?63c5","webpack://my-editor/src/components/Menu.vue","webpack://my-editor/./src/components/Menu.vue?5e7b","webpack://my-editor/./src/components/Menu.vue","webpack://my-editor/./src/event.js","webpack://my-editor/src/components/EditorBarMenu.vue","webpack://my-editor/./src/components/EditorBarMenu.vue?6809","webpack://my-editor/./src/components/EditorBarMenu.vue","webpack://my-editor/./src/data/globalData.js","webpack://my-editor/./src/common/util.js","webpack://my-editor/./src/module/shortcut/editor-bar.js","webpack://my-editor/src/components/EditorBar.vue","webpack://my-editor/./src/components/EditorBar.vue?761d","webpack://my-editor/./src/components/EditorBar.vue","webpack://my-editor/./src/components/Editor.vue?cec4","webpack://my-editor/./src/module/tokenizer/index.js","webpack://my-editor/./src/module/lint/index.js","webpack://my-editor/./src/data/enum.js","webpack://my-editor/./src/module/autocomplete/index.js","webpack://my-editor/./src/common/btree.js","webpack://my-editor/./src/module/fold/index.js","webpack://my-editor/./src/module/search/index.js","webpack://my-editor/./src/module/select/index.js","webpack://my-editor/./src/module/cursor/index.js","webpack://my-editor/./src/module/history/index.js","webpack://my-editor/./src/module/context/index.js","webpack://my-editor/./src/module/shortcut/editor.js","webpack://my-editor/./src/components/Search.vue?2ea8","webpack://my-editor/src/components/Search.vue","webpack://my-editor/./src/components/Search.vue?a1d0","webpack://my-editor/./src/components/Search.vue","webpack://my-editor/./src/components/AutoTip.vue?d675","webpack://my-editor/src/components/AutoTip.vue","webpack://my-editor/./src/components/AutoTip.vue?0baf","webpack://my-editor/./src/components/AutoTip.vue","webpack://my-editor/./src/components/Tip.vue?9a48","webpack://my-editor/src/components/Tip.vue","webpack://my-editor/./src/components/Tip.vue?c927","webpack://my-editor/./src/components/Tip.vue","webpack://my-editor/src/components/Editor.vue","webpack://my-editor/./src/components/Editor.vue?baff","webpack://my-editor/./src/components/Editor.vue","webpack://my-editor/./src/components/TitleBar.vue?03aa","webpack://my-editor/./src/module/shortcut/menu-bar.js","webpack://my-editor/src/components/TitleBar.vue","webpack://my-editor/./src/components/TitleBar.vue?8226","webpack://my-editor/./src/components/TitleBar.vue","webpack://my-editor/./src/components/StatusBar.vue?eafc","webpack://my-editor/src/components/StatusBar.vue","webpack://my-editor/./src/components/StatusBar.vue?132e","webpack://my-editor/./src/components/StatusBar.vue","webpack://my-editor/./src/components/SideBar.vue?f67e","webpack://my-editor/./src/components/SideTree.vue?ccf9","webpack://my-editor/src/components/SideTree.vue","webpack://my-editor/./src/components/SideTree.vue?d92b","webpack://my-editor/./src/components/SideTree.vue","webpack://my-editor/./src/components/SideBarMenu.vue?cf1a","webpack://my-editor/src/components/SideBarMenu.vue","webpack://my-editor/./src/components/SideBarMenu.vue?1134","webpack://my-editor/./src/components/SideBarMenu.vue","webpack://my-editor/src/components/SideBar.vue","webpack://my-editor/./src/components/SideBar.vue?ce7f","webpack://my-editor/./src/components/SideBar.vue","webpack://my-editor/./src/components/Dialog.vue?ff40","webpack://my-editor/src/components/Dialog.vue","webpack://my-editor/./src/components/Dialog.vue?8211","webpack://my-editor/./src/components/Dialog.vue","webpack://my-editor/./src/components/WindowMenu.vue?3724","webpack://my-editor/src/components/WindowMenu.vue","webpack://my-editor/./src/components/WindowMenu.vue?25d3","webpack://my-editor/./src/components/WindowMenu.vue","webpack://my-editor/./src/components/CmdPanel.vue?8ddc","webpack://my-editor/./src/module/theme/index.js","webpack://my-editor/src/components/CmdPanel.vue","webpack://my-editor/./src/components/CmdPanel.vue?07bb","webpack://my-editor/./src/components/CmdPanel.vue","webpack://my-editor/src/components/Window.vue","webpack://my-editor/./src/components/Window.vue?5df1","webpack://my-editor/./src/components/Window.vue","webpack://my-editor/src/App.vue","webpack://my-editor/./src/App.vue?1acc","webpack://my-editor/./src/App.vue","webpack://my-editor/./src/main.js","webpack://my-editor/webpack/bootstrap","webpack://my-editor/webpack/runtime/chunk loaded","webpack://my-editor/webpack/runtime/compat get default export","webpack://my-editor/webpack/runtime/define property getters","webpack://my-editor/webpack/runtime/global","webpack://my-editor/webpack/runtime/hasOwnProperty shorthand","webpack://my-editor/webpack/runtime/jsonp chunk loading","webpack://my-editor/webpack/startup"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Window')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"window\",staticClass:\"my-window\",style:({\n        'padding-top': _vm._topBarHeight,\n        'padding-bottom': _vm._statusHeight,\n    }),on:{\"mousedown\":_vm.onWindMouseDown}},[(_vm.mode === 'app')?_c('side-bar',{ref:\"sideBar\"}):_vm._e(),_c('div',{ref:\"rightWrap\",staticClass:\"my-right-wrap\",on:{\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onContextmenu.apply(null, arguments)}}},[_c('editor-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.editorList.length),expression:\"editorList.length\"}],attrs:{\"editorList\":_vm.editorList},on:{\"change\":_vm.onChangeTab,\"close\":_vm.onCloseTab,\"close-all\":_vm.onCloseAll,\"close-saved\":_vm.onCloseSaved,\"close-to-left\":_vm.onCloseToLeft,\"close-to-right\":_vm.onCloseToRight}}),_vm._l((_vm.editorList),function(item){return [_c('editor',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.active),expression:\"item.active\"}],key:item.id,ref:'editor' + item.id,refInFor:true,attrs:{\"active\":item.active,\"id\":item.id},on:{\"change\":function($event){return _vm.onFileChange(item.id)},\"save\":function($event){return _vm.onSaveFile(item.id)}}})]}),_c('window-menu',{ref:\"winMenu\"})],2),_c('title-bar',{ref:\"titleBar\",attrs:{\"height\":_vm.topBarHeight},on:{\"change\":_vm.onMenuChange}}),_c('status-bar',{ref:\"statusBar\",attrs:{\"height\":_vm.statusHeight,\"languageList\":_vm.languageList},on:{\"select-langeuage\":_vm.onSelectLanguage}}),_c('cmd-panel'),_c('Dialog',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dialogVisible),expression:\"dialogVisible\"}],attrs:{\"btns\":_vm.dialogBtns,\"content\":_vm.dialogContent,\"icon\":this.dialogIcon,\"icon-color\":this.dialogIconColor,\"overlay\":true,\"title\":_vm.dialogTilte},on:{\"close\":_vm.onDialogClose}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"editorBar\",staticClass:\"my-editor-bar\",on:{\"selectstart\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"bar-scroller my-scroll-overlay my-scroll-mini\"},_vm._l((_vm.editorList),function(item){return _c('div',{staticClass:\"bar-item my-hover\",class:[item.active ? 'my-active' : ''],attrs:{\"title\":item.path},on:{\"click\":function($event){return _vm.onClickItem(item.id)},\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onContextmenu($event, item.id)}}},[_c('div',{staticClass:\"bar-content\",class:[item.icon]},[_c('span',{staticClass:\"bar-text\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"bar-icon\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.saved),expression:\"item.saved\"}],staticClass:\"bar-close-icon iconfont icon-close\",attrs:{\"title\":\"close\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onClose(item.id)}}}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!item.saved),expression:\"!item.saved\"}],staticClass:\"bar-dot\"})])])])}),0),_c('editor-bar-menu',{ref:\"editorBarMenu\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wrap\"},[_c('Menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onMenuChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"scroller\",staticClass:\"my-menu my-shadow my-border\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],ref:\"content\"},[_vm._l((_vm.myMenuList),function(group,index){return [_c('div',{staticClass:\"my-menu-group\"},_vm._l((group),function(item){return _c('div',{staticClass:\"my-menu-item my-center-between my-hover\",class:{\n                        'my-active': _vm.checkable && item.checked,\n                        disabled: item.disabled,\n                    },on:{\"mousedown\":function($event){return _vm.onClick(item)},\"mouseover\":function($event){return _vm.onHover(item)}}},[_c('div',{staticClass:\"my-menu-title\"},[_vm._v(_vm._s(item.name))]),(item.shortcut)?_c('div',{staticClass:\"my-menu-shortcut\"},[_vm._v(\" \"+_vm._s(item.shortcut)+\" \")]):_vm._e()])}),0),(index < _vm.myMenuList.length - 1)?_c('div',{staticClass:\"my-separator\"}):_vm._e()]})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n    <div :style=\"styles\" @mousedown.stop class=\"my-menu my-shadow my-border\" ref=\"scroller\">\r\n        <div v-show=\"visible\" ref=\"content\">\r\n            <template v-for=\"(group, index) in myMenuList\">\r\n                <div class=\"my-menu-group\">\r\n                    <div\r\n                        :class=\"{\r\n                            'my-active': checkable && item.checked,\r\n                            disabled: item.disabled,\r\n                        }\"\r\n                        @mousedown=\"onClick(item)\"\r\n                        @mouseover=\"onHover(item)\"\r\n                        class=\"my-menu-item my-center-between my-hover\"\r\n                        v-for=\"item in group\"\r\n                    >\r\n                        <div class=\"my-menu-title\">{{ item.name }}</div>\r\n                        <div class=\"my-menu-shortcut\" v-if=\"item.shortcut\">\r\n                            {{ item.shortcut }}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"my-separator\" v-if=\"index < myMenuList.length - 1\"></div>\r\n            </template>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport $ from 'jquery';\r\nexport default {\r\n    name: 'Menu',\r\n    props: {\r\n        menuList: {\r\n            type: Array,\r\n            default: [],\r\n        },\r\n        styles: {\r\n            type: Object,\r\n        },\r\n        checkable: {\r\n            type: Boolean,\r\n            default: true,\r\n        },\r\n        hoverCheck: {\r\n            type: Boolean,\r\n            default: false,\r\n        },\r\n        value: {\r\n            type: [Number, String],\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            index: -1,\r\n            itemHeight: 26,\r\n            myMenuList: [],\r\n        };\r\n    },\r\n    computed: {\r\n        visible() {\r\n            for (let i = 0; i < this.myMenuList.length; i++) {\r\n                if (this.myMenuList[i].length) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n    },\r\n    watch: {\r\n        menuList() {\r\n            this.initMenu();\r\n        },\r\n        value(newVal) {\r\n            this.setChecked(newVal);\r\n        },\r\n        index() {\r\n            this.$nextTick(() => {\r\n                this.scrollToIndex();\r\n            });\r\n        },\r\n    },\r\n    created() {\r\n        this.initMenu();\r\n    },\r\n    mounted() {\r\n        this.keydownFn = (e) => {\r\n            if (this.$refs.content.clientHeight) {\r\n                if (e.keyCode === 38) {\r\n                    this.setCheckedByIndex(this.index - 1);\r\n                } else if (e.keyCode === 40) {\r\n                    this.setCheckedByIndex(this.index + 1);\r\n                } else if (e.keyCode === 13) {\r\n                    if (this.index > -1) {\r\n                        this.$emit('change', this.indexMap[this.index]);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        $(window).on('keydown', this.keydownFn);\r\n    },\r\n    destroyed() {\r\n        $(window).unbind('keydown', this.keydownFn);\r\n    },\r\n    methods: {\r\n        initMenu() {\r\n            let index = -1;\r\n            let menuList = this.menuList;\r\n            this.index = -1;\r\n            this.maxIndex = -1;\r\n            this.indexMap = {};\r\n            if (menuList[0] && !(menuList[0] instanceof Array)) {\r\n                menuList = [menuList];\r\n            }\r\n            this.myMenuList = menuList.map((group) => {\r\n                return group.map((item) => {\r\n                    item = Object.assign({}, item);\r\n                    item.value = item.value === undefined ? item.name : item.value;\r\n                    item.checked = item.value === this.value;\r\n                    this.indexMap[++index] = item;\r\n                    this.maxIndex = index;\r\n                    if (item.checked) {\r\n                        this.index = index;\r\n                    }\r\n                    return item;\r\n                });\r\n            });\r\n        },\r\n        scrollToIndex() {\r\n            let $scroller = this.$refs.scroller;\r\n            let height = (this.index + 1) * this.itemHeight;\r\n            if ($scroller && height > $scroller.clientHeight + $scroller.scrollTop) {\r\n                $scroller.scrollTop = height - $scroller.clientHeight;\r\n            } else if ($scroller && height < $scroller.scrollTop + this.itemHeight) {\r\n                $scroller.scrollTop = height - this.itemHeight;\r\n            }\r\n        },\r\n        onClick(item) {\r\n            if (item.disabled) {\r\n                return;\r\n            }\r\n            this.clearChecked();\r\n            item.checked = true;\r\n            this.$emit('change', item);\r\n        },\r\n        onHover(item) {\r\n            this.hoverCheck && this.setChecked(item.value);\r\n        },\r\n        setChecked(value) {\r\n            let index = -1;\r\n            this.myMenuList.forEach((group) => {\r\n                group.forEach((item) => {\r\n                    item.checked = item.value === value;\r\n                    index++;\r\n                    if (item.checked) {\r\n                        this.index = index;\r\n                    }\r\n                });\r\n            });\r\n            this.myMenuList.splice();\r\n        },\r\n        setCheckedByIndex(index) {\r\n            this.clearChecked();\r\n            if (index < 0) {\r\n                index = this.maxIndex;\r\n            } else if (index > this.maxIndex) {\r\n                index = 0;\r\n            }\r\n            this.indexMap[index].checked = true;\r\n            this.index = index;\r\n            this.myMenuList.splice();\r\n        },\r\n        clearChecked() {\r\n            this.myMenuList.forEach((group) => {\r\n                group.forEach((item) => {\r\n                    item.checked = false;\r\n                });\r\n            });\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Menu.vue?vue&type=template&id=88f3abd8&\"\nimport script from \"./Menu.vue?vue&type=script&lang=js&\"\nexport * from \"./Menu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\n\r\nconst bus = new Vue();\r\n\r\nexport default bus;","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div ref=\"wrap\">\r\n        <Menu\r\n            :checkable=\"false\"\r\n            :menuList=\"menuList\"\r\n            :styles=\"menuStyle\"\r\n            @change=\"onMenuChange\"\r\n            ref=\"menu\"\r\n            v-show=\"menuVisible\"\r\n        ></Menu>\r\n    </div>\r\n</template>\r\n<script>\r\nimport $ from \"jquery\";\r\nimport Menu from \"./Menu\";\r\nimport EventBus from \"@/event\";\r\n\r\nexport default {\r\n    name: \"EditorBar\",\r\n    components: {\r\n        Menu,\r\n    },\r\n    data() {\r\n        return {\r\n            menuList: [\r\n                [\r\n                    {\r\n                        name: \"Close\",\r\n                        op: \"close\",\r\n                        shortcut: \"Ctrl+F4\",\r\n                    },\r\n                    {\r\n                        name: \"Close to the Left\",\r\n                        op: \"closeToLeft\",\r\n                    },\r\n                    {\r\n                        name: \"Close to the Right\",\r\n                        op: \"closeToRight\",\r\n                    },\r\n                    {\r\n                        name: \"Close Saved\",\r\n                        op: \"closeSaved\",\r\n                        shortcut: \"Ctrl+K U\",\r\n                    },\r\n                    {\r\n                        name: \"Close All\",\r\n                        op: \"closeAll\",\r\n                        shortcut: \"Ctrl+K W\",\r\n                    },\r\n                ],\r\n            ],\r\n            menuVisible: false,\r\n            menuStyle: {\r\n                left: \"10px\",\r\n                top: \"40px\",\r\n            },\r\n        };\r\n    },\r\n    created() {\r\n        this.initEventBus();\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on(\"close-menu\", () => {\r\n                this.menuVisible = false;\r\n            });\r\n        },\r\n        show(e, id) {\r\n            this.tabId = id;\r\n            this.menuVisible = true;\r\n            let $parent = $(this.$refs.wrap).parent();\r\n            this.$nextTick(() => {\r\n                let offset = $parent.offset();\r\n                let menuWidth = this.$refs.menu.$el.clientWidth;\r\n                if (\r\n                    menuWidth + e.clientX >\r\n                    offset.left + $parent[0].clientWidth\r\n                ) {\r\n                    this.menuStyle.left =\r\n                        e.clientX - offset.left - menuWidth + \"px\";\r\n                } else {\r\n                    this.menuStyle.left = e.clientX - offset.left + \"px\";\r\n                }\r\n                this.menuStyle.top = e.clientY - offset.top + \"px\";\r\n            });\r\n        },\r\n        onMenuChange(item) {\r\n            switch (item.op) {\r\n                case \"close\":\r\n                    this.$parent.$emit(\"close\", this.tabId);\r\n                    break;\r\n                case \"closeToLeft\":\r\n                    this.$parent.$emit(\"close-to-left\", this.tabId);\r\n                    break;\r\n                case \"closeToRight\":\r\n                    this.$parent.$emit(\"close-to-right\", this.tabId);\r\n                    break;\r\n                case \"closeSaved\":\r\n                    this.$parent.$emit(\"close-saved\", this.tabId);\r\n                    break;\r\n                case \"closeAll\":\r\n                    this.$parent.$emit(\"close-all\", this.tabId);\r\n                    break;\r\n            }\r\n            this.menuVisible = false;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./EditorBarMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./EditorBarMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorBarMenu.vue?vue&type=template&id=dd126106&\"\nimport script from \"./EditorBarMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorBarMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","const require = window.require || window.parent.require || function () {};\r\nconst remote = require('@electron/remote');\r\nconst path = require('path');\r\nconst dirname = remote.app.getAppPath();\r\n\r\nconst globalData = {\r\n    dirname: dirname,\r\n    scopeIdMap: {},\r\n    scopeReg: null,\r\n    colors: {},\r\n    nowTheme: {\r\n        value: 'Monokai',\r\n        type: 'dark',\r\n        path: path.join(dirname, 'main/extensions/theme-monokai/themes/monokai-color-theme.json'),\r\n    },\r\n    nowIconTheme: {\r\n        value: 'vs-seti',\r\n        path: path.join(dirname, 'main/extensions/theme-seti/icons/vs-seti-icon-theme.json'),\r\n    },\r\n    nowIconData: {},\r\n    themes: [],\r\n    iconThemes: [],\r\n    languageList: [],\r\n    scopeFileList: [],\r\n    scopeTokenList: [],\r\n    grammars: {},\r\n    sourceWordMap: {},\r\n    defaultWordPattern: '(-?\\\\d*\\\\.\\\\d\\\\w*)|([^\\\\`\\\\~\\\\!\\\\@\\\\%\\\\^\\\\&\\\\*\\\\(\\\\)\\\\-\\\\=\\\\+\\\\[\\\\{\\\\]\\\\}\\\\\\\\\\\\|\\\\;\\\\:\\\\\\'\\\\\"\\\\,\\\\.\\\\<\\\\>/\\\\?\\\\s]+)',\r\n};\r\n\r\nexport default globalData;\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2020-10-31 13:48:50\r\n * @Description: 工具类\r\n */\r\nimport globalData from '@/data/globalData';\r\nimport $ from 'jquery';\r\nimport stripJsonComments from 'strip-json-comments';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nconst fs = require('fs');\r\n\r\nclass Util {\r\n    static readClipboard() {\r\n        if (window.clipboardData) {\r\n            return new Promise((resolve) => {\r\n                resolve(clipboardData.getData('Text'));\r\n            });\r\n        } else if (navigator.clipboard) {\r\n            return navigator.clipboard.readText();\r\n        }\r\n    }\r\n    static writeClipboard(text) {\r\n        if (window.clipboardData) {\r\n            clipboardData.setData('Text', text);\r\n        } else if (navigator.clipboard) {\r\n            navigator.clipboard.writeText(text);\r\n        }\r\n    }\r\n    //获取数字\r\n    static getNum(value) {\r\n        value = String(value);\r\n        value = value.replace(/[^0123456789\\.]/g, '');\r\n        var regex = /^\\d+(\\.\\d*)?$/;\r\n        var r = regex.exec(value);\r\n        var num = (r && r[0]) || '';\r\n        if (num) {\r\n            num = Number(r[0]);\r\n        }\r\n        return num;\r\n    }\r\n    //生成指定个数的空白符\r\n    static space(tabSize) {\r\n        var val = '';\r\n        for (var tmp = 0; tmp < tabSize; tmp++) {\r\n            val += ' ';\r\n        }\r\n        return val;\r\n    }\r\n    //数组数字排序\r\n    static sortNum(arr) {\r\n        arr.sort(function (arg1, arg2) {\r\n            return Number(arg1) - Number(arg2);\r\n        });\r\n    }\r\n    //获取字符宽度\r\n    static getCharWidth(wrap) {\r\n        var str1 = '------------------------------------------------------------------------------------';\r\n        var str2 = '一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一一';\r\n        var id1 = 'char-width-' + Util.getUUID();\r\n        var id2 = 'char-width-' + Util.getUUID();\r\n        var $tempDom = $(`<div class=\"my-line\">\r\n        <div class=\"my-code\"><span id=\"${id1}\">${str1}</span><span id=\"${id2}\">${str2}</span></div>\r\n        </div>`);\r\n        $(wrap).append($tempDom);\r\n        var dom = $('#' + id1)[0];\r\n        var charWidth = dom.scrollWidth / str1.length;\r\n        var charHight = dom.clientHeight;\r\n        var fontSize = window.getComputedStyle ? window.getComputedStyle(dom, null).fontSize : dom.currentStyle.fontSize;\r\n        var fullAngleCharWidth = $('#' + id2)[0].scrollWidth / str2.length;\r\n        $tempDom.remove();\r\n        return {\r\n            charWidth: charWidth,\r\n            fullAngleCharWidth: fullAngleCharWidth,\r\n            charHight: charHight,\r\n            fontSize: fontSize,\r\n        };\r\n    }\r\n    /**\r\n     * 获取文本在浏览器中的真实宽度\r\n     * @param  {string} str       文本\r\n     * @param  {number} charW     半角符号/文字宽度\r\n     * @param  {number} fullCharW 全角符号/文字宽度\r\n     * @param  {number} tabSize   tab符所占宽度\r\n     * @param  {number} start     文本开始索引\r\n     * @param  {number} end       文本结束索引\r\n     * @return {number}           文本真实宽度\r\n     */\r\n    static getStrWidth(str, charW, fullCharW, tabSize, start, end) {\r\n        tabSize = tabSize || 4;\r\n        if (typeof start != 'undefined') {\r\n            str = str.substr(start);\r\n        }\r\n        if (typeof end != 'undefined') {\r\n            str = str.substring(0, end - start);\r\n        }\r\n        var match = str.match(this.fullAngleReg);\r\n        var width = str.length * charW;\r\n        var tabNum = str.match(/\\t/g);\r\n        tabNum = (tabNum && tabNum.length) || 0;\r\n        match = (match && match.length) || 0;\r\n        if (match) {\r\n            match = match - tabNum;\r\n            width = match * fullCharW + (str.length - match) * charW;\r\n            width += tabNum * charW * (tabSize - 1);\r\n        }\r\n        return width;\r\n    }\r\n    /**\r\n     * 获取文本在浏览器中的真实宽度\r\n     * @param  {string} str       文本\r\n     * @param  {DOM} wrap     容器\r\n     */\r\n    static getStrExactWidth(str, tabSize, wrap) {\r\n        Util.getStrExactWidth.count = Util.getStrExactWidth.count || 0;\r\n        Util.getStrExactWidth.count++;\r\n        if (!str) {\r\n            return 0;\r\n        }\r\n        var id = 'str-width-' + Util.getUUID();\r\n        var $tempDom = $(`<div class=\"my-line my-temp-text\" style=\"visibility:hidden\">\r\n        <div class=\"my-code\" id=\"${id}\">${_splitStr(str)}</div>\r\n        </div>`);\r\n        $(wrap).append($tempDom);\r\n        var dom = $('#' + id)[0];\r\n        var charWidth = dom.clientWidth;\r\n        $('.my-temp-text').remove();\r\n        // if (Util.getStrExactWidth.count > 5) { //避免频繁删除dom导致浏览器卡顿\r\n        //     $('.my-temp-text').remove();\r\n        // } else {\r\n        //     clearTimeout(Util.getStrExactWidth.timer);\r\n        //     Util.getStrExactWidth.timer = setTimeout(() => {\r\n        //         $('.my-temp-text').remove();\r\n        //     }, 500);\r\n        // }\r\n        return charWidth;\r\n\r\n        function _splitStr(str) {\r\n            let count = Math.floor(str.length / 100);\r\n            let result = [];\r\n            for (let i = 0; i < count; i++) {\r\n                let column = i * 100;\r\n                result.push(Util.htmlTrans(str.slice(column, column + 100)));\r\n            }\r\n            count = count * 100;\r\n            if (count < str.length) {\r\n                result.push(Util.htmlTrans(str.slice(count)));\r\n            }\r\n            return `<span>${result.join('</span><span>').replace(/\\t/g, Util.space(tabSize || 4))}</span>`;\r\n        }\r\n    }\r\n    //<,>转义\r\n    static htmlTrans(cont) {\r\n        cont = cont.replace(/\\&\\#/g, '&amp;#');\r\n        return cont.replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n    }\r\n    // 深度克隆\r\n    static deepAssign(targetObj, originObj, noDeepKeys) {\r\n        return _assign(targetObj, originObj, noDeepKeys, new Map());\r\n\r\n        function _assign(targetObj, originObj, noDeepKeys, assigned) {\r\n            noDeepKeys = noDeepKeys || [];\r\n            for (var key in originObj) {\r\n                var value = originObj[key];\r\n                if (noDeepKeys.indexOf(key) > -1) {\r\n                    targetObj[key] = value;\r\n                    continue;\r\n                }\r\n                if (typeof value === 'object' && !(value instanceof RegExp) && value !== null && (!value.nodeName || !value.nodeType)) {\r\n                    if (assigned.has(value)) {\r\n                        targetObj[key] = assigned.get(value);\r\n                    } else {\r\n                        let tmp = null;\r\n                        if (value instanceof Array) {\r\n                            tmp = targetObj[key] || [];\r\n                            assigned.set(value, tmp);\r\n                            targetObj[key] = _assign(tmp, value, noDeepKeys, new Map(assigned));\r\n                        } else {\r\n                            tmp = targetObj[key] || {};\r\n                            assigned.set(value, tmp);\r\n                            targetObj[key] = _assign(tmp, value, noDeepKeys, new Map(assigned));\r\n                        }\r\n                    }\r\n                } else {\r\n                    targetObj[key] = value;\r\n                }\r\n            }\r\n            return targetObj;\r\n        }\r\n    }\r\n    static getUUID(len) {\r\n        len = len || 16;\r\n        var str = '';\r\n        for (var i = 0; i < len; i++) {\r\n            str += ((Math.random() * 16) | 0).toString(16);\r\n        }\r\n        return str;\r\n    }\r\n    /**\r\n     * 比较坐标的前后\r\n     * @param {Object} start\r\n     * @param {Object} end\r\n     */\r\n    static comparePos(start, end) {\r\n        if (start.line > end.line || (start.line == end.line && start.column > end.column)) {\r\n            return 1;\r\n        } else if (start.line == end.line && start.column == end.column) {\r\n            return 0;\r\n        } else {\r\n            return -1;\r\n        }\r\n    }\r\n    static createWorker(funStr) {\r\n        var blob = new Blob([funStr]);\r\n        var url = window.URL.createObjectURL(blob);\r\n        var worker = new Worker(url);\r\n        return worker;\r\n    }\r\n    static defineProperties(target, context, properties) {\r\n        let result = {};\r\n        properties.forEach((property) => {\r\n            result[property] = {\r\n                get: function () {\r\n                    if (typeof context[property] == 'function') {\r\n                        return context[property].bind(context);\r\n                    } else {\r\n                        return context[property];\r\n                    }\r\n                },\r\n            };\r\n        });\r\n        Object.defineProperties(target, result);\r\n    }\r\n    static getLanguageById(languageList, language) {\r\n        for (let i = 0; i < languageList.length; i++) {\r\n            if (languageList[i].language === language) {\r\n                return languageList[i];\r\n            }\r\n        }\r\n    }\r\n    static getLanguageByScopeName(languageList, scopeName) {\r\n        for (let i = 0; i < languageList.length; i++) {\r\n            if (languageList[i].scopeName === scopeName) {\r\n                return languageList[i];\r\n            }\r\n        }\r\n    }\r\n    static getWordPattern(language) {\r\n        let wordPattern = globalData.defaultWordPattern;\r\n        language = Util.getLanguageById(globalData.languageList, language);\r\n        if (language) {\r\n            let _wordPattern = globalData.sourceWordMap[language.scopeName];\r\n            _wordPattern = _wordPattern && _wordPattern.pattern;\r\n            wordPattern = _wordPattern || wordPattern;\r\n        }\r\n        return new RegExp(wordPattern);\r\n    }\r\n    static getIconByPath(iconData, path, type, fileType, opened) {\r\n        let fileName = /[^\\\\\\/]+$/.exec(path);\r\n        let suffix1 = '';\r\n        let suffix2 = '';\r\n        fileName = fileName && fileName[0];\r\n        if (!iconData) {\r\n            return '';\r\n        }\r\n        if (fileName) {\r\n            suffix1 = /(?<=\\.)[^\\.]+$/.exec(fileName);\r\n            suffix2 = /(?<=\\.)[^\\.]+\\.[^\\.]+$/.exec(fileName);\r\n            suffix1 = suffix1 && suffix1[0];\r\n            suffix2 = suffix2 && suffix2[0];\r\n        }\r\n        if (type === 'light' || type === 'contrast light') {\r\n            iconData = iconData.light;\r\n        }\r\n        if (fileType === 'dir') {\r\n            return opened ? iconData.folderExpanded : iconData.folder;\r\n        }\r\n        if (iconData.fileNames && iconData.fileNames[fileName]) {\r\n            return iconData.fileNames[fileName];\r\n        }\r\n        if (iconData.fileExtensions && iconData.fileExtensions[suffix2]) {\r\n            return iconData.fileExtensions[suffix2];\r\n        }\r\n        if (iconData.fileExtensions && iconData.fileExtensions[suffix1]) {\r\n            return iconData.fileExtensions[suffix1];\r\n        }\r\n        return iconData.file;\r\n    }\r\n    static readFile(path) {\r\n        return new Promise((resolve, reject) => {\r\n            fs.readFile(path, (error, data) => (error ? reject(error) : resolve(data)));\r\n        });\r\n    }\r\n    static loadJsonFile(fullPath) {\r\n        return Util.readFile(fullPath).then((data) => {\r\n            data = data.toString();\r\n            data = stripJsonComments(data);\r\n            data = data.replaceAll(/\\,(?=\\s*(?:(?:\\r\\n|\\n|\\r))*\\s*[\\]\\}])/g, '');\r\n            data = JSON.parse(data);\r\n            return data;\r\n        });\r\n    }\r\n    /**\r\n     * 模糊匹配【word是否存在于target中】\r\n     * @param {String} word 被搜索的单词\r\n     * @param {String} target 模板单词\r\n     */\r\n    static fuzzyMatch(word, target, fullMatch) {\r\n        let wordMap = {};\r\n        let towMap = {};\r\n        let wordLength = 0;\r\n        let score = 0;\r\n        let preFinedChar = '';\r\n        let preFinedOriginChar = '';\r\n        let preFinded = false;\r\n        let targetMap = {};\r\n        let count = 0;\r\n        let indexs = [];\r\n        let result = null;\r\n        let _target = target.toLowerCase();\r\n        if (word === target) {\r\n            return fullMatch ? { score: 100, indexs: [] } : null;\r\n        }\r\n        _setMap();\r\n        for (let i = 0; i < target.length; i++) {\r\n            let originChar = target[i];\r\n            let char = _target[i];\r\n            if (\r\n                wordMap[char] &&\r\n                //保证前后字符顺序最多只出现一个位置颠倒且颠倒的两个字符必须相邻\r\n                (!preFinedChar || towMap[preFinedChar + char] || (towMap[char + preFinedChar] && preFinded))\r\n            ) {\r\n                if (!targetMap[char] || targetMap[char] < wordMap[char]) {\r\n                    targetMap[char] = targetMap[char] ? targetMap[char] + 1 : 1;\r\n                    indexs.push(i);\r\n                    if (char === '_' || char === '$') {\r\n                        //检测到连接符+10分\r\n                        score += 10;\r\n                    } else if (preFinded) {\r\n                        //检测到连续匹配\r\n                        score += 5;\r\n                        if (towMap[preFinedChar + char]) {\r\n                            //连续匹配且顺序正确\r\n                            score += 1;\r\n                            if (_humpCheck(preFinedOriginChar, originChar) && preFinded) {\r\n                                //检测到驼峰命名+10分\r\n                                score += 5;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (_complete(char)) {\r\n                        return result;\r\n                    }\r\n                    if (!towMap[char + preFinedChar] || towMap[preFinedChar + char]) {\r\n                        preFinedChar = char;\r\n                        preFinedOriginChar = originChar;\r\n                    }\r\n                    preFinded = true;\r\n                } else {\r\n                    //检测到字符不匹配-1分\r\n                    score--;\r\n                    preFinded = char === preFinedChar;\r\n                }\r\n            } else {\r\n                if (!count && score > -9) {\r\n                    //检测到前三个首字符不匹配-3分\r\n                    score -= 3;\r\n                } else {\r\n                    //检测到字符不匹配-1分\r\n                    score--;\r\n                }\r\n                preFinded = char === preFinedChar;\r\n            }\r\n        }\r\n\r\n        // 预处理搜素单词\r\n        function _setMap() {\r\n            if (Util.fuzzyMatch.cache && Util.fuzzyMatch.cache.word === word) {\r\n                wordMap = Util.fuzzyMatch.cache.wordMap;\r\n                towMap = Util.fuzzyMatch.cache.towMap;\r\n                wordLength = Util.fuzzyMatch.cache.wordLength;\r\n                return;\r\n            }\r\n            let preChar = '';\r\n            for (let i = 0; i < word.length; i++) {\r\n                let char = word[i].toLowerCase();\r\n                wordMap[char] = wordMap[char] ? wordMap[char] + 1 : 1;\r\n                if (i > 0) {\r\n                    towMap[preChar + char] = true;\r\n                }\r\n                preChar = char;\r\n            }\r\n            wordLength = Object.keys(wordMap).length;\r\n            Util.fuzzyMatch.cache = {\r\n                word: word,\r\n                wordMap: wordMap,\r\n                towMap: towMap,\r\n                wordLength: wordLength,\r\n            };\r\n        }\r\n\r\n        // 检查驼峰命名\r\n        function _humpCheck(preChar, char) {\r\n            let preCode = preChar.charCodeAt(0);\r\n            let charCode = char.charCodeAt(0);\r\n            if ((preCode < 97 && charCode >= 97) || (charCode < 97 && preCode >= 97)) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        // 检查是否匹配完成\r\n        function _complete(char) {\r\n            if (targetMap[char] === wordMap[char]) {\r\n                if (++count === wordLength) {\r\n                    result = {\r\n                        score: score,\r\n                        indexs: indexs,\r\n                    };\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nArray.prototype.peek = function (index) {\r\n    if (this.length) {\r\n        return this[this.length - (index || 1)];\r\n    }\r\n};\r\nArray.prototype.empty = function () {\r\n    this.length = 0;\r\n    return this;\r\n};\r\nArray.prototype.insert = function (item, sort) {\r\n    if (sort && this.length) {\r\n        let left = 0,\r\n            right = this.length - 1;\r\n        while (left < right) {\r\n            let mid = Math.floor((left + right) / 2);\r\n            if (sort(item, this[mid]) > 0) {\r\n                left = mid + 1;\r\n            } else {\r\n                right = mid;\r\n            }\r\n        }\r\n        if (sort(item, this[left]) < 0) {\r\n            left--;\r\n        }\r\n        this.splice(left + 1, 0, item);\r\n    } else {\r\n        this.push(item);\r\n    }\r\n};\r\nString.prototype.peek = function (index) {\r\n    if (this.length) {\r\n        return this[this.length - (index || 1)];\r\n    }\r\n};\r\n//全角符号和中文字符\r\nUtil.fullAngleReg =\r\n    /[\\x00-\\x1f\\x80-\\xa0\\xad\\u1680\\u180E\\u2000-\\u200f\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF\\uFFF9-\\uFFFC]|[\\u1100-\\u115F\\u11A3-\\u11A7\\u11FA-\\u11FF\\u2329-\\u232A\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3000-\\u303E\\u3041-\\u3096\\u3099-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u3190-\\u31BA\\u31C0-\\u31E3\\u31F0-\\u321E\\u3220-\\u3247\\u3250-\\u32FE\\u3300-\\u4DBF\\u4E00-\\uA48C\\uA490-\\uA4C6\\uA960-\\uA97C\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFAFF\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFF01-\\uFF60\\uFFE0-\\uFFE6]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\r\nUtil.keyCode = {\r\n    DELETE: 46,\r\n    BACKSPACE: 8,\r\n};\r\nUtil.command = {\r\n    DELETE: 'delete',\r\n    INSERT: 'insert',\r\n    MOVEUP: 'moveLineUp',\r\n    MOVEDOWN: 'moveLineDown',\r\n    COPY_UP: 'copyLineUp',\r\n    COPY_DOWN: 'copyLineDown',\r\n    DELETE_COPY_UP: 'deleteCopyLineUp',\r\n    DELETE_COPY_DOWN: 'deleteCopyLineDown',\r\n    REPLACE: 'replace',\r\n    INSERT_LINE: 'insertLine',\r\n    DELETE_LINE: 'deleteLine',\r\n    REPLACE: 'replace',\r\n};\r\nUtil.constData = {\r\n    LINE_COMMENT: 'line-comment',\r\n    BLOCK_COMMENT: 'block-comment',\r\n    BRACKET: 'bracket',\r\n    TAG: 'tag',\r\n};\r\nexport default Util;\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 16:13:15\r\n * @Description: \r\n */\r\nimport Util from '@/common/util';\r\n\r\nexport default class {\r\n    constructor(editorBar) {\r\n        this.initProperties(editorBar);\r\n    }\r\n    initProperties(editorBar) {\r\n        Util.defineProperties(this, editorBar, [\r\n            '$emit',\r\n        ]);\r\n    }\r\n    onKeyDown(e) {\r\n        if (e.ctrlKey) {\r\n            if (this.pressK) {\r\n                this.pressK = false;\r\n                switch (e.keyCode) {\r\n                    case 85: //Ctrl+U\r\n                        e.preventDefault();\r\n                        this.$emit('close-saved');\r\n                        break;\r\n                    case 87: //Ctrl+W\r\n                        e.preventDefault();\r\n                        this.$emit('close-all');\r\n                        break;\r\n                }\r\n            } else {\r\n                switch (e.keyCode) {\r\n                    case 75: //Ctrl+K\r\n                        e.preventDefault();\r\n                        this.pressK = true;\r\n                        break;\r\n                    case 115: //Ctrl+F4\r\n                        e.preventDefault();\r\n                        this.$emit('close');\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div @selectstart.prevent class=\"my-editor-bar\" ref=\"editorBar\">\r\n        <div class=\"bar-scroller my-scroll-overlay my-scroll-mini\">\r\n            <div\r\n                :class=\"[item.active ? 'my-active' : '']\"\r\n                :title=\"item.path\"\r\n                @click=\"onClickItem(item.id)\"\r\n                @contextmenu.prevent.stop=\"onContextmenu($event, item.id)\"\r\n                class=\"bar-item my-hover\"\r\n                v-for=\"item in editorList\"\r\n            >\r\n                <div class=\"bar-content\" :class=\"[item.icon]\">\r\n                    <span class=\"bar-text\">{{ item.name }}</span>\r\n                    <div class=\"bar-icon\">\r\n                        <span @click.stop=\"onClose(item.id)\" class=\"bar-close-icon iconfont icon-close\" title=\"close\" v-show=\"item.saved\"></span>\r\n                        <span class=\"bar-dot\" v-show=\"!item.saved\"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <editor-bar-menu ref=\"editorBarMenu\"></editor-bar-menu>\r\n    </div>\r\n</template>\r\n<script>\r\nimport EditorBarMenu from './EditorBarMenu';\r\nimport ShortCut from '@/module/shortcut/editor-bar';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\n\r\nexport default {\r\n    name: 'EditorBar',\r\n    components: {\r\n        EditorBarMenu,\r\n    },\r\n    props: {\r\n        editorList: {\r\n            type: Array,\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            list: [],\r\n        };\r\n    },\r\n    provide() {\r\n        return {\r\n            rootList: this.list,\r\n        };\r\n    },\r\n    created() {\r\n        this.shortcut = new ShortCut(this);\r\n        this.initEventBus();\r\n        $(window).on('keydown', (e) => {\r\n            this.shortcut.onKeyDown(e);\r\n        });\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on('tab-change', (data) => {\r\n                this.$nextTick(() => {\r\n                    let $tab = $(this.$refs.editorBar).find('div.my-active');\r\n                    $tab.length && $tab[0].scrollIntoView();\r\n                });\r\n            });\r\n        },\r\n        onClickItem(id) {\r\n            this.$emit('change', id);\r\n        },\r\n        onClose(id) {\r\n            this.$emit('close', id);\r\n        },\r\n        onContextmenu(e, id) {\r\n            this.$refs.editorBarMenu.show(e, id);\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./EditorBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./EditorBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorBar.vue?vue&type=template&id=7451f082&\"\nimport script from \"./EditorBar.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"editor\",staticClass:\"my-editor-wrap\",on:{\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onContextmenu.apply(null, arguments)},\"selectstart\":function($event){$event.preventDefault();},\"wheel\":function($event){$event.preventDefault();return _vm.onWheel.apply(null, arguments)}}},[(_vm.active)?_c('div',{staticClass:\"my-nums\",style:({ top: _vm._numTop })},[_c('div',{staticClass:\"my-num\",staticStyle:{\"visibility\":\"hidden\"}},[_vm._v(_vm._s(_vm.maxLine))]),_vm._l((_vm.renderHtmls),function(line){return _c('div',{key:line.num,staticClass:\"my-num\",class:{ 'my-active': _vm.nowCursorPos.line === line.num },style:({ height: _vm._lineHeight, 'line-height': _vm._lineHeight })},[_c('span',{staticClass:\"num\"},[_vm._v(_vm._s(line.num))]),(line.fold)?_c('span',{staticClass:\"my-fold my-center-center\",class:['iconfont', line.fold == 'open' ? 'my-fold-open icon-down1' : 'my-fold-close icon-right'],on:{\"click\":function($event){return _vm.onToggleFold(line.num)}}}):_vm._e()])})],2):_vm._e(),_c('div',{staticClass:\"my-content-wrap\",style:({ 'box-shadow': _vm._leftShadow })},[_c('div',{ref:\"scroller\",staticClass:\"my-scroller my-scroll-overlay\",on:{\"scroll\":_vm.onScroll}},[_c('div',{ref:\"content\",staticClass:\"my-content\",style:({ minWidth: _vm._contentMinWidth, height: _vm.contentHeight }),on:{\"mousedown\":_vm.onContentMdown,\"mousemove\":_vm.onContentMmove,\"mouseleave\":_vm.onContentMLeave,\"selectend\":function($event){$event.preventDefault();return _vm.onSelectend.apply(null, arguments)}}},[(_vm.active)?_c('div',{ref:\"render\",staticClass:\"my-render\",style:({ top: _vm._top })},_vm._l((_vm.renderHtmls),function(line){return _c('div',{key:line.num,staticClass:\"my-line\",class:{ 'my-active': _vm._activeLine(line.num) },style:({ height: _vm._lineHeight, 'line-height': _vm._lineHeight }),attrs:{\"data-line\":line.num,\"id\":'line_' + line.num}},[_c('div',{staticClass:\"my-code\",class:[\n                                line.active ? 'my-active' : '',\n                                line.selected ? (line.isFsearch ? 'my-search-bg' : 'my-select-bg') : '',\n                                line.selected && _vm.selectedFg ? 'my-select-fg' : '',\n                                line.fold == 'close' ? 'fold-close' : '' ],attrs:{\"data-line\":line.num},domProps:{\"innerHTML\":_vm._s(line.html)}}),(_vm.bracketMatch && line.num == _vm.bracketMatch.start.line)?_c('div',{staticClass:\"my-bracket-match\",style:({ left: _vm.bracketMatch.start.left + 'px', width: _vm.bracketMatch.start.width + 'px' })}):_vm._e(),(_vm.bracketMatch && line.num == _vm.bracketMatch.end.line)?_c('div',{staticClass:\"my-bracket-match\",style:({ left: _vm.bracketMatch.end.left + 'px', width: _vm.bracketMatch.end.width + 'px' })}):_vm._e(),_vm._l((line.selectStarts),function(range){return _c('div',{staticClass:\"my-line-bg my-select-bg\",class:{ 'my-active': range.active, 'my-search-bg': range.isFsearch },style:({ left: range.left + 'px', width: range.width + 'px' })})}),_vm._l((line.selectEnds),function(range){return _c('div',{staticClass:\"my-line-bg my-select-bg\",class:{ 'my-active': range.active, 'my-search-bg': range.isFsearch },style:({ left: range.left + 'px', width: range.width + 'px' })})}),_vm._l((line.tabNum),function(tab){return _c('span',{staticClass:\"my-tab-line\",style:({ left: _vm._tabLineLeft(tab) })})}),_vm._l((line.cursorList),function(left){return _c('div',{staticClass:\"my-cursor\",staticStyle:{\"top\":\"0px\"},style:({ height: _vm._lineHeight, left: left, visibility: _vm._cursorVisible })})})],2)}),0):_vm._e(),_c('textarea',{ref:\"textarea\",staticClass:\"my-textarea\",style:({ top: _vm._textAreaPos.top, left: _vm._textAreaPos.left }),on:{\"blur\":_vm.onBlur,\"compositionend\":_vm.onCompositionend,\"compositionstart\":_vm.onCompositionstart,\"copy\":function($event){$event.preventDefault();return _vm.onCopy.apply(null, arguments)},\"cut\":function($event){$event.preventDefault();return _vm.onCut.apply(null, arguments)},\"focus\":_vm.onFocus,\"input\":_vm.onInput,\"keydown\":_vm.onKeyDown,\"paste\":function($event){$event.preventDefault();return _vm.onPaste.apply(null, arguments)}}}),_c('auto-tip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.autoTipList && _vm.autoTipList.length),expression:\"autoTipList && autoTipList.length\"}],ref:\"autoTip\",attrs:{\"styles\":_vm.autoTipStyle,\"tipList\":_vm.autoTipList},on:{\"change\":_vm.onClickAuto}})],1)]),_c('search-dialog',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchVisible),expression:\"searchVisible\"}],ref:\"searchDialog\",attrs:{\"count\":_vm.searchCount,\"now\":_vm.searchNow},on:{\"close\":_vm.onCloseSearch,\"next\":function($event){return _vm.onSearchNext()},\"prev\":function($event){return _vm.onSearchPrev()},\"replace\":_vm.replace,\"replaceAll\":_vm.replaceAll,\"search\":_vm.onSearch}})],1),_c('Menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onClickMenu}}),_c('tip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tipContent),expression:\"tipContent\"}],ref:\"tip\",attrs:{\"content\":_vm.tipContent,\"styles\":_vm.tipStyle}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-15 11:39:41\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport globalData from '@/data/globalData';\r\nimport * as vsctm from 'vscode-textmate';\r\nimport * as oniguruma from 'vscode-oniguruma';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\nconst regs = {\r\n    stringToken: /(\\.|^)string(\\.|$)/,\r\n};\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.currentLine = 1;\r\n        this.initRegistry();\r\n        this.initProperties(editor, context);\r\n        this.initLanguage(editor.language);\r\n    }\r\n    initRegistry() {\r\n        const wasmBin = fs.readFileSync(path.join(globalData.dirname, 'main/lib/onig.wasm')).buffer;\r\n        const vscodeOnigurumaLib = oniguruma.loadWASM(wasmBin).then(() => {\r\n            return {\r\n                createOnigScanner(patterns) {\r\n                    return new oniguruma.OnigScanner(patterns);\r\n                },\r\n                createOnigString(s) {\r\n                    return new oniguruma.OnigString(s);\r\n                },\r\n            };\r\n        });\r\n        this.registry = new vsctm.Registry({\r\n            onigLib: vscodeOnigurumaLib,\r\n            loadGrammar: (scopeName) => {\r\n                let language = Util.getLanguageByScopeName(globalData.scopeFileList, scopeName);\r\n                if (language) {\r\n                    if (language.configPath) {\r\n                        return Util.loadJsonFile(language.configPath).then((data) => {\r\n                            // 每种语言都有对应的折叠标记\r\n                            this.sourceFoldMap[language.scopeName] = {};\r\n                            globalData.sourceWordMap[language.scopeName] = data.wordPattern;\r\n                            // 是否存在标记性语言\r\n                            this.hasTextGrammar = this.hasTextGrammar || language.scopeName.startsWith('text');\r\n                            this.initLanguageConifg(this.sourceFoldMap[language.scopeName], data);\r\n                            return Util.readFile(language.path).then((data) => vsctm.parseRawGrammar(data.toString(), language.path));\r\n                        });\r\n                    } else {\r\n                        return Util.readFile(language.path).then((data) => vsctm.parseRawGrammar(data.toString(), language.path));\r\n                    }\r\n                }\r\n                return null;\r\n            },\r\n        });\r\n    }\r\n    initLanguage(language) {\r\n        if (this.language === language) {\r\n            return;\r\n        }\r\n        this.language = language;\r\n        this.grammar = null;\r\n        this.foldType = 1;\r\n        this.sourceFoldMap = {};\r\n        this.hasTextGrammar = false;\r\n        this.currentLine = 1;\r\n        language = Util.getLanguageById(globalData.languageList, language);\r\n        this.scopeName = (language && language.scopeName) || '';\r\n        if (this.scopeName) {\r\n            if (globalData.grammars[this.scopeName]) {\r\n                let grammarData = globalData.grammars[this.scopeName];\r\n                this.grammar = grammarData.grammar;\r\n                this.sourceFoldMap = grammarData.sourceFoldMap;\r\n                this.hasTextGrammar = grammarData.hasTextGrammar;\r\n            } else {\r\n                return this.registry.loadGrammar(this.scopeName).then((grammar) => {\r\n                    this.grammar = grammar;\r\n                    globalData.grammars[this.scopeName] = {\r\n                        grammar: grammar,\r\n                        sourceFoldMap: this.sourceFoldMap,\r\n                        hasTextGrammar: this.hasTextGrammar,\r\n                    };\r\n                    this.tokenizeVisibleLins();\r\n                });\r\n            }\r\n        }\r\n        this.tokenizeVisibleLins();\r\n        return Promise.resolve();\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, ['startLine', 'maxVisibleLines', 'maxLine', 'renderLine', 'folder', '$nextTick']);\r\n        Util.defineProperties(this, context, ['htmls']);\r\n    }\r\n    initLanguageConifg(foldMap, data) {\r\n        let source = [];\r\n        foldMap.__comments__ = {\r\n            lineComment: '',\r\n            blockComment: [],\r\n        };\r\n        if (data.comments) {\r\n            if (data.comments.lineComment) {\r\n                source.push(data.comments.lineComment);\r\n                foldMap[data.comments.lineComment] = 0;\r\n                foldMap.__comments__.lineComment = data.comments.lineComment;\r\n            }\r\n            if (data.comments.blockComment) {\r\n                source.push(data.comments.blockComment[0]);\r\n                source.push(data.comments.blockComment[1]);\r\n                foldMap[data.comments.blockComment[0]] = -this.foldType;\r\n                foldMap[data.comments.blockComment[1]] = this.foldType;\r\n                foldMap.__comments__.blockComment = data.comments.blockComment;\r\n                foldMap.__endCommentReg__ = new RegExp(data.comments.blockComment[1].replace(/[\\{\\}\\(\\)\\[\\]\\&\\?\\+\\*\\\\]/g, '\\\\$&'), 'g');\r\n                this.foldType++;\r\n            }\r\n        }\r\n        if (data.brackets) {\r\n            data.brackets.forEach((item) => {\r\n                if (foldMap[item[0]]) {\r\n                    //相同的前缀\r\n                    if (!foldMap[item[1]]) {\r\n                        source.push(item[1]);\r\n                        foldMap[item[1]] = -foldMap[item[0]];\r\n                    }\r\n                } else if (foldMap[item[1]]) {\r\n                    //相同的后缀\r\n                    if (!foldMap[item[0]]) {\r\n                        source.push(item[0]);\r\n                        foldMap[item[0]] = -foldMap[item[1]];\r\n                    }\r\n                } else {\r\n                    source.push(item[0]);\r\n                    source.push(item[1]);\r\n                    foldMap[item[0]] = -this.foldType;\r\n                    foldMap[item[1]] = this.foldType;\r\n                    this.foldType++;\r\n                }\r\n            });\r\n        }\r\n        source = source.join('|');\r\n        source = source.replace(/[\\{\\}\\(\\)\\[\\]\\&\\?\\+\\*\\\\]/g, '\\\\$&');\r\n        foldMap.__foldReg__ = new RegExp(source, 'g');\r\n    }\r\n    onInsertContentAfter(nowLine, newLine) {\r\n        if (nowLine <= this.currentLine) {\r\n            this.currentLine = nowLine;\r\n            clearTimeout(this.tokenizeLinesTimer);\r\n            this.$nextTick(() => {\r\n                if (this.currentLine !== nowLine) {\r\n                    return;\r\n                }\r\n                this.tokenizeLines(nowLine);\r\n            });\r\n        } else {\r\n            this.tokenizeVisibleLins();\r\n        }\r\n    }\r\n    onDeleteContentAfter(nowLine, newLine) {\r\n        if (newLine <= this.currentLine) {\r\n            this.currentLine = newLine;\r\n            clearTimeout(this.tokenizeLinesTimer);\r\n            this.$nextTick(() => {\r\n                if (this.currentLine !== newLine) {\r\n                    return;\r\n                }\r\n                this.tokenizeLines(newLine);\r\n            });\r\n        } else {\r\n            this.tokenizeVisibleLins();\r\n        }\r\n    }\r\n    tokenizeVisibleLins() {\r\n        let tokenizeVisibleLinsId = this.tokenizeVisibleLinsId + 1 || 1;\r\n        this.tokenizeVisibleLinsId = tokenizeVisibleLinsId;\r\n        this.$nextTick(() => {\r\n            if (this.tokenizeVisibleLinsId !== tokenizeVisibleLinsId) {\r\n                return;\r\n            }\r\n            let currentLine = this.currentLine;\r\n            let startLine = this.startLine;\r\n            let endLine = this.startLine + this.maxVisibleLines;\r\n            endLine = this.folder.getRealLine(endLine);\r\n            // 先渲染可视范围内的行\r\n            this.asyncTokenizeLines(startLine, endLine).then(() => {\r\n                startLine = this.startLine - 2000;\r\n                startLine = startLine < 1 ? 1 : startLine;\r\n                // 考虑到当前行可能处于内嵌语法种，渲染前2000行\r\n                if (startLine > currentLine) {\r\n                    this.asyncTokenizeLines(startLine, endLine).then(() => {\r\n                        this.tokenizeLines(currentLine);\r\n                    });\r\n                } else {\r\n                    this.tokenizeLines(currentLine);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    asyncTokenizeLines(startLine, endLine) {\r\n        return new Promise((resolve) => {\r\n            this.tokenizeLines(startLine, endLine, resolve);\r\n        });\r\n    }\r\n    tokenizeLines(startLine, endLine, resolve) {\r\n        let processedLines = 0;\r\n        let processedTime = Date.now();\r\n        endLine = endLine || this.maxLine;\r\n        endLine = endLine > this.maxLine ? this.maxLine : endLine;\r\n        cancelIdleCallback(this.tokenizeLinesTimer);\r\n        if (this.scopeName && !this.grammar) {\r\n            this.tokenizeLinesTimer = setTimeout(() => {\r\n                this.tokenizeLines(startLine, endLine, resolve);\r\n            });\r\n            return;\r\n        }\r\n        while (startLine <= endLine) {\r\n            let lineObj = this.htmls[startLine - 1];\r\n            if (!lineObj.tokens) {\r\n                //文本超过一万时跳过高亮\r\n                let data = this.tokenizeLine(startLine);\r\n                lineObj.tokens = data.tokens;\r\n                lineObj.folds = data.folds;\r\n                lineObj.stateFold = data.stateFold;\r\n                if (this.checkLineVisible(startLine)) {\r\n                    lineObj.tokens = this.splitLongToken(lineObj.tokens);\r\n                    lineObj.html = this.createHtml(lineObj.tokens, lineObj.text);\r\n                    this.renderLine(lineObj.lineId);\r\n                }\r\n                if (!lineObj.states || (lineObj.states.equals && !lineObj.states.equals(data.states)) || lineObj.states.toString() !== data.states.toString()) {\r\n                    lineObj.states = data.states;\r\n                    lineObj = this.htmls[startLine];\r\n                    if (lineObj) {\r\n                        lineObj.tokens = null;\r\n                        lineObj.html = '';\r\n                    }\r\n                }\r\n                processedLines++;\r\n                // 避免卡顿\r\n                if (processedLines % 5 == 0 && Date.now() - processedTime >= 20) {\r\n                    startLine++;\r\n                    break;\r\n                }\r\n            }\r\n            startLine++;\r\n        }\r\n        this.currentLine = startLine;\r\n        if (startLine <= endLine) {\r\n            this.tokenizeLinesTimer = requestIdleCallback(() => {\r\n                this.tokenizeLines(startLine, endLine, resolve);\r\n            });\r\n        } else if (resolve) {\r\n            resolve();\r\n        }\r\n    }\r\n    createHtml(tokens, lineText) {\r\n        return tokens\r\n            .map((item) => {\r\n                let selector = '';\r\n                let value = lineText.substring(item.startIndex, item.endIndex);\r\n                if (item.scopes[0] === 'plain') {\r\n                    selector = 'my-plain';\r\n                } else if (item.scopes[0] === 'selected') {\r\n                    selector = 'my-select-fg';\r\n                } else {\r\n                    selector = _getSelector(item);\r\n                    selector = (selector && `my-scope-${selector.scopeId}`) || '';\r\n                }\r\n                return `<span class=\"${selector}\" data-column=\"${item.startIndex}\">${Util.htmlTrans(value)}</span>`;\r\n            })\r\n            .join('');\r\n\r\n        function _getSelector(token) {\r\n            let result = null;\r\n            let scopes = token.scopes;\r\n            token.scope = scopes.join(' ');\r\n            outerLoop: for (let i = scopes.length - 1; i >= 0; i--) {\r\n                let scope = scopes[i];\r\n                for (let i = 0; i < globalData.scopeTokenList.length; i++) {\r\n                    let item = globalData.scopeTokenList[i];\r\n                    let _scope = item.scopes.peek();\r\n                    if (scope.indexOf(_scope) > -1) {\r\n                        if (item.regexp.test(token.scope)) {\r\n                            result = item;\r\n                            break outerLoop;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n    tokenizeLine(line) {\r\n        let lineText = this.htmls[line - 1].text;\r\n        let folds = [];\r\n        if (lineText.length > 10000 || !this.scopeName) {\r\n            return {\r\n                tokens: [\r\n                    {\r\n                        scopes: ['plain'],\r\n                        startIndex: 0,\r\n                        endIndex: lineText.length,\r\n                    },\r\n                ],\r\n                folds: [],\r\n                states: vsctm.INITIAL,\r\n            };\r\n        }\r\n        let states = (line > 1 && this.htmls[line - 2].states) || vsctm.INITIAL;\r\n        let lineTokens = this.grammar.tokenizeLine(lineText, states);\r\n        let stateFold = this.addFold(line, lineTokens.tokens, folds);\r\n        lineTokens.tokens.peek().endIndex = lineText.length; //某些情况下，会大于lineText.length\r\n        return {\r\n            tokens: lineTokens.tokens,\r\n            states: lineTokens.ruleStack,\r\n            folds: folds,\r\n            stateFold: stateFold,\r\n        };\r\n    }\r\n    addFold(line, tokens, folds) {\r\n        let scopeName = '';\r\n        let startIndex = 0;\r\n        let existTag = false;\r\n        let lineText = this.htmls[line - 1].text;\r\n        let stateFold = line > 1 ? this.htmls[line - 2].stateFold : null;\r\n        //给字符串token打上标记\r\n        tokens.forEach((token) => {\r\n            if (regs.stringToken.test(token.scopes.join('.'))) {\r\n                token.isString = true;\r\n            }\r\n        });\r\n        outerLoop: for (let index = 0; index < tokens.length; index++) {\r\n            let token = tokens[index];\r\n            let _scopeName = '';\r\n            let foldMap = null;\r\n            for (let i = token.scopes.length - 1; i >= 0; i--) {\r\n                foldMap = this.sourceFoldMap[token.scopes[i]];\r\n                if (!foldMap) {\r\n                    continue;\r\n                }\r\n                _scopeName = token.scopes[i];\r\n                if (scopeName || index === tokens.length - 1) {\r\n                    if (_scopeName !== scopeName || index === tokens.length - 1) {\r\n                        let endIndex = index === tokens.length - 1 ? token.endIndex : token.startIndex;\r\n                        let lastFold = this.addBracket({\r\n                            tokens: tokens,\r\n                            line: line,\r\n                            foldMap: foldMap,\r\n                            folds: folds,\r\n                            startIndex: startIndex,\r\n                            endIndex: endIndex,\r\n                            stateFold: stateFold,\r\n                            lineText: lineText,\r\n                        });\r\n                        // 单行注释\r\n                        if (lastFold && lastFold.type === Util.constData.LINE_COMMENT) {\r\n                            break outerLoop;\r\n                        }\r\n                        scopeName = token.scopes[i];\r\n                        startIndex = token.startIndex;\r\n                    }\r\n                } else {\r\n                    scopeName = token.scopes[i];\r\n                    startIndex = token.startIndex;\r\n                }\r\n                break;\r\n            }\r\n            if (\r\n                this.addTagFold({\r\n                    token: token,\r\n                    foldMap: foldMap,\r\n                    folds: folds,\r\n                    lineText: lineText,\r\n                })\r\n            ) {\r\n                existTag = true;\r\n            }\r\n        }\r\n        if (existTag) {\r\n            folds.sort((a, b) => {\r\n                return a.startIndex - b.startIndex;\r\n            });\r\n        }\r\n        if (folds.length) {\r\n            return folds.peek().type === Util.constData.BLOCK_COMMENT ? folds.peek() : null;\r\n        } else {\r\n            return stateFold;\r\n        }\r\n    }\r\n    addBracket(option) {\r\n        let tokens = option.tokens;\r\n        let foldMap = option.foldMap;\r\n        let folds = option.folds;\r\n        let startIndex = option.startIndex;\r\n        let endIndex = option.endIndex;\r\n        let stateFold = option.stateFold;\r\n        let text = option.lineText.slice(startIndex, endIndex);\r\n        let reg = foldMap.__foldReg__;\r\n        let res = null;\r\n        let preFold = null;\r\n        if (folds.length) {\r\n            preFold = folds.peek();\r\n        } else {\r\n            preFold = stateFold;\r\n        }\r\n        if (preFold && preFold.type === Util.constData.BLOCK_COMMENT && preFold.side < 0) {\r\n            reg = foldMap.__endCommentReg__;\r\n        }\r\n        while ((res = reg.exec(text))) {\r\n            let type = Util.constData.BRACKET;\r\n            if (foldMap.__comments__.lineComment === res[0]) {\r\n                type = Util.constData.LINE_COMMENT;\r\n            } else if (foldMap.__comments__.blockComment[0] === res[0] || foldMap.__comments__.blockComment[1] === res[0]) {\r\n                type = Util.constData.BLOCK_COMMENT;\r\n            }\r\n            // 如果处于字符串中，则无效\r\n            if (_inString(res)) {\r\n                continue;\r\n            }\r\n            folds.push({\r\n                startIndex: startIndex + res.index,\r\n                endIndex: startIndex + res.index + res[0].length,\r\n                side: foldMap[res[0]],\r\n                type: type,\r\n            });\r\n            if (type === Util.constData.BLOCK_COMMENT && foldMap[res[0]] < 0) {\r\n                foldMap.__endCommentReg__.lastIndex = reg.lastIndex;\r\n                reg.lastIndex = 0;\r\n                reg = foldMap.__endCommentReg__;\r\n            } else if (type === Util.constData.LINE_COMMENT) {\r\n                break;\r\n            }\r\n        }\r\n        reg.lastIndex = 0;\r\n        return folds.length && folds.peek();\r\n\r\n        function _inString(res) {\r\n            let index = res.index;\r\n            for (let i = 0; i < tokens.length; i++) {\r\n                if (tokens[i].startIndex <= index && tokens[i].endIndex > index) {\r\n                    if (tokens[i].isString) {\r\n                        return true;\r\n                    }\r\n                    break;\r\n                } else if (tokens[i].startIndex > index) {\r\n                    break;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    addTagFold(option) {\r\n        let token = option.token;\r\n        let folds = option.folds;\r\n        let foldMap = option.foldMap;\r\n        let lineText = option.lineText;\r\n        if (this.hasTextGrammar && token.scopes.peek().startsWith('entity.name.tag')) {\r\n            //html、xml标签名称\r\n            let tag = lineText.slice(token.startIndex, token.endIndex);\r\n            let side = 0;\r\n            if (foldMap[tag]) {\r\n                side = foldMap[tag];\r\n            } else {\r\n                side = this.foldType++;\r\n                foldMap[tag] = side;\r\n            }\r\n            //开始标签\r\n            if (lineText[token.startIndex - 1] === '<') {\r\n                side = -side;\r\n            }\r\n            folds.push({\r\n                startIndex: token.startIndex,\r\n                endIndex: token.endIndex,\r\n                side: side,\r\n                type: Util.constData.TAG,\r\n            });\r\n            return true;\r\n        }\r\n    }\r\n    splitLongToken(tokens) {\r\n        let result = [];\r\n        tokens.forEach((token) => {\r\n            let length = token.endIndex - token.startIndex;\r\n            if (length > 100) {\r\n                //将文本数量大于100的token分隔\r\n                let startCol = token.startIndex;\r\n                let count = Math.floor(length / 100);\r\n                for (let i = 0; i < count; i++) {\r\n                    let startIndex = i * 100;\r\n                    let endIndex = (i + 1) * 100;\r\n                    endIndex = endIndex > token.endIndex ? token.endIndex : endIndex;\r\n                    result.push({\r\n                        startIndex: startIndex + startCol,\r\n                        endIndex: endIndex,\r\n                        scopes: token.scopes,\r\n                    });\r\n                }\r\n                count = count * 100;\r\n                if (count < length) {\r\n                    result.push({\r\n                        startIndex: count + startCol,\r\n                        endIndex: token.endIndex,\r\n                        scopes: token.scopes,\r\n                    });\r\n                }\r\n            } else {\r\n                result.push(token);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    checkLineVisible(line) {\r\n        let endLine = this.startLine + this.maxVisibleLines;\r\n        endLine = this.folder.getRealLine(endLine);\r\n        if (this.folder.getLineInFold(line)) {\r\n            //该行被包裹\r\n            return false;\r\n        }\r\n        return line >= this.startLine && line <= endLine;\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-01-05 14:28:42\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nconst path = require('path');\r\nconst child_process = require('child_process');\r\n\r\nlet worker = null;\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.initProperties(editor, context);\r\n        this.initLanguage(editor.language);\r\n        this.initEvent();\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, context, ['htmls', 'getAllText']);\r\n        Util.defineProperties(this, editor, ['setErrors']);\r\n    }\r\n    initLanguage(language) {\r\n        if (this.language === language) {\r\n            return;\r\n        }\r\n        this.language = language;\r\n        this.setErrors([]);\r\n        this.initEvent();\r\n        this.parse();\r\n    }\r\n    initEvent() {\r\n        if (worker === null) {\r\n            setTimeout(() => {\r\n                worker = child_process.fork(path.join(globalData.dirname, 'main/process/lint/index.js'));\r\n                _bindMsg.call(this);\r\n            }, 300);\r\n        } else {\r\n            _bindMsg.call(this);\r\n        }\r\n\r\n        function _bindMsg() {\r\n            worker.on('message', (data) => {\r\n                console.log(data);\r\n                if (data.parseId === this.parseId) {\r\n                    this.setErrors(data.results);\r\n                }\r\n            });\r\n            worker.on('close', () => {\r\n                worker = null;\r\n                this.initEvent();\r\n            });\r\n        }\r\n    }\r\n    onInsertContentAfter(nowLine, newLine) {\r\n        clearTimeout(this.parseTimer);\r\n        this.parseId = '';\r\n        this.parseTimer = setTimeout(() => {\r\n            this.parse();\r\n        }, 300);\r\n    }\r\n    onDeleteContentAfter(nowLine, newLine) {\r\n        clearTimeout(this.parseTimer);\r\n        this.parseId = '';\r\n        this.parseTimer = setTimeout(() => {\r\n            this.parse();\r\n        }, 300);\r\n    }\r\n    parse() {\r\n        if (!this.language) {\r\n            return;\r\n        }\r\n        const text = this.getAllText();\r\n        this.parseId = Util.getUUID();\r\n        worker.send({\r\n            text: text,\r\n            parseId: this.parseId,\r\n            language: this.language,\r\n        });\r\n    }\r\n}\r\n","export default {\r\n    TOKEN_TYPE: {\r\n        TEXT: 'text',\r\n        SOURCE: 'source',\r\n        TAG_NAME: 'tag-name',\r\n        ATTR_NAME: 'attr-name',\r\n        STRING: 'string',\r\n        WORD: 'word',\r\n        CSS: 'css',\r\n        CSS_VALUE: 'css-value',\r\n        CSS_PROPERTY: 'css-property',\r\n        CSS_SELECTOR: 'css-selector',\r\n        CSS_TAG: 'css-tag',\r\n        CSS_CLASS: 'css-class',\r\n        CSS_ATTR: 'css-attr',\r\n        CSS_PSEUDO: 'css-pseudo',\r\n        EMMET_HTML: 'emmet-html',\r\n        EMMET_CSS: 'emmet-css'\r\n    },\r\n};\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-03-17 15:29:26\r\n * @Description:\r\n */\r\nimport { extract } from 'emmet';\r\nimport Util from '@/common/util';\r\nimport Enum from '@/data/enum';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nconst path = require('path');\r\n\r\nconst regs = {\r\n    stringToken: /(?:\\.|^)(?:string|regexp)(?:\\.|$)/,\r\n    tagToken: /meta\\.tag/,\r\n    tagNameToken: /entity\\.name\\.tag/,\r\n    tagAttrName: /attribute\\-name/,\r\n    cssValueToken: /property\\-list|property\\-value|separator/,\r\n    cssPropertyToken: /meta\\.property\\-name/,\r\n    cssSelectorToken: /meta\\.selector/,\r\n    cssAttributeToken: /attribute\\-selector/,\r\n    cssClassToken: /attribute\\-name\\.class/,\r\n    cssPseudoToken: /pseudo\\-element/,\r\n    styleCss: /([^\\:\\;\\\"\\'\\s]+)\\s*\\:\\s*([^\\:\\;]+)?$/,\r\n    styleCssProperty: /(?:^|[\\;\\\"\\'])([^\\:\\;]+)$/,\r\n};\r\n\r\nclass Autocomplete {\r\n    constructor(editor, context) {\r\n        this.initProperties(editor, context);\r\n        this.doneMap = {};\r\n        this.results = [];\r\n        this.wordPattern = Util.getWordPattern(this.language);\r\n        this.wordPattern = new RegExp(`^(${this.wordPattern.source})$`);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, ['language', 'cursor', 'nowCursorPos', 'tokenizer', 'autoTipList', 'setAutoTip', 'selectAutoTip']);\r\n        Util.defineProperties(this, context, ['htmls', 'replaceTip', 'insertContent']);\r\n    }\r\n    reset() {\r\n        this.currentLine = 1;\r\n        this.results = [];\r\n        this.doneMap = {};\r\n    }\r\n    stop() {\r\n        cancelIdleCallback(this.searchTimer);\r\n    }\r\n    search() {\r\n        this.stop();\r\n        this.searchTimer = requestIdleCallback(() => {\r\n            this._search();\r\n        });\r\n    }\r\n    emmet() {\r\n        let lineObj = this.htmls[this.nowCursorPos.line - 1];\r\n        let tokenIndex = this.getTokenIndex(this.nowCursorPos);\r\n        let nowToken = lineObj.tokens[tokenIndex];\r\n        let word = nowToken && lineObj.text.slice(nowToken.startIndex, this.nowCursorPos.column);\r\n        let emmetObj = null;\r\n        let type = '';\r\n        if (word) {\r\n            let scope = nowToken.scopes.peek();\r\n            if (scope.startsWith('text.')) {\r\n                emmetObj = extract(word);\r\n                type = Enum.TOKEN_TYPE.EMMET_HTML;\r\n            } else if (this._isCssToken(nowToken)) {\r\n                if (this._isCssPropertyToken(nowToken)) {\r\n                    emmetObj = extract(word, word.length, { type: 'stylesheet' });\r\n                } else if (this._isCssValueToken(nowToken)) {\r\n                    //p10将会被分成pd和10两个token\r\n                    let preToken = lineObj.tokens[tokenIndex - 1];\r\n                    if (preToken && this._isCssPropertyToken(preToken)) {\r\n                        word = lineObj.text.slice(preToken.startIndex, preToken.endIndex) + word;\r\n                        emmetObj = extract(word, word.length, { type: 'stylesheet' });\r\n                    }\r\n                }\r\n                type = Enum.TOKEN_TYPE.EMMET_CSS;\r\n            }\r\n        }\r\n        if (emmetObj) {\r\n            this.replaceTip({ word: emmetObj.abbreviation, result: emmetObj.abbreviation, type: type });\r\n        } else if (this.autoTipList && this.autoTipList.length) {\r\n            this.selectAutoTip();\r\n        } else {\r\n            this.insertContent('\\t');\r\n        }\r\n    }\r\n    _search() {\r\n        let lineObj = this.htmls[this.nowCursorPos.line - 1];\r\n        let tokenIndex = this.getTokenIndex(this.nowCursorPos);\r\n        let nowToken = lineObj.tokens[tokenIndex];\r\n        let word = nowToken && lineObj.text.slice(nowToken.startIndex, this.nowCursorPos.column);\r\n        this.reset();\r\n        this.setAutoTip(null);\r\n        if (!word) {\r\n            return;\r\n        }\r\n        if (this._isTextToken(nowToken)) {\r\n            let scope = nowToken.scopes.peek();\r\n            if (scope.startsWith('text.')) {\r\n                //emmet表达式\r\n                this._searchEmmet(word);\r\n            } else if (this._isTagNameToken(nowToken)) {\r\n                //标签名\r\n                this._searchTagName(word);\r\n            } else if (this._isAttrNameToken(nowToken)) {\r\n                //属性名\r\n                let tag = this._getPreTagName(tokenIndex, this.nowCursorPos.line);\r\n                if (tag) {\r\n                    this._searchTagAttrName(word, tag);\r\n                }\r\n            }\r\n        } else if (this._isCssToken(nowToken)) {\r\n            if (this._isCssPropertyToken(nowToken)) {\r\n                //css属性名\r\n                this._searchCssProperty(word);\r\n            } else if (this._isCssValueToken(nowToken)) {\r\n                //css属性值\r\n                let preToken = lineObj.tokens[tokenIndex - 1];\r\n                //p10将会被分成pd和10两个token\r\n                if (preToken && this._isCssPropertyToken(preToken)) {\r\n                    let preToken = lineObj.tokens[tokenIndex - 1];\r\n                    if (preToken && this._isCssPropertyToken(preToken)) {\r\n                        word = lineObj.text.slice(preToken.startIndex, preToken.endIndex) + word;\r\n                        this._searchCssProperty(word);\r\n                    }\r\n                } else {\r\n                    let property = this._getPreCssProperty(tokenIndex, this.nowCursorPos.line);\r\n                    if (property) {\r\n                        this._searchCssValue(word, property);\r\n                    }\r\n                }\r\n            } else if (this._isCssSelectorToken(nowToken)) {\r\n                if (this._isTagNameToken(nowToken)) {\r\n                    this._searchCssTag(word);\r\n                } else if (word.indexOf(':') > -1) {\r\n                    this._searchCssPseudo(word);\r\n                }\r\n                this._searchSelector(word, nowToken);\r\n            } else if (this._isTagToken(nowToken)) {\r\n                //style种的css样式\r\n                this._searchStyle(word, nowToken);\r\n            }\r\n        } else if (this._isSourceToken(nowToken)) {\r\n            if (this.wordPattern.test(word)) {\r\n                this._searchWord(word, nowToken);\r\n            }\r\n        }\r\n    }\r\n    _searchWord(word, nowToken) {\r\n        this._searchDocument((lineObj) => {\r\n            lineObj.tokens.forEach((token) => {\r\n                if (token === nowToken) {\r\n                    return;\r\n                }\r\n                let text = lineObj.text.slice(token.startIndex, token.endIndex);\r\n                if (this.wordPattern.test(text)) {\r\n                    // 跳过标签和字符串\r\n                    if (this._isTextToken(token) || this._isStringToken(token)) {\r\n                        return;\r\n                    }\r\n                    this._addTip({ word: word, value: text, type: Enum.TOKEN_TYPE.WORD });\r\n                }\r\n            });\r\n        });\r\n    }\r\n    _searchSelector(word, nowToken) {\r\n        if (this._isCssClassToken(nowToken) && word !== '.') {\r\n            word = '.' + word;\r\n        }\r\n        this._searchDocument((lineObj) => {\r\n            lineObj.tokens.forEach((token) => {\r\n                if (token === nowToken) {\r\n                    return;\r\n                }\r\n                if (this._isCssSelectorToken(token)) {\r\n                    let text = lineObj.text.slice(token.startIndex, token.endIndex);\r\n                    if (!this.wordPattern.test(text)) {\r\n                        return;\r\n                    }\r\n                    if (this._isCssClassToken(token)) {\r\n                        text = '.' + text;\r\n                    }\r\n                    if (word === '.') {\r\n                        if (this._isCssClassToken(token) && text !== '..') {\r\n                            this._addTip({ word: word, value: text, type: Enum.TOKEN_TYPE.CSS_CLASS, skipMatch: true });\r\n                        }\r\n                    } else if (this._isCssClassToken(nowToken)) {\r\n                        if (this._isCssClassToken(token)) {\r\n                            this._addTip({ word: word, value: text, type: Enum.TOKEN_TYPE.CSS_CLASS });\r\n                        }\r\n                    } else {\r\n                        this._addTip({ word: word, value: text, type: Enum.TOKEN_TYPE.CSS_SELECTOR });\r\n                    }\r\n                }\r\n            });\r\n        }, true);\r\n    }\r\n    _searchDocument(callback, showAll) {\r\n        let line = this.currentLine;\r\n        let startTime = Date.now();\r\n        let processedLines = 0;\r\n        while (line <= this.htmls.length) {\r\n            let lineObj = this.htmls[line - 1];\r\n            line++;\r\n            if (!lineObj.tokens) {\r\n                continue;\r\n            }\r\n            callback(lineObj);\r\n            processedLines++;\r\n            // 避免卡顿\r\n            if (processedLines % 5 == 0 && Date.now() - startTime >= 20) {\r\n                break;\r\n            }\r\n        }\r\n        this.currentLine = line;\r\n        this._showTip(showAll);\r\n        if (line <= this.htmls.length) {\r\n            this.searchTimer = requestIdleCallback(() => {\r\n                this._searchDocument(callback, showAll);\r\n            });\r\n        }\r\n    }\r\n    _searchTagName(word) {\r\n        const htmlData = this.getHtmlData();\r\n        htmlData.tags.forEach((item) => {\r\n            this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.TAG_NAME });\r\n        });\r\n        if (!this.results.length) {\r\n            this._addTip({ word: word, value: word, type: Enum.TOKEN_TYPE.TAG_NAME, skipMatch: true });\r\n        }\r\n        this._showTip();\r\n    }\r\n    _searchTagAttrName(word, tag) {\r\n        const htmlData = this.getHtmlData();\r\n        let attributes = htmlData.tagMap[tag];\r\n        attributes = attributes && attributes.attributes;\r\n        if (attributes) {\r\n            // 标签专有属性\r\n            attributes.forEach((item) => {\r\n                this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.ATTR_NAME, after: '=\"\"' });\r\n            });\r\n        }\r\n        // 公共属性\r\n        htmlData.globalAttributes.forEach((item) => {\r\n            this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.ATTR_NAME, after: '=\"\"' });\r\n        });\r\n        this._showTip();\r\n    }\r\n    _searchCssTag(word) {\r\n        const htmlData = this.getHtmlData();\r\n        htmlData.tags.forEach((item) => {\r\n            this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_TAG });\r\n        });\r\n    }\r\n    _searchCssPseudo(word) {\r\n        const cssData = this.getCssData();\r\n        const pseudo = word.split(':').peek().trim();\r\n        cssData.pseudoClasses.forEach((item) => {\r\n            if (pseudo) {\r\n                this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PSEUDO });\r\n            } else {\r\n                this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PSEUDO, skipMatch: true });\r\n            }\r\n        });\r\n        cssData.pseudoElements.forEach((item) => {\r\n            if (pseudo) {\r\n                this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PSEUDO });\r\n            } else {\r\n                this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PSEUDO, skipMatch: true });\r\n            }\r\n        });\r\n    }\r\n    _searchStyle(word, nowToken) {\r\n        let column = this.nowCursorPos.column;\r\n        let lineObj = this.htmls[this.nowCursorPos.line - 1];\r\n        let keyValue = null;\r\n        word = lineObj.text.slice(nowToken.startIndex, column);\r\n        keyValue = regs.styleCss.exec(word);\r\n        if (keyValue && keyValue[1]) {\r\n            let property = keyValue[1];\r\n            let value = keyValue[2] || '';\r\n            this._searchCssValue(value, property);\r\n            return;\r\n        }\r\n        keyValue = regs.styleCssProperty.exec(word);\r\n        if (keyValue && keyValue[1]) {\r\n            this._searchCssProperty(keyValue[1]);\r\n        }\r\n    }\r\n    _searchCssProperty(word) {\r\n        const cssData = this.getCssData();\r\n        cssData.properties.forEach((item) => {\r\n            this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_PROPERTY, after: ': ' });\r\n        });\r\n        if (!this.results.length) {\r\n            const emmetObj = extract(word, word.length, { type: 'stylesheet' });\r\n            if (emmetObj && emmetObj.abbreviation) {\r\n                this._addTip({ word: emmetObj.abbreviation, value: emmetObj.abbreviation, type: Enum.TOKEN_TYPE.EMMET_CSS, skipMatch: true });\r\n            }\r\n        }\r\n        this._showTip();\r\n    }\r\n    _searchCssValue(word, property) {\r\n        const cssData = this.getCssData();\r\n        let values = cssData.propertyMap[property];\r\n        values = values && values.values;\r\n        if (values) {\r\n            let _word = word.trim();\r\n            if (_word === ':' || _word === '') {\r\n                values.forEach((item) => {\r\n                    this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_VALUE, before: ' ', after: ';', skipMatch: true });\r\n                });\r\n                this._showTip(true);\r\n            } else {\r\n                values.forEach((item) => {\r\n                    this._addTip({ word: word, value: item.name, type: Enum.TOKEN_TYPE.CSS_VALUE, after: ';' });\r\n                });\r\n                this._showTip();\r\n            }\r\n        }\r\n    }\r\n    _searchEmmet(word) {\r\n        const emmetObj = extract(word);\r\n        if (emmetObj && emmetObj.abbreviation) {\r\n            this._addTip({ word: emmetObj.abbreviation, value: emmetObj.abbreviation, type: Enum.TOKEN_TYPE.EMMET_HTML, skipMatch: true });\r\n            this._showTip();\r\n        }\r\n    }\r\n    _setTokenType(token) {\r\n        token.isSourceToken = false;\r\n        token.isCssToken = false;\r\n        token.isTextToken = false;\r\n        token.isTagToken = false;\r\n        token.isTagAttrNameToken = false;\r\n        token.scope = token.scope || token.scopes.join(' ');\r\n        for (let i = token.scopes.length - 1; i >= 0; i--) {\r\n            let scope = token.scopes[i];\r\n            if (scope.startsWith('source.')) {\r\n                token.isSourceToken = true;\r\n                if (scope.startsWith('source.css')) {\r\n                    token.isCssToken = true;\r\n                }\r\n                break;\r\n            } else if (scope.startsWith('text.')) {\r\n                token.isTextToken = true;\r\n                token.isTagAttrNameToken = regs.tagAttrName.test(token.scope);\r\n                break;\r\n            }\r\n        }\r\n        token.isTagToken = regs.tagToken.test(token.scope);\r\n        token.isTagNameToken = regs.tagNameToken.test(token.scope);\r\n        token.isStringToken = regs.stringToken.test(token.scope);\r\n        if (token.isCssToken) {\r\n            token.isCssValueToken = regs.cssValueToken.test(token.scope);\r\n            token.isCssPropertyToken = regs.cssPropertyToken.test(token.scope);\r\n            token.isCssSelectorToken = regs.cssSelectorToken.test(token.scope);\r\n            token.isCssClassToken = regs.cssClassToken.test(token.scope);\r\n            token.isCssAttributeToken = regs.cssAttributeToken.test(token.scope);\r\n            token.isCssPseudoToken = regs.cssPseudoToken.test(token.scope);\r\n        }\r\n    }\r\n    _isTextToken(token) {\r\n        if (token.isTextToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isTextToken;\r\n    }\r\n    _isSourceToken(token) {\r\n        if (token.isSourceToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isSourceToken;\r\n    }\r\n    _isCssToken(token) {\r\n        if (token.isCssToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssToken;\r\n    }\r\n    _isCssPropertyToken(token) {\r\n        if (token.isCssPropertyToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssPropertyToken;\r\n    }\r\n    _isCssValueToken(token) {\r\n        if (token.isCssValueToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssValueToken;\r\n    }\r\n    _isCssSelectorToken(token) {\r\n        if (token.isCssSelectorToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssSelectorToken;\r\n    }\r\n    _isCssClassToken(token) {\r\n        if (token.isCssClassToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssClassToken;\r\n    }\r\n    _isCssAttributeToken(token) {\r\n        if (token.isCssAttributeToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssAttributeToken;\r\n    }\r\n    _isCssPseudoToken(token) {\r\n        if (token.isCssPseudoToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isCssPseudoToken;\r\n    }\r\n    _isStringToken(token) {\r\n        if (token.isStringToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isStringToken;\r\n    }\r\n    _isTagToken(token) {\r\n        if (token.isTagToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isTagToken;\r\n    }\r\n    _isTagNameToken(token) {\r\n        if (token.isTagNameToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isTagNameToken;\r\n    }\r\n    _isAttrNameToken(token) {\r\n        if (token.isTagAttrNameToken === undefined) {\r\n            this._setTokenType(token);\r\n        }\r\n        return token.isTagAttrNameToken;\r\n    }\r\n    _getPreTagName(tokenIndex, line) {\r\n        let tag = '';\r\n        let count = 0;\r\n        outerLoop: while (line >= 1) {\r\n            let lineObj = this.htmls[line - 1];\r\n            if (!lineObj.tokens) {\r\n                break;\r\n            }\r\n            tokenIndex = tokenIndex > -1 ? tokenIndex : lineObj.tokens.length;\r\n            for (let i = tokenIndex - 1; i >= 0; i--) {\r\n                let token = lineObj.tokens[i];\r\n                if (this._isTagNameToken(token)) {\r\n                    tag = lineObj.text.slice(token.startIndex, token.endIndex);\r\n                    break outerLoop;\r\n                }\r\n                count++;\r\n                if (count > 100) {\r\n                    break outerLoop;\r\n                }\r\n            }\r\n            line--;\r\n            tokenIndex = -1;\r\n        }\r\n        return tag;\r\n    }\r\n    _getPreCssProperty(tokenIndex, line) {\r\n        let property = '';\r\n        let count = 0;\r\n        outerLoop: while (line >= 1) {\r\n            let lineObj = this.htmls[line - 1];\r\n            if (!lineObj.tokens) {\r\n                break;\r\n            }\r\n            tokenIndex = tokenIndex > -1 ? tokenIndex : lineObj.tokens.length;\r\n            for (let i = tokenIndex - 1; i >= 0; i--) {\r\n                let token = lineObj.tokens[i];\r\n                if (this._isCssPropertyToken(token)) {\r\n                    property = lineObj.text.slice(token.startIndex, token.endIndex);\r\n                    break outerLoop;\r\n                }\r\n                count++;\r\n                if (count > 100 || !this._isCssValueToken(token)) {\r\n                    break outerLoop;\r\n                }\r\n            }\r\n            line--;\r\n            tokenIndex = -1;\r\n        }\r\n        return property;\r\n    }\r\n    _addTip(option) {\r\n        let result = null;\r\n        let fullMatch = option.fullMatch;\r\n        fullMatch = fullMatch === undefined ? true : fullMatch;\r\n        if (this.doneMap[option.value] && !option.skipDone) {\r\n            return;\r\n        }\r\n        if (option.skipMatch) {\r\n            result = {\r\n                indexs: [],\r\n                score: 0,\r\n            };\r\n        } else {\r\n            result = Util.fuzzyMatch(option.word.trim(), option.value, fullMatch);\r\n        }\r\n        if (result) {\r\n            let obj = {\r\n                result: option.value,\r\n                word: option.word || '',\r\n                desc: option.desc || '',\r\n                type: option.type || '',\r\n                before: option.before || '',\r\n                after: option.after || '',\r\n                icon: this.getIcon(option.scope),\r\n                indexs: result.indexs,\r\n                score: result.score,\r\n            };\r\n            this.results.push(obj);\r\n            this.doneMap[option.value] = obj;\r\n        } else {\r\n            this.doneMap[option.value] = true;\r\n        }\r\n    }\r\n    _showTip(all) {\r\n        let results = null;\r\n        let limit = all ? 200 : 10;\r\n        this.results.sort((a, b) => {\r\n            return b.score - a.score;\r\n        });\r\n        results = this.results.slice(0, limit);\r\n        this.setAutoTip(results);\r\n    }\r\n    checkEmmetValid(text) {\r\n        let _text = '';\r\n        if (regs.invalidEmmetParen.exec(text)) {\r\n            return false;\r\n        }\r\n        while (text !== (_text = text.replace(regs.paremEmmet, 'a'))) {\r\n            text = _text;\r\n        }\r\n        return !!regs.emmet.exec(text);\r\n    }\r\n    getTokenIndex(cursorPos) {\r\n        let tokens = this.htmls[cursorPos.line - 1].tokens;\r\n        if (tokens) {\r\n            for (let i = 0; i < tokens.length; i++) {\r\n                if (tokens[i].startIndex < cursorPos.column && tokens[i].endIndex >= cursorPos.column) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    getHtmlData() {\r\n        if (this.htmlData) {\r\n            return this.htmlData;\r\n        } else {\r\n            const htmlData = require(path.join(globalData.dirname, 'main/data/browsers.html-data'));\r\n            this.htmlData = htmlData;\r\n            htmlData.tagMap = {};\r\n            htmlData.tags.forEach((item) => {\r\n                htmlData.tagMap[item.name] = item;\r\n            });\r\n            return this.htmlData;\r\n        }\r\n    }\r\n    getCssData() {\r\n        if (this.cssData) {\r\n            return this.cssData;\r\n        } else {\r\n            const cssData = require(path.join(globalData.dirname, 'main/data/browsers.css-data'));\r\n            this.cssData = cssData;\r\n            cssData.propertyMap = {};\r\n            cssData.properties.forEach((item) => {\r\n                cssData.propertyMap[item.name] = item;\r\n            });\r\n            return this.cssData;\r\n        }\r\n    }\r\n    getIcon(scope) {\r\n        return '';\r\n    }\r\n}\r\n\r\nexport default Autocomplete;\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-03-04 16:13:41\r\n * @Description: \r\n */\r\nclass Node {\r\n    constructor(max) {\r\n        this.dataList = new Array(max + 1);\r\n        this.linkList = new Array(max + 2);\r\n        this.num = 0;\r\n        this.next = null;\r\n        this.prev = null;\r\n        this.pNode = null;\r\n    }\r\n}\r\nclass Btree {\r\n    /**\r\n     * 构造器\r\n     * @param {Function} compare 比较器\r\n     * @param {Number} max 节点可存储的最大数量 \r\n     */\r\n    constructor(compare, max) {\r\n        this.max = max || 4;\r\n        this.root = null;\r\n        this.head = null;\r\n        this.size = 0;\r\n        this.compare = compare || function (a, b) {\r\n            return a - b;\r\n        }\r\n    }\r\n    /**\r\n     * 插入\r\n     * @param {Any} value \r\n     */\r\n    insert(value) {\r\n        if (!this.root) {\r\n            let node = new Node(this.max);\r\n            node.dataList[0] = value;\r\n            node.num++;\r\n            this.root = node;\r\n            this.head = node;\r\n            this.size++;\r\n            this.arrayCache = null;\r\n            return;\r\n        }\r\n        let node = this._search(value, true);\r\n        let link = null;\r\n        let half = Math.floor(this.max / 2) || 1; //m为1时，n应该也为1\r\n        let result = this.iterator(node, value);\r\n        if (this.findIndex(node, value) > -1) { //value已经存在，直接返回\r\n            return result;\r\n        }\r\n        this.size++;\r\n        this.arrayCache = null;\r\n        while (node) {\r\n            let linkList = node.linkList;\r\n            let dataList = node.dataList;\r\n            for (let i = 0; i < node.num; i++) {\r\n                let data = dataList[i];\r\n                if (this.compare(value, data) < 0) {\r\n                    _insert(dataList, linkList, i);\r\n                    break;\r\n                } else if (i === node.num - 1) {\r\n                    _insert(dataList, linkList, i + 1);\r\n                }\r\n            }\r\n            node.num++; //关键字数量加1\r\n            if (node.num <= this.max) { //存储数量未超过最大限制，直接结束插入\r\n                break;\r\n            }\r\n            let newNode = new Node(this.max);\r\n            let isPnode = node.linkList[0];\r\n            value = dataList[half]; //父节点需要插入的值\r\n            if (!isPnode) { //叶子节点更新前后件\r\n                if (node.next) {\r\n                    node.next.prev = newNode;\r\n                }\r\n                newNode.next = node.next;\r\n                node.next = newNode;\r\n                newNode.prev = node;\r\n                newNode.pNode = node.pNode;\r\n            }\r\n            link = newNode;\r\n            //复制数据到新节点，如果是叶子节点，需要把value留在叶子节点中\r\n            for (let i = (isPnode ? half + 1 : half), j = 0; i < node.num; i++, j++) {\r\n                newNode.dataList[j] = dataList[i];\r\n                newNode.linkList[j + 1] = linkList[i + 1];\r\n                if (newNode.linkList[j + 1]) {\r\n                    newNode.linkList[j + 1].pNode = newNode;\r\n                }\r\n                dataList[i] = null;\r\n                linkList[i + 1] = null;\r\n                newNode.num++;\r\n            }\r\n            node.num = half; //关键字数量为最大值的一半\r\n            if (isPnode) {\r\n                node.dataList[node.num] = null;\r\n                // 非叶子节点，需要把左侧最后一个指针域复制过来\r\n                newNode.linkList[0] = node.linkList[node.num + 1];\r\n                if (newNode.linkList[0]) {\r\n                    newNode.linkList[0].pNode = newNode;\r\n                }\r\n                node.linkList[node.num + 1] = null;\r\n            }\r\n            if (!node.pNode) { //上溢到了根节点\r\n                this.root = new Node(this.max);\r\n                this.root.dataList[0] = value;\r\n                this.root.linkList[0] = node;\r\n                this.root.linkList[1] = newNode;\r\n                this.root.num = 1;\r\n                node.pNode = this.root;\r\n                newNode.pNode = this.root;\r\n                break;\r\n            }\r\n            node = node.pNode;\r\n        }\r\n        return result;\r\n\r\n        // 在i位置插入数据\r\n        function _insert(dataList, linkList, i) {\r\n            for (let j = node.num; j >= i + 1; j--) { //后移元素\r\n                dataList[j] = dataList[j - 1];\r\n                linkList[j + 1] = linkList[j];\r\n            }\r\n            dataList[i] = value;\r\n            linkList[i + 1] = link;\r\n            if (link) {\r\n                link.pNode = node;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 删除\r\n     * @param {Any} value \r\n     */\r\n    delete(value) {\r\n        let that = this;\r\n        let node = this._search(value);\r\n        let result = null;\r\n        let half = Math.floor(this.max / 2) || 1;\r\n        if (node) {\r\n            let dataList = node.dataList;\r\n            let index = this.findIndex(node, value);\r\n            result = dataList[index];\r\n            for (let i = index; i < node.num; i++) { //前移元素\r\n                dataList[i] = dataList[i + 1];\r\n            }\r\n            node.num--;\r\n            this.size--;\r\n            this.arrayCache = null;\r\n            if (!this.size) {\r\n                this.root = null;\r\n                return result;\r\n            }\r\n        }\r\n        while (node && node.num < half && node.pNode) {\r\n            let pNode = node.pNode;\r\n            let pIndex = pNode.linkList.indexOf(node);\r\n            let leftNode = pNode.linkList[pIndex - 1];\r\n            let rightNode = pNode.linkList[pIndex + 1];\r\n            let isPnode = node.linkList[0];\r\n            if (leftNode && leftNode.num > half) { //从左节点借\r\n                _moveRight(node, 1);\r\n                if (isPnode) {\r\n                    node.dataList[0] = pNode.dataList[pIndex - 1];\r\n                    node.linkList[0] = leftNode.linkList[leftNode.num];\r\n                    pNode.dataList[pIndex - 1] = leftNode.dataList[leftNode.num - 1];\r\n                } else {\r\n                    node.dataList[0] = leftNode.dataList[leftNode.num - 1];\r\n                    pNode.dataList[pIndex - 1] = node.dataList[0];\r\n                }\r\n                if (node.linkList[0]) {\r\n                    node.linkList[0].pNode = node;\r\n                }\r\n                pNode.dataList[pIndex - 1] = leftNode.dataList[leftNode.num - 1];\r\n                leftNode.dataList[leftNode.num - 1] = null;\r\n                leftNode.linkList[leftNode.num] = null;\r\n                leftNode.num--;\r\n                node.num++;\r\n            } else if (rightNode && rightNode.num > half) { //从右节点借\r\n                if (isPnode) {\r\n                    node.dataList[node.num] = pNode.dataList[pIndex];\r\n                    node.linkList[node.num + 1] = rightNode.linkList[0];\r\n                    pNode.dataList[pIndex] = rightNode.dataList[0];\r\n                } else {\r\n                    node.dataList[node.num] = rightNode.dataList[0];\r\n                    pNode.dataList[pIndex] = rightNode.dataList[1];\r\n                }\r\n                if (node.linkList[node.num + 1]) {\r\n                    node.linkList[node.num + 1].pNode = node;\r\n                }\r\n                _moveLeft(rightNode, 1);\r\n                rightNode.num--;\r\n                node.num++;\r\n            } else if (rightNode) { //向右合并\r\n                _join(node.pNode, pIndex, node, rightNode);\r\n            } else if (leftNode) { //向左合并\r\n                _join(node.pNode, pIndex - 1, leftNode, node);\r\n            }\r\n        }\r\n        return result;\r\n\r\n        function _join(pNode, pIndex, leftNode, rightNode) {\r\n            let isPnode = leftNode.linkList[0] ? 1 : 0;\r\n            // 右移右节点\r\n            _moveRight(rightNode, leftNode.num + isPnode);\r\n            //复制左节点到右节点\r\n            for (let i = 0; i < leftNode.num; i++) {\r\n                rightNode.dataList[i] = leftNode.dataList[i];\r\n                rightNode.linkList[i + 1] = leftNode.linkList[i + 1];\r\n                if (rightNode.linkList[i + 1]) {\r\n                    rightNode.linkList[i + 1].pNode = rightNode;\r\n                }\r\n            }\r\n            rightNode.linkList[0] = leftNode.linkList[0];\r\n            if (rightNode.linkList[0]) {\r\n                rightNode.linkList[0].pNode = rightNode;\r\n            }\r\n            if (isPnode) { //当前节点非叶子节点，父节点下移\r\n                rightNode.dataList[leftNode.num] = pNode.dataList[pIndex];\r\n            }\r\n            _moveLeft(pNode, 1, pIndex); //删除父节点和左域\r\n            rightNode.num += leftNode.num + isPnode;\r\n            pNode.num--;\r\n            if (!isPnode) { //叶子节点更新前后件\r\n                if (that.head === leftNode) { //头结点被删除\r\n                    that.head = rightNode;\r\n                    that.head.prev = null;\r\n                } else {\r\n                    leftNode.prev.next = rightNode;\r\n                    rightNode.prev = leftNode.prev;\r\n                }\r\n            }\r\n            if (!pNode.num) { //已经到了根节点\r\n                that.root = rightNode;\r\n                that.root.pNode = null;\r\n                node = null;\r\n            } else {\r\n                node = pNode;\r\n            }\r\n        }\r\n\r\n        //右移num个节点\r\n        function _moveRight(target, num) {\r\n            for (let i = target.num - 1; i >= 0; i--) {\r\n                target.dataList[num + i] = target.dataList[i];\r\n                target.linkList[num + i + 1] = target.linkList[i + 1];\r\n            }\r\n            target.linkList[num] = target.linkList[0];\r\n        }\r\n\r\n        //左移num个节点\r\n        function _moveLeft(target, num, index) {\r\n            index = index || 0;\r\n            for (let i = index; i < target.num; i++) {\r\n                target.dataList[i] = target.dataList[i + num];\r\n                target.linkList[i] = target.linkList[i + num];\r\n            }\r\n            target.linkList[target.num] = target.linkList[target.num + num];\r\n        }\r\n    }\r\n    /**\r\n     * 查找\r\n     * @param {Any} value \r\n     * @param {Function} compare 自定义查找比较器 \r\n     * @param {Boolean} insert 是否查找查找最近的节点 \r\n     */\r\n    search(value, compare, insert) {\r\n        let result = this._search(value, insert, compare);\r\n        if (result) {\r\n            result = this.iterator(result, value, compare);\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * @param {Node} node \r\n     * @param {Any} value \r\n     */\r\n    findIndex(node, value) {\r\n        for (let i = 0; i < node.num; i++) {\r\n            if (this.compare(value, node.dataList[i]) === 0) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    /**\r\n     * 把搜索结果封装成迭代器\r\n     * @param {Node} result \r\n     * @param {Any} value \r\n     */\r\n    iterator(result, value, compare) {\r\n        let index = result.num;\r\n        let orginIndex = result.num;\r\n        let originResult = result.num;\r\n        compare = compare || this.compare;\r\n        for (let i = 0; i < result.num; i++) {\r\n            let item = result.dataList[i];\r\n            let res = compare(value, item);\r\n            if(res <= 0) { //确保next一定大于等于当前值value\r\n                orginIndex = i;\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return {\r\n            next: _next,\r\n            prev: _prev,\r\n            reset: function () {\r\n                index = orginIndex;\r\n                result = originResult;\r\n            }\r\n        }\r\n\r\n        function _next() {\r\n            if (index < result.num) {\r\n                return result.dataList[index++];\r\n            } else if (result.next) {\r\n                result = result.next;\r\n                index = 0;\r\n                return result.dataList[index];\r\n            }\r\n            return null;\r\n        }\r\n\r\n        function _prev() {\r\n            index--;\r\n            if (index >= 0) {\r\n                return result.dataList[index];\r\n            } else if (result.prev) {\r\n                result = result.prev;\r\n                index = result.num - 1;\r\n                return result.dataList[index];\r\n            } else {\r\n                index++;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n    forEach(cb) {\r\n        let arr = this.toArray();\r\n        for (let i = 0; i < arr.length; i++) {\r\n            cb(arr[i], i);\r\n        }\r\n    }\r\n    toArray() {\r\n        if (this.arrayCache) {\r\n            return this.arrayCache;\r\n        }\r\n        let results = [];\r\n        let node = this.head;\r\n        while (node) {\r\n            let dataList = node.dataList;\r\n            for (let index = 0; index < node.num; index++) {\r\n                results.push(dataList[index]);\r\n            }\r\n            node = node.next;\r\n        }\r\n        this.arrayCache = results;\r\n        return results;\r\n    }\r\n    get(index) {\r\n        let node = this.head;\r\n        let count = -1;\r\n        while (node) {\r\n            let dataList = node.dataList;\r\n            for (let i = 0; i < node.num; i++) {\r\n                count++;\r\n                if (count == index) {\r\n                    return dataList[i];\r\n                }\r\n            }\r\n            node = node.next;\r\n        }\r\n        return null;\r\n    }\r\n    empty() {\r\n        this.root = null;\r\n        this.head = null;\r\n        this.size = 0;\r\n        this.arrayCache = null;\r\n    }\r\n    _search(value, isInsert, compare) {\r\n        let node = this.root;\r\n        compare = compare || this.compare;\r\n        while (node) {\r\n            let linkList = node.linkList;\r\n            let dataList = node.dataList;\r\n            for (let i = 0; i < node.num; i++) {\r\n                let res = compare(value, dataList[i]);\r\n                if (res === 0) {\r\n                    if (linkList[i + 1]) { //右侧子节点存放了父节点\r\n                        node = linkList[i + 1];\r\n                        break;\r\n                    } else {\r\n                        return node;\r\n                    }\r\n                } else if (res > 0) {\r\n                    if (!dataList[i + 1] || compare(value, dataList[i + 1]) < 0) { //目标在右侧子树中\r\n                        if (linkList[i + 1]) {\r\n                            node = linkList[i + 1];\r\n                            break;\r\n                        } else {\r\n                            return isInsert ? node : null;\r\n                        }\r\n                    }\r\n                } else { //目标在左侧子树中\r\n                    if (linkList[i]) {\r\n                        node = linkList[i];\r\n                        break;\r\n                    } else {\r\n                        return isInsert ? node : null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Btree;","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-31 14:42:01\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport Btree from '@/common/btree';\r\n\r\nconst comparator = function (a, b) {\r\n    return a.start.line - b.start.line;\r\n};\r\n\r\nconst singleTag = ['br', 'hr', 'area', 'base', 'img', 'input', 'link', 'meta', 'basefont', 'param', 'col', 'frame', 'embed', 'keygen', 'source'];\r\nconst singleTagMap = {};\r\nsingleTag.forEach((tag) => {\r\n    singleTagMap[tag] = true;\r\n});\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.folds = new Btree(comparator);\r\n        this.editorFunObj = {};\r\n        this.initProperties(editor, context);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this.editorFunObj, editor, ['unFold']);\r\n        Util.defineProperties(this, editor, ['selecter']);\r\n        Util.defineProperties(this, context, ['htmls']);\r\n    }\r\n    onInsertContentAfter(preCursorPos, cursorPos) {\r\n        let folds = this.folds.toArray();\r\n        let afterIndex = Infinity;\r\n        // 历史记录中操作光标在折叠区，需要先展开\r\n        for (let i = 0; i < folds.length; i++) {\r\n            let fold = folds[i];\r\n            if (fold.start.line < preCursorPos.line) {\r\n                if (fold.end.line > preCursorPos.line) {\r\n                    this.editorFunObj.unFold(fold.start.line);\r\n                }\r\n            } else {\r\n                afterIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        if (cursorPos.line > preCursorPos.line) {\r\n            if (folds[afterIndex] && folds[afterIndex].start.line === preCursorPos.line) {\r\n                this.editorFunObj.unFold(preCursorPos.line);\r\n                afterIndex++;\r\n            }\r\n            // 更新后面的行号\r\n            for (let i = afterIndex; i < folds.length; i++) {\r\n                folds[i].start.line += cursorPos.line - preCursorPos.line;\r\n                folds[i].end.line += cursorPos.line - preCursorPos.line;\r\n            }\r\n        }\r\n    }\r\n    onDeleteContentAfter(preCursorPos, cursorPos) {\r\n        let folds = this.folds.toArray();\r\n        let afterIndex = Infinity;\r\n        for (let i = 0; i < folds.length; i++) {\r\n            let fold = folds[i];\r\n            let starLine = fold.start.line;\r\n            let endLine = fold.end.line;\r\n            if (starLine <= preCursorPos.line) {\r\n                if (starLine < preCursorPos.line) {\r\n                    if ((starLine >= cursorPos.line && starLine < preCursorPos.line) || (starLine < cursorPos.line && endLine > cursorPos.line)) {\r\n                        this.editorFunObj.unFold(starLine);\r\n                    }\r\n                } else {\r\n                    if (preCursorPos.line > cursorPos.line) {\r\n                        this.editorFunObj.unFold(starLine);\r\n                    }\r\n                }\r\n            } else {\r\n                afterIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        if (preCursorPos.line > cursorPos.line) {\r\n            // 更新后面的行号\r\n            for (let i = afterIndex; i < folds.length; i++) {\r\n                folds[i].start.line += cursorPos.line - preCursorPos.line;\r\n                folds[i].end.line += cursorPos.line - preCursorPos.line;\r\n            }\r\n        }\r\n    }\r\n    // 折叠行\r\n    foldLine(line) {\r\n        let resultFold = this.getRangeFold(line);\r\n        if (resultFold) {\r\n            // 避免交叉折叠\r\n            for (let line = resultFold.start.line + 1; line < resultFold.end.line; line++) {\r\n                let fold = this.getFoldByLine(line);\r\n                if (fold) {\r\n                    if (fold.end.line > resultFold.end.line) {\r\n                        this.editorFunObj.unFold(line);\r\n                    }\r\n                }\r\n            }\r\n            this.folds.insert(resultFold);\r\n        }\r\n        return resultFold;\r\n    }\r\n    // 展开折叠行\r\n    unFold(line) {\r\n        let fold = this.getFoldByLine(line);\r\n        fold && this.folds.delete(fold);\r\n        return fold;\r\n    }\r\n    getFoldByLine(line) {\r\n        let it = this.folds.search(line, (a, b) => {\r\n            return a - b.start.line;\r\n        });\r\n        return it && it.next();\r\n    }\r\n    getLineInFold(line) {\r\n        let it = this.folds.search(\r\n            line,\r\n            (a, b) => {\r\n                return a - b.start.line;\r\n            },\r\n            true\r\n        );\r\n        if (it) {\r\n            let fold = it.prev();\r\n            if (fold && fold.start.line < line && fold.end.line > line) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * 获取折叠范围\r\n     * @param {Number} line 行号\r\n     * @param {Boolean} foldIconCheck 检测是否显示折叠图标\r\n     */\r\n    getRangeFold(line, foldIconCheck) {\r\n        let stack = [];\r\n        let startLine = line;\r\n        let lineObj = this.htmls[startLine - 1];\r\n        let startFold = null;\r\n        if (lineObj.folds && lineObj.folds.length) {\r\n            for (let i = 0; i < lineObj.folds.length; i++) {\r\n                let fold = lineObj.folds[i];\r\n                if (fold.side <= 0) {\r\n                    stack.push(fold);\r\n                } else if (fold.side > 0) {\r\n                    for (let i = stack.length - 1; i >= 0; i--) {\r\n                        if (stack[i].side + fold.side === 0) {\r\n                            stack.splice(i, 1);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (stack.length) {\r\n            let foldStartText = '';\r\n            startFold = stack.peek();\r\n            startFold = Object.assign({ line: startLine }, startFold);\r\n            foldStartText = lineObj.text.slice(startFold.startIndex, startFold.endIndex);\r\n            // 单标签没有折叠\r\n            if (singleTagMap[foldStartText]) {\r\n                return false;\r\n            }\r\n            // 单行注释\r\n            if (startFold.type === Util.constData.LINE_COMMENT) {\r\n                let endLine = startLine;\r\n                let fold = null;\r\n                line = startLine + 1;\r\n                while (line <= this.htmls.length) {\r\n                    let lineObj = this.htmls[line - 1];\r\n                    let text = lineObj.text.trimLeft();\r\n                    let startIndex = lineObj.text.length - text.length;\r\n                    let _fold = lineObj.folds && lineObj.folds[0];\r\n                    if (_fold && _fold.type === Util.constData.LINE_COMMENT && _fold.startIndex === startIndex) {\r\n                        endLine = line;\r\n                        fold = _fold;\r\n                        if (foldIconCheck && endLine - startLine > 1) {\r\n                            return true;\r\n                        }\r\n                        line++;\r\n                    } else {\r\n                        break;\r\n                    }\r\n                }\r\n                if (foldIconCheck) {\r\n                    return endLine - startLine > 1;\r\n                } else {\r\n                    return {\r\n                        start: startFold,\r\n                        end: Object.assign({ line: endLine }, fold),\r\n                    };\r\n                }\r\n            }\r\n            return this.getRangeFoldByStartFold(startFold, foldIconCheck);\r\n        }\r\n        return false;\r\n    }\r\n    getRangeFoldByStartFold(startFold, foldIconCheck) {\r\n        let line = startFold.line;\r\n        let stack = [];\r\n        let resultFold = null;\r\n        while (line <= this.htmls.length && (!foldIconCheck || line - startFold.line <= 1)) {\r\n            let lineObj = this.htmls[line - 1];\r\n            if (lineObj.folds && lineObj.folds.length) {\r\n                for (let i = 0; i < lineObj.folds.length; i++) {\r\n                    let fold = lineObj.folds[i];\r\n                    if (line === startFold.line && fold.startIndex <= startFold.startIndex) {\r\n                        continue;\r\n                    }\r\n                    if (fold.side === startFold.side) {\r\n                        stack.push(fold);\r\n                    } else if (startFold.side + fold.side === 0) {\r\n                        if (stack.length === 0) {\r\n                            resultFold = {\r\n                                start: startFold,\r\n                                end: Object.assign({ line: line }, fold),\r\n                            };\r\n                            return foldIconCheck ? line - startFold.line > 1 : resultFold;\r\n                        } else {\r\n                            stack.pop();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            line++;\r\n        }\r\n        return foldIconCheck ? line - startFold.line > 1 : resultFold;\r\n    }\r\n    /**\r\n     * 获取当前光标所处的范围\r\n     * @param {Object} cursorPos\r\n     */\r\n    getBracketMatch(cursorPos) {\r\n        let line = cursorPos.line;\r\n        let startFold = null;\r\n        let stack = [];\r\n        outerLoop: while (line >= 1 && !startFold) {\r\n            let folds = this.htmls[line - 1].folds || [];\r\n            for (let i = folds.length - 1; i >= 0; i--) {\r\n                let fold = folds[i];\r\n                // 跳过标签名\r\n                if(fold.type === Util.constData.TAG) {\r\n                    continue;\r\n                } else if (fold.side > 0 && (line < cursorPos.line || fold.endIndex < cursorPos.column)) {\r\n                    stack.push(fold);\r\n                } else if (fold.side < 0 && (line < cursorPos.line || fold.startIndex <= cursorPos.column)) {\r\n                    let exsitEnd = false;\r\n                    if (stack.length) {\r\n                        for (let i = stack.length - 1; i >= 0; i--) {\r\n                            if (stack[i].side + fold.side === 0) {\r\n                                stack.splice(i, 1);\r\n                                exsitEnd = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (!exsitEnd) {\r\n                        startFold = Object.assign({ line: line }, fold);\r\n                        break outerLoop;\r\n                    }\r\n                }\r\n            }\r\n            line--;\r\n        }\r\n        if (startFold) {\r\n            return this.getRangeFoldByStartFold(startFold);\r\n        }\r\n    }\r\n    // 根据相对行号获取真实行号(折叠后行号会改变)\r\n    getRealLine(line) {\r\n        let i = 0;\r\n        let lineCount = 1;\r\n        let realLine = 1;\r\n        let folds = this.folds.toArray();\r\n        while (i < folds.length && lineCount < line) {\r\n            let fold = folds[i];\r\n            if (lineCount + fold.start.line - realLine < line) {\r\n                lineCount += fold.start.line + 1 - realLine;\r\n                realLine = fold.end.line;\r\n            } else {\r\n                break;\r\n            }\r\n            i++;\r\n            while (i < folds.length && folds[i].end.line <= fold.end.line) {\r\n                //多级折叠\r\n                i++;\r\n            }\r\n        }\r\n        realLine += line - lineCount;\r\n        return realLine;\r\n    }\r\n    // 根据真实行号获取相对行号\r\n    getRelativeLine(line) {\r\n        let relLine = line;\r\n        let i = 0;\r\n        let folds = this.folds.toArray();\r\n        while (i < folds.length) {\r\n            let fold = folds[i];\r\n            if (line >= fold.end.line) {\r\n                relLine -= fold.end.line - fold.start.line - 1;\r\n            } else {\r\n                break;\r\n            }\r\n            i++;\r\n            while (i < folds.length && folds[i].end.line <= fold.end.line) {\r\n                //多级折叠\r\n                i++;\r\n            }\r\n        }\r\n        return relLine;\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-12 09:52:06\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\n\r\nexport default class {\r\n    constructor(editor, context, selecter) {\r\n        this.selecter = selecter;\r\n        this.initProperties(editor, context);\r\n        this.wordPattern = Util.getWordPattern(this.language);\r\n        this.wholeWordPattern = new RegExp(`^(${this.wordPattern.source})$`);\r\n        this.wordPattern = new RegExp(this.wordPattern.source, 'g');\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, ['language', 'fSearcher', 'searcher', 'nowCursorPos', 'cursor', '$nextTick', '$refs']);\r\n        Util.defineProperties(this, context, ['htmls', 'getRangeText', 'getAllText']);\r\n    }\r\n    search(searchObj) {\r\n        let resultObj = null;\r\n        let now = 0;\r\n        let count = 0;\r\n        let hasCache = this.hasCache();\r\n        let config = null;\r\n        searchObj = searchObj || {};\r\n        if (hasCache) {\r\n            resultObj = this.getFromCache(searchObj.direct, searchObj.increase);\r\n        } else {\r\n            config = (searchObj && searchObj.config) || this.getSearchConfig();\r\n            if (!config || !config.text) {\r\n                return { now: 0, count: 0 };\r\n            }\r\n            resultObj = this._search(config);\r\n        }\r\n        if (resultObj && resultObj.result) {\r\n            if (this.searcher === this || searchObj.increase) {\r\n                if (hasCache) {\r\n                    this.cursor.addCursorPos(resultObj.result.end);\r\n                    this.selecter.addActive(resultObj.result.end);\r\n                } else {\r\n                    //当前光标已处于选中区域边界，则不处理（历史记录后退时可能存在多个选中区域的情况）\r\n                    if (this.selecter.activedRanges.size === 0) {\r\n                        this.cursor.setCursorPos(resultObj.result.end);\r\n                    } else {\r\n                        this.initIndexs();\r\n                    }\r\n                    this.selecter.addRange(resultObj.results);\r\n                }\r\n            } else {\r\n                if (hasCache) {\r\n                    this.selecter.setActive(resultObj.result.end);\r\n                    this.cursor.setCursorPos(resultObj.result.end);\r\n                    this.searcher.clearSearch(); //搜索框确认搜索后，删除按键搜索\r\n                } else {\r\n                    this.selecter.addRange(resultObj.results);\r\n                    this.clearActive();\r\n                }\r\n            }\r\n            now = resultObj.now;\r\n            count = resultObj.results.length;\r\n        }\r\n\r\n        return {\r\n            now: now,\r\n            count: count,\r\n        };\r\n    }\r\n    _search(config) {\r\n        let that = this;\r\n        let reg = null;\r\n        let exec = null;\r\n        let start = null;\r\n        let end = null;\r\n        let result = null;\r\n        let results = [];\r\n        let indexs = {};\r\n        let rangePos = null;\r\n        let line = 1;\r\n        let column = 0;\r\n        let index = 0;\r\n        let text = this.getAllText();\r\n        let lines = config.text.split(/\\n/);\r\n        let source = config.text.replace(/\\\\|\\.|\\*|\\+|\\-|\\?|\\(|\\)|\\[|\\]|\\{|\\}|\\^|\\$|\\~|\\!|\\&|\\|/g, '\\\\$&');\r\n        //完整匹配\r\n        if (this.wholeWordPattern.test(config.text) && config.wholeWord) {\r\n            source = '(?:\\\\b|(?<=[^0-9a-zA-Z]))' + source + '(?:\\\\b|(?=[^0-9a-zA-Z]))';\r\n        }\r\n        reg = new RegExp('[^\\n]*?(' + source + ')|[^\\n]*?\\n', config.ignoreCase ? 'img' : 'mg');\r\n        config = config || {};\r\n        while ((exec = reg.exec(text))) {\r\n            if (!exec[1]) {\r\n                line++;\r\n                column = 0;\r\n            } else {\r\n                start = {\r\n                    line: line,\r\n                    column: column + exec[0].length - exec[1].length,\r\n                };\r\n                end = {\r\n                    line: line + lines.length - 1,\r\n                    column: lines.length > 1 ? lines.peek().length : column + exec[0].length,\r\n                };\r\n                line = end.line;\r\n                column = end.column;\r\n                rangePos = {\r\n                    start: start,\r\n                    end: end,\r\n                };\r\n                results.push(rangePos);\r\n                if (!result && Util.comparePos(end, that.nowCursorPos) >= 0) {\r\n                    result = rangePos;\r\n                    index = results.length - 1;\r\n                    indexs[results.length - 1] = true;\r\n                }\r\n            }\r\n        }\r\n        if (!results.length) {\r\n            return null;\r\n        }\r\n        if (!result && results.length) {\r\n            index = 0;\r\n            result = results[0];\r\n        }\r\n        this.cacheData = {\r\n            config: config,\r\n            results: results,\r\n            indexs: indexs,\r\n            index: index,\r\n        };\r\n        return {\r\n            now: this.cacheData.index + 1,\r\n            results: results,\r\n            result: result,\r\n        };\r\n    }\r\n    initIndexs() {\r\n        let ranges = this.selecter.activedRanges.toArray();\r\n        this.cacheData.indexs = {};\r\n        ranges.forEach((range) => {\r\n            for (let i = 0; i < this.cacheData.results.length; i++) {\r\n                let item = this.cacheData.results[i];\r\n                if (Util.comparePos(range.start, item.start) === 0) {\r\n                    this.cacheData.index = i;\r\n                    this.cacheData.indexs[i] = true;\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    // 重新搜索\r\n    refreshSearch(config) {\r\n        if (!this.hasCache() && !config) {\r\n            return;\r\n        }\r\n        return new Promise((resolve) => {\r\n            let refreshSearchId = this.refreshSearch.id + 1 || 1;\r\n            this.refreshSearch.id = refreshSearchId;\r\n            this.$nextTick(() => {\r\n                if (this.refreshSearch.id !== refreshSearchId) {\r\n                    return;\r\n                }\r\n                if (this.hasCache() || config) {\r\n                    config = config || this.cacheData.config;\r\n                    this.clearSearch();\r\n                    this.search({\r\n                        config: config,\r\n                    });\r\n                }\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n    hasCache() {\r\n        return !!this.cacheData;\r\n    }\r\n    /**\r\n     * 清除搜索\r\n     * @param {Boolean} retainActive 是否保留活动的选中区域\r\n     */\r\n    clearSearch(retainActive) {\r\n        if (retainActive) {\r\n            this.selecter.clearInactiveRange();\r\n        } else {\r\n            this.selecter.clearRange();\r\n        }\r\n        this.cacheData = null;\r\n    }\r\n    clearActive() {\r\n        if (this.cacheData) {\r\n            this.cacheData.index = -1;\r\n            this.cacheData.indexs = {};\r\n            this.selecter.clearActive();\r\n        }\r\n    }\r\n    setPrevActive(cursorPos) {\r\n        let results = this.cacheData.results;\r\n        let index = this.cacheData.index;\r\n        this.cacheData.index = results.length - 1;\r\n        for (let i = results.length - 1; i >= 0; i--) {\r\n            let item = results[i];\r\n            let res = Util.comparePos(item.end, cursorPos);\r\n            if (res < 0 || (index === -1 && res === 0)) {\r\n                this.cacheData.index = i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    setNextActive(cursorPos) {\r\n        let results = this.cacheData.results;\r\n        let index = this.cacheData.index;\r\n        this.cacheData.index = 0;\r\n        for (let i = 0; i < results.length; i++) {\r\n            let item = results[i];\r\n            let res = Util.comparePos(item.end, cursorPos);\r\n            if (res > 0 || (index === -1 && res === 0)) {\r\n                this.cacheData.index = i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    removeNow() {\r\n        this.cacheData.results.splice(this.cacheData.index, 1);\r\n        this.cacheData.index--;\r\n    }\r\n    clone(cacheData) {\r\n        this.cacheData = cacheData;\r\n        if (cacheData) {\r\n            this.selecter.addRange(cacheData.results);\r\n        }\r\n    }\r\n    getCacheData() {\r\n        return this.cacheData;\r\n    }\r\n    getNowRange() {\r\n        return this.cacheData.results[this.cacheData.index];\r\n    }\r\n    getFromCache(direct, increase) {\r\n        let results = this.cacheData.results;\r\n        let result = null;\r\n        let index = 0;\r\n        if (this.fSearcher === this && !increase) {\r\n            // 搜索框移动活动区域\r\n            if (direct === 'up') {\r\n                this.setPrevActive(this.nowCursorPos);\r\n            } else {\r\n                this.setNextActive(this.nowCursorPos);\r\n            }\r\n            index = this.cacheData.index;\r\n            result = this.cacheData.results[index];\r\n            this.cacheData.indexs = { i: true };\r\n        } else {\r\n            //CTRL+D移动活动区域\r\n            let indexs = this.cacheData.indexs;\r\n            let delta = 0;\r\n            if (direct === 'up') {\r\n                delta = -1;\r\n            } else {\r\n                delta = 1;\r\n            }\r\n            index = this.cacheData.index + delta;\r\n            if (index == results.length) {\r\n                index = 0;\r\n            } else if (index < 0) {\r\n                index = results.length - 1;\r\n            }\r\n            // 已经没有非活动区域\r\n            if (!indexs[index]) {\r\n                result = results[index];\r\n                indexs[index] = true;\r\n                this.cacheData.index = index;\r\n            } else {\r\n                index = this.cacheData.index;\r\n            }\r\n        }\r\n\r\n        return {\r\n            now: index + 1,\r\n            result: result,\r\n            results: results,\r\n        };\r\n    }\r\n    getConfig() {\r\n        if (!this.cacheData) {\r\n            return;\r\n        }\r\n        return Object.assign({}, this.cacheData.config);\r\n    }\r\n    // 获取待搜索的文本\r\n    getSearchConfig() {\r\n        let result = null;\r\n        let wholeWord = false;\r\n        let searchText = '';\r\n        let range = this.searcher.selecter.getRangeByCursorPos(this.nowCursorPos);\r\n        if (this.searcher === this && this.selecter.ranges.size > 0) {\r\n            return null;\r\n        }\r\n        if (range) {\r\n            searchText = this.getRangeText(range.start, range.end);\r\n        } else {\r\n            searchText = this.getNowWord().text;\r\n            wholeWord = true;\r\n        }\r\n        if (searchText) {\r\n            result = {\r\n                text: searchText,\r\n                wholeWord: wholeWord,\r\n                ignoreCase: wholeWord,\r\n            };\r\n        }\r\n        return result;\r\n    }\r\n    getNowWord() {\r\n        let text = this.htmls[this.nowCursorPos.line - 1].text;\r\n        let str = '';\r\n        let index = this.nowCursorPos.column;\r\n        let startColumn = index;\r\n        let endColumn = index;\r\n        let res = null;\r\n        while ((res = this.wordPattern.exec(text))) {\r\n            if (res.index <= index && res.index + res[0].length >= index) {\r\n                startColumn = res.index;\r\n                endColumn = res.index + res[0].length;\r\n                str = res[0];\r\n                break;\r\n            } else if (res.index > index) {\r\n                break;\r\n            }\r\n        }\r\n        this.wordPattern.lastIndex = 0;\r\n\r\n        return {\r\n            text: str,\r\n            range: {\r\n                start: {\r\n                    line: this.nowCursorPos.line,\r\n                    column: startColumn,\r\n                },\r\n                end: {\r\n                    line: this.nowCursorPos.line,\r\n                    column: endColumn,\r\n                },\r\n            },\r\n        };\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-13 10:41:16\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport Btree from '@/common/btree';\r\n\r\nconst comparator = function (a, b) {\r\n    let res = Util.comparePos(a.start, b.start);\r\n    if (res === 0) {\r\n        return Util.comparePos(a.end, b.end);\r\n    }\r\n    return res;\r\n};\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.initProperties(editor, context);\r\n        this.ranges = new Btree(comparator);\r\n        this.activedRanges = new Btree(comparator);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, ['cursor', 'renderSelectedBg', 'clearSelectionToken']);\r\n        Util.defineProperties(this, context, ['htmls']);\r\n        this.setContextData = (prop, value) => {\r\n            context.setData(prop, value);\r\n        };\r\n        this.setEditorData = (prop, value) => {\r\n            editor.setData(prop, value);\r\n        };\r\n    }\r\n    getRange(range) {\r\n        let it = this.ranges.search(range);\r\n        return it && it.next();\r\n    }\r\n    getRangeByLine(line) {\r\n        let results = [];\r\n        let it = this.ranges.search(\r\n            { line: line, column: 0 },\r\n            (value, item) => {\r\n                return value - item.start.line;\r\n            },\r\n            true\r\n        );\r\n        if (it) {\r\n            let value = it.next();\r\n            while (value) {\r\n                if (value.start === line || value.end.line === line) {\r\n                    results.push(value);\r\n                } else if (value.start.line > line) {\r\n                    break;\r\n                }\r\n                value = it.next();\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    // 检测光标是否在选中区域范围的边界\r\n    getRangeByCursorPos(cursorPos) {\r\n        let result = this.ranges.search(cursorPos, (value, item) => {\r\n            if (Util.comparePos(value, item.start) === 0 || Util.comparePos(value, item.end) === 0) {\r\n                return 0;\r\n            }\r\n            return Util.comparePos(value, item.start);\r\n        });\r\n        return result && result.next();\r\n    }\r\n    // 检查光标是否在选中范围内\r\n    getRangeWithCursorPos(cursorPos) {\r\n        let it = this.ranges.search(\r\n            cursorPos,\r\n            (value, item) => {\r\n                return Util.comparePos(value, item.start);\r\n            },\r\n            true\r\n        );\r\n        if (it) {\r\n            let value = it.prev();\r\n            if (value && Util.comparePos(value.end, cursorPos) >= 0) {\r\n                return value;\r\n            }\r\n            it.reset();\r\n            value = it.next();\r\n            if (value && Util.comparePos(value.start, cursorPos) == 0) {\r\n                return value;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    select(direct, wholeWord) {\r\n        this.cursor.multiCursorPos.forEach((cursorPos) => {\r\n            let range = this.getRangeByCursorPos(cursorPos);\r\n            if (range) {\r\n                let start = range.start;\r\n                let end = range.end;\r\n                this.cursor.moveCursor(cursorPos, direct, wholeWord);\r\n                if (direct === 'left') {\r\n                    if (Util.comparePos(cursorPos, range.start) < 0) {\r\n                        start = cursorPos;\r\n                    } else {\r\n                        end = cursorPos;\r\n                    }\r\n                } else {\r\n                    if (Util.comparePos(cursorPos, range.end) > 0) {\r\n                        end = cursorPos;\r\n                    } else {\r\n                        start = cursorPos;\r\n                    }\r\n                }\r\n                this.updateRange(range, {\r\n                    start: start,\r\n                    end: end,\r\n                });\r\n            } else {\r\n                let start = Object.assign({}, cursorPos);\r\n                let end = this.cursor.moveCursor(cursorPos, direct, wholeWord);\r\n                range = this.createRange(start, end);\r\n                if (range) {\r\n                    this.addRange({\r\n                        start: start,\r\n                        end: end,\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        this.renderSelectedBg();\r\n    }\r\n    selectAll() {\r\n        let end = {\r\n            line: this.htmls.length,\r\n            column: this.htmls.peek().text.length,\r\n        };\r\n        this.setEditorData('forceCursorView', false);\r\n        this.cursor.setCursorPos(end);\r\n        this.setRange(\r\n            {\r\n                line: 1,\r\n                column: 0,\r\n            },\r\n            end\r\n        );\r\n        this.renderSelectedBg();\r\n    }\r\n    selectAllOccurence() {\r\n        this.cursor.clearCursorPos();\r\n        this.ranges.forEach((item) => {\r\n            this.cursor.addCursorPos(item.end);\r\n            if (!item.active) {\r\n                item.active = true;\r\n                this.activedRanges.insert(item);\r\n            }\r\n        });\r\n        this.renderSelectedBg();\r\n    }\r\n    addActive(cursorPos) {\r\n        let range = this.getRangeByCursorPos(cursorPos);\r\n        if (range && !range.active) {\r\n            range.active = true;\r\n            this.activedRanges.insert(range);\r\n        }\r\n        this.renderSelectedBg();\r\n    }\r\n    // 添加选中区域\r\n    addRange(ranges) {\r\n        let results = [];\r\n        let list = ranges instanceof Array ? ranges : [ranges];\r\n        list.forEach((range) => {\r\n            let start = range.start;\r\n            let end = range.end;\r\n            let same = Util.comparePos(start, end);\r\n            if (same > 0) {\r\n                let tmp = start;\r\n                start = end;\r\n                end = tmp;\r\n            } else if (!same) {\r\n                return;\r\n            }\r\n            let active = this.cursor.getCursorsByLineColumn(start.line, start.column) || this.cursor.getCursorsByLineColumn(end.line, end.column);\r\n            range = {\r\n                start: {\r\n                    line: start.line,\r\n                    column: start.column,\r\n                },\r\n                end: {\r\n                    line: end.line,\r\n                    column: end.column,\r\n                },\r\n                active: !!active,\r\n            };\r\n            let _range = this.getRange(range);\r\n            if(_range) {\r\n                if(!_range.active) {\r\n                    _range.active = active;\r\n                    this.activedRanges.insert(_range);\r\n                }\r\n                results.push(_range);\r\n            } else {\r\n                this.ranges.insert(range);\r\n                active && this.activedRanges.insert(range);\r\n                results.push(range);\r\n                this.filterRange(range);\r\n            }\r\n        });\r\n        this.renderSelectedBg();\r\n        return ranges instanceof Array ? results : results[0];\r\n    }\r\n    removeRange(range) {\r\n        range = this.ranges.delete(range);\r\n        if (range) {\r\n            if (range.active) {\r\n                this.activedRanges.delete(range);\r\n            }\r\n            this.cursor.removeCursor(range.start);\r\n            this.cursor.removeCursor(range.end);\r\n            this.renderSelectedBg();\r\n        }\r\n    }\r\n    /**\r\n     * 设置选中区域\r\n     * @param {Object} start\r\n     * @param {Object} end\r\n     */\r\n    setRange(start, end) {\r\n        let same = Util.comparePos(start, end);\r\n        if (same > 0) {\r\n            let tmp = start;\r\n            start = end;\r\n            end = tmp;\r\n        } else if (!same) {\r\n            return;\r\n        }\r\n        let active = this.cursor.getCursorsByLineColumn(start.line, start.column) || this.cursor.getCursorsByLineColumn(end.line, end.column);\r\n        let range = {\r\n            start: Object.assign({}, start),\r\n            end: Object.assign({}, end),\r\n            active: !!active,\r\n        };\r\n        this.clearRange();\r\n        this.ranges.insert(range);\r\n        active && this.activedRanges.insert(range);\r\n        this.renderSelectedBg();\r\n        return range;\r\n    }\r\n    setActive(cursorPos) {\r\n        let range = this.getRangeByCursorPos(cursorPos);\r\n        this.activedRanges.forEach((item) => {\r\n            item.active = false;\r\n        });\r\n        this.activedRanges.empty();\r\n        if (range) {\r\n            range.active = true;\r\n            this.activedRanges.insert(range);\r\n        }\r\n        this.renderSelectedBg();\r\n    }\r\n    updateRange(target, range) {\r\n        let start = range.start;\r\n        let end = range.end;\r\n        let same = Util.comparePos(start, end);\r\n        if (same > 0) {\r\n            let tmp = start;\r\n            start = end;\r\n            end = tmp;\r\n        } else if (!same) {\r\n            return false;\r\n        }\r\n        this.ranges.delete(target);\r\n        target.start.line = start.line;\r\n        target.start.column = start.column;\r\n        target.end.line = end.line;\r\n        target.end.column = end.column;\r\n        this.ranges.insert(target);\r\n        this.filterRange(target);\r\n        this.renderSelectedBg();\r\n    }\r\n    filterRange(range) {\r\n        let it = this.ranges.search(range);\r\n        let dels = [];\r\n        let value = it.prev();\r\n        if (value && Util.comparePos(value.end, range.start) > 0) {\r\n            //删除前件\r\n            dels.push(value);\r\n        }\r\n        it.reset();\r\n        it.next();\r\n        value = it.next();\r\n        if (value && Util.comparePos(range.end, value.start) > 0) {\r\n            dels.push(value);\r\n        }\r\n        dels.forEach((item) => {\r\n            this.ranges.delete(item);\r\n            this.activedRanges.delete(item);\r\n            this.cursor.removeCursor(item.start);\r\n            this.cursor.removeCursor(item.end);\r\n        });\r\n    }\r\n    createRange(start, end) {\r\n        let same = Util.comparePos(start, end);\r\n        if (same > 0) {\r\n            let tmp = start;\r\n            start = end;\r\n            end = tmp;\r\n        }\r\n        if (same === 0) {\r\n            return null;\r\n        }\r\n        return {\r\n            start: start,\r\n            end: end,\r\n        };\r\n    }\r\n    // 清除选中背景\r\n    clearRange() {\r\n        this.ranges.empty();\r\n        this.activedRanges.empty();\r\n        this.renderSelectedBg();\r\n    }\r\n    clearActive() {\r\n        this.activedRanges.forEach((item) => {\r\n            item.active = false;\r\n        });\r\n        this.activedRanges.empty();\r\n        this.renderSelectedBg();\r\n    }\r\n    clearInactiveRange() {\r\n        if (!this.activedRanges.size) {\r\n            this.clearRange();\r\n        } else {\r\n            this.ranges.forEach((item) => {\r\n                if (!item.active) {\r\n                    this.ranges.delete(item);\r\n                }\r\n            });\r\n            this.renderSelectedBg();\r\n        }\r\n    }\r\n    clone(range, properties) {\r\n        properties = properties || [];\r\n        let result = {\r\n            start: Object.assign({}, range.start),\r\n            end: Object.assign({}, range.end),\r\n        };\r\n        properties.forEach((key) => {\r\n            result[key] = range[key];\r\n        });\r\n        return result;\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-14 11:20:31\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport Btree from '@/common/btree';\r\n\r\nconst regs = {\r\n    word: /[a-zA-Z0-9_]/,\r\n    dWord: Util.fullAngleReg,\r\n    space: /\\s/,\r\n};\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.initProperties(editor, context);\r\n        this.multiCursorPos = new Btree(Util.comparePos);\r\n        this.multiKeyCode = 'ctrl';\r\n        this.wordPattern = Util.getWordPattern(this.language);\r\n        this.rightWrodPattern = new RegExp(`^(${this.wordPattern.source})`);\r\n        this.leftWrodPattern = new RegExp(`(${this.wordPattern.source})$`);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, ['language', 'nowCursorPos', 'searcher', 'selecter', 'setNowCursorPos', 'renderCursor', 'getColumnByWidth', 'getStrWidth']);\r\n        Util.defineProperties(this, context, ['htmls']);\r\n    }\r\n    // 添加光标\r\n    addCursorPos(cursorPos) {\r\n        let pos = this.getCursorsByLineColumn(cursorPos.line, cursorPos.column);\r\n        if (pos) {\r\n            this.setNowCursorPos(pos);\r\n            return pos;\r\n        }\r\n        cursorPos = {\r\n            line: cursorPos.line,\r\n            column: cursorPos.column,\r\n        };\r\n        this.multiCursorPos.insert(cursorPos);\r\n        this.setNowCursorPos(cursorPos);\r\n        return cursorPos;\r\n    }\r\n    addCursorAbove() {\r\n        this.multiCursorPos.forEach((item) => {\r\n            if (item.line > 1) {\r\n                let width = item.moveWidth || this.getStrWidth(this.htmls[item.line - 1].text, 0, item.column);\r\n                let column = this.getColumnByWidth(this.htmls[item.line - 2].text, width);\r\n                let cursorPos = this.addCursorPos({\r\n                    line: item.line - 1,\r\n                    column: column,\r\n                });\r\n                cursorPos.moveWidth = width;\r\n                this.setNowCursorPos(cursorPos);\r\n            }\r\n        });\r\n    }\r\n    addCursorBelow() {\r\n        this.multiCursorPos.forEach((item) => {\r\n            if (item.line < this.htmls.length) {\r\n                let width = item.moveWidth || this.getStrWidth(this.htmls[item.line - 1].text, 0, item.column);\r\n                let column = this.getColumnByWidth(this.htmls[item.line].text, width);\r\n                let cursorPos = this.addCursorPos({\r\n                    line: item.line + 1,\r\n                    column: column,\r\n                });\r\n                cursorPos.moveWidth = width;\r\n                this.setNowCursorPos(cursorPos);\r\n            }\r\n        });\r\n    }\r\n    addCursorLineEnds() {\r\n        if (this.selecter.activedRanges.size) {\r\n            this.clearCursorPos();\r\n            this.selecter.activedRanges.forEach((item) => {\r\n                let startLine = item.start.line;\r\n                let endLine = item.end.line;\r\n                while (startLine < endLine) {\r\n                    this.addCursorPos({\r\n                        line: startLine,\r\n                        column: this.htmls[startLine - 1].text.length,\r\n                    });\r\n                    startLine++;\r\n                }\r\n                this.setNowCursorPos(\r\n                    this.addCursorPos({\r\n                        line: endLine,\r\n                        column: this.htmls[endLine - 1].text.length,\r\n                    })\r\n                );\r\n            });\r\n            this.searcher.clearSearch();\r\n        }\r\n    }\r\n    // 设置光标\r\n    setCursorPos(cursorPos) {\r\n        cursorPos = {\r\n            line: cursorPos.line,\r\n            column: cursorPos.column,\r\n        };\r\n        if (this.multiCursorPos.size == 1) {\r\n            let pos = this.multiCursorPos.get(0);\r\n            if (Util.comparePos(pos, cursorPos) === 0) {\r\n                return pos;\r\n            }\r\n        }\r\n        this.multiCursorPos.empty();\r\n        this.multiCursorPos.insert(cursorPos);\r\n        this.setNowCursorPos(cursorPos);\r\n        return cursorPos;\r\n    }\r\n    updateCursorPos(cursorPos, line, column) {\r\n        let pos = this.getCursorsByLineColumn(cursorPos.line, cursorPos.column);\r\n        if (pos === cursorPos) {\r\n            this.multiCursorPos.delete(cursorPos);\r\n        }\r\n        cursorPos.line = line;\r\n        cursorPos.column = column;\r\n        this.multiCursorPos.insert(cursorPos);\r\n        if (cursorPos === this.nowCursorPos) {\r\n            //触发滚动\r\n            this.setNowCursorPos(this.nowCursorPos);\r\n        } else {\r\n            this.renderCursor();\r\n        }\r\n        return cursorPos;\r\n    }\r\n    removeCursor(cursorPos) {\r\n        cursorPos = this.getCursorsByLineColumn(cursorPos.line, cursorPos.column);\r\n        if (cursorPos) {\r\n            cursorPos.del = true;\r\n            this.multiCursorPos.delete(cursorPos);\r\n            if (cursorPos === this.nowCursorPos) {\r\n                this.setNowCursorPos(null);\r\n            }\r\n            this.renderCursor();\r\n        }\r\n    }\r\n    removeCursorInRange(range) {\r\n        let it = this.multiCursorPos.search(range.start, null, true);\r\n        if (it) {\r\n            let value = null;\r\n            let toDels = [];\r\n            while ((value = it.next())) {\r\n                let res = Util.comparePos(value, range.end);\r\n                if (res >= 0) {\r\n                    break;\r\n                }\r\n                if (Util.comparePos(value, range.start) > 0) {\r\n                    toDels.push(value);\r\n                }\r\n            }\r\n            toDels.forEach((item) => {\r\n                item.del = true;\r\n                this.multiCursorPos.delete(item);\r\n            });\r\n            this.renderCursor();\r\n        }\r\n    }\r\n    clearCursorPos() {\r\n        this.multiCursorPos.forEach((item) => {\r\n            item.del = true;\r\n        });\r\n        this.multiCursorPos.empty();\r\n        this.setNowCursorPos(null);\r\n    }\r\n    getCursorsByLine(line) {\r\n        let results = [];\r\n        let value = null;\r\n        let it = this.multiCursorPos.search(\r\n            {\r\n                line: line,\r\n                column: 0,\r\n            },\r\n            null,\r\n            true\r\n        );\r\n        if (it) {\r\n            while ((value = it.next())) {\r\n                if (value.line === line) {\r\n                    results.push(value);\r\n                } else if (value.line > line) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    getCursorsByLineColumn(line, column) {\r\n        let it = this.multiCursorPos.search({\r\n            line: line,\r\n            column: column,\r\n        });\r\n        return it && it.next();\r\n    }\r\n    // 移动光标\r\n    moveCursor(cursorPos, direct, wholeWord) {\r\n        let text = this.htmls[cursorPos.line - 1].text;\r\n        let line = cursorPos.line;\r\n        let column = cursorPos.column;\r\n        // 去除上下移动光标的初始宽度记录\r\n        if(direct !== 'up' && direct !== 'down') {\r\n            cursorPos.moveWidth = 0;\r\n        }\r\n        if (direct === 'home') {\r\n            column = 0;\r\n        } else if (direct === 'end') {\r\n            column = this.htmls[line - 1].text.length;\r\n        } else if (direct === 'up') {\r\n            if (line > 1) {\r\n                let width = cursorPos.moveWidth || this.getStrWidth(text, 0, column);\r\n                cursorPos.moveWidth = width;\r\n                line--;\r\n                text = this.htmls[line - 1].text;\r\n                column = this.getColumnByWidth(text, width);\r\n            }\r\n        } else if (direct === 'down') {\r\n            if (line < this.htmls.length) {\r\n                let width = cursorPos.moveWidth || this.getStrWidth(text, 0, column);\r\n                cursorPos.moveWidth = width;\r\n                line++;\r\n                text = this.htmls[line - 1].text;\r\n                column = this.getColumnByWidth(text, width);\r\n            }\r\n        } else if (direct === 'left') {\r\n            while (column === 0 && line > 1) {\r\n                line--;\r\n                text = this.htmls[line - 1].text;\r\n                column = text.length;\r\n            }\r\n            if (column > 0) {\r\n                if (wholeWord) {\r\n                    //过滤开始的空格\r\n                    while (column && text[column - 1].match(regs.space)) {\r\n                        column--;\r\n                    }\r\n                    if (column > 0) {\r\n                        let res = null;\r\n                        let _column = column;\r\n                        column--;\r\n                        text = text.slice(0, _column);\r\n                        res = this.leftWrodPattern.exec(text);\r\n                        if (res) {\r\n                            column = res.index;\r\n                        }\r\n                    }\r\n                } else if (cursorPos.line === line) {\r\n                    column--;\r\n                }\r\n            }\r\n        } else {\r\n            while (column === text.length && line < this.htmls.length) {\r\n                line++;\r\n                column = 0;\r\n                text = this.htmls[line - 1].text;\r\n            }\r\n            if (column < text.length) {\r\n                if (wholeWord) {\r\n                    //过滤开始的空格\r\n                    while (column < text.length && text[column].match(regs.space)) {\r\n                        column++;\r\n                    }\r\n                    if (column < text.length) {\r\n                        text = text.slice(column);\r\n                        text = this.rightWrodPattern.exec(text);\r\n                        if (text && text.index == 0) {\r\n                            column += text[0].length;\r\n                        } else {\r\n                            column++;\r\n                        }\r\n                    }\r\n                } else if (cursorPos.line === line) {\r\n                    column++;\r\n                }\r\n            }\r\n        }\r\n        this.updateCursorPos(cursorPos, line, column);\r\n\r\n        return {\r\n            line: line,\r\n            column: column,\r\n        };\r\n    }\r\n    switchMultiKeyCode() {\r\n        this.multiKeyCode = this.multiKeyCode === 'ctrl' ? 'alt' : 'ctrl';\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2021-12-31 15:11:27\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.history = [];\r\n        this.initProperties(editor, context);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, ['cursor']);\r\n        Util.defineProperties(this, context, [\r\n            'insertContent',\r\n            'deleteContent',\r\n            'moveLineUp',\r\n            'moveLineDown',\r\n            'copyLineUp',\r\n            'copyLineDown',\r\n            'deleteCopyLineUp',\r\n            'deleteCopyLineDown',\r\n            'insertLine',\r\n            'deleteLine',\r\n            'replace',\r\n        ]);\r\n    }\r\n    // 撤销操作\r\n    undo() {\r\n        if (this.history.index > 0) {\r\n            let command = this.history[this.history.index - 1];\r\n            this.doCommand(command);\r\n            this.history.index--;\r\n            if (command.serial) {\r\n                //连续操作标识\r\n                let _command = this.history[this.history.index - 1];\r\n                _command && _command.serial === command.serial && this.undo();\r\n            }\r\n        }\r\n    }\r\n    // 重做操作\r\n    redo() {\r\n        if (this.history.index < this.history.length) {\r\n            let command = this.history[this.history.index];\r\n            this.history.index++;\r\n            this.doCommand(command);\r\n            if (command.serial) {\r\n                //连续操作标识\r\n                let _command = this.history[this.history.index];\r\n                _command && _command.serial === command.serial && this.redo();\r\n            }\r\n        }\r\n    }\r\n    // 操作命令\r\n    doCommand(command) {\r\n        let commandType = command.type || (command instanceof Array ? command[0].type : command.type);\r\n        switch (commandType) {\r\n            case Util.command.DELETE:\r\n                this.cursor.clearCursorPos();\r\n                this.deleteContent(Util.keyCode.BACKSPACE, command);\r\n                break;\r\n            case Util.command.INSERT:\r\n                this.cursor.clearCursorPos();\r\n                if (command instanceof Array) {\r\n                    var text = [];\r\n                    command.forEach((item) => {\r\n                        text.push(item.text);\r\n                    });\r\n                    this.insertContent(text, command);\r\n                } else {\r\n                    this.insertContent(command.text, command);\r\n                }\r\n                break;\r\n            case Util.command.DELETE_LINE:\r\n                this.cursor.clearCursorPos();\r\n                this.deleteLine(command);\r\n                break;\r\n            case Util.command.INSERT_LINE:\r\n                this.cursor.clearCursorPos();\r\n                this.insertLine(command);\r\n                break;\r\n            case Util.command.MOVEUP:\r\n                this.cursor.clearCursorPos();\r\n                this.moveLineUp(command);\r\n                break;\r\n            case Util.command.MOVEDOWN:\r\n                this.cursor.clearCursorPos();\r\n                this.moveLineDown(command);\r\n                break;\r\n            case Util.command.COPY_DOWN:\r\n                this.cursor.clearCursorPos();\r\n                this.copyLineDown(command);\r\n                break;\r\n            case Util.command.DELETE_COPY_DOWN:\r\n                this.cursor.clearCursorPos();\r\n                this.deleteCopyLineDown(command);\r\n                break;\r\n            case Util.command.COPY_UP:\r\n                this.cursor.clearCursorPos();\r\n                this.copyLineUp(command);\r\n                break;\r\n            case Util.command.DELETE_COPY_UP:\r\n                this.cursor.clearCursorPos();\r\n                this.deleteCopyLineUp(command);\r\n                break;\r\n            case Util.command.REPLACE:\r\n                this.cursor.clearCursorPos();\r\n                this.replace(command.text, command.cursorPos, command);\r\n                break;\r\n        }\r\n    }\r\n    // 添加历史记录\r\n    pushHistory(command) {\r\n        while (this.history.length > this.history.index) {\r\n            this.history.pop();\r\n        }\r\n        let that = this;\r\n        let lastCommand = this.history[this.history.index - 1];\r\n        command = this.sortComand(command);\r\n        if (lastCommand instanceof Array && command instanceof Array && lastCommand.length === command.length && Date.now() - this.pushHistoryTime < 2000) {\r\n            if (_checkSameOp(lastCommand) && _checkSameOp(command) && _combCheck(lastCommand[0], command[0])) {\r\n                for (let i = 0; i < lastCommand.length; i++) {\r\n                    _combCommand(lastCommand[i], command[i]);\r\n                }\r\n            } else {\r\n                this.history.push(command);\r\n            }\r\n        } else if (_combCheck(lastCommand, command)) {\r\n            _combCommand(lastCommand, command);\r\n        } else {\r\n            this.history.push(command);\r\n        }\r\n        this.history.index = this.history.length;\r\n        this.pushHistoryTime = Date.now();\r\n\r\n        function _checkSameOp(commandList) {\r\n            for (let i = 1; i < commandList.length; i++) {\r\n                if (commandList[i].type !== commandList[i - 1].type) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        function _combCheck(lastCommand, command) {\r\n            // 检测是否为连续插入或连续删除\r\n            if (\r\n                (command.type == Util.command.DELETE || command.type == Util.command.INSERT) &&\r\n                lastCommand &&\r\n                lastCommand.type == command.type &&\r\n                lastCommand.preCursorPos.line == command.cursorPos.line &&\r\n                Date.now() - that.pushHistoryTime < 2000\r\n            ) {\r\n                if (lastCommand.type == Util.command.DELETE) {\r\n                    if (Util.comparePos(lastCommand.cursorPos, command.preCursorPos) == 0) {\r\n                        return true;\r\n                    }\r\n                }\r\n                if (lastCommand.type == Util.command.INSERT) {\r\n                    if (Util.comparePos(lastCommand.cursorPos, command.preCursorPos) == 0 || Util.comparePos(lastCommand.cursorPos, command.cursorPos) == 0) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // 检查两次操作是否可以合并\r\n        function _combCommand(lastCommand, command) {\r\n            if (lastCommand.type === Util.command.DELETE) {\r\n                command.preCursorPos.column -= lastCommand.cursorPos.column - lastCommand.preCursorPos.column;\r\n                lastCommand.preCursorPos = command.preCursorPos;\r\n                lastCommand.cursorPos = command.cursorPos;\r\n            } else {\r\n                lastCommand.cursorPos = command.cursorPos;\r\n                if (command.keyCode === Util.keyCode.DELETE) {\r\n                    lastCommand.text = lastCommand.text + command.text;\r\n                } else {\r\n                    lastCommand.text = command.text + lastCommand.text;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // 更新历史记录\r\n    updateHistory(command) {\r\n        let index = this.history.index;\r\n        if (command instanceof Array) {\r\n            command.forEach((item, _index) => {\r\n                item.keyCode = this.history[index - 1][_index].keyCode;\r\n            });\r\n        } else {\r\n            command.keyCode = this.history[index - 1].keyCode;\r\n        }\r\n        this.history[index - 1] = this.sortComand(command);\r\n    }\r\n    sortComand(command) {\r\n        if (command instanceof Array) {\r\n            command.sort((a, b) => {\r\n                a = a.cursorPos;\r\n                b = b.cursorPos;\r\n                if (a.line === b.line) {\r\n                    return a.column - b.column;\r\n                }\r\n                return a.line - b.line;\r\n            });\r\n        }\r\n        return command;\r\n    }\r\n}\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 13:42:22\r\n * @Description:\r\n */\r\nimport Util from '@/common/util';\r\nimport Enum from '@/data/enum';\r\nimport expand from 'emmet';\r\n\r\nconst regs = {\r\n    word: /[a-zA-Z0-9_]/,\r\n    emmetWord: /^[a-zA-Z][a-zA-Z0-9\\-]*/,\r\n    emmetAttr: /^[\\.\\#]([^\\.\\#\\>\\<\\+\\*\\(\\)]*)/,\r\n    emmetNum: /^\\*(\\d+)/,\r\n    dWord: Util.fullAngleReg,\r\n    endTag: /(?=\\<\\/)/,\r\n    space: /\\s/,\r\n};\r\n\r\nclass Context {\r\n    constructor(editor) {\r\n        this.lineId = Number.MIN_SAFE_INTEGER;\r\n        this.serial = 1;\r\n        this.htmls = [];\r\n        this.fgLines = [];\r\n        this.lineIdMap = new Map(); //htmls的唯一标识对象\r\n        this.renderedIdMap = new Map(); //renderHtmls的唯一标识对象\r\n        this.renderedLineMap = new Map(); //renderHtmls的唯一标识对象\r\n        this.initProperties(editor);\r\n        this.initData();\r\n    }\r\n    initProperties(editor) {\r\n        Util.defineProperties(this, editor, [\r\n            'language',\r\n            'tabSize',\r\n            'nowCursorPos',\r\n            'maxLine',\r\n            'maxWidthObj',\r\n            'cursor',\r\n            'history',\r\n            'tokenizer',\r\n            'lint',\r\n            'folder',\r\n            'selecter',\r\n            'searcher',\r\n            'fSelecter',\r\n            'fSearcher',\r\n            'autocomplete',\r\n            'render',\r\n            'unFold',\r\n            'setNowCursorPos',\r\n            'setErrors',\r\n            'setAutoTip',\r\n            'getStrWidth',\r\n            '$emit',\r\n        ]);\r\n        this.setEditorData = (prop, value) => {\r\n            editor.setData(prop, value);\r\n        };\r\n    }\r\n    initData() {\r\n        this.htmls.push({\r\n            lineId: this.lineId++,\r\n            text: '',\r\n            html: '',\r\n            width: 0,\r\n            tokens: [],\r\n            folds: [],\r\n            states: [],\r\n            stateFold: null,\r\n        });\r\n        this.lineIdMap.set(this.htmls[0].lineId, this.htmls[0]);\r\n    }\r\n    setData(prop, value) {\r\n        if (typeof this[prop] === 'function') {\r\n            return;\r\n        }\r\n        this[prop] = value;\r\n    }\r\n    insertContent(text, command) {\r\n        let historyArr = null;\r\n        let cursorPosList = [];\r\n        let serial = false;\r\n        if (!command) {\r\n            // 如果有选中区域，需要先删除选中区域\r\n            if (this.selecter.activedRanges.size) {\r\n                let _historyArr = this.deleteContent();\r\n                // 连续操作标识\r\n                _historyArr.serial = this.serial++;\r\n                serial = _historyArr.serial;\r\n            }\r\n            cursorPosList = this.cursor.multiCursorPos.toArray();\r\n        } else {\r\n            command.forEach((item) => {\r\n                // 多个插入的光标可能相同，这里不能先添加光标\r\n                cursorPosList.push(item.cursorPos);\r\n            });\r\n        }\r\n        historyArr = this._insertMultiContent(text, cursorPosList, command);\r\n        historyArr.serial = serial;\r\n        if (!command) {\r\n            // 新增历史记录\r\n            this.history.pushHistory(historyArr);\r\n        } else {\r\n            // 撤销或重做操作后，更新历史记录\r\n            this.history.updateHistory(historyArr);\r\n            historyArr.serial = command.serial;\r\n        }\r\n        this.setNowCursorPos(this.cursor.multiCursorPos.get(0));\r\n        this.fSearcher.refreshSearch();\r\n        return historyArr;\r\n    }\r\n    _insertMultiContent(text, cursorPosList, command) {\r\n        let prePos = null;\r\n        let historyObj = null;\r\n        let historyArr = [];\r\n        let texts = text instanceof Array ? text : text.split(/\\r\\n|\\n/);\r\n        let lineDelta = 0;\r\n        let columnDelta = 0;\r\n        this.cursor.clearCursorPos();\r\n        if (text === '\\n') {\r\n            texts = ['\\n'];\r\n        }\r\n        cursorPosList.forEach((cursorPos, index) => {\r\n            let _text = texts.length === cursorPosList.length ? texts[index] : text;\r\n            let commandObj = (command && command[index]) || {};\r\n            let margin = commandObj.margin || 'right';\r\n            let active = commandObj.active || false;\r\n            let pos = {\r\n                line: cursorPos.line,\r\n                column: cursorPos.column,\r\n            };\r\n            pos.line += lineDelta;\r\n            if (prePos && pos.line === prePos.line) {\r\n                pos.column += columnDelta;\r\n            } else {\r\n                columnDelta = 0;\r\n            }\r\n            historyObj = this._insertContent(_text, pos, !command);\r\n            historyArr.push(historyObj);\r\n            prePos = historyObj.cursorPos;\r\n            historyObj.margin = margin;\r\n            historyObj.active = active;\r\n            lineDelta += historyObj.cursorPos.line - historyObj.preCursorPos.line;\r\n            columnDelta += historyObj.cursorPos.column - historyObj.preCursorPos.column;\r\n            if (margin === 'right') {\r\n                this.cursor.addCursorPos(historyObj.cursorPos);\r\n            } else {\r\n                this.cursor.addCursorPos(historyObj.preCursorPos);\r\n            }\r\n            if (active) {\r\n                this.selecter.addRange({\r\n                    start: historyObj.preCursorPos,\r\n                    end: historyObj.cursorPos,\r\n                });\r\n            }\r\n        });\r\n        return historyArr;\r\n    }\r\n    // 插入内容\r\n    _insertContent(text, cursorPos, alignmentTab) {\r\n        let lineObj = this.htmls[cursorPos.line - 1];\r\n        let nowLineText = lineObj.text;\r\n        let newPos = Object.assign({}, cursorPos);\r\n        cursorPos.moveWidth = 0; //去除上下移动光标的初始宽度记录\r\n        text = text.split(/\\r\\n|\\n/);\r\n        text = text.map((item) => {\r\n            item = {\r\n                lineId: this.lineId++,\r\n                text: item,\r\n                html: '',\r\n                width: 0,\r\n                tokens: null,\r\n                folds: null,\r\n                states: null,\r\n                stateFold: null,\r\n            };\r\n            this.lineIdMap.set(item.lineId, item);\r\n            return item;\r\n        });\r\n        if (text.length > 1) {\r\n            // 换行对齐\r\n            if (!text[0].text && alignmentTab) {\r\n                let tabStr = _getTabStr.call(this, nowLineText, this.folder.getRangeFold(cursorPos.line, true));\r\n                if (tabStr) {\r\n                    text[1].text = tabStr + text[1].text.trimLeft();\r\n                }\r\n            }\r\n            // 插入多行\r\n            newPos.column = text[text.length - 1].text.length;\r\n            text[0].text = nowLineText.slice(0, cursorPos.column) + text[0].text;\r\n            text[text.length - 1].text = text[text.length - 1].text + nowLineText.slice(cursorPos.column);\r\n            this.htmls = this.htmls\r\n                .slice(0, cursorPos.line - 1)\r\n                .concat(text)\r\n                .concat(this.htmls.slice(cursorPos.line));\r\n        } else {\r\n            // 插入一行\r\n            newPos.column += text[0].text.length;\r\n            text[0].text = nowLineText.slice(0, cursorPos.column) + text[0].text + nowLineText.slice(cursorPos.column);\r\n            this.htmls.splice(cursorPos.line - 1, 1, text[0]);\r\n        }\r\n        newPos.line += text.length - 1;\r\n        this.setEditorData('maxLine', this.htmls.length);\r\n        this.lint.onInsertContentAfter(cursorPos.line, newPos.line);\r\n        this.tokenizer.onInsertContentAfter(cursorPos.line, newPos.line);\r\n        this.folder.onInsertContentAfter(Object.assign({}, cursorPos), Object.assign({}, newPos));\r\n        this.setLineWidth(text);\r\n        this.setErrors([]);\r\n        this.setAutoTip(null);\r\n        this.render(true);\r\n        this.$emit('change');\r\n        let historyObj = {\r\n            type: Util.command.DELETE,\r\n            cursorPos: Object.assign({}, newPos),\r\n            preCursorPos: Object.assign({}, cursorPos),\r\n        };\r\n        return historyObj;\r\n\r\n        function _getTabStr(text, plus) {\r\n            let tabNum = 0;\r\n            let tabStr = '';\r\n            //该行有内容\r\n            let spaceNum = /^\\s+/.exec(text);\r\n            if (spaceNum) {\r\n                tabNum = /\\t+/.exec(spaceNum[0]);\r\n                tabNum = (tabNum && tabNum[0].length) || 0;\r\n                tabNum = tabNum + Math.ceil((spaceNum[0].length - tabNum) / this.tabSize);\r\n            }\r\n            tabNum += plus ? 1 : 0;\r\n            for (let i = 0; i < tabNum; i++) {\r\n                tabStr += '\\t';\r\n            }\r\n            return tabStr;\r\n        }\r\n    }\r\n    deleteContent(keyCode, command) {\r\n        let historyArr = [];\r\n        let rangeList = [];\r\n        if (command) {\r\n            rangeList = command.map((item) => {\r\n                let obj = {\r\n                    start: item.preCursorPos,\r\n                    end: item.cursorPos,\r\n                    margin: item.margin,\r\n                    active: item.active,\r\n                };\r\n                return obj;\r\n            });\r\n        } else {\r\n            this.cursor.multiCursorPos.forEach((item) => {\r\n                let range = this.selecter.getRangeByCursorPos(item);\r\n                if (range) {\r\n                    if (Util.comparePos(range.start, item) === 0) {\r\n                        range.margin = 'left';\r\n                    } else {\r\n                        range.margin = 'right';\r\n                    }\r\n                    rangeList.push(range);\r\n                } else {\r\n                    rangeList.push(item);\r\n                }\r\n            });\r\n        }\r\n        historyArr = this._deleteMultiContent(rangeList, keyCode);\r\n        if (!command) {\r\n            // 新增历史记录\r\n            historyArr.length && this.history.pushHistory(historyArr);\r\n        } else {\r\n            // 撤销或重做操作后，更新历史记录\r\n            historyArr.serial = command.serial;\r\n            this.history.updateHistory(historyArr);\r\n            historyArr.forEach((item) => {\r\n                this.cursor.addCursorPos(item.cursorPos);\r\n            });\r\n        }\r\n        this.setNowCursorPos(this.cursor.multiCursorPos.get(0));\r\n        this.searcher.clearSearch();\r\n        this.fSearcher.refreshSearch();\r\n        return historyArr;\r\n    }\r\n    _deleteMultiContent(rangeList, keyCode) {\r\n        let that = this;\r\n        let historyArr = [];\r\n        let historyObj = null;\r\n        let prePos = null;\r\n        let lineDelta = 0;\r\n        let columnDelta = 0;\r\n        this.cursor.clearCursorPos();\r\n        rangeList.forEach((item) => {\r\n            if (item.start && item.end) {\r\n                _deleteRangePos(item);\r\n            } else {\r\n                _deleteCursorPos(item);\r\n            }\r\n        });\r\n        return historyArr;\r\n\r\n        function _deleteCursorPos(cursorPos) {\r\n            let pos = {\r\n                line: cursorPos.line,\r\n                column: cursorPos.column,\r\n            };\r\n            pos.line -= lineDelta;\r\n            if (prePos && pos.line === prePos.line) {\r\n                pos.column -= columnDelta;\r\n            } else {\r\n                columnDelta = 0;\r\n            }\r\n            historyObj = that._deleteContent(pos, keyCode);\r\n            historyObj.text && historyArr.push(historyObj);\r\n            prePos = historyObj.cursorPos;\r\n            lineDelta += historyObj.preCursorPos.line - prePos.line;\r\n            columnDelta += historyObj.preCursorPos.column - prePos.column;\r\n            that.cursor.addCursorPos({\r\n                line: prePos.line,\r\n                column: prePos.column,\r\n            });\r\n        }\r\n\r\n        function _deleteRangePos(rangePos) {\r\n            let start = rangePos.start;\r\n            let end = rangePos.end;\r\n            start.line -= lineDelta;\r\n            end.line -= lineDelta;\r\n            if (prePos && start.line === prePos.line) {\r\n                start.column -= columnDelta;\r\n                if (start.line === end.line) {\r\n                    end.column -= columnDelta;\r\n                } else {\r\n                    columnDelta = 0;\r\n                }\r\n            } else {\r\n                columnDelta = 0;\r\n            }\r\n            historyObj = that._deleteContent(rangePos, keyCode);\r\n            historyObj.text && historyArr.push(historyObj);\r\n            prePos = historyObj.cursorPos;\r\n            lineDelta += historyObj.preCursorPos.line - prePos.line;\r\n            columnDelta += historyObj.preCursorPos.column - prePos.column;\r\n            that.cursor.addCursorPos({\r\n                line: prePos.line,\r\n                column: prePos.column,\r\n            });\r\n        }\r\n    }\r\n    // 删除内容\r\n    _deleteContent(cursorPos, keyCode) {\r\n        let range = null;\r\n        let margin = keyCode === Util.keyCode.DELETE ? 'left' : 'right';\r\n        cursorPos.moveWidth = 0; //去除上下移动光标的初始宽度记录\r\n        if (cursorPos.start && cursorPos.end) {\r\n            //删除范围内的内容\r\n            range = cursorPos;\r\n            cursorPos = range.end;\r\n            margin = range.margin;\r\n        }\r\n        let start = null;\r\n        let startObj = this.htmls[cursorPos.line - 1];\r\n        let text = startObj.text;\r\n        let deleteText = '';\r\n        let rangeUuid = [startObj.lineId];\r\n        let originPos = Object.assign({}, cursorPos);\r\n        let newPos = Object.assign({}, cursorPos);\r\n        if (range) {\r\n            // 删除选中区域\r\n            let end = range.end;\r\n            let endObj = this.htmls[end.line - 1];\r\n            start = range.start;\r\n            startObj = this.htmls[start.line - 1];\r\n            text = startObj.text;\r\n            deleteText = this.getRangeText(range.start, range.end);\r\n            if (start.line == 1 && end.line == this.maxLine) {\r\n                //全选删除\r\n                rangeUuid = [this.maxWidthObj.lineId];\r\n                this.lineIdMap.clear();\r\n            } else {\r\n                rangeUuid = this.htmls.slice(start.line - 1, end.line).map((item) => {\r\n                    this.lineIdMap.delete(item.lineId);\r\n                    return item.lineId;\r\n                });\r\n            }\r\n            this.lineIdMap.set(startObj.lineId, startObj);\r\n            if (start.line == end.line) {\r\n                // 单行选中\r\n                text = text.slice(0, start.column) + text.slice(end.column);\r\n                startObj.text = text;\r\n            } else {\r\n                // 多行选中\r\n                text = text.slice(0, start.column);\r\n                startObj.text = text;\r\n                text = endObj.text;\r\n                text = text.slice(end.column);\r\n                startObj.text += text;\r\n                this.htmls.splice(start.line, end.line - start.line);\r\n            }\r\n            newPos.line = start.line;\r\n            newPos.column = start.column;\r\n        } else if (Util.keyCode.DELETE == keyCode) {\r\n            // 向后删除一个字符\r\n            if (cursorPos.column == text.length) {\r\n                // 光标处于行尾\r\n                if (cursorPos.line < this.htmls.length) {\r\n                    this.lineIdMap.delete(this.htmls[cursorPos.line].lineId);\r\n                    text = startObj.text + this.htmls[cursorPos.line].text;\r\n                    this.htmls.splice(cursorPos.line, 1);\r\n                    deleteText = '\\n';\r\n                    originPos = {\r\n                        line: cursorPos.line - 1,\r\n                        column: 0,\r\n                    };\r\n                }\r\n            } else {\r\n                deleteText = text[cursorPos.column];\r\n                text = text.slice(0, cursorPos.column) + text.slice(cursorPos.column + 1);\r\n                originPos = {\r\n                    line: cursorPos.line,\r\n                    column: cursorPos.column + 1,\r\n                };\r\n            }\r\n            startObj.text = text;\r\n        } else {\r\n            // 向前删除一个字符\r\n            if (cursorPos.column == 0) {\r\n                // 光标处于行首\r\n                if (cursorPos.line > 1) {\r\n                    let column = this.htmls[cursorPos.line - 2].text.length;\r\n                    this.lineIdMap.delete(this.htmls[cursorPos.line - 2].lineId);\r\n                    text = this.htmls[cursorPos.line - 2].text + text;\r\n                    this.htmls.splice(cursorPos.line - 2, 1);\r\n                    deleteText = '\\n';\r\n                    newPos.line = cursorPos.line - 1;\r\n                    newPos.column = column;\r\n                }\r\n            } else {\r\n                deleteText = text[cursorPos.column - 1];\r\n                text = text.slice(0, cursorPos.column - 1) + text.slice(cursorPos.column);\r\n                newPos.column = cursorPos.column - 1;\r\n            }\r\n            startObj.text = text;\r\n        }\r\n        startObj.width = this.getStrWidth(startObj.text);\r\n        startObj.html = '';\r\n        startObj.tokens = null;\r\n        startObj.folds = null;\r\n        startObj.states = null;\r\n        startObj.stateFold = null;\r\n        this.setEditorData('maxLine', this.htmls.length);\r\n        this.lint.onDeleteContentAfter(originPos.line, newPos.line);\r\n        this.tokenizer.onDeleteContentAfter(originPos.line, newPos.line);\r\n        this.folder.onDeleteContentAfter(Object.assign({}, originPos), Object.assign({}, newPos));\r\n        this.setErrors([]);\r\n        this.setAutoTip(null);\r\n        this.render(true);\r\n        this.$emit('change');\r\n        // 更新最大文本宽度\r\n        if (startObj.width >= this.maxWidthObj.width) {\r\n            this.setEditorData('maxWidthObj', {\r\n                lineId: startObj.lineId,\r\n                text: startObj.text,\r\n                width: startObj.width,\r\n            });\r\n        } else if (rangeUuid.indexOf(this.maxWidthObj.lineId) > -1) {\r\n            this.setMaxWidth();\r\n        }\r\n        let historyObj = {\r\n            type: Util.command.INSERT,\r\n            cursorPos: Object.assign({}, newPos),\r\n            preCursorPos: Object.assign({}, originPos),\r\n            text: deleteText,\r\n            keyCode: keyCode,\r\n            margin: margin,\r\n            active: range && range.active,\r\n        };\r\n        return historyObj;\r\n    }\r\n    // 获取最大宽度\r\n    setMaxWidth() {\r\n        let that = this;\r\n        let index = 0;\r\n        let startTime = Date.now();\r\n        let maxWidthObj = {\r\n            line: this.htmls[0].lineId,\r\n            width: 0,\r\n        };\r\n        clearTimeout(this.setMaxWidthTimer);\r\n        _setMaxWidth();\r\n\r\n        function _setMaxWidth() {\r\n            while (index < that.htmls.length) {\r\n                let item = that.htmls[index];\r\n                if (item.width > maxWidthObj.width) {\r\n                    maxWidthObj = {\r\n                        lineId: item.lineId,\r\n                        text: item.text,\r\n                        width: item.width,\r\n                    };\r\n                }\r\n                index++;\r\n                if (Date.now() - startTime > 20) {\r\n                    break;\r\n                }\r\n            }\r\n            if (index < that.htmls.length) {\r\n                that.setMaxWidthTimer = setTimeout(() => {\r\n                    _setMaxWidth();\r\n                }, 20);\r\n            } else {\r\n                that.setEditorData('maxWidthObj', maxWidthObj);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 设置每行文本的宽度\r\n     * @param {Array} texts\r\n     */\r\n    setLineWidth(texts) {\r\n        let that = this;\r\n        let index = 0;\r\n        let startTime = Date.now();\r\n        let maxWidthObj = this.maxWidthObj;\r\n        clearTimeout(this.setLineWidthTimer);\r\n        _setLineWidth();\r\n\r\n        function _setLineWidth() {\r\n            while (index < texts.length) {\r\n                let lineObj = texts[index];\r\n                if (that.lineIdMap.has(lineObj.lineId)) {\r\n                    let width = that.getStrWidth(lineObj.text);\r\n                    lineObj.width = width;\r\n                    if (width > maxWidthObj.width) {\r\n                        maxWidthObj = {\r\n                            lineId: lineObj.lineId,\r\n                            text: lineObj.text,\r\n                            width: width,\r\n                        };\r\n                    }\r\n                }\r\n                index++;\r\n                if (Date.now() - startTime > 20) {\r\n                    break;\r\n                }\r\n            }\r\n            if (index < texts.length) {\r\n                that.setLineWidthTimer = setTimeout(() => {\r\n                    _setLineWidth();\r\n                }, 20);\r\n            } else {\r\n                that.setEditorData('maxWidthObj', maxWidthObj);\r\n            }\r\n        }\r\n    }\r\n    moveLineUp(command) {\r\n        this.moveLine(command, 'up');\r\n    }\r\n    moveLineDown(command) {\r\n        this.moveLine(command, 'down');\r\n    }\r\n    moveLine(command, direct) {\r\n        let cursorPosList = [];\r\n        let historyPosList = [];\r\n        let index = 0;\r\n        let prePos = null;\r\n        let searchConifg = null;\r\n        if (command) {\r\n            searchConifg = command.searchConifg;\r\n            cursorPosList = command.cursorPos;\r\n        } else {\r\n            searchConifg = this.searcher.getConfig();\r\n            cursorPosList = [];\r\n            // 过滤光标，去除上下相邻的光标\r\n            this.cursor.multiCursorPos.toArray().forEach((item) => {\r\n                let range = this.selecter.getRangeByCursorPos(item); //当前光标处于活动区域边界\r\n                let pass = true;\r\n                let line = range ? range.start.line : item.line;\r\n                if (prePos) {\r\n                    let preLine = prePos.end ? prePos.end.line : prePos.line;\r\n                    if (preLine + 1 === line || preLine === line) {\r\n                        //和之前的光标冲突，移除当前光标所处的活动区域\r\n                        range && this.selecter.removeRange(range);\r\n                        pass = false;\r\n                    }\r\n                }\r\n                if (pass) {\r\n                    var enLine = (range && range.end.line) || line;\r\n                    if ((line === 1 && direct === 'up') || (enLine === this.maxLine && direct === 'down')) {\r\n                        pass = false;\r\n                    } else {\r\n                        if (range) {\r\n                            range.margin = Util.comparePos(range.start, item) === 0 ? 'left' : 'right';\r\n                            prePos = range;\r\n                        } else {\r\n                            prePos = item;\r\n                        }\r\n                        cursorPosList.push(prePos);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        while (index < cursorPosList.length) {\r\n            let pos = cursorPosList[index];\r\n            let range = pos.start ? pos : null;\r\n            this._moveLine(pos, direct);\r\n            //移动光标和选区\r\n            let delta = direct === 'down' ? 1 : -1;\r\n            if (range) {\r\n                //更新选中区域坐标\r\n                range.start.line = range.start.line + delta;\r\n                range.end.line = range.end.line + delta;\r\n            } else {\r\n                // 更新光标坐标\r\n                pos.line = pos.line + delta;\r\n            }\r\n            historyPosList.push(range ? this.selecter.clone(range, ['margin']) : Object.assign({}, pos));\r\n            index++;\r\n        }\r\n        if (!historyPosList.length) {\r\n            return;\r\n        }\r\n        this.searcher.clearSearch();\r\n        this.cursor.clearCursorPos();\r\n        // 恢复活动区域和光标\r\n        historyPosList.forEach((item) => {\r\n            if (item.start) {\r\n                this.cursor.addCursorPos(item.margin === 'left' ? item.start : item.end);\r\n                this.selecter.addRange(item);\r\n            } else {\r\n                this.cursor.addCursorPos(item);\r\n            }\r\n        });\r\n        let historyObj = {\r\n            type: direct === 'down' ? Util.command.MOVEUP : Util.command.MOVEDOWN,\r\n            cursorPos: historyPosList,\r\n            searchConifg: searchConifg, // 记录搜索配置\r\n        };\r\n        if (!command) {\r\n            // 新增历史记录\r\n            this.history.pushHistory(historyObj);\r\n            this.searcher.refreshSearch(searchConifg);\r\n        } else {\r\n            // 撤销或重做操作后，更新历史记录\r\n            this.history.updateHistory(historyObj);\r\n            this.searcher.refreshSearch(command.searchConifg);\r\n        }\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    _moveLine(cursorPos, direct) {\r\n        let range = cursorPos.start ? cursorPos : null;\r\n        let upLine = 0;\r\n        let downLine = 0;\r\n        let text = '';\r\n        // 当前光标处于选中区域边界\r\n        if (range) {\r\n            text = this.htmls\r\n                .slice(range.start.line - 1, range.end.line)\r\n                .map((item) => {\r\n                    return item.text;\r\n                })\r\n                .join('\\n');\r\n            if (direct === 'down') {\r\n                upLine = range.start.line;\r\n                downLine = range.end.line + 1;\r\n                text = this.htmls[downLine - 1].text + '\\n' + text;\r\n            } else {\r\n                upLine = range.start.line - 1;\r\n                downLine = range.end.line;\r\n                text = text + '\\n' + this.htmls[upLine - 1].text;\r\n            }\r\n        } else {\r\n            upLine = cursorPos.line - (direct === 'down' ? 0 : 1);\r\n            downLine = upLine + 1;\r\n            text = this.htmls[downLine - 1].text + '\\n' + this.htmls[upLine - 1].text;\r\n        }\r\n        let start = {\r\n            line: upLine,\r\n            column: 0,\r\n        };\r\n        let end = {\r\n            line: downLine,\r\n            column: this.htmls[downLine - 1].text.length,\r\n        };\r\n        this._deleteContent({\r\n            start: start,\r\n            end: end,\r\n        });\r\n        this._insertContent(text, start);\r\n    }\r\n    // 向上复制一行\r\n    copyLineUp(command) {\r\n        this.copyLine(command, 'up');\r\n    }\r\n    // 向下复制一行\r\n    copyLineDown(command) {\r\n        this.copyLine(command, 'down');\r\n    }\r\n    copyLine(command, direct) {\r\n        let originList = [];\r\n        let cursorPosList = [];\r\n        let historyPosList = [];\r\n        let prePos = null;\r\n        let texts = [];\r\n        let searchConifg = null;\r\n        if (command) {\r\n            searchConifg = command.searchConifg;\r\n            originList = command.cursorPos;\r\n        } else {\r\n            searchConifg = this.searcher.getConfig();\r\n            originList = [];\r\n            // 过滤重叠光标和活动区域\r\n            this.cursor.multiCursorPos.toArray().forEach((item) => {\r\n                let range = this.selecter.getRangeByCursorPos(item);\r\n                let line = (range && range.start.line) || item.line;\r\n                let pass = true;\r\n                if (prePos) {\r\n                    let preLine = prePos.end ? prePos.end.line : prePos.line;\r\n                    if (preLine === line) {\r\n                        pass = false;\r\n                    }\r\n                }\r\n                if (pass) {\r\n                    if (range) {\r\n                        range.margin = Util.comparePos(range.start, item) === 0 ? 'left' : 'right';\r\n                        prePos = range;\r\n                    } else {\r\n                        prePos = item;\r\n                    }\r\n                    originList.push(prePos);\r\n                }\r\n            });\r\n        }\r\n        originList.forEach((item) => {\r\n            let line = 0;\r\n            let text = '';\r\n            if (item.end) {\r\n                line = item.start.line - 1;\r\n                text = this.htmls\r\n                    .slice(item.start.line - 1, item.end.line)\r\n                    .map((item) => {\r\n                        return item.text;\r\n                    })\r\n                    .join('\\n');\r\n            } else {\r\n                line = item.line - 1;\r\n                text = this.htmls[item.line - 1].text;\r\n            }\r\n            line = line < 1 ? 1 : line;\r\n            text = '\\n' + text;\r\n            texts.push(text);\r\n            cursorPosList.push({ line: line, column: this.htmls[line - 1].text.length });\r\n        });\r\n        this._insertMultiContent(texts, cursorPosList).forEach((item, index) => {\r\n            let line = 0;\r\n            let originPos = originList[index];\r\n            line = item.cursorPos.line;\r\n            if (direct === 'down') {\r\n                line = line + (originPos.start ? originPos.end.line - originPos.start.line + 1 : 1);\r\n            }\r\n            if (originPos.start) {\r\n                let delta = originPos.end.line - originPos.start.line;\r\n                originPos.end.line = line;\r\n                originPos.start.line = line - delta;\r\n            } else {\r\n                originPos.line = line;\r\n            }\r\n            historyPosList.push(originPos.start ? this.selecter.clone(originPos, ['margin']) : Object.assign({}, originPos));\r\n        });\r\n        this.searcher.clearSearch();\r\n        this.cursor.clearCursorPos();\r\n        // 恢复活动区域和光标\r\n        historyPosList.forEach((item) => {\r\n            if (item.start) {\r\n                this.cursor.addCursorPos(item.margin === 'left' ? item.start : item.end);\r\n                this.selecter.addRange(item);\r\n            } else {\r\n                this.cursor.addCursorPos(item);\r\n            }\r\n        });\r\n        let historyObj = {\r\n            type: direct === 'down' ? Util.command.DELETE_COPY_DOWN : Util.command.DELETE_COPY_UP,\r\n            cursorPos: historyPosList,\r\n            searchConifg: searchConifg, // 记录搜索配置\r\n        };\r\n        if (!command) {\r\n            // 新增历史记录\r\n            this.history.pushHistory(historyObj);\r\n            this.searcher.refreshSearch(searchConifg);\r\n        } else {\r\n            // 撤销或重做操作后，更新历史记录\r\n            this.history.updateHistory(historyObj);\r\n            this.searcher.refreshSearch(command.searchConifg);\r\n        }\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    // 删除上面一行\r\n    deleteCopyLineUp(command) {\r\n        this.deleteCopyLine(command, 'up');\r\n    }\r\n    // 删除下面一行\r\n    deleteCopyLineDown(command) {\r\n        this.deleteCopyLine(command, 'down');\r\n    }\r\n    deleteCopyLine(command, direct) {\r\n        let originList = [];\r\n        let cursorPosList = [];\r\n        let historyPosList = [];\r\n        originList = command.cursorPos;\r\n        originList.forEach((item) => {\r\n            let upLine = 0;\r\n            let downLine = 0;\r\n            let range = null;\r\n            let startColumn = 0;\r\n            let endColumn = 0;\r\n            if (item.end) {\r\n                upLine = item.start.line - 1;\r\n                downLine = item.end.line;\r\n            } else {\r\n                upLine = item.line - 1;\r\n                downLine = item.line;\r\n            }\r\n            endColumn = this.htmls[downLine - 1].text.length;\r\n            if (upLine < 1) {\r\n                upLine = 1;\r\n                if (downLine < this.maxLine) {\r\n                    downLine++;\r\n                    endColumn = 0;\r\n                }\r\n            } else {\r\n                startColumn = this.htmls[upLine - 1].text.length;\r\n            }\r\n            range = {\r\n                start: { line: upLine, column: startColumn },\r\n                end: { line: downLine, column: endColumn },\r\n            };\r\n            cursorPosList.push(range);\r\n        });\r\n        this._deleteMultiContent(cursorPosList).forEach((item, index) => {\r\n            let originPos = originList[index];\r\n            if (originPos.start) {\r\n                let delta = originPos.end.line - originPos.start.line;\r\n                if (direct === 'up') {\r\n                    originPos.start.line = item.cursorPos.line + (originPos.start.line === 1 ? 0 : 1);\r\n                    originPos.end.line = originPos.start.line + delta;\r\n                } else {\r\n                    originPos.end.line = item.cursorPos.line;\r\n                    originPos.start.line = originPos.end.line - delta;\r\n                }\r\n            } else {\r\n                if (direct === 'up') {\r\n                    originPos.line = item.cursorPos.line + (originPos.line === 1 ? 0 : 1);\r\n                } else {\r\n                    originPos.line = item.cursorPos.line;\r\n                }\r\n            }\r\n            historyPosList.push(originPos.start ? this.selecter.clone(originPos, ['margin']) : Object.assign({}, originPos));\r\n        });\r\n        this.searcher.clearSearch();\r\n        this.cursor.clearCursorPos();\r\n        // 恢复活动区域和光标\r\n        historyPosList.forEach((item) => {\r\n            if (item.start) {\r\n                this.cursor.addCursorPos(item.margin === 'left' ? item.start : item.end);\r\n                this.selecter.addRange(item);\r\n            } else {\r\n                this.cursor.addCursorPos(item);\r\n            }\r\n        });\r\n        let historyObj = {\r\n            type: direct === 'down' ? Util.command.COPY_UP : Util.command.COPY_DOWN,\r\n            cursorPos: historyPosList,\r\n            searchConifg: command.searchConifg,\r\n        };\r\n        this.history.updateHistory(historyObj);\r\n        this.searcher.refreshSearch(command.searchConifg);\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    // 插入当前行\r\n    insertLine(command) {\r\n        let searchConifg = command.searchConifg;\r\n        let originList = command.cursorPos;\r\n        let texts = command.text;\r\n        let cursorPosList = [];\r\n        originList.forEach((item) => {\r\n            let line = item.start ? item.start.line - 1 : item.line - 1;\r\n            line = line < 1 ? 1 : line;\r\n            cursorPosList.push({ line: line, column: this.htmls[line - 1].text.length });\r\n        });\r\n        this._insertMultiContent(texts, cursorPosList);\r\n        this.searcher.clearSearch();\r\n        this.cursor.clearCursorPos();\r\n        originList.forEach((item) => {\r\n            if (item.start) {\r\n                this.cursor.addCursorPos(item.margin === 'left' ? item.start : item.end);\r\n                this.selecter.addRange(item);\r\n            } else {\r\n                this.cursor.addCursorPos(item);\r\n            }\r\n        });\r\n        let historyObj = {\r\n            type: Util.command.DELETE_LINE,\r\n            cursorPos: originList,\r\n            searchConifg: searchConifg,\r\n        };\r\n        // 撤销或重做操作后，更新历史记录\r\n        this.history.updateHistory(historyObj);\r\n        this.searcher.refreshSearch(command.searchConifg);\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    // 删除当前行\r\n    deleteLine(command) {\r\n        let originList = [];\r\n        let cursorPosList = [];\r\n        let historyPosList = [];\r\n        let prePos = null;\r\n        let texts = [];\r\n        let searchConifg = null;\r\n        if (command) {\r\n            searchConifg = command.searchConifg;\r\n            originList = command.cursorPos;\r\n        } else {\r\n            searchConifg = this.searcher.getConfig();\r\n            this.cursor.multiCursorPos.forEach((item) => {\r\n                let range = this.selecter.getRangeByCursorPos(item);\r\n                let line = (range && range.start.line) || item.line;\r\n                let pass = true;\r\n                if (prePos) {\r\n                    let preLine = prePos.end ? prePos.end.line : prePos.line;\r\n                    if (preLine === line) {\r\n                        pass = false;\r\n                    }\r\n                }\r\n                if (pass) {\r\n                    if (range) {\r\n                        range.margin = Util.comparePos(range.start, item) === 0 ? 'left' : 'right';\r\n                        prePos = range;\r\n                    } else {\r\n                        prePos = item;\r\n                    }\r\n                    originList.push(prePos);\r\n                }\r\n            });\r\n        }\r\n        originList.forEach((item) => {\r\n            let upLine = 0;\r\n            let downLine = 0;\r\n            let range = null;\r\n            let startColumn = 0;\r\n            let endColumn = 0;\r\n            if (item.end) {\r\n                upLine = item.start.line - 1;\r\n                downLine = item.end.line;\r\n            } else {\r\n                upLine = item.line - 1;\r\n                downLine = item.line;\r\n            }\r\n            endColumn = this.htmls[downLine - 1].text.length;\r\n            if (upLine < 1) {\r\n                upLine = 1;\r\n                if (downLine < this.maxLine) {\r\n                    downLine++;\r\n                    endColumn = 0;\r\n                }\r\n            } else {\r\n                startColumn = this.htmls[upLine - 1].text.length;\r\n            }\r\n            range = {\r\n                start: { line: upLine, column: startColumn },\r\n                end: { line: downLine, column: endColumn },\r\n            };\r\n            texts.push(this.getRangeText(range.start, range.end));\r\n            cursorPosList.push(range);\r\n        });\r\n        this._deleteMultiContent(cursorPosList).forEach((item, index) => {\r\n            let originPos = originList[index];\r\n            let line = item.cursorPos.line;\r\n            let column = originList[index].column;\r\n            if (originPos.start) {\r\n                column = originPos.margin === 'left' ? originPos.start.column : originPos.end.column;\r\n            }\r\n            column = column > this.htmls[line - 1].text.length ? this.htmls[line - 1].text.length : column;\r\n            historyPosList.push({ line: line, column: column });\r\n        });\r\n        this.searcher.clearSearch();\r\n        this.cursor.clearCursorPos();\r\n        historyPosList.forEach((item) => {\r\n            this.cursor.addCursorPos(item);\r\n        });\r\n        let historyObj = {\r\n            type: Util.command.INSERT_LINE,\r\n            cursorPos: originList,\r\n            text: texts,\r\n            searchConifg: searchConifg,\r\n        };\r\n        if (!command) {\r\n            // 新增历史记录\r\n            this.history.pushHistory(historyObj);\r\n        } else {\r\n            // 撤销或重做操作后，更新历史记录\r\n            this.history.updateHistory(historyObj);\r\n            this.searcher.refreshSearch(command.searchConifg);\r\n        }\r\n        this.fSearcher.refreshSearch();\r\n    }\r\n    replace(texts, ranges) {\r\n        let historyArr = null;\r\n        let serial = this.serial++;\r\n        historyArr = this._deleteMultiContent(ranges);\r\n        historyArr.serial = serial;\r\n        this.history.pushHistory(historyArr);\r\n        historyArr = this._insertMultiContent(texts, this.cursor.multiCursorPos.toArray());\r\n        historyArr.serial = serial;\r\n        this.history.pushHistory(historyArr);\r\n        return this.fSearcher.refreshSearch();\r\n    }\r\n    // 点击自动提示替换输入的内容\r\n    replaceTip(tip) {\r\n        let word = tip.word || '';\r\n        let after = tip.after || '';\r\n        let before = tip.before || '';\r\n        let result = before + _getResult(tip) + after;\r\n        let ranges = null;\r\n        if (result === word) {\r\n            //替换前后一致，不做操作\r\n            return;\r\n        }\r\n        ranges = _getRanges.call(this);\r\n        this.replace(result, ranges);\r\n        _updatePos.call(this);\r\n        if (tip.type === Enum.TOKEN_TYPE.CSS_PROPERTY) {\r\n            //选中css属性名后，自动弹出属性值列表\r\n            this.autocomplete.search();\r\n        }\r\n\r\n        function _getResult(tip) {\r\n            let result = '';\r\n            if (tip.type === Enum.TOKEN_TYPE.EMMET_HTML || tip.type === Enum.TOKEN_TYPE.EMMET_CSS) {\r\n                try {\r\n                    const config = {};\r\n                    if (tip.type === Enum.TOKEN_TYPE.EMMET_CSS) {\r\n                        config.type = 'stylesheet';\r\n                    }\r\n                    result = expand(tip.result, config);\r\n                } catch (e) {\r\n                    result = tip.result;\r\n                }\r\n            } else if (tip.type === Enum.TOKEN_TYPE.TAG_NAME) {\r\n                result += tip.result + `></${tip.result}>`;\r\n            } else {\r\n                result = tip.result;\r\n            }\r\n            return result;\r\n        }\r\n\r\n        function _getRanges() {\r\n            let ranges = [];\r\n            this.cursor.multiCursorPos.forEach((cursorPos) => {\r\n                let range = null;\r\n                range = {\r\n                    start: { line: cursorPos.line, column: cursorPos.column - word.length },\r\n                    end: { line: cursorPos.line, column: cursorPos.column },\r\n                };\r\n                ranges.push(range);\r\n            });\r\n            return ranges;\r\n        }\r\n\r\n        function _updatePos() {\r\n            if (tip.type === Enum.TOKEN_TYPE.TAG_NAME || tip.type === Enum.TOKEN_TYPE.EMMET_HTML) {\r\n                //生成标签后，光标定位到标签中间的位置\r\n                let exec = regs.endTag.exec(result);\r\n                if (exec) {\r\n                    let text = result.slice(exec.index);\r\n                    let deltaArr = text.split('\\n');\r\n                    let multiCursorPos = this.cursor.multiCursorPos.toArray();\r\n                    for (let i = multiCursorPos.length - 1; i >= 0; i--) {\r\n                        let cursorPos = _getDeltaPos.call(this, deltaArr, multiCursorPos[i]);\r\n                        this.cursor.updateCursorPos(multiCursorPos[i], cursorPos.line, cursorPos.column);\r\n                    }\r\n                }\r\n            } else if (tip.type === Enum.TOKEN_TYPE.ATTR_NAME) {\r\n                //选中标签属性后，光标移动端\"\"内\r\n                this.cursor.multiCursorPos.forEach((item) => {\r\n                    this.cursor.moveCursor(item, 'left');\r\n                });\r\n            }\r\n        }\r\n\r\n        function _getDeltaPos(deltaArr, cursorPos) {\r\n            let line = cursorPos.line;\r\n            let column = cursorPos.column;\r\n            if (deltaArr.length === 1) {\r\n                column -= deltaArr[0].length;\r\n            } else {\r\n                line -= deltaArr.length - 1;\r\n                column = this.htmls[line - 1].text.length - deltaArr[0].length;\r\n            }\r\n            return {\r\n                line: line,\r\n                column: column,\r\n            };\r\n        }\r\n    }\r\n    // 获取选中范围内的文本\r\n    getRangeText(start, end) {\r\n        var text = this.htmls[start.line - 1].text;\r\n        if (start.line != end.line) {\r\n            let arr = [];\r\n            text = text.slice(start.column);\r\n            arr = this.htmls.slice(start.line, end.line - 1);\r\n            arr = arr.map((item) => {\r\n                return item.text;\r\n            });\r\n            text += arr.length ? '\\n' + arr.join('\\n') : '';\r\n            if (end.line <= this.maxLine) {\r\n                text += '\\n' + this.htmls[end.line - 1].text.slice(0, end.column);\r\n            }\r\n        } else {\r\n            text = text.slice(start.column, end.column);\r\n        }\r\n        return text;\r\n    }\r\n    // 获取待复制的文本\r\n    getCopyText(cut) {\r\n        let text = '';\r\n        let prePos = null;\r\n        let ranges = [];\r\n        this.cursor.multiCursorPos.forEach((item) => {\r\n            let range = this.selecter.getRangeByCursorPos(item);\r\n            let start = null;\r\n            if (range) {\r\n                ranges.push(range);\r\n                return;\r\n            }\r\n            if (prePos && item.line === prePos.line) {\r\n                return;\r\n            }\r\n            if (item.line > 1) {\r\n                start = {\r\n                    line: item.line - 1,\r\n                    column: this.htmls[item.line - 2].text.length,\r\n                };\r\n            } else {\r\n                start = {\r\n                    line: item.line,\r\n                    column: 0,\r\n                };\r\n            }\r\n            range = {\r\n                start: start,\r\n                end: {\r\n                    line: item.line,\r\n                    column: this.htmls[item.line - 1].text.length,\r\n                },\r\n            };\r\n            ranges.push(range);\r\n            prePos = item;\r\n        });\r\n        ranges.forEach((item) => {\r\n            let str = this.getRangeText(item.start, item.end);\r\n            text = str[0] === '\\n' ? (text += str) : (text += '\\n' + str);\r\n        });\r\n        if (cut) {\r\n            this.history.pushHistory(this._deleteMultiContent(ranges));\r\n            this.searcher.clearSearch();\r\n            this.fSearcher.refreshSearch();\r\n        }\r\n        return text.slice(1);\r\n    }\r\n    getAllText() {\r\n        return this.htmls\r\n            .map((item) => {\r\n                return item.text;\r\n            })\r\n            .join('\\n');\r\n    }\r\n}\r\nContext.contexts = {};\r\n\r\nexport default Context;\r\n","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 16:13:15\r\n * @Description: \r\n */\r\nimport Util from '@/common/util';\r\n\r\nexport default class {\r\n    constructor(editor, context) {\r\n        this.initProperties(editor, context);\r\n    }\r\n    initProperties(editor, context) {\r\n        Util.defineProperties(this, editor, [\r\n            'nowCursorPos',\r\n            'cursor',\r\n            'selecter',\r\n            'searcher',\r\n            'autocomplete',\r\n            'fSearcher',\r\n            'history',\r\n            'autoTipList',\r\n            'setAutoTip',\r\n            'prevAutoTip',\r\n            'nextAutoTip',\r\n            'selectAutoTip',\r\n            'searchWord',\r\n            'openSearch',\r\n            '$emit',\r\n        ]);\r\n        Util.defineProperties(this, context, [\r\n            'htmls',\r\n            'insertContent',\r\n            'deleteContent',\r\n            'moveLineUp',\r\n            'moveLineDown',\r\n            'copyLineUp',\r\n            'copyLineDown',\r\n            'deleteLine'\r\n        ]);\r\n        this.setEditorData = (prop, value) => {\r\n            editor.setData(prop, value);\r\n        }\r\n    }\r\n    onKeyDown(e) {\r\n        let that = this;\r\n        if (e.ctrlKey && e.shiftKey) {\r\n            e.preventDefault();\r\n            switch (e.keyCode) {\r\n                case 37: //ctrl+shift+left\r\n                    this.selecter.select('left', true);\r\n                    break;\r\n                case 38: //ctrl+shift+up\r\n                    this.moveLineUp();\r\n                    break;\r\n                case 39: //ctrl+shift+right\r\n                    this.selecter.select('right', true);\r\n                    break;\r\n                case 40: //ctrl+shift+down\r\n                    this.moveLineDown();\r\n                    break;\r\n                case 68: //ctrl+shift+D\r\n                    this.copyLineUp();\r\n                    break;\r\n                case 75: //ctrl+shift+K\r\n                    this.deleteLine();\r\n                    break;\r\n                case 76: //ctrl+alt+L\r\n                    e.preventDefault();\r\n                    this.cursor.addCursorLineEnds();\r\n                    break;\r\n            }\r\n            return false;\r\n        } else if (e.ctrlKey && e.altKey) {\r\n            switch (e.keyCode) {\r\n                case 38: //ctrl+alt+up\r\n                    e.preventDefault();\r\n                    this.cursor.addCursorAbove();\r\n                    break;\r\n                case 40: //ctrl+alt+down\r\n                    e.preventDefault();\r\n                    this.cursor.addCursorBelow();\r\n                    break;\r\n            }\r\n        } else if (e.altKey && e.shiftKey) {\r\n            switch (e.keyCode) {\r\n                case 40: //alt+shift+down\r\n                    e.preventDefault();\r\n                    this.copyLineDown();\r\n                    break;\r\n            }\r\n        } else if (e.ctrlKey) {\r\n            switch (e.keyCode) {\r\n                case 37: //left arrow\r\n                    _moveCursor('left', true);\r\n                    break;\r\n                case 39: //right arrow\r\n                    _moveCursor('right', true);\r\n                    break;\r\n                case 65: //ctrl+A,全选\r\n                    e.preventDefault();\r\n                    this.selecter.selectAll();\r\n                    break;\r\n                case 68: //ctrl+D，搜素\r\n                    e.preventDefault();\r\n                    this.searchWord('down');\r\n                    break;\r\n                case 70: //ctrl+F，搜素\r\n                    e.preventDefault();\r\n                    this.openSearch();\r\n                    break;\r\n                case 72: //ctrl+H，搜素替换\r\n                    e.preventDefault();\r\n                    this.openSearch(true);\r\n                    break;\r\n                case 83: //ctrl+s 保存\r\n                    this.$emit('save');\r\n                    break;\r\n                case 90: //ctrl+Z，撤销\r\n                case 122:\r\n                    e.preventDefault();\r\n                    this.history.undo();\r\n                    break;\r\n                case 89: //ctrl+Y，重做\r\n                case 121:\r\n                    e.preventDefault();\r\n                    this.history.redo();\r\n                    break;\r\n            }\r\n        } else if (e.shiftKey) {\r\n            switch (e.keyCode) {\r\n                case 37: //left arrow\r\n                    this.selecter.select('left');\r\n                    break;\r\n                case 38: //up arrow\r\n                    this.selecter.select('up');\r\n                    break;\r\n                case 39: //right arrow\r\n                    this.selecter.select('right');\r\n                    break;\r\n                case 40: //down arrow\r\n                    this.selecter.select('down');\r\n                    break;\r\n            }\r\n        } else {\r\n            switch (e.keyCode) {\r\n                case 9: //tab键\r\n                    e.preventDefault();\r\n                    this.autocomplete.emmet();\r\n                    break;\r\n                case 37: //left arrow\r\n                    _moveCursor('left');\r\n                    break;\r\n                case 35: //end键\r\n                    _moveCursor('end');\r\n                    break;\r\n                case 36: //home键\r\n                    _moveCursor('home');\r\n                    break;\r\n                case 38: //up arrow\r\n                    if (this.autoTipList && this.autoTipList.length) {\r\n                        that.prevAutoTip();\r\n                    } else {\r\n                        _moveCursor('up');\r\n                    }\r\n                    break;\r\n                case 39: //right arrow\r\n                    _moveCursor('right');\r\n                    break;\r\n                case 40: //down arrow\r\n                    if (this.autoTipList && this.autoTipList.length) {\r\n                        that.nextAutoTip();\r\n                    } else {\r\n                        _moveCursor('down');\r\n                    }\r\n                    break;\r\n                case 13:\r\n                case 100: //enter\r\n                    if (this.autoTipList && this.autoTipList.length) {\r\n                        e.preventDefault();\r\n                        this.selectAutoTip();\r\n                    }\r\n                    break;\r\n                case Util.keyCode.DELETE: //delete\r\n                    this.deleteContent(Util.keyCode.DELETE);\r\n                    this.autocomplete.search();\r\n                    break;\r\n                case Util.keyCode.BACKSPACE: //backspace\r\n                    this.deleteContent(Util.keyCode.BACKSPACE);\r\n                    this.autocomplete.search();\r\n                    break;\r\n            }\r\n        }\r\n\r\n        function _moveCursor(direct, wholeWord) {\r\n            //ctrl+d后，第一次移动光标只是取消选中状态\r\n            if (!that.selecter.getRangeByCursorPos(that.nowCursorPos)) {\r\n                that.cursor.multiCursorPos.forEach((cursorPos) => {\r\n                    that.cursor.moveCursor(cursorPos, direct, wholeWord);\r\n                });\r\n            }\r\n            that.setAutoTip(null); //取消自动提示\r\n            that.searcher.clearSearch();\r\n            that.fSearcher.clearActive();\r\n        }\r\n    }\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-search\",on:{\"contextmenu\":[function($event){$event.preventDefault();},function($event){$event.stopPropagation();}],\"mousedown\":function($event){$event.stopPropagation();},\"selectstart\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"my-search-left active-click\",staticStyle:{\"border-radius\":\"0\"},attrs:{\"tabindex\":\"-1\"},on:{\"click\":_vm.showReplace}},[_c('span',{staticClass:\"iconfont\",class:{ 'icon-down1': _vm.replaceVisible, 'icon-right': !_vm.replaceVisible },staticStyle:{\"font-size\":\"14px\"},attrs:{\"title\":\"Toggle Replace mode\"}})]),_c('div',{staticStyle:{\"flex-grow\":\"1\"}},[_c('div',{staticClass:\"my-search-top\"},[_c('div',{staticClass:\"my-search-input\",class:{ 'my-active': _vm.input1Focus }},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],ref:\"input1\",style:({ height: _vm.input1Height + 'px' }),attrs:{\"type\":\"text\",\"spellcheck\":\"false\"},domProps:{\"value\":(_vm.text)},on:{\"blur\":function($event){_vm.input1Focus = false},\"focus\":function($event){_vm.input1Focus = true},\"keydown\":_vm.onKeyDown,\"input\":[function($event){if($event.target.composing){ return; }_vm.text=$event.target.value},_vm.onInput]}}),_c('span',{staticClass:\"my-search-suffix\",class:{ 'my-active': _vm.ignoreCase },attrs:{\"title\":\"Match Case(Alt+C)\"},on:{\"click\":_vm.changeCase}},[_vm._v(\"Aa\")]),_c('span',{staticClass:\"my-search-suffix iconfont icon-whole-word\",class:{ 'my-active': _vm.wholeWord },attrs:{\"title\":\"Match Whole Word(Alt+W)\"},on:{\"click\":_vm.changeWhole}})]),(_vm.count)?_c('div',[_c('span',[_vm._v(_vm._s(_vm.now))]),_c('span',[_vm._v(\" of \")]),_c('span',[_vm._v(_vm._s(_vm.count))])]):_c('span',{staticClass:\"no-result\",class:{ 'my-active': _vm.text }},[_vm._v(\"No results\")])]),(_vm.replaceVisible)?_c('div',{staticClass:\"my-search-bottom\",staticStyle:{\"margin-top\":\"5px\"}},[_c('div',{staticClass:\"my-search-input\",class:{ 'my-active': _vm.input2Focus }},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.replaceText),expression:\"replaceText\"}],ref:\"input2\",style:({ height: _vm.input2Height + 'px' }),attrs:{\"type\":\"text\",\"spellcheck\":\"false\"},domProps:{\"value\":(_vm.replaceText)},on:{\"blur\":function($event){_vm.input2Focus = false},\"focus\":function($event){_vm.input2Focus = true},\"keydown\":_vm.onKeyDown2,\"input\":function($event){if($event.target.composing){ return; }_vm.replaceText=$event.target.value}}})]),_c('span',{staticClass:\"iconfont icon-replace active-click\",class:{ 'enabled-color': _vm.count > 0, 'disabled-color': _vm.count == 0 },staticStyle:{\"margin-right\":\"5px\"},attrs:{\"title\":\"Replace(Enter)\",\"tabindex\":\"-1\"},on:{\"click\":_vm.replace}}),_c('span',{staticClass:\"iconfont icon-replace-all active-click\",class:{ 'enabled-color': _vm.count > 0, 'disabled-color': _vm.count == 0 },staticStyle:{\"margin-right\":\"5px\"},attrs:{\"title\":\"Replace All(Ctrl+Alt+Enter)\",\"tabindex\":\"-1\"},on:{\"click\":_vm.replaceAll}})]):_vm._e()]),_c('div',{staticClass:\"my-search-right\"},[_c('span',{staticClass:\"iconfont icon-up active-click\",class:{ 'enabled-color': _vm.count > 0, 'disabled-color': _vm.count == 0 },staticStyle:{\"margin-right\":\"5px\"},attrs:{\"title\":\"Previous Match(Shift Enter)\",\"tabindex\":\"-1\"},on:{\"click\":_vm.searchPrev,\"focus\":function($event){_vm.preFocus = true},\"blur\":function($event){_vm.preFocus = false}}}),_c('span',{staticClass:\"iconfont icon-down active-click\",class:{ 'enabled-color': _vm.count > 0, 'disabled-color': _vm.count == 0 },staticStyle:{\"margin-right\":\"5px\"},attrs:{\"title\":\"Next Match(Enter)\",\"tabindex\":\"-1\"},on:{\"click\":_vm.searchNext,\"focus\":function($event){_vm.nextFocus = true},\"blur\":function($event){_vm.nextFocus = false}}}),_c('span',{staticClass:\"iconfont icon-close active-click\",attrs:{\"title\":\"Close\"},on:{\"click\":_vm.close}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n    <div @contextmenu.prevent @contextmenu.stop @mousedown.stop @selectstart.stop class=\"my-search\">\r\n        <div class=\"my-search-left active-click\" style=\"border-radius: 0\" tabindex=\"-1\" @click=\"showReplace\">\r\n            <span :class=\"{ 'icon-down1': replaceVisible, 'icon-right': !replaceVisible }\" class=\"iconfont\" style=\"font-size: 14px\" title=\"Toggle Replace mode\"></span>\r\n        </div>\r\n        <div style=\"flex-grow: 1\">\r\n            <div class=\"my-search-top\">\r\n                <div :class=\"{ 'my-active': input1Focus }\" class=\"my-search-input\">\r\n                    <textarea\r\n                        @blur=\"input1Focus = false\"\r\n                        @focus=\"input1Focus = true\"\r\n                        @keydown=\"onKeyDown\"\r\n                        @input=\"onInput\"\r\n                        ref=\"input1\"\r\n                        :style=\"{ height: input1Height + 'px' }\"\r\n                        type=\"text\"\r\n                        spellcheck=\"false\"\r\n                        v-model=\"text\"\r\n                    ></textarea>\r\n                    <span :class=\"{ 'my-active': ignoreCase }\" @click=\"changeCase\" class=\"my-search-suffix\" title=\"Match Case(Alt+C)\">Aa</span>\r\n                    <span :class=\"{ 'my-active': wholeWord }\" @click=\"changeWhole\" class=\"my-search-suffix iconfont icon-whole-word\" title=\"Match Whole Word(Alt+W)\"></span>\r\n                </div>\r\n                <div v-if=\"count\">\r\n                    <span>{{ now }}</span>\r\n                    <span>&nbsp;of&nbsp;</span>\r\n                    <span>{{ count }}</span>\r\n                </div>\r\n                <span class=\"no-result\" :class=\"{ 'my-active': text }\" v-else>No results</span>\r\n            </div>\r\n            <div class=\"my-search-bottom\" style=\"margin-top: 5px\" v-if=\"replaceVisible\">\r\n                <div :class=\"{ 'my-active': input2Focus }\" class=\"my-search-input\">\r\n                    <textarea\r\n                        @blur=\"input2Focus = false\"\r\n                        @focus=\"input2Focus = true\"\r\n                        @keydown=\"onKeyDown2\"\r\n                        ref=\"input2\"\r\n                        :style=\"{ height: input2Height + 'px' }\"\r\n                        type=\"text\"\r\n                        v-model=\"replaceText\"\r\n                        spellcheck=\"false\"\r\n                    ></textarea>\r\n                </div>\r\n                <span\r\n                    :class=\"{ 'enabled-color': count > 0, 'disabled-color': count == 0 }\"\r\n                    @click=\"replace\"\r\n                    class=\"iconfont icon-replace active-click\"\r\n                    style=\"margin-right: 5px\"\r\n                    title=\"Replace(Enter)\"\r\n                    tabindex=\"-1\"\r\n                ></span>\r\n                <span\r\n                    :class=\"{ 'enabled-color': count > 0, 'disabled-color': count == 0 }\"\r\n                    @click=\"replaceAll\"\r\n                    class=\"iconfont icon-replace-all active-click\"\r\n                    style=\"margin-right: 5px\"\r\n                    title=\"Replace All(Ctrl+Alt+Enter)\"\r\n                    tabindex=\"-1\"\r\n                ></span>\r\n            </div>\r\n        </div>\r\n        <div class=\"my-search-right\">\r\n            <span\r\n                :class=\"{ 'enabled-color': count > 0, 'disabled-color': count == 0 }\"\r\n                @click=\"searchPrev\"\r\n                @focus=\"preFocus = true\"\r\n                @blur=\"preFocus = false\"\r\n                class=\"iconfont icon-up active-click\"\r\n                style=\"margin-right: 5px\"\r\n                title=\"Previous Match(Shift Enter)\"\r\n                tabindex=\"-1\"\r\n            ></span>\r\n            <span\r\n                :class=\"{ 'enabled-color': count > 0, 'disabled-color': count == 0 }\"\r\n                @click=\"searchNext\"\r\n                @focus=\"nextFocus = true\"\r\n                @blur=\"nextFocus = false\"\r\n                class=\"iconfont icon-down active-click\"\r\n                style=\"margin-right: 5px\"\r\n                title=\"Next Match(Enter)\"\r\n                tabindex=\"-1\"\r\n            ></span>\r\n            <span @click=\"close\" class=\"iconfont icon-close active-click\" title=\"Close\"></span>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport $ from 'jquery';\r\nexport default {\r\n    name: 'Search',\r\n    props: {\r\n        now: {\r\n            type: Number,\r\n            default: 1,\r\n        },\r\n        count: {\r\n            type: Number,\r\n            default: 0,\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            text: '',\r\n            replaceText: '',\r\n            replaceVisible: false,\r\n            wholeWord: false,\r\n            ignoreCase: false,\r\n            searchPrevActive: false,\r\n            searchNextActive: false,\r\n            input1Focus: false,\r\n            input2Focus: false,\r\n            preFocus: false,\r\n            nextFocus: false,\r\n            input1Height: 30,\r\n            input2Height: 30,\r\n        };\r\n    },\r\n    watch: {\r\n        text() {\r\n            let lines = this.text.split(/\\n/);\r\n            this.input1Height = lines.length * 20 + 10;\r\n        },\r\n        replaceText() {\r\n            let lines = this.replaceText.split(/\\n/);\r\n            this.input2Height = lines.length * 20 + 10;\r\n        },\r\n    },\r\n    created() {\r\n        $(document).on('keydown', (e) => {\r\n            if (e.keyCode === 13 || e.keyCode === 100) {\r\n                if (this.preFocus) {\r\n                    this.searchPrev();\r\n                } else if (this.nextFocus) {\r\n                    this.searchNext();\r\n                }\r\n            }\r\n        });\r\n    },\r\n    methods: {\r\n        initData(obj) {\r\n            for (let key in obj) {\r\n                this[key] = obj[key];\r\n            }\r\n        },\r\n        getData() {\r\n            return {\r\n                text: this.text,\r\n                wholeWord: this.wholeWord,\r\n                ignoreCase: this.ignoreCase,\r\n            };\r\n        },\r\n        search() {\r\n            let searchId = this.search.id || 1;\r\n            this.search.id = searchId;\r\n            this.$nextTick(() => {\r\n                if (this.search.id !== searchId) {\r\n                    return;\r\n                }\r\n                this.$emit('search', {\r\n                    text: this.text,\r\n                    ignoreCase: this.ignoreCase,\r\n                    wholeWord: this.wholeWord,\r\n                });\r\n            });\r\n        },\r\n        changeCase() {\r\n            this.ignoreCase = !this.ignoreCase;\r\n            this.focus();\r\n            this.onInput();\r\n        },\r\n        changeWhole() {\r\n            this.wholeWord = !this.wholeWord;\r\n            this.focus();\r\n            this.onInput();\r\n        },\r\n        showReplace() {\r\n            this.replaceVisible = !this.replaceVisible;\r\n        },\r\n        searchNext() {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            this.$emit('next');\r\n        },\r\n        searchPrev() {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            this.$emit('prev');\r\n        },\r\n        replace() {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            this.$emit('replace', { text: this.replaceText });\r\n        },\r\n        replaceAll() {\r\n            if (!this.count) {\r\n                return;\r\n            }\r\n            this.$emit('replaceAll', { text: this.replaceText });\r\n        },\r\n        close() {\r\n            this.$emit('close');\r\n        },\r\n        focus() {\r\n            this.$refs.input1.focus();\r\n            requestAnimationFrame(() => {\r\n                this.$refs.input1.focus();\r\n            });\r\n        },\r\n        directBlur() {\r\n            this.searchPrevActive = false;\r\n            this.searchNextActive = false;\r\n        },\r\n        onKeyDown(e) {\r\n            if (e.keyCode === 13 || e.keyCode === 100) {\r\n                e.preventDefault();\r\n                this.$emit('next');\r\n            }\r\n        },\r\n        onKeyDown2(e) {\r\n            if (e.keyCode === 13 || e.keyCode === 100) {\r\n                e.preventDefault();\r\n                if (this.count) {\r\n                    if (e.ctrlKey && e.altKey) {\r\n                        this.replaceAll();\r\n                    } else {\r\n                        this.replace();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        onInput() {\r\n            clearTimeout(this.searchTimer);\r\n            this.searchTimer = setTimeout(() => {\r\n                this.search();\r\n            }, 100);\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=097d468a&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"auto\",staticClass:\"my-auto my-shadow my-border my-scroll-overlay my-scroll-mini\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();},\"wheel\":function($event){$event.stopPropagation();}}},[_c('div',_vm._l((_vm.tipList),function(item){return _c('div',{staticClass:\"my-auto-item my-center-between\",class:{'my-active': item.active},on:{\"mousedown\":function($event){return _vm.onClick(item)}}},[_c('div',{staticClass:\"my-center-between\"},[_c('div',{staticClass:\"my-auto-icon my-center-center iconfont\",class:[item.icon]}),_c('div',{staticClass:\"my-auto-content\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm._html(item))}})])]),_c('div',{staticClass:\"my-auto-desc\"},[_vm._v(_vm._s(item.desc))])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div :style=\"styles\" @mousedown.stop @wheel.stop class=\"my-auto my-shadow my-border my-scroll-overlay my-scroll-mini\" ref=\"auto\">\r\n\t\t<div>\r\n\t\t\t<div :class=\"{'my-active': item.active}\" @mousedown=\"onClick(item)\" class=\"my-auto-item my-center-between\" v-for=\"item in tipList\">\r\n\t\t\t\t<div class=\"my-center-between\">\r\n\t\t\t\t\t<div :class=\"[item.icon]\" class=\"my-auto-icon my-center-center iconfont\"></div>\r\n\t\t\t\t\t<div class=\"my-auto-content\">\r\n\t\t\t\t\t\t<span v-html=\"_html(item)\"></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"my-auto-desc\">{{item.desc}}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'AutoTip',\r\n    props: {\r\n        tipList: {\r\n            type: Array,\r\n            default: []\r\n        },\r\n        styles: {\r\n            type: Object\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            nowIndex: 0,\r\n            itemHeight: 25\r\n        }\r\n    },\r\n    computed: {\r\n        _html() {\r\n            return (item) => {\r\n                let index = 0;\r\n                let html = '';\r\n                item.indexs.forEach((_index) => {\r\n                    html += item.result.slice(index, _index);\r\n                    html += `<span class=\"match-char\">${item.result[_index]}</span>`;\r\n                    index = _index + 1;\r\n                });\r\n                return html + item.result.slice(index);\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        nowIndex() {\r\n            let $auto = this.$refs.auto;\r\n            let height = (this.nowIndex + 1) * this.itemHeight;\r\n            if ($auto && height > $auto.clientHeight + $auto.scrollTop) {\r\n                $auto.scrollTop = height - $auto.clientHeight;\r\n            } else if ($auto && height < $auto.scrollTop + this.itemHeight) {\r\n                $auto.scrollTop = height - this.itemHeight;\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n        onClick(item) {\r\n            this.$emit('change', item);\r\n        },\r\n        prev() {\r\n            let index = this.getActiveIndex();\r\n            this.tipList[index].active = false;\r\n            index = index - 1;\r\n            index = index < 0 ? this.tipList.length - 1 : index;\r\n            this.tipList[index].active = true;\r\n            this.nowIndex = index;\r\n        },\r\n        next() {\r\n            let index = this.getActiveIndex();\r\n            this.tipList[index].active = false;\r\n            index = index + 1;\r\n            index = index > this.tipList.length - 1 ? 0 : index;\r\n            this.tipList[index].active = true;\r\n            this.nowIndex = index;\r\n        },\r\n        getActiveIndex() {\r\n            for (let i = 0; i < this.tipList.length; i++) {\r\n                if (this.tipList[i].active) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.icon-function {\r\n    color: #a6e22e;\r\n}\r\n.icon-class {\r\n    color: gold;\r\n}\r\n.icon-property {\r\n    color: lightskyblue;\r\n}\r\n.icon-value {\r\n    color: lightblue;\r\n}\r\n</style>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./AutoTip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./AutoTip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AutoTip.vue?vue&type=template&id=378f7506&scoped=true&\"\nimport script from \"./AutoTip.vue?vue&type=script&lang=js&\"\nexport * from \"./AutoTip.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AutoTip.vue?vue&type=style&index=0&id=378f7506&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"378f7506\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-tip\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"my-tip-content\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.content)}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n\t<div :style=\"styles\" @mousedown.stop class=\"my-tip\">\r\n\t\t<div class=\"my-tip-content\">\r\n\t\t\t<div v-html=\"content\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'Tip',\r\n    props: {\r\n        content: String,\r\n        styles: {\r\n            type: Object\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n        }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Tip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Tip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tip.vue?vue&type=template&id=3edf792c&\"\nimport script from \"./Tip.vue?vue&type=script&lang=js&\"\nexport * from \"./Tip.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div @contextmenu.prevent.stop=\"onContextmenu\" @selectstart.prevent @wheel.prevent=\"onWheel\" class=\"my-editor-wrap\" ref=\"editor\">\r\n        <!-- 行号 -->\r\n        <div :style=\"{ top: _numTop }\" class=\"my-nums\" v-if=\"active\">\r\n            <!-- 占位行号，避免行号宽度滚动时变化 -->\r\n            <div class=\"my-num\" style=\"visibility: hidden\">{{ maxLine }}</div>\r\n            <div :class=\"{ 'my-active': nowCursorPos.line === line.num }\" :key=\"line.num\" :style=\"{ height: _lineHeight, 'line-height': _lineHeight }\" class=\"my-num\" v-for=\"line in renderHtmls\">\r\n                <span class=\"num\">{{ line.num }}</span>\r\n                <!-- 折叠图标 -->\r\n                <span\r\n                    :class=\"['iconfont', line.fold == 'open' ? 'my-fold-open icon-down1' : 'my-fold-close icon-right']\"\r\n                    @click=\"onToggleFold(line.num)\"\r\n                    class=\"my-fold my-center-center\"\r\n                    v-if=\"line.fold\"\r\n                ></span>\r\n            </div>\r\n        </div>\r\n        <div :style=\"{ 'box-shadow': _leftShadow }\" class=\"my-content-wrap\">\r\n            <!-- 可滚动区域 -->\r\n            <div @scroll=\"onScroll\" class=\"my-scroller my-scroll-overlay\" ref=\"scroller\">\r\n                <!-- 内如区域 -->\r\n                <div\r\n                    :style=\"{ minWidth: _contentMinWidth, height: contentHeight }\"\r\n                    @mousedown=\"onContentMdown\"\r\n                    @mousemove=\"onContentMmove\"\r\n                    @mouseleave=\"onContentMLeave\"\r\n                    @selectend.prevent=\"onSelectend\"\r\n                    class=\"my-content\"\r\n                    ref=\"content\"\r\n                >\r\n                    <div :style=\"{ top: _top }\" class=\"my-render\" ref=\"render\" v-if=\"active\">\r\n                        <div\r\n                            :class=\"{ 'my-active': _activeLine(line.num) }\"\r\n                            :data-line=\"line.num\"\r\n                            :id=\"'line_' + line.num\"\r\n                            :key=\"line.num\"\r\n                            :style=\"{ height: _lineHeight, 'line-height': _lineHeight }\"\r\n                            class=\"my-line\"\r\n                            v-for=\"line in renderHtmls\"\r\n                        >\r\n                            <!-- my-select-bg为选中状态 -->\r\n                            <div\r\n                                :class=\"[\r\n                                    line.active ? 'my-active' : '',\r\n                                    line.selected ? (line.isFsearch ? 'my-search-bg' : 'my-select-bg') : '',\r\n                                    line.selected && selectedFg ? 'my-select-fg' : '',\r\n                                    line.fold == 'close' ? 'fold-close' : '',\r\n                                ]\"\r\n                                :data-line=\"line.num\"\r\n                                class=\"my-code\"\r\n                                v-html=\"line.html\"\r\n                            ></div>\r\n                            <!-- 当前光标所处范围-begin -->\r\n                            <div\r\n                                class=\"my-bracket-match\"\r\n                                :style=\"{ left: bracketMatch.start.left + 'px', width: bracketMatch.start.width + 'px' }\"\r\n                                v-if=\"bracketMatch && line.num == bracketMatch.start.line\"\r\n                            ></div>\r\n                            <!-- 当前光标所处范围-end -->\r\n                            <div\r\n                                class=\"my-bracket-match\"\r\n                                :style=\"{ left: bracketMatch.end.left + 'px', width: bracketMatch.end.width + 'px' }\"\r\n                                v-if=\"bracketMatch && line.num == bracketMatch.end.line\"\r\n                            ></div>\r\n                            <!-- 选中时的首行背景 -->\r\n                            <div\r\n                                :class=\"{ 'my-active': range.active, 'my-search-bg': range.isFsearch }\"\r\n                                :style=\"{ left: range.left + 'px', width: range.width + 'px' }\"\r\n                                class=\"my-line-bg my-select-bg\"\r\n                                v-for=\"range in line.selectStarts\"\r\n                            ></div>\r\n                            <!-- 选中时的末行背景 -->\r\n                            <div\r\n                                :class=\"{ 'my-active': range.active, 'my-search-bg': range.isFsearch }\"\r\n                                :style=\"{ left: range.left + 'px', width: range.width + 'px' }\"\r\n                                class=\"my-line-bg my-select-bg\"\r\n                                v-for=\"range in line.selectEnds\"\r\n                            ></div>\r\n                            <span :style=\"{ left: _tabLineLeft(tab) }\" class=\"my-tab-line\" v-for=\"tab in line.tabNum\"></span>\r\n                            <!-- 模拟光标 -->\r\n                            <div :style=\"{ height: _lineHeight, left: left, visibility: _cursorVisible }\" class=\"my-cursor\" style=\"top: 0px\" v-for=\"left in line.cursorList\"></div>\r\n                        </div>\r\n                    </div>\r\n                    <!-- 输入框 -->\r\n                    <textarea\r\n                        :style=\"{ top: _textAreaPos.top, left: _textAreaPos.left }\"\r\n                        @blur=\"onBlur\"\r\n                        @compositionend=\"onCompositionend\"\r\n                        @compositionstart=\"onCompositionstart\"\r\n                        @copy.prevent=\"onCopy\"\r\n                        @cut.prevent=\"onCut\"\r\n                        @focus=\"onFocus\"\r\n                        @input=\"onInput\"\r\n                        @keydown=\"onKeyDown\"\r\n                        @paste.prevent=\"onPaste\"\r\n                        class=\"my-textarea\"\r\n                        ref=\"textarea\"\r\n                    ></textarea>\r\n                    <auto-tip :styles=\"autoTipStyle\" :tipList=\"autoTipList\" @change=\"onClickAuto\" ref=\"autoTip\" v-show=\"autoTipList && autoTipList.length\"></auto-tip>\r\n                </div>\r\n            </div>\r\n            <!-- 搜索框 -->\r\n            <search-dialog\r\n                :count=\"searchCount\"\r\n                :now=\"searchNow\"\r\n                @close=\"onCloseSearch\"\r\n                @next=\"onSearchNext()\"\r\n                @prev=\"onSearchPrev()\"\r\n                @replace=\"replace\"\r\n                @replaceAll=\"replaceAll\"\r\n                @search=\"onSearch\"\r\n                ref=\"searchDialog\"\r\n                v-show=\"searchVisible\"\r\n            ></search-dialog>\r\n        </div>\r\n        <!-- 右键菜单 -->\r\n        <Menu :checkable=\"false\" :menuList=\"menuList\" :styles=\"menuStyle\" @change=\"onClickMenu\" ref=\"menu\" v-show=\"menuVisible\"></Menu>\r\n        <tip :content=\"tipContent\" :styles=\"tipStyle\" ref=\"tip\" v-show=\"tipContent\"></tip>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Tokenizer from '@/module/tokenizer/index';\r\nimport Lint from '@/module/lint/index';\r\nimport Autocomplete from '@/module/autocomplete/index';\r\nimport Fold from '@/module/fold/index';\r\nimport Search from '@/module/search/index';\r\nimport Select from '@/module/select/index';\r\nimport Cursor from '@/module/cursor/index';\r\nimport History from '@/module/history/index';\r\nimport Context from '@/module/context/index';\r\nimport ShortCut from '@/module/shortcut/editor';\r\nimport SearchDialog from './Search';\r\nimport Menu from './Menu';\r\nimport AutoTip from './AutoTip';\r\nimport Tip from './Tip';\r\nimport Util from '@/common/util';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst contexts = Context.contexts;\r\n\r\nexport default {\r\n    name: 'Editor',\r\n    components: {\r\n        SearchDialog,\r\n        Menu,\r\n        AutoTip,\r\n        Tip,\r\n    },\r\n    props: {\r\n        id: {\r\n            type: Number,\r\n        },\r\n        active: {\r\n            type: Boolean,\r\n            default: false,\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            charObj: {\r\n                charWidth: 7.15,\r\n                fullAngleCharWidth: 15,\r\n                charHight: 19,\r\n            },\r\n            nowCursorPos: {\r\n                line: 1,\r\n                column: 0,\r\n            },\r\n            cursorVisible: true,\r\n            cursorFocus: true,\r\n            language: '',\r\n            theme: '',\r\n            tabSize: 4,\r\n            renderHtmls: [],\r\n            startLine: 1,\r\n            top: 0,\r\n            cursorLeft: 0,\r\n            scrollLeft: 0,\r\n            scrollTop: 0,\r\n            maxVisibleLines: 1,\r\n            maxLine: 1,\r\n            contentHeight: '100%',\r\n            scrollerArea: {},\r\n            bracketMatch: {\r\n                start: {},\r\n                end: {},\r\n            },\r\n            maxWidthObj: {\r\n                lineId: null,\r\n                text: '',\r\n                width: 0,\r\n            },\r\n            menuList: [\r\n                [\r\n                    {\r\n                        name: 'Cut',\r\n                        op: 'cut',\r\n                        shortcut: 'Ctrl+X',\r\n                    },\r\n                    {\r\n                        name: 'Copy',\r\n                        op: 'copy',\r\n                        shortcut: 'Ctrl+C',\r\n                    },\r\n                    {\r\n                        name: 'Paste',\r\n                        op: 'paste',\r\n                        shortcut: 'Ctrl+V',\r\n                    },\r\n                ],\r\n            ],\r\n            menuStyle: {\r\n                top: '0px',\r\n                left: '0px',\r\n                'min-width': '200px',\r\n            },\r\n            tipStyle: {\r\n                top: '0px',\r\n                left: '0px',\r\n            },\r\n            autoTipStyle: {\r\n                top: '50%',\r\n                left: '50%',\r\n            },\r\n            errorMap: {},\r\n            errors: [],\r\n            autoTipList: [],\r\n            tipContent: null,\r\n            menuVisible: false,\r\n            searchVisible: false,\r\n            selectedFg: false,\r\n            activeLineBg: true,\r\n            searchNow: 1,\r\n            searchCount: 0,\r\n        };\r\n    },\r\n    computed: {\r\n        _numTop() {\r\n            return this.top - this.charObj.charHight + 'px';\r\n        },\r\n        _leftShadow() {\r\n            return this.scrollLeft ? '17px 0 16px -16px rgba(0, 0, 0, 0.8) inset' : 'none';\r\n        },\r\n        _top() {\r\n            return (this.folder.getRelativeLine(this.startLine) - 1) * this.charObj.charHight + 'px';\r\n        },\r\n        _lineHeight() {\r\n            return this.charObj.charHight + 'px';\r\n        },\r\n        _cursorVisible() {\r\n            return this.cursorVisible && this.cursorFocus ? 'visible' : 'hidden';\r\n        },\r\n        _hScrollWidth() {\r\n            return this._contentMinWidth;\r\n        },\r\n        _contentMinWidth() {\r\n            let width = 0;\r\n            if (this.$refs.content) {\r\n                width = Util.getStrExactWidth(this.maxWidthObj.text, this.tabSize, this.$refs.content);\r\n                width += this.charObj.fullAngleCharWidth;\r\n            }\r\n            width = this.scrollerArea.width > width ? this.scrollerArea.width : width;\r\n            return width + 'px';\r\n        },\r\n        _textAreaPos() {\r\n            let left = this.cursorLeft;\r\n            let top = this.top;\r\n            if (this.nowCursorPos) {\r\n                let line = this.nowCursorPos.line < this.startLine ? this.startLine : this.nowCursorPos.line;\r\n                top = this.folder.getRelativeLine(line) * this.charObj.charHight;\r\n                if (top > this.scrollTop + this.scrollerArea.height - 2 * this.charObj.charHight) {\r\n                    top = this.scrollTop + this.scrollerArea.height - 2 * this.charObj.charHight;\r\n                }\r\n            }\r\n            return {\r\n                top: top + 'px',\r\n                left: left + 'px',\r\n            };\r\n        },\r\n        _tabLineLeft() {\r\n            return (tab) => {\r\n                return (tab - 1) * this.tabSize * this.charObj.charWidth + 'px';\r\n            };\r\n        },\r\n        _activeLine() {\r\n            return (num) => {\r\n                return this.nowCursorPos.line == num && this.activeLineBg;\r\n            };\r\n        },\r\n        space() {\r\n            return Util.space(this.tabSize);\r\n        },\r\n        myContext() {\r\n            return contexts[this.id];\r\n        },\r\n    },\r\n    watch: {\r\n        language: function (newVal) {\r\n            this.myContext.htmls.forEach((lineObj) => {\r\n                lineObj.tokens = null;\r\n                lineObj.folds = null;\r\n                lineObj.stateFold = null;\r\n                lineObj.states = null;\r\n                lineObj.html = '';\r\n            });\r\n            this.lint.initLanguage(newVal);\r\n            this.tokenizer.initLanguage(newVal);\r\n        },\r\n        theme: function () {\r\n            this.myContext.htmls.forEach((lineObj) => {\r\n                lineObj.html = '';\r\n            });\r\n            this.render();\r\n        },\r\n        tabSize: function (newVal) {\r\n            this.render();\r\n            this.maxWidthObj = { lineId: null, text: '', width: 0 };\r\n            this.myContext.setLineWidth(this.myContext.htmls);\r\n        },\r\n        maxLine: function (newVal) {\r\n            this.setContentHeight();\r\n        },\r\n        startLine: function (newVal) {\r\n            this.render();\r\n            this.tokenizer.tokenizeVisibleLins();\r\n        },\r\n        nowCursorPos: {\r\n            handler: function (newVal) {\r\n                EventBus.$emit('cursor-change', {\r\n                    line: newVal ? newVal.line : '?',\r\n                    column: newVal ? newVal.column : '?',\r\n                });\r\n                this.renderBracketMatch();\r\n            },\r\n            deep: true,\r\n        },\r\n        active: function (newVal) {\r\n            if (newVal) {\r\n                this.showEditor();\r\n            } else {\r\n                this.autocomplete.stop();\r\n            }\r\n        },\r\n    },\r\n    created() {\r\n        this.initData();\r\n        this.initEventBus();\r\n        this.initEvent();\r\n    },\r\n    mounted() {\r\n        this.selectedFg = !!globalData.colors['editor.selectionForeground'];\r\n        this.showEditor();\r\n        this.initResizeEvent();\r\n    },\r\n    destroyed() {\r\n        this.unbindEvent();\r\n    },\r\n    methods: {\r\n        // 初始化数据\r\n        initData() {\r\n            this.editorId = this.id;\r\n            contexts[this.editorId] = new Context(this);\r\n            this.maxWidthObj.lineId = this.myContext.htmls[0].lineId;\r\n            this.tokenizer = new Tokenizer(this, this.myContext);\r\n            this.lint = new Lint(this, this.myContext);\r\n            this.autocomplete = new Autocomplete(this, this.myContext);\r\n            this.folder = new Fold(this, this.myContext);\r\n            this.history = new History(this, this.myContext);\r\n            this.selecter = new Select(this, this.myContext);\r\n            this.searcher = new Search(this, this.myContext, this.selecter);\r\n            this.fSelecter = new Select(this, this.myContext);\r\n            this.fSearcher = new Search(this, this.myContext, this.fSelecter);\r\n            this.shortcut = new ShortCut(this, this.myContext);\r\n            this.cursor = new Cursor(this, this.myContext);\r\n            this.cursor.addCursorPos(this.nowCursorPos);\r\n            this.wordPattern = Util.getWordPattern(this.language);\r\n            this.wordPattern = new RegExp(`^(${this.wordPattern.source})`);\r\n        },\r\n        // 初始化文档事件\r\n        initEvent() {\r\n            this.initEvent.fn1 = (e) => {\r\n                this.active && this.onDocumentMmove(e);\r\n            };\r\n            this.initEvent.fn2 = (e) => {\r\n                this.active && this.onDocumentMouseUp(e);\r\n            };\r\n            $(document).on('mousemove', this.initEvent.fn1);\r\n            $(document).on('mouseup', this.initEvent.fn2);\r\n        },\r\n        initResizeEvent() {\r\n            const resizeObserver = new ResizeObserver((entries) => {\r\n                if (this.$refs.editor) {\r\n                    this.showEditor();\r\n                }\r\n            });\r\n            resizeObserver.observe(this.$refs.editor);\r\n        },\r\n        initEventBus() {\r\n            EventBus.$on(\r\n                'language-change',\r\n                (this.initEventBus.fn1 = (language) => {\r\n                    if (this.active) {\r\n                        this.language = language;\r\n                    }\r\n                    this._language = language;\r\n                })\r\n            );\r\n            EventBus.$on(\r\n                'tab-size-change',\r\n                (this.initEventBus.fn2 = (tabSize) => {\r\n                    if (this.active) {\r\n                        this.tabSize = tabSize;\r\n                    }\r\n                })\r\n            );\r\n            EventBus.$on(\r\n                'close-menu',\r\n                (this.initEventBus.fn3 = () => {\r\n                    this.menuVisible = false;\r\n                    this.autoTipList = null;\r\n                    this.autocomplete.stop();\r\n                })\r\n            );\r\n            EventBus.$on(\r\n                'theme-change',\r\n                (this.initEventBus.fn4 = (theme) => {\r\n                    this.selectedFg = !!globalData.colors['editor.selectionForeground'];\r\n                    if (this.active) {\r\n                        this.theme = theme;\r\n                    }\r\n                    this._theme = theme;\r\n                })\r\n            );\r\n        },\r\n        unbindEvent() {\r\n            $(document).unbind('mousemove', this.initEvent.fn1);\r\n            $(document).unbind('mouseup', this.initEvent.fn2);\r\n            EventBus.$off('language-change', this.initEventBus.fn1);\r\n            EventBus.$off('tab-size-change', this.initEventBus.fn2);\r\n            EventBus.$off('close-menu', this.initEventBus.fn3);\r\n            EventBus.$off('theme-change', this.initEventBus.fn4);\r\n        },\r\n        showEditor() {\r\n            if (this.active) {\r\n                this.$nextTick(() => {\r\n                    this.language = this._language || '';\r\n                    this.theme = this._theme || '';\r\n                    this.charObj = Util.getCharWidth(this.$refs.content);\r\n                    this.maxVisibleLines = Math.ceil(this.$refs.scroller.clientHeight / this.charObj.charHight) + 1;\r\n                    this.render();\r\n                    this.focus();\r\n                });\r\n            }\r\n        },\r\n        // 显示光标\r\n        showCursor() {\r\n            this.cursorFocus = true;\r\n            if (!this.cursor.multiCursorPos.size) {\r\n                this.showCursor.show = false;\r\n                return;\r\n            }\r\n            if (this.showCursor.show) {\r\n                return;\r\n            }\r\n            this.showCursor.show = true;\r\n            this.cursorVisible = true;\r\n            let _timer = () => {\r\n                clearTimeout(this.curserTimer);\r\n                this.curserTimer = setTimeout(() => {\r\n                    this.cursorVisible = !this.cursorVisible;\r\n                    _timer();\r\n                }, 500);\r\n            };\r\n            _timer();\r\n        },\r\n        // 隐藏光标\r\n        hideCursor() {\r\n            clearTimeout(this.curserTimer);\r\n            this.showCursor.show = false;\r\n            this.cursorFocus = false;\r\n        },\r\n        // 聚焦\r\n        focus() {\r\n            this.$refs.textarea.focus();\r\n            requestAnimationFrame(() => {\r\n                this.$refs.textarea.focus();\r\n            });\r\n        },\r\n        // 渲染\r\n        render(forceCursorView) {\r\n            let renderId = this.renderId + 1 || 1;\r\n            this.renderId = renderId;\r\n            this.$nextTick(() => {\r\n                if (this.renderId !== renderId) {\r\n                    return;\r\n                }\r\n                this.renderLine();\r\n                this.renderSelectedBg();\r\n                this.renderSelectionToken();\r\n                this.renderError();\r\n                this.renderCursor(forceCursorView);\r\n                this.$nextTick(() => {\r\n                    this.scrollerArea = {\r\n                        height: this.$refs.scroller.clientHeight,\r\n                        width: this.$refs.scroller.clientWidth,\r\n                    };\r\n                });\r\n            });\r\n        },\r\n        // 渲染代码\r\n        renderLine(lineId) {\r\n            let that = this;\r\n            // 只更新一行\r\n            if (lineId) {\r\n                if (this.myContext.renderedIdMap.has(lineId)) {\r\n                    let item = this.myContext.lineIdMap.get(lineId);\r\n                    let obj = this.myContext.renderedIdMap.get(lineId);\r\n                    // 高亮完成渲染某一行时，render可能还没完成，导致num没更新，此时跳过\r\n                    if (this.myContext.htmls[obj.num - 1] && this.myContext.htmls[obj.num - 1].lineId === lineId) {\r\n                        Object.assign(obj, _getObj(item, obj.num));\r\n                        this.renderCursor();\r\n                        this.renderSelectedBg();\r\n                        this.renderSelectionToken(obj.line);\r\n                        this.renderError(obj.line);\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            this.myContext.renderedIdMap.clear();\r\n            this.myContext.renderedLineMap.clear();\r\n            this.renderHtmls = [];\r\n            for (let i = 0, startLine = this.startLine; i < this.maxVisibleLines && startLine <= this.myContext.htmls.length; i++) {\r\n                let lineObj = this.myContext.htmls[startLine - 1];\r\n                let lineId = lineObj.lineId;\r\n                let obj = _getObj(lineObj, startLine);\r\n                let fold = this.folder.getFoldByLine(startLine);\r\n                this.renderHtmls.push(obj);\r\n                this.myContext.renderedIdMap.set(lineId, obj);\r\n                this.myContext.renderedLineMap.set(startLine, obj);\r\n                if (fold) {\r\n                    startLine = fold.end.line;\r\n                } else {\r\n                    startLine++;\r\n                }\r\n            }\r\n\r\n            function _getObj(item, line) {\r\n                let tabNum = _getTabNum(line);\r\n                let fold = '';\r\n                if (that.folder.getFoldByLine(line)) {\r\n                    //该行已经折叠\r\n                    fold = 'close';\r\n                } else if (that.folder.getRangeFold(line, true)) {\r\n                    //可折叠\r\n                    fold = 'open';\r\n                }\r\n                let html = item.html;\r\n                if (!html) {\r\n                    if (item.tokens && item.tokens.length) {\r\n                        item.tokens = that.tokenizer.splitLongToken(item.tokens);\r\n                        item.html = that.tokenizer.createHtml(item.tokens, item.text);\r\n                        html = item.html;\r\n                    } else {\r\n                        html = Util.htmlTrans(item.text);\r\n                    }\r\n                }\r\n                html = html.replace(/\\t/g, that.space);\r\n                return {\r\n                    html: html,\r\n                    num: line,\r\n                    tabNum: tabNum,\r\n                    selectStarts: [],\r\n                    selectEnds: [],\r\n                    selected: false,\r\n                    isFsearch: false,\r\n                    fold: fold,\r\n                    cursorList: [],\r\n                };\r\n            }\r\n\r\n            function _getTabNum(line) {\r\n                let text = that.myContext.htmls[line - 1].text;\r\n                let wReg = /[^\\s]/;\r\n                let tabNum = 0;\r\n                if (that.myContext.renderedLineMap.has(line)) {\r\n                    return that.myContext.renderedLineMap.get(line).tabNum;\r\n                }\r\n                if (wReg.exec(text)) {\r\n                    //该行有内容\r\n                    let spaceNum = /^\\s+/.exec(text);\r\n                    if (spaceNum) {\r\n                        tabNum = /\\t+/.exec(spaceNum[0]);\r\n                        tabNum = (tabNum && tabNum[0].length) || 0;\r\n                        tabNum = tabNum + Math.ceil((spaceNum[0].length - tabNum) / that.tabSize);\r\n                    }\r\n                } else {\r\n                    //空行\r\n                    let _line = line - 1;\r\n                    while (_line >= 1) {\r\n                        if (wReg.exec(that.myContext.htmls[_line - 1].text)) {\r\n                            tabNum = _getTabNum(_line);\r\n                            if (that.folder.getRangeFold(_line, true)) {\r\n                                tabNum++;\r\n                            }\r\n                            break;\r\n                        }\r\n                        _line--;\r\n                    }\r\n                }\r\n                return tabNum;\r\n            }\r\n        },\r\n        renderSelectedBg() {\r\n            let renderSelectedBgId = this.renderSelectedBgId + 1 || 1;\r\n            this.renderSelectedBgId = renderSelectedBgId;\r\n            this.activeLineBg = true;\r\n            this.$nextTick(() => {\r\n                if (this.renderSelectedBgId != renderSelectedBgId) {\r\n                    return;\r\n                }\r\n                if (!this.renderHtmls.length) {\r\n                    //删除内容后，窗口还没滚动到可视区域\r\n                    requestAnimationFrame(() => {\r\n                        this.renderSelectedBg();\r\n                    });\r\n                    return;\r\n                }\r\n                this.clearSelectionToken();\r\n                this.renderHtmls.forEach((item) => {\r\n                    item.selected = false;\r\n                    item.selectStarts = [];\r\n                    item.selectEnds = [];\r\n                });\r\n                this.fSelecter.ranges.forEach((range) => {\r\n                    this._renderSelectedBg(range, true);\r\n                });\r\n                this.selecter.ranges.forEach((range) => {\r\n                    let _range = this.fSelecter.getRangeByCursorPos(range.start);\r\n                    if (this.searchVisible) {\r\n                        // 优先渲染搜索框的选中范围\r\n                        if (!_range && range.active) {\r\n                            this._renderSelectedBg(range);\r\n                        }\r\n                    } else {\r\n                        this._renderSelectedBg(range);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        // 渲染选中背景\r\n        _renderSelectedBg(range, isFsearch) {\r\n            let firstLine = this.renderHtmls[0].num;\r\n            let lastLine = this.renderHtmls.peek().num;\r\n            let start = range.start;\r\n            let end = range.end;\r\n            let text = this.myContext.htmls[start.line - 1].text;\r\n            let endColumn = text.length;\r\n            start.left = this.getStrWidth(text, 0, start.column);\r\n            if (start.line == end.line) {\r\n                start.width = this.getStrWidth(text, start.column, end.column) || 10;\r\n            } else {\r\n                start.width = this.getStrWidth(text, start.column) || 10;\r\n                end.left = 0;\r\n                text = this.myContext.htmls[end.line - 1].text;\r\n                end.width = this.getStrWidth(text, 0, end.column) || 10;\r\n            }\r\n            firstLine = firstLine > start.line + 1 ? firstLine : start.line + 1;\r\n            lastLine = lastLine < end.line - 1 ? lastLine : end.line - 1;\r\n            for (let line = firstLine; line <= lastLine; line++) {\r\n                if (this.myContext.renderedLineMap.has(line)) {\r\n                    let lineObj = this.myContext.renderedLineMap.get(line);\r\n                    lineObj.selected = true;\r\n                    lineObj.isFsearch = isFsearch;\r\n                    lineObj.active = range.active;\r\n                }\r\n            }\r\n            if (this.myContext.renderedLineMap.has(start.line)) {\r\n                this.myContext.renderedLineMap.get(start.line).selectStarts.push({\r\n                    left: start.left,\r\n                    width: start.width,\r\n                    active: range.active,\r\n                    isFsearch: isFsearch,\r\n                });\r\n                if (end.line == start.line) {\r\n                    endColumn = end.column;\r\n                }\r\n                range.active && this._renderSelectionToken(start.line, start.column, endColumn);\r\n            }\r\n            if (end.line > start.line && this.myContext.renderedLineMap.has(end.line)) {\r\n                this.myContext.renderedLineMap.get(end.line).selectEnds.push({\r\n                    left: end.left,\r\n                    width: end.width,\r\n                    active: range.active,\r\n                    isFsearch: isFsearch,\r\n                });\r\n                range.active && this._renderSelectionToken(end.line, 0, end.column);\r\n            }\r\n            if (start.line === this.nowCursorPos.line || end.line === this.nowCursorPos.line) {\r\n                this.activeLineBg = false;\r\n            }\r\n        },\r\n        renderSelectionToken(line) {\r\n            // 只有设置了选中前景色才处理\r\n            if (!globalData.colors['editor.selectionForeground']) {\r\n                return;\r\n            }\r\n            let results = this.selecter.getRangeByLine(line);\r\n            results.forEach((range) => {\r\n                if (range.active) {\r\n                    let startColumn = range.start.column;\r\n                    let endColumn = range.end.column;\r\n                    if (range.start.line === line) {\r\n                        if (range.end.line > range.start.line) {\r\n                            endColumn = this.myContext.htmls[range.start.line - 1].text.length;\r\n                        }\r\n                    } else {\r\n                        startColumn = 0;\r\n                    }\r\n                    this._renderSelectionToken(line, startColumn, endColumn);\r\n                }\r\n            });\r\n        },\r\n        _renderSelectionToken(line, startColumn, endColumn) {\r\n            // 只有设置了选中前景色才处理\r\n            if (!globalData.colors['editor.selectionForeground']) {\r\n                return;\r\n            }\r\n            let lineObj = this.myContext.htmls[line - 1];\r\n            let tokens = lineObj.tokens;\r\n            let scopes = ['selected'];\r\n            let _tokens = [];\r\n            this.myContext.fgLines.push(line);\r\n            for (let i = 0; i < tokens.length; i++) {\r\n                let token = tokens[i];\r\n                if (token.startIndex <= startColumn && token.endIndex > startColumn) {\r\n                    if (token.startIndex < startColumn) {\r\n                        _tokens.push({\r\n                            startIndex: token.startIndex,\r\n                            endIndex: startColumn,\r\n                            scopes: token.scopes,\r\n                        });\r\n                    }\r\n                    if (token.endIndex > endColumn) {\r\n                        _tokens.push({\r\n                            startIndex: startColumn,\r\n                            endIndex: endColumn,\r\n                            scopes: scopes,\r\n                        });\r\n                        _tokens.push({\r\n                            startIndex: endColumn,\r\n                            endIndex: token.endIndex,\r\n                            scopes: token.scopes,\r\n                        });\r\n                        _tokens = _tokens.concat(tokens.slice(i + 1));\r\n                        break;\r\n                    } else {\r\n                        _tokens.push({\r\n                            startIndex: startColumn,\r\n                            endIndex: token.endIndex,\r\n                            scopes: scopes,\r\n                        });\r\n                    }\r\n                } else if (token.startIndex > startColumn && token.endIndex <= endColumn) {\r\n                    _tokens.push({\r\n                        startIndex: token.startIndex,\r\n                        endIndex: token.endIndex,\r\n                        scopes: scopes,\r\n                    });\r\n                } else if (token.startIndex < endColumn && token.endIndex > endColumn) {\r\n                    _tokens.push({\r\n                        startIndex: token.startIndex,\r\n                        endIndex: endColumn,\r\n                        scopes: scopes,\r\n                    });\r\n                    _tokens.push({\r\n                        startIndex: endColumn,\r\n                        endIndex: token.endIndex,\r\n                        scopes: token.scopes,\r\n                    });\r\n                    _tokens = _tokens.concat(tokens.slice(i + 1));\r\n                    break;\r\n                } else if (token.startIndex >= endColumn) {\r\n                    _tokens = _tokens.concat(tokens.slice(i));\r\n                    break;\r\n                } else {\r\n                    _tokens.push(token);\r\n                }\r\n            }\r\n            lineObj.html = this.tokenizer.createHtml(_tokens, lineObj.text);\r\n            this.myContext.renderedIdMap.get(lineObj.lineId).html = lineObj.html;\r\n            this.$nextTick(() => {\r\n                lineObj.fgTokens = _tokens;\r\n            });\r\n        },\r\n        renderBracketMatch() {\r\n            this.bracketMatch = this.folder.getBracketMatch(this.nowCursorPos);\r\n            if (this.bracketMatch) {\r\n                let lineObj = null;\r\n                let pos = null;\r\n\r\n                lineObj = this.myContext.htmls[this.bracketMatch.start.line - 1];\r\n                pos = this.bracketMatch.start;\r\n                this.bracketMatch.start.width = this.getStrWidth(lineObj.text, pos.startIndex, pos.endIndex);\r\n                this.bracketMatch.start.left = this.getStrWidth(lineObj.text, 0, pos.startIndex);\r\n\r\n                lineObj = this.myContext.htmls[this.bracketMatch.end.line - 1];\r\n                pos = this.bracketMatch.end;\r\n                this.bracketMatch.end.width = this.getStrWidth(lineObj.text, pos.startIndex, pos.endIndex);\r\n                this.bracketMatch.end.left = this.getStrWidth(lineObj.text, 0, pos.startIndex);\r\n            }\r\n        },\r\n        // 清除选中前景色\r\n        clearSelectionToken() {\r\n            this.myContext.fgLines.forEach((line) => {\r\n                this._clearSelectionToken(line);\r\n            });\r\n            this.myContext.fgLines.empty();\r\n        },\r\n        _clearSelectionToken(line) {\r\n            let lineObj = this.myContext.htmls[line - 1];\r\n            if (!lineObj || !lineObj.fgTokens) {\r\n                return;\r\n            }\r\n            lineObj.fgTokens = null;\r\n            if (this.myContext.renderedLineMap.has(line)) {\r\n                this.myContext.renderedIdMap.get(lineObj.lineId).html = this.tokenizer.createHtml(lineObj.tokens, lineObj.text);\r\n            }\r\n            lineObj.html = '';\r\n        },\r\n        // 渲染光标\r\n        renderCursor(forceCursorView) {\r\n            let that = this;\r\n            let renderCursorId = this.renderCursorId + 1 || 1;\r\n            this.renderCursorId = renderCursorId;\r\n            this.$nextTick(() => {\r\n                if (this.renderCursorId !== renderCursorId || !this.renderHtmls.length) {\r\n                    return;\r\n                }\r\n                this.renderHtmls.forEach((item) => {\r\n                    _setLine(item);\r\n                });\r\n                this.cursorVisible = true;\r\n            });\r\n\r\n            function _setLine(item) {\r\n                let cursorList = [];\r\n                that.cursor.getCursorsByLine(item.num).forEach((cursorPos) => {\r\n                    cursorList.push(_setCursorRealPos(cursorPos));\r\n                });\r\n                item.cursorList = cursorList;\r\n            }\r\n\r\n            function _setCursorRealPos(cursorPos) {\r\n                let left = 0;\r\n                if (cursorPos.del) {\r\n                    return;\r\n                }\r\n                left = that.getExactLeft(cursorPos);\r\n                // 强制滚动使光标处于可见区域\r\n                if (forceCursorView && cursorPos === that.nowCursorPos) {\r\n                    if (left > that.scrollerArea.width + that.scrollLeft - that.charObj.fullAngleCharWidth) {\r\n                        that.$refs.scroller.scrollLeft = left + that.charObj.fullAngleCharWidth - that.scrollerArea.width;\r\n                    } else if (left < that.scrollLeft) {\r\n                        that.$refs.scroller.scrollLeft = left - 1;\r\n                    }\r\n                }\r\n                if (cursorPos === that.nowCursorPos) {\r\n                    that.cursorLeft = left;\r\n                }\r\n                return left + 'px';\r\n            }\r\n        },\r\n        renderError(line) {\r\n            this.$nextTick(() => {\r\n                _renderError.call(this);\r\n            });\r\n\r\n            function _renderError() {\r\n                let $render = $(this.$refs.render);\r\n                let keyMap = {};\r\n                $render.find('span.my-token-error').remove();\r\n                this.errors.forEach((item) => {\r\n                    let key = item.line + ',' + item.originColumn;\r\n                    let lineObj = null;\r\n                    if ((line && item.line !== line) || keyMap[key]) {\r\n                        return;\r\n                    }\r\n                    keyMap[key] = true;\r\n                    lineObj = this.myContext.htmls[item.line - 1];\r\n                    if (!item.endLine) {\r\n                        item.endLine = item.line;\r\n                    }\r\n                    if (item.column >= lineObj.text.length) {\r\n                        item.column = lineObj.text.length - 1;\r\n                    }\r\n                    if (!item.endColumn) {\r\n                        let res = null;\r\n                        if ((res = this.wordPattern.exec(lineObj.text.slice(item.column)))) {\r\n                            item.endColumn = item.column + res[0].length;\r\n                        } else {\r\n                            item.endColumn = item.column + 1;\r\n                        }\r\n                    }\r\n                    if (item.endColumn > lineObj.text.length) {\r\n                        item.endColumn = lineObj.text.length;\r\n                    }\r\n                    if (item.line === item.endLine) {\r\n                        _renderColError.call(this, item.line, item.column, item.endColumn, key);\r\n                    } else {\r\n                        _renderColError.call(this, item.line, item.column, lineObj.text.length, key);\r\n                        _renderColError.call(this, item.endLine, 0, item.endColumn, key);\r\n                        for (let line = item.line + 1; line < item.endLine; line++) {\r\n                            _renderLineError.call(this, line, key);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            function _renderColError(line, column, endColumn, key) {\r\n                if (line < this.startLine || line > this.startLine + this.maxVisibleLines) {\r\n                    return;\r\n                }\r\n                let $render = $(this.$refs.render);\r\n                let lineObj = this.myContext.htmls[line - 1];\r\n                let token = this.getToken(line, column);\r\n                let left = 0;\r\n                if (token) {\r\n                    let $token = $render.find(`div.my-code[data-line=\"${line}\"]`).find(`span[data-column=\"${token.startIndex}\"]`);\r\n                    left = $token[0].offsetLeft + this.getStrWidth(lineObj.text, token.startIndex, column);\r\n                }\r\n                let width = this.getStrWidth(lineObj.text, column, endColumn) || this.charObj.charWidth;\r\n                let html = `<span class=\"my-token-error\" style=\"width:${width}px;left:${left}px\" data-key=\"${key}\"></span>`;\r\n                $render.find(`div.my-code[data-line=\"${line}\"]`).append(html);\r\n            }\r\n\r\n            function _renderLineError(line, key) {\r\n                if (line < this.startLine || line > this.startLine + this.maxVisibleLines) {\r\n                    return;\r\n                }\r\n                let $render = $(this.$refs.render);\r\n                let html = `<span class=\"my-token-error\" style=\"width:100%;left:0px\" data-key=\"${key}\"></span>`;\r\n                $render.find(`div.my-code[data-line=\"${line}\"]`).append(html);\r\n            }\r\n        },\r\n        // 折叠行\r\n        foldLine(line) {\r\n            let resultFold = this.folder.foldLine(line);\r\n            this.focus();\r\n            if (resultFold) {\r\n                this.cursor.multiCursorPos.forEach((cursorPos) => {\r\n                    if (cursorPos.line > line && cursorPos.line < resultFold.end.line) {\r\n                        let lineObj = this.myContext.htmls[line - 1];\r\n                        cursorPos.line = line;\r\n                        cursorPos.column = lineObj.text.length;\r\n                    }\r\n                });\r\n                this.setContentHeight();\r\n                this.render();\r\n            }\r\n        },\r\n        // 展开折叠行\r\n        unFold(line) {\r\n            this.focus();\r\n            if (this.folder.unFold(line)) {\r\n                this.setContentHeight();\r\n                this.render();\r\n            }\r\n        },\r\n        // ctrl+f打开搜索\r\n        openSearch(replaceMode) {\r\n            let searchDialog = this.$refs.searchDialog;\r\n            if (this.searchVisible && (this.fSelecter.activedRanges.size || !this.cursorFocus)) {\r\n                //无效操作\r\n                return;\r\n            }\r\n            if (this.cursorFocus) {\r\n                let searchConfig = this.fSearcher.getSearchConfig();\r\n                if (searchConfig) {\r\n                    //有效搜索\r\n                    searchDialog.initData({\r\n                        ignoreCase: searchConfig.ignoreCase,\r\n                        wholeWord: searchConfig.wholeWord,\r\n                        text: searchConfig.text,\r\n                    });\r\n                } else if (this.searchVisible) {\r\n                    //无效搜索\r\n                    return;\r\n                }\r\n            }\r\n            this.searchVisible = true;\r\n            this.fSearcher.clearSearch();\r\n            this.searchText({ config: searchDialog.getData() });\r\n            searchDialog.initData({ replaceVisible: !!replaceMode });\r\n            searchDialog.focus();\r\n        },\r\n        // 搜索完整单词\r\n        searchWord(direct) {\r\n            let resultObj = null;\r\n            this.searcher.search({ direct: direct });\r\n            if (this.searchVisible) {\r\n                if (this.fSelecter.activedRanges.size === 0) {\r\n                    let searchConfig = this.fSearcher.getSearchConfig();\r\n                    if (searchConfig) {\r\n                        this.fSearcher.clearSearch();\r\n                        resultObj = this.fSearcher.search({ direct: direct, increase: true });\r\n                    }\r\n                } else {\r\n                    resultObj = this.fSearcher.search({ direct: direct, increase: true });\r\n                }\r\n                if (resultObj) {\r\n                    this.searchNow = resultObj.now;\r\n                    this.searchCount = resultObj.count;\r\n                }\r\n            }\r\n        },\r\n        searchText(option) {\r\n            let resultObj = this.fSearcher.search(option);\r\n            if (resultObj) {\r\n                this.searchNow = resultObj.now;\r\n                this.searchCount = resultObj.count;\r\n            } else {\r\n                this.searchCount = 0;\r\n            }\r\n        },\r\n        replace(data) {\r\n            if (this.fSelecter.activedRanges.size) {\r\n                let range = this.fSearcher.getNowRange();\r\n                this.myContext.replace(data.text, [range]).then(() => {\r\n                    this.searchText();\r\n                });\r\n            } else {\r\n                this.searchText();\r\n            }\r\n        },\r\n        replaceAll(data) {\r\n            if (this.fSelecter.ranges.size) {\r\n                this.myContext.replace(data.text, this.fSelecter.ranges.toArray()).then(() => {\r\n                    this.fSearcher.clearSearch();\r\n                    this.searchCount = 0;\r\n                });\r\n            }\r\n        },\r\n        // 上一个提示\r\n        prevAutoTip() {\r\n            this.$refs.autoTip.prev();\r\n        },\r\n        // 下一个提示\r\n        nextAutoTip() {\r\n            this.$refs.autoTip.next();\r\n        },\r\n        selectAutoTip() {\r\n            let index = this.$refs.autoTip.getActiveIndex();\r\n            this.onClickAuto(this.autoTipList[index]);\r\n        },\r\n        setData(prop, value) {\r\n            if (typeof this[prop] === 'function') {\r\n                return;\r\n            }\r\n            this[prop] = value;\r\n        },\r\n        setNowCursorPos(nowCursorPos) {\r\n            this.nowCursorPos = nowCursorPos || { line: 1, column: 0 };\r\n            if (nowCursorPos) {\r\n                let setNowCursorPosId = this.setNowCursorPosId + 1 || 1;\r\n                this.setNowCursorPosId = setNowCursorPosId;\r\n                // 强制滚动使光标处于可见区域\r\n                this.$nextTick(() => {\r\n                    if (this.setNowCursorPosId != setNowCursorPosId) {\r\n                        return;\r\n                    }\r\n                    let height = this.folder.getRelativeLine(nowCursorPos.line) * this.charObj.charHight;\r\n                    if (height + this.charObj.charHight > this.scrollTop + this.scrollerArea.height) {\r\n                        requestAnimationFrame(() => {\r\n                            this.setStartLine(height + this.charObj.charHight - this.scrollerArea.height);\r\n                            this.$refs.scroller.scrollTop = height + this.charObj.charHight - this.scrollerArea.height;\r\n                        });\r\n                    } else if (nowCursorPos.line <= this.startLine) {\r\n                        requestAnimationFrame(() => {\r\n                            if (nowCursorPos.line <= this.startLine) {\r\n                                //此时this.startLine可能已经通过onScrll而改变\r\n                                this.startLine = nowCursorPos.line;\r\n                                this.$refs.scroller.scrollTop = (this.folder.getRelativeLine(nowCursorPos.line) - 1) * this.charObj.charHight;\r\n                            }\r\n                        });\r\n                    }\r\n                    this.renderCursor(true);\r\n                });\r\n            }\r\n        },\r\n        // 设置滚动区域真实高度\r\n        setContentHeight() {\r\n            let maxLine = this.myContext.htmls.length;\r\n            let contentHeight = 0;\r\n            maxLine = this.folder.getRelativeLine(maxLine);\r\n            contentHeight = maxLine * this.charObj.charHight;\r\n            if (this.scrollerArea) {\r\n                contentHeight += this.scrollerArea.height - this.charObj.charHight;\r\n            }\r\n            this.contentHeight = contentHeight + 'px';\r\n        },\r\n        setStartLine(scrollTop) {\r\n            let startLine = 1;\r\n            startLine = Math.floor(scrollTop / this.charObj.charHight);\r\n            startLine++;\r\n            this.startLine = this.folder.getRealLine(startLine);\r\n            this.top = -scrollTop % this.charObj.charHight;\r\n        },\r\n        setErrors(errors) {\r\n            this.errorMap = {};\r\n            this.errors = errors;\r\n            _formatError.call(this, this.errorMap, errors);\r\n            this.renderError();\r\n\r\n            function _formatError(errorMap, errors) {\r\n                let index = 0;\r\n                while (index < errors.length) {\r\n                    let line = errors[index].line;\r\n                    let arr = [];\r\n                    while (index < errors.length && errors[index].line === line) {\r\n                        let key = line + ',' + errors[index].column;\r\n                        errors[index].originColumn = errors[index].column;\r\n                        arr.push(errors[index].reason);\r\n                        if (errorMap[key]) {\r\n                            errorMap[key] += '<br>' + errors[index].reason;\r\n                        } else {\r\n                            errorMap[key] = errors[index].reason;\r\n                        }\r\n                        index++;\r\n                    }\r\n                    line = line || this.htmls.length;\r\n                    errorMap[line] = arr.join('<br>');\r\n                }\r\n            }\r\n        },\r\n        setAutoTip(results) {\r\n            clearTimeout(this.setAutoTip.hideTimer);\r\n            if (results && results.length) {\r\n                results.forEach((item) => {\r\n                    item.active = false;\r\n                });\r\n                this.autoTipList = results;\r\n                this.autoTipList[0].active = true;\r\n                this.$nextTick(() => {\r\n                    let width = this.$refs.autoTip.$el.clientWidth;\r\n                    let height = this.$refs.autoTip.$el.clientHeight;\r\n                    this.autoTipStyle.top = this.folder.getRelativeLine(this.nowCursorPos.line) * this.charObj.charHight;\r\n                    this.autoTipStyle.left = this.getExactLeft(this.nowCursorPos);\r\n                    if (this.autoTipStyle.top + height > Util.getNum(this._top) + this.$refs.scroller.clientHeight) {\r\n                        this.autoTipStyle.top -= height + this.charObj.charHight;\r\n                    }\r\n                    if (this.autoTipStyle.left + width > this.scrollLeft + this.scrollerArea.width) {\r\n                        this.autoTipStyle.left -= width;\r\n                    }\r\n                    this.autoTipStyle.top += 'px';\r\n                    this.autoTipStyle.left += 'px';\r\n                });\r\n            } else {\r\n                //内容改变时会触发setAutoTip(null)\r\n                this.setAutoTip.hideTimer = setTimeout(() => {\r\n                    this.autoTipList = null;\r\n                }, 60);\r\n            }\r\n        },\r\n        // 获取文本在浏览器中的宽度\r\n        getStrWidth(str, start, end) {\r\n            return Util.getStrWidth(str, this.charObj.charWidth, this.charObj.fullAngleCharWidth, this.tabSize, start, end);\r\n        },\r\n        // 获取行对应的文本在浏览器中的宽度\r\n        getStrWidthByLine(line, start, end) {\r\n            return this.getStrWidth(this.myContext.htmls[line - 1].text, start, end);\r\n        },\r\n        // 根据文本宽度计算当前列号\r\n        getColumnByWidth(text, offsetX) {\r\n            let left = 0,\r\n                right = text.length;\r\n            let mid, width, w1, w2;\r\n            while (left < right) {\r\n                mid = Math.floor((left + right) / 2);\r\n                width = this.getStrWidth(text, 0, mid);\r\n                w1 = text[mid - 1] && this.getStrWidth(text[mid - 1]) / 2;\r\n                w2 = (text[mid] && this.getStrWidth(text[mid]) / 2) || w1;\r\n                if ((width >= offsetX && width - offsetX < w1) || (offsetX >= width && offsetX - width < w2)) {\r\n                    left = mid;\r\n                    break;\r\n                } else if (width > offsetX) {\r\n                    right = mid;\r\n                } else {\r\n                    left = mid + 1;\r\n                }\r\n            }\r\n            return left;\r\n        },\r\n        // 根据鼠标事件对象获取行列坐标\r\n        getPosByEvent(e) {\r\n            let $target = $(e.target);\r\n            let line = ($target.attr('data-line') || $target.parent().attr('data-line')) - 0;\r\n            let column = $target.attr('data-column');\r\n            if (!line) {\r\n                if (e.target === this.$refs.content) {\r\n                    line = this.myContext.htmls.length;\r\n                } else {\r\n                    //移动到了区域外\r\n                    return null;\r\n                }\r\n            }\r\n            let lineObj = this.myContext.htmls[line - 1];\r\n            let tokens = lineObj.fgTokens || lineObj.tokens;\r\n            if (!column) {\r\n                column = lineObj.text.length;\r\n            } else {\r\n                column = column - 0;\r\n                for (let i = 0; i < tokens.length; i++) {\r\n                    let token = tokens[i];\r\n                    if (tokens[i].startIndex == column) {\r\n                        column += this.getColumnByWidth(lineObj.text.slice(token.startIndex, token.endIndex), e.offsetX);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return {\r\n                line: line,\r\n                column: column,\r\n            };\r\n        },\r\n        // 获取光标真实位置\r\n        getExactLeft(cursorPos) {\r\n            let lineObj = this.myContext.htmls[cursorPos.line - 1];\r\n            if (!lineObj.tokens || !lineObj.tokens.length) {\r\n                return 0;\r\n            }\r\n            let tokens = lineObj.fgTokens || lineObj.tokens;\r\n            let token = tokens[0];\r\n            for (let i = 1; i < tokens.length; i++) {\r\n                if (tokens[i].startIndex < cursorPos.column) {\r\n                    token = tokens[i];\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n            let $token = $('#line_' + cursorPos.line)\r\n                .children('.my-code')\r\n                .children('span[data-column=\"' + token.startIndex + '\"]');\r\n            if (!$token.length) {\r\n                return 0;\r\n            }\r\n            let text = lineObj.text.slice(token.startIndex, cursorPos.column);\r\n            return $token[0].offsetLeft + this.getStrWidth(text);\r\n        },\r\n        getToken(line, column) {\r\n            let lineObj = this.myContext.htmls[line - 1];\r\n            if (lineObj && lineObj.tokens) {\r\n                if (column > lineObj.tokens.peek().startIndex) {\r\n                    return lineObj.tokens.peek();\r\n                }\r\n                for (let i = 0; i < lineObj.tokens.length; i++) {\r\n                    if (lineObj.tokens[i].startIndex <= column && lineObj.tokens[i].endIndex > column) {\r\n                        return lineObj.tokens[i];\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        },\r\n        // 右键菜单事件\r\n        onContextmenu(e) {\r\n            let menuWidth = 0;\r\n            let menuHeight = 0;\r\n            let $editor = $(this.$refs.editor);\r\n            let offset = $editor.offset();\r\n            this.menuVisible = true;\r\n            this.$nextTick(() => {\r\n                menuWidth = this.$refs.menu.$el.clientWidth;\r\n                menuHeight = this.$refs.menu.$el.clientHeight;\r\n                if (menuHeight + e.clientY > offset.top + this.scrollerArea.height) {\r\n                    this.menuStyle.top = e.clientY - offset.top - menuHeight + 'px';\r\n                } else {\r\n                    this.menuStyle.top = e.clientY - offset.top + 'px';\r\n                }\r\n                if (menuWidth + e.clientX > offset.left + $editor[0].clientWidth) {\r\n                    this.menuStyle.left = e.clientX - offset.left - menuWidth + 'px';\r\n                } else {\r\n                    this.menuStyle.left = e.clientX - offset.left + 'px';\r\n                }\r\n                this.focus();\r\n            });\r\n        },\r\n        // 选中菜单\r\n        onClickMenu(menu) {\r\n            switch (menu.op) {\r\n                case 'cut':\r\n                case 'copy':\r\n                    Util.writeClipboard(this.myContext.getCopyText(menu.op === 'cut'));\r\n                    break;\r\n                case 'paste':\r\n                    this.$refs.textarea.focus();\r\n                    Util.readClipboard().then((text) => {\r\n                        this.myContext.insertContent(text);\r\n                    });\r\n                    break;\r\n            }\r\n            this.menuVisible = false;\r\n            this.focus();\r\n        },\r\n        // 选中自动提示\r\n        onClickAuto(item) {\r\n            this.myContext.replaceTip(item);\r\n            this.autoTipList = null;\r\n            this.focus();\r\n        },\r\n        // 折叠/展开\r\n        onToggleFold(line) {\r\n            if (this.folder.getFoldByLine(line)) {\r\n                this.unFold(line);\r\n            } else {\r\n                this.foldLine(line);\r\n            }\r\n        },\r\n        // 内容区域鼠标按下事件\r\n        onContentMdown(e) {\r\n            if (e.which == 3) {\r\n                //右键\r\n                return;\r\n            }\r\n            let pos = this.getPosByEvent(e);\r\n            let cursorPos = null;\r\n            this.mouseStartObj = {\r\n                time: Date.now(),\r\n                start: pos,\r\n            };\r\n            if ((e.ctrlKey && this.cursor.multiKeyCode === 'ctrl') || (e.altKey && this.cursor.multiKeyCode === 'alt')) {\r\n                // 多光标编辑\r\n                let range = this.selecter.getRangeWithCursorPos(pos);\r\n                //删除重叠选中区域\r\n                range && this.selecter.removeRange(range);\r\n                cursorPos = this.cursor.addCursorPos(pos);\r\n            } else {\r\n                cursorPos = this.cursor.setCursorPos(pos);\r\n                // 非多点编辑情况下，鼠标左键删除选中区域\r\n                if (e.which !== 3) {\r\n                    this.searcher.clearSearch();\r\n                }\r\n            }\r\n            if (e.which != 3) {\r\n                this.fSearcher.clearActive(); //光标更改后，搜索框取消当前活动区域\r\n                if (this.mouseUpTime && Date.now() - this.mouseUpTime < 200) {\r\n                    //双击选中单词\r\n                    this.mouseStartObj.doubleClick = true;\r\n                    this.searchWord();\r\n                }\r\n            }\r\n            this.mouseStartObj.cursorPos = cursorPos;\r\n            // 删除非活动区域的选中区域\r\n            this.searcher.clearSearch(true);\r\n            this.focus();\r\n        },\r\n        onErrorMousemove(e, line) {\r\n            let $errors = $(`div.my-code[data-line=${line}]`).children('span.my-token-error');\r\n            let left = e.clientX - $(this.$refs.render).offset().left;\r\n            for (let i = 0; i < $errors.length; i++) {\r\n                let $error = $errors.eq(i);\r\n                let width = $error.width();\r\n                let _left = $error[0].offsetLeft;\r\n                if (left >= _left && left <= _left + width) {\r\n                    _showTip.call(this, e, $error.attr('data-key'));\r\n                    break;\r\n                }\r\n            }\r\n\r\n            function _showTip(e, key) {\r\n                let $editor = $(this.$refs.editor);\r\n                let $tip = $(this.$refs.tip.$el);\r\n                let offset = $editor.offset();\r\n                let top = e.clientY - offset.top;\r\n                let left = e.clientX - offset.left;\r\n                this.tipContent = this.errorMap[key];\r\n                this.$nextTick(() => {\r\n                    if (top + $tip[0].clientHeight > this.scrollerArea.height) {\r\n                        top = this.scrollerArea.height - $tip[0].clientHeight;\r\n                    }\r\n                    this.tipStyle = {\r\n                        left: left + 10 + 'px',\r\n                        top: top + 10 + 'px',\r\n                    };\r\n                });\r\n            }\r\n        },\r\n        onContentMmove(e) {\r\n            if (this.mouseStartObj && Date.now() - this.mouseStartObj.time > 100) {\r\n                let end = this.getPosByEvent(e);\r\n                if (end && Util.comparePos(end, this.mouseStartObj.cursorPos)) {\r\n                    let range = this.selecter.getRangeWithCursorPos(end);\r\n                    //删除重叠选中区域\r\n                    range && this.selecter.removeRange(range);\r\n                    this.cursor.removeCursor(this.mouseStartObj.cursorPos);\r\n                    this.mouseStartObj.cursorPos = this.cursor.addCursorPos({\r\n                        line: end.line,\r\n                        column: end.column,\r\n                    });\r\n                    if (this.mouseStartObj.preRange) {\r\n                        this.selecter.updateRange(this.mouseStartObj.preRange, {\r\n                            start: this.mouseStartObj.start,\r\n                            end: end,\r\n                        });\r\n                    } else {\r\n                        this.mouseStartObj.preRange = this.selecter.addRange({\r\n                            start: this.mouseStartObj.start,\r\n                            end: end,\r\n                        });\r\n                    }\r\n                    // 删除区域范围内的光标\r\n                    this.cursor.removeCursorInRange(this.mouseStartObj.preRange);\r\n                }\r\n            }\r\n            _checkErrorOver.call(this, e);\r\n\r\n            function _checkErrorOver(e) {\r\n                let $target = $(e.target);\r\n                let line = $target.parent().attr('data-line');\r\n                this.tipContent = '';\r\n                line && this.onErrorMousemove(e, line);\r\n            }\r\n        },\r\n        onContentMLeave() {\r\n            this.tipContent = '';\r\n        },\r\n        // 鼠标移动事件\r\n        onDocumentMmove(e) {\r\n            let that = this;\r\n            let offset = $(this.$refs.scroller).offset();\r\n            if (this.mouseStartObj && Date.now() - this.mouseStartObj.time > 100) {\r\n                let line = Math.ceil((this.scrollTop + e.clientY - offset.top) / this.charObj.charHight);\r\n                line = line < 1 ? 1 : line;\r\n                line = line > this.maxLine ? this.maxLine : line;\r\n                cancelAnimationFrame(this.selectMoveTimer);\r\n                if (e.clientY > offset.top + this.scrollerArea.height) {\r\n                    //鼠标超出底部区域\r\n                    _move('down', e.clientY - offset.top - this.scrollerArea.height);\r\n                } else if (e.clientY < offset.top) {\r\n                    //鼠标超出顶部区域\r\n                    _move('up', offset.top - e.clientY);\r\n                } else if (e.clientX < offset.left) {\r\n                    //鼠标超出左边区域\r\n                    _move('left', offset.left - e.clientX, line);\r\n                } else if (e.clientX > offset.left + this.scrollerArea.width) {\r\n                    //鼠标超出右边区域\r\n                    _move('right', e.clientX - offset.left - this.scrollerArea.width, line);\r\n                }\r\n            }\r\n            function _move(autoDirect, speed, line) {\r\n                let originLine = line || that.folder.getRelativeLine(that.nowCursorPos.line);\r\n                let originColumn = that.nowCursorPos.column;\r\n                let count = 0; // 累计滚动距离\r\n                _run(autoDirect, speed);\r\n\r\n                function _run(autoDirect, speed) {\r\n                    let line = originLine;\r\n                    let column = originColumn;\r\n                    switch (autoDirect) {\r\n                        case 'up':\r\n                            count += speed;\r\n                            line = Math.floor(count / that.charObj.charHight);\r\n                            line = originLine - line;\r\n                            column = 0;\r\n                            break;\r\n                        case 'down':\r\n                            count += speed;\r\n                            line = Math.floor(count / that.charObj.charHight);\r\n                            line = originLine + line;\r\n                            break;\r\n                        case 'left':\r\n                            count += speed;\r\n                            column = Math.floor(count / that.charObj.charWidth);\r\n                            column = originColumn - column;\r\n                            break;\r\n                        case 'right':\r\n                            count += speed;\r\n                            column = Math.floor(count / that.charObj.charWidth);\r\n                            column = originColumn + column;\r\n                            break;\r\n                    }\r\n                    line = that.folder.getRealLine(line);\r\n                    line = line < 1 ? 1 : line > that.maxLine ? that.maxLine : line;\r\n                    if (autoDirect === 'down') {\r\n                        column = that.myContext.htmls[line - 1].text.length;\r\n                    } else {\r\n                        column = column < 0 ? 0 : column > that.myContext.htmls[line - 1].text.length ? that.myContext.htmls[line - 1].text.length : column;\r\n                    }\r\n                    that.mouseStartObj.cursorPos = that.cursor.setCursorPos({\r\n                        line: line,\r\n                        column: column,\r\n                    });\r\n                    that.mouseStartObj.preRange = that.selecter.setRange(that.mouseStartObj.start, {\r\n                        line: line,\r\n                        column: column,\r\n                    });\r\n                    that.selectMoveTimer = requestAnimationFrame(() => {\r\n                        _run(autoDirect, speed);\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        // 鼠标抬起事件\r\n        onDocumentMouseUp(e) {\r\n            // 停止滚动选中\r\n            cancelAnimationFrame(this.selectMoveTimer);\r\n            this.mouseStartObj = null;\r\n            this.mouseUpTime = Date.now();\r\n            this.$refs.searchDialog && this.$refs.searchDialog.directBlur();\r\n        },\r\n        // 左右滚动事件\r\n        onScroll(e) {\r\n            this.setStartLine(e.target.scrollTop);\r\n            this.scrollTop = e.target.scrollTop;\r\n            this.scrollLeft = e.target.scrollLeft;\r\n            this.$refs.scroller.scrollLeft = this.scrollLeft;\r\n        },\r\n        // 滚动滚轮\r\n        onWheel(e) {\r\n            this.$refs.scroller.scrollTop = this.scrollTop + e.deltaY;\r\n            this.$refs.scroller.scrollLeft = this.scrollLeft + e.deltaX;\r\n        },\r\n        // 中文输入开始\r\n        onCompositionstart() {\r\n            clearTimeout(this.compositionendTimer);\r\n            this.compositionstart = true;\r\n        },\r\n        // 中文输入结束\r\n        onCompositionend() {\r\n            if (this.compositionstart) {\r\n                let text = this.$refs.textarea.value || '';\r\n                if (text) {\r\n                    this.myContext.insertContent(text);\r\n                    this.autocomplete.search();\r\n                    this.$refs.textarea.value = '';\r\n                }\r\n            }\r\n            //避免有些浏览器compositionend在input事件之前触发的bug\r\n            this.compositionendTimer = setTimeout(() => {\r\n                this.compositionstart = false;\r\n            }, 100);\r\n        },\r\n        // 输入事件\r\n        onInput() {\r\n            if (!this.compositionstart) {\r\n                let text = this.$refs.textarea.value || '';\r\n                if (text) {\r\n                    this.myContext.insertContent(text);\r\n                    this.autocomplete.search();\r\n                    this.$refs.textarea.value = '';\r\n                }\r\n            }\r\n        },\r\n        // 复制事件\r\n        onCopy(e) {\r\n            let mime = window.clipboardData ? 'Text' : 'text/plain';\r\n            let clipboardData = e.clipboardData || window.clipboardData;\r\n            clipboardData.setData(mime, this.myContext.getCopyText());\r\n        },\r\n        onCut(e) {\r\n            let mime = window.clipboardData ? 'Text' : 'text/plain';\r\n            let clipboardData = e.clipboardData || window.clipboardData;\r\n            clipboardData.setData(mime, this.myContext.getCopyText(true));\r\n        },\r\n        // 粘贴事件\r\n        onPaste(e) {\r\n            let mime = window.clipboardData ? 'Text' : 'text/plain';\r\n            let clipboardData = e.clipboardData || window.clipboardData;\r\n            let copyText = '';\r\n            copyText = clipboardData.getData(mime);\r\n            this.myContext.insertContent(copyText);\r\n        },\r\n        // 获得焦点\r\n        onFocus() {\r\n            this.showCursor();\r\n        },\r\n        // 失去焦点\r\n        onBlur() {\r\n            this.hideCursor();\r\n        },\r\n        // 键盘按下事件\r\n        onKeyDown(e) {\r\n            this.shortcut.onKeyDown(e);\r\n        },\r\n        // 搜索框首次搜索\r\n        onSearch(config) {\r\n            this.fSearcher.clearSearch();\r\n            this.searchText({ config: config });\r\n        },\r\n        onSearchNext() {\r\n            this.searchText({ direct: 'next' });\r\n        },\r\n        onSearchPrev() {\r\n            this.searchText({ direct: 'up' });\r\n        },\r\n        onCloseSearch() {\r\n            this.focus();\r\n            if (this.fSelecter.activedRanges.size) {\r\n                this.searcher.clone(this.fSearcher.getCacheData());\r\n            }\r\n            this.fSearcher.clearSearch();\r\n            this.searchVisible = false;\r\n        },\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=784caa1a&\"\nimport script from \"./Editor.vue?vue&type=script&lang=js&\"\nexport * from \"./Editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-title-bar my-width-100\",style:({ height: _vm.height + 'px' }),on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('div',{staticClass:\"my-height-100 my-center-between\"},[_c('div',{staticClass:\"menu-bar\"},[_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('fileMenuVisible')}}},[_c('span',[_vm._v(\"File\")]),(_vm.fileMenuVisible)?_c('Menu',{attrs:{\"hoverCheck\":true,\"menuList\":_vm.fileMenuList,\"styles\":{ left: 0, top: _vm._top }},on:{\"change\":_vm.onFileMenuChange}}):_vm._e()],1),_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('editMenuVisible')}}},[_c('span',[_vm._v(\"Edit\")]),(_vm.editMenuVisible)?_c('Menu',{attrs:{\"hoverCheck\":true,\"menuList\":_vm.editMenuList,\"styles\":{ left: 0, top: _vm._top }},on:{\"change\":_vm.onEditMenuChange}}):_vm._e()],1),_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('selectionMenuVisible')}}},[_c('span',[_vm._v(\"Selection\")]),(_vm.selectionMenuVisible)?_c('Menu',{attrs:{\"hoverCheck\":true,\"menuList\":_vm.selectionMenuList,\"styles\":{ left: 0, top: _vm._top }},on:{\"change\":_vm.onSelectionMenuChange}}):_vm._e()],1),_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showMemu('preferenceMenuVisible')}}},[_c('span',[_vm._v(\"Preference\")]),(_vm.preferenceMenuVisible)?_c('Menu',{attrs:{\"hoverCheck\":true,\"menuList\":_vm.preferenceMenuList,\"styles\":{ left: 0, top: _vm._top }},on:{\"change\":_vm.onPreferenceMenuChange}}):_vm._e()],1)]),(_vm.mode === 'app')?_c('div',{staticClass:\"bar-right\"},[_c('div',{staticClass:\"bar-item my-hover\",staticStyle:{\"width\":\"35px\",\"height\":\"35px\"},on:{\"click\":_vm.onMinimize}},[_c('span',{staticClass:\"iconfont icon-zuixiaohua\"})]),(_vm.maximize)?_c('div',{staticClass:\"bar-item my-hover\",staticStyle:{\"width\":\"35px\",\"height\":\"35px\"},on:{\"click\":_vm.onUnmaximize}},[_c('span',{staticClass:\"iconfont icon-huanyuan\"})]):_c('div',{staticClass:\"bar-item my-hover\",staticStyle:{\"width\":\"35px\",\"height\":\"35px\"},on:{\"click\":_vm.onMaximize}},[_c('span',{staticClass:\"iconfont icon-zuidahua\"})]),_c('div',{staticClass:\"bar-item my-hover-danger\",staticStyle:{\"width\":\"35px\",\"height\":\"35px\"},on:{\"click\":_vm.onClose}},[_c('span',{staticClass:\"iconfont icon-close\",staticStyle:{\"font-size\":\"18px\"}})])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * @Author: lisong\r\n * @Date: 2022-02-18 16:13:15\r\n * @Description: \r\n */\r\nimport Util from '@/common/util';\r\n\r\nexport default class {\r\n    constructor(titleBar) {\r\n        this.initProperties(titleBar);\r\n    }\r\n    initProperties(titleBar) {\r\n        Util.defineProperties(this, titleBar, [\r\n            'openFile',\r\n            'openFolder'\r\n        ]);\r\n    }\r\n    onKeyDown(e) {\r\n        if (e.ctrlKey) {\r\n            if (this.pressK) {\r\n                this.pressK = false;\r\n                switch (e.keyCode) {\r\n                    case 79: //Ctrl+O\r\n                        e.preventDefault();\r\n                        this.openFolder();\r\n                        break;\r\n                }\r\n            } else {\r\n                switch (e.keyCode) {\r\n                    case 75: //Ctrl+K\r\n                        e.preventDefault();\r\n                        this.pressK = true;\r\n                        break;\r\n                    case 78: //Ctrl+N\r\n                        e.preventDefault();\r\n                        this.openFile();\r\n                        break;\r\n                    case 79: //Ctrl+O\r\n                        e.preventDefault();\r\n                        this.openFile(null, true);\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-09 21:38:38\r\n * @Description: \r\n-->\r\n<template>\r\n    <div :style=\"{ height: height + 'px' }\" @contextmenu.stop.prevent class=\"my-title-bar my-width-100\">\r\n        <div class=\"my-height-100 my-center-between\">\r\n            <div class=\"menu-bar\">\r\n                <div @mousedown.stop=\"showMemu('fileMenuVisible')\" class=\"bar-item my-hover\">\r\n                    <span>File</span>\r\n                    <Menu\r\n                        :hoverCheck=\"true\"\r\n                        :menuList=\"fileMenuList\"\r\n                        :styles=\"{ left: 0, top: _top }\"\r\n                        @change=\"onFileMenuChange\"\r\n                        v-if=\"fileMenuVisible\"\r\n                    ></Menu>\r\n                </div>\r\n                <div @mousedown.stop=\"showMemu('editMenuVisible')\" class=\"bar-item my-hover\">\r\n                    <span>Edit</span>\r\n                    <Menu\r\n                        :hoverCheck=\"true\"\r\n                        :menuList=\"editMenuList\"\r\n                        :styles=\"{ left: 0, top: _top }\"\r\n                        @change=\"onEditMenuChange\"\r\n                        v-if=\"editMenuVisible\"\r\n                    ></Menu>\r\n                </div>\r\n                <div @mousedown.stop=\"showMemu('selectionMenuVisible')\" class=\"bar-item my-hover\">\r\n                    <span>Selection</span>\r\n                    <Menu\r\n                        :hoverCheck=\"true\"\r\n                        :menuList=\"selectionMenuList\"\r\n                        :styles=\"{ left: 0, top: _top }\"\r\n                        @change=\"onSelectionMenuChange\"\r\n                        v-if=\"selectionMenuVisible\"\r\n                    ></Menu>\r\n                </div>\r\n                <div @mousedown.stop=\"showMemu('preferenceMenuVisible')\" class=\"bar-item my-hover\">\r\n                    <span>Preference</span>\r\n                    <Menu\r\n                        :hoverCheck=\"true\"\r\n                        :menuList=\"preferenceMenuList\"\r\n                        :styles=\"{ left: 0, top: _top }\"\r\n                        @change=\"onPreferenceMenuChange\"\r\n                        v-if=\"preferenceMenuVisible\"\r\n                    ></Menu>\r\n                </div>\r\n            </div>\r\n            <div class=\"bar-right\" v-if=\"mode === 'app'\">\r\n                <!-- 最小化 -->\r\n                <div @click=\"onMinimize\" class=\"bar-item my-hover\" style=\"width: 35px; height: 35px\">\r\n                    <span class=\"iconfont icon-zuixiaohua\"></span>\r\n                </div>\r\n                <!-- 还原最大化 -->\r\n                <div @click=\"onUnmaximize\" class=\"bar-item my-hover\" style=\"width: 35px; height: 35px\" v-if=\"maximize\">\r\n                    <span class=\"iconfont icon-huanyuan\"></span>\r\n                </div>\r\n                <!-- 最大化 -->\r\n                <div @click=\"onMaximize\" class=\"bar-item my-hover\" style=\"width: 35px; height: 35px\" v-else>\r\n                    <span class=\"iconfont icon-zuidahua\"></span>\r\n                </div>\r\n                <!-- 关闭 -->\r\n                <div @click=\"onClose\" class=\"bar-item my-hover-danger\" style=\"width: 35px; height: 35px\">\r\n                    <span class=\"iconfont icon-close\" style=\"font-size: 18px\"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Util from '@/common/util';\r\nimport Menu from './Menu';\r\nimport ShortCut from '@/module/shortcut/menu-bar';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\nconst require = window.require || window.parent.require || function () {};\r\nconst remote = require('@electron/remote');\r\nconst currentWindow = remote && remote.getCurrentWindow();\r\n\r\nexport default {\r\n    name: 'TitleBar',\r\n    props: {\r\n        height: {\r\n            type: Number,\r\n            default: 25,\r\n        },\r\n    },\r\n    components: {\r\n        Menu,\r\n    },\r\n    data() {\r\n        return {\r\n            fileMenuVisible: false,\r\n            editMenuVisible: false,\r\n            selectionMenuVisible: false,\r\n            preferenceMenuVisible: false,\r\n            maximize: false,\r\n            mode: remote ? 'app' : 'web',\r\n            fileMenuList: [\r\n                [\r\n                    {\r\n                        name: 'New File',\r\n                        op: 'newFile',\r\n                        shortcut: 'Ctrl+N',\r\n                    },\r\n                ],\r\n            ],\r\n            editMenuList: [\r\n                [\r\n                    {\r\n                        name: 'Undo',\r\n                        op: 'undo',\r\n                        shortcut: 'Ctrl+Z',\r\n                    },\r\n                    {\r\n                        name: 'Redo',\r\n                        op: 'redo',\r\n                        shortcut: 'Ctrl+Y',\r\n                    },\r\n                ],\r\n                [\r\n                    {\r\n                        name: 'Cut',\r\n                        op: 'cut',\r\n                        shortcut: 'Ctrl+X',\r\n                    },\r\n                    {\r\n                        name: 'Copy',\r\n                        op: 'copy',\r\n                        shortcut: 'Ctrl+C',\r\n                    },\r\n                    {\r\n                        name: 'Paste',\r\n                        op: 'paste',\r\n                        shortcut: 'Ctrl+V',\r\n                    },\r\n                ],\r\n                [\r\n                    {\r\n                        name: 'Delete Line',\r\n                        op: 'deleteLine',\r\n                        shortcut: 'Ctrl+Shift+K',\r\n                    },\r\n                ],\r\n                [\r\n                    {\r\n                        name: 'Find',\r\n                        op: 'find',\r\n                        shortcut: 'Ctrl+F',\r\n                    },\r\n                    {\r\n                        name: 'Replace',\r\n                        op: 'replace',\r\n                        shortcut: 'Ctrl+H',\r\n                    },\r\n                ],\r\n            ],\r\n            selectionMenuList: [\r\n                [\r\n                    {\r\n                        name: 'Select All',\r\n                        op: 'selectAll',\r\n                        shortcut: 'Ctrl+A',\r\n                    },\r\n                ],\r\n                [\r\n                    {\r\n                        name: 'Copy Line Up',\r\n                        op: 'copyLineUp',\r\n                        shortcut: 'Ctrl+Shift+D',\r\n                    },\r\n                    {\r\n                        name: 'Copy Line Down',\r\n                        op: 'copyLineDown',\r\n                        shortcut: 'Alt+Shift+Down',\r\n                    },\r\n                    {\r\n                        name: 'Move Line Up',\r\n                        op: 'moveLineUp',\r\n                        shortcut: 'Ctrl+Shift+Up',\r\n                    },\r\n                    {\r\n                        name: 'Move Line Down',\r\n                        op: 'moveLineDown',\r\n                        shortcut: 'Ctrl+Shift+Down',\r\n                    },\r\n                ],\r\n                [\r\n                    {\r\n                        name: 'Add Cursor Above',\r\n                        op: 'addCursorAbove',\r\n                        shortcut: 'Ctrl+Alt+Up',\r\n                    },\r\n                    {\r\n                        name: 'Add Cursor Below',\r\n                        op: 'addCursorBelow',\r\n                        shortcut: 'Ctrl+Alt+Down',\r\n                    },\r\n                    {\r\n                        name: 'Add Cursor to Line Ends',\r\n                        op: 'addCursorLineEnds',\r\n                        shortcut: 'Ctrl+Shift+L',\r\n                    },\r\n                    {\r\n                        name: 'Add Next Occurence',\r\n                        op: 'addNextOccurence',\r\n                        shortcut: 'Ctrl+D',\r\n                    },\r\n                    {\r\n                        name: 'Add Previous Occurence',\r\n                        op: 'addPrevOccurence',\r\n                        shortcut: 'Shift+D',\r\n                    },\r\n                    {\r\n                        name: 'Select All Occurence',\r\n                        op: 'selectAllOccurence',\r\n                    },\r\n                ],\r\n                [\r\n                    {\r\n                        name: 'Switch Alt+Click to Multi-Cursor',\r\n                        op: 'switchMultiKeyCode',\r\n                        keyCode: 'ctrl',\r\n                    },\r\n                ],\r\n            ],\r\n            preferenceMenuList: [\r\n                [\r\n                    {\r\n                        name: 'Color Theme',\r\n                        op: 'changeTheme',\r\n                    },\r\n                    {\r\n                        name: 'Icon Theme',\r\n                        op: 'changeIconTheme',\r\n                    },\r\n                ],\r\n            ],\r\n        };\r\n    },\r\n    computed: {\r\n        _top() {\r\n            return this.height + 2 + 'px';\r\n        },\r\n        editor() {\r\n            return this.getNowEditor();\r\n        },\r\n        context() {\r\n            return this.getNowContext();\r\n        },\r\n    },\r\n    inject: ['getNowEditor', 'getNowContext', 'openFile', 'openFolder'],\r\n    created() {\r\n        if (this.mode === 'app') {\r\n            this.fileMenuList.push([\r\n                {\r\n                    name: 'Open File',\r\n                    op: 'openFile',\r\n                    shortcut: 'Ctrl+O',\r\n                },\r\n                {\r\n                    name: 'Open Folder',\r\n                    op: 'openFolder',\r\n                    shortcut: 'Ctrl+K Ctrl+O',\r\n                },\r\n            ]);\r\n        }\r\n        this.shortcut = new ShortCut(this);\r\n        this.initEventBus();\r\n        $(window).on('keydown', (e) => {\r\n            this.shortcut.onKeyDown(e);\r\n        });\r\n    },\r\n    mounted() {\r\n        if (this.mode === 'app') {\r\n            this.maximize = currentWindow.isMaximized();\r\n        }\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on('close-menu', () => {\r\n                this.fileMenuVisible = false;\r\n                this.editMenuVisible = false;\r\n                this.selectionMenuVisible = false;\r\n                this.preferenceMenuVisible = false;\r\n            });\r\n        },\r\n        showMemu(prop) {\r\n            EventBus.$emit('close-menu');\r\n            this[prop] = true;\r\n        },\r\n        // 最小化\r\n        onMinimize() {\r\n            currentWindow.minimize();\r\n        },\r\n        // 最大化\r\n        onMaximize() {\r\n            currentWindow.maximize();\r\n            this.maximize = true;\r\n        },\r\n        // 最大化\r\n        onUnmaximize() {\r\n            currentWindow.unmaximize();\r\n            this.maximize = false;\r\n        },\r\n        // 关闭窗口\r\n        onClose() {\r\n            currentWindow.close();\r\n        },\r\n        onFileMenuChange(item) {\r\n            switch (item.op) {\r\n                case 'newFile':\r\n                    this.openFile();\r\n                    break;\r\n                case 'openFile':\r\n                    this.openFile(null, true);\r\n                    break;\r\n                case 'openFolder':\r\n                    this.openFolder();\r\n                    break;\r\n            }\r\n            this.fileMenuVisible = false;\r\n        },\r\n        onEditMenuChange(item) {\r\n            if (!this.editor) {\r\n                this.editMenuVisible = false;\r\n                return;\r\n            }\r\n            switch (item.op) {\r\n                case 'undo':\r\n                    this.editor.history.undo();\r\n                    break;\r\n                case 'redo':\r\n                    this.editor.history.redo();\r\n                    break;\r\n                case 'cut':\r\n                    Util.writeClipboard(this.context.getCopyText(true));\r\n                    break;\r\n                case 'copy':\r\n                    Util.writeClipboard(this.context.getCopyText());\r\n                    break;\r\n                case 'paste':\r\n                    Util.readClipboard().then((text) => {\r\n                        this.context.insertContent(text);\r\n                    });\r\n                    break;\r\n                case 'deleteLine':\r\n                    this.context.deleteLine();\r\n                    break;\r\n                case 'find':\r\n                    this.editor.openSearch();\r\n                    break;\r\n                case 'replace':\r\n                    this.editor.openSearch(true);\r\n                    break;\r\n            }\r\n            this.editor.focus();\r\n            this.editMenuVisible = false;\r\n        },\r\n        onSelectionMenuChange(item) {\r\n            if (!this.editor) {\r\n                this.selectionMenuVisible = false;\r\n                return;\r\n            }\r\n            switch (item.op) {\r\n                case 'selectAll':\r\n                    this.editor.selecter.selectAll();\r\n                    break;\r\n                case 'copyLineUp':\r\n                    this.context.copyLineUp();\r\n                    break;\r\n                case 'copyLineDown':\r\n                    this.context.copyLineDown();\r\n                    break;\r\n                case 'moveLineUp':\r\n                    this.context.moveLineUp();\r\n                    break;\r\n                case 'moveLineDown':\r\n                    this.context.moveLineDown();\r\n                    break;\r\n                case 'addCursorAbove':\r\n                    this.editor.cursor.addCursorAbove();\r\n                    break;\r\n                case 'addCursorBelow':\r\n                    this.editor.cursor.addCursorBelow();\r\n                    break;\r\n                case 'addCursorLineEnds':\r\n                    this.editor.cursor.addCursorLineEnds();\r\n                    break;\r\n                case 'addNextOccurence':\r\n                    this.editor.searchWord('down');\r\n                    break;\r\n                case 'addPrevOccurence':\r\n                    this.editor.searchWord('up');\r\n                    break;\r\n                case 'selectAllOccurence':\r\n                    this.editor.selecter.selectAllOccurence();\r\n                    break;\r\n                case 'switchMultiKeyCode':\r\n                    this.editor.cursor.switchMultiKeyCode();\r\n                    item.keyCode = this.editor.cursor.multiKeyCode;\r\n                    item.name = `Switch ${item.keyCode === 'alt' ? 'Ctrl' : 'Alt'}+Click to Multi-Cursor`;\r\n                    break;\r\n            }\r\n            this.editor.focus();\r\n            this.selectionMenuVisible = false;\r\n        },\r\n        onPreferenceMenuChange(item) {\r\n            switch (item.op) {\r\n                case 'changeTheme':\r\n                    this.$emit('change', item);\r\n                    break;\r\n                case 'changeIconTheme':\r\n                    this.$emit('change', item);\r\n            }\r\n            this.preferenceMenuVisible = false;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./TitleBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./TitleBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TitleBar.vue?vue&type=template&id=020a2e8f&\"\nimport script from \"./TitleBar.vue?vue&type=script&lang=js&\"\nexport * from \"./TitleBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-status-bar my-width-100\",style:({ height: _vm.height + 'px' }),on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('div',{staticClass:\"my-height-100 my-center-between\"},[_c('div',{staticClass:\"bar-left\"},[(_vm.hasEditor)?_c('div',{staticClass:\"bar-item\"},[_c('span',[_vm._v(\"Line \"+_vm._s(_vm.line)+\", Column \"+_vm._s(_vm.column))])]):_vm._e()]),_c('div',{staticClass:\"bar-right\"},[(_vm.hasEditor)?_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showTabsize.apply(null, arguments)}}},[_c('span',[_vm._v(\"Tab Size:\"+_vm._s(_vm.tabSize))]),_c('div',{staticClass:\"my-list\",staticStyle:{\"position\":\"absolute\",\"bottom\":\"30px\"}},[(_vm.tabsizeVisible)?_c('Menu',{attrs:{\"menuList\":_vm.tabSizeList,\"styles\":{ position: 'relative' },\"value\":_vm.tabSize},on:{\"change\":_vm.onTabsizeChange}}):_vm._e()],1)]):_vm._e(),(_vm.hasEditor)?_c('div',{staticClass:\"bar-item my-hover\",on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.showLanguage.apply(null, arguments)}}},[_c('span',[_vm._v(_vm._s(_vm.nowLanguage))])]):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-09 21:38:38\r\n * @Description: \r\n-->\r\n<template>\r\n    <div :style=\"{ height: height + 'px' }\" @contextmenu.stop.prevent class=\"my-status-bar my-width-100\">\r\n        <div class=\"my-height-100 my-center-between\">\r\n            <div class=\"bar-left\">\r\n                <div class=\"bar-item\" v-if=\"hasEditor\">\r\n                    <span>Line {{ line }}, Column {{ column }}</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"bar-right\">\r\n                <div @mousedown.stop=\"showTabsize\" class=\"bar-item my-hover\" v-if=\"hasEditor\">\r\n                    <span>Tab Size:{{ tabSize }}</span>\r\n                    <div class=\"my-list\" style=\"position: absolute; bottom: 30px\">\r\n                        <Menu\r\n                            :menuList=\"tabSizeList\"\r\n                            :styles=\"{ position: 'relative' }\"\r\n                            :value=\"tabSize\"\r\n                            @change=\"onTabsizeChange\"\r\n                            v-if=\"tabsizeVisible\"\r\n                        ></Menu>\r\n                    </div>\r\n                </div>\r\n                <div @mousedown.stop=\"showLanguage\" class=\"bar-item my-hover\" v-if=\"hasEditor\">\r\n                    <span>{{ nowLanguage }}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Menu from './Menu';\r\nimport EventBus from '@/event';\r\n\r\nexport default {\r\n    name: 'StatusBar',\r\n    props: {\r\n        height: {\r\n            type: Number,\r\n            default: 25,\r\n        },\r\n        languageList: Array,\r\n    },\r\n    components: {\r\n        Menu,\r\n    },\r\n    data() {\r\n        return {\r\n            line: 1,\r\n            column: 0,\r\n            tabSize: 4,\r\n            language: '',\r\n            tabsizeVisible: false,\r\n            hasEditor: false,\r\n            tabSizeList: [],\r\n            languages: [[]],\r\n            languageMap: {},\r\n        };\r\n    },\r\n    watch: {\r\n        languageList() {\r\n            let languageMap = {};\r\n            this.languageList.forEach((item) => {\r\n                languageMap[item.value] = item.name;\r\n            });\r\n            this.languages = [this.languageList];\r\n            this.languageMap = languageMap;\r\n        },\r\n    },\r\n    computed: {\r\n        nowLanguage() {\r\n            return this.languageMap[this.language];\r\n        },\r\n    },\r\n    created() {\r\n        this.initEventBus();\r\n        for (let i = 1; i <= 8; i++) {\r\n            this.tabSizeList.push({\r\n                name: `Tab Width：${i}`,\r\n                value: i,\r\n            });\r\n        }\r\n    },\r\n    mounted() {},\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on('tab-change', (data) => {\r\n                if (data) {\r\n                    this.language = data.language;\r\n                    this.tabSize = data.tabSize;\r\n                    this.line = data.line;\r\n                    this.column = data.column;\r\n                    this.hasEditor = true;\r\n                } else {\r\n                    this.hasEditor = false;\r\n                }\r\n            });\r\n            EventBus.$on('cursor-change', (data) => {\r\n                this.line = data.line;\r\n                this.column = data.column;\r\n            });\r\n            EventBus.$on('language-change', (language) => {\r\n                this.language = language;\r\n            });\r\n            EventBus.$on('close-menu', (language) => {\r\n                this.tabsizeVisible = false;\r\n            });\r\n        },\r\n        showTabsize() {\r\n            let visible = this.tabsizeVisible;\r\n            EventBus.$emit('close-menu');\r\n            this.tabsizeVisible = !visible;\r\n        },\r\n        showLanguage() {\r\n            EventBus.$emit('close-menu');\r\n            this.$emit('select-langeuage');\r\n        },\r\n        onTabsizeChange(item) {\r\n            if (this.tabSize != item.value) {\r\n                EventBus.$emit('tab-size-change', item.value);\r\n                this.tabSize = item.value;\r\n            }\r\n            this.tabsizeVisible = false;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./StatusBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./StatusBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StatusBar.vue?vue&type=template&id=67eb5ef1&\"\nimport script from \"./StatusBar.vue?vue&type=script&lang=js&\"\nexport * from \"./StatusBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"sideBar\",staticClass:\"my-side-bar\",style:({ width: _vm.width + 'px' }),on:{\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onContextmenu.apply(null, arguments)},\"selectstart\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"my-height-100\",staticStyle:{\"overflow\":\"hidden\"}},[_c('div',{staticClass:\"side-bar-title my-shadow\"},[_vm._v(\"EXPLORER\")]),_c('side-tree',{attrs:{\"list\":_vm.list}})],1),_c('SideBarMenu',{ref:\"sideBarMenu\"}),_c('div',{staticClass:\"my-sash-v\",on:{\"mousedown\":_vm.onSashBegin}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wrap\",staticClass:\"side-tree-warp my-scroll-overlay\",on:{\"scroll\":_vm.onScroll}},[_c('div',{staticStyle:{\"width\":\"100%\",\"overflow\":\"hidden\"}},[_c('div',{staticClass:\"side-tree\",style:({ height: _vm._scrollHeight })},[_c('div',{staticClass:\"side-tree-content\",style:({ top: _vm._top })},_vm._l((_vm.renderList),function(item){return _c('div',{staticClass:\"tree-item\",on:{\"click\":function($event){$event.stopPropagation();return _vm.onClickItem(item)}}},[_c('div',{staticClass:\"tree-item-title my-center-start\",class:[item.active ? 'my-active' : ''],style:({ 'padding-left': _vm._paddingLeft(item) }),attrs:{\"title\":item.path},on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();}}},[(item.type === 'dir')?[(item.open)?_c('span',{staticClass:\"left-icon iconfont icon-down1\"}):_c('span',{staticClass:\"left-icon iconfont icon-right\"})]:_vm._e(),_c('div',{staticClass:\"tree-item-content my-center-start\",class:[item.icon]},[_c('span',{staticClass:\"tree-item-text\",staticStyle:{\"margin-left\":\"4px\"}},[_vm._v(_vm._s(item.name))])])],2)])}),0)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div @scroll=\"onScroll\" class=\"side-tree-warp my-scroll-overlay\" ref=\"wrap\">\r\n        <div style=\"width: 100%; overflow: hidden\">\r\n            <div :style=\"{ height: _scrollHeight }\" class=\"side-tree\">\r\n                <div :style=\"{ top: _top }\" class=\"side-tree-content\">\r\n                    <div @click.stop=\"onClickItem(item)\" class=\"tree-item\" v-for=\"item in renderList\">\r\n                        <div\r\n                            :class=\"[item.active ? 'my-active' : '']\"\r\n                            :style=\"{ 'padding-left': _paddingLeft(item) }\"\r\n                            :title=\"item.path\"\r\n                            @contextmenu.stop.prevent\r\n                            class=\"tree-item-title my-center-start\"\r\n                        >\r\n                            <template v-if=\"item.type === 'dir'\">\r\n                                <span class=\"left-icon iconfont icon-down1\" v-if=\"item.open\"></span>\r\n                                <span class=\"left-icon iconfont icon-right\" v-else></span>\r\n                            </template>\r\n                            <div class=\"tree-item-content my-center-start\" :class=\"[item.icon]\">\r\n                                <span class=\"tree-item-text\" style=\"margin-left: 4px\">{{ item.name }}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport EventBus from '@/event';\r\nimport Util from '@/common/util';\r\nimport globalData from '@/data/globalData';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nlet preActiveItem = null;\r\n\r\nexport default {\r\n    name: 'SideTree',\r\n    props: {\r\n        list: {\r\n            type: Array,\r\n        },\r\n    },\r\n    inject: ['openFile'],\r\n    data() {\r\n        return {\r\n            itemHeight: 30,\r\n            itemPadding: 16,\r\n            openedList: [],\r\n            renderList: [],\r\n            startLine: 1,\r\n            maxVisibleLines: 100,\r\n        };\r\n    },\r\n    computed: {\r\n        _top() {\r\n            return (this.startLine - 1) * this.itemHeight + 'px';\r\n        },\r\n        _scrollHeight() {\r\n            return this.openedList.length * this.itemHeight + 'px';\r\n        },\r\n        _paddingLeft() {\r\n            return function (item) {\r\n                return item.deep * this.itemPadding + 'px';\r\n            };\r\n        },\r\n    },\r\n    watch: {\r\n        list() {\r\n            this.openedList = [];\r\n            this.renderList = [];\r\n            this.openedList = this.getRenderList(this.list, 0);\r\n            this.render();\r\n        },\r\n    },\r\n    created() {\r\n        this.openedList = this.getRenderList(this.list, 0);\r\n        this.initEventBus();\r\n    },\r\n    mounted() {\r\n        this.maxVisibleLines = Math.ceil(this.$refs.wrap.clientHeight / this.itemHeight) + 1;\r\n        this.render();\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on('icon-change', () => {\r\n                this.openedList.forEach((item) => {\r\n                    item.icon = '';\r\n                });\r\n                this.render();\r\n            });\r\n            EventBus.$on('theme-change', () => {\r\n                this.openedList.forEach((item) => {\r\n                    item.icon = '';\r\n                });\r\n                this.render();\r\n            });\r\n            EventBus.$on('tab-change', (data) => {\r\n                let path = data && data.path;\r\n                if (path && preActiveItem && preActiveItem.path !== path) {\r\n                    preActiveItem.active = false;\r\n                    this.focusItem(path);\r\n                } else if (!path && preActiveItem) {\r\n                    preActiveItem.active = false;\r\n                    preActiveItem = null;\r\n                }\r\n            });\r\n        },\r\n        render() {\r\n            this.renderList = this.openedList.slice(this.startLine - 1, this.startLine - 1 + this.maxVisibleLines);\r\n            this.renderList.forEach((item) => {\r\n                if (globalData.nowIconData) {\r\n                    item.icon = Util.getIconByPath(globalData.nowIconData, item.path, globalData.nowTheme.type, item.type, item.open);\r\n                    item.icon = item.icon ? `my-file-icon my-file-icon-${item.icon}` : '';\r\n                }\r\n            });\r\n        },\r\n        readdir(dirPath) {\r\n            const fs = require('fs');\r\n            const path = require('path');\r\n            return new Promise((resolve) => {\r\n                let results = [];\r\n                // 异步读取目录内容\r\n                fs.readdir(dirPath, { encoding: 'utf8' }, (err, files) => {\r\n                    if (err) {\r\n                        throw err;\r\n                    }\r\n                    files.forEach((item, index) => {\r\n                        let fullPath = path.join(dirPath, item);\r\n                        let state = fs.statSync(fullPath);\r\n                        let obj = {\r\n                            name: item,\r\n                            path: fullPath,\r\n                            parentPath: dirPath,\r\n                            active: false,\r\n                            children: [],\r\n                        };\r\n                        if (state.isFile()) {\r\n                            obj.type = 'file';\r\n                        } else {\r\n                            obj.type = 'dir';\r\n                            obj.open = false;\r\n                        }\r\n                        results.push(obj);\r\n                        if (index === files.length - 1) {\r\n                            resolve(this.sortFileList(results));\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n        },\r\n        sortFileList(results) {\r\n            results.sort((a, b) => {\r\n                if (a.type === 'dir' && b.type === 'file') {\r\n                    return -1;\r\n                } else if (a.type === 'file' && b.type === 'dir') {\r\n                    return 1;\r\n                } else if (a.name > b.name) {\r\n                    return 1;\r\n                } else if (a.name < b.name) {\r\n                    return -1;\r\n                } else {\r\n                    return 0;\r\n                }\r\n            });\r\n            return results;\r\n        },\r\n        getRenderList(list, deep) {\r\n            let results = [];\r\n            _loopList(list, deep);\r\n            return results;\r\n\r\n            function _loopList(list, deep) {\r\n                list.forEach((item) => {\r\n                    item.deep = deep + 1;\r\n                    results.push(item);\r\n                    if (item.open && item.children.length) {\r\n                        _loopList(item.children, item.deep);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        focusItem(path) {\r\n            let index = 0;\r\n            _findItem.call(this, path);\r\n\r\n            function _findItem(path) {\r\n                for (let i = index; i < this.openedList.length; i++) {\r\n                    let item = this.openedList[i];\r\n                    if (item.path === path) {\r\n                        let wrap = this.$refs.wrap;\r\n                        let scrollTop = wrap.scrollTop;\r\n                        let clientHeight = wrap.clientHeight;\r\n                        let height = (i + 1) * this.itemHeight;\r\n                        if (scrollTop + clientHeight < height) {\r\n                            wrap.scrollTop = height - clientHeight;\r\n                        } else if (scrollTop + this.itemHeight > height) {\r\n                            wrap.scrollTop = height - this.itemHeight;\r\n                        }\r\n                        if (!item.active) {\r\n                            this.onClickItem(item);\r\n                        }\r\n                        break;\r\n                    } else if (path.startsWith(item.path)) {\r\n                        if (!item.open) {\r\n                            index = i + 1;\r\n                            this.onClickItem(item).then(() => {\r\n                                _findItem.call(this, path);\r\n                            });\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        onClickItem(item) {\r\n            if (!item.active) {\r\n                if (preActiveItem) {\r\n                    preActiveItem.active = false;\r\n                }\r\n                item.active = true;\r\n                preActiveItem = item;\r\n                if (item.type === 'dir') {\r\n                    item.open = !item.open;\r\n                    if (!item.loaded) {\r\n                        return this.readdir(item.path).then((data) => {\r\n                            item.children = data;\r\n                            item.loaded = true;\r\n                            data.forEach((_item) => {\r\n                                _item.deep = item.deep + 1;\r\n                            });\r\n                            _changOpen.call(this, item);\r\n                        });\r\n                    } else {\r\n                        _changOpen.call(this, item);\r\n                    }\r\n                } else {\r\n                    this.openFile(item);\r\n                }\r\n            } else if (item.type === 'dir') {\r\n                item.open = !item.open;\r\n                _changOpen.call(this, item);\r\n            }\r\n            return Promise.resolve();\r\n\r\n            function _changOpen(item) {\r\n                if (item.children.length) {\r\n                    if (item.open) {\r\n                        let index = this.openedList.indexOf(item);\r\n                        this.openedList = this.openedList\r\n                            .slice(0, index + 1)\r\n                            .concat(this.getRenderList(item.children, item.deep))\r\n                            .concat(this.openedList.slice(index + 1));\r\n                    } else {\r\n                        let index = this.openedList.indexOf(item) + 1;\r\n                        let endIn = index;\r\n                        while (endIn < this.openedList.length && this.openedList[endIn].parentPath != item.parentPath) {\r\n                            endIn++;\r\n                        }\r\n                        this.openedList.splice(index, endIn - index);\r\n                    }\r\n                    this.render();\r\n                }\r\n            }\r\n        },\r\n        onScroll(e) {\r\n            let scrollTop = e.target.scrollTop;\r\n            this.startLine = Math.floor(scrollTop / this.itemHeight) + 1;\r\n            this.render();\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./SideTree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./SideTree.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SideTree.vue?vue&type=template&id=4d5a5b30&\"\nimport script from \"./SideTree.vue?vue&type=script&lang=js&\"\nexport * from \"./SideTree.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],ref:\"wrap\"},[_c('Menu',{ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onMenuChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div ref=\"wrap\" v-show=\"menuVisible\">\r\n        <Menu\r\n            :checkable=\"false\"\r\n            :menuList=\"menuList\"\r\n            :styles=\"menuStyle\"\r\n            @change=\"onMenuChange\"\r\n            ref=\"menu\"\r\n        ></Menu>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Menu from \"./Menu\";\r\nimport EventBus from \"@/event\";\r\nimport $ from \"jquery\";\r\n\r\nexport default {\r\n    components: {\r\n        Menu,\r\n    },\r\n    data() {\r\n        return {\r\n            list: [],\r\n            menuList: [],\r\n            menuVisible: false,\r\n            menuStyle: {\r\n                left: \"10px\",\r\n                top: \"40px\",\r\n            },\r\n        };\r\n    },\r\n    provide() {\r\n        return {\r\n            rootList: this.list,\r\n        };\r\n    },\r\n    created() {\r\n        this.initEventBus();\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on(\"close-menu\", () => {\r\n                this.menuVisible = false;\r\n            });\r\n            EventBus.$on(\"open-side-menu\", () => {\r\n                this.menuVisible = true;\r\n            });\r\n        },\r\n        show(e) {\r\n            let $parent = $(this.$refs.wrap).parent();\r\n            this.$nextTick(() => {\r\n                let menuWidth = 0;\r\n                let menuHeight = 0;\r\n                menuWidth = this.$refs.menu.$el.clientWidth;\r\n                menuHeight = this.$refs.menu.$el.clientHeight;\r\n                let offset = $parent.offset();\r\n                if (menuHeight + e.clientY > offset.top + $parent.height()) {\r\n                    this.menuStyle.top =\r\n                        e.clientY - offset.top - menuHeight + \"px\";\r\n                } else {\r\n                    this.menuStyle.top = e.clientY - offset.top + \"px\";\r\n                }\r\n                this.menuStyle.left = e.clientX - offset.left + \"px\";\r\n            });\r\n        },\r\n        onMenuChange(item) {\r\n            switch (item.op) {\r\n            }\r\n            this.menuVisible = false;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./SideBarMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./SideBarMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SideBarMenu.vue?vue&type=template&id=bccab2a0&\"\nimport script from \"./SideBarMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./SideBarMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div\r\n        @contextmenu.prevent.stop=\"onContextmenu\"\r\n        @selectstart.prevent\r\n        class=\"my-side-bar\"\r\n        ref=\"sideBar\"\r\n        :style=\"{ width: width + 'px' }\"\r\n    >\r\n        <div class=\"my-height-100\" style=\"overflow: hidden\">\r\n            <div class=\"side-bar-title my-shadow\">EXPLORER</div>\r\n            <side-tree :list=\"list\"></side-tree>\r\n        </div>\r\n        <SideBarMenu ref=\"sideBarMenu\"></SideBarMenu>\r\n        <div class=\"my-sash-v\" @mousedown=\"onSashBegin\"></div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport SideTree from './SideTree';\r\nimport SideBarMenu from './SideBarMenu';\r\nimport EventBus from '@/event';\r\nimport $ from 'jquery';\r\n\r\nexport default {\r\n    components: {\r\n        SideTree,\r\n        SideBarMenu,\r\n    },\r\n    data() {\r\n        return {\r\n            width: 300,\r\n            list: [],\r\n        };\r\n    },\r\n    provide() {\r\n        return {\r\n            getRootList: () => {\r\n                return this.list;\r\n            },\r\n        };\r\n    },\r\n    mounted() {\r\n        this.initEvent();\r\n    },\r\n    methods: {\r\n        initEvent() {\r\n            $(document)\r\n                .on('mousemove', (e) => {\r\n                    if (this.mouseObj) {\r\n                        let width = (this.width += e.clientX - this.mouseObj.clientX);\r\n                        let pWidth = $(this.$refs.sideBar).parent().width();\r\n                        width = width < 10 ? 10 : width;\r\n                        width = width > pWidth - 10 ? pWidth - 10 : width;\r\n                        this.width = width;\r\n                        this.mouseObj = e;\r\n                    }\r\n                })\r\n                .on('mouseup', (e) => {\r\n                    this.mouseObj = null;\r\n                });\r\n        },\r\n        onContextmenu(e) {\r\n            // EventBus.$emit(\"open-side-menu\");\r\n        },\r\n        onSashBegin(e) {\r\n            this.originMouseObj = e;\r\n            this.mouseObj = e;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./SideBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./SideBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SideBar.vue?vue&type=template&id=36596f36&\"\nimport script from \"./SideBar.vue?vue&type=script&lang=js&\"\nexport * from \"./SideBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.overlay)?_c('div',{staticClass:\"my-dialog-overlay\"}):_vm._e(),_c('div',{staticClass:\"my-dialog\",style:(_vm.styles),on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"dialog-title\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_c('span',{staticClass:\"dialog-close iconfont icon-close\",on:{\"click\":_vm.onClose}})]),_c('div',{staticClass:\"dialog-content\"},[(_vm.icon)?_c('span',{class:[_vm.icon],staticStyle:{\"margin-right\":\"5px\",\"width\":\"30px\",\"height\":\"30px\"}}):_vm._e(),_c('div',[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.content)}})])]),_c('div',{staticClass:\"dialog-btns\"},[_vm._l((_vm.btns),function(item){return _c('div',{staticClass:\"dialog-btn\",on:{\"click\":function($event){return _vm.onClickBtn(item)}}},[_vm._v(_vm._s(item.name))])}),_c('div',{staticClass:\"dialog-btn\",on:{\"click\":function($event){return _vm.onClose()}}},[_vm._v(\"取消\")])],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n * @Author: lisong\n * @Date: 2021-12-24 11:00:11\n * @Description: \n-->\n<template>\n\t<div>\n\t\t<div class=\"my-dialog-overlay\" v-if=\"overlay\"></div>\n\t\t<div :style=\"styles\" @mousedown.stop class=\"my-dialog\">\n\t\t\t<div class=\"dialog-title\">\n\t\t\t\t<div v-html=\"title\"></div>\n\t\t\t\t<span @click=\"onClose\" class=\"dialog-close iconfont icon-close\"></span>\n\t\t\t</div>\n\t\t\t<div class=\"dialog-content\">\n\t\t\t\t<span :class=\"[icon]\" style=\"margin-right:5px;width:30px;height:30px;\" v-if=\"icon\"></span>\n\t\t\t\t<div>\n\t\t\t\t\t<div v-html=\"content\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"dialog-btns\">\n\t\t\t\t<div @click=\"onClickBtn(item)\" class=\"dialog-btn\" v-for=\"item in btns\">{{item.name}}</div>\n\t\t\t\t<div @click=\"onClose()\" class=\"dialog-btn\">取消</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n    name: 'Dialog',\n    props: {\n        title: String,\n        content: String,\n        btns: Array,\n        overlay: Boolean,\n        styles: Object,\n        icon: String,\n        iconColor: String,\n    },\n    data() {\n        return {\n        }\n    },\n    created() {\n    },\n    methods: {\n        onClickBtn(item) {\n            item.callback();\n        },\n        onClose() {\n            this.$emit('close');\n        }\n    }\n}\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dialog.vue?vue&type=template&id=3fea6a40&\"\nimport script from \"./Dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./Dialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],ref:\"wrap\"},[_c('Menu',{ref:\"menu\",attrs:{\"checkable\":false,\"menuList\":_vm.menuList,\"styles\":_vm.menuStyle},on:{\"change\":_vm.onMenuChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n    <div ref=\"wrap\" v-show=\"menuVisible\">\r\n        <Menu\r\n            :checkable=\"false\"\r\n            :menuList=\"menuList\"\r\n            :styles=\"menuStyle\"\r\n            @change=\"onMenuChange\"\r\n            ref=\"menu\"\r\n        ></Menu>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Menu from \"./Menu.vue\";\r\nimport EventBus from \"@/event\";\r\nimport $ from \"jquery\";\r\n\r\nexport default {\r\n    name: \"WindowMenu\",\r\n    components: {\r\n        Menu,\r\n    },\r\n    props: {\r\n        styles: {\r\n            type: Object,\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            menuList: [],\r\n            menuVisible: false,\r\n            menuStyle: {\r\n                left: \"50%\",\r\n                top: \"50%\",\r\n            },\r\n        };\r\n    },\r\n    created() {\r\n        this.initEventBus();\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on(\"close-menu\", () => {\r\n                this.menuVisible = false;\r\n            });\r\n            EventBus.$on(\"open-win-menu\", () => {\r\n                this.menuVisible = true;\r\n            });\r\n        },\r\n        onMenuChange(item) {\r\n            switch (item.op) {\r\n            }\r\n            this.menuVisible = false;\r\n        },\r\n        show(e) {\r\n            this.menuVisible = true;\r\n            this.$nextTick(() => {\r\n                let $parent = $(this.$refs.wrap).parent();\r\n                let offset = $parent.offset();\r\n                let menuWidth = this.$refs.menu.$el.clientWidth;\r\n                let menuHeight = this.$refs.menu.$el.clientHeight;\r\n                if (\r\n                    menuHeight + e.clientY >\r\n                    offset.top + $parent[0].clientHeight\r\n                ) {\r\n                    this.menuStyle.top =\r\n                        e.clientY - offset.top - menuHeight + \"px\";\r\n                } else {\r\n                    this.menuStyle.top = e.clientY - offset.top + \"px\";\r\n                }\r\n                if (\r\n                    menuWidth + e.clientX >\r\n                    offset.left + $parent[0].clientWidth\r\n                ) {\r\n                    this.menuStyle.left =\r\n                        e.clientX - offset.left - menuWidth + \"px\";\r\n                } else {\r\n                    this.menuStyle.left = e.clientX - offset.left + \"px\";\r\n                }\r\n            });\r\n        },\r\n        hide() {\r\n            this.menuVisible = false;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./WindowMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./WindowMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WindowMenu.vue?vue&type=template&id=3b84567e&\"\nimport script from \"./WindowMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./WindowMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{staticClass:\"my-cmd-panel my-list\",on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',[_c('div',{staticClass:\"my-cmd-search\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchText),expression:\"searchText\"}],ref:\"input\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.searchText)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.searchText=$event.target.value}}})]),_c('div',[_c('Menu',{staticClass:\"my-scroll-overlay my-scroll-mini\",staticStyle:{\"position\":\"relative\"},attrs:{\"checkable\":true,\"menuList\":_vm.cmdList,\"value\":_vm.value,\"spellcheck\":\"false\"},on:{\"change\":_vm.onChange}})],1)])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * @Author: lisong\r\n * @Date: 2022-03-22 23:00:49\r\n * @Description:\r\n */\r\nimport Util from '../../common/util';\r\nimport globalData from '@/data/globalData';\r\nimport chroma from 'chroma-js';\r\nimport EventBus from '@/event';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nconst path = require('path');\r\nconst settingMap = {\r\n    foreground: 'color',\r\n    background: 'background-color',\r\n    fontStyle: 'font-style',\r\n};\r\n\r\nexport default class {\r\n    constructor() {}\r\n    loadTheme(option) {\r\n        let result = { tokenColors: [], colors: {} };\r\n        return _loadTheme.call(this, option.path).then(() => {\r\n            let css = '';\r\n            this.setDefaultColor(result, option.type);\r\n            css = this.parseCss(result);\r\n            this.insertCss(css);\r\n            globalData.nowTheme = {\r\n                value: option.value,\r\n                type: option.type,\r\n                path: option.path,\r\n            };\r\n            EventBus.$emit('theme-change', option.value);\r\n        });\r\n\r\n        function _loadTheme(fullPath) {\r\n            return Util.loadJsonFile(fullPath).then((data) => {\r\n                if (data.include) {\r\n                    return _loadTheme.call(this, path.join(fullPath, '../' + data.include)).then(() => {\r\n                        _addColors(data);\r\n                    });\r\n                } else {\r\n                    _addColors(data);\r\n                }\r\n            });\r\n        }\r\n\r\n        function _addColors(data) {\r\n            data.tokenColors && result.tokenColors.push(...data.tokenColors);\r\n            data.colors && Object.assign(result.colors, data.colors);\r\n        }\r\n    }\r\n    loadIconTheme(option) {\r\n        if (!option.path) {\r\n            globalData.nowIconTheme = {\r\n                value: option.value,\r\n            };\r\n            globalData.nowIconData = null;\r\n            EventBus.$emit('icon-change');\r\n            return Promise.resolve();\r\n        }\r\n        let languages = globalData.languageList;\r\n        let languageMap = {};\r\n        languages.forEach((item) => {\r\n            if (item.extensions) {\r\n                languageMap[item.value] = item.extensions.map((e) => {\r\n                    return e.slice(1);\r\n                });\r\n            }\r\n        });\r\n\r\n        return _loadTheme.call(this, option.path);\r\n\r\n        function _loadTheme(fullPath) {\r\n            return Util.loadJsonFile(fullPath).then((data) => {\r\n                let fonts = data.fonts || [];\r\n                let css = '';\r\n                fonts.forEach((font) => {\r\n                    let fontFace = '@font-face{\\nsrc:';\r\n                    font.src.forEach((src, index) => {\r\n                        let url = path.join(fullPath, '../' + src.path);\r\n                        url = url.replace(/\\\\/g, '/');\r\n                        fontFace += `url('my-file://${url}')`;\r\n                        fontFace += ` format('${src.format}')`;\r\n                        fontFace += index < font - src.length - 1 ? ', ' : '';\r\n                    });\r\n                    fontFace += ';\\n';\r\n                    fontFace += `font-family:${font.id};\\n`;\r\n                    fontFace += `font-style:${font.style};\\n`;\r\n                    fontFace += `font-weight:${font.weight};\\n`;\r\n                    fontFace += '}\\n';\r\n                    css += fontFace;\r\n                    css += '.my-file-icon::before{\\n';\r\n                    css += `font-family:${font.id};\\n`;\r\n                    css += `font-size:${font.size};\\n`;\r\n                    css += '}\\n';\r\n                });\r\n                for (let icon in data.iconDefinitions) {\r\n                    css += `.my-file-icon-${icon}::before{\\n`;\r\n                    icon = data.iconDefinitions[icon];\r\n                    if (icon.fontCharacter) {\r\n                        css += 'margin-top:3px;';\r\n                        css += `content:\"${icon.fontCharacter}\";\\n`;\r\n                        css += `color:${icon.fontColor};\\n`;\r\n                    } else if (icon.iconPath) {\r\n                        let imgUrl = path.join(fullPath, '../' + icon.iconPath);\r\n                        imgUrl = imgUrl.replace(/\\\\/g, '/');\r\n                        css += 'content:\"\";';\r\n                        css += `background-image:url(my-file://${imgUrl})`;\r\n                    }\r\n                    css += '}\\n';\r\n                }\r\n                this.insertFont(css);\r\n                data.fileNames = data.fileNames || {};\r\n                data.fileExtensions = data.fileExtensions || {};\r\n                _setFileExtensions(data);\r\n                globalData.nowIconTheme = {\r\n                    value: option.value,\r\n                    path: option.path,\r\n                };\r\n                globalData.nowIconData = data;\r\n                EventBus.$emit('icon-change', option.value);\r\n            });\r\n        }\r\n\r\n        function _setFileExtensions(data) {\r\n            data.languageIds && _parseLanguageIds(data.languageIds, data.fileExtensions);\r\n            if (data.light) {\r\n                data.light.fileExtensions = data.light.fileExtensions || {};\r\n                data.light.fileNames = data.light.fileNames || {};\r\n                data.light.languageIds && _parseLanguageIds(data.light.languageIds, data.light.fileExtensions);\r\n                for (let key in data.fileExtensions) {\r\n                    data.light.fileExtensions[key] = data.light.fileExtensions[key] || data.fileExtensions[key];\r\n                }\r\n                for (let key in data.fileNames) {\r\n                    data.light.fileNames[key] = data.light.fileNames[key] || data.fileNames[key];\r\n                }\r\n            } else {\r\n                data.light = {\r\n                    fileExtensions: data.fileExtensions,\r\n                    fileNames: data.fileNames,\r\n                };\r\n            }\r\n        }\r\n\r\n        function _parseLanguageIds(languageIds, fileExtensions) {\r\n            for (let key in languageIds) {\r\n                let extensions = languageMap[key];\r\n                let value = languageIds[key];\r\n                if (extensions) {\r\n                    extensions.forEach((item) => {\r\n                        fileExtensions[item] = value;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    parseCss(data) {\r\n        let css = '';\r\n        let scopeId = 1;\r\n        let scopeTokenList = [];\r\n        let dotReg = /\\./g;\r\n        let sReg = /\\s+/g;\r\n        if (data.colors) {\r\n            css += ':root{\\n';\r\n            for (let key in data.colors) {\r\n                css += `--my-${key.replace(/\\./g, '-')}: ${data.colors[key]};\\n`;\r\n            }\r\n            css += '}\\n';\r\n        }\r\n        if (data.tokenColors) {\r\n            data.tokenColors.forEach((token) => {\r\n                if (!token.scope) {\r\n                    return;\r\n                }\r\n                let selector = [];\r\n                let scope = token.scope instanceof Array ? token.scope.join(',') : token.scope;\r\n                scope = scope.replace(/\\s+/g, ' ');\r\n                scope = scope.split(/\\s*\\,\\s*/);\r\n                scope.forEach((scope, index) => {\r\n                    selector.push(`.my-scope-${scopeId}`);\r\n                    scopeTokenList.push({\r\n                        scopeId: scopeId,\r\n                        scope: scope,\r\n                        scopes: scope.split(' '),\r\n                        level: _getLevel(scope),\r\n                    });\r\n                    scopeId++;\r\n                });\r\n                selector = selector.join(',');\r\n                css += `${selector}{\\n`;\r\n                for (let prop in token.settings) {\r\n                    css += `${settingMap[prop]}:${token.settings[prop]};\\n`;\r\n                }\r\n                css += '}\\n';\r\n            });\r\n        }\r\n        scopeTokenList.sort((a, b) => {\r\n            return b.level - a.level;\r\n        });\r\n        scopeTokenList.forEach((item) => {\r\n            if (item.scopes.length > 1) {\r\n                item.regexp = item.scopes.join('(?:\\\\.[^\\\\.\\\\s]+)*?(?:\\\\s[^\\\\s]+)*? ');\r\n            } else {\r\n                item.regexp = item.scope;\r\n            }\r\n            item.regexp = new RegExp(item.regexp);\r\n        });\r\n        globalData.scopeTokenList = scopeTokenList;\r\n        globalData.colors = data.colors;\r\n        return css;\r\n\r\n        function _getLevel(scope) {\r\n            let dot = scope.match(dotReg);\r\n            let s = scope.match(sReg);\r\n            dot = (dot && dot.length) || 0;\r\n            s = (s && s.length * 1000) || 0;\r\n            return dot + s;\r\n        }\r\n    }\r\n    insertCss(css) {\r\n        if (globalData.themeStyle) {\r\n            globalData.themeStyle.remove();\r\n        }\r\n        globalData.themeStyle = document.createElement('style');\r\n        globalData.themeStyle.type = 'text/css';\r\n        globalData.themeStyle.appendChild(document.createTextNode(css));\r\n        document.getElementsByTagName('head')[0].appendChild(globalData.themeStyle);\r\n    }\r\n    insertFont(css) {\r\n        if (globalData.iconStyle) {\r\n            globalData.iconStyle.remove();\r\n        }\r\n        globalData.iconStyle = document.createElement('style');\r\n        globalData.iconStyle.type = 'text/css';\r\n        globalData.iconStyle.appendChild(document.createTextNode(css));\r\n        document.getElementsByTagName('head')[0].appendChild(globalData.iconStyle);\r\n    }\r\n    setDefaultColor(result, type) {\r\n        let transparent = 'transparent';\r\n        let foreground = '';\r\n        let background = '';\r\n        let focusBorder = '';\r\n        let contrastBorder = '';\r\n        let contrastActiveBorder = '';\r\n        let isLight = type === 'light' || type === 'contrast light';\r\n        let isHc = type === 'contrast light' || type === 'contrast dark';\r\n\r\n        _base();\r\n        _scrollbar();\r\n        _titleBar();\r\n        _dropdown();\r\n        _list();\r\n        _menu();\r\n        _statusBar();\r\n        _sideBar();\r\n        _editor();\r\n        _tab();\r\n        _editorWidget();\r\n        _input();\r\n        _toolbar();\r\n\r\n        // base\r\n        function _base() {\r\n            if (!result.colors['foreground']) {\r\n                if (result.colors['editor.foreground']) {\r\n                    result.colors['foreground'] = chroma(result.colors['editor.foreground']).alpha(0.8).css();\r\n                } else if (isLight) {\r\n                    result.colors['foreground'] = '#575757';\r\n                } else {\r\n                    result.colors['foreground'] = 'rgb(221, 221, 221)';\r\n                }\r\n            }\r\n            if (!result.colors['errorForeground']) {\r\n                result.colors['errorForeground'] = '#ff0000';\r\n            }\r\n            if (!result.colors['background']) {\r\n                if (result.colors['editor.background']) {\r\n                    result.colors['background'] = chroma(result.colors['editor.background']).alpha(0.8).css();\r\n                } else if (isLight) {\r\n                    result.colors['background'] = '#fff';\r\n                } else if (isHc) {\r\n                    result.colors['background'] = '#000';\r\n                } else {\r\n                    result.colors['background'] = 'rgba(60,60,60)';\r\n                }\r\n            }\r\n            if (!result.colors['focusBorder']) {\r\n                if (isHc) {\r\n                    if (isLight) {\r\n                        result.colors['focusBorder'] = '#0f4a85';\r\n                    } else {\r\n                        result.colors['focusBorder'] = '#f38518';\r\n                    }\r\n                } else {\r\n                    result.colors['focusBorder'] = '#0066b8';\r\n                }\r\n            }\r\n            if (!result.colors['contrastBorder']) {\r\n                if (isHc) {\r\n                    if (isLight) {\r\n                        result.colors['contrastBorder'] = '#0f4a85';\r\n                    } else {\r\n                        result.colors['contrastBorder'] = '#6fc3df';\r\n                    }\r\n                } else {\r\n                    result.colors['contrastBorder'] = transparent;\r\n                }\r\n            }\r\n            if (!result.colors['contrastActiveBorder']) {\r\n                if (isHc) {\r\n                    result.colors['contrastActiveBorder'] = result.colors['focusBorder'];\r\n                } else {\r\n                    result.colors['contrastActiveBorder'] = transparent;\r\n                }\r\n            }\r\n            if (!result.colors['widget.shadow']) {\r\n                if (isHc) {\r\n                    result.colors['widget.shadow'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['widget.shadow'] = 'rgba(0,0,0,0.16)';\r\n                } else {\r\n                    result.colors['widget.shadow'] = 'rgba(0,0,0,0.36)';\r\n                }\r\n            }\r\n            if (!result.colors['sash.hoverBorder']) {\r\n                if (isHc) {\r\n                    result.colors['sash.hoverBorder'] = result.colors['contrastActiveBorder'];\r\n                } else {\r\n                    result.colors['sash.hoverBorder'] = result.colors['focusBorder'];\r\n                }\r\n            }\r\n            if (!result.colors['selection.background']) {\r\n                result.colors['selection.background'] = result.colors['focusBorder'];\r\n            }\r\n            background = result.colors['background'];\r\n            foreground = result.colors['foreground'];\r\n            focusBorder = result.colors['focusBorder'];\r\n            contrastBorder = result.colors['contrastBorder'];\r\n            contrastActiveBorder = result.colors['contrastActiveBorder'];\r\n        }\r\n        function _scrollbar() {\r\n            if (!result.colors['scrollbar.shadow']) {\r\n                result.colors['scrollbar.shadow'] = transparent;\r\n            }\r\n            if (!result.colors['scrollbarSlider.background']) {\r\n                if (isHc) {\r\n                    result.colors['scrollbarSlider.background'] = chroma(contrastBorder).alpha(0.6).css();\r\n                } else if (isLight) {\r\n                    result.colors['scrollbarSlider.background'] = 'rgba(100, 100, 100, 0.4)';\r\n                } else {\r\n                    result.colors['scrollbarSlider.background'] = 'rgba(121, 121, 121, 0.4);';\r\n                }\r\n            }\r\n            if (!result.colors['scrollbarSlider.hoverBackground']) {\r\n                if (isHc) {\r\n                    result.colors['scrollbarSlider.hoverBackground'] = chroma(contrastBorder).alpha(0.8).css();\r\n                } else if (isLight) {\r\n                    result.colors['scrollbarSlider.hoverBackground'] = 'rgba(100, 100, 100, 0.7)';\r\n                } else {\r\n                    result.colors['scrollbarSlider.hoverBackground'] = 'rgba(100, 100, 100, 0.7);';\r\n                }\r\n            }\r\n            if (!result.colors['scrollbarSlider.activeBackground']) {\r\n                if (isHc) {\r\n                    result.colors['scrollbarSlider.activeBackground'] = contrastBorder;\r\n                } else if (isLight) {\r\n                    result.colors['scrollbarSlider.activeBackground'] = 'rgba(0, 0, 0, 0.6)';\r\n                } else {\r\n                    result.colors['scrollbarSlider.activeBackground'] = 'rgba(191, 191, 191, 0.4);';\r\n                }\r\n            }\r\n        }\r\n        //titleBar\r\n        function _titleBar() {\r\n            if (!result.colors['titleBar.border']) {\r\n                result.colors['titleBar.border'] = contrastBorder;\r\n            }\r\n            if (!result.colors['titleBar.activeForeground']) {\r\n                result.colors['titleBar.activeForeground'] = foreground;\r\n            }\r\n            if (!result.colors['titleBar.activeBackground']) {\r\n                if (isHc) {\r\n                    result.colors['titleBar.activeBackground'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['titleBar.activeBackground'] = 'rgb(221, 221, 221)';\r\n                }\r\n            }\r\n            if (!result.colors['menubar.selectionForeground']) {\r\n                result.colors['menubar.selectionForeground'] = foreground;\r\n            }\r\n            if (!result.colors['menubar.selectionBackground']) {\r\n                if (isHc) {\r\n                    result.colors['menubar.selectionBackground'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['menubar.selectionBackground'] = 'rgba(0,0,0,0.1)';\r\n                } else {\r\n                    result.colors['menubar.selectionBackground'] = 'rgba(255,255,255,0.1)';\r\n                }\r\n            }\r\n            if (!result.colors['menubar.selectionBorder']) {\r\n                if (isHc) {\r\n                    result.colors['menubar.selectionBorder'] = contrastActiveBorder;\r\n                } else {\r\n                    result.colors['menubar.selectionBorder'] = transparent;\r\n                }\r\n            }\r\n        }\r\n        // dropdown\r\n        function _dropdown() {\r\n            if (!result.colors['dropdown.background']) {\r\n                if (isHc) {\r\n                    result.colors['dropdown.background'] = background;\r\n                } else if (isLight) {\r\n                    result.colors['dropdown.background'] = '#eee';\r\n                } else {\r\n                    result.colors['dropdown.background'] = 'rgba(37,37,38)';\r\n                }\r\n            }\r\n            if (!result.colors['dropdown.foreground']) {\r\n                result.colors['dropdown.foreground'] = foreground;\r\n            }\r\n            if (!result.colors['dropdown.border']) {\r\n                result.colors['dropdown.border'] = contrastBorder;\r\n            }\r\n        }\r\n        // list\r\n        function _list() {\r\n            if (!result.colors['list.highlightForeground']) {\r\n                if (isHc) {\r\n                    result.colors['list.highlightForeground'] = contrastBorder;\r\n                } else {\r\n                    result.colors['list.highlightForeground'] = foreground;\r\n                }\r\n            }\r\n            if (!result.colors['list.activeSelectionBackground']) {\r\n                if (isHc) {\r\n                    result.colors['list.activeSelectionBackground'] = transparent;\r\n                } else {\r\n                    result.colors['list.activeSelectionBackground'] = '#0066b8';\r\n                    result.colors['list.activeSelectionForeground'] = '#fff';\r\n                }\r\n            }\r\n            if (!result.colors['list.activeSelectionForeground']) {\r\n                if (isHc) {\r\n                    result.colors['list.activeSelectionForeground'] = foreground;\r\n                } else if (isLight) {\r\n                    result.colors['list.activeSelectionForeground'] = 'rgba(51, 51, 51)';\r\n                } else {\r\n                    result.colors['list.activeSelectionForeground'] = 'rgba(255, 255, 255)';\r\n                }\r\n            }\r\n            if (!result.colors['list.hoverForeground']) {\r\n                result.colors['list.hoverForeground'] = foreground;\r\n            }\r\n            if (!result.colors['list.hoverBackground']) {\r\n                if (isHc) {\r\n                    result.colors['list.hoverBackground'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['list.hoverBackground'] = 'rgba(0,0,0,0.1)';\r\n                } else {\r\n                    result.colors['list.hoverBackground'] = 'rgba(255,255,255,0.1)';\r\n                }\r\n            }\r\n            if (!result.colors['quickInputList.focusBackground']) {\r\n                if (result.colors['list.inactiveFocusBackground']) {\r\n                    result.colors['quickInputList.focusBackground'] = result.colors['list.inactiveFocusBackground'];\r\n                } else if (isHc) {\r\n                    result.colors['quickInputList.focusBackground'] = transparent;\r\n                } else {\r\n                    result.colors['quickInputList.focusBackground'] = '#0066b8';\r\n                    result.colors['quickInputList.focusForeground'] = '#fff';\r\n                }\r\n            }\r\n            if (!result.colors['quickInputList.focusForeground']) {\r\n                if (result.colors['list.inactiveFocusForeground']) {\r\n                    result.colors['quickInputList.focusForeground'] = result.colors['list.inactiveFocusForeground'];\r\n                } else {\r\n                    result.colors['quickInputList.focusForeground'] = result.colors['list.activeSelectionForeground'];\r\n                }\r\n            }\r\n        }\r\n        //menu\r\n        function _menu() {\r\n            if (!result.colors['menu.foreground']) {\r\n                if (isHc) {\r\n                    result.colors['menu.foreground'] = foreground;\r\n                } else if (isLight) {\r\n                    result.colors['menu.foreground'] = 'rgba(51, 51, 51)';\r\n                } else {\r\n                    result.colors['menu.foreground'] = 'rgba(255, 255, 255)';\r\n                }\r\n            }\r\n            if (!result.colors['menu.background']) {\r\n                result.colors['menu.background'] = result.colors['dropdown.background'];\r\n            }\r\n            if (!result.colors['menu.border']) {\r\n                result.colors['menu.border'] = contrastBorder;\r\n            }\r\n            if (!result.colors['menu.selectionForeground']) {\r\n                result.colors['menu.selectionForeground'] = result.colors['list.activeSelectionForeground'];\r\n            }\r\n            if (!result.colors['menu.selectionBackground']) {\r\n                result.colors['menu.selectionBackground'] = result.colors['list.activeSelectionBackground'];\r\n            }\r\n            if (!result.colors['menu.selectionBorder']) {\r\n                result.colors['menu.selectionBorder'] = contrastActiveBorder;\r\n            }\r\n            if (!result.colors['menu.separatorBackground']) {\r\n                if (isHc) {\r\n                    result.colors['menu.separatorBackground'] = contrastBorder;\r\n                } else if (isLight) {\r\n                    result.colors['menu.separatorBackground'] = 'rgba(0,0,0,0.2)';\r\n                } else {\r\n                    result.colors['menu.separatorBackground'] = 'rgba(255,255,255,0.2)';\r\n                }\r\n            }\r\n        }\r\n        //statusBar\r\n        function _statusBar() {\r\n            if (!result.colors['statusBar.foreground']) {\r\n                if (isHc) {\r\n                    result.colors['statusBar.foreground'] = foreground;\r\n                } else {\r\n                    result.colors['statusBar.foreground'] = '#fff';\r\n                }\r\n            }\r\n            if (!result.colors['statusBar.background']) {\r\n                if (isLight && !isHc) {\r\n                    result.colors['statusBar.background'] = 'rgb(0, 122, 204)';\r\n                } else {\r\n                    result.colors['statusBar.background'] = transparent;\r\n                }\r\n            }\r\n            if (!result.colors['statusBar.border']) {\r\n                result.colors['statusBar.border'] = contrastBorder;\r\n            }\r\n            if (!result.colors['statusBarItem.hoverBackground']) {\r\n                result.colors['statusBarItem.hoverBackground'] = transparent;\r\n            }\r\n            if (!result.colors['statusBarItem.activeBackground']) {\r\n                result.colors['statusBarItem.activeBackground'] = transparent;\r\n            }\r\n        }\r\n        //sideBar\r\n        function _sideBar() {\r\n            if (!result.colors['sideBar.foreground']) {\r\n                result.colors['sideBar.foreground'] = foreground;\r\n            }\r\n            if (!result.colors['sideBarTitle.foreground']) {\r\n                result.colors['sideBarTitle.foreground'] = foreground;\r\n            }\r\n            if (!result.colors['sideBar.background']) {\r\n                if (isHc) {\r\n                    result.colors['sideBar.background'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['sideBar.background'] = '#eee';\r\n                } else {\r\n                    result.colors['sideBar.background'] = 'rgba(37,37,38)';\r\n                }\r\n            }\r\n            if (!result.colors['sideBar.border']) {\r\n                result.colors['sideBar.border'] = contrastBorder;\r\n            }\r\n        }\r\n        // editor\r\n        function _editor() {\r\n            if (!result.colors['editor.foreground']) {\r\n                result.colors['editor.foreground'] = foreground;\r\n            }\r\n            if (!result.colors['editor.background']) {\r\n                if (isHc) {\r\n                    result.colors['editor.background'] = background;\r\n                } else if (isLight) {\r\n                    result.colors['editor.background'] = '#fff';\r\n                } else {\r\n                    result.colors['editor.background'] = 'rgb(30,30,30)';\r\n                }\r\n            }\r\n            if (!result.colors['editorLineNumber.foreground']) {\r\n                result.colors['editorLineNumber.foreground'] = chroma(result.colors['editor.foreground']).alpha(0.5).css();\r\n            }\r\n            if (!result.colors['editorLineNumber.activeForeground']) {\r\n                result.colors['editorLineNumber.activeForeground'] = result.colors['editor.foreground'];\r\n            }\r\n            if (!result.colors['editorCursor.foreground']) {\r\n                result.colors['editorCursor.foreground'] = result.colors['editor.foreground'];\r\n            }\r\n            if (!result.colors['editor.selectionForeground']) {\r\n                if (isHc) {\r\n                    result.colors['editor.selectionForeground'] = foreground;\r\n                }\r\n            }\r\n            if (!result.colors['editor.selectionBackground']) {\r\n                if (isHc) {\r\n                    result.colors['editor.selectionBackground'] = focusBorder;\r\n                } else {\r\n                    result.colors['editor.selectionBackground'] = chroma(focusBorder).alpha(0.8).css();\r\n                }\r\n            }\r\n            if (!result.colors['editor.selectionHighlightBackground']) {\r\n                result.colors['editor.selectionHighlightBackground'] = transparent;\r\n            }\r\n            if (!result.colors['editor.selectionHighlightBorder']) {\r\n                if (isHc) {\r\n                    result.colors['editor.selectionHighlightBorder'] = contrastActiveBorder;\r\n                } else if (result.colors['editor.selectionHighlightBackground'] === transparent) {\r\n                    result.colors['editor.selectionHighlightBorder'] = focusBorder;\r\n                }\r\n            }\r\n            if (!result.colors['editor.findMatchBackground']) {\r\n                result.colors['editor.findMatchBackground'] = result.colors['editor.selectionBackground'];\r\n            }\r\n            if (!result.colors['editor.findMatchBorder']) {\r\n                result.colors['editor.findMatchBorder'] = transparent;\r\n            }\r\n            if (!result.colors['editor.findMatchHighlightBackground']) {\r\n                result.colors['editor.findMatchHighlightBackground'] = result.colors['editor.selectionHighlightBackground'];\r\n            }\r\n            if (!result.colors['editor.findMatchHighlightBorder']) {\r\n                result.colors['editor.findMatchHighlightBorder'] = result.colors['editor.selectionHighlightBorder'];\r\n            }\r\n            if (!result.colors['editor.lineHighlightBackground']) {\r\n                result.colors['editor.lineHighlightBackground'] = transparent;\r\n            }\r\n            if (!result.colors['editor.lineHighlightBorder']) {\r\n                if (result.colors['editor.lineHighlightBackground'] !== transparent) {\r\n                    result.colors['editor.lineHighlightBorder'] = transparent;\r\n                } else if (isHc) {\r\n                    result.colors['editor.lineHighlightBorder'] = contrastActiveBorder;\r\n                } else if (isLight) {\r\n                    result.colors['editor.lineHighlightBorder'] = 'rgba(0,0,0,0.2)';\r\n                } else {\r\n                    result.colors['editor.lineHighlightBorder'] = 'rgba(255,255,255,0.1)';\r\n                }\r\n            }\r\n            if (!result.colors['editorWhitespace.foreground']) {\r\n                if (isHc) {\r\n                    result.colors['editorWhitespace.foreground'] = result.colors['editor.foreground'];\r\n                } else if (isLight) {\r\n                    result.colors['editorWhitespace.foreground'] = 'rgba(0,0,0,0.2)';\r\n                } else {\r\n                    result.colors['editorWhitespace.foreground'] = 'rgba(255,255,255,0.1)';\r\n                }\r\n            }\r\n            if (!result.colors['editorIndentGuide.background']) {\r\n                result.colors['editorIndentGuide.background'] = result.colors['editorWhitespace.foreground'];\r\n            }\r\n            if (!result.colors['editorBracketMatch.background']) {\r\n                result.colors['editorBracketMatch.background'] = transparent;\r\n            }\r\n            if (!result.colors['editorBracketMatch.border']) {\r\n                if (result.colors['editorBracketMatch.background'] === transparent) {\r\n                    result.colors['editorBracketMatch.border'] = chroma(result.colors['editor.foreground']).alpha(0.6).css();\r\n                } else {\r\n                    result.colors['editorBracketMatch.border'] = transparent;\r\n                }\r\n            }\r\n        }\r\n        // tab\r\n        function _tab() {\r\n            if (!result.colors['editorGroupHeader.tabsBackground']) {\r\n                if (isHc) {\r\n                    result.colors['editorGroupHeader.tabsBackground'] = transparent;\r\n                } else {\r\n                    result.colors['editorGroupHeader.tabsBackground'] = result.colors['sideBar.background'];\r\n                }\r\n            }\r\n            if (!result.colors['editorGroupHeader.tabsBackground']) {\r\n                result.colors['editorGroupHeader.tabsBackground'] = contrastBorder;\r\n            }\r\n            if (!result.colors['tab.border']) {\r\n                result.colors['tab.border'] = contrastBorder;\r\n            }\r\n            if (!result.colors['tab.activeForeground']) {\r\n                if (isHc) {\r\n                    result.colors['tab.activeForeground'] = foreground;\r\n                } else if (isLight) {\r\n                    result.colors['tab.activeForeground'] = 'rgba(51, 51, 51)';\r\n                } else {\r\n                    result.colors['tab.activeForeground'] = '#fff';\r\n                }\r\n            }\r\n            if (!result.colors['tab.activeBackground']) {\r\n                result.colors['tab.activeBackground'] = result.colors['editor.background'];\r\n            }\r\n            if (!result.colors['tab.inactiveForeground']) {\r\n                if (isHc) {\r\n                    result.colors['tab.inactiveForeground'] = foreground;\r\n                } else if (isLight) {\r\n                    result.colors['tab.inactiveForeground'] = 'rgba(51, 51, 51, 0.7)';\r\n                } else {\r\n                    result.colors['tab.inactiveForeground'] = 'rgba(255, 255, 255, 0.5)';\r\n                }\r\n            }\r\n            if (!result.colors['tab.inactiveBackground']) {\r\n                if (isHc) {\r\n                    result.colors['tab.inactiveBackground'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['tab.inactiveBackground'] = 'rgb(236, 236, 236)';\r\n                } else {\r\n                    result.colors['tab.inactiveBackground'] = 'rgb(45, 45, 45)';\r\n                }\r\n            }\r\n            if (!result.colors['tab.activeBorder']) {\r\n                result.colors['tab.activeBorder'] = transparent;\r\n            }\r\n            if (!result.colors['tab.activeBorderTop']) {\r\n                result.colors['tab.activeBorderTop'] = transparent;\r\n            }\r\n            if (!result.colors['tab.hoverForeground']) {\r\n                result.colors['tab.hoverForeground'] = result.colors['tab.inactiveForeground'];\r\n            }\r\n            if (!result.colors['tab.hoverBackground']) {\r\n                result.colors['tab.hoverBackground'] = transparent;\r\n            }\r\n            if (!result.colors['tab.hoverBorder']) {\r\n                result.colors['tab.hoverBorder'] = transparent;\r\n            }\r\n        }\r\n        // editorWidget\r\n        function _editorWidget() {\r\n            if (!result.colors['editorWidget.foreground']) {\r\n                result.colors['editorWidget.foreground'] = result.colors['editor.foreground'];\r\n            }\r\n            if (!result.colors['editorWidget.background']) {\r\n                if (isHc) {\r\n                    result.colors['editorWidget.background'] = background;\r\n                } else if (isLight) {\r\n                    result.colors['editorWidget.background'] = '#eee';\r\n                } else {\r\n                    result.colors['editorWidget.background'] = 'rgb(37,37,38)';\r\n                }\r\n            }\r\n            if (!result.colors['editorWidget.border']) {\r\n                if (isHc) {\r\n                    result.colors['editorWidget.border'] = contrastBorder;\r\n                } else {\r\n                    result.colors['editorWidget.border'] = transparent;\r\n                }\r\n            }\r\n            if (!result.colors['editorSuggestWidget.foreground']) {\r\n                result.colors['editorSuggestWidget.foreground'] = result.colors['editorWidget.foreground'];\r\n            }\r\n            if (!result.colors['editorSuggestWidget.background']) {\r\n                result.colors['editorSuggestWidget.background'] = result.colors['editorWidget.background'];\r\n            }\r\n            if (!result.colors['editorSuggestWidget.border']) {\r\n                result.colors['editorSuggestWidget.border'] = result.colors['editorWidget.border'];\r\n            }\r\n            if (result.colors['editorSuggestWidget.border'] === transparent) {\r\n                result.colors['editorSuggestWidget.shadow'] = result.colors['widget.shadow'];\r\n            } else {\r\n                result.colors['editorSuggestWidget.shadow'] = transparent;\r\n            }\r\n            if (!result.colors['editorSuggestWidget.selectedForeground']) {\r\n                result.colors['editorSuggestWidget.selectedForeground'] = result.colors['editor.foreground'];\r\n            }\r\n            if (!result.colors['editorSuggestWidget.selectedBackground']) {\r\n                result.colors['editorSuggestWidget.selectedBackground'] = result.colors['quickInputList.focusBackground'];\r\n            }\r\n            if (!result.colors['editorSuggestWidget.highlightForeground']) {\r\n                result.colors['editorSuggestWidget.highlightForeground'] = result.colors['list.highlightForeground'];\r\n            }\r\n            if (!result.colors['editorSuggestWidget.focusHighlightForeground']) {\r\n                result.colors['editorSuggestWidget.focusHighlightForeground'] = result.colors['list.highlightForeground'];\r\n            }\r\n        }\r\n        // input\r\n        function _input() {\r\n            if (!result.colors['input.foreground']) {\r\n                result.colors['input.foreground'] = foreground;\r\n            }\r\n            if (!result.colors['input.background']) {\r\n                if (isHc) {\r\n                    result.colors['input.background'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['input.background'] = '#fff';\r\n                } else {\r\n                    result.colors['input.background'] = background;\r\n                }\r\n            }\r\n            if (!result.colors['input.border']) {\r\n                if (result.colors['input.background'] === transparent) {\r\n                    result.colors['input.border'] = '#0066b8';\r\n                } else {\r\n                    result.colors['input.border'] = transparent;\r\n                }\r\n            }\r\n            if (!result.colors['inputOption.activeForeground']) {\r\n                result.colors['inputOption.activeForeground'] = foreground;\r\n            }\r\n            if (!result.colors['inputOption.activeBackground']) {\r\n                if (isHc) {\r\n                    result.colors['inputOption.activeBackground'] = transparent;\r\n                } else {\r\n                    result.colors['inputOption.activeBackground'] = chroma(focusBorder).alpha(0.3).css();\r\n                }\r\n            }\r\n            if (!result.colors['inputOption.activeBorder']) {\r\n                result.colors['inputOption.activeBorder'] = transparent;\r\n            }\r\n            if (!result.colors['inputOption.hoverBackground']) {\r\n                if (isHc) {\r\n                    result.colors['inputOption.hoverBackground'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['inputOption.hoverBackground'] = 'rgba(0,0,0,0.1)';\r\n                } else {\r\n                    result.colors['inputOption.hoverBackground'] = 'rgba(255,255,255,0.1)';\r\n                }\r\n            }\r\n        }\r\n        // toolbar\r\n        function _toolbar() {\r\n            if (!result.colors['toolbar.hoverBackground']) {\r\n                if (isHc) {\r\n                    result.colors['toolbar.hoverBackground'] = transparent;\r\n                } else if (isLight) {\r\n                    result.colors['toolbar.hoverBackground'] = 'rgba(0,0,0,0.1)';\r\n                } else {\r\n                    result.colors['toolbar.hoverBackground'] = 'rgba(255,255,255,0.1)';\r\n                }\r\n            }\r\n            if (!result.colors['toolbar.activeBackground']) {\r\n                result.colors['toolbar.activeBackground'] = transparent;\r\n            }\r\n            if (!result.colors['toolbar.hoverOutline']) {\r\n                result.colors['toolbar.hoverOutline'] = contrastActiveBorder;\r\n            }\r\n        }\r\n    }\r\n}\r\n","<!--\r\n * @Author: lisong\r\n * @Date: 2021-12-24 11:00:11\r\n * @Description: \r\n-->\r\n<template>\r\n    <div @mousedown.stop class=\"my-cmd-panel my-list\" v-if=\"visible\">\r\n        <div>\r\n            <div class=\"my-cmd-search\">\r\n                <input type=\"text\" v-model=\"searchText\" ref=\"input\" />\r\n            </div>\r\n            <div>\r\n                <Menu\r\n                    :checkable=\"true\"\r\n                    :menuList=\"cmdList\"\r\n                    :value=\"value\"\r\n                    @change=\"onChange\"\r\n                    style=\"position: relative\"\r\n                    class=\"my-scroll-overlay my-scroll-mini\"\r\n                    spellcheck=\"false\"\r\n                ></Menu>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Util from '@/common/util';\r\nimport Theme from '@/module/theme';\r\nimport Menu from './Menu';\r\nimport EventBus from '@/event';\r\n\r\nexport default {\r\n    name: 'CmdPanel',\r\n    components: {\r\n        Menu,\r\n    },\r\n    data() {\r\n        return {\r\n            searchText: '',\r\n            cmdList: [],\r\n            visible: false,\r\n        };\r\n    },\r\n    watch: {\r\n        searchText() {\r\n            this.searchMenu();\r\n        },\r\n    },\r\n    created() {\r\n        this.theme = new Theme();\r\n        this.initEventBus();\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            EventBus.$on('close-menu', () => {\r\n                this.visible = false;\r\n            });\r\n            EventBus.$on('open-cmd-menu', (data) => {\r\n                this.visible = true;\r\n                this.searchText = '';\r\n                this.originCmdList = data.cmdList;\r\n                this.value = data.value;\r\n                if (this.originCmdList[0] && !(this.originCmdList[0] instanceof Array)) {\r\n                    this.originCmdList = [this.originCmdList];\r\n                }\r\n                this.searchMenu();\r\n                requestAnimationFrame(() => {\r\n                    this.$refs.input.focus();\r\n                });\r\n            });\r\n        },\r\n        searchMenu() {\r\n            if (this.searchText) {\r\n                let menu = [];\r\n                this.originCmdList[0].forEach((item) => {\r\n                    let result = Util.fuzzyMatch(this.searchText, item.name, true);\r\n                    if (result) {\r\n                        menu.push([item, result]);\r\n                    }\r\n                });\r\n                menu = menu\r\n                    .sort((a, b) => {\r\n                        return b[1].score - a[1].score;\r\n                    })\r\n                    .map((item) => {\r\n                        return item[0];\r\n                    });\r\n                this.cmdList = [menu];\r\n            } else {\r\n                this.cmdList = this.originCmdList.slice();\r\n            }\r\n        },\r\n        onChange(item) {\r\n            switch (item.op) {\r\n                case 'changeTheme':\r\n                    this.theme.loadTheme(item);\r\n                    break;\r\n                case 'changeIconTheme':\r\n                    this.theme.loadIconTheme(item);\r\n                    break;\r\n                case 'selectLanguage':\r\n                    EventBus.$emit('language-change', item.value);\r\n                    break;\r\n            }\r\n            this.visible = false;\r\n        },\r\n    },\r\n};\r\n</script>","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./CmdPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./CmdPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CmdPanel.vue?vue&type=template&id=3ba36677&\"\nimport script from \"./CmdPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./CmdPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\r\n * @Author: lisong\r\n * @Date: 2022-03-09 17:17:02\r\n * @Description: \r\n-->\r\n<template>\r\n    <div\r\n        :style=\"{\r\n            'padding-top': _topBarHeight,\r\n            'padding-bottom': _statusHeight,\r\n        }\"\r\n        @mousedown=\"onWindMouseDown\"\r\n        class=\"my-window\"\r\n        ref=\"window\"\r\n    >\r\n        <!-- 侧边栏 -->\r\n        <side-bar ref=\"sideBar\" v-if=\"mode === 'app'\"></side-bar>\r\n        <div @contextmenu.prevent.stop=\"onContextmenu\" class=\"my-right-wrap\" ref=\"rightWrap\">\r\n            <!-- tab栏 -->\r\n            <editor-bar\r\n                :editorList=\"editorList\"\r\n                @change=\"onChangeTab\"\r\n                @close=\"onCloseTab\"\r\n                @close-all=\"onCloseAll\"\r\n                @close-saved=\"onCloseSaved\"\r\n                @close-to-left=\"onCloseToLeft\"\r\n                @close-to-right=\"onCloseToRight\"\r\n                v-show=\"editorList.length\"\r\n            ></editor-bar>\r\n            <!-- 编辑区 -->\r\n            <template v-for=\"item in editorList\">\r\n                <editor :active=\"item.active\" :id=\"item.id\" :key=\"item.id\" :ref=\"'editor' + item.id\" @change=\"onFileChange(item.id)\" @save=\"onSaveFile(item.id)\" v-show=\"item.active\"></editor>\r\n            </template>\r\n            <window-menu ref=\"winMenu\"></window-menu>\r\n        </div>\r\n        <!-- 顶部菜单栏 -->\r\n        <title-bar :height=\"topBarHeight\" @change=\"onMenuChange\" ref=\"titleBar\"></title-bar>\r\n        <!-- 状态栏 -->\r\n        <status-bar :height=\"statusHeight\" :languageList=\"languageList\" ref=\"statusBar\" @select-langeuage=\"onSelectLanguage\"></status-bar>\r\n        <cmd-panel></cmd-panel>\r\n        <Dialog\r\n            :btns=\"dialogBtns\"\r\n            :content=\"dialogContent\"\r\n            :icon=\"this.dialogIcon\"\r\n            :icon-color=\"this.dialogIconColor\"\r\n            :overlay=\"true\"\r\n            :title=\"dialogTilte\"\r\n            @close=\"onDialogClose\"\r\n            v-show=\"dialogVisible\"\r\n        ></Dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nimport EditorBar from './EditorBar.vue';\r\nimport Editor from './Editor.vue';\r\nimport TitleBar from './TitleBar';\r\nimport StatusBar from './StatusBar';\r\nimport SideBar from './SideBar.vue';\r\nimport Dialog from './Dialog.vue';\r\nimport WindowMenu from './WindowMenu.vue';\r\nimport CmdPanel from './CmdPanel.vue';\r\nimport Context from '@/module/context/index';\r\nimport Theme from '@/module/theme';\r\nimport EventBus from '@/event';\r\nimport Util from '@/common/util';\r\nimport globalData from '@/data/globalData';\r\nimport stripJsonComments from 'strip-json-comments';\r\n\r\nconst require = window.require || window.parent.require || function () {};\r\nconst fs = require('fs');\r\nconst path = require('path');\r\nconst remote = require('@electron/remote');\r\nconst contexts = Context.contexts;\r\n\r\nexport default {\r\n    components: {\r\n        Editor,\r\n        EditorBar,\r\n        TitleBar,\r\n        StatusBar,\r\n        SideBar,\r\n        Dialog,\r\n        WindowMenu,\r\n        CmdPanel,\r\n    },\r\n    data() {\r\n        return {\r\n            extensionsPath: path.join(globalData.dirname, 'main/extensions'),\r\n            languageList: [],\r\n            statusHeight: 30,\r\n            topBarHeight: 35,\r\n            nowId: null,\r\n            idCount: 1,\r\n            titleCount: 1,\r\n            editorList: [],\r\n            dialogTilte: '',\r\n            dialogContent: '',\r\n            dialogVisible: false,\r\n            dialogBtns: [],\r\n            dialogIcon: '',\r\n            dialogIconColor: '',\r\n            mode: remote ? 'app' : 'mode',\r\n        };\r\n    },\r\n    computed: {\r\n        _topBarHeight() {\r\n            return this.topBarHeight + 'px';\r\n        },\r\n        _statusHeight() {\r\n            return this.statusHeight + 'px';\r\n        },\r\n    },\r\n    provide() {\r\n        return {\r\n            getNowEditor: () => {\r\n                return this.getNowEditor();\r\n            },\r\n            getNowContext: () => {\r\n                return this.getNowContext();\r\n            },\r\n            openFile: (fileObj, choseFile) => {\r\n                this.openFile(fileObj, choseFile);\r\n            },\r\n            openFolder: () => {\r\n                this.openFolder();\r\n            },\r\n        };\r\n    },\r\n    created() {\r\n        window.globalData = globalData;\r\n        if (this.mode === 'app') {\r\n            const currentWindow = remote.getCurrentWindow();\r\n            currentWindow.on('blur', () => {\r\n                EventBus.$emit('close-menu');\r\n            });\r\n        }\r\n        this.initEventBus();\r\n    },\r\n    mounted() {\r\n        window.test = this;\r\n        const theme = new Theme();\r\n        theme.loadTheme(globalData.nowTheme);\r\n        this.openFile();\r\n        this.loadExtensions().then((result) => {\r\n            let langeuages = result.languages;\r\n            let themes = result.themes;\r\n            let iconThemes = result.iconThemes;\r\n            let scopeFileList = result.scopeFileList;\r\n            langeuages.push({ name: 'Plain Text', value: '', checked: true });\r\n            globalData.languageList = langeuages.slice();\r\n            globalData.scopeFileList = scopeFileList.slice();\r\n            globalData.themes = themes.slice();\r\n            globalData.iconThemes = iconThemes.slice();\r\n            this.languageList = langeuages;\r\n            this.checkLanguage();\r\n            // loadIconTheme需要用到globalData.languageList\r\n            theme.loadIconTheme(globalData.nowIconTheme);\r\n        });\r\n    },\r\n    methods: {\r\n        initEventBus() {\r\n            let iconFn = (value) => {\r\n                this.editorList.forEach((item) => {\r\n                    if (value) {\r\n                        let icon = Util.getIconByPath(globalData.nowIconData, item.path, globalData.nowTheme.type);\r\n                        item.icon = icon ? `my-file-icon my-file-icon-${icon}` : '';\r\n                    } else {\r\n                        item.icon = '';\r\n                    }\r\n                });\r\n                this.editorList.splice();\r\n            };\r\n            EventBus.$on('icon-change', iconFn);\r\n            EventBus.$on('theme-change', iconFn);\r\n        },\r\n        onContextmenu(e) {\r\n            // EventBus.$emit('open-win-menu');\r\n        },\r\n        // 点击编辑器\r\n        onWindMouseDown() {\r\n            EventBus.$emit('close-menu');\r\n        },\r\n        onChangeTab(id) {\r\n            let tab = this.getTabById(id);\r\n            if (!tab.active) {\r\n                this.editorList.forEach((item) => {\r\n                    item.active = false;\r\n                });\r\n                tab.active = true;\r\n                this.nowId = id;\r\n                this.changeStatus();\r\n            } else {\r\n                this.getNowEditor().focus();\r\n            }\r\n        },\r\n        onCloseTab(id) {\r\n            if (!this.nowId) {\r\n                return;\r\n            }\r\n            let tab = this.getTabById(id || this.nowId);\r\n            let index = this.editorList.indexOf(tab);\r\n            if (!tab.saved) {\r\n                this.showDialog({\r\n                    content: '文件尚未保存，是否先保存文件？',\r\n                    cancel: true,\r\n                    icon: 'my-icon-warn',\r\n                    iconColor: 'rgba(255,196,0)',\r\n                    btns: [\r\n                        {\r\n                            name: '保存',\r\n                            callback: () => {\r\n                                if (this.mode === 'app') {\r\n                                    this.onSaveFile(id).then(() => {\r\n                                        _closeTab.call(this);\r\n                                        this.onDialogClose();\r\n                                    });\r\n                                } else {\r\n                                    _closeTab.call(this);\r\n                                    this.onDialogClose();\r\n                                }\r\n                            },\r\n                        },\r\n                        {\r\n                            name: '不保存',\r\n                            callback: () => {\r\n                                _closeTab.call(this);\r\n                                this.onDialogClose();\r\n                            },\r\n                        },\r\n                    ],\r\n                });\r\n            } else {\r\n                _closeTab.call(this);\r\n            }\r\n\r\n            function _closeTab() {\r\n                this.editorList.splice(index, 1);\r\n                contexts[id] = null;\r\n                if (tab.active) {\r\n                    tab.active = false;\r\n                    tab = this.editorList[index] || this.editorList[index - 1];\r\n                    if (tab) {\r\n                        this.onChangeTab(tab.id);\r\n                    } else {\r\n                        this.nowId = null;\r\n                        EventBus.$emit('tab-change', null);\r\n                    }\r\n                } else {\r\n                    this.getNowEditor().focus();\r\n                }\r\n            }\r\n        },\r\n        onCloseAll() {\r\n            this.editorList = this.editorList.filter((item) => {\r\n                return !item.saved;\r\n            });\r\n            this.editorList.forEach((item) => {\r\n                this.onCloseTab(item.id);\r\n            });\r\n            this.nowId = null;\r\n        },\r\n        onCloseSaved() {\r\n            this.editorList.slice().forEach((item) => {\r\n                if (item.saved) {\r\n                    this.onCloseTab(item.id);\r\n                }\r\n            });\r\n        },\r\n        onCloseToLeft(id) {\r\n            let tab = null;\r\n            id = id || this.nowId;\r\n            while ((tab = this.editorList[0])) {\r\n                if (tab.id !== id) {\r\n                    this.onCloseTab(tab.id);\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        onCloseToRight(id) {\r\n            let tab = null;\r\n            id = id || this.nowId;\r\n            while ((tab = this.editorList.peek())) {\r\n                if (tab.id !== id) {\r\n                    this.onCloseTab(tab.id);\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        onMenuChange(item) {\r\n            let cmdList = null;\r\n            switch (item.op) {\r\n                case 'changeTheme':\r\n                    cmdList = globalData.themes.map((item) => {\r\n                        return item.map((item) => {\r\n                            return Object.assign({ op: 'changeTheme' }, item);\r\n                        });\r\n                    });\r\n                    EventBus.$emit('open-cmd-menu', {\r\n                        cmdList: cmdList,\r\n                        value: globalData.nowTheme.value,\r\n                    });\r\n                    break;\r\n                case 'changeIconTheme':\r\n                    cmdList = globalData.iconThemes.map((item) => {\r\n                        return Object.assign({ op: 'changeIconTheme' }, item);\r\n                    });\r\n                    cmdList.push({\r\n                        name: 'None',\r\n                        value: 'none',\r\n                        op: 'changeIconTheme',\r\n                    });\r\n                    EventBus.$emit('open-cmd-menu', {\r\n                        cmdList: cmdList,\r\n                        value: globalData.nowIconTheme.value,\r\n                    });\r\n                    break;\r\n            }\r\n        },\r\n        onSelectLanguage() {\r\n            let cmdList = globalData.languageList.map((item) => {\r\n                return {\r\n                    op: 'selectLanguage',\r\n                    name: item.name + (item.language ? `（${item.language}）` : ''),\r\n                    value: item.value,\r\n                };\r\n            });\r\n            EventBus.$emit('open-cmd-menu', {\r\n                cmdList: cmdList,\r\n                value: this.nowId && this.getNowEditor().language,\r\n            });\r\n        },\r\n        onFileChange(id) {\r\n            let tab = this.getTabById(id);\r\n            tab.saved = false;\r\n        },\r\n        onSaveFile(id) {\r\n            let tab = this.getTabById(id);\r\n            if (this.mode === 'web') {\r\n                return Promise.resolve();\r\n            }\r\n            if (!tab.saved) {\r\n                if (tab.path) {\r\n                    this.writeFile(tab.path, contexts[id].getAllText());\r\n                    tab.saved = true;\r\n                    return Promise.resolve();\r\n                } else {\r\n                    let win = remote.getCurrentWindow();\r\n                    let options = {\r\n                        title: '请选择要保存的文件名',\r\n                        buttonLabel: '保存',\r\n                    };\r\n                    return remote.dialog.showSaveDialog(win, options).then((result) => {\r\n                        if (!result.canceled && result.filePath) {\r\n                            tab.path = result.filePath;\r\n                            tab.name = tab.path.match(/[^\\\\\\/]+$/)[0];\r\n                            this.writeFile(tab.path, contexts[id].getAllText());\r\n                            tab.saved = true;\r\n                        } else {\r\n                            return Promise.reject();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        onDialogClose() {\r\n            this.dialogVisible = false;\r\n        },\r\n        openFolder() {\r\n            this.choseFolder().then((results) => {\r\n                if (results) {\r\n                    this.$refs.sideBar.list = results;\r\n                    this.editorList = [];\r\n                    this.nowId = null;\r\n                }\r\n            });\r\n        },\r\n        choseFolder() {\r\n            let win = remote.getCurrentWindow();\r\n            let options = {\r\n                title: '选择文件夹',\r\n                properties: ['openDirectory', 'multiSelections'],\r\n            };\r\n            return remote.dialog\r\n                .showOpenDialog(win, options)\r\n                .then((result) => {\r\n                    let results = [];\r\n                    if (!result.canceled && result.filePaths) {\r\n                        result.filePaths.forEach((item) => {\r\n                            let obj = {\r\n                                name: item.match(/[^\\\\\\/]+$/)[0],\r\n                                path: item,\r\n                                type: 'dir',\r\n                                active: false,\r\n                                open: false,\r\n                                children: [],\r\n                            };\r\n                            results.push(Object.assign({}, obj));\r\n                        });\r\n                        return results;\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n        openFile(fileObj, choseFile) {\r\n            let tab = fileObj && this.getTabByPath(fileObj.path);\r\n            if (!tab) {\r\n                let index = -1;\r\n                let name = (fileObj && fileObj.name) || `Untitled${this.titleCount++}`;\r\n                if (this.editorList.length) {\r\n                    tab = this.getTabById(this.nowId);\r\n                    index = this.editorList.indexOf(tab);\r\n                }\r\n                if (choseFile) {\r\n                    //从资源管理器中选择文件\r\n                    this.choseFile().then((results) => {\r\n                        if (results) {\r\n                            tab = results[0];\r\n                            this.editorList = this.editorList.slice(0, index).concat(results).concat(this.editorList.slice(index));\r\n                            _done.call(this);\r\n                        }\r\n                    });\r\n                } else {\r\n                    tab = {\r\n                        id: this.idCount++,\r\n                        name: name,\r\n                        path: (fileObj && fileObj.path) || '',\r\n                        icon: (fileObj && fileObj.icon) || '',\r\n                        saved: true,\r\n                        active: false,\r\n                    };\r\n                    if (!tab.icon) {\r\n                        let icon = Util.getIconByPath(globalData.nowIconData, '', globalData.nowTheme.type);\r\n                        tab.icon = icon ? `my-file-icon my-file-icon-${icon}` : '';\r\n                    }\r\n                    this.editorList.splice(index + 1, 0, tab);\r\n                    _done.call(this);\r\n                }\r\n            } else {\r\n                _done.call(this);\r\n            }\r\n\r\n            function _done() {\r\n                this.$nextTick(() => {\r\n                    if (tab && tab.path && !tab.loaded) {\r\n                        fs.readFile(tab.path, { encoding: 'utf8' }, (err, data) => {\r\n                            if (err) {\r\n                                throw err;\r\n                            }\r\n                            this.getContext(tab.id).insertContent(data);\r\n                            tab.saved = true;\r\n                            tab.loaded = true;\r\n                        });\r\n                    }\r\n                    this.onChangeTab(tab.id);\r\n                    this.checkLanguage();\r\n                });\r\n            }\r\n        },\r\n        choseFile() {\r\n            let win = remote.getCurrentWindow();\r\n            let options = {\r\n                title: '选择文件',\r\n                properties: ['openFile', 'multiSelections'],\r\n            };\r\n            return remote.dialog\r\n                .showOpenDialog(win, options)\r\n                .then((result) => {\r\n                    let results = [];\r\n                    if (!result.canceled && result.filePaths) {\r\n                        result.filePaths.forEach((item) => {\r\n                            let icon = Util.getIconByPath(globalData.nowIconData, item, globalData.nowTheme.type);\r\n                            icon = icon ? `my-file-icon my-file-icon-${icon}` : '';\r\n                            let obj = {\r\n                                id: this.idCount++,\r\n                                name: item.match(/[^\\\\\\/]+$/)[0],\r\n                                path: item,\r\n                                icon: icon,\r\n                                saved: true,\r\n                                active: false,\r\n                            };\r\n                            results.push(Object.assign({}, obj));\r\n                        });\r\n                        return results;\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n        sortFileList() {\r\n            this.list.sort((a, b) => {\r\n                if (a.type === b.type) {\r\n                    if (a.name === b.name) {\r\n                        return 0;\r\n                    } else if (a.name > b.name) {\r\n                        return 1;\r\n                    } else {\r\n                        return -1;\r\n                    }\r\n                }\r\n                if (a.type === 'dir') {\r\n                    return -1;\r\n                }\r\n                return 1;\r\n            });\r\n        },\r\n        showDialog(option) {\r\n            this.dialogTilte = option.title || '';\r\n            this.dialogContent = option.content || '';\r\n            this.dialogBtns = option.btns;\r\n            this.dialogVisible = true;\r\n            this.dialogIconColor = option.iconColor || '';\r\n            this.dialogIcon = option.icon || '';\r\n        },\r\n        writeFile(path, text) {\r\n            fs.writeFileSync(path, text, { encoding: 'utf-8' });\r\n        },\r\n        changeStatus() {\r\n            let changStatusId = this.changeStatus.id || 1;\r\n            this.changeStatus.id = changStatusId;\r\n            this.$nextTick(() => {\r\n                if (this.changeStatus.id !== changStatusId) {\r\n                    return;\r\n                }\r\n                let editor = this.getNowEditor();\r\n                let tab = this.getTabById(this.nowId);\r\n                EventBus.$emit(`tab-change`, {\r\n                    path: tab.path,\r\n                    language: editor.language,\r\n                    tabSize: editor.tabSize,\r\n                    line: editor.nowCursorPos ? editor.nowCursorPos.line : '?',\r\n                    column: editor.nowCursorPos ? editor.nowCursorPos.column : '?',\r\n                });\r\n            });\r\n        },\r\n        // 检查当前打开的文件的语言\r\n        checkLanguage() {\r\n            if (this.nowId) {\r\n                let tab = this.getTabById(this.nowId);\r\n                let suffix = /\\.[^\\.]+$/.exec(tab.name);\r\n                if (!suffix) {\r\n                    return;\r\n                }\r\n                for (let i = 0; i < this.languageList.length; i++) {\r\n                    let language = this.languageList[i];\r\n                    if (language.extensions && language.extensions.indexOf(suffix[0]) > -1) {\r\n                        this.$nextTick(() => {\r\n                            EventBus.$emit('language-change', language.value);\r\n                        });\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        // 加载语言支持\r\n        loadExtensions() {\r\n            let languages = [];\r\n            let scopeFileList = [];\r\n            let themes = [[], [], [], []];\r\n            let iconThemes = [];\r\n            return new Promise((resolve) => {\r\n                // 异步读取目录内容\r\n                fs.readdir(this.extensionsPath, { encoding: 'utf8' }, (err, files) => {\r\n                    if (err) {\r\n                        throw err;\r\n                    }\r\n                    const promises = [];\r\n                    files.forEach((item, index) => {\r\n                        let fullPath = path.join(this.extensionsPath, item);\r\n                        let packPath = path.join(fullPath, './package.json');\r\n                        let varConfigPath = path.join(fullPath, './package.nls.json');\r\n                        if (fs.existsSync(varConfigPath)) {\r\n                            promises.push(\r\n                                _readVarFile(varConfigPath).then((varMap) => {\r\n                                    return _readConfigFile(packPath, fullPath, varMap);\r\n                                })\r\n                            );\r\n                        } else if (fs.existsSync(packPath)) {\r\n                            promises.push(_readConfigFile(packPath, fullPath));\r\n                        }\r\n                    });\r\n                    Promise.all(promises).then(() => {\r\n                        themes = themes.filter((item) => {\r\n                            return item.length;\r\n                        });\r\n                        resolve({\r\n                            languages: languages,\r\n                            scopeFileList: scopeFileList,\r\n                            themes: themes,\r\n                            iconThemes: iconThemes,\r\n                        });\r\n                    });\r\n                });\r\n            });\r\n\r\n            function _readVarFile(varConfigPath) {\r\n                return Util.loadJsonFile(varConfigPath);\r\n            }\r\n\r\n            function _readConfigFile(packPath, fullPath, varMap) {\r\n                return Util.loadJsonFile(packPath).then((data) => {\r\n                    let contributes = data.contributes;\r\n                    _addLanguage(contributes, fullPath, varMap);\r\n                    _addTheme(contributes, fullPath, varMap);\r\n                    _addIconTheme(contributes, fullPath, varMap);\r\n                });\r\n            }\r\n\r\n            function _addLanguage(contributes, fullPath) {\r\n                let grammars = contributes.grammars;\r\n                let list = contributes.languages || [];\r\n                list.map((language) => {\r\n                    for (let i = 0; i < grammars.length; i++) {\r\n                        let grammar = grammars[i];\r\n                        scopeFileList.push({\r\n                            scopeName: grammar.scopeName,\r\n                            path: path.join(fullPath, grammar.path),\r\n                            configPath: language.configuration ? path.join(fullPath, language.configuration) : '',\r\n                        });\r\n                        if (language.id === grammar.language) {\r\n                            let name = language.aliases && language.aliases[0];\r\n                            name = name || grammar.language;\r\n                            languages.push({\r\n                                name: name,\r\n                                value: grammar.language,\r\n                                language: grammar.language,\r\n                                scopeName: grammar.scopeName,\r\n                                path: path.join(fullPath, grammar.path),\r\n                                configPath: language.configuration ? path.join(fullPath, language.configuration) : '',\r\n                                extensions: language.extensions,\r\n                            });\r\n                            break;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            function _addTheme(contributes, fullPath, varMap) {\r\n                let list = contributes.themes || [];\r\n                list.map((theme) => {\r\n                    let type = 'light';\r\n                    let index = 0;\r\n                    let label = _getValue(theme.label, varMap);\r\n                    switch (theme.uiTheme) {\r\n                        case 'vs-dark':\r\n                            type = 'dark';\r\n                            index = 1;\r\n                            break;\r\n                        case 'hc-light':\r\n                            type = 'contrast light';\r\n                            index = 2;\r\n                            break;\r\n                        case 'hc-black':\r\n                            type = 'contrast dark';\r\n                            index = 3;\r\n                            break;\r\n                    }\r\n                    themes[index].push({\r\n                        name: theme.id || label,\r\n                        value: label || theme.id,\r\n                        type: type,\r\n                        path: path.join(fullPath, theme.path),\r\n                    });\r\n                });\r\n            }\r\n\r\n            function _addIconTheme(contributes, fullPath, varMap) {\r\n                let list = contributes.iconThemes || [];\r\n                list.map((theme) => {\r\n                    let label = _getValue(theme.label, varMap);\r\n                    iconThemes.push({\r\n                        name: label || theme.id,\r\n                        value: theme.id || label,\r\n                        path: path.join(fullPath, theme.path),\r\n                    });\r\n                });\r\n            }\r\n\r\n            function _getValue(name, varMap) {\r\n                name = name || '';\r\n                if (name[0] === '%' && name[name.length - 1] === '%') {\r\n                    name = varMap[name.slice(1, -1)] || name;\r\n                }\r\n                return name;\r\n            }\r\n        },\r\n        getTabById(id) {\r\n            for (let i = 0; i < this.editorList.length; i++) {\r\n                if (this.editorList[i].id === id) {\r\n                    return this.editorList[i];\r\n                }\r\n            }\r\n        },\r\n        getTabByPath(path) {\r\n            for (let i = 0; i < this.editorList.length; i++) {\r\n                if (this.editorList[i].path === path) {\r\n                    return this.editorList[i];\r\n                }\r\n            }\r\n        },\r\n        getEditor(id) {\r\n            let editor = this.$refs[`editor${id}`];\r\n            return editor && editor[0];\r\n        },\r\n        getNowEditor() {\r\n            return this.getEditor(this.nowId);\r\n        },\r\n        getContext(id) {\r\n            return contexts[id];\r\n        },\r\n        getNowContext() {\r\n            return this.getContext(this.nowId);\r\n        },\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Window.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Window.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Window.vue?vue&type=template&id=7f036aae&\"\nimport script from \"./Window.vue?vue&type=script&lang=js&\"\nexport * from \"./Window.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div id=\"app\">\r\n        <Window></Window>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Window from './components/Window.vue';\r\nexport default {\r\n    name: 'App',\r\n    components: {\r\n        Window,\r\n    },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/_thread-loader@3.0.4@thread-loader/dist/cjs.js!../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=34237f10&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\nimport App from './App.vue';\r\nimport axios from 'axios';\r\nimport './scss/index.scss';\r\n\r\nVue.config.productionTip = false;\r\nVue.prototype.$http = axios.create({\r\n    timeout: 1000 * 30,\r\n    withCredentials: true,\r\n    headers: {\r\n        'Content-Type': 'application/json; charset=utf-8',\r\n    },\r\n});\r\n\r\nnew Vue({\r\n    render: (h) => h(App),\r\n}).$mount('#app');\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmy_editor\"] = self[\"webpackChunkmy_editor\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(6197); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","ref","staticClass","style","_topBarHeight","_statusHeight","on","onWindMouseDown","mode","_e","$event","preventDefault","stopPropagation","onContextmenu","apply","arguments","directives","name","rawName","value","editorList","expression","onChangeTab","onCloseTab","onCloseAll","onCloseSaved","onCloseToLeft","onCloseToRight","_l","item","key","id","refInFor","active","onFileChange","onSaveFile","topBarHeight","onMenuChange","statusHeight","languageList","onSelectLanguage","dialogBtns","dialogContent","dialogIcon","dialogIconColor","dialogTilte","onDialogClose","class","path","onClickItem","icon","_v","_s","onClose","saved","menuList","menuStyle","group","index","checkable","checked","disabled","onClick","onHover","shortcut","myMenuList","length","props","type","default","styles","hoverCheck","data","itemHeight","computed","visible","watch","newVal","created","mounted","$","destroyed","methods","initMenu","scrollToIndex","$scroller","setChecked","setCheckedByIndex","clearChecked","component","bus","Vue","components","Menu","op","menuVisible","left","top","initEventBus","EventBus","show","e","menuWidth","offset","require","window","parent","remote","dirname","app","getAppPath","globalData","scopeIdMap","scopeReg","colors","nowTheme","join","nowIconTheme","nowIconData","themes","iconThemes","scopeFileList","scopeTokenList","grammars","sourceWordMap","defaultWordPattern","fs","Util","clipboardData","Promise","resolve","getData","navigator","clipboard","readText","text","setData","writeText","String","replace","regex","r","exec","num","Number","tabSize","val","tmp","arr","sort","arg1","arg2","wrap","str1","str2","id1","getUUID","id2","$tempDom","append","dom","charWidth","scrollWidth","charHight","clientHeight","fontSize","getComputedStyle","currentStyle","fullAngleCharWidth","remove","str","charW","fullCharW","start","end","substr","substring","match","fullAngleReg","width","tabNum","getStrExactWidth","count","_splitStr","clientWidth","Math","floor","result","i","column","push","htmlTrans","slice","space","cont","targetObj","originObj","noDeepKeys","_assign","Map","assigned","indexOf","RegExp","nodeName","nodeType","has","get","Array","set","len","random","toString","line","funStr","blob","Blob","url","URL","createObjectURL","worker","Worker","target","context","properties","forEach","property","bind","Object","defineProperties","language","scopeName","wordPattern","getLanguageById","_wordPattern","pattern","iconData","fileType","opened","fileName","suffix1","suffix2","light","folderExpanded","folder","fileNames","fileExtensions","file","reject","readFile","error","fullPath","then","stripJsonComments","replaceAll","JSON","parse","word","fullMatch","wordMap","towMap","wordLength","score","preFinedChar","preFinedOriginChar","preFinded","targetMap","indexs","_target","toLowerCase","_setMap","originChar","char","_humpCheck","_complete","fuzzyMatch","cache","preChar","keys","preCode","charCodeAt","charCode","prototype","peek","empty","insert","right","mid","splice","keyCode","DELETE","BACKSPACE","command","INSERT","MOVEUP","MOVEDOWN","COPY_UP","COPY_DOWN","DELETE_COPY_UP","DELETE_COPY_DOWN","REPLACE","INSERT_LINE","DELETE_LINE","constData","LINE_COMMENT","BLOCK_COMMENT","BRACKET","TAG","editorBar","initProperties","ctrlKey","pressK","$emit","EditorBarMenu","list","provide","rootList","$tab","onWheel","_numTop","staticStyle","maxLine","nowCursorPos","height","_lineHeight","fold","onToggleFold","_leftShadow","onScroll","minWidth","_contentMinWidth","contentHeight","onContentMdown","onContentMmove","onContentMLeave","onSelectend","_top","_activeLine","selected","isFsearch","selectedFg","domProps","html","bracketMatch","range","tab","_tabLineLeft","visibility","_cursorVisible","_textAreaPos","onBlur","onCompositionend","onCompositionstart","onCopy","onCut","onFocus","onInput","onKeyDown","onPaste","autoTipList","autoTipStyle","onClickAuto","searchCount","searchNow","onCloseSearch","onSearchNext","onSearchPrev","onSearch","onClickMenu","tipContent","tipStyle","regs","stringToken","editor","currentLine","initRegistry","initLanguage","wasmBin","readFileSync","buffer","vscodeOnigurumaLib","oniguruma","createOnigScanner","patterns","createOnigString","s","registry","vsctm","onigLib","loadGrammar","configPath","sourceFoldMap","hasTextGrammar","startsWith","initLanguageConifg","grammar","foldType","tokenizeVisibleLins","grammarData","foldMap","source","__comments__","lineComment","blockComment","comments","__endCommentReg__","brackets","__foldReg__","nowLine","newLine","clearTimeout","tokenizeLinesTimer","$nextTick","tokenizeLines","tokenizeVisibleLinsId","startLine","endLine","maxVisibleLines","getRealLine","asyncTokenizeLines","processedLines","processedTime","Date","now","cancelIdleCallback","lineObj","htmls","tokens","tokenizeLine","folds","stateFold","checkLineVisible","splitLongToken","createHtml","renderLine","lineId","states","equals","requestIdleCallback","setTimeout","lineText","map","selector","startIndex","endIndex","scopes","_getSelector","scopeId","token","scope","outerLoop","_scope","regexp","test","lineTokens","addFold","ruleStack","existTag","isString","_scopeName","lastFold","addBracket","addTagFold","a","b","option","reg","res","preFold","side","_inString","lastIndex","tag","startCol","getLineInFold","child_process","initEvent","setErrors","_bindMsg","console","log","parseId","results","fork","call","parseTimer","getAllText","send","TOKEN_TYPE","TEXT","SOURCE","TAG_NAME","ATTR_NAME","STRING","WORD","CSS","CSS_VALUE","CSS_PROPERTY","CSS_SELECTOR","CSS_TAG","CSS_CLASS","CSS_ATTR","CSS_PSEUDO","EMMET_HTML","EMMET_CSS","tagToken","tagNameToken","tagAttrName","cssValueToken","cssPropertyToken","cssSelectorToken","cssAttributeToken","cssClassToken","cssPseudoToken","styleCss","styleCssProperty","Autocomplete","doneMap","searchTimer","stop","_search","tokenIndex","getTokenIndex","nowToken","emmetObj","extract","Enum","_isCssToken","_isCssPropertyToken","_isCssValueToken","preToken","replaceTip","abbreviation","selectAutoTip","insertContent","reset","setAutoTip","_isTextToken","_searchEmmet","_isTagNameToken","_searchTagName","_isAttrNameToken","_getPreTagName","_searchTagAttrName","_searchCssProperty","_getPreCssProperty","_searchCssValue","_isCssSelectorToken","_searchCssTag","_searchCssPseudo","_searchSelector","_isTagToken","_searchStyle","_isSourceToken","_searchWord","_searchDocument","_isStringToken","_addTip","_isCssClassToken","skipMatch","callback","showAll","startTime","_showTip","htmlData","getHtmlData","tags","attributes","tagMap","after","globalAttributes","cssData","getCssData","pseudo","split","trim","pseudoClasses","pseudoElements","keyValue","values","propertyMap","_word","before","isSourceToken","isCssToken","isTextToken","isTagToken","isTagAttrNameToken","isTagNameToken","isStringToken","isCssValueToken","isCssPropertyToken","isCssSelectorToken","isCssClassToken","isCssAttributeToken","isCssPseudoToken","undefined","_setTokenType","skipDone","obj","desc","getIcon","all","limit","_text","invalidEmmetParen","paremEmmet","emmet","cursorPos","Node","max","dataList","linkList","next","prev","pNode","Btree","compare","root","head","size","node","arrayCache","link","half","iterator","findIndex","_insert","newNode","isPnode","j","that","pIndex","leftNode","rightNode","_moveRight","_moveLeft","_join","orginIndex","originResult","_next","_prev","cb","toArray","isInsert","comparator","singleTag","singleTagMap","editorFunObj","preCursorPos","afterIndex","Infinity","unFold","starLine","resultFold","getRangeFold","getFoldByLine","delete","it","search","foldIconCheck","stack","startFold","foldStartText","assign","trimLeft","_fold","getRangeFoldByStartFold","pop","exsitEnd","lineCount","realLine","relLine","selecter","wholeWordPattern","searchObj","resultObj","hasCache","config","getFromCache","direct","increase","getSearchConfig","searcher","cursor","addCursorPos","addActive","activedRanges","setCursorPos","initIndexs","addRange","setActive","clearSearch","clearActive","rangePos","lines","wholeWord","ignoreCase","cacheData","ranges","refreshSearchId","refreshSearch","retainActive","clearInactiveRange","clearRange","fSearcher","delta","setPrevActive","setNextActive","searchText","getRangeByCursorPos","getRangeText","getNowWord","startColumn","endColumn","setContextData","prop","setEditorData","multiCursorPos","moveCursor","updateRange","createRange","renderSelectedBg","setRange","clearCursorPos","same","getCursorsByLineColumn","_range","getRange","filterRange","removeCursor","dels","dWord","multiKeyCode","rightWrodPattern","leftWrodPattern","pos","setNowCursorPos","moveWidth","getStrWidth","getColumnByWidth","renderCursor","del","toDels","_column","updateCursorPos","history","doCommand","serial","_command","undo","redo","commandType","deleteContent","deleteLine","insertLine","moveLineUp","moveLineDown","copyLineDown","deleteCopyLineDown","copyLineUp","deleteCopyLineUp","lastCommand","sortComand","pushHistoryTime","_checkSameOp","_combCheck","_combCommand","commandList","_index","emmetWord","emmetAttr","emmetNum","endTag","Context","MIN_SAFE_INTEGER","fgLines","lineIdMap","renderedIdMap","renderedLineMap","initData","historyArr","cursorPosList","_historyArr","_insertMultiContent","updateHistory","pushHistory","prePos","historyObj","texts","lineDelta","columnDelta","commandObj","margin","_insertContent","alignmentTab","nowLineText","newPos","tabStr","_getTabStr","concat","lint","onInsertContentAfter","tokenizer","setLineWidth","plus","spaceNum","ceil","rangeList","_deleteMultiContent","_deleteRangePos","_deleteCursorPos","_deleteContent","startObj","deleteText","rangeUuid","originPos","endObj","maxWidthObj","clear","onDeleteContentAfter","setMaxWidth","_setMaxWidth","setMaxWidthTimer","_setLineWidth","setLineWidthTimer","moveLine","historyPosList","searchConifg","getConfig","pass","preLine","removeRange","enLine","_moveLine","clone","upLine","downLine","copyLine","originList","deleteCopyLine","tip","_getResult","expand","_getRanges","_updatePos","deltaArr","_getDeltaPos","autocomplete","cut","contexts","shiftKey","select","addCursorLineEnds","altKey","addCursorAbove","addCursorBelow","_moveCursor","selectAll","searchWord","openSearch","prevAutoTip","nextAutoTip","showReplace","replaceVisible","input1Focus","input1Height","composing","changeCase","changeWhole","input2Focus","input2Height","onKeyDown2","replaceText","searchPrev","preFocus","searchNext","nextFocus","close","searchPrevActive","searchNextActive","focus","requestAnimationFrame","directBlur","_html","tipList","nowIndex","$auto","getActiveIndex","content","SearchDialog","AutoTip","Tip","charObj","cursorVisible","cursorFocus","theme","renderHtmls","cursorLeft","scrollLeft","scrollTop","scrollerArea","errorMap","errors","searchVisible","activeLineBg","_hScrollWidth","myContext","handler","deep","initResizeEvent","resizeObserver","unbindEvent","showEditor","showCursor","_timer","hideCursor","forceCursorView","selectStarts","selectEnds","cursorList","_line","_renderSelectedBg","firstLine","lastLine","renderSelectionToken","_renderSelectionToken","_tokens","renderBracketMatch","clearSelectionToken","_clearSelectionToken","_setLine","renderError","$render","keyMap","_renderColError","_renderLineError","_renderError","foldLine","replaceMode","searchDialog","setContentHeight","setStartLine","_formatError","getStrWidthByLine","offsetX","w1","w2","getPosByEvent","getExactLeft","children","getToken","menuHeight","menu","time","onErrorMousemove","_checkErrorOver","onDocumentMmove","cancelAnimationFrame","_move","_run","onDocumentMouseUp","copyText","showMemu","fileMenuList","onFileMenuChange","editMenuList","onEditMenuChange","selectionMenuList","onSelectionMenuChange","preferenceMenuList","onPreferenceMenuChange","onMinimize","onUnmaximize","onMaximize","titleBar","openFolder","openFile","fileMenuVisible","editMenuVisible","selectionMenuVisible","preferenceMenuVisible","maximize","inject","currentWindow","showTabsize","tabSizeList","position","onTabsizeChange","showLanguage","nowLanguage","tabsizeVisible","hasEditor","languages","languageMap","onSashBegin","_scrollHeight","_paddingLeft","itemPadding","openedList","renderList","preActiveItem","readdir","dirPath","encoding","files","parentPath","sortFileList","getRenderList","_loopList","focusItem","_findItem","_changOpen","_item","endIn","SideTree","SideBarMenu","getRootList","title","onClickBtn","btns","overlay","iconColor","hide","cmdList","onChange","settingMap","foreground","background","fontStyle","tokenColors","_loadTheme","css","setDefaultColor","parseCss","insertCss","include","_addColors","extensions","fonts","font","fontFace","src","format","weight","iconDefinitions","fontCharacter","fontColor","iconPath","imgUrl","insertFont","_setFileExtensions","languageIds","_parseLanguageIds","dotReg","sReg","level","_getLevel","settings","dot","document","createElement","createTextNode","getElementsByTagName","appendChild","transparent","focusBorder","contrastBorder","contrastActiveBorder","isLight","isHc","_base","chroma","alpha","_scrollbar","_titleBar","_dropdown","_list","_menu","_statusBar","_sideBar","_editor","_tab","_editorWidget","_input","_toolbar","searchMenu","Editor","EditorBar","TitleBar","StatusBar","SideBar","Dialog","WindowMenu","CmdPanel","extensionsPath","nowId","idCount","titleCount","dialogVisible","getNowEditor","getNowContext","langeuages","_closeTab","cancel","buttonLabel","choseFolder","showOpenDialog","win","options","open","catch","fileObj","choseFile","_done","showDialog","writeFile","changeStatus","checkLanguage","loadExtensions","promises","_readVarFile","_addLanguage","_addTheme","_addIconTheme","getTabById","getTabByPath","getEditor","getContext","Window","axios","timeout","withCredentials","headers","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","fulfilled","every","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}